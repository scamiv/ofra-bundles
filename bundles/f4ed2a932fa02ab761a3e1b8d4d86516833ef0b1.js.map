{
  "version": 3,
  "sources": ["../.cache/openfront-v28/node_modules/seedrandom/lib/alea.js", "../.cache/openfront-v28/node_modules/seedrandom/lib/xor128.js", "../.cache/openfront-v28/node_modules/seedrandom/lib/xorwow.js", "../.cache/openfront-v28/node_modules/seedrandom/lib/xorshift7.js", "../.cache/openfront-v28/node_modules/seedrandom/lib/xor4096.js", "../.cache/openfront-v28/node_modules/seedrandom/lib/tychei.js", "../.cache/openfront-v28/node_modules/seedrandom/seedrandom.js", "../.cache/openfront-v28/node_modules/seedrandom/index.js", "../.cache/openfront-v28/node_modules/fastpriorityqueue/FastPriorityQueue.js", "../.cache/openfront-v28/node_modules/obscenity/dist/util/Char.js", "../.cache/openfront-v28/node_modules/obscenity/dist/censor/BuiltinStrategies.js", "../.cache/openfront-v28/node_modules/obscenity/dist/util/Interval.js", "../.cache/openfront-v28/node_modules/obscenity/dist/matcher/MatchPayload.js", "../.cache/openfront-v28/node_modules/obscenity/dist/censor/TextCensor.js", "../.cache/openfront-v28/node_modules/obscenity/dist/matcher/BlacklistedTerm.js", "../.cache/openfront-v28/node_modules/obscenity/dist/dataset/DataSet.js", "../.cache/openfront-v28/node_modules/obscenity/dist/pattern/Nodes.js", "../.cache/openfront-v28/node_modules/obscenity/dist/pattern/Util.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/TransformerSet.js", "../.cache/openfront-v28/node_modules/obscenity/dist/util/CharacterIterator.js", "../.cache/openfront-v28/node_modules/obscenity/dist/matcher/IntervalCollection.js", "../.cache/openfront-v28/node_modules/obscenity/dist/matcher/regexp/RegExpMatcher.js", "../.cache/openfront-v28/node_modules/obscenity/dist/matcher/Matcher.js", "../.cache/openfront-v28/node_modules/obscenity/dist/pattern/ParserError.js", "../.cache/openfront-v28/node_modules/obscenity/dist/pattern/Parser.js", "../.cache/openfront-v28/node_modules/obscenity/dist/pattern/Pattern.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/Transformers.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/collapse-duplicates/transformer.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/collapse-duplicates/index.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/remap-characters/index.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/resolve-confusables/confusables.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/resolve-confusables/index.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/resolve-leetspeak/dictionary.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/resolve-leetspeak/index.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/to-ascii-lowercase/index.js", "../.cache/openfront-v28/node_modules/obscenity/dist/preset/english.js", "../.cache/openfront-v28/node_modules/obscenity/dist/transformer/skip-non-alphabetic/index.js", "../.cache/openfront-v28/node_modules/obscenity/dist/index.js", "../.cache/openfront-v28/node_modules/dompurify/src/utils.ts", "../.cache/openfront-v28/node_modules/dompurify/src/tags.ts", "../.cache/openfront-v28/node_modules/dompurify/src/attrs.ts", "../.cache/openfront-v28/node_modules/dompurify/src/regexp.ts", "../.cache/openfront-v28/node_modules/dompurify/src/purify.ts", "../.cache/openfront-v28/src/core/execution/utils/BotNames.ts", "../.cache/openfront-v28/src/core/Util.ts", "../.cache/openfront-v28/src/core/game/Game.ts", "../.cache/openfront-v28/src/client/graphics/NameBoxCalculator.ts", "../.cache/openfront-v28/node_modules/zod/v4/classic/external.js", "../.cache/openfront-v28/node_modules/zod/v4/core/index.js", "../.cache/openfront-v28/node_modules/zod/v4/core/core.js", "../.cache/openfront-v28/node_modules/zod/v4/core/util.js", "../.cache/openfront-v28/node_modules/zod/v4/core/errors.js", "../.cache/openfront-v28/node_modules/zod/v4/core/parse.js", "../.cache/openfront-v28/node_modules/zod/v4/core/regexes.js", "../.cache/openfront-v28/node_modules/zod/v4/core/checks.js", "../.cache/openfront-v28/node_modules/zod/v4/core/doc.js", "../.cache/openfront-v28/node_modules/zod/v4/core/versions.js", "../.cache/openfront-v28/node_modules/zod/v4/core/schemas.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/index.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ar.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/az.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/be.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ca.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/cs.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/de.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/en.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/eo.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/es.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/fa.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/fi.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/fr.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/fr-CA.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/he.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/hu.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/id.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/it.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ja.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/kh.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ko.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/mk.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ms.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/nl.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/no.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ota.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ps.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/pl.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/pt.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ru.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/sl.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/sv.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ta.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/th.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/tr.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ua.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/ur.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/vi.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/zh-CN.js", "../.cache/openfront-v28/node_modules/zod/v4/locales/zh-TW.js", "../.cache/openfront-v28/node_modules/zod/v4/core/registries.js", "../.cache/openfront-v28/node_modules/zod/v4/core/api.js", "../.cache/openfront-v28/node_modules/zod/v4/core/function.js", "../.cache/openfront-v28/node_modules/zod/v4/core/to-json-schema.js", "../.cache/openfront-v28/node_modules/zod/v4/core/json-schema.js", "../.cache/openfront-v28/node_modules/zod/v4/classic/iso.js", "../.cache/openfront-v28/node_modules/zod/v4/classic/errors.js", "../.cache/openfront-v28/node_modules/zod/v4/classic/parse.js", "../.cache/openfront-v28/node_modules/zod/v4/classic/schemas.js", "../.cache/openfront-v28/node_modules/zod/v4/classic/compat.js", "../.cache/openfront-v28/node_modules/zod/v4/classic/coerce.js", "../.cache/openfront-v28/node_modules/colord/index.mjs", "../.cache/openfront-v28/src/core/PseudoRandom.ts", "../.cache/openfront-v28/node_modules/colord/plugins/lab.mjs", "../.cache/openfront-v28/node_modules/colord/plugins/lch.mjs", "../.cache/openfront-v28/node_modules/colorjs.io/src/multiply-matrices.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/util.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/hooks.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/defaults.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/adapt.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/parse.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/getColor.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/space.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/xyz-d65.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/rgbspace.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/getAll.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/get.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/setAll.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/set.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/xyz-d50.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/lab.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/angles.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/lch.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE/deltaE2000.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/oklab.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE/deltaEOK.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/inGamut.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/clone.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/distance.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE/deltaE76.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE/deltaECMC.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/xyz-abs-d65.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/jzazbz.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/jzczhz.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE/deltaEJz.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/ictcp.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE/deltaEITP.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/cam16.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/hct.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE/deltaEHCT.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE/index.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/toGamut.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/to.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/serialize.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/rec2020-linear.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/rec2020.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/p3-linear.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/srgb-linear.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/keywords.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/srgb.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/p3.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/display.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/equals.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/luminance.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/contrast/WCAG21.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/contrast/APCA.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/contrast/Michelson.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/contrast/Weber.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/contrast/Lstar.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/lab-d65.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/contrast/deltaPhi.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/contrast.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/chromaticity.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/deltaE.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/variations.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/interpolation.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/hsl.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/hsv.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/hwb.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/a98rgb-linear.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/a98rgb.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/prophoto-linear.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/prophoto.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/oklch.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/luv.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/lchuv.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/hsluv.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/hpluv.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/rec2100-pq.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/rec2100-hlg.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/CATs.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/acescg.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/acescc.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/color.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/spaces/index.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/space-accessors.js", "../.cache/openfront-v28/node_modules/colorjs.io/src/index.js", "../.cache/openfront-v28/src/core/configuration/Colors.ts", "../.cache/openfront-v28/src/core/configuration/ColorAllocator.ts", "../.cache/openfront-v28/src/core/configuration/PastelTheme.ts", "../.cache/openfront-v28/src/core/configuration/PastelThemeDark.ts", "../.cache/openfront-v28/src/core/configuration/DefaultConfig.ts", "../.cache/openfront-v28/src/core/configuration/DevConfig.ts", "../.cache/openfront-v28/src/core/configuration/PreprodConfig.ts", "../.cache/openfront-v28/src/core/configuration/ProdConfig.ts", "../.cache/openfront-v28/src/core/configuration/ConfigLoader.ts", "../.cache/openfront-v28/src/core/execution/alliance/AllianceExtensionExecution.ts", "../.cache/openfront-v28/src/core/execution/alliance/AllianceRequestExecution.ts", "../.cache/openfront-v28/src/core/execution/alliance/AllianceRequestReplyExecution.ts", "../.cache/openfront-v28/src/core/execution/alliance/BreakAllianceExecution.ts", "../.cache/openfront-v28/src/client/Utils.ts", "../.cache/openfront-v28/src/core/execution/utils/FlatBinaryHeap.ts", "../.cache/openfront-v28/src/core/execution/AttackExecution.ts", "../.cache/openfront-v28/src/core/execution/BoatRetreatExecution.ts", "../.cache/openfront-v28/src/core/execution/EmojiExecution.ts", "../.cache/openfront-v28/src/core/pathfinding/SerialAStar.ts", "../.cache/openfront-v28/src/core/pathfinding/MiniAStar.ts", "../.cache/openfront-v28/src/core/game/GameMap.ts", "../.cache/openfront-v28/src/core/game/TransportShipUtils.ts", "../.cache/openfront-v28/src/core/utilities/Line.ts", "../.cache/openfront-v28/src/core/pathfinding/PathFinding.ts", "../.cache/openfront-v28/src/core/execution/TransportShipExecution.ts", "../.cache/openfront-v28/src/core/execution/Util.ts", "../.cache/openfront-v28/src/core/execution/utils/BotBehavior.ts", "../.cache/openfront-v28/src/core/execution/BotExecution.ts", "../.cache/openfront-v28/src/core/execution/PlayerExecution.ts", "../.cache/openfront-v28/src/core/execution/SpawnExecution.ts", "../.cache/openfront-v28/src/core/execution/BotSpawner.ts", "../.cache/openfront-v28/src/core/game/GameUpdates.ts", "../.cache/openfront-v28/src/core/game/TrainStation.ts", "../.cache/openfront-v28/src/core/game/Railroad.ts", "../.cache/openfront-v28/src/core/execution/TrainExecution.ts", "../.cache/openfront-v28/src/core/execution/TrainStationExecution.ts", "../.cache/openfront-v28/src/core/execution/CityExecution.ts", "../.cache/openfront-v28/src/core/execution/ShellExecution.ts", "../.cache/openfront-v28/src/core/execution/DefensePostExecution.ts", "../.cache/openfront-v28/src/core/execution/FactoryExecution.ts", "../.cache/openfront-v28/src/core/execution/NukeExecution.ts", "../.cache/openfront-v28/src/core/execution/MIRVExecution.ts", "../.cache/openfront-v28/src/core/execution/MissileSiloExecution.ts", "../.cache/openfront-v28/src/core/execution/TradeShipExecution.ts", "../.cache/openfront-v28/src/core/execution/PortExecution.ts", "../.cache/openfront-v28/src/core/execution/SAMMissileExecution.ts", "../.cache/openfront-v28/src/core/execution/SAMLauncherExecution.ts", "../.cache/openfront-v28/src/core/execution/WarshipExecution.ts", "../.cache/openfront-v28/src/core/execution/ConstructionExecution.ts", "../.cache/openfront-v28/src/core/execution/DeleteUnitExecution.ts", "../.cache/openfront-v28/src/core/execution/DonateGoldExecution.ts", "../.cache/openfront-v28/src/core/execution/DonateTroopExecution.ts", "../.cache/openfront-v28/src/core/execution/EmbargoAllExecution.ts", "../.cache/openfront-v28/src/core/execution/EmbargoExecution.ts", "../.cache/openfront-v28/src/core/execution/nation/structureSpawnTileValue.ts", "../.cache/openfront-v28/src/core/execution/utils/AllianceBehavior.ts", "../.cache/openfront-v28/src/core/execution/FakeHumanExecution.ts", "../.cache/openfront-v28/src/core/execution/MarkDisconnectedExecution.ts", "../.cache/openfront-v28/src/core/execution/MoveWarshipExecution.ts", "../.cache/openfront-v28/src/core/execution/NoOpExecution.ts", "../.cache/openfront-v28/src/core/execution/QuickChatExecution.ts", "../.cache/openfront-v28/src/core/execution/RetreatExecution.ts", "../.cache/openfront-v28/src/core/execution/TargetPlayerExecution.ts", "../.cache/openfront-v28/src/core/execution/UpgradeStructureExecution.ts", "../.cache/openfront-v28/src/core/execution/utils/PlayerSpawner.ts", "../.cache/openfront-v28/src/core/execution/ExecutionManager.ts", "../.cache/openfront-v28/src/core/execution/WinCheckExecution.ts", "../.cache/openfront-v28/src/core/game/AllianceImpl.ts", "../.cache/openfront-v28/src/core/game/AllianceRequestImpl.ts", "../.cache/openfront-v28/src/core/game/AttackImpl.ts", "../.cache/openfront-v28/src/core/game/UnitImpl.ts", "../.cache/openfront-v28/src/core/game/PlayerImpl.ts", "../.cache/openfront-v28/src/core/execution/RailroadExecution.ts", "../.cache/openfront-v28/src/core/game/RailNetworkImpl.ts", "../.cache/openfront-v28/src/core/StatsSchemas.ts", "../.cache/openfront-v28/src/core/game/StatsImpl.ts", "../.cache/openfront-v28/src/core/game/TeamAssignment.ts", "../.cache/openfront-v28/src/core/game/TerraNulliusImpl.ts", "../.cache/openfront-v28/src/core/game/UnitGrid.ts", "../.cache/openfront-v28/src/core/game/GameImpl.ts", "../.cache/openfront-v28/src/core/game/TerrainMapLoader.ts", "../.cache/openfront-v28/node_modules/obscenity/dist/index.mjs", "../.cache/openfront-v28/resources/QuickChat.json", "../.cache/openfront-v28/src/client/data/countries.json", "../.cache/openfront-v28/node_modules/jose/dist/webapi/util/base64url.js", "../.cache/openfront-v28/node_modules/jose/dist/webapi/lib/buffer_utils.js", "../.cache/openfront-v28/node_modules/jose/dist/webapi/lib/base64.js", "../.cache/openfront-v28/src/core/PatternDecoder.ts", "../.cache/openfront-v28/src/core/CosmeticSchemas.ts", "../.cache/openfront-v28/src/core/Schemas.ts", "../.cache/openfront-v28/src/core/validations/username.ts", "../.cache/openfront-v28/src/core/GameRunner.ts"],
  "sourcesContent": ["// A port of an algorithm by Johannes Baag\u00F8e <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baag\u00F8e <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n", "// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n", "// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n", "// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Fran\u00E7ois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n", "// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n", "// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n", "/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n", "// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baag\u00F8e.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by Fran\u00E7ois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n", "/**\n * FastPriorityQueue.js : a fast heap-based priority queue  in JavaScript.\n * (c) the authors\n * Licensed under the Apache License, Version 2.0.\n *\n * Speed-optimized heap-based priority queue for modern browsers and JavaScript engines.\n *\n * Usage :\n         Installation (in shell, if you use node):\n         $ npm install fastpriorityqueue\n\n         Running test program (in JavaScript):\n\n         // var FastPriorityQueue = require(\"fastpriorityqueue\");// in node\n         var x = new FastPriorityQueue();\n         x.add(1);\n         x.add(0);\n         x.add(5);\n         x.add(4);\n         x.add(3);\n         x.peek(); // should return 0, leaves x unchanged\n         x.size; // should return 5, leaves x unchanged\n         while(!x.isEmpty()) {\n           console.log(x.poll());\n         } // will print 0 1 3 4 5\n         x.trim(); // (optional) optimizes memory usage\n */\n'use strict';\n\nvar defaultcomparator = function(a, b) {\n  return a < b;\n};\n\n\n// construct a new priority queue\n// the provided comparator function should take a, b and return *true* when a < b\nfunction FastPriorityQueue(comparator) {\n  if (!(this instanceof FastPriorityQueue)) return new FastPriorityQueue(comparator);\n  this.array = [];\n  this.size = 0;\n  this.compare = comparator || defaultcomparator;\n}\n\n// copy the priority queue into another, and return it. Queue items are shallow-copied.\n// Runs in `O(n)` time.\nFastPriorityQueue.prototype.clone = function() {\n  var fpq = new FastPriorityQueue(this.compare);\n  fpq.size = this.size;\n  fpq.array = this.array.slice(0, this.size);\n  return fpq;\n};\n\n// add an element into the queue\n// runs in `O(log n)` time\nFastPriorityQueue.prototype.add = function(myval) {\n  var i = this.size;\n  this.array[this.size] = myval;\n  this.size += 1;\n  var p;\n  var ap;\n  while (i > 0) {\n    p = (i - 1) >> 1;\n    ap = this.array[p];\n    if (!this.compare(myval, ap)) {\n      break;\n    }\n    this.array[i] = ap;\n    i = p;\n  }\n  this.array[i] = myval;\n};\n\n// replace the content of the heap by provided array and \"heapify it\"\nFastPriorityQueue.prototype.heapify = function(arr) {\n  this.array = arr;\n  this.size = arr.length;\n  var i;\n  for (i = this.size >> 1; i >= 0; i--) {\n    this._percolateDown(i);\n  }\n};\n\n// for internal use\nFastPriorityQueue.prototype._percolateUp = function(i, force) {\n  var myval = this.array[i];\n  var p;\n  var ap;\n  while (i > 0) {\n    p = (i - 1) >> 1;\n    ap = this.array[p];\n    // force will skip the compare\n    if (!force && !this.compare(myval, ap)) {\n      break;\n    }\n    this.array[i] = ap;\n    i = p;\n  }\n  this.array[i] = myval;\n};\n\n// for internal use\nFastPriorityQueue.prototype._percolateDown = function(i) {\n  var size = this.size;\n  var hsize = this.size >>> 1;\n  var ai = this.array[i];\n  var l;\n  var r;\n  var bestc;\n  while (i < hsize) {\n    l = (i << 1) + 1;\n    r = l + 1;\n    bestc = this.array[l];\n    if (r < size) {\n      if (this.compare(this.array[r], bestc)) {\n        l = r;\n        bestc = this.array[r];\n      }\n    }\n    if (!this.compare(bestc, ai)) {\n      break;\n    }\n    this.array[i] = bestc;\n    i = l;\n  }\n  this.array[i] = ai;\n};\n\n// internal\n// _removeAt(index) will remove the item at the given index from the queue,\n// retaining balance. returns the removed item, or undefined if nothing is removed.\nFastPriorityQueue.prototype._removeAt = function(index) {\n  if (index > this.size - 1 || index < 0) return undefined;\n\n  // impl1:\n  //this.array.splice(index, 1);\n  //this.heapify(this.array);\n  // impl2:\n  this._percolateUp(index, true);\n  return this.poll();\n};\n\n// remove(myval) will remove an item matching the provided value from the\n// queue, checked for equality by using the queue's comparator.\n// return true if removed, false otherwise.\nFastPriorityQueue.prototype.remove = function(myval) {\n  for (var i = 0; i < this.size; i++) {\n    if (!this.compare(this.array[i], myval) && !this.compare(myval, this.array[i])) {\n      // items match, comparator returns false both ways, remove item\n      this._removeAt(i);\n      return true;\n    }\n  }\n  return false;\n};\n\n// removeOne(callback) will execute the callback function for each item of the queue\n// and will remove the first item for which the callback will return true.\n// return the removed item, or undefined if nothing is removed.\nFastPriorityQueue.prototype.removeOne = function(callback) {\n  if (typeof callback !== \"function\") {\n    return undefined;\n  }\n  for (var i = 0; i < this.size; i++) {\n    if (callback(this.array[i])) {\n      return this._removeAt(i);\n    }\n  }\n};\n\n// remove(callback[, limit]) will execute the callback function for each item of\n// the queue and will remove each item for which the callback returns true, up to\n// a max limit of removed items if specified or no limit if unspecified.\n// return an array containing the removed items.\n// The callback function should be a pure function.\nFastPriorityQueue.prototype.removeMany = function(callback, limit) {\n  // Skip unnecessary processing for edge cases\n  if (typeof callback !== \"function\" || this.size < 1) {\n    return [];\n  }\n  limit = limit ? Math.min(limit, this.size) : this.size;\n\n  // Prepare the results container to hold up to the results limit\n  var resultSize = 0;\n  var result = new Array(limit);\n\n  // Prepare a temporary array to hold items we'll traverse through and need to keep\n  var tmpSize = 0;\n  var tmp = new Array(this.size);\n\n  while (resultSize < limit && !this.isEmpty()) {\n    // Dequeue items into either the results or our temporary array\n    var item = this.poll();\n    if (callback(item)) {\n      result[resultSize++] = item;\n    } else {\n      tmp[tmpSize++] = item;\n    }\n  }\n  // Update the result array with the exact number of results\n  result.length = resultSize;\n\n  // Re-add all the items we can keep\n  var i = 0;\n  while (i < tmpSize) {\n    this.add(tmp[i++]);\n  }\n\n  return result;\n};\n\n// Look at the top of the queue (one of the smallest elements) without removing it\n// executes in constant time\n//\n// Calling peek on an empty priority queue returns\n// the \"undefined\" value.\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/undefined\n//\nFastPriorityQueue.prototype.peek = function() {\n  if (this.size == 0) return undefined;\n  return this.array[0];\n};\n\n// remove the element on top of the heap (one of the smallest elements)\n// runs in logarithmic time\n//\n// If the priority queue is empty, the function returns the\n// \"undefined\" value.\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/undefined\n//\n// For long-running and large priority queues, or priority queues\n// storing large objects, you may  want to call the trim function\n// at strategic times to recover allocated memory.\nFastPriorityQueue.prototype.poll = function() {\n  if (this.size == 0) return undefined;\n  var ans = this.array[0];\n  if (this.size > 1) {\n    this.array[0] = this.array[--this.size];\n    this._percolateDown(0);\n  } else {\n    this.size -= 1;\n  }\n  return ans;\n};\n\n// This function adds the provided value to the heap, while removing\n// and returning one of the smallest elements (like poll). The size of the queue\n// thus remains unchanged.\nFastPriorityQueue.prototype.replaceTop = function(myval) {\n  if (this.size == 0) return undefined;\n  var ans = this.array[0];\n  this.array[0] = myval;\n  this._percolateDown(0);\n  return ans;\n};\n\n// recover unused memory (for long-running priority queues)\nFastPriorityQueue.prototype.trim = function() {\n  this.array = this.array.slice(0, this.size);\n};\n\n// Check whether the heap is empty\nFastPriorityQueue.prototype.isEmpty = function() {\n  return this.size === 0;\n};\n\n// iterate over the items in order, pass a callback that receives (item, index) as args.\n// TODO once we transpile, uncomment\n// if (Symbol && Symbol.iterator) {\n//   FastPriorityQueue.prototype[Symbol.iterator] = function*() {\n//     if (this.isEmpty()) return;\n//     var fpq = this.clone();\n//     while (!fpq.isEmpty()) {\n//       yield fpq.poll();\n//     }\n//   };\n// }\nFastPriorityQueue.prototype.forEach = function(callback) {\n  if (this.isEmpty() || typeof callback != 'function') return;\n  var i = 0;\n  var fpq = this.clone();\n  while (!fpq.isEmpty()) {\n    callback(fpq.poll(), i++);\n  }\n};\n\n// return the k 'smallest' elements of the queue as an array,\n// runs in O(k log k) time, the elements are not removed\n// from the priority queue.\nFastPriorityQueue.prototype.kSmallest = function(k) {\n  if ((this.size == 0) || (k<=0)) return [];\n  k = Math.min(this.size, k);\n  const newSize = Math.min(this.size, (2 ** (k - 1)) + 1);\n  if (newSize < 2) { return [this.peek()] }\n\n  const fpq = new FastPriorityQueue(this.compare);\n  fpq.size = newSize;\n  fpq.array = this.array.slice(0, newSize);\n\n  const smallest = new Array(k);\n  for (let i = 0; i < k; i++) {\n    smallest[i] = fpq.poll();\n  }\n  return smallest;\n}\n\nmodule.exports = FastPriorityQueue;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAndAssertSingleCodePoint = exports.invertCaseOfAlphabeticChar = exports.isUpperCase = exports.isLowerCase = exports.isAlphabetic = exports.isDigit = exports.isWordChar = exports.convertSurrogatePairToCodePoint = exports.isLowSurrogate = exports.isHighSurrogate = void 0;\nfunction isHighSurrogate(char) {\n    return 55296 /* CharacterCode.HighSurrogateStart */ <= char && char <= 56319 /* CharacterCode.HighSurrogateEnd */;\n}\nexports.isHighSurrogate = isHighSurrogate;\nfunction isLowSurrogate(char) {\n    return 56320 /* CharacterCode.LowSurrogateStart */ <= char && char <= 57343 /* CharacterCode.LowSurrogateEnd */;\n}\nexports.isLowSurrogate = isLowSurrogate;\n// See https://unicodebook.readthedocs.io/unicode_encodings.html#utf-16-surrogate-pairs.\nfunction convertSurrogatePairToCodePoint(highSurrogate, lowSurrogate) {\n    return ((highSurrogate - 55296 /* CharacterCode.HighSurrogateStart */) * 0x400 +\n        lowSurrogate -\n        56320 /* CharacterCode.LowSurrogateStart */ +\n        0x10000);\n}\nexports.convertSurrogatePairToCodePoint = convertSurrogatePairToCodePoint;\nfunction isWordChar(char) {\n    return isDigit(char) || isAlphabetic(char);\n}\nexports.isWordChar = isWordChar;\nfunction isDigit(char) {\n    return 48 /* CharacterCode.Zero */ <= char && char <= 57 /* CharacterCode.Nine */;\n}\nexports.isDigit = isDigit;\nfunction isAlphabetic(char) {\n    return isLowerCase(char) || isUpperCase(char);\n}\nexports.isAlphabetic = isAlphabetic;\nfunction isLowerCase(char) {\n    return 97 /* CharacterCode.LowerA */ <= char && char <= 122 /* CharacterCode.LowerZ */;\n}\nexports.isLowerCase = isLowerCase;\nfunction isUpperCase(char) {\n    return 65 /* CharacterCode.UpperA */ <= char && char <= 90 /* CharacterCode.UpperZ */;\n}\nexports.isUpperCase = isUpperCase;\n// Input must be a lower-case or upper-case ASCII alphabet character.\nfunction invertCaseOfAlphabeticChar(char) {\n    return char ^ 0x20;\n}\nexports.invertCaseOfAlphabeticChar = invertCaseOfAlphabeticChar;\n// Asserts that the string is comprised of one and only one code point,\n// then returns said code point.\nfunction getAndAssertSingleCodePoint(str) {\n    if ([...str].length !== 1)\n        throw new RangeError(`Expected the input string to be one code point in length.`);\n    return str.codePointAt(0);\n}\nexports.getAndAssertSingleCodePoint = getAndAssertSingleCodePoint;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomCharFromSetCensorStrategy = exports.fixedCharCensorStrategy = exports.fixedPhraseCensorStrategy = exports.grawlixCensorStrategy = exports.asteriskCensorStrategy = exports.keepEndCensorStrategy = exports.keepStartCensorStrategy = void 0;\nconst Char_1 = require(\"../util/Char\");\n/**\n * A text censoring strategy that extends another strategy, adding the first\n * character matched at the start of the generated string.\n *\n * @example\n * ```typescript\n * const strategy = keepStartCensorStrategy(grawlixCensorStrategy());\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you'\n * // After: 'f$@* you'\n * ```\n * @example\n * ```typescript\n * // Since keepEndCensorStrategy() returns another text censoring strategy, you can use it\n * // as the base strategy to pass to keepStartCensorStrategy().\n * const strategy = keepStartCensorStrategy(keepEndCensorStrategy(asteriskCensorStrategy()));\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you'\n * // After: 'f**k you'\n * ```\n * @param baseStrategy - Strategy to extend. It will be used to produce the end of\n * the generated string.\n * @returns A [[TextCensorStrategy]] for use with the [[TextCensor]].\n */\nfunction keepStartCensorStrategy(baseStrategy) {\n    return (ctx) => {\n        if (ctx.overlapsAtStart)\n            return baseStrategy(ctx);\n        const firstChar = String.fromCodePoint(ctx.input.codePointAt(ctx.startIndex));\n        return firstChar + baseStrategy({ ...ctx, matchLength: ctx.matchLength - 1 });\n    };\n}\nexports.keepStartCensorStrategy = keepStartCensorStrategy;\n/**\n * A text censoring strategy that extends another strategy, adding the last\n * character matched at the end of the generated string.\n *\n * @example\n * ```typescript\n * const strategy = keepEndCensorStrategy(asteriskCensorStrategy());\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you'\n * // After: '***k you'\n * ```\n * @param baseStrategy - Strategy to extend. It will be used to produce the start\n * of the generated string.\n * @returns A [[TextCensorStrategy]] for use with the [[TextCensor]].\n */\nfunction keepEndCensorStrategy(baseStrategy) {\n    return (ctx) => {\n        if (ctx.overlapsAtEnd)\n            return baseStrategy(ctx);\n        const lastChar = String.fromCodePoint(ctx.input.codePointAt(ctx.endIndex));\n        return baseStrategy({ ...ctx, matchLength: ctx.matchLength - 1 }) + lastChar;\n    };\n}\nexports.keepEndCensorStrategy = keepEndCensorStrategy;\n/**\n * A text censoring strategy that generates strings made up of asterisks (`*`).\n *\n * @example\n * ```typescript\n * const strategy = asteriskCensorStrategy();\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you'\n * // After: '**** you'\n * ```\n * @returns A [[TextCensorStrategy]] for use with the [[TextCensor]].\n */\nfunction asteriskCensorStrategy() {\n    return fixedCharCensorStrategy('*');\n}\nexports.asteriskCensorStrategy = asteriskCensorStrategy;\n/**\n * A text censoring strategy that generates\n * [grawlix](https://www.merriam-webster.com/words-at-play/grawlix-symbols-swearing-comic-strips),\n * i.e. strings that contain the characters `%`, `@`, `$`, `&`, and `*`.\n *\n * @example\n * ```typescript\n * const strategy = grawlixCensorStrategy();\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you'\n * // After: '%@&* you'\n * ```\n * @returns A [[TextCensorStrategy]] for use with the [[TextCensor]].\n */\nfunction grawlixCensorStrategy() {\n    return randomCharFromSetCensorStrategy('%@$&*');\n}\nexports.grawlixCensorStrategy = grawlixCensorStrategy;\n/**\n * A text censoring strategy that returns a fixed string.\n *\n * @example\n * ```typescript\n * // The replacement phrase '' effectively removes all matched regions\n * // from the string.\n * const strategy = fixedPhraseCensorStrategy('');\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you'\n * // After: ' you'\n * ```\n * @example\n * ```typescript\n * const strategy = fixedPhraseCensorStrategy('fudge');\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you'\n * // After: 'fudge you'\n * ```\n * @param phrase - Replacement phrase to use.\n * @returns A [[TextCensorStrategy]] for use with the [[TextCensor]].\n */\nfunction fixedPhraseCensorStrategy(phrase) {\n    return () => phrase;\n}\nexports.fixedPhraseCensorStrategy = fixedPhraseCensorStrategy;\n/**\n * A text censoring strategy that generates replacement strings that are made up\n * of the character given, repeated as many times as needed.\n *\n * @example\n * ```typescript\n * const strategy = fixedCharCensorStrategy('*');\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you'\n * // After: '**** you'.\n * ```\n * @param char - String that represents the code point which should be used when\n * generating the replacement string. Must be exactly one code point in length.\n * @returns A [[TextCensorStrategy]] for use with the [[TextCensor]].\n */\nfunction fixedCharCensorStrategy(char) {\n    // Make sure the input character is one code point in length.\n    (0, Char_1.getAndAssertSingleCodePoint)(char);\n    return (ctx) => char.repeat(ctx.matchLength);\n}\nexports.fixedCharCensorStrategy = fixedCharCensorStrategy;\n/**\n * A text censoring strategy that generates replacement strings made up of\n * random characters from the set of characters provided. The strings never\n * contain two of the same character in a row.\n *\n * @example\n * ```typescript\n * const strategy = randomCharFromSetCensorStrategy('$#!');\n * const censor = new TextCensor().setStrategy(strategy);\n * // Before: 'fuck you!'\n * // After: '!#$# you!'\n * ```\n * @param charset - Set of characters from which the replacement string should\n * be constructed. Must have at least two characters.\n * @returns A [[TextCensorStrategy]] for use with the [[TextCensor]].\n */\nfunction randomCharFromSetCensorStrategy(charset) {\n    const chars = [...charset];\n    if (chars.length < 2)\n        throw new Error('The character set passed must have at least 2 characters.');\n    return (ctx) => {\n        if (ctx.matchLength === 0)\n            return '';\n        let lastIdx = Math.floor(Math.random() * chars.length);\n        let censored = chars[lastIdx];\n        for (let i = 1; i < ctx.matchLength; i++) {\n            let idx = Math.floor(Math.random() * (chars.length - 1));\n            // Transform the distribution for idx from [0, len-1) to\n            // [0, lastIdx) \u222A (lastIdx, len) to exclude lastIdx while\n            // ensuring a uniform distribution of generated characters.\n            if (idx >= lastIdx)\n                idx++;\n            lastIdx = idx;\n            censored += chars[idx];\n        }\n        return censored;\n    };\n}\nexports.randomCharFromSetCensorStrategy = randomCharFromSetCensorStrategy;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compareIntervals = void 0;\nfunction compareIntervals(lowerBound0, upperBound0, lowerBound1, upperBound1) {\n    if (lowerBound0 < lowerBound1)\n        return -1;\n    if (lowerBound1 < lowerBound0)\n        return 1;\n    if (upperBound0 < upperBound1)\n        return -1;\n    if (upperBound1 < upperBound0)\n        return 1;\n    return 0;\n}\nexports.compareIntervals = compareIntervals;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compareMatchByPositionAndId = void 0;\nconst Interval_1 = require(\"../util/Interval\");\n/**\n * Compares two match payloads.\n *\n * If the first match payload's start index is less than the second's, `-1` is\n *   returned;\n * If the second match payload's start index is less than the first's, `1` is\n *   returned;\n * If the first match payload's end index is less than the second's, `-1` is\n *   returned;\n * If the second match payload's end index is less than the first's, `1` is\n *   returned;\n * If the first match payload's term ID is less than the second's, `-1` is\n *   returned;\n * If the first match payload's term ID is equal to the second's, `0` is\n *   returned;\n * Otherwise, `1` is returned.\n *\n * @param a - First match payload.\n * @param b - Second match payload.\n * @returns The result of the comparison: -1 if the first should sort lower than\n * the second, 0 if they are the same, and 1 if the second should sort lower\n * than the first.\n */\nfunction compareMatchByPositionAndId(a, b) {\n    const result = (0, Interval_1.compareIntervals)(a.startIndex, a.endIndex, b.startIndex, b.endIndex);\n    if (result !== 0)\n        return result;\n    return a.termId === b.termId ? 0 : a.termId < b.termId ? -1 : 1;\n}\nexports.compareMatchByPositionAndId = compareMatchByPositionAndId;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextCensor = void 0;\nconst MatchPayload_1 = require(\"../matcher/MatchPayload\");\nconst BuiltinStrategies_1 = require(\"./BuiltinStrategies\");\n/**\n * Censors regions of text matched by a [[Matcher]], supporting flexible\n * [[TextCensorStrategy | censoring strategies]].\n */\nclass TextCensor {\n    constructor() {\n        this.strategy = (0, BuiltinStrategies_1.grawlixCensorStrategy)();\n    }\n    /**\n     * Sets the censoring strategy, which is responsible for generating\n     * replacement text for regions of the text that should be censored.\n     *\n     * The default censoring strategy is the [[grawlixCensorStrategy]],\n     * generating text like `$%@*`. There are several other built-in strategies\n     * available:\n     * - [[keepStartCensorStrategy]] - extends another strategy and keeps the\n     *   first character matched, e.g. `f***`.\n     * - [[keepEndCensorStrategy]] - extends another strategy and keeps the last\n     *   character matched, e.g. `***k`.\n     * - [[asteriskCensorStrategy]] - replaces the text with asterisks, e.g.\n     *   `****`.\n     * - [[grawlixCensorStrategy]] - the default strategy, discussed earlier.\n     *\n     * Note that since censoring strategies are just functions (see the\n     * documentation for [[TextCensorStrategy]]), it is relatively simple to\n     * create your own.\n     *\n     * To ease creation of common censoring strategies, we provide a number of\n     * utility functions:\n     * - [[fixedPhraseCensorStrategy]] - generates a fixed phrase, e.g. `fudge`.\n     * - [[fixedCharCensorStrategy]] - generates replacement strings constructed\n     *   from the character given, repeated as many times as needed.\n     * - [[randomCharFromSetCensorStrategy]] - generates replacement strings\n     *   made up of random characters from the set of characters provided.\n     *\n     * @param strategy - Text censoring strategy to use.\n     */\n    setStrategy(strategy) {\n        this.strategy = strategy;\n        return this;\n    }\n    /**\n     * Applies the censoring strategy to the text, returning the censored text.\n     *\n     * **Overlapping regions**\n     *\n     * Overlapping regions are an annoying edge case to deal with when censoring\n     * text. There is no single best way to handle them, but the implementation\n     * of this method guarantees that overlapping regions will always be\n     * replaced, following the rules below:\n     *\n     * - Replacement text for matched regions will be generated in the order\n     *   specified by [[compareMatchByPositionAndId]];\n     * - When generating replacements for regions that overlap at the start with\n     *   some other region, the start index of the censor context passed to the\n     *   censoring strategy will be the end index of the first region, plus one.\n     *\n     * @param input - Input text.\n     * @param matches - A list of matches.\n     * @returns The censored text.\n     */\n    applyTo(input, matches) {\n        if (matches.length === 0)\n            return input;\n        const sorted = [...matches].sort(MatchPayload_1.compareMatchByPositionAndId);\n        let censored = '';\n        let lastIndex = 0; // end index of last match, plus one\n        for (let i = 0; i < sorted.length; i++) {\n            const match = sorted[i];\n            if (lastIndex > match.endIndex)\n                continue; // completely contained in the previous span\n            const overlapsAtStart = match.startIndex < lastIndex;\n            // Add the chunk of text between the end of the last match and the\n            // start of the current match.\n            if (!overlapsAtStart)\n                censored += input.slice(lastIndex, match.startIndex);\n            const actualStartIndex = Math.max(lastIndex, match.startIndex);\n            const overlapsAtEnd = i < sorted.length - 1 && // not the last match\n                match.endIndex >= sorted[i + 1].startIndex && // end index of this match and start index of next one overlap\n                match.endIndex < sorted[i + 1].endIndex; // doesn't completely contain next match\n            censored += this.strategy({ ...match, startIndex: actualStartIndex, input, overlapsAtStart, overlapsAtEnd });\n            lastIndex = match.endIndex + 1;\n        }\n        censored += input.slice(lastIndex);\n        return censored;\n    }\n}\nexports.TextCensor = TextCensor;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignIncrementingIds = void 0;\n/**\n * Assigns incrementing IDs to the patterns provided, starting with 0. It is\n * useful if you have a list of patterns to match against but don't care about\n * identifying which pattern matched.\n *\n * @example\n * ```typescript\n * const matcher = new RegExpMatcher({\n *  ...,\n *  blacklistedTerms: assignIncrementingIds([\n *      pattern`f?uck`,\n *      pattern`|shit|`,\n *  ]),\n * });\n * ```\n * @param patterns - List of parsed patterns.\n * @returns A list of blacklisted terms with valid IDs which can then be passed\n * to the [[RegExpMatcher]].\n */\nfunction assignIncrementingIds(patterns) {\n    let currentId = 0;\n    return patterns.map((pattern) => ({ id: currentId++, pattern }));\n}\nexports.assignIncrementingIds = assignIncrementingIds;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PhraseBuilder = exports.DataSet = void 0;\nconst BlacklistedTerm_1 = require(\"../matcher/BlacklistedTerm\");\n/**\n * Holds phrases (groups of patterns and whitelisted terms), optionally\n * associating metadata with them.\n *\n * @typeParam MetadataType - Metadata type for phrases. Note that the metadata\n * type is implicitly nullable.\n */\nclass DataSet {\n    constructor() {\n        this.containers = [];\n        this.patternCount = 0;\n        this.patternIdToPhraseContainer = new Map(); // pattern ID => index of its container\n    }\n    /**\n     * Adds all the phrases from the dataset provided to this one.\n     *\n     * @example\n     * ```typescript\n     * const customDataset = new DataSet().addAll(englishDataset);\n     * ```\n     * @param other - Other dataset.\n     */\n    addAll(other) {\n        for (const container of other.containers)\n            this.registerContainer(container);\n        return this;\n    }\n    /**\n     * Removes phrases that match the predicate given.\n     *\n     * @example\n     * ```typescript\n     * const customDataset = new DataSet<{ originalWord: string }>()\n     * \t.addAll(englishDataset)\n     * \t.removePhrasesIf((phrase) => phrase.metadata.originalWord === 'fuck');\n     * ```\n     * @param predicate - A predicate that determines whether or not a phrase should be removed.\n     * Return `true` to remove, `false` to keep.\n     */\n    removePhrasesIf(predicate) {\n        // Clear the internal state, then gradually rebuild it by adding the\n        // containers that should be kept.\n        this.patternCount = 0;\n        this.patternIdToPhraseContainer.clear();\n        const containers = this.containers.splice(0);\n        for (const container of containers) {\n            const remove = predicate(container);\n            if (!remove)\n                this.registerContainer(container);\n        }\n        return this;\n    }\n    /**\n     * Adds a phrase to this dataset.\n     *\n     * @example\n     * ```typescript\n     * const data = new DataSet<{ originalWord: string }>()\n     * \t.addPhrase((phrase) => phrase.setMetadata({ originalWord: 'fuck' })\n     * \t\t.addPattern(pattern`fuck`)\n     * \t\t.addPattern(pattern`f[?]ck`)\n     * \t\t.addWhitelistedTerm('Afck'))\n     * \t.build();\n     * ```\n     * @param fn - A function that takes a [[PhraseBuilder]], adds\n     * patterns/whitelisted terms/metadata to it, and returns it.\n     */\n    addPhrase(fn) {\n        const container = fn(new PhraseBuilder()).build();\n        this.registerContainer(container);\n        return this;\n    }\n    /**\n     * Retrieves the phrase metadata associated with a pattern and returns a\n     * copy of the match payload with said metadata attached to it.\n     *\n     * @example\n     * ```typescript\n     * const matches = matcher.getAllMatches(input);\n     * const matchesWithPhraseMetadata = matches.map((match) => dataset.getPayloadWithPhraseMetadata(match));\n     * // Now we can access the 'phraseMetadata' property:\n     * const phraseMetadata = matchesWithPhraseMetadata[0].phraseMetadata;\n     * ```\n     * @param payload - Original match payload.\n     */\n    getPayloadWithPhraseMetadata(payload) {\n        const offset = this.patternIdToPhraseContainer.get(payload.termId);\n        if (offset === undefined) {\n            throw new Error(`The pattern with ID ${payload.termId} does not exist in this dataset.`);\n        }\n        return {\n            ...payload,\n            phraseMetadata: this.containers[offset].metadata,\n        };\n    }\n    /**\n     * Returns the dataset in a format suitable for usage with the [[RegExpMatcher]].\n     *\n     * @example\n     * ```typescript\n     * // With the RegExpMatcher:\n     * const matcher = new RegExpMatcher({\n     * \t...dataset.build(),\n     * \t// additional options here\n     * });\n     * ```\n     */\n    build() {\n        return {\n            blacklistedTerms: (0, BlacklistedTerm_1.assignIncrementingIds)(this.containers.flatMap((p) => p.patterns)),\n            whitelistedTerms: this.containers.flatMap((p) => p.whitelistedTerms),\n        };\n    }\n    registerContainer(container) {\n        const offset = this.containers.push(container) - 1;\n        for (let i = 0, phraseId = this.patternCount; i < container.patterns.length; i++, phraseId++) {\n            this.patternIdToPhraseContainer.set(phraseId, offset);\n            this.patternCount++;\n        }\n    }\n}\nexports.DataSet = DataSet;\n/**\n * Builder for phrases.\n */\nclass PhraseBuilder {\n    constructor() {\n        this.patterns = [];\n        this.whitelistedTerms = [];\n    }\n    /**\n     * Associates a pattern with this phrase.\n     *\n     * @param pattern - Pattern to add.\n     */\n    addPattern(pattern) {\n        this.patterns.push(pattern);\n        return this;\n    }\n    /**\n     * Associates a whitelisted pattern with this phrase.\n     *\n     * @param term - Whitelisted term to add.\n     */\n    addWhitelistedTerm(term) {\n        this.whitelistedTerms.push(term);\n        return this;\n    }\n    /**\n     * Associates some metadata with this phrase.\n     *\n     * @param metadata - Metadata to use.\n     */\n    setMetadata(metadata) {\n        this.metadata = metadata;\n        return this;\n    }\n    /**\n     * Builds the phrase, returning a [[PhraseContainer]] for use with the\n     * [[DataSet]].\n     */\n    build() {\n        return {\n            patterns: this.patterns,\n            whitelistedTerms: this.whitelistedTerms,\n            metadata: this.metadata,\n        };\n    }\n}\nexports.PhraseBuilder = PhraseBuilder;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SyntaxKind = void 0;\n/**\n * An enumeration of the kinds of nodes there are.\n */\nvar SyntaxKind;\n(function (SyntaxKind) {\n    SyntaxKind[SyntaxKind[\"Optional\"] = 0] = \"Optional\";\n    SyntaxKind[SyntaxKind[\"Wildcard\"] = 1] = \"Wildcard\";\n    SyntaxKind[SyntaxKind[\"Literal\"] = 2] = \"Literal\";\n    SyntaxKind[SyntaxKind[\"BoundaryAssertion\"] = 3] = \"BoundaryAssertion\";\n})(SyntaxKind || (exports.SyntaxKind = SyntaxKind = {}));\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRegExpStringForNode = exports.compilePatternToRegExp = exports.potentiallyMatchesEmptyString = void 0;\nconst Nodes_1 = require(\"./Nodes\");\nfunction potentiallyMatchesEmptyString(pattern) {\n    return pattern.nodes.every((node) => node.kind === Nodes_1.SyntaxKind.Optional);\n}\nexports.potentiallyMatchesEmptyString = potentiallyMatchesEmptyString;\nfunction compilePatternToRegExp(pattern) {\n    let regExpStr = '';\n    if (pattern.requireWordBoundaryAtStart)\n        regExpStr += '\\\\b';\n    for (const node of pattern.nodes)\n        regExpStr += getRegExpStringForNode(node);\n    if (pattern.requireWordBoundaryAtEnd)\n        regExpStr += `\\\\b`;\n    return new RegExp(regExpStr, 'gs');\n}\nexports.compilePatternToRegExp = compilePatternToRegExp;\nconst regExpSpecialChars = ['[', '.', '*', '+', '?', '^', '$', '{', '}', '(', ')', '|', '[', '\\\\', ']'].map((str) => str.charCodeAt(0));\nfunction getRegExpStringForNode(node) {\n    switch (node.kind) {\n        case Nodes_1.SyntaxKind.Literal: {\n            let str = '';\n            for (const char of node.chars) {\n                if (regExpSpecialChars.includes(char))\n                    str += '\\\\';\n                str += String.fromCodePoint(char);\n            }\n            return str;\n        }\n        case Nodes_1.SyntaxKind.Optional:\n            return `(?:${getRegExpStringForNode(node.childNode)})?`;\n        case Nodes_1.SyntaxKind.Wildcard:\n            return `.`;\n    }\n}\nexports.getRegExpStringForNode = getRegExpStringForNode;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransformerSet = void 0;\nclass TransformerSet {\n    constructor(transformers) {\n        this.transformers = transformers;\n        this.statefulTransformers = Array.from({ length: this.transformers.length });\n        for (let i = 0; i < this.transformers.length; i++) {\n            const transformer = this.transformers[i];\n            if (transformer.type === 1 /* TransformerType.Stateful */) {\n                this.statefulTransformers[i] = transformer.factory();\n            }\n        }\n    }\n    applyTo(char) {\n        let transformed = char;\n        for (let i = 0; i < this.transformers.length && transformed !== undefined; i++) {\n            const transformer = this.transformers[i];\n            if (transformer.type === 0 /* TransformerType.Simple */)\n                transformed = transformer.transform(transformed);\n            else\n                transformed = this.statefulTransformers[i].transform(transformed);\n        }\n        return transformed;\n    }\n    resetAll() {\n        for (let i = 0; i < this.transformers.length; i++) {\n            if (this.transformers[i].type === 1 /* TransformerType.Stateful */) {\n                this.statefulTransformers[i].reset();\n            }\n        }\n    }\n}\nexports.TransformerSet = TransformerSet;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CharacterIterator = void 0;\nconst Char_1 = require(\"./Char\");\nclass CharacterIterator {\n    constructor(input) {\n        this.lastPosition = -1;\n        this.currentPosition = 0;\n        this._lastWidth = 0;\n        this._input = input ?? '';\n    }\n    get input() {\n        return this._input;\n    }\n    setInput(input) {\n        this._input = input;\n        this.reset();\n        return this;\n    }\n    reset() {\n        this.lastPosition = -1;\n        this.currentPosition = 0;\n        this._lastWidth = 0;\n    }\n    next() {\n        if (this.done)\n            return { done: true, value: undefined };\n        this.lastPosition = this.currentPosition;\n        const char = this._input.charCodeAt(this.currentPosition++);\n        this._lastWidth = 1;\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        if (this.done || !(0, Char_1.isHighSurrogate)(char))\n            return { done: false, value: char };\n        // Do we have a surrogate pair?\n        const next = this._input.charCodeAt(this.currentPosition);\n        if ((0, Char_1.isLowSurrogate)(next)) {\n            this._lastWidth++;\n            this.currentPosition++;\n            return { done: false, value: (0, Char_1.convertSurrogatePairToCodePoint)(char, next) };\n        }\n        return { done: false, value: char };\n    }\n    // Position of the iterator; equals the start index of the last character consumed.\n    // -1 if no characters were consumed yet.\n    get position() {\n        return this.lastPosition;\n    }\n    // Width of the last character consumed; 2 if it was a surrogate pair and 1 otherwise.\n    // 0 if no characters were consumed yet.\n    get lastWidth() {\n        return this._lastWidth;\n    }\n    get done() {\n        return this.currentPosition >= this._input.length;\n    }\n    [Symbol.iterator]() {\n        return this;\n    }\n}\nexports.CharacterIterator = CharacterIterator;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IntervalCollection = void 0;\nclass IntervalCollection {\n    constructor() {\n        this.dirty = false;\n        this.intervals = [];\n    }\n    insert(lowerBound, upperBound) {\n        this.intervals.push([lowerBound, upperBound]);\n        this.dirty = true;\n    }\n    query(lowerBound, upperBound) {\n        if (this.intervals.length === 0)\n            return false;\n        if (this.dirty) {\n            this.dirty = false;\n            // Sort by lower bound.\n            this.intervals.sort(\n            /* istanbul ignore next: not possible to write a robust test for this */\n            (a, b) => (a[0] < b[0] ? -1 : b[0] < a[0] ? 1 : 0));\n        }\n        for (const interval of this.intervals) {\n            // Since the intervals are sorted by lower bound, if we see an\n            // interval with a lower bound greater than the target, we can skip\n            // checking all the ones after it as it's impossible that they fully\n            // contain the target interval.\n            if (interval[0] > lowerBound)\n                break;\n            if (interval[0] <= lowerBound && upperBound <= interval[1])\n                return true;\n        }\n        return false;\n    }\n    values() {\n        return this.intervals.values();\n    }\n    [Symbol.iterator]() {\n        return this.values();\n    }\n}\nexports.IntervalCollection = IntervalCollection;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RegExpMatcher = void 0;\nconst Char_1 = require(\"../../util/Char\");\nconst Util_1 = require(\"../../pattern/Util\");\nconst TransformerSet_1 = require(\"../../transformer/TransformerSet\");\nconst CharacterIterator_1 = require(\"../../util/CharacterIterator\");\nconst IntervalCollection_1 = require(\"../IntervalCollection\");\nconst MatchPayload_1 = require(\"../MatchPayload\");\n/**\n * An implementation of the [[Matcher]] interface using regular expressions and\n * string searching methods.\n */\nclass RegExpMatcher {\n    /**\n     * Creates a new [[RegExpMatcher]] with the options given.\n     *\n     * @example\n     * ```typescript\n     * // Use the options provided by the English preset.\n     * const matcher = new RegExpMatcher({\n     * \t...englishDataset.build(),\n     * \t...englishRecommendedTransformers,\n     * });\n     * ```\n     * @example\n     * ```typescript\n     * // Simple matcher that only has blacklisted patterns.\n     * const matcher = new RegExpMatcher({\n     *  blacklistedTerms: assignIncrementingIds([\n     *      pattern`fuck`,\n     *      pattern`f?uck`, // wildcards (?)\n     *      pattern`bitch`,\n     *      pattern`b[i]tch` // optionals ([i] matches either \"i\" or \"\")\n     *  ]),\n     * });\n     *\n     * // Check whether some string matches any of the patterns.\n     * const doesMatch = matcher.hasMatch('fuck you bitch');\n     * ```\n     * @example\n     * ```typescript\n     * // A more advanced example, with transformers and whitelisted terms.\n     * const matcher = new RegExpMatcher({\n     *  blacklistedTerms: [\n     *      { id: 1, pattern: pattern`penis` },\n     *      { id: 2, pattern: pattern`fuck` },\n     *  ],\n     *  whitelistedTerms: ['pen is'],\n     *  blacklistMatcherTransformers: [\n     *      resolveConfusablesTransformer(), // '\uD83C\uDD70' => 'a'\n     *      resolveLeetSpeakTransformer(), // '$' => 's'\n     *      foldAsciiCharCaseTransformer(), // case insensitive matching\n     *      skipNonAlphabeticTransformer(), // 'f.u...c.k' => 'fuck'\n     *      collapseDuplicatesTransformer(), // 'aaaa' => 'a'\n     *  ],\n     * });\n     *\n     * // Output all matches.\n     * console.log(matcher.getAllMatches('fu.....uuuuCK the pen is mightier than the sword!'));\n     * ```\n     * @param options - Options to use.\n     */\n    constructor({ blacklistedTerms, whitelistedTerms = [], blacklistMatcherTransformers = [], whitelistMatcherTransformers = [], }) {\n        this.blacklistedTerms = this.compileTerms(blacklistedTerms);\n        this.validateWhitelistedTerms(whitelistedTerms);\n        this.whitelistedTerms = whitelistedTerms;\n        this.blacklistMatcherTransformers = new TransformerSet_1.TransformerSet(blacklistMatcherTransformers);\n        this.whitelistMatcherTransformers = new TransformerSet_1.TransformerSet(whitelistMatcherTransformers);\n    }\n    getAllMatches(input, sorted = false) {\n        const whitelistedIntervals = this.getWhitelistedIntervals(input);\n        const [transformedToOrigIndex, transformed] = this.applyTransformers(input, this.blacklistMatcherTransformers);\n        const matches = [];\n        for (const blacklistedTerm of this.blacklistedTerms) {\n            for (const match of transformed.matchAll(blacklistedTerm.regExp)) {\n                const origStartIndex = transformedToOrigIndex[match.index];\n                let origEndIndex = transformedToOrigIndex[match.index + match[0].length - 1];\n                // End index is (unfortunately) inclusive, so adjust as necessary.\n                if (origEndIndex < input.length - 1 && // not the last character\n                    (0, Char_1.isHighSurrogate)(input.charCodeAt(origEndIndex)) && // character is a high surrogate\n                    (0, Char_1.isLowSurrogate)(input.charCodeAt(origEndIndex + 1)) // next character is a low surrogate\n                ) {\n                    origEndIndex++;\n                }\n                if (!whitelistedIntervals.query(origStartIndex, origEndIndex)) {\n                    matches.push({\n                        termId: blacklistedTerm.id,\n                        startIndex: origStartIndex,\n                        endIndex: origEndIndex,\n                        matchLength: [...match[0]].length,\n                    });\n                }\n            }\n        }\n        if (sorted)\n            matches.sort(MatchPayload_1.compareMatchByPositionAndId);\n        return matches;\n    }\n    hasMatch(input) {\n        const whitelistedIntervals = this.getWhitelistedIntervals(input);\n        const [transformedToOrigIndex, transformed] = this.applyTransformers(input, this.blacklistMatcherTransformers);\n        for (const blacklistedTerm of this.blacklistedTerms) {\n            for (const match of transformed.matchAll(blacklistedTerm.regExp)) {\n                const origStartIndex = transformedToOrigIndex[match.index];\n                let origEndIndex = transformedToOrigIndex[match.index + match[0].length - 1];\n                // End index is (unfortunately) inclusive, so adjust as necessary.\n                if (origEndIndex < input.length - 1 && // not the last character\n                    (0, Char_1.isHighSurrogate)(input.charCodeAt(origEndIndex)) && // character is a high surrogate\n                    (0, Char_1.isLowSurrogate)(input.charCodeAt(origEndIndex + 1)) // next character is a low surrogate\n                ) {\n                    origEndIndex++;\n                }\n                if (!whitelistedIntervals.query(origStartIndex, origEndIndex))\n                    return true;\n            }\n        }\n        return false;\n    }\n    getWhitelistedIntervals(input) {\n        const matches = new IntervalCollection_1.IntervalCollection();\n        const [transformedToOrigIndex, transformed] = this.applyTransformers(input, this.whitelistMatcherTransformers);\n        for (const whitelistedTerm of this.whitelistedTerms) {\n            let lastEnd = 0;\n            for (let startIndex = transformed.indexOf(whitelistedTerm, lastEnd); startIndex !== -1; startIndex = transformed.indexOf(whitelistedTerm, lastEnd)) {\n                let origEndIndex = transformedToOrigIndex[startIndex + whitelistedTerm.length - 1];\n                // End index is (unfortunately) inclusive, so adjust as necessary.\n                if (origEndIndex < input.length - 1 && // not the last character\n                    (0, Char_1.isHighSurrogate)(input.charCodeAt(origEndIndex)) && // character is a high surrogate\n                    (0, Char_1.isLowSurrogate)(input.charCodeAt(origEndIndex + 1)) // next character is a low surrogate\n                ) {\n                    origEndIndex++;\n                }\n                matches.insert(transformedToOrigIndex[startIndex], origEndIndex);\n                lastEnd = startIndex + whitelistedTerm.length;\n            }\n        }\n        return matches;\n    }\n    applyTransformers(input, transformers) {\n        const transformedToOrigIndex = [];\n        let transformed = '';\n        const iter = new CharacterIterator_1.CharacterIterator(input);\n        for (const char of iter) {\n            const transformedChar = transformers.applyTo(char);\n            if (transformedChar !== undefined) {\n                transformed += String.fromCodePoint(transformedChar);\n                while (transformedToOrigIndex.length < transformed.length)\n                    transformedToOrigIndex.push(iter.position);\n            }\n        }\n        transformers.resetAll();\n        return [transformedToOrigIndex, transformed];\n    }\n    compileTerms(terms) {\n        const compiled = [];\n        const seenIds = new Set();\n        for (const term of terms) {\n            if (seenIds.has(term.id))\n                throw new Error(`Duplicate blacklisted term ID ${term.id}.`);\n            if ((0, Util_1.potentiallyMatchesEmptyString)(term.pattern)) {\n                throw new Error(`Pattern with ID ${term.id} potentially matches empty string; this is unsupported.`);\n            }\n            compiled.push({\n                id: term.id,\n                regExp: (0, Util_1.compilePatternToRegExp)(term.pattern),\n            });\n            seenIds.add(term.id);\n        }\n        return compiled;\n    }\n    validateWhitelistedTerms(whitelist) {\n        if (whitelist.some((term) => term.length === 0)) {\n            throw new Error('Whitelisted term set contains empty string; this is unsupported.');\n        }\n    }\n}\nexports.RegExpMatcher = RegExpMatcher;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParserError = void 0;\n/**\n * Custom error thrown by the parser when syntactical errors are detected.\n */\nclass ParserError extends Error {\n    constructor(message, line, column) {\n        super(`${line}:${column}: ${message}`);\n        this.name = 'ParserError';\n        this.line = line;\n        this.column = column;\n    }\n}\nexports.ParserError = ParserError;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nconst Char_1 = require(\"../util/Char\");\nconst CharacterIterator_1 = require(\"../util/CharacterIterator\");\nconst Nodes_1 = require(\"./Nodes\");\nconst ParserError_1 = require(\"./ParserError\");\nconst supportsEscaping = [\n    92 /* CharacterCode.Backslash */,\n    91 /* CharacterCode.LeftSquareBracket */,\n    93 /* CharacterCode.RightSquareBracket */,\n    63 /* CharacterCode.QuestionMark */,\n    124 /* CharacterCode.VerticalBar */,\n];\nconst supportsEscapingList = supportsEscaping.map((char) => `'${String.fromCodePoint(char)}'`).join(', ');\nconst eof = -1;\nclass Parser {\n    constructor() {\n        this.input = '';\n        this.line = 1;\n        this.column = 1;\n        this.position = 0;\n        this.lastColumn = 1;\n        this.lastWidth = 0;\n    }\n    parse(input) {\n        this.setInput(input);\n        const nodes = [];\n        const firstNode = this.nextNode();\n        const requireWordBoundaryAtStart = firstNode?.kind === Nodes_1.SyntaxKind.BoundaryAssertion;\n        if (firstNode && !requireWordBoundaryAtStart)\n            nodes.push(firstNode);\n        let requireWordBoundaryAtEnd = false;\n        while (!this.done) {\n            const pos = this.mark();\n            const node = this.nextNode();\n            if (node.kind !== Nodes_1.SyntaxKind.BoundaryAssertion) {\n                nodes.push(node);\n                continue;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            if (!this.done) {\n                this.reportError('Boundary assertions are not supported in this position; they are only allowed at the start / end of the pattern.', pos);\n            }\n            requireWordBoundaryAtEnd = true;\n        }\n        return { requireWordBoundaryAtStart, requireWordBoundaryAtEnd, nodes };\n    }\n    setInput(input) {\n        this.input = input;\n        this.line = 1;\n        this.column = 1;\n        this.position = 0;\n        this.lastColumn = 1;\n        this.lastWidth = 0;\n        return this;\n    }\n    nextNode() {\n        switch (this.peek()) {\n            case eof:\n                return undefined;\n            case 91 /* CharacterCode.LeftSquareBracket */:\n                return this.parseOptional();\n            case 93 /* CharacterCode.RightSquareBracket */:\n                this.reportError(`Unexpected ']' with no corresponding '['.`);\n            // eslint-disable-next-line no-fallthrough\n            case 63 /* CharacterCode.QuestionMark */:\n                return this.parseWildcard();\n            case 124 /* CharacterCode.VerticalBar */:\n                return this.parseBoundaryAssertion();\n            default:\n                return this.parseLiteral();\n        }\n    }\n    get done() {\n        return this.position >= this.input.length;\n    }\n    // Optional ::= '[' Wildcard | Text ']'\n    parseOptional() {\n        const preOpenBracketPos = this.mark();\n        this.next(); // '['\n        const postOpenBracketPos = this.mark();\n        if (this.done)\n            this.reportError(\"Unexpected unclosed '['.\", preOpenBracketPos);\n        if (this.accept('['))\n            this.reportError('Unexpected nested optional node.', postOpenBracketPos);\n        const childNode = this.nextNode();\n        if (childNode.kind === Nodes_1.SyntaxKind.BoundaryAssertion) {\n            this.reportError('Boundary assertions are not supported in this position; they are only allowed at the start / end of the pattern.', postOpenBracketPos);\n        }\n        if (!this.accept(']'))\n            this.reportError(\"Unexpected unclosed '['.\");\n        return { kind: Nodes_1.SyntaxKind.Optional, childNode: childNode };\n    }\n    // Wildcard ::= '?'\n    parseWildcard() {\n        this.next(); // '?'\n        return { kind: Nodes_1.SyntaxKind.Wildcard };\n    }\n    // BoundaryAssertion ::= '|'\n    parseBoundaryAssertion() {\n        this.next(); // '|'\n        return { kind: Nodes_1.SyntaxKind.BoundaryAssertion };\n    }\n    // Literal              ::= (NON_SPECIAL | '\\' SUPPORTS_ESCAPING)+\n    // NON_SPECIAL         ::= _any character other than '\\', '?', '[', ']', or '|'_\n    // SUPPORTS_ESCAPING   ::= '\\' | '[' | ']' | '?' | '|'\n    parseLiteral() {\n        const chars = [];\n        while (!this.done) {\n            if (this.accept('[]?|')) {\n                this.backup();\n                break;\n            }\n            const next = this.next();\n            if (next === 92 /* CharacterCode.Backslash */) {\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n                if (this.done) {\n                    this.backup();\n                    this.reportError('Unexpected trailing backslash.');\n                }\n                // Can we escape the next character?\n                const escaped = this.next();\n                if (!supportsEscaping.includes(escaped)) {\n                    const repr = String.fromCodePoint(escaped);\n                    this.backup();\n                    this.reportError(`Cannot escape character '${repr}'; the only characters that can be escaped are the following: ${supportsEscapingList}.`);\n                }\n                chars.push(escaped);\n            }\n            else {\n                chars.push(next);\n            }\n        }\n        return { kind: Nodes_1.SyntaxKind.Literal, chars };\n    }\n    reportError(message, { line = this.line, column = this.column } = {}) {\n        throw new ParserError_1.ParserError(message, line, column);\n    }\n    // Marks the current position.\n    mark() {\n        return { line: this.line, column: this.column };\n    }\n    // Accepts any code point in the charset provided. Iff accepted, the character is consumed.\n    accept(charset) {\n        const next = this.next();\n        const iter = new CharacterIterator_1.CharacterIterator(charset);\n        for (const char of iter) {\n            if (char === next)\n                return true;\n        }\n        this.backup();\n        return false;\n    }\n    // Reads one code point from the input, without consuming it.\n    peek() {\n        const next = this.next();\n        this.backup();\n        return next;\n    }\n    // Consumes one code point from the input.\n    next() {\n        if (this.done)\n            return eof;\n        const char = this.input.charCodeAt(this.position++);\n        this.lastWidth = 1;\n        if (char === 10 /* CharacterCode.Newline */) {\n            this.lastColumn = this.column;\n            this.column = 1;\n            this.line++;\n            return char;\n        }\n        this.lastColumn = this.column++;\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        if (!(0, Char_1.isHighSurrogate)(char) || this.done)\n            return char;\n        // Do we have a surrogate pair?\n        const next = this.input.charCodeAt(this.position);\n        if ((0, Char_1.isLowSurrogate)(next)) {\n            this.position++;\n            this.lastWidth++;\n            return (0, Char_1.convertSurrogatePairToCodePoint)(char, next);\n        }\n        return char;\n    }\n    // Steps back one character; can only be called once per call to next().\n    backup() {\n        this.position -= this.lastWidth;\n        this.column = this.lastColumn;\n        // Adjust line count if needed.\n        if (this.lastWidth === 1 && this.input.charCodeAt(this.position) === 10 /* CharacterCode.Newline */) {\n            this.line--;\n        }\n    }\n}\nexports.Parser = Parser;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseRawPattern = exports.pattern = void 0;\nconst Parser_1 = require(\"./Parser\");\nconst parser = new Parser_1.Parser();\n/**\n * Parses a pattern, which matches a set of strings; see the `Syntax` section\n * for details. This function is intended to be called as a [template\n * tag](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates).\n *\n * **Syntax**\n *\n * Generally speaking, in patterns, characters are interpreted literally. That\n * is, they match exactly what they are: `a` matches an `a`, `b` matches a `b`,\n * `;` matches a `;`, and so on.\n *\n * However, there are several constructs that have special meaning:\n *\n * - `[expr]` matches either the empty string or `expr` (an **optional\n *   expression**). `expr` may be a sequence of literal characters or a wildcard\n *   (see below).\n * - `?` matches any character (a **wildcard**).\n * - A `|` at the start or end of the pattern asserts position at a word\n *   boundary (a **word boundary assertion**). If `|` is at the start, it\n *   ensures that the match either starts at the start of the string or a non-\n *   word character preceding it; if it is at the end, it ensures that the match\n *   either ends at the end of the string or a non-word character follows it.\n *\n *   A word character is an lower-case or upper-case ASCII alphabet character or\n *   an ASCII digit.\n * - In a literal, a backslash may be used to **escape** one of the\n *   meta-characters mentioned above so that it does match literally: `\\\\[`\n *   matches `[`, and does not mark the start of an optional expression.\n *\n *   **Note about escapes**\n *\n *   As this function operates on raw strings, double-escaping backslashes is\n *   not necessary:\n *\n *   ```typescript\n *   // Use this:\n *   const parsed = pattern`hello \\[`;\n *   // Don't use this:\n *   const parsed = pattern`hello \\\\[`;\n *   ```\n *\n * **Examples**\n *\n * - `baz` matches `baz` exactly.\n *\n * - `b\\[ar` matches `b[ar` exactly.\n *\n * - `d?ude` matches `d`, then any character, then `ude`. All of the following\n *   strings are matched by this pattern:\n *   - `dyude`\n *   - `d;ude`\n *   - `d!ude`\n *\n * - `h[?]ello` matches either `h`, any character, then `ello` or the literal\n *   string `hello`. The set of strings it matches is equal to the union of the\n *   set of strings that the two patterns `hello` and `h?ello` match. All of the\n *   following strings are matched by this pattern:\n *   - `hello`\n *   - `h!ello`\n *   - `h;ello`\n *\n * - `|foobar|` asserts position at a word boundary, matches the literal string\n *   `foobar`, and asserts position at a word boundary:\n *   - `foobar` matches, as the start and end of string count as word\n *     boundaries;\n *   - `yofoobar` does _not_ match, as `f` is immediately preceded by a word\n *     character;\n *   - `hello foobar bye` matches, as `f` is immediately preceded by a non-word\n *     character, and `r` is immediately followed by a non-word character.\n *\n * **Grammar**\n *\n * ```\n * Pattern  ::= '['? Atom* ']'?\n * Atom     ::= Literal | Wildcard | Optional\n * Optional ::= '[' Literal | Wildcard ']'\n * Literal  ::= (NON_SPECIAL | '\\' SUPPORTS_ESCAPING)+\n *\n * NON_SPECIAL       ::= _any character other than '\\', '?', '[', ']', or '|'_\n * SUPPORTS_ESCAPING ::= '\\' | '[' | ']' | '?' | '|'\n * ```\n *\n * @example\n * ```typescript\n * const parsed = pattern`hello?`; // match \"hello\", then any character\n * ```\n * @example\n * ```typescript\n * const parsed = pattern`w[o]rld`; // match \"wrld\" or \"world\"\n * ```\n * @example\n * ```typescript\n * const parsed = pattern`my initials are \\[??\\]`; // match \"my initials are [\", then any two characters, then a \"]\"\n * ```\n * @returns The parsed pattern, which can then be used with the\n * [[RegExpMatcher]].\n * @throws [[ParserError]] if a syntactical error was detected while parsing the\n * pattern.\n * @see [[parseRawPattern]] if you want to parse a string into a pattern without\n * using a template tag.\n */\nfunction pattern(strings, ...expressions) {\n    let result = strings.raw[0];\n    for (const [i, expression] of expressions.entries()) {\n        result += expression;\n        result += strings.raw[i + 1];\n    }\n    return parser.parse(result);\n}\nexports.pattern = pattern;\n/**\n * Parses a string as a pattern directly.\n *\n * **Note**\n *\n * It is recommended to use the [[pattern | pattern template tag]] instead of\n * this function for literal patterns (i.e. ones without dynamic content).\n *\n * @param pattern - The string to parse.\n * @throws [[ParserError]] if a syntactical error was detected while parsing the\n * pattern.\n * @returns The parsed pattern, which can then be used with the\n * [[RegExpMatcher]].\n */\nfunction parseRawPattern(pattern) {\n    return parser.parse(pattern);\n}\nexports.parseRawPattern = parseRawPattern;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createStatefulTransformer = exports.createSimpleTransformer = void 0;\n/**\n * Creates a container holding the transformer function provided. Simple\n * transformers are suitable for stateless transformations, e.g., a\n * transformation that maps certain characters to others. For transformations\n * that need to keep around state, see `createStatefulTransformer`.\n *\n * @example\n * ```typescript\n * function lowercaseToUppercase(char) {\n *  return isLowercase(char) ? char - 32 : char;\n * }\n *\n * const transformer = createSimpleTransformer(lowercaseToUppercase);\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @example\n * ```typescript\n * function ignoreAllNonDigitChars(char) {\n *  return isDigit(char) ? char : undefined;\n * }\n *\n * const transformer = createSimpleTransformer(ignoreAllNonDigitChars);\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @param transformer - Function that applies the transformation. It should\n * accept one argument, the input character, and return the transformed\n * character. A return value of `undefined` indicates that the character should\n * be ignored.\n * @returns A container holding the transformer, which can then be passed to the\n * [[RegExpMatcher]].\n */\nfunction createSimpleTransformer(transformer) {\n    return { type: 0 /* TransformerType.Simple */, transform: transformer };\n}\nexports.createSimpleTransformer = createSimpleTransformer;\n/**\n * Creates a container holding the stateful transformer. Stateful transformers\n * are objects which satisfy the `StatefulTransformer` interface. They are\n * suitable for transformations that require keeping around some state regarding\n * the characters previously transformed in the text.\n *\n * @example\n * ```typescript\n * class IgnoreDuplicateCharactersTransformer implements StatefulTransformer {\n *  private lastChar = -1;\n *\n *  public transform(char: number) {\n *      if (char === this.lastChar) return undefined;\n *      this.lastChar = char;\n *      return char;\n *  }\n *\n *  public reset() {\n *      this.lastChar = -1;\n *  }\n * }\n *\n * const transformer = createStatefulTransformer(() => new IgnoreDuplicateCharactersTransformer());\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @param factory A function that returns an instance of the stateful\n * transformer.\n * @returns A container holding the stateful transformer, which can then be\n * passed to the [[RegExpMatcher]].\n */\nfunction createStatefulTransformer(factory) {\n    return { type: 1 /* TransformerType.Stateful */, factory };\n}\nexports.createStatefulTransformer = createStatefulTransformer;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CollapseDuplicatesTransformer = void 0;\nclass CollapseDuplicatesTransformer {\n    constructor({ defaultThreshold, customThresholds }) {\n        this.remaining = -1;\n        this.lastChar = -1;\n        this.defaultThreshold = defaultThreshold;\n        this.customThresholds = customThresholds;\n    }\n    transform(char) {\n        if (char === this.lastChar) {\n            return this.remaining-- > 0 ? char : undefined;\n        }\n        const threshold = this.customThresholds.get(char) ?? this.defaultThreshold;\n        this.remaining = threshold - 1;\n        this.lastChar = char;\n        return threshold > 0 ? char : undefined;\n    }\n    reset() {\n        this.remaining = -1;\n        this.lastChar = -1;\n    }\n}\nexports.CollapseDuplicatesTransformer = CollapseDuplicatesTransformer;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.collapseDuplicatesTransformer = void 0;\nconst Char_1 = require(\"../../util/Char\");\nconst Transformers_1 = require(\"../Transformers\");\nconst transformer_1 = require(\"./transformer\");\n/**\n * Creates a transformer that collapses duplicate characters. This is useful for\n * detecting variants of patterns in which a character is repeated to bypass\n * detection.\n *\n * As an example, the pattern `hi` does not match `hhiii` by default, as the\n * frequency of the characters does not match. With this transformer, `hhiii`\n * would become `hi`, and would therefore match the pattern.\n *\n * **Application order**\n *\n * It is recommended that this transformer be applied after all other\n * transformers. Using it before other transformers may have the effect of not\n * catching duplicates of certain characters that were originally different but\n * became the same after a series of transformations.\n *\n * **Warning**\n *\n * This transformer should be used with caution, as while it can make certain\n * patterns match text that wouldn't have been matched before, it can also go\n * the other way. For example, the pattern `hello` clearly matches `hello`, but\n * with this transformer, by default, `hello` would become `helo` which does\n * _not_ match. In this cases, the `customThresholds` option can be used to\n * allow two `l`s in a row, making it leave `hello` unchanged.\n *\n * @example\n * ```typescript\n * // Collapse runs of the same character.\n * const transformer = collapseDuplicatesTransformer();\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @example\n * ```typescript\n * // Collapse runs of characters other than 'a'.\n * const transformer = collapseDuplicatesTransformer({ customThresholds: new Map([['a', Infinity]]) });\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @param options - Options for the transformer.\n * @returns A container holding the transformer, which can then be passed to the\n * [[RegExpMatcher]].\n */\nfunction collapseDuplicatesTransformer({ defaultThreshold = 1, customThresholds = new Map(), } = {}) {\n    const map = createCharacterToThresholdMap(customThresholds);\n    return (0, Transformers_1.createStatefulTransformer)(() => new transformer_1.CollapseDuplicatesTransformer({ defaultThreshold, customThresholds: map }));\n}\nexports.collapseDuplicatesTransformer = collapseDuplicatesTransformer;\nfunction createCharacterToThresholdMap(customThresholds) {\n    const map = new Map();\n    for (const [str, threshold] of customThresholds) {\n        if (threshold < 0)\n            throw new RangeError('Expected all thresholds to be non-negative.');\n        const char = (0, Char_1.getAndAssertSingleCodePoint)(str);\n        map.set(char, threshold);\n    }\n    return map;\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.remapCharactersTransformer = void 0;\nconst Char_1 = require(\"../../util/Char\");\nconst CharacterIterator_1 = require(\"../../util/CharacterIterator\");\nconst Transformers_1 = require(\"../Transformers\");\n/**\n * Maps certain characters to other characters, leaving other characters\n * unchanged.\n *\n * **Application order**\n *\n * It is recommended that this transformer be applied near the start of the\n * transformer chain.\n *\n * @example\n * ```typescript\n * // Transform 'a' to 'b'.\n * const transformer = remapCharactersTransformer({ 'b': 'a' });\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @example\n * ```typescript\n * // Transform '\uD83C\uDD71\uFE0F' to 'b', and use a map instead of an object as the argument.\n * const transformer = remapCharactersTransformer(new Map([['b', '\uD83C\uDD71\uFE0F']]));\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @example\n * ```typescript\n * // Transform '\uD83C\uDDF4' and '0' to 'o'.\n * const transformer = remapCharactersTransformer({ o: '\uD83C\uDDF40' });\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @param mapping - A map/object mapping certain characters to others.\n * @returns A container holding the transformer, which can then be passed to the\n * [[RegExpMatcher]].\n * @see [[resolveConfusablesTransformer|  Transformer that handles confusable Unicode characters]]\n * @see [[resolveLeetSpeakTransformer | Transformer that handles leet-speak]]\n */\nfunction remapCharactersTransformer(mapping) {\n    const map = createOneToOneMap(mapping);\n    return (0, Transformers_1.createSimpleTransformer)((c) => map.get(c) ?? c);\n}\nexports.remapCharactersTransformer = remapCharactersTransformer;\nfunction createOneToOneMap(mapping) {\n    const map = new Map();\n    const iterable = mapping instanceof Map ? mapping.entries() : Object.entries(mapping);\n    for (const [original, equivalents] of iterable) {\n        const originalChar = (0, Char_1.getAndAssertSingleCodePoint)(original);\n        const iter = new CharacterIterator_1.CharacterIterator(equivalents);\n        for (const equivalent of iter)\n            map.set(equivalent, originalChar);\n    }\n    return map;\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.confusables = void 0;\n/**\n * Maps confusable Unicode characters to their normalized equivalents.\n *\n * @copyright\n * The data here is taken from the\n * [confusables](https://github.com/gc/confusables) library.\n *\n * ```text\n * # The MIT License (MIT)\n *\n * Copyright \u00A9 2019 https://github.com/gc/\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \u201CSoftware\u201D), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \u201CAS IS\u201D, WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n * ```\n */\nexports.confusables = new Map([\n    [' ', ' '],\n    ['0', '\u24FF'],\n    ['1', '\u24F5\u278A\u2474\u00B9\uD835\uDFCF\uD835\uDFD9\uFF11\uD835\uDFF7\uD835\uDFE3\u2488\uD835\uDFED1\u2780\u2081\u2460\u2776\u2960'],\n    ['2', '\u24F6\u2489\u2475\u278B\u01BB\u00B2\u14BF\uD835\uDFDA\uFF12\uD835\uDFEE\uD835\uDFE4\u14BE\uD835\uDFF8\u01A7\uD835\uDFD0\u2461\u1D24\u2082\u2781\u2777\u161D\u01A8'],\n    ['3', '\u00B3\u2CCC\uA7AB\uD835\uDFD1\u2128\uD835\uDFDB\uD835\uDFEF\uD835\uDFE5\uA76A\u278C\u0417\u021C\u24F7\u04E0\u01B7\uFF13\uD835\uDFF9\u2476\u248A\u0292\u0293\u01EF\u01EE\u01BA\uD835\uDD74\u1DBE\u0437\u19A1\u2782\u2462\u2083\u1D9A\u1D23\u1D1F\u2778\u0498\u0499\u04EC\u04E1\u04ED\u04DF\u04DE'],\n    ['4', '\u278D\u04B6\u13CE\uD835\uDFDC\u04B7\u24F8\u04B8\u04B9\u04F4\u04F5\u1DA3\uFF14\u0447\u3129\u2074\u2783\u2084\u2463\u2779\u04CB\u2477\u248B'],\n    ['5', '\uD835\uDFF1\u24F9\u278E\u01BC\uD835\uDFD3\uD835\uDFFB\uD835\uDFDD\uD835\uDFE7\uFF15\u2784\u2085\u2464\u2075\u277A\u01BD\u2478\u248C'],\n    ['6', '\u2CD2\u13EE\uD835\uDFDE\uD835\uDFE8\uD835\uDFD4\u278F\u24FA\u03EC\u03ED\u2076\u0431\uFF16\u19C8\u2465\u2785\u2086\u277B\u2479\u248D'],\n    ['7', '\u24FB\uD801\uDCD2\u2790\uFF17\u2077\u2466\u2087\u277C\u2786\u247A\u248E'],\n    ['8', '\uD800\uDF1A\u2791\u24FC\uFF18\uD835\uDFE0\uD835\uDFEA\u09EA\u2078\u2088\uD835\uDFF4\u2787\u2467\u277D\uD835\uDFFE\uD835\uDFD6\u247B\u248F'],\n    ['9', '\uA76E\u2CCA\u24FD\u2792\u0A67\u09ED\u0B68\uFF19\uD835\uDFEB\uD835\uDFFF\uD835\uDFD7\u2079\u2089\u0533\u2788\u2468\u277E\u247C\u2490'],\n    ['A', '\uD83C\uDD30\u13AF\uD800\uDEA0\uD835\uDD6C\uD835\uDF1C\uD835\uDC34\uA4EE\u13AA\uD835\uDEA8\uAB7A\uD835\uDF56\uD83C\uDD50\u212B\u2200\uD83C\uDDE6\u20B3\uD83C\uDD70\uD835\uDC9C\uD835\uDE08\uD835\uDC00\uD835\uDD38\u0434\u01FA\u15C5\u24B6\uFF21\u0391\u1F8B\u15E9\u0102\u00C3\u00C5\u01CD\u0200\u0202\u0100\u023A\u0104\u028C\u039B\u03BB\u019B\u1D00\u1D2C\u0414\u0410\u120D\u00C4\u2090\u1571\u00AA\u01DE\u04D2\u0386\u1EA0\u1EA2\u1EA6\u1EA8\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1FB8\u1FB9\u1FBA\u1FBB\u1FBC\u1F88\u1F89\u1F8A\u1F8C\u1F8D\u1F8E\u1F8F\u1F08\u1F09\u1F0A\u1F0B\u1F0C\u1F0D\u1F0E\u1F0F\u1E00\u0226\u01E0\u04D0\u00C0\u00C1\u00C2\u1EA4\u1EAA\uD835\uDEE2\uD835\uDCD0\uD835\uDE70\uD835\uDE3C'],\n    ['a', '\u2202\u237A\u24D0\u0571\u01DF\u1D43\u1D8F\u249C\u0430\u0252\uFF41\u03B1\u0203\u0201\u0E04\u01CE\u10DB\u00E4\u0251\u0101\u0250\u0105\u1F84\u1E9A\u1EA1\u1EA3\u01E1\u1EA7\u1EB5\u1E01\u0227\u04D1\u04D3\u00E3\u00E5\u03AC\u1F70\u1F71\u0103\u1EA9\u1EB1\u1EB3\u1EB7\u1F80\u1F81\u1F82\u1F83\u1F85\u1F86\u1FB0\u1FB1\u1FB2\u1FB3\u1FB4\u1D90\u1FB6\u1FB7\u1F00\u1F01\u1F02\u1F03\u1F04\u1F05\u1F06\u1F07\u1F87\u1EAD\u1EAF\u00E0\u00E1\u00E2\u1EA5\u1EAB\u01FB\u2C65\uD835\uDC1A\uD835\uDC4E\uD835\uDC82\uD835\uDCB6\uD835\uDCEA\uD835\uDD1E\uD835\uDD52\uD835\uDD86\uD835\uDDBA\uD835\uDDEE\uD835\uDE22\uD835\uDE56\uD835\uDE8A\uD835\uDEC2\uD835\uDEFC\uD835\uDF36\uD835\uDF70\uD835\uDFAA\u2376'],\n    ['B', '\uD800\uDF01\uD835\uDC69\uD835\uDD6D\uD83C\uDD31\uD800\uDEA1\uD835\uDDA1\uD835\uDE3D\uA4D0\uD835\uDDD5\uD835\uDE09\uD835\uDF1D\uD800\uDE82\uD835\uDEA9\uD835\uDC01\uD835\uDEE3\uD835\uDF57\uD835\uDC35\uD835\uDE71\uD835\uDD39\u13F4\u13FC\uD835\uDF91\uA7B4\uD835\uDD05\uD83C\uDD51\u0E3F\uD835\uDCD1\u15FF\u15FE\u15FD\uD83C\uDD71\u24B7\uFF22\u0432\u03D0\u15F7\u0181\u4E43\u00DF\u10EA\u10E9\u0E56\u03B2\u026E\u0411\u0545\u0E52\u1656\u0299\u1D2E\u1D47\u130C\u1E04\u212C\u0392\u0412\u1E9E\u1E02\u1E06\u0243\u0D26\u15F9\u15F8\u1D5D\u165E\u165F\u165D\u16D2\u1657\u1658\u1D03\uD83C\uDDE7'],\n    ['b', '\u13CF\uD835\uDC1B\uD835\uDE23\uD835\uDCB7\uD835\uDD1F\uD835\uDCEB\uD835\uDD87\uD835\uDDBB\uD835\uDC4F\uD835\uDE57\uD835\uDD53\uD835\uDC83\uD835\uDDEF\uD835\uDE8B\u266D\u1473\u1488\uFF42\u159A\u1579\u157A\u24D1\u1E03\u1E05\u048D\u044A\u1E07\u0183\u0253\u0185\u15AF\u0184\u042C\u1472\u00FE\u0182\u249D\u042A\u1D80\u147F\u1480\u1482\u1481\u147E\u044C\u0180\u048C\u0462\u0463\u150E'],\n    ['C', '\u13DF\u2CA4\uD83C\uDD32\uA4DA\uD800\uDEA2\uD800\uDF02\uD83C\uDD72\uD801\uDC15\uD83C\uDD52\u263E\u010C\u00C7\u24B8\uFF23\u2183\u0187\u1455\u3108\u00A2\u096E\u21BB\u0108\u03FE\u0547\u023B\u1645\u1D9C\u249E\u0106\u0480\u010A\u00A9\u091F\u0186\u2102\u212D\u03F9\u0421\u531A\u1E08\u04AA\u0297\u1456\u1461\u1462\u1463\u1464\u1465\u216D\uD835\uDC02\uD835\uDC36\uD835\uDC6A\uD835\uDC9E\uD835\uDCD2\uD835\uDD6E\uD835\uDDA2\uD835\uDDD6\uD835\uDE0A\uD835\uDE3E\u150D'],\n    ['c', '\u2CA5\uD801\uDC3D\uABAF\u0109\uFF43\u24D2\u0107\u010D\u010B\u00E7\u0481\u0188\u1E09\u023C\u2184\u0441\u122D\u1D04\u03F2\u04AB\uA49D\u03C2\u027D\u03DB\uD835\uDE72\u1466\u19DA\uD835\uDC1C\uD835\uDC50\uD835\uDC84\uD835\uDCB8\uD835\uDCEC\uD835\uDD20\uD835\uDD54\uD835\uDD88\uD835\uDDBC\uD835\uDDF0\uD835\uDE24\uD835\uDE58\uD835\uDE8C\u20B5\uD83C\uDDE8\u1974\u14BC\u217D'],\n    ['D', '\u13A0\uD83C\uDD33\uD835\uDD21\uD835\uDD89\uD835\uDD3B\uD835\uDDD7\uD835\uDE0B\uD835\uDE73\uD835\uDC37\uD835\uDCD3\uD835\uDC03\uD835\uDC6B\uD835\uDD6F\uD835\uDDA3\uD835\uDD07\uD835\uDE3F\uAB70\u2145\uD835\uDC9F\uA4D3\uD83C\uDD73\uD83C\uDD53\u24B9\uFF24\u0189\u15EA\u018A\u00D0\u053A\u1D05\u1D30\u2181\u1E0A\u0110\u00DE\u216E\u15DE\u146F\u010E\u1E0C\u1E10\u1E12\u1E0E\u15EB\u15EC\u15DF\u15E0\u1D9B\u1D06\uD83C\uDDE9'],\n    ['d', '\u13E7\uA4D2\uD835\uDCED\u1D6D\u20AB\u0503\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\u1D48\u249F\u0501\u217E\u1D81\u0500\u147A\u147B\u147C\u147D\u1484\u1470\u1471\u1D91\uD835\uDD55\uD835\uDDBD\uD835\uDC51\uD835\uDE25\uD835\uDC85\uD835\uDE59\uD835\uDC1D\uD835\uDDF1\uD835\uDE8D\u2146\uD835\uDCB9\u02A0\u056A'],\n    ['E', '\uAB7C\uD83C\uDD34\uD835\uDE40\uD835\uDD3C\uD800\uDE86\uD835\uDEAC\uA4F0\uD835\uDF5A\uD835\uDF94\uD835\uDCD4\uD835\uDC6C\uD835\uDDD8\uD83C\uDD74\uD83C\uDD54\u24BA\u0388\uFF25\u018E\u1F1D\u156E\u0190\u30E2\u0404\u1D07\u1D31\u1D49\u00C9\u4E47\u0401\u0246\uA085\u20AC\u00C8\u2130\u0395\u0415\u2D39\u13AC\u0112\u0114\u0116\u0118\u011A\u00CA\u00CB\u0510\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u1E14\u1E16\u1EBA\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u1E18\u1E1A\u1F18\u1F19\u1F1A\u1F1B\u1F1C\u1FC8\u1FC9\u04D6\u1F72\u1F73\u0400\u03F5\uD83C\uDDEA'],\n    ['e', '\uD835\uDC52\uD835\uDCEE\uD835\uDD56\uD835\uDD8A\uD835\uDE26\uD835\uDDF2\uD835\uDE8E\uD835\uDE5A\uD835\uDC86\uD835\uDD22\uD835\uDDBE\uD835\uDC1E\u04BE\u04BF\u24D4\uFF45\u24A0\u00E8\u19C9\u00E9\u1D92\u00EA\u0258\u1F14\u1EC1\u1EBF\u1EC5\u0AEF\u01DD\u0454\u03B5\u0113\u04BD\u025B\u1EC3\u1EBD\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u0247\u2091\u0119\u1E1D\u1E19\u1E1B\u212E\u0435\u0511\u0450\u04D7\u1971\u0451\u1F10\u1F11\u1F12\u1F13\u1F15\u212F'],\n    ['F', '\uD83C\uDD35\uD800\uDE87\uD835\uDD09\uD835\uDE0D\uD800\uDEA5\uA4DD\uA798\uD83C\uDD75\uD83C\uDD55\uD835\uDCD5\u24BB\uFF26\u0493\u0492\u15B4\u0191\u0532\u03DD\u127B\u1E1E\u2131\u03DC\u20A3\uD83C\uDDEB\u2132'],\n    ['f', '\uD835\uDC1F\uD835\uDD8B\u24D5\uFF46\u0192\u1E1F\u0283\u0562\u1DA0\u24A1\u017F\uA2B0\u0284\u2231\u1D82\uD835\uDE27'],\n    ['G', '\uA4D6\u13F3\uD83C\uDD36\u13C0\u13FB\uD835\uDD3E\uD835\uDCD6\uD835\uDC6E\uD835\uDD72\uAB90\uD835\uDCA2\uD835\uDE42\uD835\uDDA6\uD835\uDE76\uD835\uDD0A\uD835\uDC3A\uD835\uDC06\uD83C\uDD76\uD83C\uDD56\u24BC\uFF27\u0262\u0193\u029B\u0122\u161C\u1D33\u01F4\u0120\u050C\u011C\u1E20\u011E\u01E6\u01E4\u050D\u20B2\uD83C\uDDEC\u2141'],\n    ['g', '\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u0581\u0AED\u01E5\u0260\uFEED\uFEEE\u1D4D\u24A2\u210A\u0261\u19C1\uD835\uDC20\uD835\uDC54\uD835\uDC88\uD835\uDCF0\uD835\uDD24\uD835\uDD58\uD835\uDD8C\uD835\uDDC0\uD835\uDDF4\uD835\uDE28\uD835\uDE5C\uD835\uDE90'],\n    ['H', '\uD83C\uDD37\uD835\uDF22\uA4E7\uD835\uDE0F\uD835\uDC3B\uD835\uDF5C\uD835\uDDA7\uD800\uDECF\uD835\uDDDB\uAB8B\u210D\u13BB\u210C\u2C8E\uD835\uDC6F\uD835\uDF96\uD83C\uDD77\uD83C\uDD57\u12DE\u01F6\u050B\u24BD\uFF28\u0124\u16BA\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u04A2\u04A3\u04A4\u1FCA\u1FCB\u1FCC\u1F28\u1F29\u1F2A\u1F2B\u1F2D\u1F2E\u1F2F\u1F98\u1F99\u1F9A\u1F9B\u1F9C\u1F9D\u1F9E\u1F9F\u04C9\u04C8\u04A5\u0389\u043D\u5344\u2653\uD835\uDCD7\u210B\u041D\uD835\uDC07\uD835\uDE43\uD835\uDE77\u029C\uD835\uDEE8\u0397\uD835\uDEAE\u157C\u04C7\u1D34\u1D78\uD83C\uDDED'],\n    ['h', '\u04BA\u24A3\u0452\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u0570\u04BB\u12A8\u12A9\u12AA\u12AB\u0266\u210E\uD835\uDC21\uD835\uDC89\uD835\uDCBD\uD835\uDCF1\uD835\uDD25\uD835\uDD59\uD835\uDD8D\uD835\uDDC1\uD835\uDDF5\uD835\uDE29\uD835\uDE5D\uD835\uDE91\u056B\u02B0\u144B\u15C1\u0267\u3093\u0265'],\n    ['I', '\uD83C\uDD38\u0407\uA024\u13C6\uD83C\uDD78\uD83C\uDD58\u0625\uFE87\u0673\u0623\uFE83\u0672\u0675\u24BE\uFF29\u17F8\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197\u30A7\u30A8\u1FD8\u1FD9\u1FDA\u1FDB\u1F38\u1F39\u1F3A\u1F3B\u1F3C\u1F3D\u1F3E\u2160\u03AA\u038A\u026A\u1DA6\u144A\u1963\uD835\uDEEA\uD835\uDC08\uD835\uDE44\uD835\uDE78\uD835\uDCF5\uD835\uDE61\uD835\uDC3C\u1D35\uD835\uDEB0\uD835\uDC70\uD83C\uDDEE'],\n    ['i', '\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u1E2D\u1FD0\u1FD1\u1FD2\u1FD3\u1FD6\u1FD7\u1F30\u1F31\u1F32\u2170\u217C\u2223\u2D4F\uFFE8\u05C0\u0627\u0661\u06F1\u07CA\u16C1\u1F33\u1F34\u1F35\u0268\u0456\u1F76\u1F77\u1D96\uD835\uDD26\uD835\uDE92\uD835\uDF78\uD835\uDDC2\uD835\uDC22\uD835\uDD5A\uD835\uDD8E\uD835\uDDF6\uD835\uDE2A\uD835\uDE5E\u03AF\u2071\u1D62\uD835\uDCF2\u24A4'],\n    ['J', '\uD83C\uDD39\uD83C\uDD79\uD83C\uDD59\u24BF\uFF2A\u0408\u029D\u148D\u05E0\uFF8C\u0134\u0286\u0E27\u0644\u0575\u0296\u1D0A\u1D36\uFEDD\u130B\u0248\u2C7C\u0542\u0E45\u10B1\u012F\u13AB\u0237\u4E3F\u2110\u2111\u1498\u1499\u149A\u149B\u14B4\u14B5\u148E\u148F\uD83C\uDDEF'],\n    ['j', '\u24D9\uFF4A\u03F3\u02B2\u24A5\u0249\u0135\u01F0\u0458\u06B6\u1DA8\uD835\uDCBF\uD835\uDE2B\uD835\uDDF7\uD835\uDC57\uD835\uDE5F\uD835\uDD27\uD835\uDC8B\uD835\uDDC3\uD835\uDCF3\uD835\uDD5B\uD835\uDE93\uD835\uDD8F\uD835\uDC23'],\n    ['K', '\uD835\uDDDE\uD83C\uDD3A\uD835\uDF25\uD835\uDE12\uA4D7\uD835\uDE46\uD835\uDD42\u2C94\uD835\uDD0E\uD835\uDEEB\u13E6\uD835\uDF99\uD835\uDCA6\uD83C\uDD7A\uD83C\uDD5A\u20AD\u24C0\uFF2B\u0138\u1E30\u045C\u0198\u043A\u04A0\u03BA\u049B\u049F\u04C4\u029E\u049A\u041A\u04A1\u1D0B\u1D37\u1D4F\u24A6\u16D5\u040C\u1315\u1E32\u039A\u212A\u049C\u049D\u049E\u0136\u1E34\u01E8\u2C69\u03D7\u04C3\uD83C\uDDF0'],\n    ['k', '\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\u1D84\uD835\uDC24\uD835\uDE2C\uD835\uDDC4\uD835\uDD5C\uD835\uDF05\uD835\uDF18\uD835\uDF3F\uD835\uDF52\uD835\uDF79\uD835\uDF8C\uD835\uDFB3\uD835\uDE60\uD835\uDE94\uD835\uDC58\uD835\uDC8C\u03F0\uD835\uDECB\uD835\uDEDE\uD835\uDFC6\uD835\uDDF8\uD835\uDCF4\uD835\uDCC0'],\n    ['L', '\uD83C\uDD3B\uD801\uDC1B\u2CD0\uD835\uDC73\uD835\uDE7B\uD801\uDC43\uD835\uDCDB\u2CD1\uABAE\u13DE\uA4E1\uD83C\uDD7B\uD83C\uDD5B\uFE88\u2514\u24C1\u0582\uFF2C\u013F\u14AA\u4E5A\u0546\u029F\uA4F6\u03B9\u053C\u1D38\u02E1\u0139\u1228\u1E36\u2097\u0393\u056C\u013B\u1102\u216C\u2112\u2C62\u1967\u1968\u14BB\u14B6\u14B7\u1DAB\uFE8E\u14BA\u14B9\u14B8\u14AB\u23B3\u3125\u0141\u2C60\uFE84\u023D\uD83C\uDDF1'],\n    ['l', '\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u04C0\u2113\u1E3D\u1E3B\u0142\uFF9A\u026D\u019A\u026B\u2C61|\u0196\u24A7\u0285\u01C0\u05D5\u05DF\u0399\u0406\uFF5C\u1DA9\u04CF\uD835\uDCD8\uD835\uDD40\uD835\uDDA8\uD835\uDDDC\uD835\uDE10\uD835\uDC25\uD835\uDC59\uD835\uDC8D\uD835\uDCC1\uD835\uDD29\uD835\uDD5D\uD835\uDD91\uD835\uDDC5\uD835\uDDF9\uD835\uDE2D\uD835\uDE95\uD835\uDF24\uD835\uDF5E\u0131\uD835\uDEA4\u0269\u1FBE\uD835\uDECA\uD835\uDF04\uD835\uDF3E\uD835\uDFB2'],\n    ['M', '\uD83C\uDD3C\uD800\uDF11\uD800\uDEB0\uA4DF\u2C98\u13B7\uD83C\uDD7C\uD83C\uDD5C\u24C2\uFF2D\u043C\u1E42\u0D71\u15F0\u5DDE\u163B\u10DD\u0E53\u264F\u028D\u164F\u1D0D\u1D39\u1D50\u24A8\u1E3E\u041C\u1E40\u0BF1\u216F\u2133\u039C\u03FA\u16D6\u04CD\u04CE\uD835\uDC0C\uD835\uDC40\uD835\uDC74\uD835\uDCDC\uD835\uDD10\uD835\uDD44\uD835\uDD78\uD835\uDDAC\uD835\uDDE0\uD835\uDE14\uD835\uDE48\uD835\uDE7C\uD835\uDEB3\uD835\uDEED\uD835\uDF27\uD835\uDF61\uD835\uDF9B\uD83C\uDDF2'],\n    ['m', '\u20A5\u1D6F\uD835\uDD92\uD835\uDC26\uD835\uDDC6\uD835\uDD2A\uD835\uDD5E\uD835\uDCC2\u24DC\uFF4D\u0D28\u1662\u0D69\u1E3F\u1E41\u217F\u03FB\u1E43\u1320\u0271\u17F3\u1D86\uD835\uDE62\uD835\uDCF6\uD835\uDE96\uD835\uDC5A\uD835\uDDFA\u19D5\u19D7'],\n    ['N', '\uD83C\uDD3D\u2115\uA4E0\uD835\uDEEE\uD835\uDF62\uD835\uDE7D\uD835\uDEB4\uD835\uDC75\uD835\uDC41\u2C9A\uD835\uDC0D\uD835\uDCA9\uD835\uDF9C\uD835\uDDE1\uD835\uDE15\uD835\uDF28\uD835\uDCDD\uD835\uDDAD\uD83C\uDD7D\u20A6\uD83C\uDD5D\u0419\u040D\u24C3\u048B\u17F7\uFF2E\u1D0E\u0274\u019D\u144E\u51E0\u0438\u0548\u057C\u0418\u05D4\u041B\u03C0\u1D3A\u1DB0\u0143\u5200\u12AD\u1E44\u207F\u00D1\u041F\u039D\u1D28\u0578\u03D6\u01F8\u0147\u1E46\u0145\u1E4A\u1E48\u0E17\u014A\u04E2\u04E3\u04E4\u04E5\u045B\u045D\u0439\u1962\u048A\u1D3B\uD83C\uDDF3'],\n    ['n', '\u05D7\uD835\uDC8F\uD835\uDCF7\uD835\uDE63\uD835\uDC5B\uD835\uDD93\uD835\uDD2B\uD835\uDDC7\uD835\uDE97\uD835\uDDFB\u1952\u24DD\u03AE\uFF4E\u01F9\u1D12\u0144\u00F1\u1F97\u03B7\u1E45\u0148\u1E47\u0272\u0146\u1E4B\u1E49\u0572\u0E96\u054C\u019E\u014B\u24A9\u0E20\u0E01\u0273\u043F\u0149\u043B\u0509\u0220\u1F20\u1F21\u1FC3\u0564\u1F90\u1F91\u1F92\u1F93\u1F94\u1F95\u1F96\u1FC4\u1FC6\u1FC7\u1FC2\u1F22\u1F23\u1F24\u1F25\u1F26\u1F27\u1F74\u1F75\u1260\u1261\u1262\u1263\u1264\u1265\u1266\u0235\uD835\uDEC8\uD835\uDF02\uD835\uDF3C\uD835\uDF76\uD835\uDFB0\uD835\uDD5F\uD835\uDE2F\uD835\uDC27\uD835\uDCC3\u1D87\u1D70\u1965\u2229'],\n    [\n        'O',\n        '\uA132\uD83C\uDD3E\uD800\uDE92\uD835\uDFEC\uA4F3\u2C9E\uD801\uDC04\uD800\uDEAB\uD801\uDCC2\uD835\uDF9E\uD83C\uDD5E\u2365\u25EF\u2D41\u2296\uFF10\u229D\uD835\uDF64\u0472\u03F4\uD835\uDEB6\uD835\uDF2A\u047A\u04E6\u04E8\u04EA\u038C\u0298\uD835\uDC0E\u01D1\u00D2\u014E\u00D3\u00D4\u00D5\u020C\u020E\u31FF\u274D\u24C4\uFF2F\u1F4B\u30ED\u2764\u0AE6\u2295\u00D8\u0424\u053E\u0398\u01A0\u1D3C\u1D52\u24AA\u0150\u00D6\u2092\u00A4\u25CA\u03A6\u3007\u039F\u041E\u0555\u0B20\u0D20\u0BE6\u05E1\u1ED2\u1ED0\u1ED6\u1ED4\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u022E\u0230\u022A\u1ECE\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u01FE\u019F\u2D54\u07C0\u17F0\u235C\u2394\u2395\u29B0\u29B1\u29B2\u29B3\u29B4\u29B5\u29B6\u29B7\u29B8\u29B9\u29BA\u29BB\u29BC\u29BD\u29BE\u29BF\u29C0\u29C1\u29C2\u29C3\u1F48\u1F49\u1F4A\u1F4C\u1F4D',\n    ],\n    [\n        'o',\n        '\uD835\uDE98\uD835\uDED0\uD835\uDDC8\uD835\uDFBC\u101D\u2C9F\uD835\uDE64\u1040\uD801\uDC2C\uD835\uDD2C\uD801\uDCEA\uD835\uDCF8\uD83C\uDDF4\u2364\u25CB\u03D9\uD83C\uDD7E\uD835\uDCAA\uD835\uDDAE\uD835\uDFE2\uD835\uDFF6\uD835\uDE7E\uD835\uDE30\uD835\uDDFC\uD835\uDD60\uD835\uDF0A\uD835\uDC28\uD835\uDF7E\uD835\uDFB8\u1424\u24DE\u0473\u19D0\u1972\u00F0\uFF4F\u0C20\u199E\u0553\u00F2\u04E9\u04E7\u00F3\u00BA\u014D\u00F4\u01D2\u020F\u014F\u1ED3\u1ED1\u020D\u1ED7\u1ED5\u00F5\u03C3\u1E4D\u022D\u1E4F\u1F44\u1E51\u1E53\u022F\u022B\u0E4F\u1D0F\u0151\u00F6\u047B\u043E\u12D0\u01ED\u0231\u09E6\u0B66\u0665\u0C66\u0CE6\u0D66\u0E50\u0ED0\u03BF\u0585\u1D11\u0966\u0A66\u1ECF\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u00F8\u01FF\u0275\u056E\u1F40\u1F41\u03CC\u1F78\u1F79\u1F42\u1F43\u1F45',\n    ],\n    ['P', '\uD83C\uDD3F\uA4D1\uD835\uDEB8\uD835\uDE7F\uD835\uDFA0\uD835\uDE4B\uABB2\u2CA2\uD835\uDCAB\uD835\uDF66\uD835\uDC43\uD835\uDC77\uD835\uDDE3\uD835\uDC0F\uD800\uDE95\uD835\uDF2C\uD835\uDE17\uD835\uDCDF\uD835\uDDAF\uD835\uDEF2\u13E2\uD83C\uDD5F\u048E\uD83C\uDD7F\u24C5\uFF30\u01A4\u146D\u5C38\u1E56\u0580\u03C6\u0584\u1D18\u1D3E\u1D56\u24AB\u1E54\uFF71\u05E7\u0420\u12E8\u1D29\u2C63\u2119\u03A1\u1FEC\u1478\u1476\u1477\u1479\u146C\u146E\uD83C\uDDF5\u20B1'],\n    ['p', '\u048F\u2117\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\u1FE5\u03C1\u0440\u01BF\u01F7\u1FE4\u2374\uD835\uDCF9\uD835\uDCC5\uD835\uDC29\uD835\uDC5D\uD835\uDC91\uD835\uDD2D\uD835\uDD61\uD835\uDD95\uD835\uDDC9\uD835\uDDFD\uD835\uDE31\uD835\uDE65\uD835\uDE99\uD835\uDED2\uD835\uDF46\uD835\uDFBA\uD835\uDF0C\uD835\uDF80'],\n    ['Q', '\uD83C\uDD40\uD83C\uDD80\uD83C\uDD60\u24C6\uFF31\u211A\u2D55\u051A\uD835\uDC10\uD835\uDC44\uD835\uDC78\uD835\uDCAC\uD835\uDCE0\uD835\uDE80\uD835\uDE18\uD835\uDE4C\uD835\uDDB0\uD835\uDD7C\uD835\uDD14\uD835\uDDE4\uD83C\uDDF6'],\n    ['q', '\u24E0\uFF51\u0563\u24AC\u06F9\u0566\u146B\u024B\u024A\u051B\uD835\uDDCA\uD835\uDC5E\uD835\uDE32\uD835\uDD62\uD835\uDE9A\uD835\uDC92\uD835\uDD96\uD835\uDC2A\uD835\uDD2E\uD835\uDCFA\uD835\uDE66'],\n    ['R', '\u211E\u211F\uAB71\u13D2\uD801\uDCB4\uABA2\u13A1\uA4E3\uD83C\uDD81\uD83C\uDD61\u24C7\uFF32\u1D19\u0212\u0280\u1587\u044F\u5C3A\u0154\u042F\u0AB0\u01A6\u1D3F\u12EA\u1E5A\u024C\u0281\u211B\u211C\u211D\u1E58\u0158\u0210\u1E5C\u0156\u1E5E\u2C64\uD835\uDC11\uD835\uDC45\uD835\uDC79\uD835\uDCE1\uD835\uDD7D\uD835\uDDB1\uD835\uDDE5\uD835\uDE19\uD835\uDE4D\uD835\uDE81\u16B1\uD83C\uDDF7\u1D1A'],\n    ['r', '\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u0433\u0550\u027E\u196C\u1E5F\u024D\u02B3\u24AD\u027C\u0453\u1D26\u1D89\uD835\uDC2B\uD835\uDC5F\uD835\uDC93\uD835\uDCC7\uD835\uDCFB\uD835\uDD2F\uD835\uDD63\uD835\uDD97\uD835\uDDCB\uD835\uDDFF\uD835\uDE33\uD835\uDE67\u1D72\u0491\u1D63'],\n    ['S', '\uD83C\uDD42\uA1D9\uD835\uDCE2\uD835\uDDE6\u13DA\uD835\uDCAE\u13D5\uD835\uDE82\uD835\uDC12\uA4E2\uD835\uDDB2\uD835\uDD16\uD835\uDE4E\uD800\uDE96\uD835\uDD7E\uD801\uDC20\uD835\uDE1A\uD835\uDD4A\uD835\uDC46\uD835\uDC7A\uD83C\uDD82\uD83C\uDD62\u24C8\uFF33\u1E68\u015E\u0586\u054F\u0218\u02E2\u24AE\u0405\u1E60\u0160\u015A\u1E64\u015C\u1E66\u1E62\u0D1F\u1515\u1516\u1522\u1521\u1523\u1524'],\n    ['s', '\u24E2\uA731\uD801\uDC48\uABAA\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u0282\u1E63\u1E69\u0455\u015F\u0219\u023F\u1D8A\u0C15\uD835\uDC2C\uD835\uDC60\uD835\uDC94\uD835\uDCC8\uD835\uDCFC\uD835\uDD30\uD835\uDD64\uD835\uDD98\uD835\uDDCC\uD835\uDE00\uD835\uDE34\uD835\uDE68\uD835\uDE9C\u078E\uD83C\uDDF8'],\n    ['T', '\uD83C\uDD43\uD83C\uDD83\uD800\uDF15\uD835\uDEBB\uD835\uDEF5\uD835\uDD4B\uD835\uDD7F\uD835\uDC7B\uD800\uDEB1\uD800\uDE97\uD835\uDDB3\uD835\uDE4F\uD83D\uDF68\uD835\uDF69\uD835\uDFA3\uD835\uDE83\uD835\uDE1B\uD835\uDC47\uA4D4\u27D9\uD835\uDC13\u2CA6\uD835\uDDE7\u22A4\uD835\uDD17\u13A2\uAB72\uD835\uDCAF\uD83C\uDD63\u23C7\u23C9\u24C9\uFF34\u0442\u04AC\u04AD\u01AC\u30A4\u0166\u0535\u03C4\u1D1B\u1D40\uFF72\u1355\u03EE\u0164\u22A5\u01AE\u03A4\u0422\u4E0B\u1E6A\u1E6C\u021A\u0162\u1E70\u1E6E\u4E05\u4E01\u142A\uD835\uDED5\uD835\uDF0F\uD835\uDF49\uD835\uDF83\uD835\uDFBD\uD835\uDCE3\u3112\uD83C\uDDF9\u1325'],\n    ['t', '\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0236\u0A6E\u0567\u0287\u2020\u0163\u1E71\u1E6F\u01AD\u0167\u1D57\u24AF\u0288\u0565\u01AB\uD835\uDC2D\uD835\uDC61\uD835\uDC95\uD835\uDCC9\uD835\uDCFD\uD835\uDD31\uD835\uDD65\uD835\uDD99\uD835\uDDCD\uD835\uDE01\uD835\uDE35\uD835\uDE69\uD835\uDE9D\u30CA'],\n    ['U', '\uD83C\uDD44\uA4F4\uD801\uDCCE\uA4A4\uD83C\uDD84\uD83C\uDD64\u0168\u016C\u016E\u1457\u1458\u01D3\u01D5\u01D7\u01D9\u24CA\uFF35\u0216\u144C\u51F5\u01B1\u0574\u0531\uA4F5\u0426\u016A\u0544\u01B2\u1640\u1D41\u1D58\u24B0\u0170\u0AAA\u00DC\u054D\u00D9\u00DA\u00DB\u1E78\u1E7A\u01DB\u1EE6\u0214\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244\u1969\u1467\u222A\u162E\u22C3\uD835\uDC14\uD835\uDC48\uD835\uDC7C\uD835\uDCB0\uD835\uDCE4\uD835\uDD18\uD835\uDD4C\uD835\uDD80\uD835\uDDB4\uD835\uDDE8\uD835\uDE1C\uD835\uDE50\uD835\uDE84\uD83C\uDDFA'],\n    ['u', '\u1F7A\u1F7B\u24E4\uFF55\u00F9\u0169\u016B\u1EEB\u1E77\u1E79\u016D\u01D6\u1EEF\u1959\u01DA\u01DC\u1F57\u03C5\u03B0\u0E19\u057D\u028A\u01D8\u01D4\u00FA\u016F\u1D1C\u0171\u0173\u0E22\u00FB\u1E7B\u0446\u1201\u00FC\u1D7E\u1D64\u00B5\u028B\u1EE7\u0215\u0217\u01B0\u1EE9\u1EED\u1EF1\u1EE5\u1E73\u1E75\u0289\u1FE0\u1FE1\u1FE2\u1FE3\u1FE6\u1FE7\u1F50\u1F51\u03CB\u03CD\u1F52\u1F53\u1F54\u1F55\u1F56\u1954\uD835\uDC2E\uD835\uDC62\uD835\uDC96\uD835\uDCCA\uD835\uDCFE\uD835\uDD32\uD835\uDD66\uD835\uDD9A\uD835\uDDCE\u1D99'],\n    ['V', '\uD83C\uDD45\uA4E6\uD835\uDC7D\uD835\uDDB5\uD835\uDE1D\u13D9\uD835\uDE85\uD835\uDE51\uD835\uDC15\uD83C\uDD85\uD83C\uDD65\u24CB\uFF36\u142F\u0474\u1D5B\u24B1\u06F7\u1E7E\u2174\u2164\u1E7C\u0667\u2D38\u0476\u143A\u143B\uD83C\uDDFB\uD835\uDCE5'],\n    ['v', '\u1200\u24E5\uFF56\uD835\uDF10\uD835\uDF4A\u1E7D\u1E7F\u0C6E\u0E07\u0475\u05E2\u1D20\u03BD\u05D8\u1D65\u0477\u17F4\u1601\uD835\uDE6B\uD835\uDE9F\uD835\uDECE\uD835\uDF08\uD835\uDF42\uD835\uDF7C\uD835\uDFB6\uD835\uDE37\uD835\uDE03\uD835\uDCFF'],\n    ['W', '\uD83C\uDD46\u13D4\u13B3\uD835\uDC7E\uA4EA\uD835\uDCB2\uD835\uDE1E\uD83C\uDD86\u24CC\uD83C\uDD66\uFF57\uFF37\u1E82\u1FA7\u15EF\u1955\u5C71\u0460\u0E9F\u0C1A\u0561\u0429\u0428\u03CE\u0449\u0E2C\u0448\u164E\u1D42\u02B7\u24B2\u0E1D\u1220\u1E84\u051C\u1E80\u0174\u1E86\u1E88\u0D27\u163A\u047F\u1661\u019C\u20A9\uD83C\uDDFC'],\n    ['w', '\u1E81\uAB83\u1E83\u24E6\u2375\u0175\u1E87\u1E85\u1E98\u1E89\u2C73\u1F7C\u1F60\u1F61\u1F62\u1F63\u03C9\u1F64\u1F65\u1F66\u1F67\u1FF2\u1FF3\u1FF4\u1FF6\u1FF7\u2C72\u0461\u051D\u1D21\u1F7D\u1FA0\u1FA1\u1FA2\u1FA3\u1FA4\u1FA5\u1FA6\u026F\uD835\uDF55\uD835\uDFC9\uD835\uDF8F'],\n    ['X', '\uD83D\uDFA8\uD83D\uDFA9\uD83D\uDFAA\uD83C\uDD47\uD83D\uDFAB\uD83D\uDFAC\uD800\uDF17\u2CAC\uA4EB\uD835\uDD83\uD835\uDFA6\uD835\uDE1F\uD800\uDE90\uD835\uDEBE\uD835\uDF6C\uD835\uDF32\uA7B3\uD800\uDF22\uD835\uDDB7\uD835\uDC4B\uD835\uDD4F\uD835\uDD1B\uD800\uDEB4\uD835\uDDEB\uD83C\uDD87\uD83C\uDD67\u274C\u24CD\uD835\uDCE7\uFF38\u1E8A\u166D\u03C7\u3128\uD835\uDCB3\u04FE\u10EF\u04FC\u04B3\u0416\u03A7\u04B2\u1D61\u02E3\u24B3\u05D0\u1238\u1E8C\uA2BC\u2169\u0425\u2573\u166E\u1541\u157D\u2179\u16B7\u2D5D\uD835\uDE53\uD835\uDE87\u4E42\uD835\uDC17\uD83C\uDDFD'],\n    ['x', '\u24E7\uFF58\u0445\u1E8B\u00D7\u2093\u292B\u292C\u2A2F\u1E8D\u1D8D\uD835\uDE6D\u04FD\uD835\uDE39\uD835\uDC31\uD835\uDEA1\u2A30\uFF92\uD835\uDD01'],\n    ['Y', '\u2CA8\uD835\uDE88\uD835\uDC4C\uD835\uDDEC\uD835\uDC18\uA4EC\uD835\uDC80\uD835\uDF30\uD800\uDEB2\uD83C\uDD88\uD83C\uDD68\u24CE\uFF39\u1F5B\u01B3\u311A\u028F\u2144\u03D4\uFFE5\u00A5\u054E\u03D3\u03B3\u05E5\u04F2\u0427\u040E\u1203\u0178\u024E\u03E4\u03A5\u03D2\u04AE\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u1EF6\u1EF4\u1FE8\u1FE9\u1FEA\u1FEB\u1F59\u1F5D\u1F5F\u03AB\u038E\u04EE\u04F0\u04B0\u04B1\uD835\uDD50\uD83C\uDDFE'],\n    ['y', '\uD83C\uDD48\u13BD\u13A9\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u0443\u10E7\u1E99\u1EF5\u01B4\u024F\u1D5E\u0263\u02B8\u1D8C\u04AF\u24B4\u04F3\u04F1\u04EF\u045E\u0423\u028E'],\n    ['Z', '\uD83C\uDD49\uA4DC\uD835\uDDED\uD835\uDC19\u2621\u13C3\uD835\uDE21\uD83C\uDD89\uD83C\uDD69\u24CF\uFF3A\u1E94\u01B5\u4E59\u1E90\u0224\u1DBB\u24B5\u0179\u2124\u0396\u017B\u017D\u1E92\u2C6B\uD83C\uDDFF'],\n    ['z', '\uAB93\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u1D22\u130A\u0290\u2C6C\u1D8E\u0291\u1646'],\n]);\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveConfusablesTransformer = void 0;\nconst remap_characters_1 = require(\"../remap-characters\");\nconst confusables_1 = require(\"./confusables\");\n/**\n * Creates a transformer that maps confusable Unicode characters to their\n * normalized equivalent. For example, `\u24F5`, `\u278A`, and `\u2474` become `1` when using\n * this transformer.\n *\n * **Application order**\n *\n * It is recommended that this transformer be applied near the start of the\n * transformer chain.\n *\n * @example\n * ```typescript\n * const transformer = resolveConfusablesTransformer();\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @returns A container holding the transformer, which can then be passed to the\n * [[RegExpMatcher]].\n */\nfunction resolveConfusablesTransformer() {\n    return (0, remap_characters_1.remapCharactersTransformer)(confusables_1.confusables);\n}\nexports.resolveConfusablesTransformer = resolveConfusablesTransformer;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dictionary = void 0;\nexports.dictionary = new Map([\n    ['a', '@4'],\n    ['c', '('],\n    ['e', '3'],\n    ['i', '1|!'],\n    ['g', '6'],\n    ['o', '0'],\n    ['s', '$5'],\n    ['t', '7'],\n    ['z', '2'],\n]);\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveLeetSpeakTransformer = void 0;\nconst remap_characters_1 = require(\"../remap-characters\");\nconst dictionary_1 = require(\"./dictionary\");\n/**\n * Creates a transformer that maps leet-speak characters to their normalized\n * equivalent. For example, `$` becomes `s` when using this transformer.\n *\n * **Application order**\n *\n * It is recommended that this transformer be applied near the start of the\n * transformer chain, but after similar transformers that map characters to\n * other characters, such as the [[resolveConfusablesTransformer | transformer\n * that resolves confusable Unicode characters]].\n *\n * @example\n * ```typescript\n * const transformer = resolveLeetSpeakTransformer();\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @returns A container holding the transformer, which can then be passed to the\n * [[RegExpMatcher]].\n */\nfunction resolveLeetSpeakTransformer() {\n    return (0, remap_characters_1.remapCharactersTransformer)(dictionary_1.dictionary);\n}\nexports.resolveLeetSpeakTransformer = resolveLeetSpeakTransformer;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toAsciiLowerCaseTransformer = void 0;\nconst Char_1 = require(\"../../util/Char\");\nconst Transformers_1 = require(\"../Transformers\");\n/**\n * Creates a transformer that changes all ASCII alphabet characters to\n * lower-case, leaving other characters unchanged.\n *\n * **Application order**\n *\n * It is recommended that this transformer be applied near the end of the\n * transformer chain. Using it before other transformers may have the effect of\n * making its changes useless as transformers applied after produce characters\n * of varying cases.\n *\n * @returns A container holding the transformer, which can then be passed to the\n * [[RegExpMatcher]].\n */\nfunction toAsciiLowerCaseTransformer() {\n    return (0, Transformers_1.createSimpleTransformer)((c) => ((0, Char_1.isUpperCase)(c) ? (0, Char_1.invertCaseOfAlphabeticChar)(c) : c));\n}\nexports.toAsciiLowerCaseTransformer = toAsciiLowerCaseTransformer;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.englishDataset = exports.englishRecommendedTransformers = exports.englishRecommendedWhitelistMatcherTransformers = exports.englishRecommendedBlacklistMatcherTransformers = void 0;\nconst DataSet_1 = require(\"../dataset/DataSet\");\nconst Pattern_1 = require(\"../pattern/Pattern\");\nconst collapse_duplicates_1 = require(\"../transformer/collapse-duplicates\");\nconst resolve_confusables_1 = require(\"../transformer/resolve-confusables\");\nconst resolve_leetspeak_1 = require(\"../transformer/resolve-leetspeak\");\nconst to_ascii_lowercase_1 = require(\"../transformer/to-ascii-lowercase\");\n/**\n * A set of transformers to be used when matching blacklisted patterns with the\n * [[englishDataset | english word dataset]].\n */\nexports.englishRecommendedBlacklistMatcherTransformers = [\n    (0, resolve_confusables_1.resolveConfusablesTransformer)(),\n    (0, resolve_leetspeak_1.resolveLeetSpeakTransformer)(),\n    (0, to_ascii_lowercase_1.toAsciiLowerCaseTransformer)(),\n    // See #23 and #46.\n    // skipNonAlphabeticTransformer(),\n    (0, collapse_duplicates_1.collapseDuplicatesTransformer)({\n        defaultThreshold: 1,\n        customThresholds: new Map([\n            ['b', 2],\n            ['e', 2],\n            ['o', 2],\n            ['l', 2],\n            ['s', 2],\n            ['g', 2], // ni_gg_er\n        ]),\n    }),\n];\n/**\n * A set of transformers to be used when matching whitelisted terms with the\n * [[englishDataset | english word dataset]].\n */\nexports.englishRecommendedWhitelistMatcherTransformers = [\n    (0, to_ascii_lowercase_1.toAsciiLowerCaseTransformer)(),\n    (0, collapse_duplicates_1.collapseDuplicatesTransformer)({\n        defaultThreshold: Number.POSITIVE_INFINITY,\n        customThresholds: new Map([[' ', 1]]), // collapse spaces\n    }),\n];\n/**\n * Recommended transformers to be used with the [[englishDataset | english word\n * dataset]] and the [[RegExpMatcher]].\n */\nexports.englishRecommendedTransformers = {\n    blacklistMatcherTransformers: exports.englishRecommendedBlacklistMatcherTransformers,\n    whitelistMatcherTransformers: exports.englishRecommendedWhitelistMatcherTransformers,\n};\n/**\n * A dataset of profane English words.\n *\n * @example\n * ```typescript\n * const matcher = new RegExpMatcher({\n * \t...englishDataset.build(),\n * \t...englishRecommendedTransformers,\n * });\n * ```\n * @example\n * ```typescript\n * // Extending the data-set by adding a new word and removing an existing one.\n * const myDataset = new DataSet()\n * \t.addAll(englishDataset)\n * \t.removePhrasesIf((phrase) => phrase.metadata.originalWord === 'vagina')\n * \t.addPhrase((phrase) => phrase.addPattern(pattern`|balls|`));\n * ```\n * @copyright\n * The words are taken from the [cuss](https://github.com/words/cuss) project,\n * with some modifications.\n *\n * ```text\n * (The MIT License)\n *\n * Copyright (c) 2016 Titus Wormer <tituswormer@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * 'Software'), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * ```\n */\nexports.englishDataset = new DataSet_1.DataSet()\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'abo' }).addPattern((0, Pattern_1.pattern) `|ab[b]o[s]|`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'abeed' }).addPattern((0, Pattern_1.pattern) `ab[b]eed`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'africoon' }).addPattern((0, Pattern_1.pattern) `africoon`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'anal' })\n    .addPattern((0, Pattern_1.pattern) `|anal`)\n    .addWhitelistedTerm('analabos')\n    .addWhitelistedTerm('analagous')\n    .addWhitelistedTerm('analav')\n    .addWhitelistedTerm('analy')\n    .addWhitelistedTerm('analog')\n    .addWhitelistedTerm('an al')\n    .addPattern((0, Pattern_1.pattern) `danal`)\n    .addPattern((0, Pattern_1.pattern) `eanal`)\n    .addPattern((0, Pattern_1.pattern) `fanal`)\n    .addWhitelistedTerm('fan al')\n    .addPattern((0, Pattern_1.pattern) `ganal`)\n    .addWhitelistedTerm('gan al')\n    .addPattern((0, Pattern_1.pattern) `ianal`)\n    .addWhitelistedTerm('ian al')\n    .addPattern((0, Pattern_1.pattern) `janal`)\n    .addWhitelistedTerm('trojan al')\n    .addPattern((0, Pattern_1.pattern) `kanal`)\n    .addPattern((0, Pattern_1.pattern) `lanal`)\n    .addWhitelistedTerm('lan al')\n    .addPattern((0, Pattern_1.pattern) `lanal`)\n    .addWhitelistedTerm('lan al')\n    .addPattern((0, Pattern_1.pattern) `oanal|`)\n    .addPattern((0, Pattern_1.pattern) `panal`)\n    .addWhitelistedTerm('pan al')\n    .addPattern((0, Pattern_1.pattern) `qanal`)\n    .addPattern((0, Pattern_1.pattern) `ranal`)\n    .addPattern((0, Pattern_1.pattern) `sanal`)\n    .addPattern((0, Pattern_1.pattern) `tanal`)\n    .addWhitelistedTerm('tan al')\n    .addPattern((0, Pattern_1.pattern) `uanal`)\n    .addWhitelistedTerm('uan al')\n    .addPattern((0, Pattern_1.pattern) `vanal`)\n    .addWhitelistedTerm('van al')\n    .addPattern((0, Pattern_1.pattern) `wanal`)\n    .addPattern((0, Pattern_1.pattern) `xanal`)\n    .addWhitelistedTerm('texan al')\n    .addPattern((0, Pattern_1.pattern) `yanal`)\n    .addPattern((0, Pattern_1.pattern) `zanal`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'anus' })\n    .addPattern((0, Pattern_1.pattern) `anus`)\n    .addWhitelistedTerm('an us')\n    .addWhitelistedTerm('tetanus')\n    .addWhitelistedTerm('uranus')\n    .addWhitelistedTerm('janus')\n    .addWhitelistedTerm('manus'))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'arabush' }).addPattern((0, Pattern_1.pattern) `arab[b]ush`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'arse' })\n    .addPattern((0, Pattern_1.pattern) `|ars[s]e`)\n    .addWhitelistedTerm('arsen'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'ass' })\n    .addPattern((0, Pattern_1.pattern) `|ass`)\n    .addWhitelistedTerm('assa')\n    .addWhitelistedTerm('assem')\n    .addWhitelistedTerm('assen')\n    .addWhitelistedTerm('asser')\n    .addWhitelistedTerm('asset')\n    .addWhitelistedTerm('assev')\n    .addWhitelistedTerm('assi')\n    .addWhitelistedTerm('assoc')\n    .addWhitelistedTerm('assoi')\n    .addWhitelistedTerm('assu'))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'bastard' }).addPattern((0, Pattern_1.pattern) `bas[s]tard`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'bestiality' }).addPattern((0, Pattern_1.pattern) `be[e][a]s[s]tial`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'bitch' })\n    .addPattern((0, Pattern_1.pattern) `bitch`)\n    .addPattern((0, Pattern_1.pattern) `bich|`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'blowjob' }).addPattern((0, Pattern_1.pattern) `b[b]l[l][o]wj[o]b`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'bollocks' }).addPattern((0, Pattern_1.pattern) `bol[l]ock`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'boob' }).addPattern((0, Pattern_1.pattern) `boob`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'boonga' })\n    .addPattern((0, Pattern_1.pattern) `boonga`)\n    .addWhitelistedTerm('baboon ga'))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'buttplug' }).addPattern((0, Pattern_1.pattern) `buttplug`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'chingchong' }).addPattern((0, Pattern_1.pattern) `chingchong`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'chink' })\n    .addPattern((0, Pattern_1.pattern) `chink`)\n    .addWhitelistedTerm('chin k'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'cock' })\n    .addPattern((0, Pattern_1.pattern) `|cock|`)\n    .addPattern((0, Pattern_1.pattern) `|cocks`)\n    .addPattern((0, Pattern_1.pattern) `|cockp`)\n    .addPattern((0, Pattern_1.pattern) `|cocke[e]|`)\n    .addWhitelistedTerm('cockney'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'cuck' })\n    .addPattern((0, Pattern_1.pattern) `cuck`)\n    .addWhitelistedTerm('cuckoo'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'cum' })\n    .addPattern((0, Pattern_1.pattern) `|cum`)\n    .addWhitelistedTerm('cumu')\n    .addWhitelistedTerm('cumb'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'cunt' })\n    .addPattern((0, Pattern_1.pattern) `|cunt`)\n    .addPattern((0, Pattern_1.pattern) `cunt|`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'deepthroat' })\n    .addPattern((0, Pattern_1.pattern) `deepthro[o]at`)\n    .addPattern((0, Pattern_1.pattern) `deepthro[o]t`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'dick' })\n    .addPattern((0, Pattern_1.pattern) `|dck|`)\n    .addPattern((0, Pattern_1.pattern) `dick`)\n    .addWhitelistedTerm('benedick')\n    .addWhitelistedTerm('dickens'))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'dildo' }).addPattern((0, Pattern_1.pattern) `dildo`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'doggystyle' }).addPattern((0, Pattern_1.pattern) `d[o]g[g]ys[s]t[y]l[l]`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'double penetration' }).addPattern((0, Pattern_1.pattern) `double penetra`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'dyke' })\n    .addPattern((0, Pattern_1.pattern) `dyke`)\n    .addWhitelistedTerm('van dyke'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'ejaculate' })\n    .addPattern((0, Pattern_1.pattern) `e[e]jacul`)\n    .addPattern((0, Pattern_1.pattern) `e[e]jakul`)\n    .addPattern((0, Pattern_1.pattern) `e[e]acul[l]ate`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'fag' })\n    .addPattern((0, Pattern_1.pattern) `|fag`)\n    .addPattern((0, Pattern_1.pattern) `fggot`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'felch' }).addPattern((0, Pattern_1.pattern) `fe[e]l[l]ch`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'fellatio' }).addPattern((0, Pattern_1.pattern) `f[e][e]llat`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'finger bang' }).addPattern((0, Pattern_1.pattern) `fingerbang`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'fisting' }).addPattern((0, Pattern_1.pattern) `fistin`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'fuck' })\n    .addPattern((0, Pattern_1.pattern) `f[?]ck`)\n    .addPattern((0, Pattern_1.pattern) `|fk`)\n    .addPattern((0, Pattern_1.pattern) `|fu|`)\n    .addPattern((0, Pattern_1.pattern) `|fuk`)\n    .addWhitelistedTerm('fick')\n    .addWhitelistedTerm('kung-fu')\n    .addWhitelistedTerm('kung fu'))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'gangbang' }).addPattern((0, Pattern_1.pattern) `g[?]ngbang`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'handjob' }).addPattern((0, Pattern_1.pattern) `h[?]ndjob`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'hentai' }).addPattern((0, Pattern_1.pattern) `h[e][e]ntai`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'hooker' }).addPattern((0, Pattern_1.pattern) `hooker`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'incest' }).addPattern((0, Pattern_1.pattern) `incest`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'jerk off' }).addPattern((0, Pattern_1.pattern) `jerkoff`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'jizz' }).addPattern((0, Pattern_1.pattern) `jizz`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'kike' }).addPattern((0, Pattern_1.pattern) `kike`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'lubejob' }).addPattern((0, Pattern_1.pattern) `lubejob`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'masturbate' })\n    .addPattern((0, Pattern_1.pattern) `m[?]sturbate`)\n    .addPattern((0, Pattern_1.pattern) `masterbate`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'negro' })\n    .addPattern((0, Pattern_1.pattern) `negro`)\n    .addWhitelistedTerm('montenegro')\n    .addWhitelistedTerm('negron')\n    .addWhitelistedTerm('stoneground')\n    .addWhitelistedTerm('winegrow'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'nigger' })\n    .addPattern((0, Pattern_1.pattern) `n[i]gger`)\n    .addPattern((0, Pattern_1.pattern) `n[i]gga`)\n    .addPattern((0, Pattern_1.pattern) `|nig|`)\n    .addPattern((0, Pattern_1.pattern) `|nigs|`)\n    .addWhitelistedTerm('snigger'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'orgasm' })\n    .addPattern((0, Pattern_1.pattern) `[or]gasm`)\n    .addWhitelistedTerm('gasma'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'orgy' })\n    .addPattern((0, Pattern_1.pattern) `orgy`)\n    .addPattern((0, Pattern_1.pattern) `orgies`)\n    .addWhitelistedTerm('porgy'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'penis' })\n    .addPattern((0, Pattern_1.pattern) `pe[e]nis`)\n    .addPattern((0, Pattern_1.pattern) `|pnis`)\n    .addWhitelistedTerm('pen is'))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'piss' }).addPattern((0, Pattern_1.pattern) `|piss`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'porn' })\n    .addPattern((0, Pattern_1.pattern) `|prn|`)\n    .addPattern((0, Pattern_1.pattern) `porn`)\n    .addWhitelistedTerm('p orna'))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'prick' }).addPattern((0, Pattern_1.pattern) `|prick[s]|`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'pussy' }).addPattern((0, Pattern_1.pattern) `p[u]ssy`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'rape' })\n    .addPattern((0, Pattern_1.pattern) `|rape`)\n    .addPattern((0, Pattern_1.pattern) `|rapis[s]t`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'retard' }).addPattern((0, Pattern_1.pattern) `retard`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'scat' }).addPattern((0, Pattern_1.pattern) `|s[s]cat|`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'semen' }).addPattern((0, Pattern_1.pattern) `|s[s]e[e]me[e]n`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'sex' })\n    .addPattern((0, Pattern_1.pattern) `|s[s]e[e]x|`)\n    .addPattern((0, Pattern_1.pattern) `|s[s]e[e]xy|`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'shit' })\n    .addPattern((0, Pattern_1.pattern) `|shit`)\n    .addPattern((0, Pattern_1.pattern) `shit|`)\n    .addWhitelistedTerm('s hit')\n    .addWhitelistedTerm('sh it')\n    .addWhitelistedTerm('shi t')\n    .addWhitelistedTerm('shitake'))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'slut' }).addPattern((0, Pattern_1.pattern) `s[s]lut`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'spastic' }).addPattern((0, Pattern_1.pattern) `|spastic`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'tit' })\n    .addPattern((0, Pattern_1.pattern) `|tit|`)\n    .addPattern((0, Pattern_1.pattern) `|tits|`)\n    .addPattern((0, Pattern_1.pattern) `|titt`)\n    .addPattern((0, Pattern_1.pattern) `|tiddies`)\n    .addPattern((0, Pattern_1.pattern) `|tities`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'tranny' }).addPattern((0, Pattern_1.pattern) `tranny`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'turd' })\n    .addPattern((0, Pattern_1.pattern) `|turd`)\n    .addWhitelistedTerm('turducken'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'twat' })\n    .addPattern((0, Pattern_1.pattern) `|twat`)\n    .addWhitelistedTerm('twattle'))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'vagina' })\n    .addPattern((0, Pattern_1.pattern) `vagina`)\n    .addPattern((0, Pattern_1.pattern) `|v[?]gina`))\n    .addPhrase((phrase) => phrase.setMetadata({ originalWord: 'wank' }).addPattern((0, Pattern_1.pattern) `|wank`))\n    .addPhrase((phrase) => phrase\n    .setMetadata({ originalWord: 'whore' })\n    .addPattern((0, Pattern_1.pattern) `|wh[o]re|`)\n    .addPattern((0, Pattern_1.pattern) `|who[o]res[s]|`)\n    .addWhitelistedTerm(\"who're\"));\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.skipNonAlphabeticTransformer = void 0;\nconst Char_1 = require(\"../../util/Char\");\nconst Transformers_1 = require(\"../Transformers\");\n/**\n * Creates a transformer that skips non-alphabetic characters (`a`-`z`,\n * `A`-`Z`). This is useful when matching text on patterns that are solely\n * comprised of alphabetic characters (the pattern `hello` does not match\n * `h.e.l.l.o` by default, but does with this transformer).\n *\n * **Warning**\n *\n * This transformation is not part of the default set of transformations, as\n * there are some known rough edges with false negatives; see\n * [#23](https://github.com/jo3-l/obscenity/issues/23) and\n * [#46](https://github.com/jo3-l/obscenity/issues/46) on the GitHub issue\n * tracker.\n *\n * **Application order**\n *\n * It is recommended that this transformer be applied near the end of the\n * transformer chain, if at all.\n *\n * @example\n * ```typescript\n * const transformer = skipNonAlphabeticTransformer();\n * const matcher = new RegExpMatcher({ ..., blacklistMatcherTransformers: [transformer] });\n * ```\n * @returns A container holding the transformer, which can then be passed to the\n * [[RegExpMatcher]].\n */\nfunction skipNonAlphabeticTransformer() {\n    return (0, Transformers_1.createSimpleTransformer)((c) => ((0, Char_1.isAlphabetic)(c) ? c : undefined));\n}\nexports.skipNonAlphabeticTransformer = skipNonAlphabeticTransformer;\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./censor/BuiltinStrategies\"), exports);\n__exportStar(require(\"./censor/TextCensor\"), exports);\n__exportStar(require(\"./dataset/DataSet\"), exports);\n__exportStar(require(\"./matcher/regexp/RegExpMatcher\"), exports);\n__exportStar(require(\"./matcher/BlacklistedTerm\"), exports);\n__exportStar(require(\"./matcher/MatchPayload\"), exports);\n__exportStar(require(\"./matcher/Matcher\"), exports);\n__exportStar(require(\"./pattern/Nodes\"), exports);\n__exportStar(require(\"./pattern/ParserError\"), exports);\n__exportStar(require(\"./pattern/Pattern\"), exports);\n__exportStar(require(\"./preset/english\"), exports);\n__exportStar(require(\"./transformer/collapse-duplicates\"), exports);\n__exportStar(require(\"./transformer/remap-characters\"), exports);\n__exportStar(require(\"./transformer/resolve-confusables\"), exports);\n__exportStar(require(\"./transformer/resolve-leetspeak\"), exports);\n__exportStar(require(\"./transformer/skip-non-alphabetic\"), exports);\n__exportStar(require(\"./transformer/to-ascii-lowercase\"), exports);\n", "const {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n} = Object;\n\nlet { freeze, seal, create } = Object; // eslint-disable-line import/no-mutable-exports\nlet { apply, construct } = typeof Reflect !== 'undefined' && Reflect;\n\nif (!freeze) {\n  freeze = function (x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function (x) {\n    return x;\n  };\n}\n\nif (!apply) {\n  apply = function (fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!construct) {\n  construct = function (Func, args) {\n    return new Func(...args);\n  };\n}\n\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayIndexOf = unapply(Array.prototype.indexOf);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySlice = unapply(Array.prototype.slice);\nconst arraySplice = unapply(Array.prototype.splice);\n\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\n\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n\nconst regExpTest = unapply(RegExp.prototype.test);\n\nconst typeErrorCreate = unconstruct(TypeError);\n\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply<T>(\n  func: (thisArg: any, ...args: any[]) => T\n): (thisArg: any, ...args: any[]) => T {\n  return (thisArg: any, ...args: any[]): T => {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n\n    return apply(func, thisArg, args);\n  };\n}\n\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct<T>(func: (...args: any[]) => T): (...args: any[]) => T {\n  return (...args: any[]): T => construct(func, args);\n}\n\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(\n  set: Record<string, any>,\n  array: readonly any[],\n  transformCaseFunc: ReturnType<typeof unapply<string>> = stringToLowerCase\n): Record<string, any> {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          (array as any[])[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray<T>(array: T[]): Array<T | null> {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n\n  return array;\n}\n\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone<T extends Record<string, any>>(object: T): T {\n  const newObject = create(null);\n\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (\n        value &&\n        typeof value === 'object' &&\n        value.constructor === Object\n      ) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n\n  return newObject;\n}\n\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter<T extends Record<string, any>>(\n  object: T,\n  prop: string\n): ReturnType<typeof unapply<any>> | (() => null) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(): null {\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nexport {\n  // Array\n  arrayForEach,\n  arrayIndexOf,\n  arrayLastIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  arraySplice,\n  // Object\n  entries,\n  freeze,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n  isFrozen,\n  setPrototypeOf,\n  seal,\n  clone,\n  create,\n  objectHasOwnProperty,\n  // RegExp\n  regExpTest,\n  // String\n  stringIndexOf,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringTrim,\n  // Errors\n  typeErrorCreate,\n  // Other\n  lookupGetter,\n  addToSet,\n  // Reflect\n  unapply,\n  unconstruct,\n};\n", "import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'decorator',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meter',\n  'nav',\n  'nobr',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'section',\n  'select',\n  'shadow',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n] as const);\n\nexport const svg = freeze([\n  'svg',\n  'a',\n  'altglyph',\n  'altglyphdef',\n  'altglyphitem',\n  'animatecolor',\n  'animatemotion',\n  'animatetransform',\n  'circle',\n  'clippath',\n  'defs',\n  'desc',\n  'ellipse',\n  'filter',\n  'font',\n  'g',\n  'glyph',\n  'glyphref',\n  'hkern',\n  'image',\n  'line',\n  'lineargradient',\n  'marker',\n  'mask',\n  'metadata',\n  'mpath',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialgradient',\n  'rect',\n  'stop',\n  'style',\n  'switch',\n  'symbol',\n  'text',\n  'textpath',\n  'title',\n  'tref',\n  'tspan',\n  'view',\n  'vkern',\n] as const);\n\nexport const svgFilters = freeze([\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n] as const);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nexport const svgDisallowed = freeze([\n  'animate',\n  'color-profile',\n  'cursor',\n  'discard',\n  'font-face',\n  'font-face-format',\n  'font-face-name',\n  'font-face-src',\n  'font-face-uri',\n  'foreignobject',\n  'hatch',\n  'hatchpath',\n  'mesh',\n  'meshgradient',\n  'meshpatch',\n  'meshrow',\n  'missing-glyph',\n  'script',\n  'set',\n  'solidcolor',\n  'unknown',\n  'use',\n] as const);\n\nexport const mathMl = freeze([\n  'math',\n  'menclose',\n  'merror',\n  'mfenced',\n  'mfrac',\n  'mglyph',\n  'mi',\n  'mlabeledtr',\n  'mmultiscripts',\n  'mn',\n  'mo',\n  'mover',\n  'mpadded',\n  'mphantom',\n  'mroot',\n  'mrow',\n  'ms',\n  'mspace',\n  'msqrt',\n  'mstyle',\n  'msub',\n  'msup',\n  'msubsup',\n  'mtable',\n  'mtd',\n  'mtext',\n  'mtr',\n  'munder',\n  'munderover',\n  'mprescripts',\n] as const);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nexport const mathMlDisallowed = freeze([\n  'maction',\n  'maligngroup',\n  'malignmark',\n  'mlongdiv',\n  'mscarries',\n  'mscarry',\n  'msgroup',\n  'mstack',\n  'msline',\n  'msrow',\n  'semantics',\n  'annotation',\n  'annotation-xml',\n  'mprescripts',\n  'none',\n] as const);\n\nexport const text = freeze(['#text'] as const);\n", "import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'accept',\n  'action',\n  'align',\n  'alt',\n  'autocapitalize',\n  'autocomplete',\n  'autopictureinpicture',\n  'autoplay',\n  'background',\n  'bgcolor',\n  'border',\n  'capture',\n  'cellpadding',\n  'cellspacing',\n  'checked',\n  'cite',\n  'class',\n  'clear',\n  'color',\n  'cols',\n  'colspan',\n  'controls',\n  'controlslist',\n  'coords',\n  'crossorigin',\n  'datetime',\n  'decoding',\n  'default',\n  'dir',\n  'disabled',\n  'disablepictureinpicture',\n  'disableremoteplayback',\n  'download',\n  'draggable',\n  'enctype',\n  'enterkeyhint',\n  'face',\n  'for',\n  'headers',\n  'height',\n  'hidden',\n  'high',\n  'href',\n  'hreflang',\n  'id',\n  'inputmode',\n  'integrity',\n  'ismap',\n  'kind',\n  'label',\n  'lang',\n  'list',\n  'loading',\n  'loop',\n  'low',\n  'max',\n  'maxlength',\n  'media',\n  'method',\n  'min',\n  'minlength',\n  'multiple',\n  'muted',\n  'name',\n  'nonce',\n  'noshade',\n  'novalidate',\n  'nowrap',\n  'open',\n  'optimum',\n  'pattern',\n  'placeholder',\n  'playsinline',\n  'popover',\n  'popovertarget',\n  'popovertargetaction',\n  'poster',\n  'preload',\n  'pubdate',\n  'radiogroup',\n  'readonly',\n  'rel',\n  'required',\n  'rev',\n  'reversed',\n  'role',\n  'rows',\n  'rowspan',\n  'spellcheck',\n  'scope',\n  'selected',\n  'shape',\n  'size',\n  'sizes',\n  'span',\n  'srclang',\n  'start',\n  'src',\n  'srcset',\n  'step',\n  'style',\n  'summary',\n  'tabindex',\n  'title',\n  'translate',\n  'type',\n  'usemap',\n  'valign',\n  'value',\n  'width',\n  'wrap',\n  'xmlns',\n  'slot',\n] as const);\n\nexport const svg = freeze([\n  'accent-height',\n  'accumulate',\n  'additive',\n  'alignment-baseline',\n  'amplitude',\n  'ascent',\n  'attributename',\n  'attributetype',\n  'azimuth',\n  'basefrequency',\n  'baseline-shift',\n  'begin',\n  'bias',\n  'by',\n  'class',\n  'clip',\n  'clippathunits',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'diffuseconstant',\n  'direction',\n  'display',\n  'divisor',\n  'dur',\n  'edgemode',\n  'elevation',\n  'end',\n  'exponent',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'filterunits',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'fx',\n  'fy',\n  'g1',\n  'g2',\n  'glyph-name',\n  'glyphref',\n  'gradientunits',\n  'gradienttransform',\n  'height',\n  'href',\n  'id',\n  'image-rendering',\n  'in',\n  'in2',\n  'intercept',\n  'k',\n  'k1',\n  'k2',\n  'k3',\n  'k4',\n  'kerning',\n  'keypoints',\n  'keysplines',\n  'keytimes',\n  'lang',\n  'lengthadjust',\n  'letter-spacing',\n  'kernelmatrix',\n  'kernelunitlength',\n  'lighting-color',\n  'local',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'markerheight',\n  'markerunits',\n  'markerwidth',\n  'maskcontentunits',\n  'maskunits',\n  'max',\n  'mask',\n  'media',\n  'method',\n  'mode',\n  'min',\n  'name',\n  'numoctaves',\n  'offset',\n  'operator',\n  'opacity',\n  'order',\n  'orient',\n  'orientation',\n  'origin',\n  'overflow',\n  'paint-order',\n  'path',\n  'pathlength',\n  'patterncontentunits',\n  'patterntransform',\n  'patternunits',\n  'points',\n  'preservealpha',\n  'preserveaspectratio',\n  'primitiveunits',\n  'r',\n  'rx',\n  'ry',\n  'radius',\n  'refx',\n  'refy',\n  'repeatcount',\n  'repeatdur',\n  'restart',\n  'result',\n  'rotate',\n  'scale',\n  'seed',\n  'shape-rendering',\n  'slope',\n  'specularconstant',\n  'specularexponent',\n  'spreadmethod',\n  'startoffset',\n  'stddeviation',\n  'stitchtiles',\n  'stop-color',\n  'stop-opacity',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke',\n  'stroke-width',\n  'style',\n  'surfacescale',\n  'systemlanguage',\n  'tabindex',\n  'tablevalues',\n  'targetx',\n  'targety',\n  'transform',\n  'transform-origin',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'textlength',\n  'type',\n  'u1',\n  'u2',\n  'unicode',\n  'values',\n  'viewbox',\n  'visibility',\n  'version',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'width',\n  'word-spacing',\n  'wrap',\n  'writing-mode',\n  'xchannelselector',\n  'ychannelselector',\n  'x',\n  'x1',\n  'x2',\n  'xmlns',\n  'y',\n  'y1',\n  'y2',\n  'z',\n  'zoomandpan',\n] as const);\n\nexport const mathMl = freeze([\n  'accent',\n  'accentunder',\n  'align',\n  'bevelled',\n  'close',\n  'columnsalign',\n  'columnlines',\n  'columnspan',\n  'denomalign',\n  'depth',\n  'dir',\n  'display',\n  'displaystyle',\n  'encoding',\n  'fence',\n  'frame',\n  'height',\n  'href',\n  'id',\n  'largeop',\n  'length',\n  'linethickness',\n  'lspace',\n  'lquote',\n  'mathbackground',\n  'mathcolor',\n  'mathsize',\n  'mathvariant',\n  'maxsize',\n  'minsize',\n  'movablelimits',\n  'notation',\n  'numalign',\n  'open',\n  'rowalign',\n  'rowlines',\n  'rowspacing',\n  'rowspan',\n  'rspace',\n  'rquote',\n  'scriptlevel',\n  'scriptminsize',\n  'scriptsizemultiplier',\n  'selection',\n  'separator',\n  'separators',\n  'stretchy',\n  'subscriptshift',\n  'supscriptshift',\n  'symmetric',\n  'voffset',\n  'width',\n  'xmlns',\n]);\n\nexport const xml = freeze([\n  'xlink:href',\n  'xml:id',\n  'xlink:title',\n  'xml:space',\n  'xmlns:xlink',\n] as const);\n", "import { seal } from './utils.js';\n\n// eslint-disable-next-line unicorn/better-regex\nexport const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nexport const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nexport const TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nexport const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nexport const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nexport const IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nexport const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nexport const ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nexport const DOCTYPE_NAME = seal(/^html$/i);\nexport const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n", "/* eslint-disable @typescript-eslint/indent */\n\nimport type { TrustedHTML, TrustedTypesWindow } from 'trusted-types/lib';\nimport type { Config, UseProfilesConfig } from './config';\nimport * as TAGS from './tags.js';\nimport * as ATTRS from './attrs.js';\nimport * as EXPRESSIONS from './regexp.js';\nimport {\n  addToSet,\n  clone,\n  entries,\n  freeze,\n  arrayForEach,\n  arrayLastIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySplice,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringIndexOf,\n  stringTrim,\n  regExpTest,\n  typeErrorCreate,\n  lookupGetter,\n  create,\n  objectHasOwnProperty,\n} from './utils.js';\n\nexport type { Config } from './config';\n\ndeclare const VERSION: string;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5, // Deprecated\n  entityNode: 6, // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12, // Deprecated\n};\n\nconst getGlobal = function (): WindowLike {\n  return typeof window === 'undefined' ? null : window;\n};\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function (\n  trustedTypes: TrustedTypePolicyFactory,\n  purifyHostElement: HTMLScriptElement\n) {\n  if (\n    typeof trustedTypes !== 'object' ||\n    typeof trustedTypes.createPolicy !== 'function'\n  ) {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      },\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn(\n      'TrustedTypes policy ' + policyName + ' could not be created.'\n    );\n    return null;\n  }\n};\n\nconst _createHooksMap = function (): HooksMap {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: [],\n  };\n};\n\nfunction createDOMPurify(window: WindowLike = getGlobal()): DOMPurify {\n  const DOMPurify: DOMPurify = (root: WindowLike) => createDOMPurify(root);\n\n  DOMPurify.version = VERSION;\n\n  DOMPurify.removed = [];\n\n  if (\n    !window ||\n    !window.document ||\n    window.document.nodeType !== NODE_TYPE.document ||\n    !window.Element\n  ) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  let { document } = window;\n\n  const originalDocument = document;\n  const currentScript: HTMLScriptElement =\n    originalDocument.currentScript as HTMLScriptElement;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || (window as any).MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes,\n  } = window;\n\n  const ElementPrototype = Element.prototype;\n\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName,\n  } = document;\n  const { importNode } = originalDocument;\n\n  let hooks = _createHooksMap();\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported =\n    typeof entries === 'function' &&\n    typeof getParentNode === 'function' &&\n    implementation &&\n    implementation.createHTMLDocument !== undefined;\n\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT,\n  } = EXPRESSIONS;\n\n  let { IS_ALLOWED_URI } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n    ...TAGS.html,\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.mathMl,\n    ...TAGS.text,\n  ]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n    ...ATTRS.html,\n    ...ATTRS.svg,\n    ...ATTRS.mathMl,\n    ...ATTRS.xml,\n  ]);\n\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(\n    create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false,\n      },\n    })\n  );\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (7.3.3)\n   *   - DOM Tree Accessors (3.1.5)\n   *   - Form Element Parent-Child Relations (4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n   *   - HTMLCollection (4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES: UseProfilesConfig | false = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, [\n    'annotation-xml',\n    'audio',\n    'colgroup',\n    'desc',\n    'foreignobject',\n    'head',\n    'iframe',\n    'math',\n    'mi',\n    'mn',\n    'mo',\n    'ms',\n    'mtext',\n    'noembed',\n    'noframes',\n    'noscript',\n    'plaintext',\n    'script',\n    'style',\n    'svg',\n    'template',\n    'thead',\n    'title',\n    'video',\n    'xmp',\n  ]);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n    'audio',\n    'video',\n    'img',\n    'source',\n    'image',\n    'track',\n  ]);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n    'alt',\n    'class',\n    'for',\n    'id',\n    'label',\n    'name',\n    'pattern',\n    'placeholder',\n    'role',\n    'summary',\n    'title',\n    'value',\n    'style',\n    'xmlns',\n  ]);\n\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet(\n    {},\n    [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE],\n    stringToString\n  );\n\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n    'mi',\n    'mo',\n    'mn',\n    'ms',\n    'mtext',\n  ]);\n\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n    'title',\n    'style',\n    'font',\n    'a',\n    'script',\n  ]);\n\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE: null | DOMParserSupportedType = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc: null | Parameters<typeof addToSet>[2] = null;\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG: Config | null = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n\n  const isRegexOrFunction = function (\n    testValue: unknown\n  ): testValue is Function | RegExp {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function (cfg: Config = {}): void {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1\n        ? DEFAULT_PARSER_MEDIA_TYPE\n        : cfg.PARSER_MEDIA_TYPE;\n\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc =\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml'\n        ? stringToString\n        : stringToLowerCase;\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS')\n      ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc)\n      : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR')\n      ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc)\n      : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES')\n      ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString)\n      : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR')\n      ? addToSet(\n          clone(DEFAULT_URI_SAFE_ATTRIBUTES),\n          cfg.ADD_URI_SAFE_ATTR,\n          transformCaseFunc\n        )\n      : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS')\n      ? addToSet(\n          clone(DEFAULT_DATA_URI_TAGS),\n          cfg.ADD_DATA_URI_TAGS,\n          transformCaseFunc\n        )\n      : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS')\n      ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc)\n      : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS')\n      ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc)\n      : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR')\n      ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc)\n      : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES')\n      ? cfg.USE_PROFILES\n      : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI = cfg.ALLOWED_URI_REGEXP || EXPRESSIONS.IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS =\n      cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS =\n      cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements ===\n        'boolean'\n    ) {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements =\n        cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, TAGS.text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, TAGS.html);\n        addToSet(ALLOWED_ATTR, ATTRS.html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svgFilters);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, TAGS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.'\n        );\n      }\n\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.'\n        );\n      }\n\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(\n          trustedTypes,\n          currentScript\n        );\n      }\n\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.svgDisallowed,\n  ]);\n  const ALL_MATHML_TAGS = addToSet({}, [\n    ...TAGS.mathMl,\n    ...TAGS.mathMlDisallowed,\n  ]);\n\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function (element: Element): boolean {\n    let parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template',\n      };\n    }\n\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return (\n          tagName === 'svg' &&\n          (parentTagName === 'annotation-xml' ||\n            MATHML_TEXT_INTEGRATION_POINTS[parentTagName])\n        );\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (\n        parent.namespaceURI === SVG_NAMESPACE &&\n        !HTML_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      if (\n        parent.namespaceURI === MATHML_NAMESPACE &&\n        !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return (\n        !ALL_MATHML_TAGS[tagName] &&\n        (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName])\n      );\n    }\n\n    // For XHTML and XML documents that support custom namespaces\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      ALLOWED_NAMESPACES[element.namespaceURI]\n    ) {\n      return true;\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function (node: Node): void {\n    arrayPush(DOMPurify.removed, { element: node });\n\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function (name: string, element: Element): void {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element,\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element,\n      });\n    }\n\n    element.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function (dirty: string): Document {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      NAMESPACE === HTML_NAMESPACE\n    ) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty =\n        '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' +\n        dirty +\n        '</body></html>';\n    }\n\n    const dirtyPayload = trustedTypesPolicy\n      ? trustedTypesPolicy.createHTML(dirty)\n      : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT\n          ? emptyHTML\n          : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    const body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(\n        document.createTextNode(leadingWhitespace),\n        body.childNodes[0] || null\n      );\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(\n        doc,\n        WHOLE_DOCUMENT ? 'html' : 'body'\n      )[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function (root: Node): NodeIterator {\n    return createNodeIterator.call(\n      root.ownerDocument || root,\n      root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT |\n        NodeFilter.SHOW_COMMENT |\n        NodeFilter.SHOW_TEXT |\n        NodeFilter.SHOW_PROCESSING_INSTRUCTION |\n        NodeFilter.SHOW_CDATA_SECTION,\n      null\n    );\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function (element: Element): boolean {\n    return (\n      element instanceof HTMLFormElement &&\n      (typeof element.nodeName !== 'string' ||\n        typeof element.textContent !== 'string' ||\n        typeof element.removeChild !== 'function' ||\n        !(element.attributes instanceof NamedNodeMap) ||\n        typeof element.removeAttribute !== 'function' ||\n        typeof element.setAttribute !== 'function' ||\n        typeof element.namespaceURI !== 'string' ||\n        typeof element.insertBefore !== 'function' ||\n        typeof element.hasChildNodes !== 'function')\n    );\n  };\n\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function (value: unknown): value is Node {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n\n  function _executeHooks<\n    T extends\n      | NodeHook\n      | ElementHook\n      | DocumentFragmentHook\n      | UponSanitizeElementHook\n      | UponSanitizeAttributeHook\n  >(hooks: T[], currentNode: Parameters<T>[0], data: Parameters<T>[1]): void {\n    arrayForEach(hooks, (hook) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function (currentNode: any): boolean {\n    let content = null;\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS,\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (\n      SAFE_FOR_XML &&\n      currentNode.hasChildNodes() &&\n      !_isNode(currentNode.firstElementChild) &&\n      regExpTest(/<[/\\w!]/g, currentNode.innerHTML) &&\n      regExpTest(/<[/\\w!]/g, currentNode.textContent)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any kind of possibly harmful comments */\n    if (\n      SAFE_FOR_XML &&\n      currentNode.nodeType === NODE_TYPE.comment &&\n      regExpTest(/<[/\\w]/g, currentNode.data)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n          regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)\n        ) {\n          return false;\n        }\n\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)\n        ) {\n          return false;\n        }\n      }\n\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if (\n      (tagName === 'noscript' ||\n        tagName === 'noembed' ||\n        tagName === 'noframes') &&\n      regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr) => {\n        content = stringReplace(content, expr, ' ');\n      });\n\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function (\n    lcTag: string,\n    lcName: string,\n    value: string\n  ): boolean {\n    /* Make sure attribute cannot clobber */\n    if (\n      SANITIZE_DOM &&\n      (lcName === 'id' || lcName === 'name') &&\n      (value in document || value in formElement)\n    ) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (\n      ALLOW_DATA_ATTR &&\n      !FORBID_ATTR[lcName] &&\n      regExpTest(DATA_ATTR, lcName)\n    ) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        (_isBasicCustomElement(lcTag) &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag))) &&\n          ((CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName)) ||\n            (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)))) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        (lcName === 'is' &&\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))))\n      ) {\n        // If user has supplied a regexp or function in CUSTOM_ELEMENT_HANDLING.tagNameCheck, we need to also allow derived custom elements using the same tagName test.\n        // Additionally, we need to allow attributes passing the CUSTOM_ELEMENT_HANDLING.attributeNameCheck user has configured, as custom elements can define these at their own discretion.\n      } else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (\n      regExpTest(IS_ALLOWED_URI, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if (\n      (lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') &&\n      lcTag !== 'script' &&\n      stringIndexOf(value, 'data:') === 0 &&\n      DATA_URI_TAGS[lcTag]\n    ) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (\n      ALLOW_UNKNOWN_PROTOCOLS &&\n      !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Check for binary attributes */\n    } else if (value) {\n      return false;\n    } else {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    }\n\n    return true;\n  };\n\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function (tagName: string): RegExpMatchArray {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function (currentNode: Element): void {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n\n    const { attributes } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined,\n    };\n    let l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const { name, namespaceURI, value: attrValue } = attr;\n      const lcName = transformCaseFunc(name);\n\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr) => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Handle attributes that require Trusted Types */\n      if (\n        trustedTypesPolicy &&\n        typeof trustedTypes === 'object' &&\n        typeof trustedTypes.getAttributeType === 'function'\n      ) {\n        if (namespaceURI) {\n          /* Namespaces are not yet supported, see https://bugs.chromium.org/p/chromium/issues/detail?id=1305293 */\n        } else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML': {\n              value = trustedTypesPolicy.createHTML(value);\n              break;\n            }\n\n            case 'TrustedScriptURL': {\n              value = trustedTypesPolicy.createScriptURL(value);\n              break;\n            }\n\n            default: {\n              break;\n            }\n          }\n        }\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function (fragment: DocumentFragment): void {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n\n    while ((shadowNode = shadowIterator.nextNode())) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg = {}) {\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if ((dirty as Node).nodeName) {\n        const tagName = transformCaseFunc((dirty as Node).nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate(\n            'root node is forbidden and cannot be sanitized in-place'\n          );\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (\n        importedNode.nodeType === NODE_TYPE.element &&\n        importedNode.nodeName === 'BODY'\n      ) {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (\n        !RETURN_DOM &&\n        !SAFE_FOR_TEMPLATES &&\n        !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1\n      ) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n          ? trustedTypesPolicy.createHTML(dirty)\n          : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while ((currentNode = nodeIterator.nextNode())) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Serialize doctype if allowed */\n    if (\n      WHOLE_DOCUMENT &&\n      ALLOWED_TAGS['!doctype'] &&\n      body.ownerDocument &&\n      body.ownerDocument.doctype &&\n      body.ownerDocument.doctype.name &&\n      regExpTest(EXPRESSIONS.DOCTYPE_NAME, body.ownerDocument.doctype.name)\n    ) {\n      serializedHTML =\n        '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr) => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML(serializedHTML)\n      : serializedHTML;\n  };\n\n  DOMPurify.setConfig = function (cfg = {}) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n\n      return index === -1\n        ? undefined\n        : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n\n    return arrayPop(hooks[entryPoint]);\n  };\n\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n\n  return DOMPurify;\n}\n\nexport default createDOMPurify();\n\nexport interface DOMPurify {\n  /**\n   * Creates a DOMPurify instance using the given window-like object. Defaults to `window`.\n   */\n  (root?: WindowLike): DOMPurify;\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  version: string;\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  removed: Array<RemovedElement | RemovedAttribute>;\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  isSupported: boolean;\n\n  /**\n   * Set the configuration once.\n   *\n   * @param cfg configuration object\n   */\n  setConfig(cfg?: Config): void;\n\n  /**\n   * Removes the configuration.\n   */\n  clearConfig(): void;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized TrustedHTML.\n   */\n  sanitize(\n    dirty: string | Node,\n    cfg: Config & { RETURN_TRUSTED_TYPE: true }\n  ): TrustedHTML;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty DOM node\n   * @param cfg object\n   * @returns Sanitized DOM node.\n   */\n  sanitize(dirty: Node, cfg: Config & { IN_PLACE: true }): Node;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized DOM node.\n   */\n  sanitize(dirty: string | Node, cfg: Config & { RETURN_DOM: true }): Node;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized document fragment.\n   */\n  sanitize(\n    dirty: string | Node,\n    cfg: Config & { RETURN_DOM_FRAGMENT: true }\n  ): DocumentFragment;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized string.\n   */\n  sanitize(dirty: string | Node, cfg?: Config): string;\n\n  /**\n   * Checks if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   *\n   * @param tag Tag name of containing element.\n   * @param attr Attribute name.\n   * @param value Attribute value.\n   * @returns Returns true if `value` is valid. Otherwise, returns false.\n   */\n  isValidAttribute(tag: string, attr: string, value: string): boolean;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(entryPoint: BasicHookName, hookFunction: NodeHook): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(entryPoint: ElementHookName, hookFunction: ElementHook): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: DocumentFragmentHookName,\n    hookFunction: DocumentFragmentHook\n  ): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: 'uponSanitizeElement',\n    hookFunction: UponSanitizeElementHook\n  ): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: 'uponSanitizeAttribute',\n    hookFunction: UponSanitizeAttributeHook\n  ): void;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: BasicHookName,\n    hookFunction?: NodeHook\n  ): NodeHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: ElementHookName,\n    hookFunction?: ElementHook\n  ): ElementHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: DocumentFragmentHookName,\n    hookFunction?: DocumentFragmentHook\n  ): DocumentFragmentHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: 'uponSanitizeElement',\n    hookFunction?: UponSanitizeElementHook\n  ): UponSanitizeElementHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: 'uponSanitizeAttribute',\n    hookFunction?: UponSanitizeAttributeHook\n  ): UponSanitizeAttributeHook | undefined;\n\n  /**\n   * Removes all DOMPurify hooks at a given entryPoint\n   *\n   * @param entryPoint entry point for the hooks to remove\n   */\n  removeHooks(entryPoint: HookName): void;\n\n  /**\n   * Removes all DOMPurify hooks.\n   */\n  removeAllHooks(): void;\n}\n\n/**\n * An element removed by DOMPurify.\n */\nexport interface RemovedElement {\n  /**\n   * The element that was removed.\n   */\n  element: Node;\n}\n\n/**\n * An element removed by DOMPurify.\n */\nexport interface RemovedAttribute {\n  /**\n   * The attribute that was removed.\n   */\n  attribute: Attr | null;\n\n  /**\n   * The element that the attribute was removed.\n   */\n  from: Node;\n}\n\ntype BasicHookName =\n  | 'beforeSanitizeElements'\n  | 'afterSanitizeElements'\n  | 'uponSanitizeShadowNode';\ntype ElementHookName = 'beforeSanitizeAttributes' | 'afterSanitizeAttributes';\ntype DocumentFragmentHookName =\n  | 'beforeSanitizeShadowDOM'\n  | 'afterSanitizeShadowDOM';\ntype UponSanitizeElementHookName = 'uponSanitizeElement';\ntype UponSanitizeAttributeHookName = 'uponSanitizeAttribute';\n\ninterface HooksMap {\n  beforeSanitizeElements: NodeHook[];\n  afterSanitizeElements: NodeHook[];\n  beforeSanitizeShadowDOM: DocumentFragmentHook[];\n  uponSanitizeShadowNode: NodeHook[];\n  afterSanitizeShadowDOM: DocumentFragmentHook[];\n  beforeSanitizeAttributes: ElementHook[];\n  afterSanitizeAttributes: ElementHook[];\n  uponSanitizeElement: UponSanitizeElementHook[];\n  uponSanitizeAttribute: UponSanitizeAttributeHook[];\n}\n\nexport type HookName =\n  | BasicHookName\n  | ElementHookName\n  | DocumentFragmentHookName\n  | UponSanitizeElementHookName\n  | UponSanitizeAttributeHookName;\n\nexport type NodeHook = (\n  this: DOMPurify,\n  currentNode: Node,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type ElementHook = (\n  this: DOMPurify,\n  currentNode: Element,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type DocumentFragmentHook = (\n  this: DOMPurify,\n  currentNode: DocumentFragment,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type UponSanitizeElementHook = (\n  this: DOMPurify,\n  currentNode: Node,\n  hookEvent: UponSanitizeElementHookEvent,\n  config: Config\n) => void;\n\nexport type UponSanitizeAttributeHook = (\n  this: DOMPurify,\n  currentNode: Element,\n  hookEvent: UponSanitizeAttributeHookEvent,\n  config: Config\n) => void;\n\nexport interface UponSanitizeElementHookEvent {\n  tagName: string;\n  allowedTags: Record<string, boolean>;\n}\n\nexport interface UponSanitizeAttributeHookEvent {\n  attrName: string;\n  attrValue: string;\n  keepAttr: boolean;\n  allowedAttributes: Record<string, boolean>;\n  forceKeepAttr: boolean | undefined;\n}\n\n/**\n * A `Window`-like object containing the properties and types that DOMPurify requires.\n */\nexport type WindowLike = Pick<\n  typeof globalThis,\n  | 'DocumentFragment'\n  | 'HTMLTemplateElement'\n  | 'Node'\n  | 'Element'\n  | 'NodeFilter'\n  | 'NamedNodeMap'\n  | 'HTMLFormElement'\n  | 'DOMParser'\n> & {\n  document?: Document;\n  MozNamedAttrMap?: typeof window.NamedNodeMap;\n} & Pick<TrustedTypesWindow, 'trustedTypes'>;\n", "export const BOT_NAME_PREFIXES = [\n  \"Akkadian\",\n  \"Babylonian\",\n  \"Sumerian\",\n  \"Hittite\",\n  \"Phoenician\",\n  \"Canaanite\",\n  \"Minoan\",\n  \"Mycenaean\",\n  \"Etruscan\",\n  \"Scythian\",\n  \"Thracian\",\n  \"Dacian\",\n  \"Illyrian\",\n  \"Median\",\n  \"Chaldean\",\n  \"Roman\",\n  \"Greek\",\n  \"Byzantine\",\n  \"Persian\",\n  \"Parthian\",\n  \"Seleucid\",\n  \"Ptolemaic\",\n  \"Palmyrene\",\n  \"Macedonian\",\n  \"Carthaginian\",\n  \"Ming\",\n  \"Tang\",\n  \"Song\",\n  \"Yuan\",\n  \"Mauryan\",\n  \"Kushan\",\n  \"Rajput\",\n  \"Mughal\",\n  \"Satavahana\",\n  \"Vijayanagara\",\n  \"Egyptian\",\n  \"Nubian\",\n  \"Kushite\",\n  \"Aksumite\",\n  \"Ethiopian\",\n  \"Songhai\",\n  \"Malian\",\n  \"Ghanaian\",\n  \"Benin\",\n  \"Ashanti\",\n  \"Zulu\",\n  \"Tuareg\",\n  \"Berber\",\n  \"Kanem-Bornu\",\n  \"Buganda\",\n  \"Mossi\",\n  \"Swahili\",\n  \"Somali\",\n  \"Wolof\",\n  \"Umayyad\",\n  \"Abbasid\",\n  \"Ayyubid\",\n  \"Fatimid\",\n  \"Mamluk\",\n  \"Seljuk\",\n  \"Safavid\",\n  \"Ottoman\",\n  \"Almoravid\",\n  \"Almohad\",\n  \"Rashidun\",\n  \"Ziyarid\",\n  \"Frankish\",\n  \"Visigothic\",\n  \"Ostrogothic\",\n  \"Viking\",\n  \"Norman\",\n  \"Saxon\",\n  \"Anglo-Saxon\",\n  \"Celtic\",\n  \"Gaulish\",\n  \"Carolingian\",\n  \"Merovingian\",\n  \"Capetian\",\n  \"Plantagenet\",\n  \"Tudor\",\n  \"Stuart\",\n  \"Habsburg\",\n  \"Romanov\",\n  \"Lancaster\",\n  \"York\",\n  \"Bourbon\",\n  \"Napoleonic\",\n  \"British\",\n  \"French\",\n  \"Spanish\",\n  \"Portuguese\",\n  \"Dutch\",\n  \"Russian\",\n  \"German\",\n  \"Italian\",\n  \"Swedish\",\n  \"Norwegian\",\n  \"Danish\",\n  \"Polish\",\n  \"Hungarian\",\n  \"Austrian\",\n  \"Swiss\",\n  \"Czech\",\n  \"Slovak\",\n  \"Serbian\",\n  \"Croatian\",\n  \"Bosnian\",\n  \"Montenegrin\",\n  \"Bulgarian\",\n  \"Romanian\",\n  \"Apache\",\n  \"Sioux\",\n  \"Cherokee\",\n  \"Navajo\",\n  \"Iroquois\",\n  \"Inuit\",\n  \"Arawak\",\n  \"Carib\",\n  \"Taino\",\n  \"Aztec\",\n  \"Mayan\",\n  \"Incan\",\n  \"Mapuche\",\n  \"Guarani\",\n  \"Tupi\",\n  \"Yanomami\",\n  \"Zuni\",\n  \"Hopi\",\n  \"Kiowa\",\n  \"Comanche\",\n  \"Shoshone\",\n  \"Japanese\",\n  \"Ryukyu\",\n  \"Ainu\",\n  \"Cham\",\n  \"Khmer\",\n  \"Thai\",\n  \"Vietnamese\",\n  \"Burmese\",\n  \"Balinese\",\n  \"Malay\",\n  \"Filipino\",\n  \"Mongolian\",\n  \"Korean\",\n  \"Tibetan\",\n  \"Manchu\",\n  \"Uyghur\",\n  \"Hmong\",\n  \"Karen\",\n  \"Pyu\",\n  \"Hawaiian\",\n  \"Fijian\",\n  \"Tongan\",\n  \"Samoan\",\n  \"Maori\",\n  \"Micronesian\",\n  \"Hebrew\",\n  \"Armenian\",\n  \"Circassian\",\n  \"Georgian\",\n  \"Phoenician\",\n  \"Chaldean\",\n  \"Kurdish\",\n  \"Turkic\",\n  \"Kazakh\",\n  \"Uzbek\",\n  \"Kyrgyz\",\n  \"Tajik\",\n  \"Uighur\",\n  \"Pashtun\",\n  \"Baloch\",\n  \"Afghan\",\n  \"Persian\",\n  \"Kenyan\",\n  \"Ugandan\",\n  \"Bhutanese\",\n  \"Latin\",\n  \"Moldovan\",\n  \"Militant\",\n  \"Spartan\",\n];\nexport const BOT_NAME_SUFFIXES = [\n  \"Empire\",\n  \"Dynasty\",\n  \"Kingdom\",\n  \"Queendom\",\n  \"Sultanate\",\n  \"Confederation\",\n  \"Union\",\n  \"Republic\",\n  \"Caliphate\",\n  \"Dominion\",\n  \"Realm\",\n  \"State\",\n  \"Federation\",\n  \"Territory\",\n  \"Commonwealth\",\n  \"League\",\n  \"Duchy\",\n  \"Province\",\n  \"Protectorate\",\n  \"Colony\",\n  \"Mandate\",\n  \"Free State\",\n  \"Canton\",\n  \"Region\",\n  \"Nation\",\n  \"Assembly\",\n  \"Hierarchy\",\n  \"Archduchy\",\n  \"Grand Duchy\",\n  \"Metropolis\",\n  \"Cluster\",\n  \"Alliance\",\n  \"Tribunal\",\n  \"Council\",\n  \"Confederacy\",\n  \"Order\",\n  \"Regime\",\n  \"Dominion\",\n  \"Syndicate\",\n  \"Guild\",\n  \"Corporation\",\n  \"Patriarchy\",\n  \"Matriarchy\",\n  \"Legion\",\n  \"Horde\",\n  \"Clan\",\n  \"Brotherhood\",\n  \"Sisterhood\",\n  \"Ascendancy\",\n  \"Supremacy\",\n  \"Province\",\n  \"Tribe\",\n  \"Dominion\",\n  \"Assembly\",\n  \"Republics\",\n  \"Army\",\n  \"Dictatorship\",\n  \"Country\",\n  \"Oligarchy\",\n  \"Monkdom\",\n  \"Throng\",\n  \"Host\",\n  \"Area\",\n  \"District\",\n  \"Fief\",\n  \"Wilderness\",\n  \"Settlement\",\n  \"Parliament\",\n  \"Anarchy\",\n  \"Democracy\",\n  \"Autocracy\",\n];\nexport const COMMUNITY_FULL_ELF_NAMES = [\n  \"evan the Creator Elf\",\n  \"iamlewis the Head Elf\",\n  \"Restart the Community Elf\",\n  \"Mr Box the Dev Elf\",\n  \"InGloriousTom the Dev Elf\",\n  \"Sheikh the First Elf\",\n  \"N0ur the Flag Elf\",\n  \"Diessel the UI Elf\",\n  \"Nikola123 the Map Elf\",\n  \"Aotumuri the Language Elf\",\n  \"Pilkey the Admin Elf\",\n  \"Mr tryout33s Elf\",\n  \"Biffeur the YT Elf\",\n  \"Enzo the YT Elf\",\n  \"Molky the YT Elf\",\n  \"FuzeIII the YT Elf\",\n  \"Node the YT Elf\",\n  \"Lumiin the YT Elf\",\n  \"youngfentanyl OFM Elf\",\n  \"Remorse the Wiki Elf\",\n  \"Lonely Millennial Twitch Elf\",\n  \"Kaizeron OFM Elf\",\n  \"Zilka OFM Elf\",\n  \"JIZK Caster Elf\",\n  \"MiraCZ the FP Elf\",\n  \"aPuddle best Elf\",\n  \"lucas the sound Elf\",\n  \"Fulayon the YT Elf\",\n  \"Drew durnell YT Elf\",\n  \"The Spiffing Brit YT Elf\",\n  \"Ultimus Rex YT Elf\",\n  \"MizuUmi the YT Elf\",\n];\nexport const SPECIAL_FULL_ELF_NAMES = [\n  \"Santa\",\n  \"Rudolf the Reindeer\",\n  \"Frosty the Snowman\",\n  \"Hermey the Elf\",\n  \"Ivan the Elf\",\n  \"Elf on the Shelf\",\n  \"Buddy the Elf\",\n  \"Legolas\",\n  \"Elrond\",\n  \"Galadriel\",\n  \"Celeborn\",\n  \"Glorfindel\",\n];\nexport const COMMUNITY_PREFIXES = [\n  \"The Sparkling Elf\",\n  \"Valentino\",\n  \"Mr Cube\",\n  \"Nukeman\",\n  \"Baguette Bot\",\n  \"Kiwi\",\n  \"FakeNeo\",\n  \"Toyatak\",\n  \"Readix\",\n  \"Danny\",\n  \"php\",\n  \"Redincon\",\n  \"Sachx.\",\n  \"Fuity Mctooty\",\n  \"Vimacs\",\n  \"Wraith\",\n  \"Phantom\",\n  \"Crescent\",\n  \"OF Therapist\",\n  \"Aviid\",\n  \"brunoo\",\n  \"Ezaru\",\n  \"prices\",\n  \"Santos\",\n  \"Wonder\",\n  \"Vincent\",\n  \"Smith M\",\n  \"Acer Alex\",\n  \"Controller\",\n  \"d3n0x\",\n  \"devalnor\",\n  \"FloPinguin\",\n  \"falcon\",\n  \"GlacialDrift\",\n  \"Jax\",\n  \"Killersoren\",\n  \"MiniMeTiny\",\n  \"Remissile\",\n  \"Sorikairo\",\n  \"That Otter\",\n  \"Arya\",\n  \"Nebula\",\n  \"takeser\",\n  \"Kai IL PAZZO\",\n  \"Vanon\",\n  \"Foorack\",\n  \"Abod\",\n  \"aaa4xu\",\n  \"Goblinon\",\n  \"dx\",\n  \"Pod\",\n  \"Demonessica\",\n  \"Dovg\",\n  \"Joel\",\n  \"LegitimatelyCool1\",\n  \"OxMzimzy\",\n  \"RTHOne\",\n  \"Egophobic\",\n  \"djmrFunnyMan\",\n  \"5oliloguy\",\n  \"cfsolver\",\n  \"nvm\",\n  \"Supbro\",\n  \"Mischa\",\n  \"WALMART NINJA\",\n  \"Magico\",\n  \"sidious\",\n  \"Bruny\",\n  \"Goofer\",\n  \"Backn\",\n  \"EyeSeeEm\",\n  \"TrionX\",\n  \"Theodora\",\n  \"platz1de\",\n  \"Maths Empire\",\n  \"Moha\",\n  \"SyntaxPM\",\n  \"theskeleton4393\",\n  \"juliosilvaqwerty5\",\n  \"NewHappyRabbit\",\n  \"Moki\",\n  \"Xaelor\",\n  \"NiclasWK\",\n  \"cldprv\",\n  \"r3ms\",\n  \"Tanepro193\",\n  \"gx21\",\n  \"toldinsound\",\n  \"jacks0n\",\n  \"floriankilian\",\n  \"Fibig\",\n  \"Texxter\",\n  \"pantelispantelidis\",\n  \"ap ms\",\n  \"frappa10\",\n  \"Lollosean\",\n  \"daimyo panda2\",\n  \"gafunuko\",\n  \"Jinyoon\",\n  \"Perdiccas\",\n  \"zibi\",\n  \"RinkyDinky\",\n  \"Rulfam\",\n  \"Nobody\",\n  \"Vekser\",\n  \"extraextra\",\n  \"MotivatedMonkey\",\n  \"6uzm4n\",\n  \"theangel2\",\n  \"Keevee\",\n  \"Makonede\",\n  \"grassified\",\n  \"Zjefken\",\n  \"Summers Nick\",\n  \"Marvin\",\n  \"EagleEye\",\n  \"Shahiid\",\n  \"INGSOC\",\n  \"SIG\",\n  \"Bobo\",\n  \"seekerreturns\",\n  \"SlyTy\",\n  \"Leo 21\",\n  \"FX\",\n  \"Calrathan\",\n  \"AzloD\",\n  \"SunnyBoyWTF\",\n  \"BeGj\",\n  \"tnhnblgl\",\n  \"BrunoJurkovic\",\n  \"q8gazy\",\n  \"Kipstz\",\n  \"aqw42\",\n  \"TylerHavanan\",\n  \"KerodK\",\n  \"ghisloufou\",\n  \"dxtron\",\n  \"Sii\",\n];\n", "import DOMPurify from \"dompurify\";\nimport { customAlphabet } from \"nanoid\";\nimport { Cell, Unit } from \"./game/Game\";\nimport { GameMap, TileRef } from \"./game/GameMap\";\nimport {\n  GameConfig,\n  GameID,\n  GameRecord,\n  PartialGameRecord,\n  PlayerRecord,\n  Turn,\n  Winner,\n} from \"./Schemas\";\n\nimport {\n  BOT_NAME_PREFIXES,\n  BOT_NAME_SUFFIXES,\n} from \"./execution/utils/BotNames\";\n\nexport function manhattanDistWrapped(\n  c1: Cell,\n  c2: Cell,\n  width: number,\n): number {\n  // Calculate x distance\n  let dx = Math.abs(c1.x - c2.x);\n  // Check if wrapping around the x-axis is shorter\n  dx = Math.min(dx, width - dx);\n\n  // Calculate y distance (no wrapping for y-axis)\n  const dy = Math.abs(c1.y - c2.y);\n\n  // Return the sum of x and y distances\n  return dx + dy;\n}\n\nexport function within(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function distSort(\n  gm: GameMap,\n  target: TileRef,\n): (a: TileRef, b: TileRef) => number {\n  return (a: TileRef, b: TileRef) => {\n    return gm.manhattanDist(a, target) - gm.manhattanDist(b, target);\n  };\n}\n\nexport function distSortUnit(\n  gm: GameMap,\n  target: Unit | TileRef,\n): (a: Unit, b: Unit) => number {\n  const targetRef = typeof target === \"number\" ? target : target.tile();\n\n  return (a: Unit, b: Unit) => {\n    return (\n      gm.manhattanDist(a.tile(), targetRef) -\n      gm.manhattanDist(b.tile(), targetRef)\n    );\n  };\n}\n\nexport function simpleHash(str: string): number {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n  return Math.abs(hash);\n}\n\nexport function calculateBoundingBox(\n  gm: GameMap,\n  borderTiles: ReadonlySet<TileRef>,\n): { min: Cell; max: Cell } {\n  let minX = Infinity,\n    minY = Infinity,\n    maxX = -Infinity,\n    maxY = -Infinity;\n\n  borderTiles.forEach((tile: TileRef) => {\n    const cell = gm.cell(tile);\n    minX = Math.min(minX, cell.x);\n    minY = Math.min(minY, cell.y);\n    maxX = Math.max(maxX, cell.x);\n    maxY = Math.max(maxY, cell.y);\n  });\n\n  return { min: new Cell(minX, minY), max: new Cell(maxX, maxY) };\n}\n\nexport function boundingBoxTiles(\n  gm: GameMap,\n  center: TileRef,\n  radius: number,\n): TileRef[] {\n  const tiles: TileRef[] = [];\n\n  const centerX = gm.x(center);\n  const centerY = gm.y(center);\n\n  const minX = centerX - radius;\n  const maxX = centerX + radius;\n  const minY = centerY - radius;\n  const maxY = centerY + radius;\n\n  // Top and bottom edges (full width)\n  for (let x = minX; x <= maxX; x++) {\n    if (gm.isValidCoord(x, minY)) {\n      tiles.push(gm.ref(x, minY));\n    }\n    if (gm.isValidCoord(x, maxY) && minY !== maxY) {\n      tiles.push(gm.ref(x, maxY));\n    }\n  }\n\n  // Left and right edges (exclude corners already added)\n  for (let y = minY + 1; y < maxY; y++) {\n    if (gm.isValidCoord(minX, y)) {\n      tiles.push(gm.ref(minX, y));\n    }\n    if (gm.isValidCoord(maxX, y) && minX !== maxX) {\n      tiles.push(gm.ref(maxX, y));\n    }\n  }\n\n  return tiles;\n}\n\nexport function getMode<T>(counts: Map<T, number>): T | null {\n  let mode: T | null = null;\n  let maxCount = 0;\n\n  for (const [item, count] of counts) {\n    if (count > maxCount) {\n      maxCount = count;\n      mode = item;\n    }\n  }\n\n  return mode;\n}\n\nexport function calculateBoundingBoxCenter(\n  gm: GameMap,\n  borderTiles: ReadonlySet<TileRef>,\n): Cell {\n  const { min, max } = calculateBoundingBox(gm, borderTiles);\n  return boundingBoxCenter({ min, max });\n}\n\nexport function boundingBoxCenter(box: { min: Cell; max: Cell }): Cell {\n  return new Cell(\n    box.min.x + Math.floor((box.max.x - box.min.x) / 2),\n    box.min.y + Math.floor((box.max.y - box.min.y) / 2),\n  );\n}\n\nexport function inscribed(\n  outer: { min: Cell; max: Cell },\n  inner: { min: Cell; max: Cell },\n): boolean {\n  return (\n    outer.min.x <= inner.min.x &&\n    outer.min.y <= inner.min.y &&\n    outer.max.x >= inner.max.x &&\n    outer.max.y >= inner.max.y\n  );\n}\n\nexport function sanitize(name: string): string {\n  return Array.from(name)\n    .join(\"\")\n    .replace(/[^\\p{L}\\p{N}\\s\\p{Emoji}\\p{Emoji_Component}[\\]_]/gu, \"\");\n}\n\nexport function onlyImages(html: string) {\n  return DOMPurify.sanitize(html, {\n    ALLOWED_TAGS: [\"span\", \"img\"],\n    ALLOWED_ATTR: [\"src\", \"alt\", \"class\", \"style\"],\n    ALLOWED_URI_REGEXP: /^https:\\/\\/cdn\\.jsdelivr\\.net\\/gh\\/twitter\\/twemoji/,\n    ADD_ATTR: [\"style\"],\n  });\n}\n\nexport function createPartialGameRecord(\n  gameID: GameID,\n  config: GameConfig,\n  // username does not need to be set.\n  players: PlayerRecord[],\n  allTurns: Turn[],\n  start: number,\n  end: number,\n  winner: Winner,\n  // lobby creation time (ms). Defaults to start time for singleplayer.\n  lobbyCreatedAt?: number,\n): PartialGameRecord {\n  const duration = Math.floor((end - start) / 1000);\n  const num_turns = allTurns.length;\n  const turns = allTurns.filter(\n    (t) => t.intents.length !== 0 || t.hash !== undefined,\n  );\n\n  // Use start time as lobby creation time for singleplayer\n  const actualLobbyCreatedAt = lobbyCreatedAt ?? start;\n  const lobbyFillTime = Math.max(\n    0,\n    start - Math.min(actualLobbyCreatedAt, start),\n  );\n\n  const record: PartialGameRecord = {\n    info: {\n      gameID,\n      lobbyCreatedAt: actualLobbyCreatedAt,\n      lobbyFillTime,\n      config,\n      players,\n      start,\n      end,\n      duration,\n      num_turns,\n      winner,\n    },\n    version: \"v0.0.2\",\n    turns,\n  };\n  return record;\n}\n\nexport function decompressGameRecord(gameRecord: GameRecord) {\n  const turns: Turn[] = [];\n  let lastTurnNum = -1;\n  for (const turn of gameRecord.turns) {\n    while (lastTurnNum < turn.turnNumber - 1) {\n      lastTurnNum++;\n      turns.push({\n        turnNumber: lastTurnNum,\n        intents: [],\n      });\n    }\n    turns.push(turn);\n    lastTurnNum = turn.turnNumber;\n  }\n  const turnLength = turns.length;\n  for (let i = turnLength; i < gameRecord.info.num_turns; i++) {\n    turns.push({\n      turnNumber: i,\n      intents: [],\n    });\n  }\n  gameRecord.turns = turns;\n  return gameRecord;\n}\n\nexport function assertNever(x: never): never {\n  throw new Error(\"Unexpected value: \" + x);\n}\n\nexport function generateID(): GameID {\n  const nanoid = customAlphabet(\n    \"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\",\n    8,\n  );\n  return nanoid();\n}\n\nexport function toInt(num: number): bigint {\n  if (num === Infinity) {\n    return BigInt(Number.MAX_SAFE_INTEGER);\n  }\n  if (num === -Infinity) {\n    return BigInt(Number.MIN_SAFE_INTEGER);\n  }\n  return BigInt(Math.floor(num));\n}\n\nexport function maxInt(a: bigint, b: bigint): bigint {\n  return a > b ? a : b;\n}\n\nexport function minInt(a: bigint, b: bigint): bigint {\n  return a < b ? a : b;\n}\nexport function withinInt(num: bigint, min: bigint, max: bigint): bigint {\n  const atLeastMin = maxInt(num, min);\n  return minInt(atLeastMin, max);\n}\n\nexport function createRandomName(\n  name: string,\n  playerType: string,\n): string | null {\n  let randomName: string | null = null;\n  if (playerType === \"HUMAN\") {\n    const hash = simpleHash(name);\n    const prefixIndex = hash % BOT_NAME_PREFIXES.length;\n    const suffixIndex =\n      Math.floor(hash / BOT_NAME_PREFIXES.length) % BOT_NAME_SUFFIXES.length;\n\n    randomName = `\uD83D\uDC64 ${BOT_NAME_PREFIXES[prefixIndex]} ${BOT_NAME_SUFFIXES[suffixIndex]}`;\n  }\n  return randomName;\n}\n\nexport const emojiTable = [\n  [\"\uD83D\uDE00\", \"\uD83D\uDE0A\", \"\uD83E\uDD70\", \"\uD83D\uDE07\", \"\uD83D\uDE0E\"],\n  [\"\uD83D\uDE1E\", \"\uD83E\uDD7A\", \"\uD83D\uDE2D\", \"\uD83D\uDE31\", \"\uD83D\uDE21\"],\n  [\"\uD83D\uDE08\", \"\uD83E\uDD21\", \"\uD83E\uDD71\", \"\uD83E\uDEE1\", \"\uD83D\uDD95\"],\n  [\"\uD83D\uDC4B\", \"\uD83D\uDC4F\", \"\u270B\", \"\uD83D\uDE4F\", \"\uD83D\uDCAA\"],\n  [\"\uD83D\uDC4D\", \"\uD83D\uDC4E\", \"\uD83E\uDEF4\", \"\uD83E\uDD0C\", \"\uD83E\uDD26\u200D\u2642\uFE0F\"],\n  [\"\uD83E\uDD1D\", \"\uD83C\uDD98\", \"\uD83D\uDD4A\uFE0F\", \"\uD83C\uDFF3\uFE0F\", \"\u23F3\"],\n  [\"\uD83D\uDD25\", \"\uD83D\uDCA5\", \"\uD83D\uDC80\", \"\u2622\uFE0F\", \"\u26A0\uFE0F\"],\n  [\"\u2196\uFE0F\", \"\u2B06\uFE0F\", \"\u2197\uFE0F\", \"\uD83D\uDC51\", \"\uD83E\uDD47\"],\n  [\"\u2B05\uFE0F\", \"\uD83C\uDFAF\", \"\u27A1\uFE0F\", \"\uD83E\uDD48\", \"\uD83E\uDD49\"],\n  [\"\u2199\uFE0F\", \"\u2B07\uFE0F\", \"\u2198\uFE0F\", \"\u2764\uFE0F\", \"\uD83D\uDC94\"],\n  [\"\uD83D\uDCB0\", \"\u2693\", \"\u26F5\", \"\uD83C\uDFE1\", \"\uD83D\uDEE1\uFE0F\"],\n  [\"\uD83C\uDFED\", \"\uD83D\uDE82\", \"\u2753\", \"\uD83D\uDC14\", \"\uD83D\uDC00\"],\n  [\"\uD83C\uDF81\", \"\uD83C\uDF1F\", \"\uD83C\uDF85\", \"\uD83C\uDF84\", \"\u26C4\"],\n] as const;\n// 2d to 1d array\nexport const flattenedEmojiTable = emojiTable.flat();\n\nexport type Emoji = (typeof flattenedEmojiTable)[number];\n\n/**\n * JSON.stringify replacer function that converts bigint values to strings.\n */\nexport function replacer(_key: string, value: any): any {\n  return typeof value === \"bigint\" ? value.toString() : value;\n}\n\nexport function sigmoid(\n  value: number,\n  decayRate: number,\n  midpoint: number,\n): number {\n  return 1 / (1 + Math.exp(-decayRate * (value - midpoint)));\n}\n\n// Compute clan from name\nexport function getClanTag(name: string): string | null {\n  const clanTag = clanMatch(name);\n  return clanTag ? clanTag[1].toUpperCase() : null;\n}\n\nexport function getClanTagOriginalCase(name: string): string | null {\n  const clanTag = clanMatch(name);\n  return clanTag ? clanTag[1] : null;\n}\n\nfunction clanMatch(name: string): RegExpMatchArray | null {\n  if (!name.includes(\"[\") || !name.includes(\"]\")) {\n    return null;\n  }\n  return name.match(/\\[([a-zA-Z0-9]{2,5})\\]/);\n}\n", "import { Config } from \"../configuration/Config\";\nimport { AllPlayersStats, ClientID } from \"../Schemas\";\nimport { getClanTag } from \"../Util\";\nimport { GameMap, TileRef } from \"./GameMap\";\nimport {\n  GameUpdate,\n  GameUpdateType,\n  PlayerUpdate,\n  UnitUpdate,\n} from \"./GameUpdates\";\nimport { RailNetwork } from \"./RailNetwork\";\nimport { Stats } from \"./Stats\";\nimport { UnitPredicate } from \"./UnitGrid\";\n\nfunction isEnumValue<T extends Record<string, string | number>>(\n  enumObj: T,\n  value: unknown,\n): value is T[keyof T] {\n  return Object.values(enumObj).includes(value as T[keyof T]);\n}\n\nexport type PlayerID = string;\nexport type Tick = number;\nexport type Gold = bigint;\n\nexport const AllPlayers = \"AllPlayers\" as const;\n\n// export type GameUpdates = Record<GameUpdateType, GameUpdate[]>;\n// Create a type that maps GameUpdateType to its corresponding update type\ntype UpdateTypeMap<T extends GameUpdateType> = Extract<GameUpdate, { type: T }>;\n\n// Then use it to create the record type\nexport type GameUpdates = {\n  [K in GameUpdateType]: UpdateTypeMap<K>[];\n};\n\nexport interface MapPos {\n  x: number;\n  y: number;\n}\n\nexport enum Difficulty {\n  Easy = \"Easy\",\n  Medium = \"Medium\",\n  Hard = \"Hard\",\n  Impossible = \"Impossible\",\n}\nexport const isDifficulty = (value: unknown): value is Difficulty =>\n  isEnumValue(Difficulty, value);\n\nexport type Team = string;\n\nexport const Duos = \"Duos\" as const;\nexport const Trios = \"Trios\" as const;\nexport const Quads = \"Quads\" as const;\nexport const HumansVsNations = \"Humans Vs Nations\" as const;\n\nexport const ColoredTeams: Record<string, Team> = {\n  Red: \"Red\",\n  Blue: \"Blue\",\n  Teal: \"Teal\",\n  Purple: \"Purple\",\n  Yellow: \"Yellow\",\n  Orange: \"Orange\",\n  Green: \"Green\",\n  Bot: \"Bot\",\n  Humans: \"Humans\",\n  Nations: \"Nations\",\n} as const;\n\nexport enum GameMapType {\n  World = \"World\",\n  GiantWorldMap = \"Giant World Map\",\n  Europe = \"Europe\",\n  EuropeClassic = \"Europe Classic\",\n  Mena = \"Mena\",\n  NorthAmerica = \"North America\",\n  SouthAmerica = \"South America\",\n  Oceania = \"Oceania\",\n  BlackSea = \"Black Sea\",\n  Africa = \"Africa\",\n  Pangaea = \"Pangaea\",\n  Asia = \"Asia\",\n  Mars = \"Mars\",\n  Britannia = \"Britannia\",\n  GatewayToTheAtlantic = \"Gateway to the Atlantic\",\n  Australia = \"Australia\",\n  Iceland = \"Iceland\",\n  EastAsia = \"East Asia\",\n  BetweenTwoSeas = \"Between Two Seas\",\n  FaroeIslands = \"Faroe Islands\",\n  DeglaciatedAntarctica = \"Deglaciated Antarctica\",\n  FalklandIslands = \"Falkland Islands\",\n  Baikal = \"Baikal\",\n  Halkidiki = \"Halkidiki\",\n  StraitOfGibraltar = \"Strait of Gibraltar\",\n  Italia = \"Italia\",\n  Japan = \"Japan\",\n  Pluto = \"Pluto\",\n  Montreal = \"Montreal\",\n  NewYorkCity = \"New York City\",\n  Achiran = \"Achiran\",\n  BaikalNukeWars = \"Baikal (Nuke Wars)\",\n  FourIslands = \"Four Islands\",\n  Svalmel = \"Svalmel\",\n  GulfOfStLawrence = \"Gulf of St. Lawrence\",\n  Lisbon = \"Lisbon\",\n  Manicouagan = \"Manicouagan\",\n}\n\nexport type GameMapName = keyof typeof GameMapType;\n\nexport const mapCategories: Record<string, GameMapType[]> = {\n  continental: [\n    GameMapType.World,\n    GameMapType.GiantWorldMap,\n    GameMapType.NorthAmerica,\n    GameMapType.SouthAmerica,\n    GameMapType.Europe,\n    GameMapType.EuropeClassic,\n    GameMapType.Asia,\n    GameMapType.Africa,\n    GameMapType.Oceania,\n  ],\n  regional: [\n    GameMapType.BlackSea,\n    GameMapType.Britannia,\n    GameMapType.GatewayToTheAtlantic,\n    GameMapType.BetweenTwoSeas,\n    GameMapType.Iceland,\n    GameMapType.EastAsia,\n    GameMapType.Mena,\n    GameMapType.Australia,\n    GameMapType.FaroeIslands,\n    GameMapType.FalklandIslands,\n    GameMapType.Baikal,\n    GameMapType.Halkidiki,\n    GameMapType.StraitOfGibraltar,\n    GameMapType.Italia,\n    GameMapType.Japan,\n    GameMapType.Montreal,\n    GameMapType.GulfOfStLawrence,\n    GameMapType.Lisbon,\n    GameMapType.NewYorkCity,\n    GameMapType.Manicouagan,\n  ],\n  fantasy: [\n    GameMapType.Pangaea,\n    GameMapType.Pluto,\n    GameMapType.Mars,\n    GameMapType.DeglaciatedAntarctica,\n    GameMapType.Achiran,\n    GameMapType.BaikalNukeWars,\n    GameMapType.FourIslands,\n    GameMapType.Svalmel,\n  ],\n};\n\nexport enum GameType {\n  Singleplayer = \"Singleplayer\",\n  Public = \"Public\",\n  Private = \"Private\",\n}\nexport const isGameType = (value: unknown): value is GameType =>\n  isEnumValue(GameType, value);\n\nexport enum GameMode {\n  FFA = \"Free For All\",\n  Team = \"Team\",\n}\nexport const isGameMode = (value: unknown): value is GameMode =>\n  isEnumValue(GameMode, value);\n\nexport enum GameMapSize {\n  Compact = \"Compact\",\n  Normal = \"Normal\",\n}\n\nexport interface UnitInfo {\n  cost: (game: Game, player: Player) => Gold;\n  // Determines if its owner changes when its tile is conquered.\n  territoryBound: boolean;\n  maxHealth?: number;\n  damage?: number;\n  constructionDuration?: number;\n  upgradable?: boolean;\n  canBuildTrainStation?: boolean;\n  experimental?: boolean;\n}\n\nexport enum UnitType {\n  TransportShip = \"Transport\",\n  Warship = \"Warship\",\n  Shell = \"Shell\",\n  SAMMissile = \"SAMMissile\",\n  Port = \"Port\",\n  AtomBomb = \"Atom Bomb\",\n  HydrogenBomb = \"Hydrogen Bomb\",\n  TradeShip = \"Trade Ship\",\n  MissileSilo = \"Missile Silo\",\n  DefensePost = \"Defense Post\",\n  SAMLauncher = \"SAM Launcher\",\n  City = \"City\",\n  MIRV = \"MIRV\",\n  MIRVWarhead = \"MIRV Warhead\",\n  Train = \"Train\",\n  Factory = \"Factory\",\n}\n\nexport enum TrainType {\n  Engine = \"Engine\",\n  Carriage = \"Carriage\",\n}\n\nconst _structureTypes: ReadonlySet<UnitType> = new Set([\n  UnitType.City,\n  UnitType.DefensePost,\n  UnitType.SAMLauncher,\n  UnitType.MissileSilo,\n  UnitType.Port,\n  UnitType.Factory,\n]);\n\nexport function isStructureType(type: UnitType): boolean {\n  return _structureTypes.has(type);\n}\n\nexport interface OwnerComp {\n  owner: Player;\n}\n\nexport type TrajectoryTile = {\n  tile: TileRef;\n  targetable: boolean;\n};\nexport interface UnitParamsMap {\n  [UnitType.TransportShip]: {\n    troops?: number;\n    destination?: TileRef;\n  };\n\n  [UnitType.Warship]: {\n    patrolTile: TileRef;\n  };\n\n  [UnitType.Shell]: Record<string, never>;\n\n  [UnitType.SAMMissile]: Record<string, never>;\n\n  [UnitType.Port]: Record<string, never>;\n\n  [UnitType.AtomBomb]: {\n    targetTile?: number;\n    trajectory: TrajectoryTile[];\n  };\n\n  [UnitType.HydrogenBomb]: {\n    targetTile?: number;\n    trajectory: TrajectoryTile[];\n  };\n\n  [UnitType.TradeShip]: {\n    targetUnit: Unit;\n    lastSetSafeFromPirates?: number;\n  };\n\n  [UnitType.Train]: {\n    trainType: TrainType;\n    targetUnit?: Unit;\n    loaded?: boolean;\n  };\n\n  [UnitType.Factory]: Record<string, never>;\n\n  [UnitType.MissileSilo]: Record<string, never>;\n\n  [UnitType.DefensePost]: Record<string, never>;\n\n  [UnitType.SAMLauncher]: Record<string, never>;\n\n  [UnitType.City]: Record<string, never>;\n\n  [UnitType.MIRV]: {\n    targetTile?: number;\n  };\n\n  [UnitType.MIRVWarhead]: {\n    targetTile?: number;\n  };\n}\n\n// Type helper to get params type for a specific unit type\nexport type UnitParams<T extends UnitType> = UnitParamsMap[T];\n\nexport type AllUnitParams = UnitParamsMap[keyof UnitParamsMap];\n\nexport const nukeTypes = [\n  UnitType.AtomBomb,\n  UnitType.HydrogenBomb,\n  UnitType.MIRVWarhead,\n  UnitType.MIRV,\n] as UnitType[];\n\nexport enum Relation {\n  Hostile = 0,\n  Distrustful = 1,\n  Neutral = 2,\n  Friendly = 3,\n}\n\nexport class Nation {\n  constructor(\n    public readonly spawnCell: Cell,\n    public readonly playerInfo: PlayerInfo,\n  ) {}\n}\n\nexport class Cell {\n  public index: number;\n\n  private strRepr: string;\n\n  constructor(\n    public readonly x: number,\n    public readonly y: number,\n  ) {\n    this.strRepr = `Cell[${this.x},${this.y}]`;\n  }\n\n  pos(): MapPos {\n    return {\n      x: this.x,\n      y: this.y,\n    };\n  }\n\n  toString(): string {\n    return this.strRepr;\n  }\n}\n\nexport enum TerrainType {\n  Plains,\n  Highland,\n  Mountain,\n  Lake,\n  Ocean,\n}\n\nexport enum PlayerType {\n  Bot = \"BOT\",\n  Human = \"HUMAN\",\n  FakeHuman = \"FAKEHUMAN\",\n}\n\nexport interface Execution {\n  isActive(): boolean;\n  activeDuringSpawnPhase(): boolean;\n  init(mg: Game, ticks: number): void;\n  tick(ticks: number): void;\n}\n\nexport interface Attack {\n  id(): string;\n  retreating(): boolean;\n  retreated(): boolean;\n  orderRetreat(): void;\n  executeRetreat(): void;\n  target(): Player | TerraNullius;\n  attacker(): Player;\n  troops(): number;\n  setTroops(troops: number): void;\n  isActive(): boolean;\n  delete(): void;\n  // The tile the attack originated from, mostly used for boat attacks.\n  sourceTile(): TileRef | null;\n  addBorderTile(tile: TileRef): void;\n  removeBorderTile(tile: TileRef): void;\n  clearBorder(): void;\n  borderSize(): number;\n  averagePosition(): Cell | null;\n}\n\nexport interface AllianceRequest {\n  accept(): void;\n  reject(): void;\n  requestor(): Player;\n  recipient(): Player;\n  createdAt(): Tick;\n  status(): \"pending\" | \"accepted\" | \"rejected\";\n}\n\nexport interface Alliance {\n  requestor(): Player;\n  recipient(): Player;\n  createdAt(): Tick;\n  expiresAt(): Tick;\n  other(player: Player): Player;\n}\n\nexport interface MutableAlliance extends Alliance {\n  expire(): void;\n  other(player: Player): Player;\n  bothAgreedToExtend(): boolean;\n  addExtensionRequest(player: Player): void;\n  id(): number;\n  extend(): void;\n  onlyOneAgreedToExtend(): boolean;\n}\n\nexport class PlayerInfo {\n  public readonly clan: string | null;\n\n  constructor(\n    public readonly name: string,\n    public readonly playerType: PlayerType,\n    // null if bot.\n    public readonly clientID: ClientID | null,\n    // TODO: make player id the small id\n    public readonly id: PlayerID,\n    public readonly nationStrength?: number,\n  ) {\n    this.clan = getClanTag(name);\n  }\n}\n\nexport function isUnit(unit: unknown): unit is Unit {\n  return (\n    unit &&\n    typeof unit === \"object\" &&\n    \"isUnit\" in unit &&\n    typeof unit.isUnit === \"function\" &&\n    unit.isUnit()\n  );\n}\n\nexport interface Unit {\n  isUnit(): this is Unit;\n\n  // Common properties.\n  id(): number;\n  type(): UnitType;\n  owner(): Player;\n  info(): UnitInfo;\n  isMarkedForDeletion(): boolean;\n  markForDeletion(): void;\n  isOverdueDeletion(): boolean;\n  delete(displayMessage?: boolean, destroyer?: Player): void;\n  tile(): TileRef;\n  lastTile(): TileRef;\n  move(tile: TileRef): void;\n  isActive(): boolean;\n  setOwner(owner: Player): void;\n  touch(): void;\n  hash(): number;\n  toUpdate(): UnitUpdate;\n  hasTrainStation(): boolean;\n  setTrainStation(trainStation: boolean): void;\n  wasDestroyedByEnemy(): boolean;\n\n  // Train\n  trainType(): TrainType | undefined;\n  isLoaded(): boolean | undefined;\n  setLoaded(loaded: boolean): void;\n\n  // Targeting\n  setTargetTile(cell: TileRef | undefined): void;\n  targetTile(): TileRef | undefined;\n  setTrajectoryIndex(i: number): void;\n  trajectoryIndex(): number;\n  trajectory(): TrajectoryTile[];\n  setTargetUnit(unit: Unit | undefined): void;\n  targetUnit(): Unit | undefined;\n  setTargetedBySAM(targeted: boolean): void;\n  targetedBySAM(): boolean;\n  setReachedTarget(): void;\n  reachedTarget(): boolean;\n  isTargetable(): boolean;\n  setTargetable(targetable: boolean): void;\n\n  // Health\n  hasHealth(): boolean;\n  retreating(): boolean;\n  orderBoatRetreat(): void;\n  health(): number;\n  modifyHealth(delta: number, attacker?: Player): void;\n\n  // Troops\n  setTroops(troops: number): void;\n  troops(): number;\n\n  // --- UNIT SPECIFIC ---\n\n  // SAMs & Missile Silos\n  launch(): void;\n  reloadMissile(): void;\n  isInCooldown(): boolean;\n  missileTimerQueue(): number[];\n\n  // Trade Ships\n  setSafeFromPirates(): void; // Only for trade ships\n  isSafeFromPirates(): boolean; // Only for trade ships\n\n  // Construction phase on structures\n  isUnderConstruction(): boolean;\n  setUnderConstruction(underConstruction: boolean): void;\n\n  // Upgradable Structures\n  level(): number;\n  increaseLevel(): void;\n  decreaseLevel(destroyer?: Player): void;\n\n  // Warships\n  setPatrolTile(tile: TileRef): void;\n  patrolTile(): TileRef | undefined;\n}\n\nexport interface TerraNullius {\n  isPlayer(): false;\n  id(): null;\n  clientID(): ClientID;\n  smallID(): number;\n}\n\nexport interface Embargo {\n  createdAt: Tick;\n  isTemporary: boolean;\n  target: Player;\n}\n\nexport interface Player {\n  // Basic Info\n  smallID(): number;\n  info(): PlayerInfo;\n  name(): string;\n  displayName(): string;\n  clientID(): ClientID | null;\n  id(): PlayerID;\n  type(): PlayerType;\n  isPlayer(): this is Player;\n  toString(): string;\n\n  // State & Properties\n  isAlive(): boolean;\n  isTraitor(): boolean;\n  markTraitor(): void;\n  largestClusterBoundingBox: { min: Cell; max: Cell } | null;\n  lastTileChange(): Tick;\n\n  isDisconnected(): boolean;\n  markDisconnected(isDisconnected: boolean): void;\n\n  hasSpawned(): boolean;\n  setHasSpawned(hasSpawned: boolean): void;\n\n  // Territory\n  tiles(): ReadonlySet<TileRef>;\n  borderTiles(): ReadonlySet<TileRef>;\n  numTilesOwned(): number;\n  conquer(tile: TileRef): void;\n  relinquish(tile: TileRef): void;\n\n  // Resources & Troops\n  gold(): Gold;\n  addGold(toAdd: Gold, tile?: TileRef): void;\n  removeGold(toRemove: Gold): Gold;\n  troops(): number;\n  setTroops(troops: number): void;\n  addTroops(troops: number): void;\n  removeTroops(troops: number): number;\n\n  // Units\n  units(...types: UnitType[]): Unit[];\n  unitCount(type: UnitType): number;\n  unitsConstructed(type: UnitType): number;\n  unitsOwned(type: UnitType): number;\n  buildableUnits(tile: TileRef | null): BuildableUnit[];\n  canBuild(type: UnitType, targetTile: TileRef): TileRef | false;\n  buildUnit<T extends UnitType>(\n    type: T,\n    spawnTile: TileRef,\n    params: UnitParams<T>,\n  ): Unit;\n\n  // Returns the existing unit that can be upgraded,\n  // or false if it cannot be upgraded.\n  // New units of the same type can upgrade existing units.\n  // e.g. if a place a new city here, can it upgrade an existing city?\n  findUnitToUpgrade(type: UnitType, targetTile: TileRef): Unit | false;\n  canUpgradeUnit(unit: Unit): boolean;\n  upgradeUnit(unit: Unit): void;\n  captureUnit(unit: Unit): void;\n\n  // Relations & Diplomacy\n  neighbors(): (Player | TerraNullius)[];\n  sharesBorderWith(other: Player | TerraNullius): boolean;\n  relation(other: Player): Relation;\n  allRelationsSorted(): { player: Player; relation: Relation }[];\n  updateRelation(other: Player, delta: number): void;\n  decayRelations(): void;\n  isOnSameTeam(other: Player): boolean;\n  // Either allied or on same team.\n  isFriendly(other: Player, treatAFKFriendly?: boolean): boolean;\n  team(): Team | null;\n  clan(): string | null;\n  incomingAllianceRequests(): AllianceRequest[];\n  outgoingAllianceRequests(): AllianceRequest[];\n  alliances(): MutableAlliance[];\n  expiredAlliances(): Alliance[];\n  allies(): Player[];\n  isAlliedWith(other: Player): boolean;\n  allianceWith(other: Player): MutableAlliance | null;\n  canSendAllianceRequest(other: Player): boolean;\n  breakAlliance(alliance: Alliance): void;\n  createAllianceRequest(recipient: Player): AllianceRequest | null;\n  betrayals(): number;\n\n  // Targeting\n  canTarget(other: Player): boolean;\n  target(other: Player): void;\n  targets(): Player[];\n  transitiveTargets(): Player[];\n\n  // Communication\n  canSendEmoji(recipient: Player | typeof AllPlayers): boolean;\n  outgoingEmojis(): EmojiMessage[];\n  sendEmoji(recipient: Player | typeof AllPlayers, emoji: string): void;\n\n  // Donation\n  canDonateGold(recipient: Player): boolean;\n  canDonateTroops(recipient: Player): boolean;\n  donateTroops(recipient: Player, troops: number): boolean;\n  donateGold(recipient: Player, gold: Gold): boolean;\n  canDeleteUnit(): boolean;\n  recordDeleteUnit(): void;\n  canEmbargoAll(): boolean;\n  recordEmbargoAll(): void;\n\n  // Embargo\n  hasEmbargoAgainst(other: Player): boolean;\n  tradingPartners(): Player[];\n  addEmbargo(other: Player, isTemporary: boolean): void;\n  getEmbargoes(): Embargo[];\n  stopEmbargo(other: Player): void;\n  endTemporaryEmbargo(other: Player): void;\n  canTrade(other: Player): boolean;\n\n  // Attacking.\n  canAttack(tile: TileRef): boolean;\n\n  createAttack(\n    target: Player | TerraNullius,\n    troops: number,\n    sourceTile: TileRef | null,\n    border: Set<number>,\n  ): Attack;\n  outgoingAttacks(): Attack[];\n  incomingAttacks(): Attack[];\n  orderRetreat(attackID: string): void;\n  executeRetreat(attackID: string): void;\n\n  // Misc\n  toUpdate(): PlayerUpdate;\n  playerProfile(): PlayerProfile;\n  // WARNING: this operation is expensive.\n  bestTransportShipSpawn(tile: TileRef): TileRef | false;\n}\n\nexport interface Game extends GameMap {\n  // Map & Dimensions\n  isOnMap(cell: Cell): boolean;\n  width(): number;\n  height(): number;\n  map(): GameMap;\n  miniMap(): GameMap;\n  forEachTile(fn: (tile: TileRef) => void): void;\n  // Zero-allocation neighbor iteration (cardinal only) to avoid creating arrays\n  forEachNeighbor(tile: TileRef, callback: (neighbor: TileRef) => void): void;\n  // Zero-allocation neighbor iteration for performance-critical cluster calculation\n  // Alternative to neighborsWithDiag() that returns arrays\n  // Avoids creating intermediate arrays and uses a callback for better performance\n  forEachNeighborWithDiag(\n    tile: TileRef,\n    callback: (neighbor: TileRef) => void,\n  ): void;\n\n  // Player Management\n  player(id: PlayerID): Player;\n  players(): Player[];\n  allPlayers(): Player[];\n  playerByClientID(id: ClientID): Player | null;\n  playerBySmallID(id: number): Player | TerraNullius;\n  hasPlayer(id: PlayerID): boolean;\n  addPlayer(playerInfo: PlayerInfo): Player;\n  terraNullius(): TerraNullius;\n  owner(ref: TileRef): Player | TerraNullius;\n\n  teams(): Team[];\n\n  // Alliances\n  alliances(): MutableAlliance[];\n  expireAlliance(alliance: Alliance): void;\n\n  // Game State\n  ticks(): Tick;\n  inSpawnPhase(): boolean;\n  executeNextTick(): GameUpdates;\n  setWinner(winner: Player | Team, allPlayersStats: AllPlayersStats): void;\n  config(): Config;\n\n  // Units\n  units(...types: UnitType[]): Unit[];\n  unitCount(type: UnitType): number;\n  unitInfo(type: UnitType): UnitInfo;\n  hasUnitNearby(\n    tile: TileRef,\n    searchRange: number,\n    type: UnitType,\n    playerId?: PlayerID,\n    includeUnderConstruction?: boolean,\n  ): boolean;\n  nearbyUnits(\n    tile: TileRef,\n    searchRange: number,\n    types: UnitType | UnitType[],\n    predicate?: UnitPredicate,\n    includeUnderConstruction?: boolean,\n  ): Array<{ unit: Unit; distSquared: number }>;\n\n  addExecution(...exec: Execution[]): void;\n  displayMessage(\n    message: string,\n    type: MessageType,\n    playerID: PlayerID | null,\n    goldAmount?: bigint,\n    params?: Record<string, string | number>,\n  ): void;\n  displayIncomingUnit(\n    unitID: number,\n    message: string,\n    type: MessageType,\n    playerID: PlayerID | null,\n  ): void;\n\n  displayChat(\n    message: string,\n    category: string,\n    target: PlayerID | undefined,\n    playerID: PlayerID | null,\n    isFrom: boolean,\n    recipient: string,\n  ): void;\n\n  // Nations\n  nations(): Nation[];\n\n  numTilesWithFallout(): number;\n  stats(): Stats;\n\n  addUpdate(update: GameUpdate): void;\n  railNetwork(): RailNetwork;\n  conquerPlayer(conqueror: Player, conquered: Player): void;\n}\n\nexport interface PlayerActions {\n  canAttack: boolean;\n  buildableUnits: BuildableUnit[];\n  canSendEmojiAllPlayers: boolean;\n  canEmbargoAll?: boolean;\n  interaction?: PlayerInteraction;\n}\n\nexport interface BuildableUnit {\n  canBuild: TileRef | false;\n  // unit id of the existing unit that can be upgraded, or false if it cannot be upgraded.\n  canUpgrade: number | false;\n  type: UnitType;\n  cost: Gold;\n}\n\nexport interface PlayerProfile {\n  relations: Record<number, Relation>;\n  alliances: number[];\n}\n\nexport interface PlayerBorderTiles {\n  borderTiles: ReadonlySet<TileRef>;\n}\n\nexport interface PlayerInteraction {\n  sharedBorder: boolean;\n  canSendEmoji: boolean;\n  canSendAllianceRequest: boolean;\n  canBreakAlliance: boolean;\n  canTarget: boolean;\n  canDonateGold: boolean;\n  canDonateTroops: boolean;\n  canEmbargo: boolean;\n  allianceExpiresAt?: Tick;\n}\n\nexport interface EmojiMessage {\n  message: string;\n  senderID: number;\n  recipientID: number | typeof AllPlayers;\n  createdAt: Tick;\n}\n\nexport enum MessageType {\n  ATTACK_FAILED,\n  ATTACK_CANCELLED,\n  ATTACK_REQUEST,\n  CONQUERED_PLAYER,\n  MIRV_INBOUND,\n  NUKE_INBOUND,\n  HYDROGEN_BOMB_INBOUND,\n  NAVAL_INVASION_INBOUND,\n  SAM_MISS,\n  SAM_HIT,\n  CAPTURED_ENEMY_UNIT,\n  UNIT_CAPTURED_BY_ENEMY,\n  UNIT_DESTROYED,\n  ALLIANCE_ACCEPTED,\n  ALLIANCE_REJECTED,\n  ALLIANCE_REQUEST,\n  ALLIANCE_BROKEN,\n  ALLIANCE_EXPIRED,\n  SENT_GOLD_TO_PLAYER,\n  RECEIVED_GOLD_FROM_PLAYER,\n  RECEIVED_GOLD_FROM_TRADE,\n  SENT_TROOPS_TO_PLAYER,\n  RECEIVED_TROOPS_FROM_PLAYER,\n  CHAT,\n  RENEW_ALLIANCE,\n}\n\n// Message categories used for filtering events in the EventsDisplay\nexport enum MessageCategory {\n  ATTACK = \"ATTACK\",\n  NUKE = \"NUKE\",\n  ALLIANCE = \"ALLIANCE\",\n  TRADE = \"TRADE\",\n  CHAT = \"CHAT\",\n}\n\n// Ensures that all message types are included in a category\nexport const MESSAGE_TYPE_CATEGORIES: Record<MessageType, MessageCategory> = {\n  [MessageType.ATTACK_FAILED]: MessageCategory.ATTACK,\n  [MessageType.ATTACK_CANCELLED]: MessageCategory.ATTACK,\n  [MessageType.ATTACK_REQUEST]: MessageCategory.ATTACK,\n  [MessageType.CONQUERED_PLAYER]: MessageCategory.ATTACK,\n  [MessageType.MIRV_INBOUND]: MessageCategory.NUKE,\n  [MessageType.NUKE_INBOUND]: MessageCategory.NUKE,\n  [MessageType.HYDROGEN_BOMB_INBOUND]: MessageCategory.NUKE,\n  [MessageType.NAVAL_INVASION_INBOUND]: MessageCategory.ATTACK,\n  [MessageType.SAM_MISS]: MessageCategory.ATTACK,\n  [MessageType.SAM_HIT]: MessageCategory.ATTACK,\n  [MessageType.CAPTURED_ENEMY_UNIT]: MessageCategory.ATTACK,\n  [MessageType.UNIT_CAPTURED_BY_ENEMY]: MessageCategory.ATTACK,\n  [MessageType.UNIT_DESTROYED]: MessageCategory.ATTACK,\n  [MessageType.ALLIANCE_ACCEPTED]: MessageCategory.ALLIANCE,\n  [MessageType.ALLIANCE_REJECTED]: MessageCategory.ALLIANCE,\n  [MessageType.ALLIANCE_REQUEST]: MessageCategory.ALLIANCE,\n  [MessageType.ALLIANCE_BROKEN]: MessageCategory.ALLIANCE,\n  [MessageType.ALLIANCE_EXPIRED]: MessageCategory.ALLIANCE,\n  [MessageType.RENEW_ALLIANCE]: MessageCategory.ALLIANCE,\n  [MessageType.SENT_GOLD_TO_PLAYER]: MessageCategory.TRADE,\n  [MessageType.RECEIVED_GOLD_FROM_PLAYER]: MessageCategory.TRADE,\n  [MessageType.RECEIVED_GOLD_FROM_TRADE]: MessageCategory.TRADE,\n  [MessageType.SENT_TROOPS_TO_PLAYER]: MessageCategory.TRADE,\n  [MessageType.RECEIVED_TROOPS_FROM_PLAYER]: MessageCategory.TRADE,\n  [MessageType.CHAT]: MessageCategory.CHAT,\n} as const;\n\n/**\n * Get the category of a message type\n */\nexport function getMessageCategory(messageType: MessageType): MessageCategory {\n  return MESSAGE_TYPE_CATEGORIES[messageType];\n}\n\nexport interface NameViewData {\n  x: number;\n  y: number;\n  size: number;\n}\n", "import { Cell, Game, NameViewData, Player } from \"../../core/game/Game\";\nimport { calculateBoundingBox } from \"../../core/Util\";\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nexport interface Rectangle {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport function placeName(game: Game, player: Player): NameViewData {\n  const boundingBox =\n    player.largestClusterBoundingBox ??\n    calculateBoundingBox(game, player.borderTiles());\n\n  let scalingFactor = 1;\n  const width = boundingBox.max.x - boundingBox.min.x;\n  const height = boundingBox.max.y - boundingBox.min.y;\n  const size = Math.min(width, height);\n  if (size < 25) {\n    scalingFactor = 1;\n  } else if (size < 50) {\n    scalingFactor = 2;\n  } else if (size < 100) {\n    scalingFactor = 4;\n  } else if (size < 250) {\n    scalingFactor = 8;\n  } else if (size < 500) {\n    scalingFactor = 16;\n  } else {\n    scalingFactor = 32;\n  }\n\n  const grid = createGrid(game, player, boundingBox, scalingFactor);\n  const largestRectangle = findLargestInscribedRectangle(grid);\n  largestRectangle.x = largestRectangle.x * scalingFactor;\n  largestRectangle.y = largestRectangle.y * scalingFactor;\n  largestRectangle.width = largestRectangle.width * scalingFactor;\n  largestRectangle.height = largestRectangle.height * scalingFactor;\n\n  let center = new Cell(\n    Math.floor(\n      largestRectangle.x + largestRectangle.width / 2 + boundingBox.min.x,\n    ),\n    Math.floor(\n      largestRectangle.y + largestRectangle.height / 2 + boundingBox.min.y,\n    ),\n  );\n\n  const fontSize = calculateFontSize(largestRectangle, player.name());\n  center = new Cell(center.x, center.y - fontSize / 3);\n\n  return {\n    x: Math.ceil(center.x),\n    y: Math.ceil(center.y),\n    size: fontSize,\n  };\n}\n\nexport function createGrid(\n  game: Game,\n  player: Player,\n  boundingBox: { min: Point; max: Point },\n  scalingFactor: number,\n): boolean[][] {\n  const scaledBoundingBox: { min: Point; max: Point } = {\n    min: {\n      x: Math.floor(boundingBox.min.x / scalingFactor),\n      y: Math.floor(boundingBox.min.y / scalingFactor),\n    },\n    max: {\n      x: Math.floor(boundingBox.max.x / scalingFactor),\n      y: Math.floor(boundingBox.max.y / scalingFactor),\n    },\n  };\n\n  const width = scaledBoundingBox.max.x - scaledBoundingBox.min.x + 1;\n  const height = scaledBoundingBox.max.y - scaledBoundingBox.min.y + 1;\n  const grid: boolean[][] = Array(width)\n    .fill(null)\n    .map(() => Array(height).fill(false));\n\n  for (let x = scaledBoundingBox.min.x; x <= scaledBoundingBox.max.x; x++) {\n    for (let y = scaledBoundingBox.min.y; y <= scaledBoundingBox.max.y; y++) {\n      const cell = new Cell(x * scalingFactor, y * scalingFactor);\n      if (game.isOnMap(cell)) {\n        const tile = game.ref(cell.x, cell.y);\n        grid[x - scaledBoundingBox.min.x][y - scaledBoundingBox.min.y] =\n          game.isLake(tile) ||\n          game.owner(tile) === player ||\n          game.hasFallout(tile);\n      }\n    }\n  }\n\n  return grid;\n}\n\nexport function findLargestInscribedRectangle(grid: boolean[][]): Rectangle {\n  const rows = grid[0].length;\n  const cols = grid.length;\n  const heights: number[] = new Array(cols).fill(0);\n  let largestRect: Rectangle = { x: 0, y: 0, width: 0, height: 0 };\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < cols; col++) {\n      if (grid[col][row]) {\n        heights[col]++;\n      } else {\n        heights[col] = 0;\n      }\n    }\n\n    const rectForRow = largestRectangleInHistogram(heights);\n\n    if (\n      rectForRow.width * rectForRow.height >\n      largestRect.width * largestRect.height\n    ) {\n      largestRect = {\n        x: rectForRow.x,\n        y: row - rectForRow.height + 1,\n        width: rectForRow.width,\n        height: rectForRow.height,\n      };\n    }\n  }\n\n  return largestRect;\n}\n\nexport function largestRectangleInHistogram(widths: number[]): Rectangle {\n  const stack: number[] = [];\n  let maxArea = 0;\n  let largestRect: Rectangle = { x: 0, y: 0, width: 0, height: 0 };\n\n  for (let i = 0; i <= widths.length; i++) {\n    const h = i === widths.length ? 0 : widths[i];\n\n    while (stack.length > 0 && h < widths[stack[stack.length - 1]]) {\n      const height = widths[stack.pop()!];\n      const width = stack.length === 0 ? i : i - stack[stack.length - 1] - 1;\n\n      if (height * width > maxArea) {\n        maxArea = height * width;\n        largestRect = {\n          x: stack.length === 0 ? 0 : stack[stack.length - 1] + 1,\n          y: 0,\n          width: width,\n          height: height,\n        };\n      }\n    }\n\n    stack.push(i);\n  }\n\n  return largestRect;\n}\n\nexport function calculateFontSize(rectangle: Rectangle, name: string): number {\n  // This is a simplified calculation. You might want to adjust it based on your specific font and rendering system.\n  const widthConstrained = (rectangle.width / name.length) * 2;\n  const heightConstrained = rectangle.height / 3;\n  return Math.min(widthConstrained, heightConstrained);\n}\n", "export * as core from \"../core/index.js\";\nexport * from \"./schemas.js\";\nexport * from \"./checks.js\";\nexport * from \"./errors.js\";\nexport * from \"./parse.js\";\nexport * from \"./compat.js\";\n// zod-specified\nimport { config } from \"../core/index.js\";\nimport en from \"../locales/en.js\";\nconfig(en());\nexport { globalRegistry, registry, config, function, $output, $input, $brand, clone, regexes, treeifyError, prettifyError, formatError, flattenError, toJSONSchema, TimePrecision, NEVER, } from \"../core/index.js\";\nexport * as locales from \"../locales/index.js\";\n// iso\n// must be exported from top-level\n// https://github.com/colinhacks/zod/issues/4491\nexport { ZodISODateTime, ZodISODate, ZodISOTime, ZodISODuration } from \"./iso.js\";\nexport * as iso from \"./iso.js\";\nexport * as coerce from \"./coerce.js\";\n", "export * from \"./core.js\";\nexport * from \"./parse.js\";\nexport * from \"./errors.js\";\nexport * from \"./schemas.js\";\nexport * from \"./checks.js\";\nexport * from \"./versions.js\";\nexport * as util from \"./util.js\";\nexport * as regexes from \"./regexes.js\";\nexport * as locales from \"../locales/index.js\";\nexport * from \"./registries.js\";\nexport * from \"./doc.js\";\nexport * from \"./function.js\";\nexport * from \"./api.js\";\nexport * from \"./to-json-schema.js\";\nexport * as JSONSchema from \"./json-schema.js\";\n", "/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        var _a;\n        Object.defineProperty(inst, \"_zod\", {\n            value: inst._zod ?? {},\n            enumerable: false,\n        });\n        (_a = inst._zod).traits ?? (_a.traits = new Set());\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        for (const k in _.prototype) {\n            if (!(k in inst))\n                Object.defineProperty(inst, k, { value: _.prototype[k].bind(inst) });\n        }\n        inst._zod.constr = _;\n        inst._zod.def = def;\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n", "// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error();\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport function defineLazy(object, key, getter) {\n    const set = false;\n    Object.defineProperty(object, key, {\n        get() {\n            if (!set) {\n                const value = getter();\n                object[key] = value;\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport const captureStackTrace = Error.captureStackTrace\n    ? Error.captureStackTrace\n    : (..._args) => { };\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const newShape = {};\n    const currDef = schema._zod.def; //.shape;\n    for (const key in mask) {\n        if (!(key in currDef.shape)) {\n            throw new Error(`Unrecognized key: \"${key}\"`);\n        }\n        if (!mask[key])\n            continue;\n        // pick key\n        newShape[key] = currDef.shape[key];\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape: newShape,\n        checks: [],\n    });\n}\nexport function omit(schema, mask) {\n    const newShape = { ...schema._zod.def.shape };\n    const currDef = schema._zod.def; //.shape;\n    for (const key in mask) {\n        if (!(key in currDef.shape)) {\n            throw new Error(`Unrecognized key: \"${key}\"`);\n        }\n        if (!mask[key])\n            continue;\n        delete newShape[key];\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape: newShape,\n        checks: [],\n    });\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const def = {\n        ...schema._zod.def,\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [], // delete existing checks\n    };\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    return clone(a, {\n        ...a._zod.def,\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        catchall: b._zod.def.catchall,\n        checks: [], // delete existing checks\n    });\n}\nexport function partial(Class, schema, mask) {\n    const oldShape = schema._zod.def.shape;\n    const shape = { ...oldShape };\n    if (mask) {\n        for (const key in mask) {\n            if (!(key in oldShape)) {\n                throw new Error(`Unrecognized key: \"${key}\"`);\n            }\n            if (!mask[key])\n                continue;\n            // if (oldShape[key]!._zod.optin === \"optional\") continue;\n            shape[key] = Class\n                ? new Class({\n                    type: \"optional\",\n                    innerType: oldShape[key],\n                })\n                : oldShape[key];\n        }\n    }\n    else {\n        for (const key in oldShape) {\n            // if (oldShape[key]!._zod.optin === \"optional\") continue;\n            shape[key] = Class\n                ? new Class({\n                    type: \"optional\",\n                    innerType: oldShape[key],\n                })\n                : oldShape[key];\n        }\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape,\n        checks: [],\n    });\n}\nexport function required(Class, schema, mask) {\n    const oldShape = schema._zod.def.shape;\n    const shape = { ...oldShape };\n    if (mask) {\n        for (const key in mask) {\n            if (!(key in shape)) {\n                throw new Error(`Unrecognized key: \"${key}\"`);\n            }\n            if (!mask[key])\n                continue;\n            // overwrite with non-optional\n            shape[key] = new Class({\n                type: \"nonoptional\",\n                innerType: oldShape[key],\n            });\n        }\n    }\n    else {\n        for (const key in oldShape) {\n            // overwrite with non-optional\n            shape[key] = new Class({\n                type: \"nonoptional\",\n                innerType: oldShape[key],\n            });\n        }\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape,\n        // optional: [],\n        checks: [],\n    });\n}\nexport function aborted(x, startIndex = 0) {\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true)\n            return true;\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n", "import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"message\", {\n        get() {\n            return JSON.stringify(def, util.jsonStringifyReplacer, 2);\n        },\n        enumerable: true,\n        // configurable: false,\n    });\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *   \u2716 Expected number, received string at \"username\n * favoriteNumbers[0]\n *   \u2716 Invalid input: expected number\n * ```\n */\nexport function toDotPath(path) {\n    const segs = [];\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => a.path.length - b.path.length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(`\u2716 ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`  \u2192 at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n", "import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\n", "export const cuid = /^[cC][^\\s-]{8,}$/;\nexport const cuid2 = /^[0-9a-z]+$/;\nexport const ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nexport const xid = /^[0-9a-vA-V]{20}$/;\nexport const ksuid = /^[A-Za-z0-9]{27}$/;\nexport const nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nexport const duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nexport const extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nexport const guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nexport const uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nexport const uuid4 = /*@__PURE__*/ uuid(4);\nexport const uuid6 = /*@__PURE__*/ uuid(6);\nexport const uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nexport const email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nexport const html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nexport const rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nexport const unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nexport function emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nexport const ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nexport const ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/;\nexport const cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nexport const cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nexport const base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nexport const base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp =\n//   /^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)+([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$/;\nexport const hostname = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nexport const domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\nexport const e164 = /^\\+(?:[0-9]){6,14}[0-9]$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nexport const date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nexport function time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nexport const string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nexport const bigint = /^\\d+n?$/;\nexport const integer = /^\\d+$/;\nexport const number = /^-?\\d+(?:\\.\\d+)?/i;\nexport const boolean = /true|false/i;\nconst _null = /null/i;\nexport { _null as null };\nconst _undefined = /undefined/i;\nexport { _undefined as undefined };\n// regex for string with no uppercase letters\nexport const lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nexport const uppercase = /^[^a-z]*$/;\n", "// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n", "export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n", "export const version = {\n    major: 4,\n    minor: 0,\n    patch: 5,\n};\n", "import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    //\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        inst._zod.run = (payload, ctx) => {\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            const orig = payload.value;\n            const url = new URL(orig);\n            const href = url.href;\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: regexes.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // payload.value = url.href;\n            if (!orig.endsWith(\"/\") && href.endsWith(\"/\")) {\n                payload.value = href.slice(0, -1);\n            }\n            else {\n                payload.value = href;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv4`;\n    });\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv6`;\n    });\n    inst._zod.check = (payload) => {\n        try {\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const [address, prefix] = payload.value.split(\"/\");\n        try {\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64url\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checksp\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handleObjectResult(result, final, key) {\n    // if(isOptional)\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    final.value[key] = result.value;\n}\nfunction handleOptionalObjectResult(result, final, key, input) {\n    if (result.issues.length) {\n        // validation failed against value schema\n        if (input[key] === undefined) {\n            // if input was undefined, ignore the error\n            if (key in input) {\n                final.value[key] = undefined;\n            }\n            else {\n                final.value[key] = result.value;\n            }\n        }\n        else {\n            final.issues.push(...util.prefixIssues(key, result.issues));\n        }\n    }\n    else if (result.value === undefined) {\n        // validation returned `undefined`\n        if (key in input)\n            final.value[key] = undefined;\n    }\n    else {\n        // non-undefined value\n        final.value[key] = result.value;\n    }\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    const _normalized = util.cached(() => {\n        const keys = Object.keys(def.shape);\n        for (const k of keys) {\n            if (!(def.shape[k] instanceof $ZodType)) {\n                throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n            }\n        }\n        const okeys = util.optionalKeys(def.shape);\n        return {\n            shape: def.shape,\n            keys,\n            keySet: new Set(keys),\n            numKeys: keys.length,\n            optionalKeys: new Set(okeys),\n        };\n    });\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {}`);\n        for (const key of normalized.keys) {\n            if (normalized.optionalKeys.has(key)) {\n                const id = ids[key];\n                doc.write(`const ${id} = ${parseStr(key)};`);\n                const k = util.esc(key);\n                doc.write(`\n        if (${id}.issues.length) {\n          if (input[${k}] === undefined) {\n            if (${k} in input) {\n              newResult[${k}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${id}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${k}, ...iss.path] : [${k}],\n              }))\n            );\n          }\n        } else if (${id}.value === undefined) {\n          if (${k} in input) newResult[${k}] = undefined;\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        `);\n            }\n            else {\n                const id = ids[key];\n                //  const id = ids[key];\n                doc.write(`const ${id} = ${parseStr(key)};`);\n                doc.write(`\n          if (${id}.issues.length) payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${util.esc(key)}, ...iss.path] : [${util.esc(key)}]\n          })));`);\n                doc.write(`newResult[${util.esc(key)}] = ${id}.value`);\n            }\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n        }\n        else {\n            payload.value = {};\n            const shape = value.shape;\n            for (const key of value.keys) {\n                const el = shape[key];\n                // do not add omitted optional keys\n                // if (!(key in input)) {\n                //   if (optionalKeys.has(key)) continue;\n                //   payload.issues.push({\n                //     code: \"invalid_type\",\n                //     path: [key],\n                //     expected: \"nonoptional\",\n                //     note: `Missing required key: \"${key}\"`,\n                //     input,\n                //     inst,\n                //   });\n                // }\n                const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n                const isOptional = el._zod.optin === \"optional\" && el._zod.optout === \"optional\";\n                if (r instanceof Promise) {\n                    proms.push(r.then((r) => isOptional ? handleOptionalObjectResult(r, payload, key, input) : handleObjectResult(r, payload, key)));\n                }\n                else if (isOptional) {\n                    handleOptionalObjectResult(r, payload, key, input);\n                }\n                else {\n                    handleObjectResult(r, payload, key);\n                }\n            }\n        }\n        if (!catchall) {\n            // return payload;\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        const unrecognized = [];\n        // iterate over input keys\n        const keySet = value.keySet;\n        const _catchall = catchall._zod;\n        const t = _catchall.def.type;\n        for (const key of Object.keys(input)) {\n            if (keySet.has(key))\n                continue;\n            if (t === \"never\") {\n                unrecognized.push(key);\n                continue;\n            }\n            const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handleObjectResult(r, payload, key)));\n            }\n            else {\n                handleObjectResult(r, payload, key);\n            }\n        }\n        if (unrecognized.length) {\n            payload.issues.push({\n                code: \"unrecognized_keys\",\n                keys: unrecognized,\n                input,\n                inst,\n            });\n        }\n        if (!proms.length)\n            return payload;\n        return Promise.all(proms).then(() => {\n            return payload;\n        });\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues?.[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    const optStart = items.length - [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    input,\n                    inst,\n                    origin: \"array\",\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (def.keyType._zod.values) {\n            const values = def.keyType._zod.values;\n            payload.value = {};\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!values.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        origin: \"record\",\n                        code: \"invalid_key\",\n                        issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_key\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    inst._zod.values = new Set(values);\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.values = new Set(def.values);\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? o.toString() : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const _out = def.transform(payload.value, payload);\n        if (_ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault always returns the default value immediately.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def, ctx));\n        }\n        return handlePipeResult(left, def, ctx);\n    };\n});\nfunction handlePipeResult(left, def, ctx) {\n    if (util.aborted(left)) {\n        return left;\n    }\n    return def.out._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (part instanceof $ZodType) {\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType._zod.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n", "export { default as ar } from \"./ar.js\";\nexport { default as az } from \"./az.js\";\nexport { default as be } from \"./be.js\";\nexport { default as ca } from \"./ca.js\";\nexport { default as cs } from \"./cs.js\";\nexport { default as de } from \"./de.js\";\nexport { default as en } from \"./en.js\";\nexport { default as eo } from \"./eo.js\";\nexport { default as es } from \"./es.js\";\nexport { default as fa } from \"./fa.js\";\nexport { default as fi } from \"./fi.js\";\nexport { default as fr } from \"./fr.js\";\nexport { default as frCA } from \"./fr-CA.js\";\nexport { default as he } from \"./he.js\";\nexport { default as hu } from \"./hu.js\";\nexport { default as id } from \"./id.js\";\nexport { default as it } from \"./it.js\";\nexport { default as ja } from \"./ja.js\";\nexport { default as kh } from \"./kh.js\";\nexport { default as ko } from \"./ko.js\";\nexport { default as mk } from \"./mk.js\";\nexport { default as ms } from \"./ms.js\";\nexport { default as nl } from \"./nl.js\";\nexport { default as no } from \"./no.js\";\nexport { default as ota } from \"./ota.js\";\nexport { default as ps } from \"./ps.js\";\nexport { default as pl } from \"./pl.js\";\nexport { default as pt } from \"./pt.js\";\nexport { default as ru } from \"./ru.js\";\nexport { default as sl } from \"./sl.js\";\nexport { default as sv } from \"./sv.js\";\nexport { default as ta } from \"./ta.js\";\nexport { default as th } from \"./th.js\";\nexport { default as tr } from \"./tr.js\";\nexport { default as ua } from \"./ua.js\";\nexport { default as ur } from \"./ur.js\";\nexport { default as vi } from \"./vi.js\";\nexport { default as zhCN } from \"./zh-CN.js\";\nexport { default as zhTW } from \"./zh-TW.js\";\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u062D\u0631\u0641\", verb: \"\u0623\u0646 \u064A\u062D\u0648\u064A\" },\n        file: { unit: \"\u0628\u0627\u064A\u062A\", verb: \"\u0623\u0646 \u064A\u062D\u0648\u064A\" },\n        array: { unit: \"\u0639\u0646\u0635\u0631\", verb: \"\u0623\u0646 \u064A\u062D\u0648\u064A\" },\n        set: { unit: \"\u0639\u0646\u0635\u0631\", verb: \"\u0623\u0646 \u064A\u062D\u0648\u064A\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0645\u062F\u062E\u0644\",\n        email: \"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A\",\n        url: \"\u0631\u0627\u0628\u0637\",\n        emoji: \"\u0625\u064A\u0645\u0648\u062C\u064A\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO\",\n        date: \"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO\",\n        time: \"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO\",\n        duration: \"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO\",\n        ipv4: \"\u0639\u0646\u0648\u0627\u0646 IPv4\",\n        ipv6: \"\u0639\u0646\u0648\u0627\u0646 IPv6\",\n        cidrv4: \"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4\",\n        cidrv6: \"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6\",\n        base64: \"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded\",\n        base64url: \"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded\",\n        json_string: \"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON\",\n        e164: \"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\u0645\u062F\u062E\u0644\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${issue.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${issue.origin ?? \"\u0627\u0644\u0642\u064A\u0645\u0629\"} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\u0639\u0646\u0635\u0631\"}`;\n                return `\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${issue.origin ?? \"\u0627\u0644\u0642\u064A\u0645\u0629\"} ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${issue.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${issue.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 \"${issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`;\n            }\n            case \"not_multiple_of\":\n                return `\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `\u0645\u0639\u0631\u0641${issue.keys.length > 1 ? \"\u0627\u062A\" : \"\"} \u063A\u0631\u064A\u0628${issue.keys.length > 1 ? \"\u0629\" : \"\"}: ${util.joinValues(issue.keys, \"\u060C \")}`;\n            case \"invalid_key\":\n                return `\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\";\n            case \"invalid_element\":\n                return `\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${issue.origin}`;\n            default:\n                return \"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"simvol\", verb: \"olmal\u0131d\u0131r\" },\n        file: { unit: \"bayt\", verb: \"olmal\u0131d\u0131r\" },\n        array: { unit: \"element\", verb: \"olmal\u0131d\u0131r\" },\n        set: { unit: \"element\", verb: \"olmal\u0131d\u0131r\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"email address\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datetime\",\n        date: \"ISO date\",\n        time: \"ISO time\",\n        duration: \"ISO duration\",\n        ipv4: \"IPv4 address\",\n        ipv6: \"IPv6 address\",\n        cidrv4: \"IPv4 range\",\n        cidrv6: \"IPv6 range\",\n        base64: \"base64-encoded string\",\n        base64url: \"base64url-encoded string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 number\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Yanl\u0131\u015F d\u0259y\u0259r: g\u00F6zl\u0259nil\u0259n ${issue.expected}, daxil olan ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Yanl\u0131\u015F d\u0259y\u0259r: g\u00F6zl\u0259nil\u0259n ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Yanl\u0131\u015F se\u00E7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u00C7ox b\u00F6y\u00FCk: g\u00F6zl\u0259nil\u0259n ${issue.origin ?? \"d\u0259y\u0259r\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"element\"}`;\n                return `\u00C7ox b\u00F6y\u00FCk: g\u00F6zl\u0259nil\u0259n ${issue.origin ?? \"d\u0259y\u0259r\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u00C7ox ki\u00E7ik: g\u00F6zl\u0259nil\u0259n ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                return `\u00C7ox ki\u00E7ik: g\u00F6zl\u0259nil\u0259n ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Yanl\u0131\u015F m\u0259tn: \"${_issue.prefix}\" il\u0259 ba\u015Flamal\u0131d\u0131r`;\n                if (_issue.format === \"ends_with\")\n                    return `Yanl\u0131\u015F m\u0259tn: \"${_issue.suffix}\" il\u0259 bitm\u0259lidir`;\n                if (_issue.format === \"includes\")\n                    return `Yanl\u0131\u015F m\u0259tn: \"${_issue.includes}\" daxil olmal\u0131d\u0131r`;\n                if (_issue.format === \"regex\")\n                    return `Yanl\u0131\u015F m\u0259tn: ${_issue.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`;\n                return `Yanl\u0131\u015F ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Yanl\u0131\u015F \u0259d\u0259d: ${issue.divisor} il\u0259 b\u00F6l\u00FCn\u0259 bil\u0259n olmal\u0131d\u0131r`;\n            case \"unrecognized_keys\":\n                return `Tan\u0131nmayan a\u00E7ar${issue.keys.length > 1 ? \"lar\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} daxilind\u0259 yanl\u0131\u015F a\u00E7ar`;\n            case \"invalid_union\":\n                return \"Yanl\u0131\u015F d\u0259y\u0259r\";\n            case \"invalid_element\":\n                return `${issue.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;\n            default:\n                return `Yanl\u0131\u015F d\u0259y\u0259r`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nfunction getBelarusianPlural(count, one, few, many) {\n    const absCount = Math.abs(count);\n    const lastDigit = absCount % 10;\n    const lastTwoDigits = absCount % 100;\n    if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {\n        return many;\n    }\n    if (lastDigit === 1) {\n        return one;\n    }\n    if (lastDigit >= 2 && lastDigit <= 4) {\n        return few;\n    }\n    return many;\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"\u0441\u0456\u043C\u0432\u0430\u043B\",\n                few: \"\u0441\u0456\u043C\u0432\u0430\u043B\u044B\",\n                many: \"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E\",\n            },\n            verb: \"\u043C\u0435\u0446\u044C\",\n        },\n        array: {\n            unit: {\n                one: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\",\n                few: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B\",\n                many: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E\",\n            },\n            verb: \"\u043C\u0435\u0446\u044C\",\n        },\n        set: {\n            unit: {\n                one: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\",\n                few: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B\",\n                many: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E\",\n            },\n            verb: \"\u043C\u0435\u0446\u044C\",\n        },\n        file: {\n            unit: {\n                one: \"\u0431\u0430\u0439\u0442\",\n                few: \"\u0431\u0430\u0439\u0442\u044B\",\n                many: \"\u0431\u0430\u0439\u0442\u0430\u045E\",\n            },\n            verb: \"\u043C\u0435\u0446\u044C\",\n        },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u043B\u0456\u043A\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u043C\u0430\u0441\u0456\u045E\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0443\u0432\u043E\u0434\",\n        email: \"email \u0430\u0434\u0440\u0430\u0441\",\n        url: \"URL\",\n        emoji: \"\u044D\u043C\u043E\u0434\u0437\u0456\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441\",\n        date: \"ISO \u0434\u0430\u0442\u0430\",\n        time: \"ISO \u0447\u0430\u0441\",\n        duration: \"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C\",\n        ipv4: \"IPv4 \u0430\u0434\u0440\u0430\u0441\",\n        ipv6: \"IPv6 \u0430\u0434\u0440\u0430\u0441\",\n        cidrv4: \"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D\",\n        cidrv6: \"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D\",\n        base64: \"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64\",\n        base64url: \"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url\",\n        json_string: \"JSON \u0440\u0430\u0434\u043E\u043A\",\n        e164: \"\u043D\u0443\u043C\u0430\u0440 E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\u0443\u0432\u043E\u0434\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${issue.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const maxValue = Number(issue.maximum);\n                    const unit = getBelarusianPlural(maxValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return `\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${issue.origin ?? \"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435\"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${sizing.verb} ${adj}${issue.maximum.toString()} ${unit}`;\n                }\n                return `\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${issue.origin ?? \"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435\"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const minValue = Number(issue.minimum);\n                    const unit = getBelarusianPlural(minValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return `\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${issue.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${sizing.verb} ${adj}${issue.minimum.toString()} ${unit}`;\n                }\n                return `\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${issue.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${_issue.pattern}`;\n                return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${issue.keys.length > 1 ? \"\u043A\u043B\u044E\u0447\u044B\" : \"\u043A\u043B\u044E\u0447\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434\";\n            case \"invalid_element\":\n                return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${issue.origin}`;\n            default:\n                return `\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"car\u00E0cters\", verb: \"contenir\" },\n        file: { unit: \"bytes\", verb: \"contenir\" },\n        array: { unit: \"elements\", verb: \"contenir\" },\n        set: { unit: \"elements\", verb: \"contenir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"entrada\",\n        email: \"adre\u00E7a electr\u00F2nica\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data i hora ISO\",\n        date: \"data ISO\",\n        time: \"hora ISO\",\n        duration: \"durada ISO\",\n        ipv4: \"adre\u00E7a IPv4\",\n        ipv6: \"adre\u00E7a IPv6\",\n        cidrv4: \"rang IPv4\",\n        cidrv6: \"rang IPv6\",\n        base64: \"cadena codificada en base64\",\n        base64url: \"cadena codificada en base64url\",\n        json_string: \"cadena JSON\",\n        e164: \"n\u00FAmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Tipus inv\u00E0lid: s'esperava ${issue.expected}, s'ha rebut ${parsedType(issue.input)}`;\n            // return `Tipus inv\u00E0lid: s'esperava ${issue.expected}, s'ha rebut ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Valor inv\u00E0lid: s'esperava ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opci\u00F3 inv\u00E0lida: s'esperava una de ${util.joinValues(issue.values, \" o \")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"com a m\u00E0xim\" : \"menys de\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Massa gran: s'esperava que ${issue.origin ?? \"el valor\"} contingu\u00E9s ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"elements\"}`;\n                return `Massa gran: s'esperava que ${issue.origin ?? \"el valor\"} fos ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"com a m\u00EDnim\" : \"m\u00E9s de\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Massa petit: s'esperava que ${issue.origin} contingu\u00E9s ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Massa petit: s'esperava que ${issue.origin} fos ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Format inv\u00E0lid: ha de comen\u00E7ar amb \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Format inv\u00E0lid: ha d'acabar amb \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Format inv\u00E0lid: ha d'incloure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Format inv\u00E0lid: ha de coincidir amb el patr\u00F3 ${_issue.pattern}`;\n                return `Format inv\u00E0lid per a ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `N\u00FAmero inv\u00E0lid: ha de ser m\u00FAltiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Clau${issue.keys.length > 1 ? \"s\" : \"\"} no reconeguda${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Clau inv\u00E0lida a ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entrada inv\u00E0lida\"; // Could also be \"Tipus d'uni\u00F3 inv\u00E0lid\" but \"Entrada inv\u00E0lida\" is more general\n            case \"invalid_element\":\n                return `Element inv\u00E0lid a ${issue.origin}`;\n            default:\n                return `Entrada inv\u00E0lida`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znak\u016F\", verb: \"m\u00EDt\" },\n        file: { unit: \"bajt\u016F\", verb: \"m\u00EDt\" },\n        array: { unit: \"prvk\u016F\", verb: \"m\u00EDt\" },\n        set: { unit: \"prvk\u016F\", verb: \"m\u00EDt\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u010D\u00EDslo\";\n            }\n            case \"string\": {\n                return \"\u0159et\u011Bzec\";\n            }\n            case \"boolean\": {\n                return \"boolean\";\n            }\n            case \"bigint\": {\n                return \"bigint\";\n            }\n            case \"function\": {\n                return \"funkce\";\n            }\n            case \"symbol\": {\n                return \"symbol\";\n            }\n            case \"undefined\": {\n                return \"undefined\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"pole\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"regul\u00E1rn\u00ED v\u00FDraz\",\n        email: \"e-mailov\u00E1 adresa\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"datum a \u010Das ve form\u00E1tu ISO\",\n        date: \"datum ve form\u00E1tu ISO\",\n        time: \"\u010Das ve form\u00E1tu ISO\",\n        duration: \"doba trv\u00E1n\u00ED ISO\",\n        ipv4: \"IPv4 adresa\",\n        ipv6: \"IPv6 adresa\",\n        cidrv4: \"rozsah IPv4\",\n        cidrv6: \"rozsah IPv6\",\n        base64: \"\u0159et\u011Bzec zak\u00F3dovan\u00FD ve form\u00E1tu base64\",\n        base64url: \"\u0159et\u011Bzec zak\u00F3dovan\u00FD ve form\u00E1tu base64url\",\n        json_string: \"\u0159et\u011Bzec ve form\u00E1tu JSON\",\n        e164: \"\u010D\u00EDslo E.164\",\n        jwt: \"JWT\",\n        template_literal: \"vstup\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Neplatn\u00FD vstup: o\u010Dek\u00E1v\u00E1no ${issue.expected}, obdr\u017Eeno ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Neplatn\u00FD vstup: o\u010Dek\u00E1v\u00E1no ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Neplatn\u00E1 mo\u017Enost: o\u010Dek\u00E1v\u00E1na jedna z hodnot ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Hodnota je p\u0159\u00EDli\u0161 velk\u00E1: ${issue.origin ?? \"hodnota\"} mus\u00ED m\u00EDt ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"prvk\u016F\"}`;\n                }\n                return `Hodnota je p\u0159\u00EDli\u0161 velk\u00E1: ${issue.origin ?? \"hodnota\"} mus\u00ED b\u00FDt ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Hodnota je p\u0159\u00EDli\u0161 mal\u00E1: ${issue.origin ?? \"hodnota\"} mus\u00ED m\u00EDt ${adj}${issue.minimum.toString()} ${sizing.unit ?? \"prvk\u016F\"}`;\n                }\n                return `Hodnota je p\u0159\u00EDli\u0161 mal\u00E1: ${issue.origin ?? \"hodnota\"} mus\u00ED b\u00FDt ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Neplatn\u00FD \u0159et\u011Bzec: mus\u00ED za\u010D\u00EDnat na \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Neplatn\u00FD \u0159et\u011Bzec: mus\u00ED kon\u010Dit na \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Neplatn\u00FD \u0159et\u011Bzec: mus\u00ED obsahovat \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Neplatn\u00FD \u0159et\u011Bzec: mus\u00ED odpov\u00EDdat vzoru ${_issue.pattern}`;\n                return `Neplatn\u00FD form\u00E1t ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Neplatn\u00E9 \u010D\u00EDslo: mus\u00ED b\u00FDt n\u00E1sobkem ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Nezn\u00E1m\u00E9 kl\u00ED\u010De: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Neplatn\u00FD kl\u00ED\u010D v ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Neplatn\u00FD vstup\";\n            case \"invalid_element\":\n                return `Neplatn\u00E1 hodnota v ${issue.origin}`;\n            default:\n                return `Neplatn\u00FD vstup`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"Zeichen\", verb: \"zu haben\" },\n        file: { unit: \"Bytes\", verb: \"zu haben\" },\n        array: { unit: \"Elemente\", verb: \"zu haben\" },\n        set: { unit: \"Elemente\", verb: \"zu haben\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"Zahl\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"Array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"Eingabe\",\n        email: \"E-Mail-Adresse\",\n        url: \"URL\",\n        emoji: \"Emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-Datum und -Uhrzeit\",\n        date: \"ISO-Datum\",\n        time: \"ISO-Uhrzeit\",\n        duration: \"ISO-Dauer\",\n        ipv4: \"IPv4-Adresse\",\n        ipv6: \"IPv6-Adresse\",\n        cidrv4: \"IPv4-Bereich\",\n        cidrv6: \"IPv6-Bereich\",\n        base64: \"Base64-codierter String\",\n        base64url: \"Base64-URL-codierter String\",\n        json_string: \"JSON-String\",\n        e164: \"E.164-Nummer\",\n        jwt: \"JWT\",\n        template_literal: \"Eingabe\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ung\u00FCltige Eingabe: erwartet ${issue.expected}, erhalten ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ung\u00FCltige Eingabe: erwartet ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ung\u00FCltige Option: erwartet eine von ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Zu gro\u00DF: erwartet, dass ${issue.origin ?? \"Wert\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"Elemente\"} hat`;\n                return `Zu gro\u00DF: erwartet, dass ${issue.origin ?? \"Wert\"} ${adj}${issue.maximum.toString()} ist`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Zu klein: erwartet, dass ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit} hat`;\n                }\n                return `Zu klein: erwartet, dass ${issue.origin} ${adj}${issue.minimum.toString()} ist`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ung\u00FCltiger String: muss mit \"${_issue.prefix}\" beginnen`;\n                if (_issue.format === \"ends_with\")\n                    return `Ung\u00FCltiger String: muss mit \"${_issue.suffix}\" enden`;\n                if (_issue.format === \"includes\")\n                    return `Ung\u00FCltiger String: muss \"${_issue.includes}\" enthalten`;\n                if (_issue.format === \"regex\")\n                    return `Ung\u00FCltiger String: muss dem Muster ${_issue.pattern} entsprechen`;\n                return `Ung\u00FCltig: ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ung\u00FCltige Zahl: muss ein Vielfaches von ${issue.divisor} sein`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Unbekannte Schl\u00FCssel\" : \"Unbekannter Schl\u00FCssel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ung\u00FCltiger Schl\u00FCssel in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ung\u00FCltige Eingabe\";\n            case \"invalid_element\":\n                return `Ung\u00FCltiger Wert in ${issue.origin}`;\n            default:\n                return `Ung\u00FCltige Eingabe`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"number\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    return t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"characters\", verb: \"to have\" },\n        file: { unit: \"bytes\", verb: \"to have\" },\n        array: { unit: \"items\", verb: \"to have\" },\n        set: { unit: \"items\", verb: \"to have\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"input\",\n        email: \"email address\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datetime\",\n        date: \"ISO date\",\n        time: \"ISO time\",\n        duration: \"ISO duration\",\n        ipv4: \"IPv4 address\",\n        ipv6: \"IPv6 address\",\n        cidrv4: \"IPv4 range\",\n        cidrv6: \"IPv6 range\",\n        base64: \"base64-encoded string\",\n        base64url: \"base64url-encoded string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 number\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Invalid input: expected ${issue.expected}, received ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Invalid input: expected ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Invalid option: expected one of ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Too big: expected ${issue.origin ?? \"value\"} to have ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elements\"}`;\n                return `Too big: expected ${issue.origin ?? \"value\"} to be ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Too small: expected ${issue.origin} to have ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Too small: expected ${issue.origin} to be ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Invalid string: must start with \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Invalid string: must end with \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Invalid string: must include \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Invalid string: must match pattern ${_issue.pattern}`;\n                return `Invalid ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Invalid number: must be a multiple of ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Unrecognized key${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Invalid key in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Invalid input\";\n            case \"invalid_element\":\n                return `Invalid value in ${issue.origin}`;\n            default:\n                return `Invalid input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"nombro\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"tabelo\";\n            }\n            if (data === null) {\n                return \"senvalora\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    return t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karaktrojn\", verb: \"havi\" },\n        file: { unit: \"bajtojn\", verb: \"havi\" },\n        array: { unit: \"elementojn\", verb: \"havi\" },\n        set: { unit: \"elementojn\", verb: \"havi\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"enigo\",\n        email: \"retadreso\",\n        url: \"URL\",\n        emoji: \"emo\u011Dio\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-datotempo\",\n        date: \"ISO-dato\",\n        time: \"ISO-tempo\",\n        duration: \"ISO-da\u016Dro\",\n        ipv4: \"IPv4-adreso\",\n        ipv6: \"IPv6-adreso\",\n        cidrv4: \"IPv4-rango\",\n        cidrv6: \"IPv6-rango\",\n        base64: \"64-ume kodita karaktraro\",\n        base64url: \"URL-64-ume kodita karaktraro\",\n        json_string: \"JSON-karaktraro\",\n        e164: \"E.164-nombro\",\n        jwt: \"JWT\",\n        template_literal: \"enigo\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Nevalida enigo: atendi\u011Dis ${issue.expected}, ricevi\u011Dis ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Nevalida enigo: atendi\u011Dis ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Nevalida opcio: atendi\u011Dis unu el ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Tro granda: atendi\u011Dis ke ${issue.origin ?? \"valoro\"} havu ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementojn\"}`;\n                return `Tro granda: atendi\u011Dis ke ${issue.origin ?? \"valoro\"} havu ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Tro malgranda: atendi\u011Dis ke ${issue.origin} havu ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Tro malgranda: atendi\u011Dis ke ${issue.origin} estu ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Nevalida karaktraro: devas komenci\u011Di per \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Nevalida karaktraro: devas fini\u011Di per \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Nevalida karaktraro: devas inkluzivi \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Nevalida karaktraro: devas kongrui kun la modelo ${_issue.pattern}`;\n                return `Nevalida ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nevalida nombro: devas esti oblo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Nekonata${issue.keys.length > 1 ? \"j\" : \"\"} \u015Dlosilo${issue.keys.length > 1 ? \"j\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Nevalida \u015Dlosilo en ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Nevalida enigo\";\n            case \"invalid_element\":\n                return `Nevalida valoro en ${issue.origin}`;\n            default:\n                return `Nevalida enigo`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caracteres\", verb: \"tener\" },\n        file: { unit: \"bytes\", verb: \"tener\" },\n        array: { unit: \"elementos\", verb: \"tener\" },\n        set: { unit: \"elementos\", verb: \"tener\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"n\u00FAmero\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"arreglo\";\n                }\n                if (data === null) {\n                    return \"nulo\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"entrada\",\n        email: \"direcci\u00F3n de correo electr\u00F3nico\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"fecha y hora ISO\",\n        date: \"fecha ISO\",\n        time: \"hora ISO\",\n        duration: \"duraci\u00F3n ISO\",\n        ipv4: \"direcci\u00F3n IPv4\",\n        ipv6: \"direcci\u00F3n IPv6\",\n        cidrv4: \"rango IPv4\",\n        cidrv6: \"rango IPv6\",\n        base64: \"cadena codificada en base64\",\n        base64url: \"URL codificada en base64\",\n        json_string: \"cadena JSON\",\n        e164: \"n\u00FAmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Entrada inv\u00E1lida: se esperaba ${issue.expected}, recibido ${parsedType(issue.input)}`;\n            // return `Entrada inv\u00E1lida: se esperaba ${issue.expected}, recibido ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entrada inv\u00E1lida: se esperaba ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opci\u00F3n inv\u00E1lida: se esperaba una de ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Demasiado grande: se esperaba que ${issue.origin ?? \"valor\"} tuviera ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementos\"}`;\n                return `Demasiado grande: se esperaba que ${issue.origin ?? \"valor\"} fuera ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Demasiado peque\u00F1o: se esperaba que ${issue.origin} tuviera ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Demasiado peque\u00F1o: se esperaba que ${issue.origin} fuera ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Cadena inv\u00E1lida: debe comenzar con \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Cadena inv\u00E1lida: debe terminar en \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Cadena inv\u00E1lida: debe incluir \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Cadena inv\u00E1lida: debe coincidir con el patr\u00F3n ${_issue.pattern}`;\n                return `Inv\u00E1lido ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `N\u00FAmero inv\u00E1lido: debe ser m\u00FAltiplo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Llave${issue.keys.length > 1 ? \"s\" : \"\"} desconocida${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Llave inv\u00E1lida en ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entrada inv\u00E1lida\";\n            case \"invalid_element\":\n                return `Valor inv\u00E1lido en ${issue.origin}`;\n            default:\n                return `Entrada inv\u00E1lida`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631\", verb: \"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F\" },\n        file: { unit: \"\u0628\u0627\u06CC\u062A\", verb: \"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F\" },\n        array: { unit: \"\u0622\u06CC\u062A\u0645\", verb: \"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F\" },\n        set: { unit: \"\u0622\u06CC\u062A\u0645\", verb: \"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u0639\u062F\u062F\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u0622\u0631\u0627\u06CC\u0647\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0648\u0631\u0648\u062F\u06CC\",\n        email: \"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644\",\n        url: \"URL\",\n        emoji: \"\u0627\u06CC\u0645\u0648\u062C\u06CC\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648\",\n        date: \"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648\",\n        time: \"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648\",\n        duration: \"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648\",\n        ipv4: \"IPv4 \u0622\u062F\u0631\u0633\",\n        ipv6: \"IPv6 \u0622\u062F\u0631\u0633\",\n        cidrv4: \"IPv4 \u062F\u0627\u0645\u0646\u0647\",\n        cidrv6: \"IPv6 \u062F\u0627\u0645\u0646\u0647\",\n        base64: \"base64-encoded \u0631\u0634\u062A\u0647\",\n        base64url: \"base64url-encoded \u0631\u0634\u062A\u0647\",\n        json_string: \"JSON \u0631\u0634\u062A\u0647\",\n        e164: \"E.164 \u0639\u062F\u062F\",\n        jwt: \"JWT\",\n        template_literal: \"\u0648\u0631\u0648\u062F\u06CC\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${issue.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${parsedType(issue.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;\n            case \"invalid_value\":\n                if (issue.values.length === 1) {\n                    return `\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${util.stringifyPrimitive(issue.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`;\n                }\n                return `\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${util.joinValues(issue.values, \"|\")} \u0645\u06CC\u200C\u0628\u0648\u062F`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${issue.origin ?? \"\u0645\u0642\u062F\u0627\u0631\"} \u0628\u0627\u06CC\u062F ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u0639\u0646\u0635\u0631\"} \u0628\u0627\u0634\u062F`;\n                }\n                return `\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${issue.origin ?? \"\u0645\u0642\u062F\u0627\u0631\"} \u0628\u0627\u06CC\u062F ${adj}${issue.maximum.toString()} \u0628\u0627\u0634\u062F`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${issue.origin} \u0628\u0627\u06CC\u062F ${adj}${issue.minimum.toString()} ${sizing.unit} \u0628\u0627\u0634\u062F`;\n                }\n                return `\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${issue.origin} \u0628\u0627\u06CC\u062F ${adj}${issue.minimum.toString()} \u0628\u0627\u0634\u062F`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \"${_issue.prefix}\" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`;\n                }\n                if (_issue.format === \"ends_with\") {\n                    return `\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \"${_issue.suffix}\" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`;\n                }\n                if (_issue.format === \"includes\") {\n                    return `\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 \"${_issue.includes}\" \u0628\u0627\u0634\u062F`;\n                }\n                if (_issue.format === \"regex\") {\n                    return `\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${_issue.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`;\n                }\n                return `${Nouns[_issue.format] ?? issue.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`;\n            }\n            case \"not_multiple_of\":\n                return `\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${issue.divisor} \u0628\u0627\u0634\u062F`;\n            case \"unrecognized_keys\":\n                return `\u06A9\u0644\u06CC\u062F${issue.keys.length > 1 ? \"\u0647\u0627\u06CC\" : \"\"} \u0646\u0627\u0634\u0646\u0627\u0633: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${issue.origin}`;\n            case \"invalid_union\":\n                return `\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631`;\n            case \"invalid_element\":\n                return `\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${issue.origin}`;\n            default:\n                return `\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"merkki\u00E4\", subject: \"merkkijonon\" },\n        file: { unit: \"tavua\", subject: \"tiedoston\" },\n        array: { unit: \"alkiota\", subject: \"listan\" },\n        set: { unit: \"alkiota\", subject: \"joukon\" },\n        number: { unit: \"\", subject: \"luvun\" },\n        bigint: { unit: \"\", subject: \"suuren kokonaisluvun\" },\n        int: { unit: \"\", subject: \"kokonaisluvun\" },\n        date: { unit: \"\", subject: \"p\u00E4iv\u00E4m\u00E4\u00E4r\u00E4n\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"s\u00E4\u00E4nn\u00F6llinen lauseke\",\n        email: \"s\u00E4hk\u00F6postiosoite\",\n        url: \"URL-osoite\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-aikaleima\",\n        date: \"ISO-p\u00E4iv\u00E4m\u00E4\u00E4r\u00E4\",\n        time: \"ISO-aika\",\n        duration: \"ISO-kesto\",\n        ipv4: \"IPv4-osoite\",\n        ipv6: \"IPv6-osoite\",\n        cidrv4: \"IPv4-alue\",\n        cidrv6: \"IPv6-alue\",\n        base64: \"base64-koodattu merkkijono\",\n        base64url: \"base64url-koodattu merkkijono\",\n        json_string: \"JSON-merkkijono\",\n        e164: \"E.164-luku\",\n        jwt: \"JWT\",\n        template_literal: \"templaattimerkkijono\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Virheellinen tyyppi: odotettiin ${issue.expected}, oli ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Virheellinen sy\u00F6te: t\u00E4ytyy olla ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Virheellinen valinta: t\u00E4ytyy olla yksi seuraavista: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Liian suuri: ${sizing.subject} t\u00E4ytyy olla ${adj}${issue.maximum.toString()} ${sizing.unit}`.trim();\n                }\n                return `Liian suuri: arvon t\u00E4ytyy olla ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Liian pieni: ${sizing.subject} t\u00E4ytyy olla ${adj}${issue.minimum.toString()} ${sizing.unit}`.trim();\n                }\n                return `Liian pieni: arvon t\u00E4ytyy olla ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Virheellinen sy\u00F6te: t\u00E4ytyy alkaa \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Virheellinen sy\u00F6te: t\u00E4ytyy loppua \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Virheellinen sy\u00F6te: t\u00E4ytyy sis\u00E4lt\u00E4\u00E4 \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\") {\n                    return `Virheellinen sy\u00F6te: t\u00E4ytyy vastata s\u00E4\u00E4nn\u00F6llist\u00E4 lauseketta ${_issue.pattern}`;\n                }\n                return `Virheellinen ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Virheellinen luku: t\u00E4ytyy olla luvun ${issue.divisor} monikerta`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Tuntemattomat avaimet\" : \"Tuntematon avain\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return \"Virheellinen avain tietueessa\";\n            case \"invalid_union\":\n                return \"Virheellinen unioni\";\n            case \"invalid_element\":\n                return \"Virheellinen arvo joukossa\";\n            default:\n                return `Virheellinen sy\u00F6te`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caract\u00E8res\", verb: \"avoir\" },\n        file: { unit: \"octets\", verb: \"avoir\" },\n        array: { unit: \"\u00E9l\u00E9ments\", verb: \"avoir\" },\n        set: { unit: \"\u00E9l\u00E9ments\", verb: \"avoir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"nombre\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"tableau\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"entr\u00E9e\",\n        email: \"adresse e-mail\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"date et heure ISO\",\n        date: \"date ISO\",\n        time: \"heure ISO\",\n        duration: \"dur\u00E9e ISO\",\n        ipv4: \"adresse IPv4\",\n        ipv6: \"adresse IPv6\",\n        cidrv4: \"plage IPv4\",\n        cidrv6: \"plage IPv6\",\n        base64: \"cha\u00EEne encod\u00E9e en base64\",\n        base64url: \"cha\u00EEne encod\u00E9e en base64url\",\n        json_string: \"cha\u00EEne JSON\",\n        e164: \"num\u00E9ro E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entr\u00E9e\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Entr\u00E9e invalide : ${issue.expected} attendu, ${parsedType(issue.input)} re\u00E7u`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entr\u00E9e invalide : ${util.stringifyPrimitive(issue.values[0])} attendu`;\n                return `Option invalide : une valeur parmi ${util.joinValues(issue.values, \"|\")} attendue`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Trop grand : ${issue.origin ?? \"valeur\"} doit ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u00E9l\u00E9ment(s)\"}`;\n                return `Trop grand : ${issue.origin ?? \"valeur\"} doit \u00EAtre ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Trop petit : ${issue.origin} doit ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Trop petit : ${issue.origin} doit \u00EAtre ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Cha\u00EEne invalide : doit commencer par \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Cha\u00EEne invalide : doit se terminer par \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Cha\u00EEne invalide : doit inclure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Cha\u00EEne invalide : doit correspondre au mod\u00E8le ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} invalide`;\n            }\n            case \"not_multiple_of\":\n                return `Nombre invalide : doit \u00EAtre un multiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Cl\u00E9${issue.keys.length > 1 ? \"s\" : \"\"} non reconnue${issue.keys.length > 1 ? \"s\" : \"\"} : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Cl\u00E9 invalide dans ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entr\u00E9e invalide\";\n            case \"invalid_element\":\n                return `Valeur invalide dans ${issue.origin}`;\n            default:\n                return `Entr\u00E9e invalide`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caract\u00E8res\", verb: \"avoir\" },\n        file: { unit: \"octets\", verb: \"avoir\" },\n        array: { unit: \"\u00E9l\u00E9ments\", verb: \"avoir\" },\n        set: { unit: \"\u00E9l\u00E9ments\", verb: \"avoir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"entr\u00E9e\",\n        email: \"adresse courriel\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"date-heure ISO\",\n        date: \"date ISO\",\n        time: \"heure ISO\",\n        duration: \"dur\u00E9e ISO\",\n        ipv4: \"adresse IPv4\",\n        ipv6: \"adresse IPv6\",\n        cidrv4: \"plage IPv4\",\n        cidrv6: \"plage IPv6\",\n        base64: \"cha\u00EEne encod\u00E9e en base64\",\n        base64url: \"cha\u00EEne encod\u00E9e en base64url\",\n        json_string: \"cha\u00EEne JSON\",\n        e164: \"num\u00E9ro E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entr\u00E9e\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Entr\u00E9e invalide : attendu ${issue.expected}, re\u00E7u ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entr\u00E9e invalide : attendu ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Option invalide : attendu l'une des valeurs suivantes ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\u2264\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Trop grand : attendu que ${issue.origin ?? \"la valeur\"} ait ${adj}${issue.maximum.toString()} ${sizing.unit}`;\n                return `Trop grand : attendu que ${issue.origin ?? \"la valeur\"} soit ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\u2265\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Trop petit : attendu que ${issue.origin} ait ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Trop petit : attendu que ${issue.origin} soit ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Cha\u00EEne invalide : doit commencer par \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Cha\u00EEne invalide : doit se terminer par \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Cha\u00EEne invalide : doit inclure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Cha\u00EEne invalide : doit correspondre au motif ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} invalide`;\n            }\n            case \"not_multiple_of\":\n                return `Nombre invalide : doit \u00EAtre un multiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Cl\u00E9${issue.keys.length > 1 ? \"s\" : \"\"} non reconnue${issue.keys.length > 1 ? \"s\" : \"\"} : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Cl\u00E9 invalide dans ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entr\u00E9e invalide\";\n            case \"invalid_element\":\n                return `Valeur invalide dans ${issue.origin}`;\n            default:\n                return `Entr\u00E9e invalide`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u05D0\u05D5\u05EA\u05D9\u05D5\u05EA\", verb: \"\u05DC\u05DB\u05DC\u05D5\u05DC\" },\n        file: { unit: \"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD\", verb: \"\u05DC\u05DB\u05DC\u05D5\u05DC\" },\n        array: { unit: \"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD\", verb: \"\u05DC\u05DB\u05DC\u05D5\u05DC\" },\n        set: { unit: \"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD\", verb: \"\u05DC\u05DB\u05DC\u05D5\u05DC\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u05E7\u05DC\u05D8\",\n        email: \"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC\",\n        url: \"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA\",\n        emoji: \"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO\",\n        date: \"\u05EA\u05D0\u05E8\u05D9\u05DA ISO\",\n        time: \"\u05D6\u05DE\u05DF ISO\",\n        duration: \"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO\",\n        ipv4: \"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4\",\n        ipv6: \"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6\",\n        cidrv4: \"\u05D8\u05D5\u05D5\u05D7 IPv4\",\n        cidrv6: \"\u05D8\u05D5\u05D5\u05D7 IPv6\",\n        base64: \"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64\",\n        base64url: \"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA\",\n        json_string: \"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON\",\n        e164: \"\u05DE\u05E1\u05E4\u05E8 E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\u05E7\u05DC\u05D8\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${issue.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${parsedType(issue.input)}`;\n            // return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05D0\u05D7\u05EA \u05DE\u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA  ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${issue.origin ?? \"value\"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elements\"}`;\n                return `\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${issue.origin ?? \"value\"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${issue.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${issue.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1\"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF`;\n            }\n            case \"not_multiple_of\":\n                return `\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `\u05DE\u05E4\u05EA\u05D7${issue.keys.length > 1 ? \"\u05D5\u05EA\" : \"\"} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${issue.keys.length > 1 ? \"\u05D9\u05DD\" : \"\u05D4\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u05DE\u05E4\u05EA\u05D7 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF\";\n            case \"invalid_element\":\n                return `\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${issue.origin}`;\n            default:\n                return `\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"legyen\" },\n        file: { unit: \"byte\", verb: \"legyen\" },\n        array: { unit: \"elem\", verb: \"legyen\" },\n        set: { unit: \"elem\", verb: \"legyen\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"sz\u00E1m\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"t\u00F6mb\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"bemenet\",\n        email: \"email c\u00EDm\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO id\u0151b\u00E9lyeg\",\n        date: \"ISO d\u00E1tum\",\n        time: \"ISO id\u0151\",\n        duration: \"ISO id\u0151intervallum\",\n        ipv4: \"IPv4 c\u00EDm\",\n        ipv6: \"IPv6 c\u00EDm\",\n        cidrv4: \"IPv4 tartom\u00E1ny\",\n        cidrv6: \"IPv6 tartom\u00E1ny\",\n        base64: \"base64-k\u00F3dolt string\",\n        base64url: \"base64url-k\u00F3dolt string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 sz\u00E1m\",\n        jwt: \"JWT\",\n        template_literal: \"bemenet\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u00C9rv\u00E9nytelen bemenet: a v\u00E1rt \u00E9rt\u00E9k ${issue.expected}, a kapott \u00E9rt\u00E9k ${parsedType(issue.input)}`;\n            // return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u00C9rv\u00E9nytelen bemenet: a v\u00E1rt \u00E9rt\u00E9k ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u00C9rv\u00E9nytelen opci\u00F3: valamelyik \u00E9rt\u00E9k v\u00E1rt ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `T\u00FAl nagy: ${issue.origin ?? \"\u00E9rt\u00E9k\"} m\u00E9rete t\u00FAl nagy ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elem\"}`;\n                return `T\u00FAl nagy: a bemeneti \u00E9rt\u00E9k ${issue.origin ?? \"\u00E9rt\u00E9k\"} t\u00FAl nagy: ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `T\u00FAl kicsi: a bemeneti \u00E9rt\u00E9k ${issue.origin} m\u00E9rete t\u00FAl kicsi ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `T\u00FAl kicsi: a bemeneti \u00E9rt\u00E9k ${issue.origin} t\u00FAl kicsi ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u00C9rv\u00E9nytelen string: \"${_issue.prefix}\" \u00E9rt\u00E9kkel kell kezd\u0151dnie`;\n                if (_issue.format === \"ends_with\")\n                    return `\u00C9rv\u00E9nytelen string: \"${_issue.suffix}\" \u00E9rt\u00E9kkel kell v\u00E9gz\u0151dnie`;\n                if (_issue.format === \"includes\")\n                    return `\u00C9rv\u00E9nytelen string: \"${_issue.includes}\" \u00E9rt\u00E9ket kell tartalmaznia`;\n                if (_issue.format === \"regex\")\n                    return `\u00C9rv\u00E9nytelen string: ${_issue.pattern} mint\u00E1nak kell megfelelnie`;\n                return `\u00C9rv\u00E9nytelen ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u00C9rv\u00E9nytelen sz\u00E1m: ${issue.divisor} t\u00F6bbsz\u00F6r\u00F6s\u00E9nek kell lennie`;\n            case \"unrecognized_keys\":\n                return `Ismeretlen kulcs${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u00C9rv\u00E9nytelen kulcs ${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u00C9rv\u00E9nytelen bemenet\";\n            case \"invalid_element\":\n                return `\u00C9rv\u00E9nytelen \u00E9rt\u00E9k: ${issue.origin}`;\n            default:\n                return `\u00C9rv\u00E9nytelen bemenet`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"memiliki\" },\n        file: { unit: \"byte\", verb: \"memiliki\" },\n        array: { unit: \"item\", verb: \"memiliki\" },\n        set: { unit: \"item\", verb: \"memiliki\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"alamat email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"tanggal dan waktu format ISO\",\n        date: \"tanggal format ISO\",\n        time: \"jam format ISO\",\n        duration: \"durasi format ISO\",\n        ipv4: \"alamat IPv4\",\n        ipv6: \"alamat IPv6\",\n        cidrv4: \"rentang alamat IPv4\",\n        cidrv6: \"rentang alamat IPv6\",\n        base64: \"string dengan enkode base64\",\n        base64url: \"string dengan enkode base64url\",\n        json_string: \"string JSON\",\n        e164: \"angka E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Input tidak valid: diharapkan ${issue.expected}, diterima ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input tidak valid: diharapkan ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Pilihan tidak valid: diharapkan salah satu dari ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Terlalu besar: diharapkan ${issue.origin ?? \"value\"} memiliki ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elemen\"}`;\n                return `Terlalu besar: diharapkan ${issue.origin ?? \"value\"} menjadi ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Terlalu kecil: diharapkan ${issue.origin} memiliki ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Terlalu kecil: diharapkan ${issue.origin} menjadi ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `String tidak valid: harus dimulai dengan \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `String tidak valid: harus berakhir dengan \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `String tidak valid: harus menyertakan \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `String tidak valid: harus sesuai pola ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} tidak valid`;\n            }\n            case \"not_multiple_of\":\n                return `Angka tidak valid: harus kelipatan dari ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kunci tidak dikenali ${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kunci tidak valid di ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input tidak valid\";\n            case \"invalid_element\":\n                return `Nilai tidak valid di ${issue.origin}`;\n            default:\n                return `Input tidak valid`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caratteri\", verb: \"avere\" },\n        file: { unit: \"byte\", verb: \"avere\" },\n        array: { unit: \"elementi\", verb: \"avere\" },\n        set: { unit: \"elementi\", verb: \"avere\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"numero\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"vettore\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"indirizzo email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data e ora ISO\",\n        date: \"data ISO\",\n        time: \"ora ISO\",\n        duration: \"durata ISO\",\n        ipv4: \"indirizzo IPv4\",\n        ipv6: \"indirizzo IPv6\",\n        cidrv4: \"intervallo IPv4\",\n        cidrv6: \"intervallo IPv6\",\n        base64: \"stringa codificata in base64\",\n        base64url: \"URL codificata in base64\",\n        json_string: \"stringa JSON\",\n        e164: \"numero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Input non valido: atteso ${issue.expected}, ricevuto ${parsedType(issue.input)}`;\n            // return `Input non valido: atteso ${issue.expected}, ricevuto ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input non valido: atteso ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opzione non valida: atteso uno tra ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Troppo grande: ${issue.origin ?? \"valore\"} deve avere ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementi\"}`;\n                return `Troppo grande: ${issue.origin ?? \"valore\"} deve essere ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Troppo piccolo: ${issue.origin} deve avere ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Troppo piccolo: ${issue.origin} deve essere ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Stringa non valida: deve iniziare con \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Stringa non valida: deve terminare con \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Stringa non valida: deve includere \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Stringa non valida: deve corrispondere al pattern ${_issue.pattern}`;\n                return `Invalid ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Numero non valido: deve essere un multiplo di ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Chiav${issue.keys.length > 1 ? \"i\" : \"e\"} non riconosciut${issue.keys.length > 1 ? \"e\" : \"a\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Chiave non valida in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input non valido\";\n            case \"invalid_element\":\n                return `Valore non valido in ${issue.origin}`;\n            default:\n                return `Input non valido`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u6587\u5B57\", verb: \"\u3067\u3042\u308B\" },\n        file: { unit: \"\u30D0\u30A4\u30C8\", verb: \"\u3067\u3042\u308B\" },\n        array: { unit: \"\u8981\u7D20\", verb: \"\u3067\u3042\u308B\" },\n        set: { unit: \"\u8981\u7D20\", verb: \"\u3067\u3042\u308B\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u6570\u5024\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u914D\u5217\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u5165\u529B\u5024\",\n        email: \"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\",\n        url: \"URL\",\n        emoji: \"\u7D75\u6587\u5B57\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO\u65E5\u6642\",\n        date: \"ISO\u65E5\u4ED8\",\n        time: \"ISO\u6642\u523B\",\n        duration: \"ISO\u671F\u9593\",\n        ipv4: \"IPv4\u30A2\u30C9\u30EC\u30B9\",\n        ipv6: \"IPv6\u30A2\u30C9\u30EC\u30B9\",\n        cidrv4: \"IPv4\u7BC4\u56F2\",\n        cidrv6: \"IPv6\u7BC4\u56F2\",\n        base64: \"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217\",\n        base64url: \"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217\",\n        json_string: \"JSON\u6587\u5B57\u5217\",\n        e164: \"E.164\u756A\u53F7\",\n        jwt: \"JWT\",\n        template_literal: \"\u5165\u529B\u5024\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u7121\u52B9\u306A\u5165\u529B: ${issue.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${parsedType(issue.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u7121\u52B9\u306A\u5165\u529B: ${util.stringifyPrimitive(issue.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`;\n                return `\u7121\u52B9\u306A\u9078\u629E: ${util.joinValues(issue.values, \"\u3001\")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\u4EE5\u4E0B\u3067\u3042\u308B\" : \"\u3088\u308A\u5C0F\u3055\u3044\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u5927\u304D\u3059\u304E\u308B\u5024: ${issue.origin ?? \"\u5024\"}\u306F${issue.maximum.toString()}${sizing.unit ?? \"\u8981\u7D20\"}${adj}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n                return `\u5927\u304D\u3059\u304E\u308B\u5024: ${issue.origin ?? \"\u5024\"}\u306F${issue.maximum.toString()}${adj}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\u4EE5\u4E0A\u3067\u3042\u308B\" : \"\u3088\u308A\u5927\u304D\u3044\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u5C0F\u3055\u3059\u304E\u308B\u5024: ${issue.origin}\u306F${issue.minimum.toString()}${sizing.unit}${adj}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n                return `\u5C0F\u3055\u3059\u304E\u308B\u5024: ${issue.origin}\u306F${issue.minimum.toString()}${adj}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u7121\u52B9\u306A\u6587\u5B57\u5217: \"${_issue.prefix}\"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n                if (_issue.format === \"ends_with\")\n                    return `\u7121\u52B9\u306A\u6587\u5B57\u5217: \"${_issue.suffix}\"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n                if (_issue.format === \"includes\")\n                    return `\u7121\u52B9\u306A\u6587\u5B57\u5217: \"${_issue.includes}\"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n                if (_issue.format === \"regex\")\n                    return `\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${_issue.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n                return `\u7121\u52B9\u306A${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u7121\u52B9\u306A\u6570\u5024: ${issue.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;\n            case \"unrecognized_keys\":\n                return `\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${issue.keys.length > 1 ? \"\u7FA4\" : \"\"}: ${util.joinValues(issue.keys, \"\u3001\")}`;\n            case \"invalid_key\":\n                return `${issue.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;\n            case \"invalid_union\":\n                return \"\u7121\u52B9\u306A\u5165\u529B\";\n            case \"invalid_element\":\n                return `${issue.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;\n            default:\n                return `\u7121\u52B9\u306A\u5165\u529B`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A\", verb: \"\u1782\u17BD\u179A\u1798\u17B6\u1793\" },\n        file: { unit: \"\u1794\u17C3\", verb: \"\u1782\u17BD\u179A\u1798\u17B6\u1793\" },\n        array: { unit: \"\u1792\u17B6\u178F\u17BB\", verb: \"\u1782\u17BD\u179A\u1798\u17B6\u1793\" },\n        set: { unit: \"\u1792\u17B6\u178F\u17BB\", verb: \"\u1782\u17BD\u179A\u1798\u17B6\u1793\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)\" : \"\u179B\u17C1\u1781\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u17A2\u17B6\u179A\u17C1 (Array)\";\n                }\n                if (data === null) {\n                    return \"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\",\n        email: \"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B\",\n        url: \"URL\",\n        emoji: \"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO\",\n        date: \"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO\",\n        time: \"\u1798\u17C9\u17C4\u1784 ISO\",\n        duration: \"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO\",\n        ipv4: \"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4\",\n        ipv6: \"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6\",\n        cidrv4: \"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4\",\n        cidrv6: \"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6\",\n        base64: \"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64\",\n        base64url: \"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url\",\n        json_string: \"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON\",\n        e164: \"\u179B\u17C1\u1781 E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${issue.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${issue.origin ?? \"\u178F\u1798\u17D2\u179B\u17C3\"} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\u1792\u17B6\u178F\u17BB\"}`;\n                return `\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${issue.origin ?? \"\u178F\u1798\u17D2\u179B\u17C3\"} ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${issue.origin} ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${issue.origin} ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${_issue.pattern}`;\n                return `\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${issue.origin}`;\n            case \"invalid_union\":\n                return `\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C`;\n            case \"invalid_element\":\n                return `\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${issue.origin}`;\n            default:\n                return `\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\uBB38\uC790\", verb: \"to have\" },\n        file: { unit: \"\uBC14\uC774\uD2B8\", verb: \"to have\" },\n        array: { unit: \"\uAC1C\", verb: \"to have\" },\n        set: { unit: \"\uAC1C\", verb: \"to have\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\uC785\uB825\",\n        email: \"\uC774\uBA54\uC77C \uC8FC\uC18C\",\n        url: \"URL\",\n        emoji: \"\uC774\uBAA8\uC9C0\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \uB0A0\uC9DC\uC2DC\uAC04\",\n        date: \"ISO \uB0A0\uC9DC\",\n        time: \"ISO \uC2DC\uAC04\",\n        duration: \"ISO \uAE30\uAC04\",\n        ipv4: \"IPv4 \uC8FC\uC18C\",\n        ipv6: \"IPv6 \uC8FC\uC18C\",\n        cidrv4: \"IPv4 \uBC94\uC704\",\n        cidrv6: \"IPv6 \uBC94\uC704\",\n        base64: \"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4\",\n        base64url: \"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4\",\n        json_string: \"JSON \uBB38\uC790\uC5F4\",\n        e164: \"E.164 \uBC88\uD638\",\n        jwt: \"JWT\",\n        template_literal: \"\uC785\uB825\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${issue.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${parsedType(issue.input)}\uC785\uB2C8\uB2E4`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${util.stringifyPrimitive(issue.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`;\n                return `\uC798\uBABB\uB41C \uC635\uC158: ${util.joinValues(issue.values, \"\uB610\uB294 \")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\uC774\uD558\" : \"\uBBF8\uB9CC\";\n                const suffix = adj === \"\uBBF8\uB9CC\" ? \"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4\" : \"\uC5EC\uC57C \uD569\uB2C8\uB2E4\";\n                const sizing = getSizing(issue.origin);\n                const unit = sizing?.unit ?? \"\uC694\uC18C\";\n                if (sizing)\n                    return `${issue.origin ?? \"\uAC12\"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${issue.maximum.toString()}${unit} ${adj}${suffix}`;\n                return `${issue.origin ?? \"\uAC12\"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${issue.maximum.toString()} ${adj}${suffix}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\uC774\uC0C1\" : \"\uCD08\uACFC\";\n                const suffix = adj === \"\uC774\uC0C1\" ? \"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4\" : \"\uC5EC\uC57C \uD569\uB2C8\uB2E4\";\n                const sizing = getSizing(issue.origin);\n                const unit = sizing?.unit ?? \"\uC694\uC18C\";\n                if (sizing) {\n                    return `${issue.origin ?? \"\uAC12\"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${issue.minimum.toString()}${unit} ${adj}${suffix}`;\n                }\n                return `${issue.origin ?? \"\uAC12\"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${issue.minimum.toString()} ${adj}${suffix}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \"${_issue.prefix}\"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \"${_issue.suffix}\"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`;\n                if (_issue.format === \"includes\")\n                    return `\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \"${_issue.includes}\"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`;\n                if (_issue.format === \"regex\")\n                    return `\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${_issue.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`;\n                return `\uC798\uBABB\uB41C ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\uC798\uBABB\uB41C \uC22B\uC790: ${issue.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;\n            case \"unrecognized_keys\":\n                return `\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\uC798\uBABB\uB41C \uD0A4: ${issue.origin}`;\n            case \"invalid_union\":\n                return `\uC798\uBABB\uB41C \uC785\uB825`;\n            case \"invalid_element\":\n                return `\uC798\uBABB\uB41C \uAC12: ${issue.origin}`;\n            default:\n                return `\uC798\uBABB\uB41C \uC785\uB825`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u0437\u043D\u0430\u0446\u0438\", verb: \"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442\" },\n        file: { unit: \"\u0431\u0430\u0458\u0442\u0438\", verb: \"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442\" },\n        array: { unit: \"\u0441\u0442\u0430\u0432\u043A\u0438\", verb: \"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442\" },\n        set: { unit: \"\u0441\u0442\u0430\u0432\u043A\u0438\", verb: \"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u0431\u0440\u043E\u0458\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u043D\u0438\u0437\u0430\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0432\u043D\u0435\u0441\",\n        email: \"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430\",\n        url: \"URL\",\n        emoji: \"\u0435\u043C\u043E\u045F\u0438\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435\",\n        date: \"ISO \u0434\u0430\u0442\u0443\u043C\",\n        time: \"ISO \u0432\u0440\u0435\u043C\u0435\",\n        duration: \"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435\",\n        ipv4: \"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430\",\n        ipv6: \"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430\",\n        cidrv4: \"IPv4 \u043E\u043F\u0441\u0435\u0433\",\n        cidrv6: \"IPv6 \u043E\u043F\u0441\u0435\u0433\",\n        base64: \"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430\",\n        base64url: \"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430\",\n        json_string: \"JSON \u043D\u0438\u0437\u0430\",\n        e164: \"E.164 \u0431\u0440\u043E\u0458\",\n        jwt: \"JWT\",\n        template_literal: \"\u0432\u043D\u0435\u0441\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${issue.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${parsedType(issue.input)}`;\n            // return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Invalid input: expected ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${issue.origin ?? \"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430\"} \u0434\u0430 \u0438\u043C\u0430 ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438\"}`;\n                return `\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${issue.origin ?? \"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430\"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${issue.origin} \u0434\u0430 \u0438\u043C\u0430 ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${issue.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${_issue.pattern}`;\n                return `Invalid ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438\" : \"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441\";\n            case \"invalid_element\":\n                return `\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${issue.origin}`;\n            default:\n                return `\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"aksara\", verb: \"mempunyai\" },\n        file: { unit: \"bait\", verb: \"mempunyai\" },\n        array: { unit: \"elemen\", verb: \"mempunyai\" },\n        set: { unit: \"elemen\", verb: \"mempunyai\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"nombor\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"alamat e-mel\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"tarikh masa ISO\",\n        date: \"tarikh ISO\",\n        time: \"masa ISO\",\n        duration: \"tempoh ISO\",\n        ipv4: \"alamat IPv4\",\n        ipv6: \"alamat IPv6\",\n        cidrv4: \"julat IPv4\",\n        cidrv6: \"julat IPv6\",\n        base64: \"string dikodkan base64\",\n        base64url: \"string dikodkan base64url\",\n        json_string: \"string JSON\",\n        e164: \"nombor E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Input tidak sah: dijangka ${issue.expected}, diterima ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input tidak sah: dijangka ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Pilihan tidak sah: dijangka salah satu daripada ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Terlalu besar: dijangka ${issue.origin ?? \"nilai\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elemen\"}`;\n                return `Terlalu besar: dijangka ${issue.origin ?? \"nilai\"} adalah ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Terlalu kecil: dijangka ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Terlalu kecil: dijangka ${issue.origin} adalah ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `String tidak sah: mesti bermula dengan \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `String tidak sah: mesti berakhir dengan \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `String tidak sah: mesti mengandungi \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `String tidak sah: mesti sepadan dengan corak ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} tidak sah`;\n            }\n            case \"not_multiple_of\":\n                return `Nombor tidak sah: perlu gandaan ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kunci tidak dikenali: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kunci tidak sah dalam ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input tidak sah\";\n            case \"invalid_element\":\n                return `Nilai tidak sah dalam ${issue.origin}`;\n            default:\n                return `Input tidak sah`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tekens\" },\n        file: { unit: \"bytes\" },\n        array: { unit: \"elementen\" },\n        set: { unit: \"elementen\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"getal\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"invoer\",\n        email: \"emailadres\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datum en tijd\",\n        date: \"ISO datum\",\n        time: \"ISO tijd\",\n        duration: \"ISO duur\",\n        ipv4: \"IPv4-adres\",\n        ipv6: \"IPv6-adres\",\n        cidrv4: \"IPv4-bereik\",\n        cidrv6: \"IPv6-bereik\",\n        base64: \"base64-gecodeerde tekst\",\n        base64url: \"base64 URL-gecodeerde tekst\",\n        json_string: \"JSON string\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"invoer\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ongeldige invoer: verwacht ${issue.expected}, ontving ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ongeldige invoer: verwacht ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ongeldige optie: verwacht \u00E9\u00E9n van ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Te lang: verwacht dat ${issue.origin ?? \"waarde\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementen\"} bevat`;\n                return `Te lang: verwacht dat ${issue.origin ?? \"waarde\"} ${adj}${issue.maximum.toString()} is`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Te kort: verwacht dat ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit} bevat`;\n                }\n                return `Te kort: verwacht dat ${issue.origin} ${adj}${issue.minimum.toString()} is`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Ongeldige tekst: moet met \"${_issue.prefix}\" beginnen`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Ongeldige tekst: moet op \"${_issue.suffix}\" eindigen`;\n                if (_issue.format === \"includes\")\n                    return `Ongeldige tekst: moet \"${_issue.includes}\" bevatten`;\n                if (_issue.format === \"regex\")\n                    return `Ongeldige tekst: moet overeenkomen met patroon ${_issue.pattern}`;\n                return `Ongeldig: ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ongeldig getal: moet een veelvoud van ${issue.divisor} zijn`;\n            case \"unrecognized_keys\":\n                return `Onbekende key${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ongeldige key in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ongeldige invoer\";\n            case \"invalid_element\":\n                return `Ongeldige waarde in ${issue.origin}`;\n            default:\n                return `Ongeldige invoer`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tegn\", verb: \"\u00E5 ha\" },\n        file: { unit: \"bytes\", verb: \"\u00E5 ha\" },\n        array: { unit: \"elementer\", verb: \"\u00E5 inneholde\" },\n        set: { unit: \"elementer\", verb: \"\u00E5 inneholde\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"tall\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"liste\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"e-postadresse\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO dato- og klokkeslett\",\n        date: \"ISO-dato\",\n        time: \"ISO-klokkeslett\",\n        duration: \"ISO-varighet\",\n        ipv4: \"IPv4-omr\u00E5de\",\n        ipv6: \"IPv6-omr\u00E5de\",\n        cidrv4: \"IPv4-spekter\",\n        cidrv6: \"IPv6-spekter\",\n        base64: \"base64-enkodet streng\",\n        base64url: \"base64url-enkodet streng\",\n        json_string: \"JSON-streng\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ugyldig input: forventet ${issue.expected}, fikk ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ugyldig verdi: forventet ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ugyldig valg: forventet en av ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `For stor(t): forventet ${issue.origin ?? \"value\"} til \u00E5 ha ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementer\"}`;\n                return `For stor(t): forventet ${issue.origin ?? \"value\"} til \u00E5 ha ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `For lite(n): forventet ${issue.origin} til \u00E5 ha ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `For lite(n): forventet ${issue.origin} til \u00E5 ha ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ugyldig streng: m\u00E5 starte med \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Ugyldig streng: m\u00E5 ende med \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Ugyldig streng: m\u00E5 inneholde \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Ugyldig streng: m\u00E5 matche m\u00F8nsteret ${_issue.pattern}`;\n                return `Ugyldig ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ugyldig tall: m\u00E5 v\u00E6re et multiplum av ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Ukjente n\u00F8kler\" : \"Ukjent n\u00F8kkel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ugyldig n\u00F8kkel i ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ugyldig input\";\n            case \"invalid_element\":\n                return `Ugyldig verdi i ${issue.origin}`;\n            default:\n                return `Ugyldig input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"harf\", verb: \"olmal\u0131d\u0131r\" },\n        file: { unit: \"bayt\", verb: \"olmal\u0131d\u0131r\" },\n        array: { unit: \"unsur\", verb: \"olmal\u0131d\u0131r\" },\n        set: { unit: \"unsur\", verb: \"olmal\u0131d\u0131r\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"numara\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"saf\";\n                }\n                if (data === null) {\n                    return \"gayb\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"giren\",\n        email: \"epostag\u00E2h\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO heng\u00E2m\u0131\",\n        date: \"ISO tarihi\",\n        time: \"ISO zaman\u0131\",\n        duration: \"ISO m\u00FCddeti\",\n        ipv4: \"IPv4 ni\u015F\u00E2n\u0131\",\n        ipv6: \"IPv6 ni\u015F\u00E2n\u0131\",\n        cidrv4: \"IPv4 menzili\",\n        cidrv6: \"IPv6 menzili\",\n        base64: \"base64-\u015Fifreli metin\",\n        base64url: \"base64url-\u015Fifreli metin\",\n        json_string: \"JSON metin\",\n        e164: \"E.164 say\u0131s\u0131\",\n        jwt: \"JWT\",\n        template_literal: \"giren\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `F\u00E2sit giren: umulan ${issue.expected}, al\u0131nan ${parsedType(issue.input)}`;\n            // return `F\u00E2sit giren: umulan ${issue.expected}, al\u0131nan ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `F\u00E2sit giren: umulan ${util.stringifyPrimitive(issue.values[0])}`;\n                return `F\u00E2sit tercih: m\u00FBteberler ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Fazla b\u00FCy\u00FCk: ${issue.origin ?? \"value\"}, ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elements\"} sahip olmal\u0131yd\u0131.`;\n                return `Fazla b\u00FCy\u00FCk: ${issue.origin ?? \"value\"}, ${adj}${issue.maximum.toString()} olmal\u0131yd\u0131.`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Fazla k\u00FC\u00E7\u00FCk: ${issue.origin}, ${adj}${issue.minimum.toString()} ${sizing.unit} sahip olmal\u0131yd\u0131.`;\n                }\n                return `Fazla k\u00FC\u00E7\u00FCk: ${issue.origin}, ${adj}${issue.minimum.toString()} olmal\u0131yd\u0131.`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `F\u00E2sit metin: \"${_issue.prefix}\" ile ba\u015Flamal\u0131.`;\n                if (_issue.format === \"ends_with\")\n                    return `F\u00E2sit metin: \"${_issue.suffix}\" ile bitmeli.`;\n                if (_issue.format === \"includes\")\n                    return `F\u00E2sit metin: \"${_issue.includes}\" ihtiv\u00E2 etmeli.`;\n                if (_issue.format === \"regex\")\n                    return `F\u00E2sit metin: ${_issue.pattern} nak\u015F\u0131na uymal\u0131.`;\n                return `F\u00E2sit ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `F\u00E2sit say\u0131: ${issue.divisor} kat\u0131 olmal\u0131yd\u0131.`;\n            case \"unrecognized_keys\":\n                return `Tan\u0131nmayan anahtar ${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} i\u00E7in tan\u0131nmayan anahtar var.`;\n            case \"invalid_union\":\n                return \"Giren tan\u0131namad\u0131.\";\n            case \"invalid_element\":\n                return `${issue.origin} i\u00E7in tan\u0131nmayan k\u0131ymet var.`;\n            default:\n                return `K\u0131ymet tan\u0131namad\u0131.`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u062A\u0648\u06A9\u064A\", verb: \"\u0648\u0644\u0631\u064A\" },\n        file: { unit: \"\u0628\u0627\u06CC\u067C\u0633\", verb: \"\u0648\u0644\u0631\u064A\" },\n        array: { unit: \"\u062A\u0648\u06A9\u064A\", verb: \"\u0648\u0644\u0631\u064A\" },\n        set: { unit: \"\u062A\u0648\u06A9\u064A\", verb: \"\u0648\u0644\u0631\u064A\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u0639\u062F\u062F\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u0627\u0631\u06D0\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0648\u0631\u0648\u062F\u064A\",\n        email: \"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9\",\n        url: \"\u06CC\u0648 \u0622\u0631 \u0627\u0644\",\n        emoji: \"\u0627\u06CC\u0645\u0648\u062C\u064A\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A\",\n        date: \"\u0646\u06D0\u067C\u0647\",\n        time: \"\u0648\u062E\u062A\",\n        duration: \"\u0645\u0648\u062F\u0647\",\n        ipv4: \"\u062F IPv4 \u067E\u062A\u0647\",\n        ipv6: \"\u062F IPv6 \u067E\u062A\u0647\",\n        cidrv4: \"\u062F IPv4 \u0633\u0627\u062D\u0647\",\n        cidrv6: \"\u062F IPv6 \u0633\u0627\u062D\u0647\",\n        base64: \"base64-encoded \u0645\u062A\u0646\",\n        base64url: \"base64url-encoded \u0645\u062A\u0646\",\n        json_string: \"JSON \u0645\u062A\u0646\",\n        e164: \"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647\",\n        jwt: \"JWT\",\n        template_literal: \"\u0648\u0631\u0648\u062F\u064A\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${issue.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${parsedType(issue.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;\n            case \"invalid_value\":\n                if (issue.values.length === 1) {\n                    return `\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${util.stringifyPrimitive(issue.values[0])} \u0648\u0627\u06CC`;\n                }\n                return `\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${util.joinValues(issue.values, \"|\")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${issue.origin ?? \"\u0627\u0631\u0632\u069A\u062A\"} \u0628\u0627\u06CC\u062F ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u0639\u0646\u0635\u0631\u0648\u0646\u0647\"} \u0648\u0644\u0631\u064A`;\n                }\n                return `\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${issue.origin ?? \"\u0627\u0631\u0632\u069A\u062A\"} \u0628\u0627\u06CC\u062F ${adj}${issue.maximum.toString()} \u0648\u064A`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${issue.origin} \u0628\u0627\u06CC\u062F ${adj}${issue.minimum.toString()} ${sizing.unit} \u0648\u0644\u0631\u064A`;\n                }\n                return `\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${issue.origin} \u0628\u0627\u06CC\u062F ${adj}${issue.minimum.toString()} \u0648\u064A`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F \"${_issue.prefix}\" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`;\n                }\n                if (_issue.format === \"ends_with\") {\n                    return `\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F \"${_issue.suffix}\" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`;\n                }\n                if (_issue.format === \"includes\") {\n                    return `\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \"${_issue.includes}\" \u0648\u0644\u0631\u064A`;\n                }\n                if (_issue.format === \"regex\") {\n                    return `\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${_issue.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`;\n                }\n                return `${Nouns[_issue.format] ?? issue.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`;\n            }\n            case \"not_multiple_of\":\n                return `\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${issue.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;\n            case \"unrecognized_keys\":\n                return `\u0646\u0627\u0633\u0645 ${issue.keys.length > 1 ? \"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647\" : \"\u06A9\u0644\u06CC\u0689\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${issue.origin} \u06A9\u06D0`;\n            case \"invalid_union\":\n                return `\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A`;\n            case \"invalid_element\":\n                return `\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${issue.origin} \u06A9\u06D0`;\n            default:\n                return `\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znak\u00F3w\", verb: \"mie\u0107\" },\n        file: { unit: \"bajt\u00F3w\", verb: \"mie\u0107\" },\n        array: { unit: \"element\u00F3w\", verb: \"mie\u0107\" },\n        set: { unit: \"element\u00F3w\", verb: \"mie\u0107\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"liczba\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"tablica\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"wyra\u017Cenie\",\n        email: \"adres email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data i godzina w formacie ISO\",\n        date: \"data w formacie ISO\",\n        time: \"godzina w formacie ISO\",\n        duration: \"czas trwania ISO\",\n        ipv4: \"adres IPv4\",\n        ipv6: \"adres IPv6\",\n        cidrv4: \"zakres IPv4\",\n        cidrv6: \"zakres IPv6\",\n        base64: \"ci\u0105g znak\u00F3w zakodowany w formacie base64\",\n        base64url: \"ci\u0105g znak\u00F3w zakodowany w formacie base64url\",\n        json_string: \"ci\u0105g znak\u00F3w w formacie JSON\",\n        e164: \"liczba E.164\",\n        jwt: \"JWT\",\n        template_literal: \"wej\u015Bcie\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${issue.expected}, otrzymano ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${issue.origin ?? \"warto\u015B\u0107\"} b\u0119dzie mie\u0107 ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"element\u00F3w\"}`;\n                }\n                return `Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${issue.origin ?? \"warto\u015B\u0107\"} b\u0119dzie wynosi\u0107 ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${issue.origin ?? \"warto\u015B\u0107\"} b\u0119dzie mie\u0107 ${adj}${issue.minimum.toString()} ${sizing.unit ?? \"element\u00F3w\"}`;\n                }\n                return `Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${issue.origin ?? \"warto\u015B\u0107\"} b\u0119dzie wynosi\u0107 ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Nieprawid\u0142owy ci\u0105g znak\u00F3w: musi zaczyna\u0107 si\u0119 od \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Nieprawid\u0142owy ci\u0105g znak\u00F3w: musi ko\u0144czy\u0107 si\u0119 na \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Nieprawid\u0142owy ci\u0105g znak\u00F3w: musi zawiera\u0107 \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Nieprawid\u0142owy ci\u0105g znak\u00F3w: musi odpowiada\u0107 wzorcowi ${_issue.pattern}`;\n                return `Nieprawid\u0142ow(y/a/e) ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Nierozpoznane klucze${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Nieprawid\u0142owy klucz w ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Nieprawid\u0142owe dane wej\u015Bciowe\";\n            case \"invalid_element\":\n                return `Nieprawid\u0142owa warto\u015B\u0107 w ${issue.origin}`;\n            default:\n                return `Nieprawid\u0142owe dane wej\u015Bciowe`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caracteres\", verb: \"ter\" },\n        file: { unit: \"bytes\", verb: \"ter\" },\n        array: { unit: \"itens\", verb: \"ter\" },\n        set: { unit: \"itens\", verb: \"ter\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"n\u00FAmero\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"nulo\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"padr\u00E3o\",\n        email: \"endere\u00E7o de e-mail\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data e hora ISO\",\n        date: \"data ISO\",\n        time: \"hora ISO\",\n        duration: \"dura\u00E7\u00E3o ISO\",\n        ipv4: \"endere\u00E7o IPv4\",\n        ipv6: \"endere\u00E7o IPv6\",\n        cidrv4: \"faixa de IPv4\",\n        cidrv6: \"faixa de IPv6\",\n        base64: \"texto codificado em base64\",\n        base64url: \"URL codificada em base64\",\n        json_string: \"texto JSON\",\n        e164: \"n\u00FAmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Tipo inv\u00E1lido: esperado ${issue.expected}, recebido ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entrada inv\u00E1lida: esperado ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Op\u00E7\u00E3o inv\u00E1lida: esperada uma das ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Muito grande: esperado que ${issue.origin ?? \"valor\"} tivesse ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementos\"}`;\n                return `Muito grande: esperado que ${issue.origin ?? \"valor\"} fosse ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Muito pequeno: esperado que ${issue.origin} tivesse ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Muito pequeno: esperado que ${issue.origin} fosse ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Texto inv\u00E1lido: deve come\u00E7ar com \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Texto inv\u00E1lido: deve terminar com \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Texto inv\u00E1lido: deve incluir \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Texto inv\u00E1lido: deve corresponder ao padr\u00E3o ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} inv\u00E1lido`;\n            }\n            case \"not_multiple_of\":\n                return `N\u00FAmero inv\u00E1lido: deve ser m\u00FAltiplo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Chave${issue.keys.length > 1 ? \"s\" : \"\"} desconhecida${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Chave inv\u00E1lida em ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entrada inv\u00E1lida\";\n            case \"invalid_element\":\n                return `Valor inv\u00E1lido em ${issue.origin}`;\n            default:\n                return `Campo inv\u00E1lido`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nfunction getRussianPlural(count, one, few, many) {\n    const absCount = Math.abs(count);\n    const lastDigit = absCount % 10;\n    const lastTwoDigits = absCount % 100;\n    if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {\n        return many;\n    }\n    if (lastDigit === 1) {\n        return one;\n    }\n    if (lastDigit >= 2 && lastDigit <= 4) {\n        return few;\n    }\n    return many;\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"\u0441\u0438\u043C\u0432\u043E\u043B\",\n                few: \"\u0441\u0438\u043C\u0432\u043E\u043B\u0430\",\n                many: \"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432\",\n            },\n            verb: \"\u0438\u043C\u0435\u0442\u044C\",\n        },\n        file: {\n            unit: {\n                one: \"\u0431\u0430\u0439\u0442\",\n                few: \"\u0431\u0430\u0439\u0442\u0430\",\n                many: \"\u0431\u0430\u0439\u0442\",\n            },\n            verb: \"\u0438\u043C\u0435\u0442\u044C\",\n        },\n        array: {\n            unit: {\n                one: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\",\n                few: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\",\n                many: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432\",\n            },\n            verb: \"\u0438\u043C\u0435\u0442\u044C\",\n        },\n        set: {\n            unit: {\n                one: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\",\n                few: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\",\n                many: \"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432\",\n            },\n            verb: \"\u0438\u043C\u0435\u0442\u044C\",\n        },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u0447\u0438\u0441\u043B\u043E\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u043C\u0430\u0441\u0441\u0438\u0432\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0432\u0432\u043E\u0434\",\n        email: \"email \u0430\u0434\u0440\u0435\u0441\",\n        url: \"URL\",\n        emoji: \"\u044D\u043C\u043E\u0434\u0437\u0438\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F\",\n        date: \"ISO \u0434\u0430\u0442\u0430\",\n        time: \"ISO \u0432\u0440\u0435\u043C\u044F\",\n        duration: \"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\",\n        ipv4: \"IPv4 \u0430\u0434\u0440\u0435\u0441\",\n        ipv6: \"IPv6 \u0430\u0434\u0440\u0435\u0441\",\n        cidrv4: \"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D\",\n        cidrv6: \"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D\",\n        base64: \"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64\",\n        base64url: \"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url\",\n        json_string: \"JSON \u0441\u0442\u0440\u043E\u043A\u0430\",\n        e164: \"\u043D\u043E\u043C\u0435\u0440 E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\u0432\u0432\u043E\u0434\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${issue.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const maxValue = Number(issue.maximum);\n                    const unit = getRussianPlural(maxValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return `\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${issue.origin ?? \"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435\"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${adj}${issue.maximum.toString()} ${unit}`;\n                }\n                return `\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${issue.origin ?? \"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435\"} \u0431\u0443\u0434\u0435\u0442 ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const minValue = Number(issue.minimum);\n                    const unit = getRussianPlural(minValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return `\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${issue.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${adj}${issue.minimum.toString()} ${unit}`;\n                }\n                return `\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${issue.origin} \u0431\u0443\u0434\u0435\u0442 ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${_issue.pattern}`;\n                return `\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${issue.keys.length > 1 ? \"\u044B\u0435\" : \"\u044B\u0439\"} \u043A\u043B\u044E\u0447${issue.keys.length > 1 ? \"\u0438\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435\";\n            case \"invalid_element\":\n                return `\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${issue.origin}`;\n            default:\n                return `\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znakov\", verb: \"imeti\" },\n        file: { unit: \"bajtov\", verb: \"imeti\" },\n        array: { unit: \"elementov\", verb: \"imeti\" },\n        set: { unit: \"elementov\", verb: \"imeti\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u0161tevilo\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"tabela\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"vnos\",\n        email: \"e-po\u0161tni naslov\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datum in \u010Das\",\n        date: \"ISO datum\",\n        time: \"ISO \u010Das\",\n        duration: \"ISO trajanje\",\n        ipv4: \"IPv4 naslov\",\n        ipv6: \"IPv6 naslov\",\n        cidrv4: \"obseg IPv4\",\n        cidrv6: \"obseg IPv6\",\n        base64: \"base64 kodiran niz\",\n        base64url: \"base64url kodiran niz\",\n        json_string: \"JSON niz\",\n        e164: \"E.164 \u0161tevilka\",\n        jwt: \"JWT\",\n        template_literal: \"vnos\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Neveljaven vnos: pri\u010Dakovano ${issue.expected}, prejeto ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Neveljaven vnos: pri\u010Dakovano ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Preveliko: pri\u010Dakovano, da bo ${issue.origin ?? \"vrednost\"} imelo ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementov\"}`;\n                return `Preveliko: pri\u010Dakovano, da bo ${issue.origin ?? \"vrednost\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Premajhno: pri\u010Dakovano, da bo ${issue.origin} imelo ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Premajhno: pri\u010Dakovano, da bo ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Neveljaven niz: mora se za\u010Deti z \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Neveljaven niz: mora se kon\u010Dati z \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Neveljaven niz: mora vsebovati \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Neveljaven niz: mora ustrezati vzorcu ${_issue.pattern}`;\n                return `Neveljaven ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Neprepoznan${issue.keys.length > 1 ? \"i klju\u010Di\" : \" klju\u010D\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Neveljaven klju\u010D v ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Neveljaven vnos\";\n            case \"invalid_element\":\n                return `Neveljavna vrednost v ${issue.origin}`;\n            default:\n                return \"Neveljaven vnos\";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tecken\", verb: \"att ha\" },\n        file: { unit: \"bytes\", verb: \"att ha\" },\n        array: { unit: \"objekt\", verb: \"att inneh\u00E5lla\" },\n        set: { unit: \"objekt\", verb: \"att inneh\u00E5lla\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"antal\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"lista\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"regulj\u00E4rt uttryck\",\n        email: \"e-postadress\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-datum och tid\",\n        date: \"ISO-datum\",\n        time: \"ISO-tid\",\n        duration: \"ISO-varaktighet\",\n        ipv4: \"IPv4-intervall\",\n        ipv6: \"IPv6-intervall\",\n        cidrv4: \"IPv4-spektrum\",\n        cidrv6: \"IPv6-spektrum\",\n        base64: \"base64-kodad str\u00E4ng\",\n        base64url: \"base64url-kodad str\u00E4ng\",\n        json_string: \"JSON-str\u00E4ng\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"mall-literal\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ogiltig inmatning: f\u00F6rv\u00E4ntat ${issue.expected}, fick ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ogiltig inmatning: f\u00F6rv\u00E4ntat ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ogiltigt val: f\u00F6rv\u00E4ntade en av ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `F\u00F6r stor(t): f\u00F6rv\u00E4ntade ${issue.origin ?? \"v\u00E4rdet\"} att ha ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"element\"}`;\n                }\n                return `F\u00F6r stor(t): f\u00F6rv\u00E4ntat ${issue.origin ?? \"v\u00E4rdet\"} att ha ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `F\u00F6r lite(t): f\u00F6rv\u00E4ntade ${issue.origin ?? \"v\u00E4rdet\"} att ha ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `F\u00F6r lite(t): f\u00F6rv\u00E4ntade ${issue.origin ?? \"v\u00E4rdet\"} att ha ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Ogiltig str\u00E4ng: m\u00E5ste b\u00F6rja med \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Ogiltig str\u00E4ng: m\u00E5ste sluta med \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Ogiltig str\u00E4ng: m\u00E5ste inneh\u00E5lla \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Ogiltig str\u00E4ng: m\u00E5ste matcha m\u00F6nstret \"${_issue.pattern}\"`;\n                return `Ogiltig(t) ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ogiltigt tal: m\u00E5ste vara en multipel av ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Ok\u00E4nda nycklar\" : \"Ok\u00E4nd nyckel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ogiltig nyckel i ${issue.origin ?? \"v\u00E4rdet\"}`;\n            case \"invalid_union\":\n                return \"Ogiltig input\";\n            case \"invalid_element\":\n                return `Ogiltigt v\u00E4rde i ${issue.origin ?? \"v\u00E4rdet\"}`;\n            default:\n                return `Ogiltig input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD\", verb: \"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD\" },\n        file: { unit: \"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD\", verb: \"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD\" },\n        array: { unit: \"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD\", verb: \"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD\" },\n        set: { unit: \"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD\", verb: \"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1\" : \"\u0B8E\u0BA3\u0BCD\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u0B85\u0BA3\u0BBF\";\n                }\n                if (data === null) {\n                    return \"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1\",\n        email: \"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD\",\n        date: \"ISO \u0BA4\u0BC7\u0BA4\u0BBF\",\n        time: \"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD\",\n        duration: \"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1\",\n        ipv4: \"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF\",\n        ipv6: \"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF\",\n        cidrv4: \"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1\",\n        cidrv6: \"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1\",\n        base64: \"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD\",\n        base64url: \"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD\",\n        json_string: \"JSON \u0B9A\u0BB0\u0BAE\u0BCD\",\n        e164: \"E.164 \u0B8E\u0BA3\u0BCD\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${issue.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${util.joinValues(issue.values, \"|\")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${issue.origin ?? \"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD\"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;\n                }\n                return `\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${issue.origin ?? \"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1\"} ${adj}${issue.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`; //\n                }\n                return `\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${issue.origin} ${adj}${issue.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: \"${_issue.prefix}\" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;\n                if (_issue.format === \"ends_with\")\n                    return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: \"${_issue.suffix}\" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;\n                if (_issue.format === \"includes\")\n                    return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: \"${_issue.includes}\" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;\n                if (_issue.format === \"regex\")\n                    return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${_issue.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;\n                return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${issue.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;\n            case \"unrecognized_keys\":\n                return `\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${issue.keys.length > 1 ? \"\u0B95\u0BB3\u0BCD\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;\n            case \"invalid_union\":\n                return \"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1\";\n            case \"invalid_element\":\n                return `${issue.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;\n            default:\n                return `\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23\", verb: \"\u0E04\u0E27\u0E23\u0E21\u0E35\" },\n        file: { unit: \"\u0E44\u0E1A\u0E15\u0E4C\", verb: \"\u0E04\u0E27\u0E23\u0E21\u0E35\" },\n        array: { unit: \"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\", verb: \"\u0E04\u0E27\u0E23\u0E21\u0E35\" },\n        set: { unit: \"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\", verb: \"\u0E04\u0E27\u0E23\u0E21\u0E35\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)\" : \"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)\";\n                }\n                if (data === null) {\n                    return \"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19\",\n        email: \"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25\",\n        url: \"URL\",\n        emoji: \"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO\",\n        date: \"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO\",\n        time: \"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO\",\n        duration: \"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO\",\n        ipv4: \"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4\",\n        ipv6: \"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6\",\n        cidrv4: \"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4\",\n        cidrv6: \"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6\",\n        base64: \"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64\",\n        base64url: \"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL\",\n        json_string: \"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON\",\n        e164: \"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)\",\n        jwt: \"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT\",\n        template_literal: \"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${issue.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19\" : \"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${issue.origin ?? \"\u0E04\u0E48\u0E32\"} \u0E04\u0E27\u0E23\u0E21\u0E35${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\"}`;\n                return `\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${issue.origin ?? \"\u0E04\u0E48\u0E32\"} \u0E04\u0E27\u0E23\u0E21\u0E35${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22\" : \"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${issue.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${issue.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 \"${_issue.includes}\" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`;\n                if (_issue.format === \"regex\")\n                    return `\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${_issue.pattern}`;\n                return `\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${issue.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;\n            case \"unrecognized_keys\":\n                return `\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49\";\n            case \"invalid_element\":\n                return `\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${issue.origin}`;\n            default:\n                return `\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"number\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    return t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"olmal\u0131\" },\n        file: { unit: \"bayt\", verb: \"olmal\u0131\" },\n        array: { unit: \"\u00F6\u011Fe\", verb: \"olmal\u0131\" },\n        set: { unit: \"\u00F6\u011Fe\", verb: \"olmal\u0131\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"girdi\",\n        email: \"e-posta adresi\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO tarih ve saat\",\n        date: \"ISO tarih\",\n        time: \"ISO saat\",\n        duration: \"ISO s\u00FCre\",\n        ipv4: \"IPv4 adresi\",\n        ipv6: \"IPv6 adresi\",\n        cidrv4: \"IPv4 aral\u0131\u011F\u0131\",\n        cidrv6: \"IPv6 aral\u0131\u011F\u0131\",\n        base64: \"base64 ile \u015Fifrelenmi\u015F metin\",\n        base64url: \"base64url ile \u015Fifrelenmi\u015F metin\",\n        json_string: \"JSON dizesi\",\n        e164: \"E.164 say\u0131s\u0131\",\n        jwt: \"JWT\",\n        template_literal: \"\u015Eablon dizesi\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ge\u00E7ersiz de\u011Fer: beklenen ${issue.expected}, al\u0131nan ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ge\u00E7ersiz de\u011Fer: beklenen ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ge\u00E7ersiz se\u00E7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u00C7ok b\u00FCy\u00FCk: beklenen ${issue.origin ?? \"de\u011Fer\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u00F6\u011Fe\"}`;\n                return `\u00C7ok b\u00FCy\u00FCk: beklenen ${issue.origin ?? \"de\u011Fer\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u00C7ok k\u00FC\u00E7\u00FCk: beklenen ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                return `\u00C7ok k\u00FC\u00E7\u00FCk: beklenen ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ge\u00E7ersiz metin: \"${_issue.prefix}\" ile ba\u015Flamal\u0131`;\n                if (_issue.format === \"ends_with\")\n                    return `Ge\u00E7ersiz metin: \"${_issue.suffix}\" ile bitmeli`;\n                if (_issue.format === \"includes\")\n                    return `Ge\u00E7ersiz metin: \"${_issue.includes}\" i\u00E7ermeli`;\n                if (_issue.format === \"regex\")\n                    return `Ge\u00E7ersiz metin: ${_issue.pattern} desenine uymal\u0131`;\n                return `Ge\u00E7ersiz ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ge\u00E7ersiz say\u0131: ${issue.divisor} ile tam b\u00F6l\u00FCnebilmeli`;\n            case \"unrecognized_keys\":\n                return `Tan\u0131nmayan anahtar${issue.keys.length > 1 ? \"lar\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} i\u00E7inde ge\u00E7ersiz anahtar`;\n            case \"invalid_union\":\n                return \"Ge\u00E7ersiz de\u011Fer\";\n            case \"invalid_element\":\n                return `${issue.origin} i\u00E7inde ge\u00E7ersiz de\u011Fer`;\n            default:\n                return `Ge\u00E7ersiz de\u011Fer`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432\", verb: \"\u043C\u0430\u0442\u0438\u043C\u0435\" },\n        file: { unit: \"\u0431\u0430\u0439\u0442\u0456\u0432\", verb: \"\u043C\u0430\u0442\u0438\u043C\u0435\" },\n        array: { unit: \"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432\", verb: \"\u043C\u0430\u0442\u0438\u043C\u0435\" },\n        set: { unit: \"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432\", verb: \"\u043C\u0430\u0442\u0438\u043C\u0435\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u0447\u0438\u0441\u043B\u043E\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u043C\u0430\u0441\u0438\u0432\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456\",\n        email: \"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438\",\n        url: \"URL\",\n        emoji: \"\u0435\u043C\u043E\u0434\u0437\u0456\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO\",\n        date: \"\u0434\u0430\u0442\u0430 ISO\",\n        time: \"\u0447\u0430\u0441 ISO\",\n        duration: \"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO\",\n        ipv4: \"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4\",\n        ipv6: \"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6\",\n        cidrv4: \"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4\",\n        cidrv6: \"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6\",\n        base64: \"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64\",\n        base64url: \"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url\",\n        json_string: \"\u0440\u044F\u0434\u043E\u043A JSON\",\n        e164: \"\u043D\u043E\u043C\u0435\u0440 E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${issue.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${parsedType(issue.input)}`;\n            // return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${issue.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${issue.origin ?? \"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432\"}`;\n                return `\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${issue.origin ?? \"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F\"} \u0431\u0443\u0434\u0435 ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${issue.origin} \u0431\u0443\u0434\u0435 ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${_issue.pattern}`;\n                return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${issue.keys.length > 1 ? \"\u0456\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456\";\n            case \"invalid_element\":\n                return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${issue.origin}`;\n            default:\n                return `\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u062D\u0631\u0648\u0641\", verb: \"\u06C1\u0648\u0646\u0627\" },\n        file: { unit: \"\u0628\u0627\u0626\u0679\u0633\", verb: \"\u06C1\u0648\u0646\u0627\" },\n        array: { unit: \"\u0622\u0626\u0679\u0645\u0632\", verb: \"\u06C1\u0648\u0646\u0627\" },\n        set: { unit: \"\u0622\u0626\u0679\u0645\u0632\", verb: \"\u06C1\u0648\u0646\u0627\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\u0646\u0645\u0628\u0631\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u0622\u0631\u06D2\";\n                }\n                if (data === null) {\n                    return \"\u0646\u0644\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0627\u0646 \u067E\u0679\",\n        email: \"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633\",\n        url: \"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644\",\n        emoji: \"\u0627\u06CC\u0645\u0648\u062C\u06CC\",\n        uuid: \"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC\",\n        uuidv4: \"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4\",\n        uuidv6: \"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6\",\n        nanoid: \"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC\",\n        guid: \"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC\",\n        cuid: \"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC\",\n        cuid2: \"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2\",\n        ulid: \"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC\",\n        xid: \"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC\",\n        ksuid: \"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC\",\n        datetime: \"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645\",\n        date: \"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E\",\n        time: \"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A\",\n        duration: \"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A\",\n        ipv4: \"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633\",\n        ipv6: \"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633\",\n        cidrv4: \"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C\",\n        cidrv6: \"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C\",\n        base64: \"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF\",\n        base64url: \"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF\",\n        json_string: \"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF\",\n        e164: \"\u0627\u06CC 164 \u0646\u0645\u0628\u0631\",\n        jwt: \"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC\",\n        template_literal: \"\u0627\u0646 \u067E\u0679\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${issue.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${parsedType(issue.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${util.stringifyPrimitive(issue.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;\n                return `\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${util.joinValues(issue.values, \"|\")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u0628\u06C1\u062A \u0628\u0691\u0627: ${issue.origin ?? \"\u0648\u06CC\u0644\u06CC\u0648\"} \u06A9\u06D2 ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u0639\u0646\u0627\u0635\u0631\"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;\n                return `\u0628\u06C1\u062A \u0628\u0691\u0627: ${issue.origin ?? \"\u0648\u06CC\u0644\u06CC\u0648\"} \u06A9\u0627 ${adj}${issue.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${issue.origin} \u06A9\u06D2 ${adj}${issue.minimum.toString()} ${sizing.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;\n                }\n                return `\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${issue.origin} \u06A9\u0627 ${adj}${issue.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \"${_issue.prefix}\" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \"${_issue.suffix}\" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;\n                if (_issue.format === \"includes\")\n                    return `\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \"${_issue.includes}\" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;\n                if (_issue.format === \"regex\")\n                    return `\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${_issue.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;\n                return `\u063A\u0644\u0637 ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${issue.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;\n            case \"unrecognized_keys\":\n                return `\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${issue.keys.length > 1 ? \"\u0632\" : \"\"}: ${util.joinValues(issue.keys, \"\u060C \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;\n            case \"invalid_union\":\n                return \"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679\";\n            case \"invalid_element\":\n                return `${issue.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;\n            default:\n                return `\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"k\u00FD t\u1EF1\", verb: \"c\u00F3\" },\n        file: { unit: \"byte\", verb: \"c\u00F3\" },\n        array: { unit: \"ph\u1EA7n t\u1EED\", verb: \"c\u00F3\" },\n        set: { unit: \"ph\u1EA7n t\u1EED\", verb: \"c\u00F3\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"s\u1ED1\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"m\u1EA3ng\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u0111\u1EA7u v\u00E0o\",\n        email: \"\u0111\u1ECBa ch\u1EC9 email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ng\u00E0y gi\u1EDD ISO\",\n        date: \"ng\u00E0y ISO\",\n        time: \"gi\u1EDD ISO\",\n        duration: \"kho\u1EA3ng th\u1EDDi gian ISO\",\n        ipv4: \"\u0111\u1ECBa ch\u1EC9 IPv4\",\n        ipv6: \"\u0111\u1ECBa ch\u1EC9 IPv6\",\n        cidrv4: \"d\u1EA3i IPv4\",\n        cidrv6: \"d\u1EA3i IPv6\",\n        base64: \"chu\u1ED7i m\u00E3 h\u00F3a base64\",\n        base64url: \"chu\u1ED7i m\u00E3 h\u00F3a base64url\",\n        json_string: \"chu\u1ED7i JSON\",\n        e164: \"s\u1ED1 E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\u0111\u1EA7u v\u00E0o\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u0110\u1EA7u v\u00E0o kh\u00F4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${issue.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u0110\u1EA7u v\u00E0o kh\u00F4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${util.stringifyPrimitive(issue.values[0])}`;\n                return `T\u00F9y ch\u1ECDn kh\u00F4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\u00E1c gi\u00E1 tr\u1ECB ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Qu\u00E1 l\u1EDBn: mong \u0111\u1EE3i ${issue.origin ?? \"gi\u00E1 tr\u1ECB\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"ph\u1EA7n t\u1EED\"}`;\n                return `Qu\u00E1 l\u1EDBn: mong \u0111\u1EE3i ${issue.origin ?? \"gi\u00E1 tr\u1ECB\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Qu\u00E1 nh\u1ECF: mong \u0111\u1EE3i ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Qu\u00E1 nh\u1ECF: mong \u0111\u1EE3i ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Chu\u1ED7i kh\u00F4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Chu\u1ED7i kh\u00F4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\u00FAc b\u1EB1ng \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Chu\u1ED7i kh\u00F4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Chu\u1ED7i kh\u00F4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} kh\u00F4ng h\u1EE3p l\u1EC7`;\n            }\n            case \"not_multiple_of\":\n                return `S\u1ED1 kh\u00F4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\u00E0 b\u1ED9i s\u1ED1 c\u1EE7a ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kh\u00F3a kh\u00F4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kh\u00F3a kh\u00F4ng h\u1EE3p l\u1EC7 trong ${issue.origin}`;\n            case \"invalid_union\":\n                return \"\u0110\u1EA7u v\u00E0o kh\u00F4ng h\u1EE3p l\u1EC7\";\n            case \"invalid_element\":\n                return `Gi\u00E1 tr\u1ECB kh\u00F4ng h\u1EE3p l\u1EC7 trong ${issue.origin}`;\n            default:\n                return `\u0110\u1EA7u v\u00E0o kh\u00F4ng h\u1EE3p l\u1EC7`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u5B57\u7B26\", verb: \"\u5305\u542B\" },\n        file: { unit: \"\u5B57\u8282\", verb: \"\u5305\u542B\" },\n        array: { unit: \"\u9879\", verb: \"\u5305\u542B\" },\n        set: { unit: \"\u9879\", verb: \"\u5305\u542B\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"\u975E\u6570\u5B57(NaN)\" : \"\u6570\u5B57\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\u6570\u7EC4\";\n                }\n                if (data === null) {\n                    return \"\u7A7A\u503C(null)\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u8F93\u5165\",\n        email: \"\u7535\u5B50\u90AE\u4EF6\",\n        url: \"URL\",\n        emoji: \"\u8868\u60C5\u7B26\u53F7\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO\u65E5\u671F\u65F6\u95F4\",\n        date: \"ISO\u65E5\u671F\",\n        time: \"ISO\u65F6\u95F4\",\n        duration: \"ISO\u65F6\u957F\",\n        ipv4: \"IPv4\u5730\u5740\",\n        ipv6: \"IPv6\u5730\u5740\",\n        cidrv4: \"IPv4\u7F51\u6BB5\",\n        cidrv6: \"IPv6\u7F51\u6BB5\",\n        base64: \"base64\u7F16\u7801\u5B57\u7B26\u4E32\",\n        base64url: \"base64url\u7F16\u7801\u5B57\u7B26\u4E32\",\n        json_string: \"JSON\u5B57\u7B26\u4E32\",\n        e164: \"E.164\u53F7\u7801\",\n        jwt: \"JWT\",\n        template_literal: \"\u8F93\u5165\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${issue.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${issue.origin ?? \"\u503C\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u4E2A\u5143\u7D20\"}`;\n                return `\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${issue.origin ?? \"\u503C\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 \"${_issue.prefix}\" \u5F00\u5934`;\n                if (_issue.format === \"ends_with\")\n                    return `\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 \"${_issue.suffix}\" \u7ED3\u5C3E`;\n                if (_issue.format === \"includes\")\n                    return `\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${_issue.pattern}`;\n                return `\u65E0\u6548${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${issue.divisor} \u7684\u500D\u6570`;\n            case \"unrecognized_keys\":\n                return `\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;\n            case \"invalid_union\":\n                return \"\u65E0\u6548\u8F93\u5165\";\n            case \"invalid_element\":\n                return `${issue.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;\n            default:\n                return `\u65E0\u6548\u8F93\u5165`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\u5B57\u5143\", verb: \"\u64C1\u6709\" },\n        file: { unit: \"\u4F4D\u5143\u7D44\", verb: \"\u64C1\u6709\" },\n        array: { unit: \"\u9805\u76EE\", verb: \"\u64C1\u6709\" },\n        set: { unit: \"\u9805\u76EE\", verb: \"\u64C1\u6709\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\u8F38\u5165\",\n        email: \"\u90F5\u4EF6\u5730\u5740\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \u65E5\u671F\u6642\u9593\",\n        date: \"ISO \u65E5\u671F\",\n        time: \"ISO \u6642\u9593\",\n        duration: \"ISO \u671F\u9593\",\n        ipv4: \"IPv4 \u4F4D\u5740\",\n        ipv6: \"IPv6 \u4F4D\u5740\",\n        cidrv4: \"IPv4 \u7BC4\u570D\",\n        cidrv6: \"IPv6 \u7BC4\u570D\",\n        base64: \"base64 \u7DE8\u78BC\u5B57\u4E32\",\n        base64url: \"base64url \u7DE8\u78BC\u5B57\u4E32\",\n        json_string: \"JSON \u5B57\u4E32\",\n        e164: \"E.164 \u6578\u503C\",\n        jwt: \"JWT\",\n        template_literal: \"\u8F38\u5165\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${issue.expected}\uFF0C\u4F46\u6536\u5230 ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${util.stringifyPrimitive(issue.values[0])}`;\n                return `\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${issue.origin ?? \"\u503C\"} \u61C9\u70BA ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\u500B\u5143\u7D20\"}`;\n                return `\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${issue.origin ?? \"\u503C\"} \u61C9\u70BA ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${issue.origin} \u61C9\u70BA ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${issue.origin} \u61C9\u70BA ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 \"${_issue.prefix}\" \u958B\u982D`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 \"${_issue.suffix}\" \u7D50\u5C3E`;\n                if (_issue.format === \"includes\")\n                    return `\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${_issue.pattern}`;\n                return `\u7121\u6548\u7684 ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${issue.divisor} \u7684\u500D\u6578`;\n            case \"unrecognized_keys\":\n                return `\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${issue.keys.length > 1 ? \"\u5011\" : \"\"}\uFF1A${util.joinValues(issue.keys, \"\u3001\")}`;\n            case \"invalid_key\":\n                return `${issue.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;\n            case \"invalid_union\":\n                return \"\u7121\u6548\u7684\u8F38\u5165\u503C\";\n            case \"invalid_element\":\n                return `${issue.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;\n            default:\n                return `\u7121\u6548\u7684\u8F38\u5165\u503C`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "export const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new Map();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new Map();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            return { ...pm, ...this._map.get(schema) };\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\nexport const globalRegistry = /*@__PURE__*/ registry();\n", "import * as checks from \"./checks.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// export function _refine<T>(\n//   Class: util.SchemaClass<schemas.$ZodCustom>,\n//   fn: (arg: NoInfer<T>) => util.MaybeAsync<unknown>,\n//   _params: string | $ZodCustomParams = {}\n// ): checks.$ZodCheck<T> {\n//   return _custom(Class, fn, _params);\n// }\n// same as _custom but defaults to abort:false\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Pipe = Classes.Pipe ?? schemas.$ZodPipe;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const _Transform = Classes.Transform ?? schemas.$ZodTransform;\n    const tx = new _Transform({\n        type: \"transform\",\n        transform: (input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: tx,\n                });\n                return {};\n            }\n        },\n        error: params.error,\n    });\n    // params.error;\n    const innerPipe = new _Pipe({\n        type: \"pipe\",\n        in: new _String({ type: \"string\", error: params.error }),\n        out: tx,\n        error: params.error,\n    });\n    const outerPipe = new _Pipe({\n        type: \"pipe\",\n        in: innerPipe,\n        out: new _Boolean({\n            type: \"boolean\",\n            error: params.error,\n        }),\n        error: params.error,\n    });\n    return outerPipe;\n}\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n", "import { _array, _tuple, _unknown } from \"./api.js\";\nimport { parse, parseAsync } from \"./parse.js\";\nimport * as schemas from \"./schemas.js\";\nimport { $ZodTuple } from \"./schemas.js\";\nexport class $ZodFunction {\n    constructor(def) {\n        this._def = def;\n        this.def = def;\n    }\n    implement(func) {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implement() must be called with a function\");\n        }\n        const impl = ((...args) => {\n            const parsedArgs = this._def.input ? parse(this._def.input, args, undefined, { callee: impl }) : args;\n            if (!Array.isArray(parsedArgs)) {\n                throw new Error(\"Invalid arguments schema: not an array or tuple schema.\");\n            }\n            const output = func(...parsedArgs);\n            return this._def.output ? parse(this._def.output, output, undefined, { callee: impl }) : output;\n        });\n        return impl;\n    }\n    implementAsync(func) {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implement() must be called with a function\");\n        }\n        const impl = (async (...args) => {\n            const parsedArgs = this._def.input ? await parseAsync(this._def.input, args, undefined, { callee: impl }) : args;\n            if (!Array.isArray(parsedArgs)) {\n                throw new Error(\"Invalid arguments schema: not an array or tuple schema.\");\n            }\n            const output = await func(...parsedArgs);\n            return this._def.output ? parseAsync(this._def.output, output, undefined, { callee: impl }) : output;\n        });\n        return impl;\n    }\n    input(...args) {\n        const F = this.constructor;\n        if (Array.isArray(args[0])) {\n            return new F({\n                type: \"function\",\n                input: new $ZodTuple({\n                    type: \"tuple\",\n                    items: args[0],\n                    rest: args[1],\n                }),\n                output: this._def.output,\n            });\n        }\n        return new F({\n            type: \"function\",\n            input: args[0],\n            output: this._def.output,\n        });\n    }\n    output(output) {\n        const F = this.constructor;\n        return new F({\n            type: \"function\",\n            input: this._def.input,\n            output,\n        });\n    }\n}\nfunction _function(params) {\n    return new $ZodFunction({\n        type: \"function\",\n        input: Array.isArray(params?.input)\n            ? _tuple(schemas.$ZodTuple, params?.input)\n            : (params?.input ?? _array(schemas.$ZodArray, _unknown(schemas.$ZodUnknown))),\n        output: params?.output ?? _unknown(schemas.$ZodUnknown),\n    });\n}\nexport { _function as function };\n", "import { $ZodRegistry, globalRegistry } from \"./registries.js\";\nimport { getEnumValues } from \"./util.js\";\nexport class JSONSchemaGenerator {\n    constructor(params) {\n        this.counter = 0;\n        this.metadataRegistry = params?.metadata ?? globalRegistry;\n        this.target = params?.target ?? \"draft-2020-12\";\n        this.unrepresentable = params?.unrepresentable ?? \"throw\";\n        this.override = params?.override ?? (() => { });\n        this.io = params?.io ?? \"output\";\n        this.seen = new Map();\n    }\n    process(schema, _params = { path: [], schemaPath: [] }) {\n        var _a;\n        const def = schema._zod.def;\n        const formatMap = {\n            guid: \"uuid\",\n            url: \"uri\",\n            datetime: \"date-time\",\n            json_string: \"json-string\",\n            regex: \"\", // do not set\n        };\n        // check for schema in seens\n        const seen = this.seen.get(schema);\n        if (seen) {\n            seen.count++;\n            // check if cycle\n            const isCycle = _params.schemaPath.includes(schema);\n            if (isCycle) {\n                seen.cycle = _params.path;\n            }\n            return seen.schema;\n        }\n        // initialize\n        const result = { schema: {}, count: 1, cycle: undefined, path: _params.path };\n        this.seen.set(schema, result);\n        // custom method overrides default behavior\n        const overrideSchema = schema._zod.toJSONSchema?.();\n        if (overrideSchema) {\n            result.schema = overrideSchema;\n        }\n        else {\n            const params = {\n                ..._params,\n                schemaPath: [..._params.schemaPath, schema],\n                path: _params.path,\n            };\n            const parent = schema._zod.parent;\n            if (parent) {\n                // schema was cloned from another schema\n                result.ref = parent;\n                this.process(parent, params);\n                this.seen.get(parent).isParent = true;\n            }\n            else {\n                const _json = result.schema;\n                switch (def.type) {\n                    case \"string\": {\n                        const json = _json;\n                        json.type = \"string\";\n                        const { minimum, maximum, format, patterns, contentEncoding } = schema._zod\n                            .bag;\n                        if (typeof minimum === \"number\")\n                            json.minLength = minimum;\n                        if (typeof maximum === \"number\")\n                            json.maxLength = maximum;\n                        // custom pattern overrides format\n                        if (format) {\n                            json.format = formatMap[format] ?? format;\n                            if (json.format === \"\")\n                                delete json.format; // empty format is not valid\n                        }\n                        if (contentEncoding)\n                            json.contentEncoding = contentEncoding;\n                        if (patterns && patterns.size > 0) {\n                            const regexes = [...patterns];\n                            if (regexes.length === 1)\n                                json.pattern = regexes[0].source;\n                            else if (regexes.length > 1) {\n                                result.schema.allOf = [\n                                    ...regexes.map((regex) => ({\n                                        ...(this.target === \"draft-7\" ? { type: \"string\" } : {}),\n                                        pattern: regex.source,\n                                    })),\n                                ];\n                            }\n                        }\n                        break;\n                    }\n                    case \"number\": {\n                        const json = _json;\n                        const { minimum, maximum, format, multipleOf, exclusiveMaximum, exclusiveMinimum } = schema._zod.bag;\n                        if (typeof format === \"string\" && format.includes(\"int\"))\n                            json.type = \"integer\";\n                        else\n                            json.type = \"number\";\n                        if (typeof exclusiveMinimum === \"number\")\n                            json.exclusiveMinimum = exclusiveMinimum;\n                        if (typeof minimum === \"number\") {\n                            json.minimum = minimum;\n                            if (typeof exclusiveMinimum === \"number\") {\n                                if (exclusiveMinimum >= minimum)\n                                    delete json.minimum;\n                                else\n                                    delete json.exclusiveMinimum;\n                            }\n                        }\n                        if (typeof exclusiveMaximum === \"number\")\n                            json.exclusiveMaximum = exclusiveMaximum;\n                        if (typeof maximum === \"number\") {\n                            json.maximum = maximum;\n                            if (typeof exclusiveMaximum === \"number\") {\n                                if (exclusiveMaximum <= maximum)\n                                    delete json.maximum;\n                                else\n                                    delete json.exclusiveMaximum;\n                            }\n                        }\n                        if (typeof multipleOf === \"number\")\n                            json.multipleOf = multipleOf;\n                        break;\n                    }\n                    case \"boolean\": {\n                        const json = _json;\n                        json.type = \"boolean\";\n                        break;\n                    }\n                    case \"bigint\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"BigInt cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"symbol\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Symbols cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"null\": {\n                        _json.type = \"null\";\n                        break;\n                    }\n                    case \"any\": {\n                        break;\n                    }\n                    case \"unknown\": {\n                        break;\n                    }\n                    case \"undefined\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Undefined cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"void\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Void cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"never\": {\n                        _json.not = {};\n                        break;\n                    }\n                    case \"date\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Date cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"array\": {\n                        const json = _json;\n                        const { minimum, maximum } = schema._zod.bag;\n                        if (typeof minimum === \"number\")\n                            json.minItems = minimum;\n                        if (typeof maximum === \"number\")\n                            json.maxItems = maximum;\n                        json.type = \"array\";\n                        json.items = this.process(def.element, { ...params, path: [...params.path, \"items\"] });\n                        break;\n                    }\n                    case \"object\": {\n                        const json = _json;\n                        json.type = \"object\";\n                        json.properties = {};\n                        const shape = def.shape; // params.shapeCache.get(schema)!;\n                        for (const key in shape) {\n                            json.properties[key] = this.process(shape[key], {\n                                ...params,\n                                path: [...params.path, \"properties\", key],\n                            });\n                        }\n                        // required keys\n                        const allKeys = new Set(Object.keys(shape));\n                        // const optionalKeys = new Set(def.optional);\n                        const requiredKeys = new Set([...allKeys].filter((key) => {\n                            const v = def.shape[key]._zod;\n                            if (this.io === \"input\") {\n                                return v.optin === undefined;\n                            }\n                            else {\n                                return v.optout === undefined;\n                            }\n                        }));\n                        if (requiredKeys.size > 0) {\n                            json.required = Array.from(requiredKeys);\n                        }\n                        // catchall\n                        if (def.catchall?._zod.def.type === \"never\") {\n                            // strict\n                            json.additionalProperties = false;\n                        }\n                        else if (!def.catchall) {\n                            // regular\n                            if (this.io === \"output\")\n                                json.additionalProperties = false;\n                        }\n                        else if (def.catchall) {\n                            json.additionalProperties = this.process(def.catchall, {\n                                ...params,\n                                path: [...params.path, \"additionalProperties\"],\n                            });\n                        }\n                        break;\n                    }\n                    case \"union\": {\n                        const json = _json;\n                        json.anyOf = def.options.map((x, i) => this.process(x, {\n                            ...params,\n                            path: [...params.path, \"anyOf\", i],\n                        }));\n                        break;\n                    }\n                    case \"intersection\": {\n                        const json = _json;\n                        const a = this.process(def.left, {\n                            ...params,\n                            path: [...params.path, \"allOf\", 0],\n                        });\n                        const b = this.process(def.right, {\n                            ...params,\n                            path: [...params.path, \"allOf\", 1],\n                        });\n                        const isSimpleIntersection = (val) => \"allOf\" in val && Object.keys(val).length === 1;\n                        const allOf = [\n                            ...(isSimpleIntersection(a) ? a.allOf : [a]),\n                            ...(isSimpleIntersection(b) ? b.allOf : [b]),\n                        ];\n                        json.allOf = allOf;\n                        break;\n                    }\n                    case \"tuple\": {\n                        const json = _json;\n                        json.type = \"array\";\n                        const prefixItems = def.items.map((x, i) => this.process(x, { ...params, path: [...params.path, \"prefixItems\", i] }));\n                        if (this.target === \"draft-2020-12\") {\n                            json.prefixItems = prefixItems;\n                        }\n                        else {\n                            json.items = prefixItems;\n                        }\n                        if (def.rest) {\n                            const rest = this.process(def.rest, {\n                                ...params,\n                                path: [...params.path, \"items\"],\n                            });\n                            if (this.target === \"draft-2020-12\") {\n                                json.items = rest;\n                            }\n                            else {\n                                json.additionalItems = rest;\n                            }\n                        }\n                        // additionalItems\n                        if (def.rest) {\n                            json.items = this.process(def.rest, {\n                                ...params,\n                                path: [...params.path, \"items\"],\n                            });\n                        }\n                        // length\n                        const { minimum, maximum } = schema._zod.bag;\n                        if (typeof minimum === \"number\")\n                            json.minItems = minimum;\n                        if (typeof maximum === \"number\")\n                            json.maxItems = maximum;\n                        break;\n                    }\n                    case \"record\": {\n                        const json = _json;\n                        json.type = \"object\";\n                        json.propertyNames = this.process(def.keyType, { ...params, path: [...params.path, \"propertyNames\"] });\n                        json.additionalProperties = this.process(def.valueType, {\n                            ...params,\n                            path: [...params.path, \"additionalProperties\"],\n                        });\n                        break;\n                    }\n                    case \"map\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Map cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"set\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Set cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"enum\": {\n                        const json = _json;\n                        const values = getEnumValues(def.entries);\n                        // Number enums can have both string and number values\n                        if (values.every((v) => typeof v === \"number\"))\n                            json.type = \"number\";\n                        if (values.every((v) => typeof v === \"string\"))\n                            json.type = \"string\";\n                        json.enum = values;\n                        break;\n                    }\n                    case \"literal\": {\n                        const json = _json;\n                        const vals = [];\n                        for (const val of def.values) {\n                            if (val === undefined) {\n                                if (this.unrepresentable === \"throw\") {\n                                    throw new Error(\"Literal `undefined` cannot be represented in JSON Schema\");\n                                }\n                                else {\n                                    // do not add to vals\n                                }\n                            }\n                            else if (typeof val === \"bigint\") {\n                                if (this.unrepresentable === \"throw\") {\n                                    throw new Error(\"BigInt literals cannot be represented in JSON Schema\");\n                                }\n                                else {\n                                    vals.push(Number(val));\n                                }\n                            }\n                            else {\n                                vals.push(val);\n                            }\n                        }\n                        if (vals.length === 0) {\n                            // do nothing (an undefined literal was stripped)\n                        }\n                        else if (vals.length === 1) {\n                            const val = vals[0];\n                            json.type = val === null ? \"null\" : typeof val;\n                            json.const = val;\n                        }\n                        else {\n                            if (vals.every((v) => typeof v === \"number\"))\n                                json.type = \"number\";\n                            if (vals.every((v) => typeof v === \"string\"))\n                                json.type = \"string\";\n                            if (vals.every((v) => typeof v === \"boolean\"))\n                                json.type = \"string\";\n                            if (vals.every((v) => v === null))\n                                json.type = \"null\";\n                            json.enum = vals;\n                        }\n                        break;\n                    }\n                    case \"file\": {\n                        const json = _json;\n                        const file = {\n                            type: \"string\",\n                            format: \"binary\",\n                            contentEncoding: \"binary\",\n                        };\n                        const { minimum, maximum, mime } = schema._zod.bag;\n                        if (minimum !== undefined)\n                            file.minLength = minimum;\n                        if (maximum !== undefined)\n                            file.maxLength = maximum;\n                        if (mime) {\n                            if (mime.length === 1) {\n                                file.contentMediaType = mime[0];\n                                Object.assign(json, file);\n                            }\n                            else {\n                                json.anyOf = mime.map((m) => {\n                                    const mFile = { ...file, contentMediaType: m };\n                                    return mFile;\n                                });\n                            }\n                        }\n                        else {\n                            Object.assign(json, file);\n                        }\n                        // if (this.unrepresentable === \"throw\") {\n                        //   throw new Error(\"File cannot be represented in JSON Schema\");\n                        // }\n                        break;\n                    }\n                    case \"transform\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Transforms cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"nullable\": {\n                        const inner = this.process(def.innerType, params);\n                        _json.anyOf = [inner, { type: \"null\" }];\n                        break;\n                    }\n                    case \"nonoptional\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        break;\n                    }\n                    case \"success\": {\n                        const json = _json;\n                        json.type = \"boolean\";\n                        break;\n                    }\n                    case \"default\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        _json.default = JSON.parse(JSON.stringify(def.defaultValue));\n                        break;\n                    }\n                    case \"prefault\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        if (this.io === \"input\")\n                            _json._prefault = JSON.parse(JSON.stringify(def.defaultValue));\n                        break;\n                    }\n                    case \"catch\": {\n                        // use conditionals\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        let catchValue;\n                        try {\n                            catchValue = def.catchValue(undefined);\n                        }\n                        catch {\n                            throw new Error(\"Dynamic catch values are not supported in JSON Schema\");\n                        }\n                        _json.default = catchValue;\n                        break;\n                    }\n                    case \"nan\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"NaN cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"template_literal\": {\n                        const json = _json;\n                        const pattern = schema._zod.pattern;\n                        if (!pattern)\n                            throw new Error(\"Pattern not found in template literal\");\n                        json.type = \"string\";\n                        json.pattern = pattern.source;\n                        break;\n                    }\n                    case \"pipe\": {\n                        const innerType = this.io === \"input\" ? (def.in._zod.def.type === \"transform\" ? def.out : def.in) : def.out;\n                        this.process(innerType, params);\n                        result.ref = innerType;\n                        break;\n                    }\n                    case \"readonly\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        _json.readOnly = true;\n                        break;\n                    }\n                    // passthrough types\n                    case \"promise\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        break;\n                    }\n                    case \"optional\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        break;\n                    }\n                    case \"lazy\": {\n                        const innerType = schema._zod.innerType;\n                        this.process(innerType, params);\n                        result.ref = innerType;\n                        break;\n                    }\n                    case \"custom\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Custom types cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    default: {\n                        def;\n                    }\n                }\n            }\n        }\n        // metadata\n        const meta = this.metadataRegistry.get(schema);\n        if (meta)\n            Object.assign(result.schema, meta);\n        if (this.io === \"input\" && isTransforming(schema)) {\n            // examples/defaults only apply to output type of pipe\n            delete result.schema.examples;\n            delete result.schema.default;\n        }\n        // set prefault as default\n        if (this.io === \"input\" && result.schema._prefault)\n            (_a = result.schema).default ?? (_a.default = result.schema._prefault);\n        delete result.schema._prefault;\n        // pulling fresh from this.seen in case it was overwritten\n        const _result = this.seen.get(schema);\n        return _result.schema;\n    }\n    emit(schema, _params) {\n        const params = {\n            cycles: _params?.cycles ?? \"ref\",\n            reused: _params?.reused ?? \"inline\",\n            // unrepresentable: _params?.unrepresentable ?? \"throw\",\n            // uri: _params?.uri ?? ((id) => `${id}`),\n            external: _params?.external ?? undefined,\n        };\n        // iterate over seen map;\n        const root = this.seen.get(schema);\n        if (!root)\n            throw new Error(\"Unprocessed schema. This is a bug in Zod.\");\n        // initialize result with root schema fields\n        // Object.assign(result, seen.cached);\n        // returns a ref to the schema\n        // defId will be empty if the ref points to an external schema (or #)\n        const makeURI = (entry) => {\n            // comparing the seen objects because sometimes\n            // multiple schemas map to the same seen object.\n            // e.g. lazy\n            // external is configured\n            const defsSegment = this.target === \"draft-2020-12\" ? \"$defs\" : \"definitions\";\n            if (params.external) {\n                const externalId = params.external.registry.get(entry[0])?.id; // ?? \"__shared\";// `__schema${this.counter++}`;\n                // check if schema is in the external registry\n                const uriGenerator = params.external.uri ?? ((id) => id);\n                if (externalId) {\n                    return { ref: uriGenerator(externalId) };\n                }\n                // otherwise, add to __shared\n                const id = entry[1].defId ?? entry[1].schema.id ?? `schema${this.counter++}`;\n                entry[1].defId = id; // set defId so it will be reused if needed\n                return { defId: id, ref: `${uriGenerator(\"__shared\")}#/${defsSegment}/${id}` };\n            }\n            if (entry[1] === root) {\n                return { ref: \"#\" };\n            }\n            // self-contained schema\n            const uriPrefix = `#`;\n            const defUriPrefix = `${uriPrefix}/${defsSegment}/`;\n            const defId = entry[1].schema.id ?? `__schema${this.counter++}`;\n            return { defId, ref: defUriPrefix + defId };\n        };\n        // stored cached version in `def` property\n        // remove all properties, set $ref\n        const extractToDef = (entry) => {\n            // if the schema is already a reference, do not extract it\n            if (entry[1].schema.$ref) {\n                return;\n            }\n            const seen = entry[1];\n            const { ref, defId } = makeURI(entry);\n            seen.def = { ...seen.schema };\n            // defId won't be set if the schema is a reference to an external schema\n            if (defId)\n                seen.defId = defId;\n            // wipe away all properties except $ref\n            const schema = seen.schema;\n            for (const key in schema) {\n                delete schema[key];\n            }\n            schema.$ref = ref;\n        };\n        // throw on cycles\n        // break cycles\n        if (params.cycles === \"throw\") {\n            for (const entry of this.seen.entries()) {\n                const seen = entry[1];\n                if (seen.cycle) {\n                    throw new Error(\"Cycle detected: \" +\n                        `#/${seen.cycle?.join(\"/\")}/<root>` +\n                        '\\n\\nSet the `cycles` parameter to `\"ref\"` to resolve cyclical schemas with defs.');\n                }\n            }\n        }\n        // extract schemas into $defs\n        for (const entry of this.seen.entries()) {\n            const seen = entry[1];\n            // convert root schema to # $ref\n            if (schema === entry[0]) {\n                extractToDef(entry); // this has special handling for the root schema\n                continue;\n            }\n            // extract schemas that are in the external registry\n            if (params.external) {\n                const ext = params.external.registry.get(entry[0])?.id;\n                if (schema !== entry[0] && ext) {\n                    extractToDef(entry);\n                    continue;\n                }\n            }\n            // extract schemas with `id` meta\n            const id = this.metadataRegistry.get(entry[0])?.id;\n            if (id) {\n                extractToDef(entry);\n                continue;\n            }\n            // break cycles\n            if (seen.cycle) {\n                // any\n                extractToDef(entry);\n                continue;\n            }\n            // extract reused schemas\n            if (seen.count > 1) {\n                if (params.reused === \"ref\") {\n                    extractToDef(entry);\n                    // biome-ignore lint:\n                    continue;\n                }\n            }\n        }\n        // flatten _refs\n        const flattenRef = (zodSchema, params) => {\n            const seen = this.seen.get(zodSchema);\n            const schema = seen.def ?? seen.schema;\n            const _cached = { ...schema };\n            // already seen\n            if (seen.ref === null) {\n                return;\n            }\n            // flatten ref if defined\n            const ref = seen.ref;\n            seen.ref = null; // prevent recursion\n            if (ref) {\n                flattenRef(ref, params);\n                // merge referenced schema into current\n                const refSchema = this.seen.get(ref).schema;\n                if (refSchema.$ref && params.target === \"draft-7\") {\n                    schema.allOf = schema.allOf ?? [];\n                    schema.allOf.push(refSchema);\n                }\n                else {\n                    Object.assign(schema, refSchema);\n                    Object.assign(schema, _cached); // prevent overwriting any fields in the original schema\n                }\n            }\n            // execute overrides\n            if (!seen.isParent)\n                this.override({\n                    zodSchema: zodSchema,\n                    jsonSchema: schema,\n                    path: seen.path ?? [],\n                });\n        };\n        for (const entry of [...this.seen.entries()].reverse()) {\n            flattenRef(entry[0], { target: this.target });\n        }\n        const result = {};\n        if (this.target === \"draft-2020-12\") {\n            result.$schema = \"https://json-schema.org/draft/2020-12/schema\";\n        }\n        else if (this.target === \"draft-7\") {\n            result.$schema = \"http://json-schema.org/draft-07/schema#\";\n        }\n        else {\n            console.warn(`Invalid target: ${this.target}`);\n        }\n        if (params.external?.uri) {\n            const id = params.external.registry.get(schema)?.id;\n            if (!id)\n                throw new Error(\"Schema is missing an `id` property\");\n            result.$id = params.external.uri(id);\n        }\n        Object.assign(result, root.def);\n        // build defs object\n        const defs = params.external?.defs ?? {};\n        for (const entry of this.seen.entries()) {\n            const seen = entry[1];\n            if (seen.def && seen.defId) {\n                defs[seen.defId] = seen.def;\n            }\n        }\n        // set definitions in result\n        if (params.external) {\n        }\n        else {\n            if (Object.keys(defs).length > 0) {\n                if (this.target === \"draft-2020-12\") {\n                    result.$defs = defs;\n                }\n                else {\n                    result.definitions = defs;\n                }\n            }\n        }\n        try {\n            // this \"finalizes\" this schema and ensures all cycles are removed\n            // each call to .emit() is functionally independent\n            // though the seen map is shared\n            return JSON.parse(JSON.stringify(result));\n        }\n        catch (_err) {\n            throw new Error(\"Error converting schema to JSON.\");\n        }\n    }\n}\nexport function toJSONSchema(input, _params) {\n    if (input instanceof $ZodRegistry) {\n        const gen = new JSONSchemaGenerator(_params);\n        const defs = {};\n        for (const entry of input._idmap.entries()) {\n            const [_, schema] = entry;\n            gen.process(schema);\n        }\n        const schemas = {};\n        const external = {\n            registry: input,\n            uri: _params?.uri,\n            defs,\n        };\n        for (const entry of input._idmap.entries()) {\n            const [key, schema] = entry;\n            schemas[key] = gen.emit(schema, {\n                ..._params,\n                external,\n            });\n        }\n        if (Object.keys(defs).length > 0) {\n            const defsSegment = gen.target === \"draft-2020-12\" ? \"$defs\" : \"definitions\";\n            schemas.__shared = {\n                [defsSegment]: defs,\n            };\n        }\n        return { schemas };\n    }\n    const gen = new JSONSchemaGenerator(_params);\n    gen.process(input);\n    return gen.emit(input, _params);\n}\nfunction isTransforming(_schema, _ctx) {\n    const ctx = _ctx ?? { seen: new Set() };\n    if (ctx.seen.has(_schema))\n        return false;\n    ctx.seen.add(_schema);\n    const schema = _schema;\n    const def = schema._zod.def;\n    switch (def.type) {\n        case \"string\":\n        case \"number\":\n        case \"bigint\":\n        case \"boolean\":\n        case \"date\":\n        case \"symbol\":\n        case \"undefined\":\n        case \"null\":\n        case \"any\":\n        case \"unknown\":\n        case \"never\":\n        case \"void\":\n        case \"literal\":\n        case \"enum\":\n        case \"nan\":\n        case \"file\":\n        case \"template_literal\":\n            return false;\n        case \"array\": {\n            return isTransforming(def.element, ctx);\n        }\n        case \"object\": {\n            for (const key in def.shape) {\n                if (isTransforming(def.shape[key], ctx))\n                    return true;\n            }\n            return false;\n        }\n        case \"union\": {\n            for (const option of def.options) {\n                if (isTransforming(option, ctx))\n                    return true;\n            }\n            return false;\n        }\n        case \"intersection\": {\n            return isTransforming(def.left, ctx) || isTransforming(def.right, ctx);\n        }\n        case \"tuple\": {\n            for (const item of def.items) {\n                if (isTransforming(item, ctx))\n                    return true;\n            }\n            if (def.rest && isTransforming(def.rest, ctx))\n                return true;\n            return false;\n        }\n        case \"record\": {\n            return isTransforming(def.keyType, ctx) || isTransforming(def.valueType, ctx);\n        }\n        case \"map\": {\n            return isTransforming(def.keyType, ctx) || isTransforming(def.valueType, ctx);\n        }\n        case \"set\": {\n            return isTransforming(def.valueType, ctx);\n        }\n        // inner types\n        case \"promise\":\n        case \"optional\":\n        case \"nonoptional\":\n        case \"nullable\":\n        case \"readonly\":\n            return isTransforming(def.innerType, ctx);\n        case \"lazy\":\n            return isTransforming(def.getter(), ctx);\n        case \"default\": {\n            return isTransforming(def.innerType, ctx);\n        }\n        case \"prefault\": {\n            return isTransforming(def.innerType, ctx);\n        }\n        case \"custom\": {\n            return false;\n        }\n        case \"transform\": {\n            return true;\n        }\n        case \"pipe\": {\n            return isTransforming(def.in, ctx) || isTransforming(def.out, ctx);\n        }\n        case \"success\": {\n            return false;\n        }\n        case \"catch\": {\n            return false;\n        }\n        default:\n            def;\n    }\n    throw new Error(`Unknown schema type: ${def.type}`);\n}\n", "export {};\n", "import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n", "import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => inst.issues.push(issue),\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => inst.issues.push(...issues),\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n", "import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n", "import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone({\n            ...def,\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }\n        // { parent: true }\n        );\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return literal(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObject.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => def.shape);\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    // inst.nonstrict = () => inst.clone({ ...inst._zod.def, catchall: api.unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType: union([keyType, never()]),\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                _issue.continue ?? (_issue.continue = true);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    const ch = check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Pipe: ZodPipe,\n    Boolean: ZodBoolean,\n    String: ZodString,\n    Transform: ZodTransform,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n", "// Zod 3 compat layer\nimport * as core from \"../core/index.js\";\n/** @deprecated Use the raw string literal codes instead, e.g. \"invalid_type\". */\nexport const ZodIssueCode = {\n    invalid_type: \"invalid_type\",\n    too_big: \"too_big\",\n    too_small: \"too_small\",\n    invalid_format: \"invalid_format\",\n    not_multiple_of: \"not_multiple_of\",\n    unrecognized_keys: \"unrecognized_keys\",\n    invalid_union: \"invalid_union\",\n    invalid_key: \"invalid_key\",\n    invalid_element: \"invalid_element\",\n    invalid_value: \"invalid_value\",\n    custom: \"custom\",\n};\nexport { $brand, config } from \"../core/index.js\";\n/** @deprecated Use `z.config(params)` instead. */\nexport function setErrorMap(map) {\n    core.config({\n        customError: map,\n    });\n}\n/** @deprecated Use `z.config()` instead. */\nexport function getErrorMap() {\n    return core.config().customError;\n}\n/** @deprecated Do not use. Stub definition, only included for zod-to-json-schema compatibility. */\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n", "import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport function string(params) {\n    return core._coercedString(schemas.ZodString, params);\n}\nexport function number(params) {\n    return core._coercedNumber(schemas.ZodNumber, params);\n}\nexport function boolean(params) {\n    return core._coercedBoolean(schemas.ZodBoolean, params);\n}\nexport function bigint(params) {\n    return core._coercedBigint(schemas.ZodBigInt, params);\n}\nexport function date(params) {\n    return core._coercedDate(schemas.ZodDate, params);\n}\n", "var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n", "import seedrandom from \"seedrandom\";\n\nexport class PseudoRandom {\n  private rng: seedrandom.PRNG;\n\n  private static readonly POW36_8 = Math.pow(36, 8); // Pre-compute 36^8\n\n  constructor(seed: number) {\n    this.rng = seedrandom(String(seed));\n  }\n\n  // Generates the next pseudorandom number between 0 and 1.\n  next(): number {\n    return this.rng();\n  }\n\n  // Generates a random integer between min (inclusive) and max (exclusive).\n  nextInt(min: number, max: number): number {\n    return Math.floor(this.rng() * (max - min)) + min;\n  }\n\n  // Generates a random float between min (inclusive) and max (exclusive).\n  nextFloat(min: number, max: number): number {\n    return this.rng() * (max - min) + min;\n  }\n\n  // Generates a random ID (8 characters, alphanumeric).\n  nextID(): string {\n    return Math.floor(this.rng() * PseudoRandom.POW36_8)\n      .toString(36)\n      .padStart(8, \"0\");\n  }\n\n  // Selects a random element from an array.\n  randElement<T>(arr: T[]): T {\n    if (arr.length === 0) {\n      throw new Error(\"array must not be empty\");\n    }\n    return arr[this.nextInt(0, arr.length)];\n  }\n\n  // Selects a random element from a set.\n  randFromSet<T>(set: Set<T>): T {\n    const size = set.size;\n    if (size === 0) {\n      throw new Error(\"set must not be empty\");\n    }\n\n    const index = this.nextInt(0, size);\n    let i = 0;\n    for (const item of set) {\n      if (i === index) {\n        return item;\n      }\n      i++;\n    }\n\n    // This should never happen\n    throw new Error(\"Unexpected error selecting element from set\");\n  }\n\n  // Returns true with probability 1/odds.\n  chance(odds: number): boolean {\n    return this.nextInt(0, odds) === 0;\n  }\n\n  // Returns a shuffled copy of the array using Fisher-Yates algorithm.\n  shuffleArray<T>(array: T[]): T[] {\n    const result = [...array];\n    for (let i = result.length - 1; i > 0; i--) {\n      const j = this.nextInt(0, i + 1);\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n  }\n}\n", "var a=function(a){return\"string\"==typeof a?a.length>0:\"number\"==typeof a},t=function(a,t,o){return void 0===t&&(t=0),void 0===o&&(o=Math.pow(10,t)),Math.round(o*a)/o+0},o=function(a,t,o){return void 0===t&&(t=0),void 0===o&&(o=1),a>o?o:a>t?a:t},r=function(a){var t=a/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},h=function(a){return 255*(a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a)},n=96.422,p=100,M=82.521,u=function(a){var t,r,n={x:.9555766*(t=a).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return r={r:h(.032404542*n.x-.015371385*n.y-.004985314*n.z),g:h(-.00969266*n.x+.018760108*n.y+41556e-8*n.z),b:h(556434e-9*n.x-.002040259*n.y+.010572252*n.z),a:a.a},{r:o(r.r,0,255),g:o(r.g,0,255),b:o(r.b,0,255),a:o(r.a)}},e=function(a){var t=r(a.r),h=r(a.g),u=r(a.b);return function(a){return{x:o(a.x,0,n),y:o(a.y,0,p),z:o(a.z,0,M),a:o(a.a)}}(function(a){return{x:1.0478112*a.x+.0228866*a.y+-.050127*a.z,y:.0295424*a.x+.9904844*a.y+-.0170491*a.z,z:-.0092345*a.x+.0150436*a.y+.7521316*a.z,a:a.a}}({x:100*(.4124564*t+.3575761*h+.1804375*u),y:100*(.2126729*t+.7151522*h+.072175*u),z:100*(.0193339*t+.119192*h+.9503041*u),a:a.a}))},w=216/24389,b=24389/27,i=function(t){var r=t.l,h=t.a,n=t.b,p=t.alpha,M=void 0===p?1:p;if(!a(r)||!a(h)||!a(n))return null;var u=function(a){return{l:o(a.l,0,400),a:a.a,b:a.b,alpha:o(a.alpha)}}({l:Number(r),a:Number(h),b:Number(n),alpha:Number(M)});return l(u)},l=function(a){var t=(a.l+16)/116,o=a.a/500+t,r=t-a.b/200;return u({x:(Math.pow(o,3)>w?Math.pow(o,3):(116*o-16)/b)*n,y:(a.l>8?Math.pow((a.l+16)/116,3):a.l/b)*p,z:(Math.pow(r,3)>w?Math.pow(r,3):(116*r-16)/b)*M,a:a.alpha})};export default function(a,r){a.prototype.toLab=function(){return o=e(this.rgba),h=o.y/p,u=o.z/M,r=(r=o.x/n)>w?Math.cbrt(r):(b*r+16)/116,a={l:116*(h=h>w?Math.cbrt(h):(b*h+16)/116)-16,a:500*(r-h),b:200*(h-(u=u>w?Math.cbrt(u):(b*u+16)/116)),alpha:o.a},{l:t(a.l,2),a:t(a.a,2),b:t(a.b,2),alpha:t(a.alpha,3)};var a,o,r,h,u},a.prototype.delta=function(r){void 0===r&&(r=\"#FFF\");var h=r instanceof a?r:new a(r),n=function(a,t){var o=a.l,r=a.a,h=a.b,n=t.l,p=t.a,M=t.b,u=180/Math.PI,e=Math.PI/180,w=Math.pow(Math.pow(r,2)+Math.pow(h,2),.5),b=Math.pow(Math.pow(p,2)+Math.pow(M,2),.5),i=(o+n)/2,l=Math.pow((w+b)/2,7),c=.5*(1-Math.pow(l/(l+Math.pow(25,7)),.5)),f=r*(1+c),y=p*(1+c),v=Math.pow(Math.pow(f,2)+Math.pow(h,2),.5),x=Math.pow(Math.pow(y,2)+Math.pow(M,2),.5),z=(v+x)/2,s=0===f&&0===h?0:Math.atan2(h,f)*u,d=0===y&&0===M?0:Math.atan2(M,y)*u;s<0&&(s+=360),d<0&&(d+=360);var g=d-s,m=Math.abs(d-s);m>180&&d<=s?g+=360:m>180&&d>s&&(g-=360);var N=s+d;m<=180?N/=2:N=(s+d<360?N+360:N-360)/2;var F=1-.17*Math.cos(e*(N-30))+.24*Math.cos(2*e*N)+.32*Math.cos(e*(3*N+6))-.2*Math.cos(e*(4*N-63)),L=n-o,I=x-v,P=2*Math.sin(e*g/2)*Math.pow(v*x,.5),j=1+.015*Math.pow(i-50,2)/Math.pow(20+Math.pow(i-50,2),.5),k=1+.045*z,q=1+.015*z*F,A=30*Math.exp(-1*Math.pow((N-275)/25,2)),B=-2*Math.pow(l/(l+Math.pow(25,7)),.5)*Math.sin(2*e*A);return Math.pow(Math.pow(L/1/j,2)+Math.pow(I/1/k,2)+Math.pow(P/1/q,2)+B*I*P/(1*k*1*q),.5)}(this.toLab(),h.toLab())/100;return o(t(n,3))},r.object.push([i,\"lab\"])}\n", "var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},a=function(r,t,a){return void 0===t&&(t=0),void 0===a&&(a=Math.pow(10,t)),Math.round(a*r)/a+0},n=function(r,t,a){return void 0===t&&(t=0),void 0===a&&(a=1),r>a?a:r>t?r:t},u=function(r){var t=r/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},h=function(r){return 255*(r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r)},o=96.422,e=100,c=82.521,i=function(r){var t,a,u={x:.9555766*(t=r).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return a={r:h(.032404542*u.x-.015371385*u.y-.004985314*u.z),g:h(-.00969266*u.x+.018760108*u.y+41556e-8*u.z),b:h(556434e-9*u.x-.002040259*u.y+.010572252*u.z),a:r.a},{r:n(a.r,0,255),g:n(a.g,0,255),b:n(a.b,0,255),a:n(a.a)}},l=function(r){var t=u(r.r),a=u(r.g),h=u(r.b);return function(r){return{x:n(r.x,0,o),y:n(r.y,0,e),z:n(r.z,0,c),a:n(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*t+.3575761*a+.1804375*h),y:100*(.2126729*t+.7151522*a+.072175*h),z:100*(.0193339*t+.119192*a+.9503041*h),a:r.a}))},f=216/24389,b=24389/27,d=function(r){return{l:n(r.l,0,100),c:r.c,h:(t=r.h,(t=isFinite(t)?t%360:0)>0?t:t+360),a:r.a};var t},p=function(r){return{l:a(r.l,2),c:a(r.c,2),h:a(r.h,2),a:a(r.a,3)}},v=function(r){var a=r.l,n=r.c,u=r.h,h=r.a,o=void 0===h?1:h;if(!t(a)||!t(n)||!t(u))return null;var e=d({l:Number(a),c:Number(n),h:Number(u),a:Number(o)});return M(e)},y=function(r){var t=function(r){var t=l(r),a=t.x/o,n=t.y/e,u=t.z/c;return a=a>f?Math.cbrt(a):(b*a+16)/116,{l:116*(n=n>f?Math.cbrt(n):(b*n+16)/116)-16,a:500*(a-n),b:200*(n-(u=u>f?Math.cbrt(u):(b*u+16)/116)),alpha:t.a}}(r),n=a(t.a,3),u=a(t.b,3),h=Math.atan2(u,n)/Math.PI*180;return{l:t.l,c:Math.sqrt(n*n+u*u),h:h<0?h+360:h,a:t.alpha}},M=function(r){return t={l:r.l,a:r.c*Math.cos(r.h*Math.PI/180),b:r.c*Math.sin(r.h*Math.PI/180),alpha:r.a},n=t.a/500+(a=(t.l+16)/116),u=a-t.b/200,i({x:(Math.pow(n,3)>f?Math.pow(n,3):(116*n-16)/b)*o,y:(t.l>8?Math.pow((t.l+16)/116,3):t.l/b)*e,z:(Math.pow(u,3)>f?Math.pow(u,3):(116*u-16)/b)*c,a:t.alpha});var t,a,n,u},x=/^lch\\(\\s*([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)\\s+([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,s=function(t){var a=x.exec(t);if(!a)return null;var n,u,h=d({l:Number(a[1]),c:Number(a[2]),h:(n=a[3],u=a[4],void 0===u&&(u=\"deg\"),Number(n)*(r[u]||1)),a:void 0===a[5]?1:Number(a[5])/(a[6]?100:1)});return M(h)};export default function(r,t){r.prototype.toLch=function(){return p(y(this.rgba))},r.prototype.toLchString=function(){return r=p(y(this.rgba)),t=r.l,a=r.c,n=r.h,(u=r.a)<1?\"lch(\"+t+\"% \"+a+\" \"+n+\" / \"+u+\")\":\"lch(\"+t+\"% \"+a+\" \"+n+\")\";var r,t,a,n,u},t.string.push([s,\"lch\"]),t.object.push([v,\"lch\"])}\n", "// A is m x n. B is n x p. product is m x p.\nexport default function multiplyMatrices (A, B) {\n\tlet m = A.length;\n\n\tif (!Array.isArray(A[0])) {\n\t\t// A is vector, convert to [[a, b, c, ...]]\n\t\tA = [A];\n\t}\n\n\tif (!Array.isArray(B[0])) {\n\t\t// B is vector, convert to [[a], [b], [c], ...]]\n\t\tB = B.map(x => [x]);\n\t}\n\n\tlet p = B[0].length;\n\tlet B_cols = B[0].map((_, i) => B.map(x => x[i])); // transpose B\n\tlet product = A.map(row => B_cols.map(col => {\n\t\tlet ret = 0;\n\n\t\tif (!Array.isArray(row)) {\n\t\t\tfor (let c of col) {\n\t\t\t\tret += row * c;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tfor (let i = 0; i < row.length; i++) {\n\t\t\tret += row[i] * (col[i] || 0);\n\t\t}\n\n\t\treturn ret;\n\t}));\n\n\tif (m === 1) {\n\t\tproduct = product[0]; // Avoid [[a, b, c, ...]]\n\t}\n\n\tif (p === 1) {\n\t\treturn product.map(x => x[0]); // Avoid [[a], [b], [c], ...]]\n\t}\n\n\treturn product;\n}\n", "/**\n * Various utility functions\n */\n\nexport {default as multiplyMatrices} from \"./multiply-matrices.js\";\n\n/**\n * Check if a value is a string (including a String object)\n * @param {*} str - Value to check\n * @returns {boolean}\n */\nexport function isString (str) {\n\treturn type(str) === \"string\";\n}\n\n/**\n * Determine the internal JavaScript [[Class]] of an object.\n * @param {*} o - Value to check\n * @returns {string}\n */\nexport function type (o) {\n\tlet str = Object.prototype.toString.call(o);\n\n\treturn (str.match(/^\\[object\\s+(.*?)\\]$/)[1] || \"\").toLowerCase();\n}\n\nexport function serializeNumber (n, {precision, unit }) {\n\tif (isNone(n)) {\n\t\treturn \"none\";\n\t}\n\n\treturn toPrecision(n, precision) + (unit ?? \"\");\n}\n\n/**\n * Check if a value corresponds to a none argument\n * @param {*} n - Value to check\n * @returns {boolean}\n */\nexport function isNone (n) {\n\treturn Number.isNaN(n) || (n instanceof Number && n?.none);\n}\n\n/**\n * Replace none values with 0\n */\nexport function skipNone (n) {\n\treturn isNone(n) ? 0 : n;\n}\n\n/**\n * Round a number to a certain number of significant digits\n * @param {number} n - The number to round\n * @param {number} precision - Number of significant digits\n */\nexport function toPrecision (n, precision) {\n\tif (n === 0) {\n\t\treturn 0;\n\t}\n\tlet integer = ~~n;\n\tlet digits = 0;\n\tif (integer && precision) {\n\t\tdigits = ~~Math.log10(Math.abs(integer)) + 1;\n\t}\n\tconst multiplier = 10.0 ** (precision - digits);\n\treturn Math.floor(n * multiplier + 0.5) / multiplier;\n}\n\nconst angleFactor = {\n\tdeg: 1,\n\tgrad: 0.9,\n\trad: 180 / Math.PI,\n\tturn: 360,\n};\n\n/**\n* Parse a CSS function, regardless of its name and arguments\n* @param String str String to parse\n* @return {{name, args, rawArgs}}\n*/\nexport function parseFunction (str) {\n\tif (!str) {\n\t\treturn;\n\t}\n\n\tstr = str.trim();\n\n\tconst isFunctionRegex = /^([a-z]+)\\((.+?)\\)$/i;\n\tconst isNumberRegex = /^-?[\\d.]+$/;\n\tconst unitValueRegex = /%|deg|g?rad|turn$/;\n\tconst singleArgument = /\\/?\\s*(none|[-\\w.]+(?:%|deg|g?rad|turn)?)/g;\n\tlet parts = str.match(isFunctionRegex);\n\n\tif (parts) {\n\t\t// It is a function, parse args\n\t\tlet args = [];\n\t\tparts[2].replace(singleArgument, ($0, rawArg) => {\n\t\t\tlet match = rawArg.match(unitValueRegex);\n\t\t\tlet arg = rawArg;\n\n\t\t\tif (match) {\n\t\t\t\tlet unit = match[0];\n\t\t\t\t// Drop unit from value\n\t\t\t\tlet unitlessArg = arg.slice(0, -unit.length);\n\n\t\t\t\tif (unit === \"%\") {\n\t\t\t\t\t// Convert percentages to 0-1 numbers\n\t\t\t\t\targ = new Number(unitlessArg / 100);\n\t\t\t\t\targ.type = \"<percentage>\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Multiply angle by appropriate factor for its unit\n\t\t\t\t\targ = new Number(unitlessArg * angleFactor[unit]);\n\t\t\t\t\targ.type = \"<angle>\";\n\t\t\t\t\targ.unit = unit;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (isNumberRegex.test(arg)) {\n\t\t\t\t// Convert numerical args to numbers\n\t\t\t\targ = new Number(arg);\n\t\t\t\targ.type = \"<number>\";\n\t\t\t}\n\t\t\telse if (arg === \"none\") {\n\t\t\t\targ = new Number(NaN);\n\t\t\t\targ.none = true;\n\t\t\t}\n\n\t\t\tif ($0.startsWith(\"/\")) {\n\t\t\t\t// It's alpha\n\t\t\t\targ = arg instanceof Number ? arg : new Number(arg);\n\t\t\t\targ.alpha = true;\n\t\t\t}\n\n\t\t\tif (typeof arg === \"object\" && arg instanceof Number) {\n\t\t\t\targ.raw = rawArg;\n\t\t\t}\n\n\t\t\targs.push(arg);\n\t\t});\n\n\t\treturn {\n\t\t\tname: parts[1].toLowerCase(),\n\t\t\trawName: parts[1],\n\t\t\trawArgs: parts[2],\n\t\t\t// An argument could be (as of css-color-4):\n\t\t\t// a number, percentage, degrees (hue), ident (in color())\n\t\t\targs,\n\t\t};\n\t}\n}\n\nexport function last (arr) {\n\treturn arr[arr.length - 1];\n}\n\nexport function interpolate (start, end, p) {\n\tif (isNaN(start)) {\n\t\treturn end;\n\t}\n\n\tif (isNaN(end)) {\n\t\treturn start;\n\t}\n\n\treturn start + (end - start) * p;\n}\n\nexport function interpolateInv (start, end, value) {\n\treturn (value - start) / (end - start);\n}\n\nexport function mapRange (from, to, value) {\n\treturn interpolate(to[0], to[1], interpolateInv(from[0], from[1], value));\n}\n\nexport function parseCoordGrammar (coordGrammars) {\n\treturn coordGrammars.map(coordGrammar => {\n\t\treturn coordGrammar.split(\"|\").map(type => {\n\t\t\ttype = type.trim();\n\t\t\tlet range = type.match(/^(<[a-z]+>)\\[(-?[.\\d]+),\\s*(-?[.\\d]+)\\]?$/);\n\n\t\t\tif (range) {\n\t\t\t\tlet ret = new String(range[1]);\n\t\t\t\tret.range = [+range[2], +range[3]];\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn type;\n\t\t});\n\t});\n}\n\n/**\n * Clamp value between the minimum and maximum\n * @param {number} min minimum value to return\n * @param {number} val the value to return if it is between min and max\n * @param {number} max maximum value to return\n * @returns number\n */\nexport function clamp (min, val, max) {\n\treturn Math.max(Math.min(max, val), min);\n}\n\n/**\n * Copy sign of one value to another.\n * @param {number} - to number to copy sign to\n * @param {number} - from number to copy sign from\n * @returns number\n */\nexport function copySign (to, from) {\n\treturn Math.sign(to) === Math.sign(from) ? to : -to;\n}\n\n/**\n * Perform pow on a signed number and copy sign to result\n * @param {number} - base the base number\n * @param {number} - exp the exponent\n * @returns number\n */\nexport function spow (base, exp) {\n\treturn copySign(Math.abs(base) ** exp, base);\n}\n\n/**\n * Perform a divide, but return zero if the numerator is zero\n * @param {number} n - the numerator\n * @param {number} d - the denominator\n * @returns number\n */\nexport function zdiv (n, d) {\n\treturn (d === 0) ? 0 : n / d;\n}\n\n/**\n * Perform a bisect on a sorted list and locate the insertion point for\n * a value in arr to maintain sorted order.\n * @param {number[]} arr - array of sorted numbers\n * @param {number} value - value to find insertion point for\n * @param {number} lo - used to specify a the low end of a subset of the list\n * @param {number} hi - used to specify a the high end of a subset of the list\n * @returns number\n */\nexport function bisectLeft (arr, value, lo = 0, hi = arr.length) {\n\twhile (lo < hi) {\n\t\tconst mid = (lo + hi) >> 1;\n\t\tif (arr[mid] < value) {\n\t\t\tlo = mid + 1;\n\t\t}\n\t\telse {\n\t\t\thi = mid;\n\t\t}\n\t}\n\treturn lo;\n}\n", "/**\n * A class for adding deep extensibility to any piece of JS code\n */\nexport class Hooks {\n\tadd (name, callback, first) {\n\t\tif (typeof arguments[0] != \"string\") {\n\t\t\t// Multiple hooks\n\t\t\tfor (var name in arguments[0]) {\n\t\t\t\tthis.add(name, arguments[0][name], arguments[1]);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t(Array.isArray(name) ? name : [name]).forEach(function (name) {\n\t\t\tthis[name] = this[name] || [];\n\n\t\t\tif (callback) {\n\t\t\t\tthis[name][first ? \"unshift\" : \"push\"](callback);\n\t\t\t}\n\t\t}, this);\n\t}\n\n\trun (name, env) {\n\t\tthis[name] = this[name] || [];\n\t\tthis[name].forEach(function (callback) {\n\t\t\tcallback.call(env && env.context ? env.context : env, env);\n\t\t});\n\t}\n}\n\n/**\n * The instance of {@link Hooks} used throughout Color.js\n */\nconst hooks = new Hooks();\n\nexport default hooks;\n", "// Global defaults one may want to configure\nexport default {\n\tgamut_mapping: \"css\",\n\tprecision: 5,\n\tdeltaE: \"76\", // Default deltaE method\n\tverbose: globalThis?.process?.env?.NODE_ENV?.toLowerCase() !== \"test\",\n\twarn: function warn (msg) {\n\t\tif (this.verbose) {\n\t\t\tglobalThis?.console?.warn?.(msg);\n\t\t}\n\t},\n};\n", "import hooks from \"./hooks.js\";\nimport {multiplyMatrices} from \"./util.js\";\n\nexport const WHITES = {\n\t// for compatibility, the four-digit chromaticity-derived ones everyone else uses\n\tD50: [0.3457 / 0.3585, 1.00000, (1.0 - 0.3457 - 0.3585) / 0.3585],\n\tD65: [0.3127 / 0.3290, 1.00000, (1.0 - 0.3127 - 0.3290) / 0.3290],\n};\n\nexport function getWhite (name) {\n\tif (Array.isArray(name)) {\n\t\treturn name;\n\t}\n\n\treturn WHITES[name];\n}\n\n// Adapt XYZ from white point W1 to W2\nexport default function adapt (W1, W2, XYZ, options = {}) {\n\tW1 = getWhite(W1);\n\tW2 = getWhite(W2);\n\n\tif (!W1 || !W2) {\n\t\tthrow new TypeError(`Missing white point to convert ${!W1 ? \"from\" : \"\"}${!W1 && !W2 ? \"/\" : \"\"}${!W2 ? \"to\" : \"\"}`);\n\t}\n\n\tif (W1 === W2) {\n\t\t// Same whitepoints, no conversion needed\n\t\treturn XYZ;\n\t}\n\n\tlet env = {W1, W2, XYZ, options};\n\n\thooks.run(\"chromatic-adaptation-start\", env);\n\n\tif (!env.M) {\n\t\tif (env.W1 === WHITES.D65 && env.W2 === WHITES.D50) {\n\t\t\tenv.M = [\n\t\t\t\t[ 1.0479297925449969, 0.022946870601609652, -0.05019226628920524 ],\n\t\t\t\t[ 0.02962780877005599, 0.9904344267538799, -0.017073799063418826 ],\n\t\t\t\t[ -0.009243040646204504, 0.015055191490298152, 0.7518742814281371 ],\n\t\t\t];\n\t\t}\n\t\telse if (env.W1 === WHITES.D50 && env.W2 === WHITES.D65) {\n\n\t\t\tenv.M = [\n\t\t\t\t[ 0.955473421488075, -0.02309845494876471, 0.06325924320057072 ],\n\t\t\t\t[ -0.0283697093338637, 1.0099953980813041, 0.021041441191917323 ],\n\t\t\t\t[ 0.012314014864481998, -0.020507649298898964, 1.330365926242124 ],\n\t\t\t];\n\t\t}\n\t}\n\n\thooks.run(\"chromatic-adaptation-end\", env);\n\n\tif (env.M) {\n\t\treturn multiplyMatrices(env.M, env.XYZ);\n\t}\n\telse {\n\t\tthrow new TypeError(\"Only Bradford CAT with white points D50 and D65 supported for now.\");\n\t}\n}\n", "import * as util from \"./util.js\";\nimport hooks from \"./hooks.js\";\nimport ColorSpace from \"./space.js\";\nimport defaults from \"./defaults.js\";\n\nconst noneTypes = new Set([\"<number>\", \"<percentage>\", \"<angle>\"]);\n\n/**\n * Validates the coordinates of a color against a format's coord grammar and\n * maps the coordinates to the range or refRange of the coordinates.\n * @param {ColorSpace} space - Colorspace the coords are in\n * @param {object} format - the format object to validate against\n * @param {string} name - the name of the color function. e.g. \"oklab\" or \"color\"\n * @returns {object[]} - an array of type metadata for each coordinate\n */\nfunction coerceCoords (space, format, name, coords) {\n\tlet types = Object.entries(space.coords).map(([id, coordMeta], i) => {\n\t\tlet coordGrammar = format.coordGrammar[i];\n\t\tlet arg = coords[i];\n\t\tlet providedType = arg?.type;\n\n\t\t// Find grammar alternative that matches the provided type\n\t\t// Non-strict equals is intentional because we are comparing w/ string objects\n\t\tlet type;\n\t\tif (arg.none) {\n\t\t\ttype = coordGrammar.find(c => noneTypes.has(c));\n\t\t}\n\t\telse {\n\t\t\ttype = coordGrammar.find(c => c == providedType);\n\t\t}\n\n\t\t// Check that each coord conforms to its grammar\n\t\tif (!type) {\n\t\t\t// Type does not exist in the grammar, throw\n\t\t\tlet coordName = coordMeta.name || id;\n\t\t\tthrow new TypeError(`${providedType ?? arg.raw} not allowed for ${coordName} in ${name}()`);\n\t\t}\n\n\t\tlet fromRange = type.range;\n\n\t\tif (providedType === \"<percentage>\") {\n\t\t\tfromRange ||= [0, 1];\n\t\t}\n\n\t\tlet toRange = coordMeta.range || coordMeta.refRange;\n\n\t\tif (fromRange && toRange) {\n\t\t\tcoords[i] = util.mapRange(fromRange, toRange, coords[i]);\n\t\t}\n\n\t\treturn type;\n\t});\n\n\treturn types;\n}\n\n\n/**\n * Convert a CSS Color string to a color object\n * @param {string} str\n * @param {object} [options]\n * @param {object} [options.meta] - Object for additional information about the parsing\n * @returns {Color}\n */\nexport default function parse (str, {meta} = {}) {\n\tlet env = {\"str\": String(str)?.trim()};\n\thooks.run(\"parse-start\", env);\n\n\tif (env.color) {\n\t\treturn env.color;\n\t}\n\n\tenv.parsed = util.parseFunction(env.str);\n\n\tif (env.parsed) {\n\t\t// Is a functional syntax\n\t\tlet name = env.parsed.name;\n\n\t\tif (name === \"color\") {\n\t\t\t// color() function\n\t\t\tlet id = env.parsed.args.shift();\n\t\t\t// Check against both <dashed-ident> and <ident> versions\n\t\t\tlet alternateId = id.startsWith(\"--\") ? id.substring(2) : `--${id}`;\n\t\t\tlet ids = [id, alternateId];\n\t\t\tlet alpha = env.parsed.rawArgs.indexOf(\"/\") > 0 ? env.parsed.args.pop() : 1;\n\n\t\t\tfor (let space of ColorSpace.all) {\n\t\t\t\tlet colorSpec = space.getFormat(\"color\");\n\n\t\t\t\tif (colorSpec) {\n\t\t\t\t\tif (ids.includes(colorSpec.id) || colorSpec.ids?.filter((specId) => ids.includes(specId)).length) {\n\t\t\t\t\t\t// From https://drafts.csswg.org/css-color-4/#color-function\n\t\t\t\t\t\t// If more <number>s or <percentage>s are provided than parameters that the colorspace takes, the excess <number>s at the end are ignored.\n\t\t\t\t\t\t// If less <number>s or <percentage>s are provided than parameters that the colorspace takes, the missing parameters default to 0. (This is particularly convenient for multichannel printers where the additional inks are spot colors or varnishes that most colors on the page wont use.)\n\t\t\t\t\t\tconst coords = Object.keys(space.coords).map((_, i) => env.parsed.args[i] || 0);\n\n\t\t\t\t\t\tlet types;\n\n\t\t\t\t\t\tif (colorSpec.coordGrammar) {\n\t\t\t\t\t\t\ttypes = coerceCoords(space, colorSpec, \"color\", coords);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (meta) {\n\t\t\t\t\t\t\tObject.assign(meta, {formatId: \"color\", types});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (colorSpec.id.startsWith(\"--\") && !id.startsWith(\"--\")) {\n\t\t\t\t\t\t\tdefaults.warn(`${space.name} is a non-standard space and not currently supported in the CSS spec. ` +\n\t\t\t\t\t\t\t              `Use prefixed color(${colorSpec.id}) instead of color(${id}).`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (id.startsWith(\"--\") && !colorSpec.id.startsWith(\"--\")) {\n\t\t\t\t\t\t\tdefaults.warn(`${space.name} is a standard space and supported in the CSS spec. ` +\n\t\t\t\t\t\t\t              `Use color(${colorSpec.id}) instead of prefixed color(${id}).`);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {spaceId: space.id, coords, alpha};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Not found\n\t\t\tlet didYouMean = \"\";\n\t\t\tlet registryId = id in ColorSpace.registry ? id : alternateId;\n\t\t\tif (registryId in ColorSpace.registry) {\n\t\t\t\t// Used color space id instead of color() id, these are often different\n\t\t\t\tlet cssId = ColorSpace.registry[registryId].formats?.color?.id;\n\n\t\t\t\tif (cssId) {\n\t\t\t\t\tdidYouMean = `Did you mean color(${cssId})?`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthrow new TypeError(`Cannot parse color(${id}). ` + (didYouMean || \"Missing a plugin?\"));\n\t\t}\n\t\telse {\n\t\t\tfor (let space of ColorSpace.all) {\n\t\t\t\t// color space specific function\n\t\t\t\tlet format = space.getFormat(name);\n\t\t\t\tif (format && format.type === \"function\") {\n\t\t\t\t\tlet alpha = 1;\n\n\t\t\t\t\tif (format.lastAlpha || util.last(env.parsed.args).alpha) {\n\t\t\t\t\t\talpha = env.parsed.args.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet coords = env.parsed.args;\n\n\t\t\t\t\tlet types;\n\n\t\t\t\t\tif (format.coordGrammar) {\n\t\t\t\t\t\ttypes = coerceCoords(space, format, name, coords);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (meta) {\n\t\t\t\t\t\tObject.assign(meta, {formatId: format.name, types});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspaceId: space.id,\n\t\t\t\t\t\tcoords, alpha,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\t// Custom, colorspace-specific format\n\t\tfor (let space of ColorSpace.all) {\n\t\t\tfor (let formatId in space.formats) {\n\t\t\t\tlet format = space.formats[formatId];\n\n\t\t\t\tif (format.type !== \"custom\") {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (format.test && !format.test(env.str)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet color = format.parse(env.str);\n\n\t\t\t\tif (color) {\n\t\t\t\t\tcolor.alpha ??= 1;\n\n\t\t\t\t\tif (meta) {\n\t\t\t\t\t\tmeta.formatId = formatId;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// If we're here, we couldn't parse\n\tthrow new TypeError(`Could not parse ${str} as a color. Missing a plugin?`);\n}\n", "import ColorSpace from \"./space.js\";\nimport {isString} from \"./util.js\";\nimport parse from \"./parse.js\";\n\n/**\n * Resolves a color reference (object or string) to a plain color object\n * @param {Color | {space, coords, alpha} | string | Array<Color | {space, coords, alpha} | string> } color\n * @returns {{space, coords, alpha} | Array<{space, coords, alpha}}>\n */\nexport default function getColor (color) {\n\tif (Array.isArray(color)) {\n\t\treturn color.map(getColor);\n\t}\n\n\tif (!color) {\n\t\tthrow new TypeError(\"Empty color reference\");\n\t}\n\n\tif (isString(color)) {\n\t\tcolor = parse(color);\n\t}\n\n\t// Object fixup\n\tlet space = color.space || color.spaceId;\n\n\tif (!(space instanceof ColorSpace)) {\n\t\t// Convert string id to color space object\n\t\tcolor.space = ColorSpace.get(space);\n\t}\n\n\tif (color.alpha === undefined) {\n\t\tcolor.alpha = 1;\n\t}\n\n\treturn color;\n}\n", "import {type, parseCoordGrammar, serializeNumber, mapRange} from \"./util.js\";\nimport {getWhite} from \"./adapt.js\";\nimport hooks from \"./hooks.js\";\nimport getColor from \"./getColor.js\";\n\nconst  = .000075;\n\n/**\n * Class to represent a color space\n */\nexport default class ColorSpace {\n\tconstructor (options) {\n\t\tthis.id = options.id;\n\t\tthis.name = options.name;\n\t\tthis.base = options.base ? ColorSpace.get(options.base) : null;\n\t\tthis.aliases = options.aliases;\n\n\t\tif (this.base) {\n\t\t\tthis.fromBase = options.fromBase;\n\t\t\tthis.toBase = options.toBase;\n\t\t}\n\n\t\t// Coordinate metadata\n\n\t\tlet coords = options.coords ?? this.base.coords;\n\n\t\tfor (let name in coords) {\n\t\t\tif (!(\"name\" in coords[name])) {\n\t\t\t\tcoords[name].name = name;\n\t\t\t}\n\t\t}\n\t\tthis.coords = coords;\n\n\t\t// White point\n\n\t\tlet white = options.white ?? this.base.white ?? \"D65\";\n\t\tthis.white = getWhite(white);\n\n\t\t// Sort out formats\n\n\t\tthis.formats = options.formats ?? {};\n\n\t\tfor (let name in this.formats) {\n\t\t\tlet format = this.formats[name];\n\t\t\tformat.type ||= \"function\";\n\t\t\tformat.name ||= name;\n\t\t}\n\n\t\tif (!this.formats.color?.id) {\n\t\t\tthis.formats.color = {\n\t\t\t\t...this.formats.color ?? {},\n\t\t\t\tid: options.cssId || this.id,\n\t\t\t};\n\t\t}\n\n\t\t// Gamut space\n\n\t\tif (options.gamutSpace) {\n\t\t\t// Gamut space explicitly specified\n\t\t\tthis.gamutSpace = options.gamutSpace === \"self\" ? this : ColorSpace.get(options.gamutSpace);\n\t\t}\n\t\telse {\n\t\t\t// No gamut space specified, calculate a sensible default\n\t\t\tif (this.isPolar) {\n\t\t\t\t// Do not check gamut through polar coordinates\n\t\t\t\tthis.gamutSpace = this.base;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.gamutSpace =  this;\n\t\t\t}\n\t\t}\n\n\t\t// Optimize inGamut for unbounded spaces\n\t\tif (this.gamutSpace.isUnbounded) {\n\t\t\tthis.inGamut = (coords, options) => {\n\t\t\t\treturn true;\n\t\t\t};\n\t\t}\n\n\t\t// Other stuff\n\t\tthis.referred = options.referred;\n\n\t\t// Compute ancestors and store them, since they will never change\n\t\tObject.defineProperty(this, \"path\", {\n\t\t\tvalue: getPath(this).reverse(),\n\t\t\twritable: false,\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t});\n\n\t\thooks.run(\"colorspace-init-end\", this);\n\t}\n\n\tinGamut (coords, {epsilon = } = {}) {\n\t\tif (!this.equals(this.gamutSpace)) {\n\t\t\tcoords = this.to(this.gamutSpace, coords);\n\t\t\treturn this.gamutSpace.inGamut(coords, {epsilon});\n\t\t}\n\n\t\tlet coordMeta = Object.values(this.coords);\n\n\t\treturn coords.every((c, i) => {\n\t\t\tlet meta = coordMeta[i];\n\n\t\t\tif (meta.type !== \"angle\" && meta.range) {\n\t\t\t\tif (Number.isNaN(c)) {\n\t\t\t\t\t// NaN is always in gamut\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet [min, max] = meta.range;\n\t\t\t\treturn (min === undefined || c >= min - epsilon)\n\t\t\t\t    && (max === undefined || c <= max + epsilon);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tget isUnbounded () {\n\t\treturn Object.values(this.coords).every(coord => !(\"range\" in coord));\n\t}\n\n\tget cssId () {\n\t\treturn this.formats?.color?.id || this.id;\n\t}\n\n\tget isPolar () {\n\t\tfor (let id in this.coords) {\n\t\t\tif (this.coords[id].type === \"angle\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetFormat (format) {\n\t\tif (typeof format === \"object\") {\n\t\t\tformat = processFormat(format, this);\n\t\t\treturn format;\n\t\t}\n\n\t\tlet ret;\n\t\tif (format === \"default\") {\n\t\t\t// Get first format\n\t\t\tret = Object.values(this.formats)[0];\n\t\t}\n\t\telse {\n\t\t\tret = this.formats[format];\n\t\t}\n\n\t\tif (ret) {\n\t\t\tret = processFormat(ret, this);\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Check if this color space is the same as another color space reference.\n\t * Allows proxying color space objects and comparing color spaces with ids.\n\t * @param {string | ColorSpace} space ColorSpace object or id to compare to\n\t * @returns {boolean}\n\t */\n\tequals (space) {\n\t\tif (!space) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this === space || this.id === space || this.id === space.id;\n\t}\n\n\tto (space, coords) {\n\t\tif (arguments.length === 1) {\n\t\t\tconst color = getColor(space);\n\t\t\t[space, coords] = [color.space, color.coords];\n\t\t}\n\n\t\tspace = ColorSpace.get(space);\n\n\t\tif (this.equals(space)) {\n\t\t\t// Same space, no change needed\n\t\t\treturn coords;\n\t\t}\n\n\t\t// Convert NaN to 0, which seems to be valid in every coordinate of every color space\n\t\tcoords = coords.map(c => Number.isNaN(c) ? 0 : c);\n\n\t\t// Find connection space = lowest common ancestor in the base tree\n\t\tlet myPath = this.path;\n\t\tlet otherPath = space.path;\n\n\t\tlet connectionSpace, connectionSpaceIndex;\n\n\t\tfor (let i = 0; i < myPath.length; i++) {\n\t\t\tif (myPath[i].equals(otherPath[i])) {\n\t\t\t\tconnectionSpace = myPath[i];\n\t\t\t\tconnectionSpaceIndex = i;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!connectionSpace) {\n\t\t\t// This should never happen\n\t\t\tthrow new Error(`Cannot convert between color spaces ${this} and ${space}: no connection space was found`);\n\t\t}\n\n\t\t// Go up from current space to connection space\n\t\tfor (let i = myPath.length - 1; i > connectionSpaceIndex; i--) {\n\t\t\tcoords = myPath[i].toBase(coords);\n\t\t}\n\n\t\t// Go down from connection space to target space\n\t\tfor (let i = connectionSpaceIndex + 1; i < otherPath.length; i++) {\n\t\t\tcoords = otherPath[i].fromBase(coords);\n\t\t}\n\n\t\treturn coords;\n\t}\n\n\tfrom (space, coords) {\n\t\tif (arguments.length === 1) {\n\t\t\tconst color = getColor(space);\n\t\t\t[space, coords] = [color.space, color.coords];\n\t\t}\n\n\t\tspace = ColorSpace.get(space);\n\n\t\treturn space.to(this, coords);\n\t}\n\n\ttoString () {\n\t\treturn `${this.name} (${this.id})`;\n\t}\n\n\tgetMinCoords () {\n\t\tlet ret = [];\n\n\t\tfor (let id in this.coords) {\n\t\t\tlet meta = this.coords[id];\n\t\t\tlet range = meta.range || meta.refRange;\n\t\t\tret.push(range?.min ?? 0);\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\tstatic registry = {};\n\n\t// Returns array of unique color spaces\n\tstatic get all () {\n\t\treturn [...new Set(Object.values(ColorSpace.registry))];\n\t}\n\n\tstatic register (id, space) {\n\t\tif (arguments.length === 1) {\n\t\t\tspace = arguments[0];\n\t\t\tid = space.id;\n\t\t}\n\n\t\tspace = this.get(space);\n\n\t\tif (this.registry[id] && this.registry[id] !== space) {\n\t\t\tthrow new Error(`Duplicate color space registration: '${id}'`);\n\t\t}\n\t\tthis.registry[id] = space;\n\n\t\t// Register aliases when called without an explicit ID.\n\t\tif (arguments.length === 1 && space.aliases) {\n\t\t\tfor (let alias of space.aliases) {\n\t\t\t\tthis.register(alias, space);\n\t\t\t}\n\t\t}\n\n\t\treturn space;\n\t}\n\n\t/**\n\t * Lookup ColorSpace object by name\n\t * @param {ColorSpace | string} name\n\t */\n\tstatic get (space, ...alternatives) {\n\t\tif (!space || space instanceof ColorSpace) {\n\t\t\treturn space;\n\t\t}\n\n\t\tlet argType = type(space);\n\n\t\tif (argType === \"string\") {\n\t\t\t// It's a color space id\n\t\t\tlet ret = ColorSpace.registry[space.toLowerCase()];\n\n\t\t\tif (!ret) {\n\t\t\t\tthrow new TypeError(`No color space found with id = \"${space}\"`);\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tif (alternatives.length) {\n\t\t\treturn ColorSpace.get(...alternatives);\n\t\t}\n\n\t\tthrow new TypeError(`${space} is not a valid color space`);\n\t}\n\n\t/**\n\t * Get metadata about a coordinate of a color space\n\t *\n\t * @static\n\t * @param {Array | string} ref\n\t * @param {ColorSpace | string} [workingSpace]\n\t * @return {Object}\n\t */\n\tstatic resolveCoord (ref, workingSpace) {\n\t\tlet coordType = type(ref);\n\t\tlet space, coord;\n\n\t\tif (coordType === \"string\") {\n\t\t\tif (ref.includes(\".\")) {\n\t\t\t\t// Absolute coordinate\n\t\t\t\t[space, coord] = ref.split(\".\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Relative coordinate\n\t\t\t\t[space, coord] = [, ref];\n\t\t\t}\n\t\t}\n\t\telse if (Array.isArray(ref)) {\n\t\t\t[space, coord] = ref;\n\t\t}\n\t\telse {\n\t\t\t// Object\n\t\t\tspace = ref.space;\n\t\t\tcoord = ref.coordId;\n\t\t}\n\n\t\tspace = ColorSpace.get(space);\n\n\t\tif (!space) {\n\t\t\tspace = workingSpace;\n\t\t}\n\n\t\tif (!space) {\n\t\t\tthrow new TypeError(`Cannot resolve coordinate reference ${ref}: No color space specified and relative references are not allowed here`);\n\t\t}\n\n\t\tcoordType = type(coord);\n\n\t\tif (coordType === \"number\" || coordType === \"string\" && coord >= 0) {\n\t\t\t// Resolve numerical coord\n\t\t\tlet meta = Object.entries(space.coords)[coord];\n\n\t\t\tif (meta) {\n\t\t\t\treturn {space, id: meta[0], index: coord, ...meta[1]};\n\t\t\t}\n\t\t}\n\n\t\tspace = ColorSpace.get(space);\n\n\t\tlet normalizedCoord = coord.toLowerCase();\n\n\t\tlet i = 0;\n\t\tfor (let id in space.coords) {\n\t\t\tlet meta = space.coords[id];\n\n\t\t\tif (id.toLowerCase() === normalizedCoord || meta.name?.toLowerCase() === normalizedCoord) {\n\t\t\t\treturn {space, id, index: i, ...meta};\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\n\t\tthrow new TypeError(`No \"${coord}\" coordinate found in ${space.name}. Its coordinates are: ${Object.keys(space.coords).join(\", \")}`);\n\t}\n\n\tstatic DEFAULT_FORMAT = {\n\t\ttype: \"functions\",\n\t\tname: \"color\",\n\t};\n}\n\nfunction getPath (space) {\n\tlet ret = [space];\n\n\tfor (let s = space; s = s.base;) {\n\t\tret.push(s);\n\t}\n\n\treturn ret;\n}\n\nfunction processFormat (format, {coords} = {}) {\n\tif (format.coords && !format.coordGrammar) {\n\t\tformat.type ||= \"function\";\n\t\tformat.name ||= \"color\";\n\n\t\t// Format has not been processed\n\t\tformat.coordGrammar = parseCoordGrammar(format.coords);\n\n\t\tlet coordFormats = Object.entries(coords).map(([id, coordMeta], i) => {\n\t\t\t// Preferred format for each coord is the first one\n\t\t\tlet outputType = format.coordGrammar[i][0];\n\n\t\t\tlet fromRange = coordMeta.range || coordMeta.refRange;\n\t\t\tlet toRange = outputType.range, suffix = \"\";\n\n\t\t\t// Non-strict equals intentional since outputType could be a string object\n\t\t\tif (outputType == \"<percentage>\") {\n\t\t\t\ttoRange = [0, 100];\n\t\t\t\tsuffix = \"%\";\n\t\t\t}\n\t\t\telse if (outputType == \"<angle>\") {\n\t\t\t\tsuffix = \"deg\";\n\t\t\t}\n\n\t\t\treturn  {fromRange, toRange, suffix};\n\t\t});\n\n\t\tformat.serializeCoords = (coords, precision) => {\n\t\t\treturn coords.map((c, i) => {\n\t\t\t\tlet {fromRange, toRange, suffix} = coordFormats[i];\n\n\t\t\t\tif (fromRange && toRange) {\n\t\t\t\t\tc = mapRange(fromRange, toRange, c);\n\t\t\t\t}\n\n\t\t\t\tc = serializeNumber(c, {precision, unit: suffix});\n\n\t\t\t\treturn c;\n\t\t\t});\n\t\t};\n\t}\n\n\treturn format;\n}\n", "import ColorSpace from \"../space.js\";\n\nexport default new ColorSpace({\n\tid: \"xyz-d65\",\n\tname: \"XYZ D65\",\n\tcoords: {\n\t\tx: {name: \"X\"},\n\t\ty: {name: \"Y\"},\n\t\tz: {name: \"Z\"},\n\t},\n\twhite: \"D65\",\n\tformats: {\n\t\tcolor: {\n\t\t\tids: [\"xyz-d65\", \"xyz\"],\n\t\t},\n\t},\n\taliases: [\"xyz\"],\n});\n", "import ColorSpace from \"./space.js\";\nimport {multiplyMatrices} from \"./util.js\";\nimport adapt from \"./adapt.js\";\nimport XYZ_D65 from \"./spaces/xyz-d65.js\";\n\n/**\n * Convenience class for RGB color spaces\n * @extends {ColorSpace}\n */\nexport default class RGBColorSpace extends ColorSpace {\n\t/**\n\t * Creates a new RGB ColorSpace.\n\t * If coords are not specified, they will use the default RGB coords.\n\t * Instead of `fromBase()` and `toBase()` functions,\n\t * you can specify to/from XYZ matrices and have `toBase()` and `fromBase()` automatically generated.\n\t * @param {*} options - Same options as {@link ColorSpace} plus:\n\t * @param {number[][]} options.toXYZ_M - Matrix to convert to XYZ\n\t * @param {number[][]} options.fromXYZ_M - Matrix to convert from XYZ\n\t */\n\tconstructor (options) {\n\t\tif (!options.coords) {\n\t\t\toptions.coords = {\n\t\t\t\tr: {\n\t\t\t\t\trange: [0, 1],\n\t\t\t\t\tname: \"Red\",\n\t\t\t\t},\n\t\t\t\tg: {\n\t\t\t\t\trange: [0, 1],\n\t\t\t\t\tname: \"Green\",\n\t\t\t\t},\n\t\t\t\tb: {\n\t\t\t\t\trange: [0, 1],\n\t\t\t\t\tname: \"Blue\",\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tif (!options.base) {\n\t\t\toptions.base = XYZ_D65;\n\t\t}\n\n\t\tif (options.toXYZ_M && options.fromXYZ_M) {\n\t\t\toptions.toBase ??= rgb => {\n\t\t\t\tlet xyz = multiplyMatrices(options.toXYZ_M, rgb);\n\n\t\t\t\tif (this.white !== this.base.white) {\n\t\t\t\t\t// Perform chromatic adaptation\n\t\t\t\t\txyz = adapt(this.white, this.base.white, xyz);\n\t\t\t\t}\n\n\t\t\t\treturn xyz;\n\t\t\t};\n\n\t\t\toptions.fromBase ??= xyz => {\n\t\t\t\txyz = adapt(this.base.white, this.white, xyz);\n\t\t\t\treturn multiplyMatrices(options.fromXYZ_M, xyz);\n\t\t\t};\n\t\t}\n\n\t\toptions.referred ??= \"display\";\n\n\t\tsuper(options);\n\t}\n}\n", "import ColorSpace from \"./space.js\";\nimport getColor from \"./getColor.js\";\n\n/**\n * Get the coordinates of a color in any color space\n * @param {Color} color\n * @param {string | ColorSpace} [space = color.space] The color space to convert to. Defaults to the color's current space\n * @returns {number[]} The color coordinates in the given color space\n */\nexport default function getAll (color, space) {\n\tcolor = getColor(color);\n\n\tif (!space || color.space.equals(space)) {\n\t\t// No conversion needed\n\t\treturn color.coords.slice();\n\t}\n\n\tspace = ColorSpace.get(space);\n\treturn space.from(color);\n}\n", "import ColorSpace from \"./space.js\";\nimport getAll from \"./getAll.js\";\nimport getColor from \"./getColor.js\";\n\nexport default function get (color, prop) {\n\tcolor = getColor(color);\n\n\tlet {space, index} = ColorSpace.resolveCoord(prop, color.space);\n\tlet coords = getAll(color, space);\n\treturn coords[index];\n}\n", "import ColorSpace from \"./space.js\";\nimport getColor from \"./getColor.js\";\n\nexport default function setAll (color, space, coords) {\n\tcolor = getColor(color);\n\n\tspace = ColorSpace.get(space);\n\tcolor.coords = space.to(color.space, coords);\n\treturn color;\n}\n\nsetAll.returns = \"color\";\n", "import ColorSpace from \"./space.js\";\nimport getColor from \"./getColor.js\";\nimport get from \"./get.js\";\nimport getAll from \"./getAll.js\";\nimport setAll from \"./setAll.js\";\nimport {type} from \"./util.js\";\n\n// Set properties and return current instance\nexport default function set (color, prop, value) {\n\tcolor = getColor(color);\n\n\tif (arguments.length === 2 && type(arguments[1]) === \"object\") {\n\t\t// Argument is an object literal\n\t\tlet object = arguments[1];\n\t\tfor (let p in object) {\n\t\t\tset(color, p, object[p]);\n\t\t}\n\t}\n\telse {\n\t\tif (typeof value === \"function\") {\n\t\t\tvalue = value(get(color, prop));\n\t\t}\n\n\t\tlet {space, index} = ColorSpace.resolveCoord(prop, color.space);\n\t\tlet coords = getAll(color, space);\n\t\tcoords[index] = value;\n\t\tsetAll(color, space, coords);\n\t}\n\n\treturn color;\n}\n\nset.returns = \"color\";\n", "import ColorSpace from \"../space.js\";\nimport adapt from \"../adapt.js\";\nimport XYZ_D65 from \"./xyz-d65.js\";\n\nexport default new ColorSpace({\n\tid: \"xyz-d50\",\n\tname: \"XYZ D50\",\n\twhite: \"D50\",\n\tbase: XYZ_D65,\n\tfromBase: coords => adapt(XYZ_D65.white, \"D50\", coords),\n\ttoBase: coords => adapt(\"D50\", XYZ_D65.white, coords),\n});\n", "import ColorSpace from \"../space.js\";\nimport {WHITES} from \"../adapt.js\";\nimport xyz_d50 from \"./xyz-d50.js\";\n\n//  *   = 2^3 = 8\nconst  = 216 / 24389;  // 6^3/29^3 == (24/116)^3\nconst 3 = 24 / 116;\nconst  = 24389 / 27;   // 29^3/3^3\n\nlet white = WHITES.D50;\n\nexport default new ColorSpace({\n\tid: \"lab\",\n\tname: \"Lab\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\ta: {\n\t\t\trefRange: [-125, 125],\n\t\t},\n\t\tb: {\n\t\t\trefRange: [-125, 125],\n\t\t},\n\t},\n\n\t// Assuming XYZ is relative to D50, convert to CIE Lab\n\t// from CIE standard, which now defines these as a rational fraction\n\twhite,\n\n\tbase: xyz_d50,\n\t// Convert D50-adapted XYX to Lab\n\t//  CIE 15.3:2004 section 8.2.1.1\n\tfromBase (XYZ) {\n\t\t// compute xyz, which is XYZ scaled relative to reference white\n\t\tlet xyz = XYZ.map((value, i) => value / white[i]);\n\n\t\t// now compute f\n\t\tlet f = xyz.map(value => value >  ? Math.cbrt(value) : ( * value + 16) / 116);\n\n\t\treturn [\n\t\t\t(116 * f[1]) - 16,   // L\n\t\t\t500 * (f[0] - f[1]), // a\n\t\t\t200 * (f[1] - f[2]),  // b\n\t\t];\n\t},\n\t// Convert Lab to D50-adapted XYZ\n\t// Same result as CIE 15.3:2004 Appendix D although the derivation is different\n\t// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n\ttoBase (Lab) {\n\t\t// compute f, starting with the luminance-related term\n\t\tlet f = [];\n\t\tf[1] = (Lab[0] + 16) / 116;\n\t\tf[0] = Lab[1] / 500 + f[1];\n\t\tf[2] = f[1] - Lab[2] / 200;\n\n\t\t// compute xyz\n\t\tlet xyz = [\n\t\t\tf[0]   > 3 ? Math.pow(f[0], 3)                : (116 * f[0] - 16) / ,\n\t\t\tLab[0] > 8  ? Math.pow((Lab[0] + 16) / 116, 3) : Lab[0] / ,\n\t\t\tf[2]   > 3 ? Math.pow(f[2], 3)                : (116 * f[2] - 16) / ,\n\t\t];\n\n\t\t// Compute XYZ by scaling xyz by reference white\n\t\treturn xyz.map((value, i) => value * white[i]);\n\t},\n\n\tformats: {\n\t\t\"lab\": {\n\t\t\tcoords: [\"<number> | <percentage>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"],\n\t\t},\n\t},\n});\n", "export function constrain (angle) {\n\treturn ((angle % 360) + 360) % 360;\n}\n\nexport function adjust (arc, angles) {\n\tif (arc === \"raw\") {\n\t\treturn angles;\n\t}\n\n\tlet [a1, a2] = angles.map(constrain);\n\n\tlet angleDiff = a2 - a1;\n\n\tif (arc === \"increasing\") {\n\t\tif (angleDiff < 0) {\n\t\t\ta2 += 360;\n\t\t}\n\t}\n\telse if (arc === \"decreasing\") {\n\t\tif (angleDiff > 0) {\n\t\t\ta1 += 360;\n\t\t}\n\t}\n\telse if (arc === \"longer\") {\n\t\tif (-180 < angleDiff && angleDiff < 180) {\n\t\t\tif (angleDiff > 0) {\n\t\t\t\ta1 += 360;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ta2 += 360;\n\t\t\t}\n\t\t}\n\t}\n\telse if (arc === \"shorter\") {\n\t\tif (angleDiff > 180) {\n\t\t\ta1 += 360;\n\t\t}\n\t\telse if (angleDiff < -180) {\n\t\t\ta2 += 360;\n\t\t}\n\t}\n\n\treturn [a1, a2];\n}\n", "import ColorSpace from \"../space.js\";\nimport Lab from \"./lab.js\";\nimport {constrain as constrainAngle} from \"../angles.js\";\n\nexport default new ColorSpace({\n\tid: \"lch\",\n\tname: \"LCH\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\tc: {\n\t\t\trefRange: [0, 150],\n\t\t\tname: \"Chroma\",\n\t\t},\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t},\n\n\tbase: Lab,\n\tfromBase (Lab) {\n\t\t// Convert to polar form\n\t\tlet [L, a, b] = Lab;\n\t\tlet hue;\n\t\tconst  = 0.02;\n\n\t\tif (Math.abs(a) <  && Math.abs(b) < ) {\n\t\t\thue = NaN;\n\t\t}\n\t\telse {\n\t\t\thue = Math.atan2(b, a) * 180 / Math.PI;\n\t\t}\n\n\t\treturn [\n\t\t\tL, // L is still L\n\t\t\tMath.sqrt(a ** 2 + b ** 2), // Chroma\n\t\t\tconstrainAngle(hue), // Hue, in degrees [0 to 360)\n\t\t];\n\t},\n\ttoBase (LCH) {\n\t\t// Convert from polar form\n\t\tlet [Lightness, Chroma, Hue] = LCH;\n\t\t// Clamp any negative Chroma\n\t\tif (Chroma < 0) {\n\t\t\tChroma = 0;\n\t\t}\n\t\t// Deal with NaN Hue\n\t\tif (isNaN(Hue)) {\n\t\t\tHue = 0;\n\t\t}\n\t\treturn [\n\t\t\tLightness, // L is still L\n\t\t\tChroma * Math.cos(Hue * Math.PI / 180), // a\n\t\t\tChroma * Math.sin(Hue * Math.PI / 180),  // b\n\t\t];\n\t},\n\n\tformats: {\n\t\t\"lch\": {\n\t\t\tcoords: [\"<number> | <percentage>\", \"<number> | <percentage>\", \"<number> | <angle>\"],\n\t\t},\n\t},\n});\n", "import defaults from \"../defaults.js\";\nimport lab from \"../spaces/lab.js\";\nimport lch from \"../spaces/lch.js\";\nimport getColor from \"../getColor.js\";\n\n// deltaE2000 is a statistically significant improvement\n// and is recommended by the CIE and Idealliance\n// especially for color differences less than 10 deltaE76\n// but is wicked complicated\n// and many implementations have small errors!\n// DeltaE2000 is also discontinuous; in case this\n// matters to you, use deltaECMC instead.\n\nconst Gfactor = 25 ** 7;\nconst  = Math.PI;\nconst r2d = 180 / ;\nconst d2r =  / 180;\n\nfunction pow7 (x) {\n\t// Faster than x ** 7 or Math.pow(x, 7)\n\n\tconst x2 = x * x;\n\tconst x7 = x2 * x2 * x2 * x;\n\n\treturn x7;\n}\n\nexport default function (color, sample, {kL = 1, kC = 1, kH = 1} = {}) {\n\t[color, sample] = getColor([color, sample]);\n\n\t// Given this color as the reference\n\t// and the function parameter as the sample,\n\t// calculate deltaE 2000.\n\n\t// This implementation assumes the parametric\n\t// weighting factors kL, kC and kH\n\t// for the influence of viewing conditions\n\t// are all 1, as sadly seems typical.\n\t// kL should be increased for lightness texture or noise\n\t// and kC increased for chroma noise\n\n\tlet [L1, a1, b1] = lab.from(color);\n\tlet C1 = lch.from(lab, [L1, a1, b1])[1];\n\tlet [L2, a2, b2] = lab.from(sample);\n\tlet C2 = lch.from(lab, [L2, a2, b2])[1];\n\n\t// Check for negative Chroma,\n\t// which might happen through\n\t// direct user input of LCH values\n\n\tif (C1 < 0) {\n\t\tC1 = 0;\n\t}\n\tif (C2 < 0) {\n\t\tC2 = 0;\n\t}\n\n\tlet Cbar = (C1 + C2) / 2; // mean Chroma\n\n\t// calculate a-axis asymmetry factor from mean Chroma\n\t// this turns JND ellipses for near-neutral colors back into circles\n\tlet C7 = pow7(Cbar);\n\n\tlet G = 0.5 * (1 - Math.sqrt(C7 / (C7 + Gfactor)));\n\n\t// scale a axes by asymmetry factor\n\t// this by the way is why there is no Lab2000 colorspace\n\tlet adash1 = (1 + G) * a1;\n\tlet adash2 = (1 + G) * a2;\n\n\t// calculate new Chroma from scaled a and original b axes\n\tlet Cdash1 = Math.sqrt(adash1 ** 2 + b1 ** 2);\n\tlet Cdash2 = Math.sqrt(adash2 ** 2 + b2 ** 2);\n\n\t// calculate new hues, with zero hue for true neutrals\n\t// and in degrees, not radians\n\n\tlet h1 = (adash1 === 0 && b1 === 0) ? 0 : Math.atan2(b1, adash1);\n\tlet h2 = (adash2 === 0 && b2 === 0) ? 0 : Math.atan2(b2, adash2);\n\n\tif (h1 < 0) {\n\t\th1 += 2 * ;\n\t}\n\tif (h2 < 0) {\n\t\th2 += 2 * ;\n\t}\n\n\th1 *= r2d;\n\th2 *= r2d;\n\n\t// Lightness and Chroma differences; sign matters\n\tlet L = L2 - L1;\n\tlet C = Cdash2 - Cdash1;\n\n\t// Hue difference, getting the sign correct\n\tlet hdiff = h2 - h1;\n\tlet hsum = h1 + h2;\n\tlet habs = Math.abs(hdiff);\n\tlet h;\n\n\tif (Cdash1 * Cdash2 === 0) {\n\t\th = 0;\n\t}\n\telse if (habs <= 180) {\n\t\th = hdiff;\n\t}\n\telse if (hdiff > 180) {\n\t\th = hdiff - 360;\n\t}\n\telse if (hdiff < -180) {\n\t\th = hdiff + 360;\n\t}\n\telse {\n\t\tdefaults.warn(\"the unthinkable has happened\");\n\t}\n\n\t// weighted Hue difference, more for larger Chroma\n\tlet H = 2 * Math.sqrt(Cdash2 * Cdash1) * Math.sin(h * d2r / 2);\n\n\t// calculate mean Lightness and Chroma\n\tlet Ldash = (L1 + L2) / 2;\n\tlet Cdash = (Cdash1 + Cdash2) / 2;\n\tlet Cdash7 = pow7(Cdash);\n\n\t// Compensate for non-linearity in the blue region of Lab.\n\t// Four possibilities for hue weighting factor,\n\t// depending on the angles, to get the correct sign\n\tlet hdash;\n\tif (Cdash1 * Cdash2 === 0) {\n\t\thdash = hsum;   // which should be zero\n\t}\n\telse if (habs <= 180) {\n\t\thdash = hsum / 2;\n\t}\n\telse if (hsum < 360) {\n\t\thdash = (hsum + 360) / 2;\n\t}\n\telse {\n\t\thdash = (hsum - 360) / 2;\n\t}\n\n\t// positional corrections to the lack of uniformity of CIELAB\n\t// These are all trying to make JND ellipsoids more like spheres\n\n\t// SL Lightness crispening factor\n\t// a background with L=50 is assumed\n\tlet lsq = (Ldash - 50) ** 2;\n\tlet SL = 1 + ((0.015 * lsq) / Math.sqrt(20 + lsq));\n\n\t// SC Chroma factor, similar to those in CMC and deltaE 94 formulae\n\tlet SC = 1 + 0.045 * Cdash;\n\n\t// Cross term T for blue non-linearity\n\tlet T = 1;\n\tT -= (0.17 * Math.cos((     hdash - 30)  * d2r));\n\tT += (0.24 * Math.cos(  2 * hdash        * d2r));\n\tT += (0.32 * Math.cos(((3 * hdash) + 6)  * d2r));\n\tT -= (0.20 * Math.cos(((4 * hdash) - 63) * d2r));\n\n\t// SH Hue factor depends on Chroma,\n\t// as well as adjusted hue angle like deltaE94.\n\tlet SH = 1 + 0.015 * Cdash * T;\n\n\t// RT Hue rotation term compensates for rotation of JND ellipses\n\t// and Munsell constant hue lines\n\t// in the medium-high Chroma blue region\n\t// (Hue 225 to 315)\n\tlet  = 30 * Math.exp(-1 * (((hdash - 275) / 25) ** 2));\n\tlet RC = 2 * Math.sqrt(Cdash7 / (Cdash7 + Gfactor));\n\tlet RT = -1 * Math.sin(2 *  * d2r) * RC;\n\n\t// Finally calculate the deltaE, term by term as root sume of squares\n\tlet dE = (L / (kL * SL)) ** 2;\n\tdE += (C / (kC * SC)) ** 2;\n\tdE += (H / (kH * SH)) ** 2;\n\tdE += RT * (C / (kC * SC)) * (H / (kH * SH));\n\treturn Math.sqrt(dE);\n\t// Yay!!!\n}\n", "import ColorSpace from \"../space.js\";\nimport {multiplyMatrices} from \"../util.js\";\nimport XYZ_D65 from \"./xyz-d65.js\";\n\n// Recalculated for consistent reference white\n// see https://github.com/w3c/csswg-drafts/issues/6642#issuecomment-943521484\nconst XYZtoLMS_M = [\n\t[ 0.8190224379967030, 0.3619062600528904, -0.1288737815209879 ],\n\t[ 0.0329836539323885, 0.9292868615863434,  0.0361446663506424 ],\n\t[ 0.0481771893596242, 0.2642395317527308,  0.6335478284694309 ],\n];\n// inverse of XYZtoLMS_M\nconst LMStoXYZ_M = [\n\t[  1.2268798758459243, -0.5578149944602171,  0.2813910456659647 ],\n\t[ -0.0405757452148008,  1.1122868032803170, -0.0717110580655164 ],\n\t[ -0.0763729366746601, -0.4214933324022432,  1.5869240198367816 ],\n];\nconst LMStoLab_M = [\n\t[ 0.2104542683093140,  0.7936177747023054, -0.0040720430116193 ],\n\t[ 1.9779985324311684, -2.4285922420485799,  0.4505937096174110 ],\n\t[ 0.0259040424655478,  0.7827717124575296, -0.8086757549230774 ],\n];\n// LMStoIab_M inverted\nconst LabtoLMS_M = [\n\t[ 1.0000000000000000,  0.3963377773761749,  0.2158037573099136 ],\n\t[ 1.0000000000000000, -0.1055613458156586, -0.0638541728258133 ],\n\t[ 1.0000000000000000, -0.0894841775298119, -1.2914855480194092 ],\n];\n\nexport default new ColorSpace({\n\tid: \"oklab\",\n\tname: \"Oklab\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 1],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\ta: {\n\t\t\trefRange: [-0.4, 0.4],\n\t\t},\n\t\tb: {\n\t\t\trefRange: [-0.4, 0.4],\n\t\t},\n\t},\n\n\t// Note that XYZ is relative to D65\n\twhite: \"D65\",\n\tbase: XYZ_D65,\n\tfromBase (XYZ) {\n\t\t// move to LMS cone domain\n\t\tlet LMS = multiplyMatrices(XYZtoLMS_M, XYZ);\n\n\t\t// non-linearity\n\t\tlet LMSg = LMS.map(val => Math.cbrt(val));\n\n\t\treturn multiplyMatrices(LMStoLab_M, LMSg);\n\n\t},\n\ttoBase (OKLab) {\n\t\t// move to LMS cone domain\n\t\tlet LMSg = multiplyMatrices(LabtoLMS_M, OKLab);\n\n\t\t// restore linearity\n\t\tlet LMS = LMSg.map(val => val ** 3);\n\n\t\treturn multiplyMatrices(LMStoXYZ_M, LMS);\n\t},\n\n\tformats: {\n\t\t\"oklab\": {\n\t\t\tcoords: [\"<percentage> | <number>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"],\n\t\t},\n\t},\n});\n", "// More accurate color-difference formulae\n// than the simple 1976 Euclidean distance in CIE Lab\n\nimport oklab from \"../spaces/oklab.js\";\nimport getColor from \"../getColor.js\";\n\nexport default function (color, sample) {\n\t[color, sample] = getColor([color, sample]);\n\n\t// Given this color as the reference\n\t// and a sample,\n\t// calculate deltaEOK, term by term as root sum of squares\n\tlet [L1, a1, b1] = oklab.from(color);\n\tlet [L2, a2, b2] = oklab.from(sample);\n\tlet L = L1 - L2;\n\tlet a = a1 - a2;\n\tlet b = b1 - b2;\n\treturn Math.sqrt(L ** 2 + a ** 2 + b ** 2);\n}\n", "import ColorSpace from \"./space.js\";\nimport getColor from \"./getColor.js\";\n\nconst  = .000075;\n\n/**\n * Check if a color is in gamut of either its own or another color space\n * @return {Boolean} Is the color in gamut?\n */\nexport default function inGamut (color, space, {epsilon = } = {}) {\n\tcolor = getColor(color);\n\n\tif (!space) {\n\t\tspace = color.space;\n\t}\n\n\tspace = ColorSpace.get(space);\n\tlet coords = color.coords;\n\n\tif (space !== color.space) {\n\t\tcoords = space.from(color);\n\t}\n\n\treturn space.inGamut(coords, {epsilon});\n}\n", "export default function clone (color) {\n\treturn {\n\t\tspace: color.space,\n\t\tcoords: color.coords.slice(),\n\t\talpha: color.alpha,\n\t};\n}\n", "import ColorSpace from \"./space.js\";\n\n/**\n * Euclidean distance of colors in an arbitrary color space\n */\nexport default function distance (color1, color2, space = \"lab\") {\n\tspace = ColorSpace.get(space);\n\n\t// Assume getColor() is called on color in space.from()\n\tlet coords1 = space.from(color1);\n\tlet coords2 = space.from(color2);\n\n\treturn Math.sqrt(coords1.reduce((acc, c1, i) => {\n\t\tlet c2 = coords2[i];\n\t\tif (isNaN(c1) || isNaN(c2)) {\n\t\t\treturn acc;\n\t\t}\n\n\t\treturn acc + (c2 - c1) ** 2;\n\t}, 0));\n}\n", "import distance from \"../distance.js\";\nimport getColor from \"../getColor.js\";\n\nexport default function deltaE76 (color, sample) {\n\t// Assume getColor() is called in the distance function\n\treturn distance(color, sample, \"lab\");\n}\n", "import lab from \"../spaces/lab.js\";\nimport lch from \"../spaces/lch.js\";\nimport getColor from \"../getColor.js\";\n\n// More accurate color-difference formulae\n// than the simple 1976 Euclidean distance in Lab\n\n// CMC by the Color Measurement Committee of the\n// Bradford Society of Dyeists and Colorsts, 1994.\n// Uses LCH rather than Lab,\n// with different weights for L, C and H differences\n// A nice increase in accuracy for modest increase in complexity\nconst  = Math.PI;\nconst d2r =  / 180;\n\nexport default function (color, sample, {l = 2, c = 1} = {}) {\n\t[color, sample] = getColor([color, sample]);\n\n\t// Given this color as the reference\n\t// and a sample,\n\t// calculate deltaE CMC.\n\n\t// This implementation assumes the parametric\n\t// weighting factors l:c are 2:1\n\t// which is typical for non-textile uses.\n\n\tlet [L1, a1, b1] = lab.from(color);\n\tlet [, C1, H1] = lch.from(lab, [L1, a1, b1]);\n\tlet [L2, a2, b2] = lab.from(sample);\n\tlet C2 = lch.from(lab, [L2, a2, b2])[1];\n\n\t// let [L1, a1, b1] = color.getAll(lab);\n\t// let C1 = color.get(\"lch.c\");\n\t// let H1 = color.get(\"lch.h\");\n\t// let [L2, a2, b2] = sample.getAll(lab);\n\t// let C2 = sample.get(\"lch.c\");\n\n\t// Check for negative Chroma,\n\t// which might happen through\n\t// direct user input of LCH values\n\n\tif (C1 < 0) {\n\t\tC1 = 0;\n\t}\n\tif (C2 < 0) {\n\t\tC2 = 0;\n\t}\n\n\t// we don't need H2 as H is calculated from a, b and C\n\n\t// Lightness and Chroma differences\n\t// These are (color - sample), unlike deltaE2000\n\tlet L = L1 - L2;\n\tlet C = C1 - C2;\n\n\tlet a = a1 - a2;\n\tlet b = b1 - b2;\n\n\t// weighted Hue difference, less for larger Chroma difference\n\n\tlet H2 = (a ** 2) + (b ** 2) - (C ** 2);\n\t// due to roundoff error it is possible that, for zero a and b,\n\t// C > a + b is 0, resulting in attempting\n\t// to take the square root of a negative number\n\n\t// trying instead the equation from Industrial Color Physics\n\t// By Georg A. Klein\n\n\t// let H = ((a1 * b2) - (a2 * b1)) / Math.sqrt(0.5 * ((C2 * C1) + (a2 * a1) + (b2 * b1)));\n\t// console.log({H});\n\t// This gives the same result to 12 decimal places\n\t// except it sometimes NaNs when trying to root a negative number\n\n\t// let H = Math.sqrt(H2); we never actually use the root, it gets squared again!!\n\n\t// positional corrections to the lack of uniformity of CIELAB\n\t// These are all trying to make JND ellipsoids more like spheres\n\n\t// SL Lightness crispening factor, depends entirely on L1 not L2\n\tlet SL = 0.511;\t// linear portion of the Y to L transfer function\n\tif (L1 >= 16) {\t// cubic portion\n\t\tSL = (0.040975 * L1) / (1 + 0.01765 * L1);\n\t}\n\n\t// SC Chroma factor\n\tlet SC = ((0.0638 * C1) / (1 + 0.0131 * C1)) + 0.638;\n\n\t// Cross term T for blue non-linearity\n\tlet T;\n\tif (Number.isNaN(H1)) {\n\t\tH1 = 0;\n\t}\n\n\tif (H1 >= 164 && H1 <= 345) {\n\t\tT = 0.56 + Math.abs(0.2 * Math.cos((H1 + 168) * d2r));\n\t}\n\telse {\n\t\tT = 0.36 + Math.abs(0.4 * Math.cos((H1 + 35) * d2r));\n\t}\n\t// console.log({T});\n\n\t// SH Hue factor also depends on C1,\n\tlet C4 = Math.pow(C1, 4);\n\tlet F = Math.sqrt(C4 / (C4 + 1900));\n\tlet SH = SC * ((F * T) + 1 - F);\n\n\t// Finally calculate the deltaE, term by term as root sume of squares\n\tlet dE = (L / (l * SL)) ** 2;\n\tdE += (C / (c * SC)) ** 2;\n\tdE += (H2 / (SH ** 2));\n\t// dE += (H / SH)  ** 2;\n\treturn Math.sqrt(dE);\n\t// Yay!!!\n}\n", "import ColorSpace from \"../space.js\";\nimport XYZ_D65 from \"./xyz-d65.js\";\n\nconst Yw = 203;\t// absolute luminance of media white\n\nexport default new ColorSpace({\n// Absolute CIE XYZ, with a D65 whitepoint,\n// as used in most HDR colorspaces as a starting point.\n// SDR spaces are converted per BT.2048\n// so that diffuse, media white is 203 cd/m\n\tid: \"xyz-abs-d65\",\n\tcssId: \"--xyz-abs-d65\",\n\tname: \"Absolute XYZ D65\",\n\tcoords: {\n\t\tx: {\n\t\t\trefRange: [0, 9504.7],\n\t\t\tname: \"Xa\",\n\t\t},\n\t\ty: {\n\t\t\trefRange: [0, 10000],\n\t\t\tname: \"Ya\",\n\t\t},\n\t\tz: {\n\t\t\trefRange: [0, 10888.3],\n\t\t\tname: \"Za\",\n\t\t},\n\t},\n\n\tbase: XYZ_D65,\n\tfromBase (XYZ) {\n\t\t// Make XYZ absolute, not relative to media white\n\t\t// Maximum luminance in PQ is 10,000 cd/m\n\t\t// Relative XYZ has Y=1 for media white\n\t\treturn XYZ.map (v => Math.max(v * Yw, 0));\n\t},\n\ttoBase (AbsXYZ) {\n\t\t// Convert to media-white relative XYZ\n\t\treturn AbsXYZ.map(v => Math.max(v / Yw, 0));\n\t},\n});\n", "import ColorSpace from \"../space.js\";\nimport {multiplyMatrices} from \"../util.js\";\nimport XYZ_Abs_D65 from \"./xyz-abs-d65.js\";\n\nconst b = 1.15;\nconst g = 0.66;\nconst n = 2610 / (2 ** 14);\nconst ninv = (2 ** 14) / 2610;\nconst c1 = 3424 / (2 ** 12);\nconst c2 = 2413 / (2 ** 7);\nconst c3 = 2392 / (2 ** 7);\nconst p = 1.7 * 2523 / (2 ** 5);\nconst pinv = (2 ** 5) / (1.7 * 2523);\nconst d = -0.56;\nconst d0 = 1.6295499532821566E-11;\n\nconst XYZtoCone_M = [\n\t[  0.41478972, 0.579999,  0.0146480 ],\n\t[ -0.2015100,  1.120649,  0.0531008 ],\n\t[ -0.0166008,  0.264800,  0.6684799 ],\n];\n// XYZtoCone_M inverted\nconst ConetoXYZ_M = [\n\t[  1.9242264357876067,  -1.0047923125953657,  0.037651404030618   ],\n\t[  0.35031676209499907,  0.7264811939316552, -0.06538442294808501 ],\n\t[ -0.09098281098284752, -0.3127282905230739,  1.5227665613052603  ],\n];\nconst ConetoIab_M = [\n\t[  0.5,       0.5,       0        ],\n\t[  3.524000, -4.066708,  0.542708 ],\n\t[  0.199076,  1.096799, -1.295875 ],\n];\n// ConetoIab_M inverted\nconst IabtoCone_M = [\n\t[ 1,                   0.1386050432715393,   0.05804731615611886 ],\n\t[ 0.9999999999999999, -0.1386050432715393,  -0.05804731615611886 ],\n\t[ 0.9999999999999998, -0.09601924202631895, -0.8118918960560388  ],\n];\n\nexport default new ColorSpace({\n\tid: \"jzazbz\",\n\tname: \"Jzazbz\",\n\tcoords: {\n\t\tjz: {\n\t\t\trefRange: [0, 1],\n\t\t\tname: \"Jz\",\n\t\t},\n\t\taz: {\n\t\t\trefRange: [-0.5, 0.5],\n\t\t},\n\t\tbz: {\n\t\t\trefRange: [-0.5, 0.5],\n\t\t},\n\t},\n\n\tbase: XYZ_Abs_D65,\n\tfromBase (XYZ) {\n\t\t// First make XYZ absolute, not relative to media white\n\t\t// Maximum luminance in PQ is 10,000 cd/m\n\t\t// Relative XYZ has Y=1 for media white\n\t\t// BT.2048 says media white Y=203 at PQ 58\n\n\t\tlet [ Xa, Ya, Za ] = XYZ;\n\n\t\t// modify X and Y\n\t\tlet Xm = (b * Xa) - ((b - 1) * Za);\n\t\tlet Ym = (g * Ya) - ((g - 1) * Xa);\n\n\t\t// move to LMS cone domain\n\t\tlet LMS = multiplyMatrices(XYZtoCone_M, [ Xm, Ym, Za ]);\n\n\t\t// PQ-encode LMS\n\t\tlet PQLMS = LMS.map (function (val) {\n\t\t\tlet num = c1 + (c2 * ((val / 10000) ** n));\n\t\t\tlet denom = 1 + (c3 * ((val / 10000) ** n));\n\n\t\t\treturn (num / denom)  ** p;\n\t\t});\n\n\t\t// almost there, calculate Iz az bz\n\t\tlet [ Iz, az, bz] = multiplyMatrices(ConetoIab_M, PQLMS);\n\t\t// console.log({Iz, az, bz});\n\n\t\tlet Jz = ((1 + d) * Iz) / (1 + (d * Iz)) - d0;\n\t\treturn [Jz, az, bz];\n\t},\n\ttoBase (Jzazbz) {\n\t\tlet [Jz, az, bz] = Jzazbz;\n\t\tlet Iz = (Jz + d0) / (1 + d - d * (Jz + d0));\n\n\t\t// bring into LMS cone domain\n\t\tlet PQLMS = multiplyMatrices(IabtoCone_M, [ Iz, az, bz ]);\n\n\t\t// convert from PQ-coded to linear-light\n\t\tlet LMS = PQLMS.map(function (val) {\n\t\t\tlet num = (c1 - (val ** pinv));\n\t\t\tlet denom = (c3 * (val ** pinv)) - c2;\n\t\t\tlet x = 10000 * ((num / denom) ** ninv);\n\n\t\t\treturn (x); \t// luminance relative to diffuse white, [0, 70 or so].\n\t\t});\n\n\t\t// modified abs XYZ\n\t\tlet [ Xm, Ym, Za ] = multiplyMatrices(ConetoXYZ_M, LMS);\n\n\t\t// restore standard D50 relative XYZ, relative to media white\n\t\tlet Xa = (Xm + ((b - 1) * Za)) / b;\n\t\tlet Ya = (Ym + ((g - 1) * Xa)) / g;\n\t\treturn [ Xa, Ya, Za ];\n\t},\n\n\tformats: {\n\t\t// https://drafts.csswg.org/css-color-hdr/#Jzazbz\n\t\t\"color\": {\n\t\t\tcoords: [\"<number> | <percentage>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"],\n\t\t},\n\t},\n});\n", "import ColorSpace from \"../space.js\";\nimport Jzazbz from \"./jzazbz.js\";\nimport {constrain as constrainAngle} from \"../angles.js\";\n\nexport default new ColorSpace({\n\tid: \"jzczhz\",\n\tname: \"JzCzHz\",\n\tcoords: {\n\t\tjz: {\n\t\t\trefRange: [0, 1],\n\t\t\tname: \"Jz\",\n\t\t},\n\t\tcz: {\n\t\t\trefRange: [0, 1],\n\t\t\tname: \"Chroma\",\n\t\t},\n\t\thz: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t},\n\n\tbase: Jzazbz,\n\tfromBase (jzazbz) {\n\t\t// Convert to polar form\n\t\tlet [Jz, az, bz] = jzazbz;\n\t\tlet hue;\n\t\tconst  = 0.0002; // chromatic components much smaller than a,b\n\n\t\tif (Math.abs(az) <  && Math.abs(bz) < ) {\n\t\t\thue = NaN;\n\t\t}\n\t\telse {\n\t\t\thue = Math.atan2(bz, az) * 180 / Math.PI;\n\t\t}\n\n\t\treturn [\n\t\t\tJz, // Jz is still Jz\n\t\t\tMath.sqrt(az ** 2 + bz ** 2), // Chroma\n\t\t\tconstrainAngle(hue), // Hue, in degrees [0 to 360)\n\t\t];\n\t},\n\ttoBase (jzczhz) {\n\t\t// Convert from polar form\n\t\t// debugger;\n\t\treturn [\n\t\t\tjzczhz[0], // Jz is still Jz\n\t\t\tjzczhz[1] * Math.cos(jzczhz[2] * Math.PI / 180), // az\n\t\t\tjzczhz[1] * Math.sin(jzczhz[2] * Math.PI / 180),  // bz\n\t\t];\n\t},\n});\n", "import jzczhz from \"../spaces/jzczhz.js\";\nimport getColor from \"../getColor.js\";\n\n// More accurate color-difference formulae\n// than the simple 1976 Euclidean distance in Lab\n\n// Uses JzCzHz, which has improved perceptual uniformity\n// and thus a simple Euclidean root-sum of L C H\n// gives good results.\n\nexport default function (color, sample) {\n\t[color, sample] = getColor([color, sample]);\n\n\t// Given this color as the reference\n\t// and a sample,\n\t// calculate deltaE in JzCzHz.\n\tlet [Jz1, Cz1, Hz1] = jzczhz.from(color);\n\tlet [Jz2, Cz2, Hz2] = jzczhz.from(sample);\n\n\t// Lightness and Chroma differences\n\t// sign does not matter as they are squared.\n\tlet J = Jz1 - Jz2;\n\tlet C = Cz1 - Cz2;\n\n\t// length of chord for H\n\tif ((Number.isNaN(Hz1)) && (Number.isNaN(Hz2))) {\n\t\t// both undefined hues\n\t\tHz1 = 0;\n\t\tHz2 = 0;\n\t}\n\telse if (Number.isNaN(Hz1)) {\n\t\t// one undefined, set to the defined hue\n\t\tHz1 = Hz2;\n\t}\n\telse if (Number.isNaN(Hz2)) {\n\t\tHz2 = Hz1;\n\t}\n\n\tlet h = Hz1 - Hz2;\n\tlet H = 2 * Math.sqrt(Cz1 * Cz2) * Math.sin((h / 2) * (Math.PI / 180));\n\n\treturn Math.sqrt(J ** 2 + C ** 2 + H ** 2);\n}\n", "import ColorSpace from \"../space.js\";\nimport {multiplyMatrices} from \"../util.js\";\nimport XYZ_Abs_D65 from \"./xyz-abs-d65.js\";\n\nconst c1 = 3424 / 4096;\nconst c2 = 2413 / 128;\nconst c3 = 2392 / 128;\nconst m1 = 2610 / 16384;\nconst m2 = 2523 / 32;\nconst im1 = 16384 / 2610;\nconst im2 = 32 / 2523;\n\n// The matrix below includes the 4% crosstalk components\n// and is from the Dolby \"What is ICtCp\" paper\"\nconst XYZtoLMS_M = [\n\t[  0.3592832590121217,  0.6976051147779502, -0.0358915932320290 ],\n\t[ -0.1920808463704993,  1.1004767970374321,  0.0753748658519118 ],\n\t[  0.0070797844607479,  0.0748396662186362,  0.8433265453898765 ],\n];\n// linear-light Rec.2020 to LMS, again with crosstalk\n// rational terms from Jan Frhlich,\n// Encoding High Dynamic Range andWide Color Gamut Imagery, p.97\n// and ITU-R BT.2124-0 p.2\n/*\nconst Rec2020toLMS_M = [\n\t[ 1688 / 4096,  2146 / 4096,   262 / 4096 ],\n\t[  683 / 4096,  2951 / 4096,   462 / 4096 ],\n\t[   99 / 4096,   309 / 4096,  3688 / 4096 ]\n];\n*/\n// this includes the Ebner LMS coefficients,\n// the rotation, and the scaling to [-0.5,0.5] range\n// rational terms from Frhlich p.97\n// and ITU-R BT.2124-0 pp.2-3\nconst LMStoIPT_M = [\n\t[  2048 / 4096,   2048 / 4096,       0      ],\n\t[  6610 / 4096, -13613 / 4096,  7003 / 4096 ],\n\t[ 17933 / 4096, -17390 / 4096,  -543 / 4096 ],\n];\n\n// inverted matrices, calculated from the above\nconst IPTtoLMS_M = [\n\t[ 0.9999999999999998,  0.0086090370379328,  0.1110296250030260 ],\n\t[ 0.9999999999999998, -0.0086090370379328, -0.1110296250030259 ],\n\t[ 0.9999999999999998,  0.5600313357106791, -0.3206271749873188 ],\n];\n/*\nconst LMStoRec2020_M = [\n\t[ 3.4375568932814012112,   -2.5072112125095058195,   0.069654319228104608382],\n\t[-0.79142868665644156125,   1.9838372198740089874,  -0.19240853321756742626 ],\n\t[-0.025646662911506476363, -0.099240248643945566751, 1.1248869115554520431  ]\n];\n*/\nconst LMStoXYZ_M = [\n\t[  2.0701522183894223, -1.3263473389671563,  0.2066510476294053 ],\n\t[  0.3647385209748072,  0.6805660249472273, -0.0453045459220347 ],\n\t[ -0.0497472075358123, -0.0492609666966131,  1.1880659249923042 ],\n];\n\n// Only the PQ form of ICtCp is implemented here. There is also an HLG form.\n// from Dolby, \"WHAT IS ICTCP?\"\n// https://professional.dolby.com/siteassets/pdfs/ictcp_dolbywhitepaper_v071.pdf\n// and\n// Dolby, \"Perceptual Color Volume\n// Measuring the Distinguishable Colors of HDR and WCG Displays\"\n// https://professional.dolby.com/siteassets/pdfs/dolby-vision-measuring-perceptual-color-volume-v7.1.pdf\nexport default new ColorSpace({\n\tid: \"ictcp\",\n\tname: \"ICTCP\",\n\t// From BT.2100-2 page 7:\n\t// During production, signal values are expected to exceed the\n\t// range E = [0.0 : 1.0]. This provides processing headroom and avoids\n\t// signal degradation during cascaded processing. Such values of E,\n\t// below 0.0 or exceeding 1.0, should not be clipped during production\n\t// and exchange.\n\t// Values below 0.0 should not be clipped in reference displays (even\n\t// though they represent negative light) to allow the black level of\n\t// the signal (LB) to be properly set using test signals known as PLUGE\n\tcoords: {\n\t\ti: {\n\t\t\trefRange: [0, 1],\t// Constant luminance,\n\t\t\tname: \"I\",\n\t\t},\n\t\tct: {\n\t\t\trefRange: [-0.5, 0.5],\t// Full BT.2020 gamut in range [-0.5, 0.5]\n\t\t\tname: \"CT\",\n\t\t},\n\t\tcp: {\n\t\t\trefRange: [-0.5, 0.5],\n\t\t\tname: \"CP\",\n\t\t},\n\t},\n\n\tbase: XYZ_Abs_D65,\n\tfromBase (XYZ) {\n\t\t// move to LMS cone domain\n\t\tlet LMS = multiplyMatrices(XYZtoLMS_M, XYZ);\n\n\t\treturn LMStoICtCp(LMS);\n\t},\n\ttoBase (ICtCp) {\n\t\tlet LMS = ICtCptoLMS(ICtCp);\n\n\t\treturn multiplyMatrices(LMStoXYZ_M, LMS);\n\t},\n});\n\nfunction LMStoICtCp (LMS) {\n\t// apply the PQ EOTF\n\t// we can't ever be dividing by zero because of the \"1 +\" in the denominator\n\tlet PQLMS = LMS.map (function (val) {\n\t\tlet num = c1 + (c2 * ((val / 10000) ** m1));\n\t\tlet denom = 1 + (c3 * ((val / 10000) ** m1));\n\n\t\treturn (num / denom)  ** m2;\n\t});\n\n\t// LMS to IPT, with rotation for Y'C'bC'r compatibility\n\treturn multiplyMatrices(LMStoIPT_M, PQLMS);\n}\n\nfunction ICtCptoLMS (ICtCp) {\n\tlet PQLMS = multiplyMatrices(IPTtoLMS_M, ICtCp);\n\n\t// From BT.2124-0 Annex 2 Conversion 3\n\tlet LMS = PQLMS.map (function (val) {\n\t\tlet num  = Math.max((val ** im2) - c1, 0);\n\t\tlet denom = (c2 - (c3 * (val ** im2)));\n\t\treturn 10000 * ((num / denom) ** im1);\n\t});\n\n\treturn LMS;\n}\n", "import ictcp from \"../spaces/ictcp.js\";\nimport getColor from \"../getColor.js\";\n\n// Delta E in ICtCp space,\n// which the ITU calls Delta E ITP, which is shorter\n// formulae from ITU Rec. ITU-R BT.2124-0\n\nexport default function (color, sample) {\n\t[color, sample] = getColor([color, sample]);\n\n\t// Given this color as the reference\n\t// and a sample,\n\t// calculate deltaE in ICtCp\n\t// which is simply the Euclidean distance\n\n\tlet [ I1, T1, P1 ] = ictcp.from(color);\n\tlet [ I2, T2, P2 ] = ictcp.from(sample);\n\n\t// the 0.25 factor is to undo the encoding scaling in Ct\n\t// the 720 is so that 1 deltaE = 1 JND\n\t// per  ITU-R BT.2124-0 p.3\n\n\treturn 720 * Math.sqrt((I1 - I2) ** 2 + (0.25 * (T1 - T2) ** 2) + (P1 - P2) ** 2);\n}\n", "import ColorSpace from \"../space.js\";\nimport {multiplyMatrices, interpolate, copySign, spow, zdiv, bisectLeft} from \"../util.js\";\nimport {constrain} from \"../angles.js\";\nimport xyz_d65 from \"./xyz-d65.js\";\nimport {WHITES} from \"../adapt.js\";\n\nconst white = WHITES.D65;\nconst adaptedCoef = 0.42;\nconst adaptedCoefInv = 1 / adaptedCoef;\nconst tau = 2 * Math.PI;\n\nconst cat16 = [\n\t[  0.401288,  0.650173, -0.051461 ],\n\t[ -0.250268,  1.204414,  0.045854 ],\n\t[ -0.002079,  0.048952,  0.953127 ],\n];\n\nconst cat16Inv = [\n\t[1.8620678550872327, -1.0112546305316843, 0.14918677544445175],\n\t[0.38752654323613717, 0.6214474419314753, -0.008973985167612518],\n\t[-0.015841498849333856, -0.03412293802851557, 1.0499644368778496],\n];\n\nconst m1 = [\n\t[460.0, 451.0, 288.0],\n\t[460.0, -891.0, -261.0],\n\t[460.0, -220.0, -6300.0],\n];\n\nconst surroundMap = {\n\tdark: [0.8, 0.525, 0.8],\n\tdim: [0.9, 0.59, 0.9],\n\taverage: [1, 0.69, 1],\n};\n\nconst hueQuadMap = {\n\t// Red, Yellow, Green, Blue, Red\n\th: [20.14, 90.00, 164.25, 237.53, 380.14],\n\te: [0.8, 0.7, 1.0, 1.2, 0.8],\n\tH: [0.0, 100.0, 200.0, 300.0, 400.0],\n};\n\nconst rad2deg = 180 / Math.PI;\nconst deg2rad = Math.PI / 180;\n\nexport function adapt (coords, fl) {\n\tconst temp = coords.map(c => {\n\t\tconst x = spow(fl * Math.abs(c) * 0.01, adaptedCoef);\n\t\treturn 400 * copySign(x, c) / (x + 27.13);\n\t});\n\treturn temp;\n}\n\nexport function unadapt (adapted, fl) {\n\tconst constant = 100 / fl * (27.13 ** adaptedCoefInv);\n\treturn adapted.map(c => {\n\t\tconst cabs = Math.abs(c);\n\t\treturn copySign(constant * spow(cabs / (400 - cabs), adaptedCoefInv), c);\n\t});\n}\n\nexport function hueQuadrature (h) {\n\tlet hp = constrain(h);\n\tif (hp <= hueQuadMap.h[0]) {\n\t\thp += 360;\n\t}\n\n\tconst i = bisectLeft(hueQuadMap.h, hp) - 1;\n\tconst [hi, hii] = hueQuadMap.h.slice(i, i + 2);\n\tconst [ei, eii] = hueQuadMap.e.slice(i, i + 2);\n\tconst Hi = hueQuadMap.H[i];\n\n\tconst t = (hp - hi) / ei;\n\treturn Hi + (100 * t) / (t + (hii - hp) / eii);\n}\n\nexport function invHueQuadrature (H) {\n\tlet Hp = ((H % 400 + 400) % 400);\n\tconst i = Math.floor(0.01 * Hp);\n\tHp = Hp % 100;\n\tconst [hi, hii] = hueQuadMap.h.slice(i, i + 2);\n\tconst [ei, eii] = hueQuadMap.e.slice(i, i + 2);\n\n\treturn constrain(\n\t\t(Hp * (eii * hi - ei * hii) - 100 * hi * eii) /\n\t\t(Hp * (eii - ei) - 100 * eii),\n\t);\n}\n\nexport function environment (\n\trefWhite,\n\tadaptingLuminance,\n\tbackgroundLuminance,\n\tsurround,\n\tdiscounting,\n) {\n\n\tconst env = {};\n\n\tenv.discounting = discounting;\n\tenv.refWhite = refWhite;\n\tenv.surround = surround;\n\tconst xyzW = refWhite.map(c => {\n\t\treturn c * 100;\n\t});\n\n\t// The average luminance of the environment in `cd/m^2cd/m` (a.k.a. nits)\n\tenv.la = adaptingLuminance;\n\t// The relative luminance of the nearby background\n\tenv.yb = backgroundLuminance;\n\t// Absolute luminance of the reference white.\n\tconst yw = xyzW[1];\n\n\t// Cone response for reference white\n\tconst rgbW = multiplyMatrices(cat16, xyzW);\n\n\t// Surround: dark, dim, and average\n\tsurround = surroundMap[env.surround];\n\tconst f = surround[0];\n\tenv.c = surround[1];\n\tenv.nc = surround[2];\n\n\tconst k = 1 / (5 * env.la + 1);\n\tconst k4 = k ** 4;\n\n\t// Factor of luminance level adaptation\n\tenv.fl = (k4 * env.la + 0.1 * (1 - k4) * (1 - k4) * Math.cbrt(5 * env.la));\n\tenv.flRoot = env.fl ** 0.25;\n\n\tenv.n = env.yb / yw;\n\tenv.z = 1.48 + Math.sqrt(env.n);\n\tenv.nbb = 0.725 * (env.n ** -0.2);\n\tenv.ncb = env.nbb;\n\n\t// Degree of adaptation calculating if not discounting\n\t// illuminant (assumed eye is fully adapted)\n\tconst d = (discounting) ?\n\t\t1 :\n\t\tMath.max(\n\t\t\tMath.min(f * (1 - 1 / 3.6 * Math.exp((-env.la - 42) / 92)), 1),\n\t\t\t0,\n\t\t);\n\tenv.dRgb = rgbW.map(c => {\n\t\treturn interpolate(1, yw / c, d);\n\t});\n\tenv.dRgbInv = env.dRgb.map(c => {\n\t\treturn 1 / c;\n\t});\n\n\t// Achromatic response\n\tconst rgbCW = rgbW.map((c, i) => {\n\t\treturn c * env.dRgb[i];\n\t});\n\tconst rgbAW = adapt(rgbCW, env.fl);\n\tenv.aW = env.nbb * (2 * rgbAW[0] + rgbAW[1] + 0.05 * rgbAW[2]);\n\n\t// console.log(env);\n\n\treturn env;\n}\n\n// Pre-calculate everything we can with the viewing conditions\nconst viewingConditions = environment(\n\twhite,\n\t64 / Math.PI * 0.2, 20,\n\t\"average\",\n\tfalse,\n);\n\nexport function fromCam16 (cam16, env) {\n\n\t// These check ensure one, and only one attribute for a\n\t// given category is provided.\n\tif (!((cam16.J !== undefined) ^ (cam16.Q !== undefined))) {\n\t\tthrow new Error(\"Conversion requires one and only one: 'J' or 'Q'\");\n\t}\n\n\tif (!((cam16.C !== undefined) ^ (cam16.M !== undefined) ^ (cam16.s !== undefined))) {\n\t\tthrow new Error(\"Conversion requires one and only one: 'C', 'M' or 's'\");\n\t}\n\n\t// Hue is absolutely required\n\tif (!((cam16.h !== undefined) ^ (cam16.H !== undefined))) {\n\t\tthrow new Error(\"Conversion requires one and only one: 'h' or 'H'\");\n\t}\n\n\t// Black\n\tif (cam16.J === 0.0 || cam16.Q === 0.0) {\n\t\treturn [0.0, 0.0, 0.0];\n\t}\n\n\t// Break hue into Cartesian components\n\tlet hRad = 0.0;\n\tif (cam16.h !== undefined) {\n\t\thRad = constrain(cam16.h) * deg2rad;\n\t}\n\telse {\n\t\thRad = invHueQuadrature(cam16.H) * deg2rad;\n\t}\n\n\tconst cosh = Math.cos(hRad);\n\tconst sinh = Math.sin(hRad);\n\n\t// Calculate `Jroot` from one of the lightness derived coordinates.\n\tlet Jroot = 0.0;\n\tif (cam16.J !== undefined) {\n\t\tJroot = spow(cam16.J, 1 / 2) * 0.1;\n\t}\n\telse if (cam16.Q !== undefined) {\n\t\tJroot = 0.25 * env.c * cam16.Q / ((env.aW + 4) * env.flRoot);\n\t}\n\n\t// Calculate the `t` value from one of the chroma derived coordinates\n\tlet alpha = 0.0;\n\tif (cam16.C !== undefined) {\n\t\talpha = cam16.C / Jroot;\n\t}\n\telse if (cam16.M !== undefined) {\n\t\talpha = (cam16.M / env.flRoot) / Jroot;\n\t}\n\telse if (cam16.s !== undefined) {\n\t\talpha = 0.0004 * (cam16.s ** 2) * (env.aW + 4) / env.c;\n\t}\n\tconst t = spow(\n\t\talpha * Math.pow(1.64 - Math.pow(0.29, env.n), -0.73),\n\t\t10 / 9,\n\t);\n\n\t// Eccentricity\n\tconst et = 0.25 * (Math.cos(hRad + 2) + 3.8);\n\n\t// Achromatic response\n\tconst A = env.aW * spow(Jroot, 2 / env.c / env.z);\n\n\t// Calculate red-green and yellow-blue components\n\tconst p1 = 5e4 / 13 * env.nc * env.ncb * et;\n\tconst p2 = A / env.nbb;\n\tconst r = (\n\t\t23 * (p2 + 0.305) *\n\t\tzdiv(t, 23 * p1 + t * (11 * cosh + 108 * sinh))\n\t);\n\tconst a = r * cosh;\n\tconst b = r * sinh;\n\n\t// Calculate back from cone response to XYZ\n\tconst rgb_c = unadapt(\n\t\tmultiplyMatrices(m1, [p2, a, b]).map(c => {\n\t\t\treturn c * 1 / 1403;\n\t\t}),\n\t\tenv.fl,\n\t);\n\treturn multiplyMatrices(\n\t\tcat16Inv,\n\t\trgb_c.map((c, i) => {\n\t\t\treturn c * env.dRgbInv[i];\n\t\t}),\n\t).map(c => {\n\t\treturn c / 100;\n\t});\n}\n\n\nexport function toCam16 (xyzd65, env) {\n\t// Cone response\n\tconst xyz100 = xyzd65.map(c => {\n\t\treturn c * 100;\n\t});\n\tconst rgbA = adapt(\n\t\tmultiplyMatrices(cat16, xyz100).map((c, i) => {\n\t\t\treturn c * env.dRgb[i];\n\t\t}),\n\t\tenv.fl,\n\t);\n\n\t// Calculate hue from red-green and yellow-blue components\n\tconst a = rgbA[0] + (-12 * rgbA[1] + rgbA[2]) / 11;\n\tconst b = (rgbA[0] + rgbA[1] - 2 * rgbA[2]) / 9;\n\tconst hRad = ((Math.atan2(b, a) % tau) + tau) % tau;\n\n\t// Eccentricity\n\tconst et = 0.25 * (Math.cos(hRad + 2) + 3.8);\n\n\tconst t = (\n\t\t5e4 / 13 * env.nc * env.ncb *\n\t\tzdiv(\n\t\t\tet * Math.sqrt(a ** 2 + b ** 2),\n\t\t\trgbA[0] + rgbA[1] + 1.05 * rgbA[2] + 0.305,\n\t\t)\n\t);\n\tconst alpha = spow(t, 0.9) * Math.pow(1.64 - Math.pow(0.29, env.n), 0.73);\n\n\t// Achromatic response\n\tconst A = env.nbb * (2 * rgbA[0] + rgbA[1] + 0.05 * rgbA[2]);\n\n\tconst Jroot = spow(A / env.aW, 0.5 * env.c * env.z);\n\n\t// Lightness\n\tconst J = 100 * spow(Jroot, 2);\n\n\t// Brightness\n\tconst Q = (4 / env.c * Jroot * (env.aW + 4) * env.flRoot);\n\n\t// Chroma\n\tconst C = alpha * Jroot;\n\n\t// Colorfulness\n\tconst M = C * env.flRoot;\n\n\t// Hue\n\tconst h = constrain(hRad * rad2deg);\n\n\t// Hue quadrature\n\tconst H = hueQuadrature(h);\n\n\t// Saturation\n\tconst s = 50 * spow(env.c * alpha / (env.aW + 4), 1 / 2);\n\n\t// console.log({J: J, C: C, h: h, s: s, Q: Q, M: M, H: H});\n\n\treturn {J: J, C: C, h: h, s: s, Q: Q, M: M, H: H};\n}\n\n\n// Provided as a way to directly evaluate the CAM16 model\n// https://observablehq.com/@jrus/cam16: reference implementation\n// https://arxiv.org/pdf/1802.06067.pdf: Nico Schlmer\n// https://onlinelibrary.wiley.com/doi/pdf/10.1002/col.22324: hue quadrature\n// https://www.researchgate.net/publication/318152296_Comprehensive_color_solutions_CAM16_CAT16_and_CAM16-UCS\n// Results compared against: https://github.com/colour-science/colour\nexport default new ColorSpace({\n\tid: \"cam16-jmh\",\n\tcssId: \"--cam16-jmh\",\n\tname: \"CAM16-JMh\",\n\tcoords: {\n\t\tj: {\n\t\t\trefRange: [0, 100],\n\t\t\tname: \"J\",\n\t\t},\n\t\tm: {\n\t\t\trefRange: [0, 105.0],\n\t\t\tname: \"Colorfulness\",\n\t\t},\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t},\n\n\tbase: xyz_d65,\n\n\tfromBase (xyz) {\n\t\tconst cam16 = toCam16(xyz, viewingConditions);\n\t\treturn [cam16.J, cam16.M, cam16.h];\n\t},\n\ttoBase (cam16) {\n\t\treturn fromCam16(\n\t\t\t{J: cam16[0], M: cam16[1], h: cam16[2]},\n\t\t\tviewingConditions,\n\t\t);\n\t},\n});\n", "import ColorSpace from \"../space.js\";\nimport {constrain} from \"../angles.js\";\nimport xyz_d65 from \"./xyz-d65.js\";\nimport {fromCam16, toCam16, environment} from \"./cam16.js\";\nimport {WHITES} from \"../adapt.js\";\n\nconst white = WHITES.D65;\nconst  = 216 / 24389;  // 6^3/29^3 == (24/116)^3\nconst  = 24389 / 27;   // 29^3/3^3\n\nfunction toLstar (y) {\n\t// Convert XYZ Y to L*\n\n\tconst fy = (y > ) ? Math.cbrt(y) : ( * y + 16) / 116;\n\treturn (116.0 * fy) - 16.0;\n}\n\nfunction fromLstar (lstar) {\n\t// Convert L* back to XYZ Y\n\n\treturn (lstar > 8) ?  Math.pow((lstar + 16) / 116, 3) : lstar / ;\n}\n\nfunction fromHct (coords, env) {\n\t// Use Newton's method to try and converge as quick as possible or\n\t// converge as close as we can. While the requested precision is achieved\n\t// most of the time, it may not always be achievable. Especially past the\n\t// visible spectrum, the algorithm will likely struggle to get the same\n\t// precision. If, for whatever reason, we cannot achieve the accuracy we\n\t// seek in the allotted iterations, just return the closest we were able to\n\t// get.\n\n\tlet [h, c, t] = coords;\n\tlet xyz = [];\n\tlet j = 0;\n\n\t// Shortcut out for black\n\tif (t === 0) {\n\t\treturn [0.0, 0.0, 0.0];\n\t}\n\n\t// Calculate the Y we need to target\n\tlet y = fromLstar(t);\n\n\t// A better initial guess yields better results. Polynomials come from\n\t// curve fitting the T vs J response.\n\tif (t > 0) {\n\t\tj = 0.00379058511492914 * t ** 2 + 0.608983189401032 * t + 0.9155088574762233;\n\t}\n\telse {\n\t\tj = 9.514440756550361e-06 * t ** 2 + 0.08693057439788597 * t - 21.928975842194614;\n\t}\n\n\t// Threshold of how close is close enough, and max number of attempts.\n\t// More precision and more attempts means more time spent iterating. Higher\n\t// required precision gives more accuracy but also increases the chance of\n\t// not hitting the goal. 2e-12 allows us to convert round trip with\n\t// reasonable accuracy of six decimal places or more.\n\tconst threshold = 2e-12;\n\tconst max_attempts = 15;\n\n\tlet attempt = 0;\n\tlet last = Infinity;\n\tlet best = j;\n\n\t// Try to find a J such that the returned y matches the returned y of the L*\n\twhile (attempt <= max_attempts) {\n\t\txyz = fromCam16({J: j, C: c, h: h}, env);\n\n\t\t// If we are within range, return XYZ\n\t\t// If we are closer than last time, save the values\n\t\tconst delta = Math.abs(xyz[1] - y);\n\t\tif (delta < last) {\n\t\t\tif (delta <= threshold) {\n\t\t\t\treturn xyz;\n\t\t\t}\n\t\t\tbest = j;\n\t\t\tlast = delta;\n\t\t}\n\n\t\t// f(j_root) = (j ** (1 / 2)) * 0.1\n\t\t// f(j) = ((f(j_root) * 100) ** 2) / j - 1 = 0\n\t\t// f(j_root) = Y = y / 100\n\t\t// f(j) = (y ** 2) / j - 1\n\t\t// f'(j) = (2 * y) / j\n\t\tj = j - (xyz[1] - y) * j / (2 * xyz[1]);\n\n\t\tattempt += 1;\n\t}\n\n\t// We could not acquire the precision we desired,\n\t// return our closest attempt.\n\treturn fromCam16({J: j, C: c, h: h}, env);\n}\n\nfunction toHct (xyz, env) {\n\t// Calculate HCT by taking the L* of CIE LCh D65 and CAM16 chroma and hue.\n\n\tconst t = toLstar(xyz[1]);\n\tif (t === 0.0) {\n\t\treturn [0.0, 0.0, 0.0];\n\t}\n\tconst cam16 = toCam16(xyz, viewingConditions);\n\treturn [constrain(cam16.h), cam16.C, t];\n}\n\n// Pre-calculate everything we can with the viewing conditions\nexport const viewingConditions = environment(\n\twhite, 200 / Math.PI * fromLstar(50.0),\n\tfromLstar(50.0) * 100,\n\t\"average\",\n\tfalse,\n);\n\n// https://material.io/blog/science-of-color-design\n// This is not a port of the material-color-utilities,\n// but instead implements the full color space as described,\n// combining CAM16 JCh and Lab D65. This does not clamp conversion\n// to HCT to specific chroma bands and provides support for wider\n// gamuts than Google currently supports and does so at a greater\n// precision (> 8 bits back to sRGB).\n// This implementation comes from https://github.com/facelessuser/coloraide\n// which is licensed under MIT.\nexport default new ColorSpace({\n\tid: \"hct\",\n\tname: \"HCT\",\n\tcoords: {\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t\tc: {\n\t\t\trefRange: [0, 145],\n\t\t\tname: \"Colorfulness\",\n\t\t},\n\t\tt: {\n\t\t\trefRange: [0, 100],\n\t\t\tname: \"Tone\",\n\t\t},\n\t},\n\n\tbase: xyz_d65,\n\n\tfromBase (xyz) {\n\t\treturn toHct(xyz, viewingConditions);\n\t},\n\ttoBase (hct) {\n\t\treturn fromHct(hct, viewingConditions);\n\t},\n\tformats: {\n\t\tcolor: {\n\t\t\tid: \"--hct\",\n\t\t\tcoords: [\"<number> | <angle>\", \"<percentage> | <number>\", \"<percentage> | <number>\"],\n\t\t},\n\t},\n});\n", "import hct from \"../spaces/hct.js\";\nimport {viewingConditions} from \"../spaces/hct.js\";\nimport getColor from \"../getColor.js\";\n\nconst rad2deg = 180 / Math.PI;\nconst deg2rad = Math.PI / 180;\nconst ucsCoeff = [1.00, 0.007, 0.0228];\n\n/**\n* Convert HCT chroma and hue (CAM16 JMh colorfulness and hue) using UCS logic for a and b.\n* @param {number[]} coords - HCT coordinates.\n* @return {number[]}\n*/\nfunction convertUcsAb (coords) {\n\t// We want the distance between the actual color.\n\t// If chroma is negative, it will throw off our calculations.\n\t// Normally, converting back to the base and forward will correct it.\n\t// If we have a negative chroma after this, then we have a color that\n\t// cannot resolve to positive chroma.\n\tif (coords[1] < 0) {\n\t\tcoords = hct.fromBase(hct.toBase(coords));\n\t}\n\n\t// Only in extreme cases (usually outside the visible spectrum)\n\t// can the input value for log become negative.\n\t// Avoid domain error by forcing a zero result via \"max\" if necessary.\n\tconst M = Math.log(Math.max(1 + ucsCoeff[2] * coords[1] * viewingConditions.flRoot, 1.0)) / ucsCoeff[2];\n\tconst hrad = coords[0] * deg2rad;\n\tconst a = M * Math.cos(hrad);\n\tconst b = M * Math.sin(hrad);\n\n\treturn [coords[2], a, b];\n}\n\n\n/**\n* Color distance using HCT.\n* @param {Color} color - Color to compare.\n* @param {Color} sample - Color to compare.\n* @return {number[]}\n*/\nexport default function (color, sample) {\n\t[color, sample] = getColor([color, sample]);\n\n\tlet [ t1, a1, b1 ] = convertUcsAb(hct.from(color));\n\tlet [ t2, a2, b2 ] = convertUcsAb(hct.from(sample));\n\n\t// Use simple euclidean distance with a and b using UCS conversion\n\t// and LCh lightness (HCT tone).\n\treturn Math.sqrt((t1 - t2) ** 2 + (a1 - a2) ** 2 + (b1 - b2) ** 2);\n}\n", "import deltaE76 from \"./deltaE76.js\";\nimport deltaECMC from \"./deltaECMC.js\";\nimport deltaE2000 from \"./deltaE2000.js\";\nimport deltaEJz from \"./deltaEJz.js\";\nimport deltaEITP from \"./deltaEITP.js\";\nimport deltaEOK from \"./deltaEOK.js\";\nimport deltaEHCT from \"./deltaEHCT.js\";\n\nexport {\n\tdeltaE76,\n\tdeltaECMC,\n\tdeltaE2000,\n\tdeltaEJz,\n\tdeltaEITP,\n\tdeltaEOK,\n\tdeltaEHCT,\n};\n\nexport default {\n\tdeltaE76,\n\tdeltaECMC,\n\tdeltaE2000,\n\tdeltaEJz,\n\tdeltaEITP,\n\tdeltaEOK,\n\tdeltaEHCT,\n};\n", "import * as util from \"./util.js\";\nimport ColorSpace from \"./space.js\";\nimport defaults from \"./defaults.js\";\nimport deltaE2000 from \"./deltaE/deltaE2000.js\";\nimport deltaEOK from \"./deltaE/deltaEOK.js\";\nimport inGamut from \"./inGamut.js\";\nimport to from \"./to.js\";\nimport get from \"./get.js\";\nimport oklab from \"./spaces/oklab.js\";\nimport set from \"./set.js\";\nimport clone from \"./clone.js\";\nimport getColor from \"./getColor.js\";\nimport deltaEMethods from \"./deltaE/index.js\";\nimport {WHITES} from \"./adapt.js\";\n\n/**\n * Calculate the epsilon to 2 degrees smaller than the specified JND.\n * @param {Number} jnd - The target \"just noticeable difference\".\n * @returns {Number}\n */\nfunction calcEpsilon (jnd) {\n\t// Calculate the epsilon to 2 degrees smaller than the specified JND.\n\n\tconst order = (!jnd) ? 0 : Math.floor(Math.log10(Math.abs(jnd)));\n\t// Limit to an arbitrary value to ensure value is never too small and causes infinite loops.\n\treturn Math.max(parseFloat(`1e${order - 2}`), 1e-6);\n}\n\nconst GMAPPRESET = {\n\t\"hct\": {\n\t\tmethod: \"hct.c\",\n\t\tjnd: 2,\n\t\tdeltaEMethod: \"hct\",\n\t\tblackWhiteClamp: {},\n\t},\n\t\"hct-tonal\": {\n\t\tmethod: \"hct.c\",\n\t\tjnd: 0,\n\t\tdeltaEMethod: \"hct\",\n\t\tblackWhiteClamp: { channel: \"hct.t\", min: 0, max: 100 },\n\t},\n};\n\n/**\n * Force coordinates to be in gamut of a certain color space.\n * Mutates the color it is passed.\n * @param {Object|string} options object or spaceId string\n * @param {string} options.method - How to force into gamut.\n *        If \"clip\", coordinates are just clipped to their reference range.\n *        If \"css\", coordinates are reduced according to the CSS 4 Gamut Mapping Algorithm.\n *        If in the form [colorSpaceId].[coordName], that coordinate is reduced\n *        until the color is in gamut. Please note that this may produce nonsensical\n *        results for certain coordinates (e.g. hue) or infinite loops if reducing the coordinate never brings the color in gamut.\n * @param {ColorSpace|string} options.space - The space whose gamut we want to map to\n * @param {string} options.deltaEMethod - The delta E method to use while performing gamut mapping.\n *        If no method is specified, delta E 2000 is used.\n * @param {Number} options.jnd - The \"just noticeable difference\" to target.\n * @param {Object} options.blackWhiteClamp - Used to configure SDR black and clamping.\n *        \"channel\" indicates the \"space.channel\" to use for determining when to clamp.\n *        \"min\" indicates the lower limit for black clamping and \"max\" indicates the upper\n *        limit for white clamping.\n */\n\nexport default function toGamut (\n\tcolor,\n\t{\n\t\tmethod = defaults.gamut_mapping,\n\t\tspace = undefined,\n\t\tdeltaEMethod = \"\",\n\t\tjnd = 2,\n\t\tblackWhiteClamp = {},\n\t} = {},\n) {\n\tcolor = getColor(color);\n\n\tif (util.isString(arguments[1])) {\n\t\tspace = arguments[1];\n\t}\n\telse if (!space) {\n\t\tspace = color.space;\n\t}\n\n\tspace = ColorSpace.get(space);\n\n\t// 3 spaces:\n\t// color.space: current color space\n\t// space: space whose gamut we are mapping to\n\t// mapSpace: space with the coord we're reducing\n\n\tif (inGamut(color, space, { epsilon: 0 })) {\n\t\treturn color;\n\t}\n\n\tlet spaceColor;\n\tif (method === \"css\") {\n\t\tspaceColor = toGamutCSS(color, { space });\n\t}\n\telse {\n\t\tif (method !== \"clip\" && !inGamut(color, space)) {\n\n\t\t\tif (Object.prototype.hasOwnProperty.call(GMAPPRESET, method)) {\n\t\t\t\t({method, jnd, deltaEMethod, blackWhiteClamp} = GMAPPRESET[method]);\n\t\t\t}\n\n\t\t\t// Get the correct delta E method\n\t\t\tlet de = deltaE2000;\n\t\t\tif (deltaEMethod !== \"\") {\n\t\t\t\tfor (let m in deltaEMethods) {\n\t\t\t\t\tif (\"deltae\" + deltaEMethod.toLowerCase() === m.toLowerCase()) {\n\t\t\t\t\t\tde = deltaEMethods[m];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet clipped = toGamut(to(color, space), { method: \"clip\", space });\n\t\t\tif (de(color, clipped) > jnd) {\n\n\t\t\t\t// Clamp to SDR white and black if required\n\t\t\t\tif (Object.keys(blackWhiteClamp).length === 3) {\n\t\t\t\t\tlet channelMeta = ColorSpace.resolveCoord(blackWhiteClamp.channel);\n\t\t\t\t\tlet channel = get(to(color, channelMeta.space), channelMeta.id);\n\t\t\t\t\tif (util.isNone(channel)) {\n\t\t\t\t\t\tchannel = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif (channel >= blackWhiteClamp.max) {\n\t\t\t\t\t\treturn to({ space: \"xyz-d65\", coords: WHITES[\"D65\"] }, color.space);\n\t\t\t\t\t}\n\t\t\t\t\telse if (channel <= blackWhiteClamp.min) {\n\t\t\t\t\t\treturn to({ space: \"xyz-d65\", coords: [0, 0, 0] }, color.space);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Reduce a coordinate of a certain color space until the color is in gamut\n\t\t\t\tlet coordMeta = ColorSpace.resolveCoord(method);\n\t\t\t\tlet mapSpace = coordMeta.space;\n\t\t\t\tlet coordId = coordMeta.id;\n\n\t\t\t\tlet mappedColor = to(color, mapSpace);\n\t\t\t\t// If we were already in the mapped color space, we need to resolve undefined channels\n\t\t\t\tmappedColor.coords.forEach((c, i) => {\n\t\t\t\t\tif (util.isNone(c)) {\n\t\t\t\t\t\tmappedColor.coords[i] = 0;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet bounds = coordMeta.range || coordMeta.refRange;\n\t\t\t\tlet min = bounds[0];\n\t\t\t\tlet  = calcEpsilon(jnd);\n\t\t\t\tlet low = min;\n\t\t\t\tlet high = get(mappedColor, coordId);\n\n\t\t\t\twhile (high - low > ) {\n\t\t\t\t\tlet clipped = clone(mappedColor);\n\t\t\t\t\tclipped = toGamut(clipped, { space, method: \"clip\" });\n\t\t\t\t\tlet deltaE = de(mappedColor, clipped);\n\n\t\t\t\t\tif (deltaE - jnd < ) {\n\t\t\t\t\t\tlow = get(mappedColor, coordId);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\thigh = get(mappedColor, coordId);\n\t\t\t\t\t}\n\n\t\t\t\t\tset(mappedColor, coordId, (low + high) / 2);\n\t\t\t\t}\n\n\t\t\t\tspaceColor = to(mappedColor, space);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tspaceColor = clipped;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tspaceColor = to(color, space);\n\t\t}\n\n\t\tif (method === \"clip\" // Dumb coord clipping\n\t\t\t// finish off smarter gamut mapping with clip to get rid of , see #17\n\t\t\t|| !inGamut(spaceColor, space, { epsilon: 0 })\n\t\t) {\n\t\t\tlet bounds = Object.values(space.coords).map(c => c.range || []);\n\n\t\t\tspaceColor.coords = spaceColor.coords.map((c, i) => {\n\t\t\t\tlet [min, max] = bounds[i];\n\n\t\t\t\tif (min !== undefined) {\n\t\t\t\t\tc = Math.max(min, c);\n\t\t\t\t}\n\n\t\t\t\tif (max !== undefined) {\n\t\t\t\t\tc = Math.min(c, max);\n\t\t\t\t}\n\n\t\t\t\treturn c;\n\t\t\t});\n\t\t}\n\t}\n\n\tif (space !== color.space) {\n\t\tspaceColor = to(spaceColor, color.space);\n\t}\n\n\tcolor.coords = spaceColor.coords;\n\treturn color;\n}\n\ntoGamut.returns = \"color\";\n\n// The reference colors to be used if lightness is out of the range 0-1 in the\n// `Oklch` space. These are created in the `Oklab` space, as it is used by the\n// DeltaEOK calculation, so it is guaranteed to be imported.\nconst COLORS = {\n\tWHITE: { space: oklab, coords: [1, 0, 0] },\n\tBLACK: { space: oklab, coords: [0, 0, 0] },\n};\n\n/**\n * Given a color `origin`, returns a new color that is in gamut using\n * the CSS Gamut Mapping Algorithm. If `space` is specified, it will be in gamut\n * in `space`, and returned in `space`. Otherwise, it will be in gamut and\n * returned in the color space of `origin`.\n * @param {Object} origin\n * @param {Object} options\n * @param {ColorSpace|string} options.space\n * @returns {Color}\n */\nexport function toGamutCSS (origin, {space} = {}) {\n\tconst JND = 0.02;\n\tconst  = 0.0001;\n\n\torigin = getColor(origin);\n\n\tif (!space) {\n\t\tspace = origin.space;\n\t}\n\n\tspace = ColorSpace.get(space);\n\tconst oklchSpace = ColorSpace.get(\"oklch\");\n\n\tif (space.isUnbounded) {\n\t\treturn to(origin, space);\n\t}\n\n\tconst origin_OKLCH = to(origin, oklchSpace);\n\tlet L = origin_OKLCH.coords[0];\n\n\t// return media white or black, if lightness is out of range\n\tif (L >= 1) {\n\t\tconst white = to(COLORS.WHITE, space);\n\t\twhite.alpha = origin.alpha;\n\t\treturn to(white, space);\n\t}\n\tif (L <= 0) {\n\t\tconst black = to(COLORS.BLACK, space);\n\t\tblack.alpha = origin.alpha;\n\t\treturn to(black, space);\n\t}\n\n\tif (inGamut(origin_OKLCH, space, {epsilon: 0})) {\n\t\treturn to(origin_OKLCH, space);\n\t}\n\n\tfunction clip (_color) {\n\t\tconst destColor = to(_color, space);\n\t\tconst spaceCoords = Object.values(space.coords);\n\t\tdestColor.coords = destColor.coords.map((coord, index) => {\n\t\t\tif (\"range\" in spaceCoords[index]) {\n\t\t\t\tconst [min, max] =  spaceCoords[index].range;\n\t\t\t\treturn util.clamp(min, coord, max);\n\t\t\t}\n\t\t\treturn coord;\n\t\t});\n\t\treturn destColor;\n\t}\n\tlet min = 0;\n\tlet max = origin_OKLCH.coords[1];\n\tlet min_inGamut = true;\n\tlet current = clone(origin_OKLCH);\n\tlet clipped = clip(current);\n\n\tlet E = deltaEOK(clipped, current);\n\tif (E < JND) {\n\t\treturn clipped;\n\t}\n\n\twhile ((max - min) > ) {\n\t\tconst chroma = (min + max) / 2;\n\t\tcurrent.coords[1] = chroma;\n\t\tif (min_inGamut && inGamut(current, space, {epsilon: 0})) {\n\t\t\tmin = chroma;\n\t\t}\n\t\telse {\n\t\t\tclipped = clip(current);\n\t\t\tE = deltaEOK(clipped, current);\n\t\t\tif (E < JND) {\n\t\t\t\tif ((JND - E < )) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmin_inGamut = false;\n\t\t\t\t\tmin = chroma;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmax = chroma;\n\t\t\t}\n\t\t}\n\t}\n\treturn clipped;\n}\n", "import getColor from \"./getColor.js\";\nimport ColorSpace from \"./space.js\";\nimport toGamut from \"./toGamut.js\";\n\n/**\n * Convert to color space and return a new color\n * @param {Object|string} space - Color space object or id\n * @param {Object} options\n * @param {boolean} options.inGamut - Whether to force resulting color in gamut\n * @returns {Color}\n */\nexport default function to (color, space, {inGamut} = {}) {\n\tcolor = getColor(color);\n\tspace = ColorSpace.get(space);\n\n\tlet coords = space.from(color);\n\tlet ret = {space, coords, alpha: color.alpha};\n\n\tif (inGamut) {\n\t\tret = toGamut(ret, inGamut === true ? undefined : inGamut);\n\t}\n\n\treturn ret;\n}\n\nto.returns = \"color\";\n", "import * as util from \"./util.js\";\nimport ColorSpace from \"./space.js\";\nimport defaults from \"./defaults.js\";\nimport getColor from \"./getColor.js\";\nimport checkInGamut from \"./inGamut.js\";\nimport toGamut from \"./toGamut.js\";\nimport clone from \"./clone.js\";\n\n/**\n * Generic toString() method, outputs a color(spaceId ...coords) function, a functional syntax, or custom formats defined by the color space\n * @param {Object} options\n * @param {number} options.precision - Significant digits\n * @param {boolean} options.inGamut - Adjust coordinates to fit in gamut first? [default: false]\n */\nexport default function serialize (color, {\n\tprecision = defaults.precision,\n\tformat = \"default\",\n\tinGamut = true,\n\t...customOptions\n} = {}) {\n\tlet ret;\n\n\tcolor = getColor(color);\n\n\tlet formatId = format;\n\tformat = color.space.getFormat(format)\n\t       ?? color.space.getFormat(\"default\")\n\t       ?? ColorSpace.DEFAULT_FORMAT;\n\n\t// The assignment to coords and inGamut needs to stay in the order they are now\n\t// The order of the assignment was changed as a workaround for a bug in Next.js\n\t// See this issue for details: https://github.com/color-js/color.js/issues/260\n\n\tlet coords = color.coords.slice(); // clone so we can manipulate it\n\n\tinGamut ||= format.toGamut;\n\n\tif (inGamut && !checkInGamut(color)) {\n\t\t// FIXME what happens if the color contains NaNs?\n\t\tcoords = toGamut(clone(color), inGamut === true ? undefined : inGamut).coords;\n\t}\n\n\tif (format.type === \"custom\") {\n\t\tcustomOptions.precision = precision;\n\n\t\tif (format.serialize) {\n\t\t\tret = format.serialize(coords, color.alpha, customOptions);\n\t\t}\n\t\telse {\n\t\t\tthrow new TypeError(`format ${formatId} can only be used to parse colors, not for serialization`);\n\t\t}\n\t}\n\telse {\n\t\t// Functional syntax\n\t\tlet name = format.name || \"color\";\n\n\t\tif (format.serializeCoords) {\n\t\t\tcoords = format.serializeCoords(coords, precision);\n\t\t}\n\t\telse {\n\t\t\tif (precision !== null) {\n\t\t\t\tcoords = coords.map(c => {\n\t\t\t\t\treturn util.serializeNumber(c, {precision});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tlet args = [...coords];\n\n\t\tif (name === \"color\") {\n\t\t\t// If output is a color() function, add colorspace id as first argument\n\t\t\tlet cssId = format.id || format.ids?.[0] || color.space.id;\n\t\t\targs.unshift(cssId);\n\t\t}\n\n\t\tlet alpha = color.alpha;\n\t\tif (precision !== null) {\n\t\t\talpha = util.serializeNumber(alpha, {precision});\n\t\t}\n\n\t\tlet strAlpha = color.alpha >= 1 || format.noAlpha ? \"\" : `${format.commas ? \",\" : \" /\"} ${alpha}`;\n\t\tret = `${name}(${args.join(format.commas ? \", \" : \" \")}${strAlpha})`;\n\t}\n\n\treturn ret;\n}\n", "import RGBColorSpace from \"../rgbspace.js\";\n\n// convert an array of linear-light rec2020 values to CIE XYZ\n// using  D65 (no chromatic adaptation)\n// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n// 0 is actually calculated as  4.994106574466076e-17\nconst toXYZ_M = [\n\t[ 0.6369580483012914, 0.14461690358620832,  0.1688809751641721  ],\n\t[ 0.2627002120112671, 0.6779980715188708,   0.05930171646986196 ],\n\t[ 0.000000000000000,  0.028072693049087428, 1.060985057710791   ],\n];\n\n// from ITU-R BT.2124-0 Annex 2 p.3\nconst fromXYZ_M = [\n\t[  1.716651187971268,  -0.355670783776392, -0.253366281373660  ],\n\t[ -0.666684351832489,   1.616481236634939,  0.0157685458139111 ],\n\t[  0.017639857445311,  -0.042770613257809,  0.942103121235474  ],\n];\n\nexport default new RGBColorSpace({\n\tid: \"rec2020-linear\",\n\tcssId: \"--rec2020-linear\",\n\tname: \"Linear REC.2020\",\n\twhite: \"D65\",\n\ttoXYZ_M,\n\tfromXYZ_M,\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport REC2020Linear from \"./rec2020-linear.js\";\n// import sRGB from \"./srgb.js\";\n\nconst  = 1.09929682680944;\nconst  = 0.018053968510807;\n\nexport default new RGBColorSpace({\n\tid: \"rec2020\",\n\tname: \"REC.2020\",\n\tbase: REC2020Linear,\n\t// Non-linear transfer function from Rec. ITU-R BT.2020-2 table 4\n\ttoBase (RGB) {\n\t\treturn RGB.map(function (val) {\n\t\t\tif (val <  * 4.5) {\n\t\t\t\treturn val / 4.5;\n\t\t\t}\n\n\t\t\treturn Math.pow((val +  - 1) / , 1 / 0.45);\n\t\t});\n\t},\n\tfromBase (RGB) {\n\t\treturn RGB.map(function (val) {\n\t\t\tif (val >= ) {\n\t\t\t\treturn  * Math.pow(val, 0.45) - ( - 1);\n\t\t\t}\n\n\t\t\treturn 4.5 * val;\n\t\t});\n\t},\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\n\nconst toXYZ_M = [\n\t[0.4865709486482162, 0.26566769316909306, 0.1982172852343625],\n\t[0.2289745640697488, 0.6917385218365064,  0.079286914093745],\n\t[0.0000000000000000, 0.04511338185890264, 1.043944368900976],\n];\n\nconst fromXYZ_M = [\n\t[ 2.493496911941425,   -0.9313836179191239, -0.40271078445071684],\n\t[-0.8294889695615747,   1.7626640603183463,  0.023624685841943577],\n\t[ 0.03584583024378447, -0.07617238926804182, 0.9568845240076872],\n];\n\nexport default new RGBColorSpace({\n\tid: \"p3-linear\",\n\tcssId: \"--display-p3-linear\",\n\tname: \"Linear P3\",\n\twhite: \"D65\",\n\ttoXYZ_M,\n\tfromXYZ_M,\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\n\n// This is the linear-light version of sRGB\n// as used for example in SVG filters\n// or in Canvas\n\n// This matrix was calculated directly from the RGB and white chromaticities\n// when rounded to 8 decimal places, it agrees completely with the official matrix\n// see https://github.com/w3c/csswg-drafts/issues/5922\nconst toXYZ_M = [\n\t[ 0.41239079926595934, 0.357584339383878,   0.1804807884018343  ],\n\t[ 0.21263900587151027, 0.715168678767756,   0.07219231536073371 ],\n\t[ 0.01933081871559182, 0.11919477979462598, 0.9505321522496607  ],\n];\n\n// This matrix is the inverse of the above;\n// again it agrees with the official definition when rounded to 8 decimal places\nexport const fromXYZ_M = [\n\t[  3.2409699419045226,  -1.537383177570094,   -0.4986107602930034  ],\n\t[ -0.9692436362808796,   1.8759675015077202,   0.04155505740717559 ],\n\t[  0.05563007969699366, -0.20397695888897652,  1.0569715142428786  ],\n];\n\nexport default new RGBColorSpace({\n\tid: \"srgb-linear\",\n\tname: \"Linear sRGB\",\n\twhite: \"D65\",\n\ttoXYZ_M,\n\tfromXYZ_M,\n});\n", "/* List of CSS color keywords\n * Note that this does not include currentColor, transparent,\n * or system colors\n */\n\n// To produce: Visit https://www.w3.org/TR/css-color-4/#named-colors\n// and run in the console:\n// copy($$(\"tr\", $(\".named-color-table tbody\")).map(tr => `\"${tr.cells[2].textContent.trim()}\": [${tr.cells[4].textContent.trim().split(/\\s+/).map(c => c === \"0\"? \"0\" : c === \"255\"? \"1\" : c + \" / 255\").join(\", \")}]`).join(\",\\n\"))\nexport default {\n\t\"aliceblue\": [240 / 255, 248 / 255, 1],\n\t\"antiquewhite\": [250 / 255, 235 / 255, 215 / 255],\n\t\"aqua\": [0, 1, 1],\n\t\"aquamarine\": [127 / 255, 1, 212 / 255],\n\t\"azure\": [240 / 255, 1, 1],\n\t\"beige\": [245 / 255, 245 / 255, 220 / 255],\n\t\"bisque\": [1, 228 / 255, 196 / 255],\n\t\"black\": [0, 0, 0],\n\t\"blanchedalmond\": [1, 235 / 255, 205 / 255],\n\t\"blue\": [0, 0, 1],\n\t\"blueviolet\": [138 / 255, 43 / 255, 226 / 255],\n\t\"brown\": [165 / 255, 42 / 255, 42 / 255],\n\t\"burlywood\": [222 / 255, 184 / 255, 135 / 255],\n\t\"cadetblue\": [95 / 255, 158 / 255, 160 / 255],\n\t\"chartreuse\": [127 / 255, 1, 0],\n\t\"chocolate\": [210 / 255, 105 / 255, 30 / 255],\n\t\"coral\": [1, 127 / 255, 80 / 255],\n\t\"cornflowerblue\": [100 / 255, 149 / 255, 237 / 255],\n\t\"cornsilk\": [1, 248 / 255, 220 / 255],\n\t\"crimson\": [220 / 255, 20 / 255, 60 / 255],\n\t\"cyan\": [0, 1, 1],\n\t\"darkblue\": [0, 0, 139 / 255],\n\t\"darkcyan\": [0, 139 / 255, 139 / 255],\n\t\"darkgoldenrod\": [184 / 255, 134 / 255, 11 / 255],\n\t\"darkgray\": [169 / 255, 169 / 255, 169 / 255],\n\t\"darkgreen\": [0, 100 / 255, 0],\n\t\"darkgrey\": [169 / 255, 169 / 255, 169 / 255],\n\t\"darkkhaki\": [189 / 255, 183 / 255, 107 / 255],\n\t\"darkmagenta\": [139 / 255, 0, 139 / 255],\n\t\"darkolivegreen\": [85 / 255, 107 / 255, 47 / 255],\n\t\"darkorange\": [1, 140 / 255, 0],\n\t\"darkorchid\": [153 / 255, 50 / 255, 204 / 255],\n\t\"darkred\": [139 / 255, 0, 0],\n\t\"darksalmon\": [233 / 255, 150 / 255, 122 / 255],\n\t\"darkseagreen\": [143 / 255, 188 / 255, 143 / 255],\n\t\"darkslateblue\": [72 / 255, 61 / 255, 139 / 255],\n\t\"darkslategray\": [47 / 255, 79 / 255, 79 / 255],\n\t\"darkslategrey\": [47 / 255, 79 / 255, 79 / 255],\n\t\"darkturquoise\": [0, 206 / 255, 209 / 255],\n\t\"darkviolet\": [148 / 255, 0, 211 / 255],\n\t\"deeppink\": [1, 20 / 255, 147 / 255],\n\t\"deepskyblue\": [0, 191 / 255, 1],\n\t\"dimgray\": [105 / 255, 105 / 255, 105 / 255],\n\t\"dimgrey\": [105 / 255, 105 / 255, 105 / 255],\n\t\"dodgerblue\": [30 / 255, 144 / 255, 1],\n\t\"firebrick\": [178 / 255, 34 / 255, 34 / 255],\n\t\"floralwhite\": [1, 250 / 255, 240 / 255],\n\t\"forestgreen\": [34 / 255, 139 / 255, 34 / 255],\n\t\"fuchsia\": [1, 0, 1],\n\t\"gainsboro\": [220 / 255, 220 / 255, 220 / 255],\n\t\"ghostwhite\": [248 / 255, 248 / 255, 1],\n\t\"gold\": [1, 215 / 255, 0],\n\t\"goldenrod\": [218 / 255, 165 / 255, 32 / 255],\n\t\"gray\": [128 / 255, 128 / 255, 128 / 255],\n\t\"green\": [0, 128 / 255, 0],\n\t\"greenyellow\": [173 / 255, 1, 47 / 255],\n\t\"grey\": [128 / 255, 128 / 255, 128 / 255],\n\t\"honeydew\": [240 / 255, 1, 240 / 255],\n\t\"hotpink\": [1, 105 / 255, 180 / 255],\n\t\"indianred\": [205 / 255, 92 / 255, 92 / 255],\n\t\"indigo\": [75 / 255, 0, 130 / 255],\n\t\"ivory\": [1, 1, 240 / 255],\n\t\"khaki\": [240 / 255, 230 / 255, 140 / 255],\n\t\"lavender\": [230 / 255, 230 / 255, 250 / 255],\n\t\"lavenderblush\": [1, 240 / 255, 245 / 255],\n\t\"lawngreen\": [124 / 255, 252 / 255, 0],\n\t\"lemonchiffon\": [1, 250 / 255, 205 / 255],\n\t\"lightblue\": [173 / 255, 216 / 255, 230 / 255],\n\t\"lightcoral\": [240 / 255, 128 / 255, 128 / 255],\n\t\"lightcyan\": [224 / 255, 1, 1],\n\t\"lightgoldenrodyellow\": [250 / 255, 250 / 255, 210 / 255],\n\t\"lightgray\": [211 / 255, 211 / 255, 211 / 255],\n\t\"lightgreen\": [144 / 255, 238 / 255, 144 / 255],\n\t\"lightgrey\": [211 / 255, 211 / 255, 211 / 255],\n\t\"lightpink\": [1, 182 / 255, 193 / 255],\n\t\"lightsalmon\": [1, 160 / 255, 122 / 255],\n\t\"lightseagreen\": [32 / 255, 178 / 255, 170 / 255],\n\t\"lightskyblue\": [135 / 255, 206 / 255, 250 / 255],\n\t\"lightslategray\": [119 / 255, 136 / 255, 153 / 255],\n\t\"lightslategrey\": [119 / 255, 136 / 255, 153 / 255],\n\t\"lightsteelblue\": [176 / 255, 196 / 255, 222 / 255],\n\t\"lightyellow\": [1, 1, 224 / 255],\n\t\"lime\": [0, 1, 0],\n\t\"limegreen\": [50 / 255, 205 / 255, 50 / 255],\n\t\"linen\": [250 / 255, 240 / 255, 230 / 255],\n\t\"magenta\": [1, 0, 1],\n\t\"maroon\": [128 / 255, 0, 0],\n\t\"mediumaquamarine\": [102 / 255, 205 / 255, 170 / 255],\n\t\"mediumblue\": [0, 0, 205 / 255],\n\t\"mediumorchid\": [186 / 255, 85 / 255, 211 / 255],\n\t\"mediumpurple\": [147 / 255, 112 / 255, 219 / 255],\n\t\"mediumseagreen\": [60 / 255, 179 / 255, 113 / 255],\n\t\"mediumslateblue\": [123 / 255, 104 / 255, 238 / 255],\n\t\"mediumspringgreen\": [0, 250 / 255, 154 / 255],\n\t\"mediumturquoise\": [72 / 255, 209 / 255, 204 / 255],\n\t\"mediumvioletred\": [199 / 255, 21 / 255, 133 / 255],\n\t\"midnightblue\": [25 / 255, 25 / 255, 112 / 255],\n\t\"mintcream\": [245 / 255, 1, 250 / 255],\n\t\"mistyrose\": [1, 228 / 255, 225 / 255],\n\t\"moccasin\": [1, 228 / 255, 181 / 255],\n\t\"navajowhite\": [1, 222 / 255, 173 / 255],\n\t\"navy\": [0, 0, 128 / 255],\n\t\"oldlace\": [253 / 255, 245 / 255, 230 / 255],\n\t\"olive\": [128 / 255, 128 / 255, 0],\n\t\"olivedrab\": [107 / 255, 142 / 255, 35 / 255],\n\t\"orange\": [1, 165 / 255, 0],\n\t\"orangered\": [1, 69 / 255, 0],\n\t\"orchid\": [218 / 255, 112 / 255, 214 / 255],\n\t\"palegoldenrod\": [238 / 255, 232 / 255, 170 / 255],\n\t\"palegreen\": [152 / 255, 251 / 255, 152 / 255],\n\t\"paleturquoise\": [175 / 255, 238 / 255, 238 / 255],\n\t\"palevioletred\": [219 / 255, 112 / 255, 147 / 255],\n\t\"papayawhip\": [1, 239 / 255, 213 / 255],\n\t\"peachpuff\": [1, 218 / 255, 185 / 255],\n\t\"peru\": [205 / 255, 133 / 255, 63 / 255],\n\t\"pink\": [1, 192 / 255, 203 / 255],\n\t\"plum\": [221 / 255, 160 / 255, 221 / 255],\n\t\"powderblue\": [176 / 255, 224 / 255, 230 / 255],\n\t\"purple\": [128 / 255, 0, 128 / 255],\n\t\"rebeccapurple\": [102 / 255, 51 / 255, 153 / 255],\n\t\"red\": [1, 0, 0],\n\t\"rosybrown\": [188 / 255, 143 / 255, 143 / 255],\n\t\"royalblue\": [65 / 255, 105 / 255, 225 / 255],\n\t\"saddlebrown\": [139 / 255, 69 / 255, 19 / 255],\n\t\"salmon\": [250 / 255, 128 / 255, 114 / 255],\n\t\"sandybrown\": [244 / 255, 164 / 255, 96 / 255],\n\t\"seagreen\": [46 / 255, 139 / 255, 87 / 255],\n\t\"seashell\": [1, 245 / 255, 238 / 255],\n\t\"sienna\": [160 / 255, 82 / 255, 45 / 255],\n\t\"silver\": [192 / 255, 192 / 255, 192 / 255],\n\t\"skyblue\": [135 / 255, 206 / 255, 235 / 255],\n\t\"slateblue\": [106 / 255, 90 / 255, 205 / 255],\n\t\"slategray\": [112 / 255, 128 / 255, 144 / 255],\n\t\"slategrey\": [112 / 255, 128 / 255, 144 / 255],\n\t\"snow\": [1, 250 / 255, 250 / 255],\n\t\"springgreen\": [0, 1, 127 / 255],\n\t\"steelblue\": [70 / 255, 130 / 255, 180 / 255],\n\t\"tan\": [210 / 255, 180 / 255, 140 / 255],\n\t\"teal\": [0, 128 / 255, 128 / 255],\n\t\"thistle\": [216 / 255, 191 / 255, 216 / 255],\n\t\"tomato\": [1, 99 / 255, 71 / 255],\n\t\"turquoise\": [64 / 255, 224 / 255, 208 / 255],\n\t\"violet\": [238 / 255, 130 / 255, 238 / 255],\n\t\"wheat\": [245 / 255, 222 / 255, 179 / 255],\n\t\"white\": [1, 1, 1],\n\t\"whitesmoke\": [245 / 255, 245 / 255, 245 / 255],\n\t\"yellow\": [1, 1, 0],\n\t\"yellowgreen\": [154 / 255, 205 / 255, 50 / 255],\n};\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport sRGBLinear from \"./srgb-linear.js\";\nimport KEYWORDS from \"../keywords.js\";\n\nlet coordGrammar = Array(3).fill(\"<percentage> | <number>[0, 255]\");\nlet coordGrammarNumber = Array(3).fill(\"<number>[0, 255]\");\n\nexport default new RGBColorSpace({\n\tid: \"srgb\",\n\tname: \"sRGB\",\n\tbase: sRGBLinear,\n\tfromBase: rgb => {\n\t\t// convert an array of linear-light sRGB values in the range 0.0-1.0\n\t\t// to gamma corrected form\n\t\t// https://en.wikipedia.org/wiki/SRGB\n\t\treturn rgb.map(val => {\n\t\t\tlet sign = val < 0 ? -1 : 1;\n\t\t\tlet abs = val * sign;\n\n\t\t\tif (abs > 0.0031308) {\n\t\t\t\treturn sign * (1.055 * (abs ** (1 / 2.4)) - 0.055);\n\t\t\t}\n\n\t\t\treturn 12.92 * val;\n\t\t});\n\t},\n\ttoBase: rgb => {\n\t\t// convert an array of sRGB values in the range 0.0 - 1.0\n\t\t// to linear light (un-companded) form.\n\t\t// https://en.wikipedia.org/wiki/SRGB\n\t\treturn rgb.map(val => {\n\t\t\tlet sign = val < 0 ? -1 : 1;\n\t\t\tlet abs = val * sign;\n\n\t\t\tif (abs <= 0.04045) {\n\t\t\t\treturn val / 12.92;\n\t\t\t}\n\n\t\t\treturn sign * (((abs + 0.055) / 1.055) ** 2.4);\n\t\t});\n\t},\n\tformats: {\n\t\t\"rgb\": {\n\t\t\tcoords: coordGrammar,\n\t\t},\n\t\t\"rgb_number\": {\n\t\t\tname: \"rgb\",\n\t\t\tcommas: true,\n\t\t\tcoords: coordGrammarNumber,\n\t\t\tnoAlpha: true,\n\t\t},\n\t\t\"color\": { /* use defaults */ },\n\t\t\"rgba\": {\n\t\t\tcoords: coordGrammar,\n\t\t\tcommas: true,\n\t\t\tlastAlpha: true,\n\t\t},\n\t\t\"rgba_number\": {\n\t\t\tname: \"rgba\",\n\t\t\tcommas: true,\n\t\t\tcoords: coordGrammarNumber,\n\t\t},\n\t\t\"hex\": {\n\t\t\ttype: \"custom\",\n\t\t\ttoGamut: true,\n\t\t\ttest: str => /^#([a-f0-9]{3,4}){1,2}$/i.test(str),\n\t\t\tparse (str) {\n\t\t\t\tif (str.length <= 5) {\n\t\t\t\t\t// #rgb or #rgba, duplicate digits\n\t\t\t\t\tstr = str.replace(/[a-f0-9]/gi, \"$&$&\");\n\t\t\t\t}\n\n\t\t\t\tlet rgba = [];\n\t\t\t\tstr.replace(/[a-f0-9]{2}/gi, component => {\n\t\t\t\t\trgba.push(parseInt(component, 16) / 255);\n\t\t\t\t});\n\n\t\t\t\treturn {\n\t\t\t\t\tspaceId: \"srgb\",\n\t\t\t\t\tcoords: rgba.slice(0, 3),\n\t\t\t\t\talpha: rgba.slice(3)[0],\n\t\t\t\t};\n\t\t\t},\n\t\t\tserialize: (coords, alpha, {\n\t\t\t\tcollapse = true, // collapse to 3-4 digit hex when possible?\n\t\t\t} = {}) => {\n\t\t\t\tif (alpha < 1) {\n\t\t\t\t\tcoords.push(alpha);\n\t\t\t\t}\n\n\t\t\t\tcoords = coords.map(c => Math.round(c * 255));\n\n\t\t\t\tlet collapsible = collapse && coords.every(c => c % 17 === 0);\n\n\t\t\t\tlet hex = coords.map(c => {\n\t\t\t\t\tif (collapsible) {\n\t\t\t\t\t\treturn (c / 17).toString(16);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn c.toString(16).padStart(2, \"0\");\n\t\t\t\t}).join(\"\");\n\n\t\t\t\treturn \"#\" + hex;\n\t\t\t},\n\t\t},\n\t\t\"keyword\": {\n\t\t\ttype: \"custom\",\n\t\t\ttest: str => /^[a-z]+$/i.test(str),\n\t\t\tparse (str) {\n\t\t\t\tstr = str.toLowerCase();\n\t\t\t\tlet ret = {spaceId: \"srgb\", coords: null, alpha: 1};\n\n\t\t\t\tif (str === \"transparent\") {\n\t\t\t\t\tret.coords = KEYWORDS.black;\n\t\t\t\t\tret.alpha = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tret.coords = KEYWORDS[str];\n\t\t\t\t}\n\n\t\t\t\tif (ret.coords) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t},\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport P3Linear from \"./p3-linear.js\";\nimport sRGB from \"./srgb.js\";\n\nexport default new RGBColorSpace({\n\tid: \"p3\",\n\tcssId: \"display-p3\",\n\tname: \"P3\",\n\tbase: P3Linear,\n\t// Gamma encoding/decoding is the same as sRGB\n\tfromBase: sRGB.fromBase,\n\ttoBase: sRGB.toBase,\n});\n", "import { isNone, skipNone } from \"./util.js\";\nimport defaults from \"./defaults.js\";\nimport to from \"./to.js\";\nimport serialize from \"./serialize.js\";\nimport clone from \"./clone.js\";\nimport REC2020 from \"./spaces/rec2020.js\";\nimport P3 from \"./spaces/p3.js\";\nimport Lab from \"./spaces/lab.js\";\nimport sRGB from \"./spaces/srgb.js\";\n\n// Default space for CSS output. Code in Color.js makes this wider if there's a DOM available\ndefaults.display_space = sRGB;\n\nlet supportsNone;\n\nif (typeof CSS !== \"undefined\" && CSS.supports) {\n\t// Find widest supported color space for CSS\n\tfor (let space of [Lab, REC2020, P3]) {\n\t\tlet coords = space.getMinCoords();\n\t\tlet color = {space, coords, alpha: 1};\n\t\tlet str = serialize(color);\n\n\t\tif (CSS.supports(\"color\", str)) {\n\t\t\tdefaults.display_space = space;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\n/**\n * Returns a serialization of the color that can actually be displayed in the browser.\n * If the default serialization can be displayed, it is returned.\n * Otherwise, the color is converted to Lab, REC2020, or P3, whichever is the widest supported.\n * In Node.js, this is basically equivalent to `serialize()` but returns a `String` object instead.\n *\n * @export\n * @param {{space, coords} | Color | string} color\n * @param {*} [options={}] Options to be passed to serialize()\n * @param {ColorSpace | string} [options.space = defaults.display_space] Color space to use for serialization if default is not supported\n * @returns {String} String object containing the serialized color with a color property containing the converted color (or the original, if no conversion was necessary)\n */\nexport default function display (color, {space = defaults.display_space, ...options} = {}) {\n\tlet ret = serialize(color, options);\n\n\tif (typeof CSS === \"undefined\" || CSS.supports(\"color\", ret) || !defaults.display_space) {\n\t\tret = new String(ret);\n\t\tret.color = color;\n\t}\n\telse {\n\t\t// If we're here, what we were about to output is not supported\n\t\tlet fallbackColor = color;\n\n\t\t// First, check if the culprit is none values\n\t\tlet hasNone = color.coords.some(isNone) || isNone(color.alpha);\n\n\t\tif (hasNone) {\n\t\t\t// Does the browser support none values?\n\t\t\tif (!(supportsNone ??= CSS.supports(\"color\", \"hsl(none 50% 50%)\"))) {\n\t\t\t\t// Nope, try again without none\n\t\t\t\tfallbackColor = clone(color);\n\t\t\t\tfallbackColor.coords = fallbackColor.coords.map(skipNone);\n\t\t\t\tfallbackColor.alpha = skipNone(fallbackColor.alpha);\n\n\t\t\t\tret = serialize(fallbackColor, options);\n\n\t\t\t\tif (CSS.supports(\"color\", ret)) {\n\t\t\t\t\t// We're done, now it's supported\n\t\t\t\t\tret = new String(ret);\n\t\t\t\t\tret.color = fallbackColor;\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If we're here, the color function is not supported\n\t\t// Fall back to fallback space\n\t\tfallbackColor = to(fallbackColor, space);\n\t\tret = new String(serialize(fallbackColor, options));\n\t\tret.color = fallbackColor;\n\t}\n\n\treturn ret;\n}\n", "import getColor from \"./getColor.js\";\n\nexport default function equals (color1, color2) {\n\tcolor1 = getColor(color1);\n\tcolor2 = getColor(color2);\n\n\treturn color1.space === color2.space\n\t       && color1.alpha === color2.alpha\n\t       && color1.coords.every((c, i) => c === color2.coords[i]);\n}\n", "/**\n * Relative luminance\n */\nimport get from \"./get.js\";\nimport set from \"./set.js\";\nimport xyz_d65 from \"./spaces/xyz-d65.js\";\n\nexport function getLuminance (color) {\n\t// Assume getColor() is called on color in get()\n\treturn get(color, [xyz_d65, \"y\"]);\n}\n\nexport function setLuminance (color, value) {\n\t// Assume getColor() is called on color in set()\n\tset(color, [xyz_d65, \"y\"], value);\n}\n\nexport function register (Color) {\n\tObject.defineProperty(Color.prototype, \"luminance\", {\n\t\tget () {\n\t\t\treturn getLuminance(this);\n\t\t},\n\t\tset (value) {\n\t\t\tsetLuminance(this, value);\n\t\t},\n\t});\n}\n", "// WCAG 2.0 contrast https://www.w3.org/TR/WCAG20-TECHS/G18.html\n// Simple contrast, with fixed 5% viewing flare contribution\n// Symmetric, does not matter which is foreground and which is background\n\nimport getColor from \"../getColor.js\";\nimport {getLuminance} from \"../luminance.js\";\n\nexport default function contrastWCAG21 (color1, color2) {\n\tcolor1 = getColor(color1);\n\tcolor2 = getColor(color2);\n\n\tlet Y1 = Math.max(getLuminance(color1), 0);\n\tlet Y2 = Math.max(getLuminance(color2), 0);\n\n\tif (Y2 > Y1) {\n\t\t[Y1, Y2] = [Y2, Y1];\n\t}\n\n\treturn (Y1 + .05) / (Y2 + .05);\n}\n", "// APCA 0.0.98G\n// https://github.com/Myndex/apca-w3\n// see also https://github.com/w3c/silver/issues/643\n\nimport getColor from \"../getColor.js\";\nimport to from \"../to.js\";\n\n// exponents\nconst normBG = 0.56;\nconst normTXT = 0.57;\nconst revTXT = 0.62;\nconst revBG = 0.65;\n\n// clamps\nconst blkThrs = 0.022;\nconst blkClmp = 1.414;\nconst loClip = 0.1;\nconst deltaYmin = 0.0005;\n\n// scalers\n// see https://github.com/w3c/silver/issues/645\nconst scaleBoW = 1.14;\nconst loBoWoffset = 0.027;\nconst scaleWoB = 1.14;\nconst loWoBoffset = 0.027;\n\nfunction fclamp (Y) {\n\tif (Y >= blkThrs) {\n\t\treturn Y;\n\t}\n\treturn Y + (blkThrs - Y) ** blkClmp;\n}\n\nfunction linearize (val) {\n\tlet sign = val < 0 ? -1 : 1;\n\tlet abs = Math.abs(val);\n\treturn sign * Math.pow(abs, 2.4);\n}\n\n// Not symmetric, requires a foreground (text) color, and a background color\nexport default function contrastAPCA (background, foreground) {\n\tforeground = getColor(foreground);\n\tbackground = getColor(background);\n\n\tlet S;\n\tlet C;\n\tlet Sapc;\n\n\t// Myndex as-published, assumes sRGB inputs\n\tlet R, G, B;\n\n\tforeground = to(foreground, \"srgb\");\n\t// Should these be clamped to in-gamut values?\n\n\t// Calculates \"screen luminance\" with non-standard simple gamma EOTF\n\t// weights should be from CSS Color 4, not the ones here which are via Myndex and copied from Lindbloom\n\t[R, G, B] = foreground.coords;\n\tlet lumTxt = linearize(R) * 0.2126729 + linearize(G) * 0.7151522 + linearize(B) * 0.0721750;\n\n\tbackground = to(background, \"srgb\");\n\t[R, G, B] = background.coords;\n\tlet lumBg = linearize(R) * 0.2126729 + linearize(G) * 0.7151522 + linearize(B) * 0.0721750;\n\n\t// toe clamping of very dark values to account for flare\n\tlet Ytxt = fclamp(lumTxt);\n\tlet Ybg = fclamp(lumBg);\n\n\t// are we \"Black on White\" (dark on light), or light on dark?\n\tlet BoW = Ybg > Ytxt;\n\n\t// why is this a delta, when Y is not perceptually uniform?\n\t// Answer: it is a noise gate, see\n\t// https://github.com/LeaVerou/color.js/issues/208\n\tif (Math.abs(Ybg - Ytxt) < deltaYmin) {\n\t\tC = 0;\n\t}\n\telse {\n\t\tif (BoW) {\n\t\t\t// dark text on light background\n\t\t\tS = Ybg ** normBG - Ytxt ** normTXT;\n\t\t\tC = S * scaleBoW;\n\t\t}\n\t\telse {\n\t\t\t// light text on dark background\n\t\t\tS = Ybg ** revBG - Ytxt ** revTXT;\n\t\t\tC = S * scaleWoB;\n\t\t}\n\t}\n\tif (Math.abs(C) < loClip) {\n\t\tSapc = 0;\n\t}\n\telse if (C > 0) {\n\t\t// not clear whether Woffset is loBoWoffset or loWoBoffset\n\t\t// but they have the same value\n\t\tSapc = C - loBoWoffset;\n\t}\n\telse {\n\t\tSapc = C + loBoWoffset;\n\t}\n\n\treturn Sapc * 100;\n}\n", "// Michelson  luminance contrast\n// the relation between the spread and the sum of the two luminances\n// Symmetric, does not matter which is foreground and which is background\n// No black level compensation for flare.\n\nimport getColor from \"../getColor.js\";\nimport {getLuminance} from \"../luminance.js\";\n\nexport default function contrastMichelson (color1, color2) {\n\tcolor1 = getColor(color1);\n\tcolor2 = getColor(color2);\n\n\tlet Y1 = Math.max(getLuminance(color1), 0);\n\tlet Y2 = Math.max(getLuminance(color2), 0);\n\n\tif (Y2 > Y1) {\n\t\t[Y1, Y2] = [Y2, Y1];\n\t}\n\n\tlet denom = (Y1 + Y2);\n\treturn denom === 0 ? 0 : (Y1 - Y2) / denom;\n}\n", "// Weber luminance contrast\n// The difference between the two luminances divided by the lower luminance\n// Symmetric, does not matter which is foreground and which is background\n// No black level compensation for flare.\n\nimport getColor from \"../getColor.js\";\nimport {getLuminance} from \"../luminance.js\";\n\n// the darkest sRGB color above black is #000001 and this produces\n// a plain Weber contrast of ~45647.\n// So, setting the divide-by-zero result at 50000 is a reasonable\n// max clamp for the plain Weber\nconst max = 50000;\n\nexport default function contrastWeber (color1, color2) {\n\tcolor1 = getColor(color1);\n\tcolor2 = getColor(color2);\n\n\tlet Y1 = Math.max(getLuminance(color1), 0);\n\tlet Y2 = Math.max(getLuminance(color2), 0);\n\n\tif (Y2 > Y1) {\n\t\t[Y1, Y2] = [Y2, Y1];\n\t}\n\n\treturn Y2 === 0 ? max : (Y1 - Y2) / Y2;\n}\n", "// CIE Lightness difference, as used by Google Material Design\n// Google HCT Tone is the same as CIE Lightness\n// https://material.io/blog/science-of-color-design\n\nimport getColor from \"../getColor.js\";\nimport get from \"../get.js\";\nimport lab from \"../spaces/lab.js\";\n\nexport default function contrastLstar (color1, color2) {\n\tcolor1 = getColor(color1);\n\tcolor2 = getColor(color2);\n\n\tlet L1 = get(color1, [lab, \"l\"]);\n\tlet L2 = get(color2, [lab, \"l\"]);\n\n\treturn Math.abs(L1 - L2);\n}\n", "import ColorSpace from \"../space.js\";\nimport {WHITES} from \"../adapt.js\";\nimport xyz_d65 from \"./xyz-d65.js\";\n\n//  *   = 2^3 = 8\nconst  = 216 / 24389;  // 6^3/29^3 == (24/116)^3\nconst 3 = 24 / 116;\nconst  = 24389 / 27;   // 29^3/3^3\n\nlet white = WHITES.D65;\n\nexport default new ColorSpace({\n\tid: \"lab-d65\",\n\tname: \"Lab D65\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\ta: {\n\t\t\trefRange: [-125, 125],\n\t\t},\n\t\tb: {\n\t\t\trefRange: [-125, 125],\n\t\t},\n\t},\n\n\t// Assuming XYZ is relative to D65, convert to CIE Lab\n\t// from CIE standard, which now defines these as a rational fraction\n\twhite,\n\n\tbase: xyz_d65,\n\t// Convert D65-adapted XYZ to Lab\n\t//  CIE 15.3:2004 section 8.2.1.1\n\tfromBase (XYZ) {\n\t\t// compute xyz, which is XYZ scaled relative to reference white\n\t\tlet xyz = XYZ.map((value, i) => value / white[i]);\n\n\t\t// now compute f\n\t\tlet f = xyz.map(value => value >  ? Math.cbrt(value) : ( * value + 16) / 116);\n\n\t\treturn [\n\t\t\t(116 * f[1]) - 16,   // L\n\t\t\t500 * (f[0] - f[1]), // a\n\t\t\t200 * (f[1] - f[2]),  // b\n\t\t];\n\t},\n\t// Convert Lab to D65-adapted XYZ\n\t// Same result as CIE 15.3:2004 Appendix D although the derivation is different\n\t// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n\ttoBase (Lab) {\n\t\t// compute f, starting with the luminance-related term\n\t\tlet f = [];\n\t\tf[1] = (Lab[0] + 16) / 116;\n\t\tf[0] = Lab[1] / 500 + f[1];\n\t\tf[2] = f[1] - Lab[2] / 200;\n\n\t\t// compute xyz\n\t\tlet xyz = [\n\t\t\tf[0]   > 3 ? Math.pow(f[0], 3)                : (116 * f[0] - 16) / ,\n\t\t\tLab[0] > 8  ? Math.pow((Lab[0] + 16) / 116, 3) : Lab[0] / ,\n\t\t\tf[2]   > 3 ? Math.pow(f[2], 3)                : (116 * f[2] - 16) / ,\n\t\t];\n\n\t\t// Compute XYZ by scaling xyz by reference white\n\t\treturn xyz.map((value, i) => value * white[i]);\n\t},\n\n\tformats: {\n\t\t\"lab-d65\": {\n\t\t\tcoords: [\"<number> | <percentage>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"],\n\t\t},\n\t},\n});\n", "// Delta Phi Star perceptual lightness contrast\n// See https://github.com/Myndex/deltaphistar\n// The (difference between two Lstars each raised to phi) raised to (1/phi)\n// Symmetric, does not matter which is foreground and which is background\n\n\nimport getColor from \"../getColor.js\";\nimport get from \"../get.js\";\nimport lab_d65 from \"../spaces/lab-d65.js\";\n\nconst phi = Math.pow(5, 0.5) * 0.5 + 0.5; // Math.phi can be used if Math.js\n\nexport default function contrastDeltaPhi (color1, color2) {\n\tcolor1 = getColor(color1);\n\tcolor2 = getColor(color2);\n\n\tlet Lstr1 = get(color1, [lab_d65, \"l\"]);\n\tlet Lstr2 = get(color2, [lab_d65, \"l\"]);\n\n\tlet deltaPhiStar = Math.abs(Math.pow(Lstr1, phi) - Math.pow(Lstr2, phi));\n\n\tlet contrast = Math.pow(deltaPhiStar, (1 / phi)) * Math.SQRT2 - 40;\n\n\treturn (contrast < 7.5) ? 0.0 : contrast ;\n}\n", "import getColor from \"./getColor.js\";\n// import defaults from \"./defaults.js\";\nimport {isString} from \"./util.js\";\nimport * as contrastAlgorithms from \"./contrast/index.js\";\n\nexport default function contrast (background, foreground, o = {}) {\n\tif (isString(o)) {\n\t\to = {algorithm: o};\n\t}\n\n\tlet {algorithm, ...rest} = o;\n\n\tif (!algorithm) {\n\t\tlet algorithms = Object.keys(contrastAlgorithms).map(a => a.replace(/^contrast/, \"\")).join(\", \");\n\t\tthrow new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${algorithms}`);\n\t}\n\n\tbackground = getColor(background);\n\tforeground = getColor(foreground);\n\n\tfor (let a in contrastAlgorithms) {\n\t\tif (\"contrast\" + algorithm.toLowerCase() === a.toLowerCase()) {\n\t\t\treturn contrastAlgorithms[a](background, foreground, rest);\n\t\t}\n\t}\n\n\tthrow new TypeError(`Unknown contrast algorithm: ${algorithm}`);\n}\n", "import xyz_d65 from \"./spaces/xyz-d65.js\";\nimport getAll from \"./getAll.js\";\n\n// Chromaticity coordinates\nexport function uv (color) {\n\t// Assumes getAll() calls getColor() on color\n\tlet [X, Y, Z] = getAll(color, xyz_d65);\n\tlet denom = X + 15 * Y + 3 * Z;\n\treturn [4 * X / denom, 9 * Y / denom];\n}\n\nexport function xy (color) {\n\t// Assumes getAll() calls getColor() on color\n\tlet [X, Y, Z] = getAll(color, xyz_d65);\n\tlet  sum = X + Y + Z;\n\treturn [X / sum, Y / sum];\n}\n\nexport function register (Color) {\n\t// no setters, as lightness information is lost\n\t// when converting color to chromaticity\n\tObject.defineProperty(Color.prototype, \"uv\", {\n\t\tget () {\n\t\t\treturn uv(this);\n\t\t},\n\t});\n\n\tObject.defineProperty(Color.prototype, \"xy\", {\n\t\tget () {\n\t\t\treturn xy(this);\n\t\t},\n\t});\n}\n", "import defaults from \"./defaults.js\";\nimport {isString} from \"./util.js\";\nimport deltaEMethods from \"./deltaE/index.js\";\n\nexport default function deltaE (c1, c2, o = {}) {\n\tif (isString(o)) {\n\t\to = {method: o};\n\t}\n\n\tlet {method = defaults.deltaE, ...rest} = o;\n\n\tfor (let m in deltaEMethods) {\n\t\tif (\"deltae\" + method.toLowerCase() === m.toLowerCase()) {\n\t\t\treturn deltaEMethods[m](c1, c2, rest);\n\t\t}\n\t}\n\n\tthrow new TypeError(`Unknown deltaE method: ${method}`);\n}\n", "import ColorSpace from \"./space.js\";\nimport set from \"./set.js\";\n\nexport function lighten (color, amount = .25) {\n\tlet space = ColorSpace.get(\"oklch\", \"lch\");\n\tlet lightness = [space, \"l\"];\n\treturn set(color, lightness, l => l * (1 + amount));\n}\n\nexport function darken (color, amount = .25) {\n\tlet space = ColorSpace.get(\"oklch\", \"lch\");\n\tlet lightness = [space, \"l\"];\n\treturn set(color, lightness, l => l * (1 - amount));\n}\n", "/**\n * Functions related to color interpolation\n */\nimport ColorSpace from \"./space.js\";\nimport {type, interpolate} from \"./util.js\";\nimport getColor from \"./getColor.js\";\nimport clone from \"./clone.js\";\nimport to from \"./to.js\";\nimport toGamut from \"./toGamut.js\";\nimport get from \"./get.js\";\nimport set from \"./set.js\";\nimport defaults from \"./defaults.js\";\nimport * as angles from \"./angles.js\";\nimport deltaE from \"./deltaE.js\";\n\n/**\n * Return an intermediate color between two colors\n * Signatures: mix(c1, c2, p, options)\n *             mix(c1, c2, options)\n *             mix(color)\n * @param {Color | string} c1 The first color\n * @param {Color | string} [c2] The second color\n * @param {number} [p=.5] A 0-1 percentage where 0 is c1 and 1 is c2\n * @param {Object} [o={}]\n * @return {Color}\n */\nexport function mix (c1, c2, p = .5, o = {}) {\n\t[c1, c2] = [getColor(c1), getColor(c2)];\n\n\tif (type(p) === \"object\") {\n\t\t[p, o] = [.5, p];\n\t}\n\n\tlet r = range(c1, c2, o);\n\treturn r(p);\n}\n\n/**\n *\n * @param {Color | string | Function} c1 The first color or a range\n * @param {Color | string} [c2] The second color if c1 is not a range\n * @param {Object} [options={}]\n * @return {Color[]}\n */\nexport function steps (c1, c2, options = {}) {\n\tlet colorRange;\n\n\tif (isRange(c1)) {\n\t\t// Tweaking existing range\n\t\t[colorRange, options] = [c1, c2];\n\t\t[c1, c2] = colorRange.rangeArgs.colors;\n\t}\n\n\tlet {\n\t\tmaxDeltaE, deltaEMethod,\n\t\tsteps = 2, maxSteps = 1000,\n\t\t...rangeOptions\n\t} = options;\n\n\tif (!colorRange) {\n\t\t[c1, c2] = [getColor(c1), getColor(c2)];\n\t\tcolorRange = range(c1, c2, rangeOptions);\n\t}\n\n\tlet totalDelta = deltaE(c1, c2);\n\tlet actualSteps = maxDeltaE > 0 ? Math.max(steps, Math.ceil(totalDelta / maxDeltaE) + 1) : steps;\n\tlet ret = [];\n\n\tif (maxSteps !== undefined) {\n\t\tactualSteps = Math.min(actualSteps, maxSteps);\n\t}\n\n\tif (actualSteps === 1) {\n\t\tret = [{p: .5, color: colorRange(.5)}];\n\t}\n\telse {\n\t\tlet step = 1 / (actualSteps - 1);\n\t\tret = Array.from({length: actualSteps}, (_, i) => {\n\t\t\tlet p = i * step;\n\t\t\treturn {p, color: colorRange(p)};\n\t\t});\n\t}\n\n\tif (maxDeltaE > 0) {\n\t\t// Iterate over all stops and find max deltaE\n\t\tlet maxDelta = ret.reduce((acc, cur, i) => {\n\t\t\tif (i === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tlet  = deltaE(cur.color, ret[i - 1].color, deltaEMethod);\n\t\t\treturn Math.max(acc, );\n\t\t}, 0);\n\n\t\twhile (maxDelta > maxDeltaE) {\n\t\t\t// Insert intermediate stops and measure maxDelta again\n\t\t\t// We need to do this for all pairs, otherwise the midpoint shifts\n\t\t\tmaxDelta = 0;\n\n\t\t\tfor (let i = 1; (i < ret.length) && (ret.length < maxSteps); i++) {\n\t\t\t\tlet prev = ret[i - 1];\n\t\t\t\tlet cur = ret[i];\n\n\t\t\t\tlet p = (cur.p + prev.p) / 2;\n\t\t\t\tlet color = colorRange(p);\n\t\t\t\tmaxDelta = Math.max(maxDelta, deltaE(color, prev.color), deltaE(color, cur.color));\n\t\t\t\tret.splice(i, 0, {p, color: colorRange(p)});\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\t}\n\n\tret = ret.map(a => a.color);\n\n\treturn ret;\n}\n\n/**\n * Interpolate to color2 and return a function that takes a 0-1 percentage\n * @param {Color | string | Function} color1 The first color or an existing range\n * @param {Color | string} [color2] If color1 is a color, this is the second color\n * @param {Object} [options={}]\n * @returns {Function} A function that takes a 0-1 percentage and returns a color\n */\nexport function range (color1, color2, options = {}) {\n\tif (isRange(color1)) {\n\t\t// Tweaking existing range\n\t\tlet [r, options] = [color1, color2];\n\n\t\treturn range(...r.rangeArgs.colors, {...r.rangeArgs.options, ...options});\n\t}\n\n\tlet {space, outputSpace, progression, premultiplied} = options;\n\n\tcolor1 = getColor(color1);\n\tcolor2 = getColor(color2);\n\n\t// Make sure we're working on copies of these colors\n\tcolor1 = clone(color1);\n\tcolor2 = clone(color2);\n\n\tlet rangeArgs = {colors: [color1, color2], options};\n\n\tif (space) {\n\t\tspace = ColorSpace.get(space);\n\t}\n\telse {\n\t\tspace = ColorSpace.registry[defaults.interpolationSpace] || color1.space;\n\t}\n\n\toutputSpace = outputSpace ? ColorSpace.get(outputSpace) : space;\n\n\tcolor1 = to(color1, space);\n\tcolor2 = to(color2, space);\n\n\t// Gamut map to avoid areas of flat color\n\tcolor1 = toGamut(color1);\n\tcolor2 = toGamut(color2);\n\n\t// Handle hue interpolation\n\t// See https://github.com/w3c/csswg-drafts/issues/4735#issuecomment-635741840\n\tif (space.coords.h && space.coords.h.type === \"angle\") {\n\t\tlet arc = options.hue = options.hue || \"shorter\";\n\n\t\tlet hue = [space, \"h\"];\n\t\tlet [1, 2] = [get(color1, hue), get(color2, hue)];\n\t\t// Undefined hues must be evaluated before hue fix-up to properly\n\t\t// calculate hue arcs between undefined and defined hues.\n\t\t// See https://github.com/w3c/csswg-drafts/issues/9436#issuecomment-1746957545\n\t\tif (isNaN(1) && !isNaN(2)) {\n\t\t\t1 = 2;\n\t\t}\n\t\telse if (isNaN(2) && !isNaN(1)) {\n\t\t\t2 = 1;\n\t\t}\n\t\t[1, 2] = angles.adjust(arc, [1, 2]);\n\t\tset(color1, hue, 1);\n\t\tset(color2, hue, 2);\n\t}\n\n\tif (premultiplied) {\n\t\t// not coping with polar spaces yet\n\t\tcolor1.coords = color1.coords.map(c => c * color1.alpha);\n\t\tcolor2.coords = color2.coords.map(c => c * color2.alpha);\n\t}\n\n\treturn Object.assign(p => {\n\t\tp = progression ? progression(p) : p;\n\t\tlet coords = color1.coords.map((start, i) => {\n\t\t\tlet end = color2.coords[i];\n\t\t\treturn interpolate(start, end, p);\n\t\t});\n\n\t\tlet alpha = interpolate(color1.alpha, color2.alpha, p);\n\t\tlet ret = {space, coords, alpha};\n\n\t\tif (premultiplied) {\n\t\t\t// undo premultiplication\n\t\t\tret.coords = ret.coords.map(c => c / alpha);\n\t\t}\n\n\t\tif (outputSpace !== space) {\n\t\t\tret = to(ret, outputSpace);\n\t\t}\n\n\t\treturn ret;\n\t}, {\n\t\trangeArgs,\n\t});\n}\n\nexport function isRange (val) {\n\treturn type(val) === \"function\" && !!val.rangeArgs;\n}\n\ndefaults.interpolationSpace = \"lab\";\n\nexport function register (Color) {\n\tColor.defineFunction(\"mix\", mix, {returns: \"color\"});\n\tColor.defineFunction(\"range\", range, {returns: \"function<color>\"});\n\tColor.defineFunction(\"steps\", steps, {returns: \"array<color>\"});\n}\n", "import ColorSpace from \"../space.js\";\nimport sRGB from \"./srgb.js\";\n\nexport default new ColorSpace({\n\tid: \"hsl\",\n\tname: \"HSL\",\n\tcoords: {\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t\ts: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Saturation\",\n\t\t},\n\t\tl: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t},\n\n\tbase: sRGB,\n\n\t// Adapted from https://drafts.csswg.org/css-color-4/better-rgbToHsl.js\n\tfromBase: rgb => {\n\t\tlet max = Math.max(...rgb);\n\t\tlet min = Math.min(...rgb);\n\t\tlet [r, g, b] = rgb;\n\t\tlet [h, s, l] = [NaN, 0, (min + max) / 2];\n\t\tlet d = max - min;\n\n\t\tif (d !== 0) {\n\t\t\ts = (l === 0 || l === 1) ? 0 : (max - l) / Math.min(l, 1 - l);\n\n\t\t\tswitch (max) {\n\t\t\t\tcase r: h = (g - b) / d + (g < b ? 6 : 0); break;\n\t\t\t\tcase g: h = (b - r) / d + 2; break;\n\t\t\t\tcase b: h = (r - g) / d + 4;\n\t\t\t}\n\n\t\t\th = h * 60;\n\t\t}\n\n\t\t// Very out of gamut colors can produce negative saturation\n\t\t// If so, just rotate the hue by 180 and use a positive saturation\n\t\t// see https://github.com/w3c/csswg-drafts/issues/9222\n\t\tif (s < 0) {\n\t\t\th += 180;\n\t\t\ts = Math.abs(s);\n\t\t}\n\n\t\tif (h >= 360) {\n\t\t\th -= 360;\n\t\t}\n\n\t\treturn [h, s * 100, l * 100];\n\t},\n\n\t// Adapted from https://en.wikipedia.org/wiki/HSL_and_HSV#HSL_to_RGB_alternative\n\ttoBase: hsl => {\n\t\tlet [h, s, l] = hsl;\n\t\th = h % 360;\n\n\t\tif (h < 0) {\n\t\t\th += 360;\n\t\t}\n\n\t\ts /= 100;\n\t\tl /= 100;\n\n\t\tfunction f (n) {\n\t\t\tlet k = (n + h / 30) % 12;\n\t\t\tlet a = s * Math.min(l, 1 - l);\n\t\t\treturn l - a * Math.max(-1, Math.min(k - 3, 9 - k, 1));\n\t\t}\n\n\t\treturn [f(0), f(8), f(4)];\n\t},\n\n\tformats: {\n\t\t\"hsl\": {\n\t\t\tcoords: [\"<number> | <angle>\", \"<percentage>\", \"<percentage>\"],\n\t\t},\n\t\t\"hsla\": {\n\t\t\tcoords: [\"<number> | <angle>\", \"<percentage>\", \"<percentage>\"],\n\t\t\tcommas: true,\n\t\t\tlastAlpha: true,\n\t\t},\n\t},\n});\n", "import ColorSpace from \"../space.js\";\nimport HSL from \"./hsl.js\";\n\n// The Hue, Whiteness Blackness (HWB) colorspace\n// See https://drafts.csswg.org/css-color-4/#the-hwb-notation\n// Note that, like HSL, calculations are done directly on\n// gamma-corrected sRGB values rather than linearising them first.\n\nexport default new ColorSpace({\n\tid: \"hsv\",\n\tname: \"HSV\",\n\tcoords: {\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t\ts: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Saturation\",\n\t\t},\n\t\tv: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Value\",\n\t\t},\n\t},\n\n\tbase: HSL,\n\t// https://en.wikipedia.org/wiki/HSL_and_HSV#Interconversion\n\tfromBase (hsl) {\n\t\tlet [h, s, l] = hsl;\n\t\ts /= 100;\n\t\tl /= 100;\n\n\t\tlet v = l + s * Math.min(l, 1 - l);\n\n\t\treturn [\n\t\t\th, // h is the same\n\t\t\tv === 0 ? 0 : 200 * (1 - l / v), // s\n\t\t\t100 * v,\n\t\t];\n\t},\n\t// https://en.wikipedia.org/wiki/HSL_and_HSV#Interconversion\n\ttoBase (hsv) {\n\t\tlet [h, s, v] = hsv;\n\n\t\ts /= 100;\n\t\tv /= 100;\n\n\t\tlet l = v * (1 - s / 2);\n\n\t\treturn [\n\t\t\th, // h is the same\n\t\t\t(l === 0 || l === 1) ? 0 : ((v - l) / Math.min(l, 1 - l)) * 100,\n\t\t\tl * 100,\n\t\t];\n\t},\n\n\tformats: {\n\t\tcolor: {\n\t\t\tid: \"--hsv\",\n\t\t\tcoords: [\"<number> | <angle>\", \"<percentage> | <number>\", \"<percentage> | <number>\"],\n\t\t},\n\t},\n});\n", "import ColorSpace from \"../space.js\";\nimport HSV from \"./hsv.js\";\n\n// The Hue, Whiteness Blackness (HWB) colorspace\n// See https://drafts.csswg.org/css-color-4/#the-hwb-notation\n// Note that, like HSL, calculations are done directly on\n// gamma-corrected sRGB values rather than linearising them first.\n\nexport default new ColorSpace({\n\tid: \"hwb\",\n\tname: \"HWB\",\n\tcoords: {\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t\tw: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Whiteness\",\n\t\t},\n\t\tb: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Blackness\",\n\t\t},\n\t},\n\n\tbase: HSV,\n\tfromBase (hsv) {\n\t\tlet [h, s, v] = hsv;\n\n\t\treturn [h, v * (100 - s) / 100, 100 - v];\n\t},\n\ttoBase (hwb) {\n\t\tlet [h, w, b] = hwb;\n\n\t\t// Now convert percentages to [0..1]\n\t\tw /= 100;\n\t\tb /= 100;\n\n\t\t// Achromatic check (white plus black >= 1)\n\t\tlet sum = w + b;\n\t\tif (sum >= 1) {\n\t\t\tlet gray = w / sum;\n\t\t\treturn [h, 0, gray * 100];\n\t\t}\n\n\t\tlet v = (1 - b);\n\t\tlet s = (v === 0) ? 0 : 1 - w / v;\n\t\treturn [h, s * 100, v * 100];\n\t},\n\n\tformats: {\n\t\t\"hwb\": {\n\t\t\tcoords: [\"<number> | <angle>\", \"<percentage> | <number>\", \"<percentage> | <number>\"],\n\t\t},\n\t},\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\n\n// convert an array of linear-light a98-rgb values to CIE XYZ\n// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n// has greater numerical precision than section 4.3.5.3 of\n// https://www.adobe.com/digitalimag/pdfs/AdobeRGB1998.pdf\n// but the values below were calculated from first principles\n// from the chromaticity coordinates of R G B W\nconst toXYZ_M = [\n\t[ 0.5766690429101305,   0.1855582379065463,   0.1882286462349947  ],\n\t[ 0.29734497525053605,  0.6273635662554661,   0.07529145849399788 ],\n\t[ 0.02703136138641234,  0.07068885253582723,  0.9913375368376388  ],\n];\n\nconst fromXYZ_M = [\n\t[  2.0415879038107465,    -0.5650069742788596,   -0.34473135077832956 ],\n\t[ -0.9692436362808795,     1.8759675015077202,    0.04155505740717557 ],\n\t[  0.013444280632031142,  -0.11836239223101838,   1.0151749943912054  ],\n];\n\nexport default new RGBColorSpace({\n\tid: \"a98rgb-linear\",\n\tcssId: \"--a98-rgb-linear\",\n\tname: \"Linear Adobe 98 RGB compatible\",\n\twhite: \"D65\",\n\ttoXYZ_M,\n\tfromXYZ_M,\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport A98Linear from \"./a98rgb-linear.js\";\n\nexport default new RGBColorSpace({\n\tid: \"a98rgb\",\n\tcssId: \"a98-rgb\",\n\tname: \"Adobe 98 RGB compatible\",\n\tbase: A98Linear,\n\ttoBase: RGB => RGB.map(val => Math.pow(Math.abs(val), 563 / 256) * Math.sign(val)),\n\tfromBase: RGB => RGB.map(val => Math.pow(Math.abs(val), 256 / 563) * Math.sign(val)),\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport XYZ_D50 from \"./xyz-d50.js\";\n\n// convert an array of  prophoto-rgb values to CIE XYZ\n// using  D50 (so no chromatic adaptation needed afterwards)\n// matrix cannot be expressed in rational form, but is calculated to 64 bit accuracy\n// see https://github.com/w3c/csswg-drafts/issues/7675\nconst toXYZ_M = [\n\t[ 0.79776664490064230,  0.13518129740053308,  0.03134773412839220 ],\n\t[ 0.28807482881940130,  0.71183523424187300,  0.00008993693872564 ],\n\t[ 0.00000000000000000,  0.00000000000000000,  0.82510460251046020 ],\n];\n\nconst fromXYZ_M = [\n\t[  1.34578688164715830, -0.25557208737979464, -0.05110186497554526 ],\n\t[ -0.54463070512490190,  1.50824774284514680,  0.02052744743642139 ],\n\t[  0.00000000000000000,  0.00000000000000000,  1.21196754563894520 ],\n];\n\nexport default new RGBColorSpace({\n\tid: \"prophoto-linear\",\n\tcssId: \"--prophoto-rgb-linear\",\n\tname: \"Linear ProPhoto\",\n\twhite: \"D50\",\n\tbase: XYZ_D50,\n\ttoXYZ_M,\n\tfromXYZ_M,\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport ProPhotoLinear from \"./prophoto-linear.js\";\n\nconst Et = 1 / 512;\nconst Et2 = 16 / 512;\n\nexport default new RGBColorSpace({\n\tid: \"prophoto\",\n\tcssId: \"prophoto-rgb\",\n\tname: \"ProPhoto\",\n\tbase: ProPhotoLinear,\n\ttoBase (RGB) {\n\t\t// Transfer curve is gamma 1.8 with a small linear portion\n\t\treturn RGB.map(v => v < Et2 ? v / 16 : v ** 1.8);\n\t},\n\tfromBase (RGB) {\n\t\treturn RGB.map(v => v >= Et ? v ** (1 / 1.8) : 16 * v);\n\t},\n});\n", "import ColorSpace from \"../space.js\";\nimport OKLab from \"./oklab.js\";\nimport {constrain as constrainAngle} from \"../angles.js\";\n\nexport default new ColorSpace({\n\tid: \"oklch\",\n\tname: \"Oklch\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 1],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\tc: {\n\t\t\trefRange: [0, 0.4],\n\t\t\tname: \"Chroma\",\n\t\t},\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t},\n\twhite: \"D65\",\n\n\tbase: OKLab,\n\tfromBase (oklab) {\n\t\t// Convert to polar form\n\t\tlet [L, a, b] = oklab;\n\t\tlet h;\n\t\tconst  = 0.0002; // chromatic components much smaller than a,b\n\n\t\tif (Math.abs(a) <  && Math.abs(b) < ) {\n\t\t\th = NaN;\n\t\t}\n\t\telse {\n\t\t\th = Math.atan2(b, a) * 180 / Math.PI;\n\t\t}\n\n\t\treturn [\n\t\t\tL, // OKLab L is still L\n\t\t\tMath.sqrt(a ** 2 + b ** 2), // Chroma\n\t\t\tconstrainAngle(h), // Hue, in degrees [0 to 360)\n\t\t];\n\t},\n\t// Convert from polar form\n\ttoBase (oklch) {\n\t\tlet [L, C, h] = oklch;\n\t\tlet a, b;\n\n\t\t// check for NaN hue\n\t\tif (isNaN(h)) {\n\t\t\ta = 0;\n\t\t\tb = 0;\n\t\t}\n\t\telse {\n\t\t\ta = C * Math.cos(h * Math.PI / 180);\n\t\t\tb = C * Math.sin(h * Math.PI / 180);\n\t\t}\n\n\t\treturn [ L, a, b ];\n\t},\n\n\tformats: {\n\t\t\"oklch\": {\n\t\t\tcoords: [\"<percentage> | <number>\", \"<number> | <percentage>[0,1]\", \"<number> | <angle>\"],\n\t\t},\n\t},\n});\n", "import ColorSpace from \"../space.js\";\nimport {WHITES} from \"../adapt.js\";\nimport xyz_d65 from \"./xyz-d65.js\";\nimport {uv} from \"../chromaticity.js\";\nimport {isNone, skipNone} from \"../util.js\";\n\nlet white = WHITES.D65;\n\nconst  = 216 / 24389;  // 6^3/29^3 == (24/116)^3\nconst  = 24389 / 27;   // 29^3/3^3\nconst [U_PRIME_WHITE, V_PRIME_WHITE] = uv({space: xyz_d65, coords: white});\n\nexport default new ColorSpace({\n\tid: \"luv\",\n\tname: \"Luv\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\t// Reference ranges from https://facelessuser.github.io/coloraide/colors/luv/\n\t\tu: {\n\t\t\trefRange: [-215, 215],\n\t\t},\n\t\tv: {\n\t\t\trefRange: [-215, 215],\n\t\t},\n\t},\n\n\twhite: white,\n\tbase: xyz_d65,\n\n\t// Convert D65-adapted XYZ to Luv\n\t// https://en.wikipedia.org/wiki/CIELUV#The_forward_transformation\n\tfromBase (XYZ) {\n\t\tlet xyz = [skipNone(XYZ[0]), skipNone(XYZ[1]), skipNone(XYZ[2])];\n\t\tlet y = xyz[1];\n\n\t\tlet [up, vp] = uv({space: xyz_d65, coords: xyz});\n\n\t\t// Protect against XYZ of [0, 0, 0]\n\t\tif (!Number.isFinite(up) || !Number.isFinite(vp)) {\n\t\t\treturn [0, 0, 0];\n\t\t}\n\n\t\tlet L = y <=  ?  * y : 116 * Math.cbrt(y) - 16;\n\t\treturn [\n\t\t\tL,\n\t\t\t13 * L * (up - U_PRIME_WHITE),\n\t\t\t13 * L * (vp - V_PRIME_WHITE),\n\t\t ];\n\t},\n\n\t// Convert Luv to D65-adapted XYZ\n\t// https://en.wikipedia.org/wiki/CIELUV#The_reverse_transformation\n\ttoBase (Luv) {\n\t\tlet [L, u, v] = Luv;\n\n\t\t// Protect against division by zero and NaN Lightness\n\t\tif (L === 0 || isNone(L)) {\n\t\t\treturn [0, 0, 0];\n\t\t}\n\n\t\tu = skipNone(u);\n\t\tv = skipNone(v);\n\n\t\tlet up = (u / (13 * L)) + U_PRIME_WHITE;\n\t\tlet vp = (v / (13 * L)) + V_PRIME_WHITE;\n\n\t\tlet y = L <= 8 ? L /  : Math.pow((L + 16) / 116, 3);\n\n\t\treturn [\n\t\t\ty * ((9 * up) / (4 * vp)),\n\t\t\ty,\n\t\t\ty * ((12 - 3 * up - 20 * vp) / (4 * vp)),\n\t\t];\n\t},\n\n\tformats: {\n\t\tcolor: {\n\t\t\tid: \"--luv\",\n\t\t\tcoords: [\"<number> | <percentage>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"],\n\t\t},\n\t},\n});\n", "import ColorSpace from \"../space.js\";\nimport Luv from \"./luv.js\";\nimport {constrain as constrainAngle} from \"../angles.js\";\n\nexport default new ColorSpace({\n\tid: \"lchuv\",\n\tname: \"LChuv\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\tc: {\n\t\t\trefRange: [0, 220],\n\t\t\tname: \"Chroma\",\n\t\t},\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t},\n\n\tbase: Luv,\n\tfromBase (Luv) {\n\t\t// Convert to polar form\n\t\tlet [L, u, v] = Luv;\n\t\tlet hue;\n\t\tconst  = 0.02;\n\n\t\tif (Math.abs(u) <  && Math.abs(v) < ) {\n\t\t\thue = NaN;\n\t\t}\n\t\telse {\n\t\t\thue = Math.atan2(v, u) * 180 / Math.PI;\n\t\t}\n\n\t\treturn [\n\t\t\tL, // L is still L\n\t\t\tMath.sqrt(u ** 2 + v ** 2), // Chroma\n\t\t\tconstrainAngle(hue), // Hue, in degrees [0 to 360)\n\t\t];\n\t},\n\ttoBase (LCH) {\n\t\t// Convert from polar form\n\t\tlet [Lightness, Chroma, Hue] = LCH;\n\t\t// Clamp any negative Chroma\n\t\tif (Chroma < 0) {\n\t\t\tChroma = 0;\n\t\t}\n\t\t// Deal with NaN Hue\n\t\tif (isNaN(Hue)) {\n\t\t\tHue = 0;\n\t\t}\n\t\treturn [\n\t\t\tLightness, // L is still L\n\t\t\tChroma * Math.cos(Hue * Math.PI / 180), // u\n\t\t\tChroma * Math.sin(Hue * Math.PI / 180),  // v\n\t\t];\n\t},\n\n\tformats: {\n\t\tcolor: {\n\t\t\tid: \"--lchuv\",\n\t\t\tcoords: [\"<number> | <percentage>\", \"<number> | <percentage>\", \"<number> | <angle>\"],\n\t\t},\n\t},\n});\n", "/*\nAdapted from: https://github.com/hsluv/hsluv-javascript/blob/14b49e6cf9a9137916096b8487a5372626b57ba4/src/hsluv.ts\n\nCopyright (c) 2012-2022 Alexei Boronine\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport ColorSpace from \"../space.js\";\nimport LCHuv from \"./lchuv.js\";\nimport sRGB from \"./srgb.js\";\nimport {fromXYZ_M} from \"./srgb-linear.js\";\nimport {skipNone} from \"../util.js\";\n\nconst  = 216 / 24389;  // 6^3/29^3 == (24/116)^3\nconst  = 24389 / 27;   // 29^3/3^3\n\nconst m_r0 = fromXYZ_M[0][0];\nconst m_r1 = fromXYZ_M[0][1];\nconst m_r2 = fromXYZ_M[0][2];\nconst m_g0 = fromXYZ_M[1][0];\nconst m_g1 = fromXYZ_M[1][1];\nconst m_g2 = fromXYZ_M[1][2];\nconst m_b0 = fromXYZ_M[2][0];\nconst m_b1 = fromXYZ_M[2][1];\nconst m_b2 = fromXYZ_M[2][2];\n\nfunction distanceFromOriginAngle (slope, intercept, angle) {\n\tconst d = intercept / (Math.sin(angle) - slope * Math.cos(angle));\n\treturn d < 0 ? Infinity : d;\n}\n\nexport function calculateBoundingLines (l) {\n\tconst sub1 = Math.pow(l + 16, 3) / 1560896;\n\tconst sub2 = sub1 >  ? sub1 : l / ;\n\tconst s1r = sub2 * (284517 * m_r0 - 94839 * m_r2);\n\tconst s2r = sub2 * (838422 * m_r2 + 769860 * m_r1 + 731718 * m_r0);\n\tconst s3r = sub2 * (632260 * m_r2 - 126452 * m_r1);\n\tconst s1g = sub2 * (284517 * m_g0 - 94839 * m_g2);\n\tconst s2g = sub2 * (838422 * m_g2 + 769860 * m_g1 + 731718 * m_g0);\n\tconst s3g = sub2 * (632260 * m_g2 - 126452 * m_g1);\n\tconst s1b = sub2 * (284517 * m_b0 - 94839 * m_b2);\n\tconst s2b = sub2 * (838422 * m_b2 + 769860 * m_b1 + 731718 * m_b0);\n\tconst s3b = sub2 * (632260 * m_b2 - 126452 * m_b1);\n\n\treturn {\n\t\tr0s: s1r / s3r,\n\t\tr0i: s2r * l / s3r,\n\t\tr1s: s1r / (s3r + 126452),\n\t\tr1i: (s2r - 769860) * l / (s3r + 126452),\n\t\tg0s: s1g / s3g,\n\t\tg0i: s2g * l / s3g,\n\t\tg1s: s1g / (s3g + 126452),\n\t\tg1i: (s2g - 769860) * l / (s3g + 126452),\n\t\tb0s: s1b / s3b,\n\t\tb0i: s2b * l / s3b,\n\t\tb1s: s1b / (s3b + 126452),\n\t\tb1i: (s2b - 769860) * l / (s3b + 126452),\n\t};\n}\n\nfunction calcMaxChromaHsluv (lines, h) {\n\tconst hueRad = h / 360 * Math.PI * 2;\n\tconst r0 = distanceFromOriginAngle(lines.r0s, lines.r0i, hueRad);\n\tconst r1 = distanceFromOriginAngle(lines.r1s, lines.r1i, hueRad);\n\tconst g0 = distanceFromOriginAngle(lines.g0s, lines.g0i, hueRad);\n\tconst g1 = distanceFromOriginAngle(lines.g1s, lines.g1i, hueRad);\n\tconst b0 = distanceFromOriginAngle(lines.b0s, lines.b0i, hueRad);\n\tconst b1 = distanceFromOriginAngle(lines.b1s, lines.b1i, hueRad);\n\n\treturn Math.min(r0, r1, g0, g1, b0, b1);\n}\n\nexport default new ColorSpace({\n\tid: \"hsluv\",\n\tname: \"HSLuv\",\n\tcoords: {\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t\ts: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Saturation\",\n\t\t},\n\t\tl: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t},\n\n\tbase: LCHuv,\n\tgamutSpace: sRGB,\n\n\t// Convert LCHuv to HSLuv\n\tfromBase (lch) {\n\t\tlet [l, c, h] = [skipNone(lch[0]), skipNone(lch[1]), skipNone(lch[2])];\n\t\tlet s;\n\n\t\tif (l > 99.9999999) {\n\t\t\ts = 0;\n\t\t\tl = 100;\n\t\t}\n\t\telse if (l < 0.00000001) {\n\t\t\ts = 0;\n\t\t\tl = 0;\n\t\t}\n\t\telse {\n\t\t\tlet lines = calculateBoundingLines(l);\n\t\t\tlet max = calcMaxChromaHsluv(lines, h);\n\t\t\ts = c / max * 100;\n\t\t}\n\n\t\treturn [h, s, l];\n\t},\n\n\t// Convert HSLuv to LCHuv\n\ttoBase (hsl) {\n\t\tlet [h, s, l] = [skipNone(hsl[0]), skipNone(hsl[1]), skipNone(hsl[2])];\n\t\tlet c;\n\n\t\tif (l > 99.9999999) {\n\t\t\tl = 100;\n\t\t\tc = 0;\n\t\t}\n\t\telse if (l < 0.00000001) {\n\t\t\tl = 0;\n\t\t\tc = 0;\n\t\t}\n\t\telse {\n\t\t\tlet lines = calculateBoundingLines(l);\n\t\t\tlet max = calcMaxChromaHsluv(lines, h);\n\t\t\tc = max / 100 * s;\n\t\t}\n\n\t\treturn [l, c, h];\n\t},\n\n\tformats: {\n\t\tcolor: {\n\t\t\tid: \"--hsluv\",\n\t\t\tcoords: [\"<number> | <angle>\", \"<percentage> | <number>\", \"<percentage> | <number>\"],\n\t\t},\n\t},\n});\n", "/*\nAdapted from: https://github.com/hsluv/hsluv-javascript/blob/14b49e6cf9a9137916096b8487a5372626b57ba4/src/hsluv.ts\n\nCopyright (c) 2012-2022 Alexei Boronine\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport ColorSpace from \"../space.js\";\nimport LCHuv from \"./lchuv.js\";\nimport {fromXYZ_M} from \"./srgb-linear.js\";\nimport {skipNone} from \"../util.js\";\nimport {calculateBoundingLines} from \"./hsluv.js\";\n\nconst  = 216 / 24389;  // 6^3/29^3 == (24/116)^3\nconst  = 24389 / 27;   // 29^3/3^3\n\nconst m_r0 = fromXYZ_M[0][0];\nconst m_r1 = fromXYZ_M[0][1];\nconst m_r2 = fromXYZ_M[0][2];\nconst m_g0 = fromXYZ_M[1][0];\nconst m_g1 = fromXYZ_M[1][1];\nconst m_g2 = fromXYZ_M[1][2];\nconst m_b0 = fromXYZ_M[2][0];\nconst m_b1 = fromXYZ_M[2][1];\nconst m_b2 = fromXYZ_M[2][2];\n\nfunction distanceFromOrigin (slope, intercept) {\n\treturn Math.abs(intercept) / Math.sqrt(Math.pow(slope, 2) + 1);\n}\n\nfunction calcMaxChromaHpluv (lines) {\n\tlet r0 = distanceFromOrigin(lines.r0s, lines.r0i);\n\tlet r1 = distanceFromOrigin(lines.r1s, lines.r1i);\n\tlet g0 = distanceFromOrigin(lines.g0s, lines.g0i);\n\tlet g1 = distanceFromOrigin(lines.g1s, lines.g1i);\n\tlet b0 = distanceFromOrigin(lines.b0s, lines.b0i);\n\tlet b1 = distanceFromOrigin(lines.b1s, lines.b1i);\n\n\treturn Math.min(r0, r1, g0, g1, b0, b1);\n}\n\nexport default new ColorSpace({\n\tid: \"hpluv\",\n\tname: \"HPLuv\",\n\tcoords: {\n\t\th: {\n\t\t\trefRange: [0, 360],\n\t\t\ttype: \"angle\",\n\t\t\tname: \"Hue\",\n\t\t},\n\t\ts: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Saturation\",\n\t\t},\n\t\tl: {\n\t\t\trange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t},\n\n\tbase: LCHuv,\n\tgamutSpace: \"self\",\n\n\t// Convert LCHuv to HPLuv\n\tfromBase (lch) {\n\t\tlet [l, c, h] = [skipNone(lch[0]), skipNone(lch[1]), skipNone(lch[2])];\n\t\tlet s;\n\n\t\tif (l > 99.9999999) {\n\t\t\ts = 0;\n\t\t\tl = 100;\n\t\t}\n\t\telse if (l < 0.00000001) {\n\t\t\ts = 0;\n\t\t\tl = 0;\n\t\t}\n\t\telse {\n\t\t\tlet lines = calculateBoundingLines(l);\n\t\t\tlet max = calcMaxChromaHpluv(lines);\n\t\t\ts = c / max * 100;\n\t\t}\n\t\treturn [h, s, l];\n\t},\n\n\t// Convert HPLuv to LCHuv\n\ttoBase (hsl) {\n\t\tlet [h, s, l] = [skipNone(hsl[0]), skipNone(hsl[1]), skipNone(hsl[2])];\n\t\tlet c;\n\n\t\tif (l > 99.9999999) {\n\t\t\tl = 100;\n\t\t\tc = 0;\n\t\t}\n\t\telse if (l < 0.00000001) {\n\t\t\tl = 0;\n\t\t\tc = 0;\n\t\t}\n\t\telse {\n\t\t\tlet lines = calculateBoundingLines(l);\n\t\t\tlet max = calcMaxChromaHpluv(lines, h);\n\t\t\tc = max / 100 * s;\n\t\t}\n\n\t\treturn [l, c, h];\n\t},\n\n\tformats: {\n\t\tcolor: {\n\t\t\tid: \"--hpluv\",\n\t\t\tcoords: [\"<number> | <angle>\", \"<percentage> | <number>\", \"<percentage> | <number>\"],\n\t\t},\n\t},\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport REC2020Linear from \"./rec2020-linear.js\";\n\nconst Yw = 203;\t// absolute luminance of media white, cd/m\nconst n = 2610 / (2 ** 14);\nconst ninv = (2 ** 14) / 2610;\nconst m = 2523 / (2 ** 5);\nconst minv = (2 ** 5) / 2523;\nconst c1 = 3424 / (2 ** 12);\nconst c2 = 2413 / (2 ** 7);\nconst c3 = 2392 / (2 ** 7);\n\nexport default new RGBColorSpace({\n\tid: \"rec2100pq\",\n\tcssId: \"rec2100-pq\",\n\tname: \"REC.2100-PQ\",\n\tbase: REC2020Linear,\n\ttoBase (RGB) {\n\t\t// given PQ encoded component in range [0, 1]\n\t\t// return media-white relative linear-light\n\t\treturn RGB.map(function (val) {\n\t\t\tlet x = ((Math.max(((val ** minv) - c1), 0) / (c2 - (c3 * (val ** minv)))) ** ninv);\n\t\t\treturn (x * 10000 / Yw); \t// luminance relative to diffuse white, [0, 70 or so].\n\t\t});\n\t},\n\tfromBase (RGB) {\n\t\t// given media-white relative linear-light\n\t\t// returnPQ encoded component in range [0, 1]\n\t\treturn RGB.map(function (val) {\n\t\t\tlet x = Math.max(val * Yw / 10000, 0); \t// absolute luminance of peak white is 10,000 cd/m.\n\t\t\tlet num = (c1 + (c2 * (x ** n)));\n\t\t\tlet denom = (1 + (c3 * (x ** n)));\n\n\t\t\treturn ((num / denom)  ** m);\n\t\t});\n\t},\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport REC2020Linear from \"./rec2020-linear.js\";\n\n// FIXME see https://github.com/LeaVerou/color.js/issues/190\n\nconst a = 0.17883277;\nconst b = 0.28466892; // 1 - (4 * a)\nconst c = 0.55991073; // 0.5 - a * Math.log(4 *a)\n\nconst scale = 3.7743;\t// Place 18% grey at HLG 0.38, so media white at 0.75\n\nexport default new RGBColorSpace({\n\tid: \"rec2100hlg\",\n\tcssId: \"rec2100-hlg\",\n\tname: \"REC.2100-HLG\",\n\treferred: \"scene\",\n\n\tbase: REC2020Linear,\n\ttoBase (RGB) {\n\t\t// given HLG encoded component in range [0, 1]\n\t\t// return media-white relative linear-light\n\t\treturn RGB.map(function (val) {\n\t\t\t// first the HLG EOTF\n\t\t\t// ITU-R BT.2390-10 p.30 section\n\t\t\t// 6.3 The hybrid log-gamma electro-optical transfer function (EOTF)\n\t\t\t// Then scale by 3 so media white is 1.0\n\t\t\tif (val <= 0.5) {\n\t\t\t\treturn (val ** 2) / 3 * scale;\n\t\t\t}\n\t\t\treturn ((Math.exp((val - c) / a) + b) / 12) * scale;\n\t\t});\n\t},\n\tfromBase (RGB) {\n\t\t// given media-white relative linear-light\n\t\t// where diffuse white is 1.0,\n\t\t// return HLG encoded component in range [0, 1]\n\t\treturn RGB.map(function (val) {\n\t\t\t// first scale to put linear-light media white at 1/3\n\t\t\tval /= scale;\n\t\t\t// now the HLG OETF\n\t\t\t// ITU-R BT.2390-10 p.23\n\t\t\t// 6.1 The hybrid log-gamma opto-electronic transfer function (OETF)\n\t\t\tif (val <= 1 / 12) {\n\t\t\t\treturn Math.sqrt(3 * val);\n\t\t\t}\n\t\t\treturn a * Math.log(12 * val - b) + c;\n\t\t});\n\t},\n});\n", "import hooks from \"./hooks.js\";\nimport {multiplyMatrices} from \"./util.js\";\nimport {WHITES} from \"./adapt.js\";\n\nexport const CATs = {};\n\nhooks.add(\"chromatic-adaptation-start\", env => {\n\tif (env.options.method) {\n\t\tenv.M = adapt(env.W1, env.W2, env.options.method);\n\t}\n});\n\nhooks.add(\"chromatic-adaptation-end\", env => {\n\tif (!env.M) {\n\t\tenv.M = adapt(env.W1, env.W2, env.options.method);\n\t}\n});\n\nexport function defineCAT ({id, toCone_M, fromCone_M}) {\n\t// Use id, toCone_M, fromCone_M like variables\n\tCATs[id] = arguments[0];\n}\n\nexport function adapt (W1, W2, id = \"Bradford\") {\n\t// adapt from a source whitepoint or illuminant W1\n\t// to a destination whitepoint or illuminant W2,\n\t// using the given chromatic adaptation transform (CAT)\n\t// debugger;\n\tlet method = CATs[id];\n\n\tlet [s, s, s] = multiplyMatrices(method.toCone_M, W1);\n\tlet [d, d, d] = multiplyMatrices(method.toCone_M, W2);\n\n\t// all practical illuminants have non-zero XYZ so no division by zero can occur below\n\tlet scale = [\n\t\t[d / s,  0,        0      ],\n\t\t[0,        d / s,  0      ],\n\t\t[0,        0,        d / s],\n\t];\n\t// console.log({scale});\n\n\tlet scaled_cone_M = multiplyMatrices(scale, method.toCone_M);\n\tlet adapt_M\t= multiplyMatrices(method.fromCone_M, scaled_cone_M);\n\t// console.log({scaled_cone_M, adapt_M});\n\treturn adapt_M;\n}\n\ndefineCAT({\n\tid: \"von Kries\",\n\ttoCone_M: [\n\t\t[  0.4002400,  0.7076000, -0.0808100 ],\n\t\t[ -0.2263000,  1.1653200,  0.0457000 ],\n\t\t[  0.0000000,  0.0000000,  0.9182200 ],\n\t],\n\tfromCone_M: [\n\t\t[ 1.8599363874558397, -1.1293816185800916,   0.21989740959619328     ],\n\t\t[ 0.3611914362417676,  0.6388124632850422,  -0.000006370596838649899 ],\n\t\t[ 0,                   0,                    1.0890636230968613      ],\n\t],\n});\n\ndefineCAT({\n\tid: \"Bradford\",\n\t// Convert an array of XYZ values in the range 0.0 - 1.0\n\t// to cone fundamentals\n\ttoCone_M: [\n\t\t[  0.8951000,  0.2664000, -0.1614000 ],\n\t\t[ -0.7502000,  1.7135000,  0.0367000 ],\n\t\t[  0.0389000, -0.0685000,  1.0296000 ],\n\t],\n\t// and back\n\tfromCone_M: [\n\t\t[  0.9869929054667121, -0.14705425642099013, 0.15996265166373122  ],\n\t\t[  0.4323052697233945,  0.5183602715367774,  0.049291228212855594 ],\n\t\t[ -0.00852866457517732, 0.04004282165408486, 0.96848669578755     ],\n\t],\n});\n\ndefineCAT({\n\tid: \"CAT02\",\n\t// with complete chromatic adaptation to W2, so D = 1.0\n\ttoCone_M: [\n\t\t[  0.7328000,  0.4296000, -0.1624000 ],\n\t\t[ -0.7036000,  1.6975000,  0.0061000 ],\n\t\t[  0.0030000,  0.0136000,  0.9834000 ],\n\t],\n\tfromCone_M: [\n\t\t[  1.0961238208355142,   -0.27886900021828726, 0.18274517938277307 ],\n\t\t[  0.4543690419753592,    0.4735331543074117,  0.07209780371722911 ],\n\t\t[ -0.009627608738429355, -0.00569803121611342, 1.0153256399545427  ],\n\t],\n});\n\ndefineCAT({\n\tid: \"CAT16\",\n\ttoCone_M: [\n\t\t[  0.401288,  0.650173, -0.051461 ],\n\t\t[ -0.250268,  1.204414,  0.045854 ],\n\t\t[ -0.002079,  0.048952,  0.953127 ],\n\t],\n\t// the extra precision is needed to avoid roundtripping errors\n\tfromCone_M: [\n\t\t[  1.862067855087233,   -1.0112546305316845,  0.14918677544445172  ],\n\t\t[  0.3875265432361372,   0.6214474419314753, -0.008973985167612521 ],\n\t\t[ -0.01584149884933386, -0.03412293802851557, 1.0499644368778496   ],\n\t],\n});\n\nObject.assign(WHITES, {\n\t// whitepoint values from ASTM E308-01 with 10nm spacing, 1931 2 degree observer\n\t// all normalized to Y (luminance) = 1.00000\n\t// Illuminant A is a tungsten electric light, giving a very warm, orange light.\n\tA:   [1.09850, 1.00000, 0.35585],\n\n\t// Illuminant C was an early approximation to daylight: illuminant A with a blue filter.\n\tC:   [0.98074, 1.000000, 1.18232],\n\n\t// The daylight series of illuminants simulate natural daylight.\n\t// The color temperature (in degrees Kelvin/100) ranges from\n\t// cool, overcast daylight (D50) to bright, direct sunlight (D65).\n\tD55: [0.95682, 1.00000, 0.92149],\n\tD75: [0.94972, 1.00000, 1.22638],\n\n\t// Equal-energy illuminant, used in two-stage CAT16\n\tE:   [1.00000, 1.00000, 1.00000],\n\n\t// The F series of illuminants represent fluorescent lights\n\tF2:  [0.99186, 1.00000, 0.67393],\n\tF7:  [0.95041, 1.00000, 1.08747],\n\tF11: [1.00962, 1.00000, 0.64350],\n});\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport {WHITES} from \"../adapt.js\";\nimport \"../CATs.js\"; // because of the funky whitepoint\n\n// The ACES whitepoint\n// see TB-2018-001 Derivation of the ACES White Point CIE Chromaticity Coordinates\n// also https://github.com/ampas/aces-dev/blob/master/documents/python/TB-2018-001/aces_wp.py\n// Similar to D60\nWHITES.ACES = [0.32168 / 0.33767, 1.00000, (1.00000 - 0.32168 - 0.33767) / 0.33767];\n\n// convert an array of linear-light ACEScc values to CIE XYZ\nconst toXYZ_M = [\n\t[  0.6624541811085053,   0.13400420645643313,  0.1561876870049078  ],\n\t[  0.27222871678091454,  0.6740817658111484,   0.05368951740793705 ],\n\t[ -0.005574649490394108, 0.004060733528982826, 1.0103391003129971  ],\n];\nconst fromXYZ_M = [\n\t[  1.6410233796943257,   -0.32480329418479,    -0.23642469523761225  ],\n\t[ -0.6636628587229829,    1.6153315916573379,   0.016756347685530137 ],\n\t[  0.011721894328375376, -0.008284441996237409, 0.9883948585390215   ],\n];\n\nexport default new RGBColorSpace({\n\tid: \"acescg\",\n\tcssId: \"--acescg\",\n\tname: \"ACEScg\",\n\n\t// ACEScg  A scene-referred, linear-light encoding of ACES Data\n\t// https://docs.acescentral.com/specifications/acescg/\n\t// uses the AP1 primaries, see section 4.3.1 Color primaries\n\tcoords: {\n\t\tr: {\n\t\t\trange: [0, 65504],\n\t\t\tname: \"Red\",\n\t\t},\n\t\tg: {\n\t\t\trange: [0, 65504],\n\t\t\tname: \"Green\",\n\t\t},\n\t\tb: {\n\t\t\trange: [0, 65504],\n\t\t\tname: \"Blue\",\n\t\t},\n\t},\n\n\treferred: \"scene\",\n\n\twhite: WHITES.ACES,\n\n\ttoXYZ_M,\n\tfromXYZ_M,\n});\n\n// export default Color;\n", "import RGBColorSpace from \"../rgbspace.js\";\nimport \"../CATs.js\"; // because of the funky whitepoint\nimport ACEScg from \"./acescg.js\";\n\nconst  = 2 ** -16;\n\n// the smallest value which, in the 32bit IEEE 754 float encoding,\n// decodes as a non-negative value\nconst ACES_min_nonzero = -0.35828683;\n\n// brightest encoded value, decodes to 65504\nconst ACES_cc_max = (Math.log2(65504) + 9.72) / 17.52; // 1.468\n\nexport default new RGBColorSpace({\n\tid: \"acescc\",\n\tcssId: \"--acescc\",\n\tname: \"ACEScc\",\n\t// see S-2014-003 ACEScc  A Logarithmic Encoding of ACES Data\n\t// https://docs.acescentral.com/specifications/acescc/\n\t// uses the AP1 primaries, see section 4.3.1 Color primaries\n\n\t// Appendix A: \"Very small ACES scene referred values below 7 1/4 stops\n\t// below 18% middle gray are encoded as negative ACEScc values.\n\t// These values should be preserved per the encoding in Section 4.4\n\t// so that all positive ACES values are maintained.\"\n\tcoords: {\n\t\tr: {\n\t\t\trange: [ACES_min_nonzero, ACES_cc_max],\n\t\t\tname: \"Red\",\n\t\t},\n\t\tg: {\n\t\t\trange: [ACES_min_nonzero, ACES_cc_max],\n\t\t\tname: \"Green\",\n\t\t},\n\t\tb: {\n\t\t\trange: [ACES_min_nonzero, ACES_cc_max],\n\t\t\tname: \"Blue\",\n\t\t},\n\t},\n\treferred: \"scene\",\n\n\tbase: ACEScg,\n\t// from section 4.4.2 Decoding Function\n\ttoBase (RGB) {\n\t\tconst low = (9.72 - 15) / 17.52; // -0.3014\n\n\t\treturn RGB.map(function (val) {\n\t\t\tif (val <= low) {\n\t\t\t\treturn (2 ** ((val * 17.52) - 9.72) - ) * 2; // very low values, below -0.3014\n\t\t\t}\n\t\t\telse if (val < ACES_cc_max) {\n\t\t\t\treturn 2 ** ((val * 17.52) - 9.72);\n\t\t\t}\n\t\t\telse { // val >= ACES_cc_max\n\t\t\t\treturn 65504;\n\t\t\t}\n\t\t});\n\t},\n\n\t// Non-linear encoding function from S-2014-003, section 4.4.1 Encoding Function\n\tfromBase (RGB) {\n\t\treturn RGB.map(function (val) {\n\t\t\tif (val <= 0) {\n\t\t\t\treturn (Math.log2() + 9.72) / 17.52; // -0.3584\n\t\t\t}\n\t\t\telse if (val < ) {\n\t\t\t\treturn  (Math.log2( + val * 0.5) + 9.72) / 17.52;\n\t\t\t}\n\t\t\telse { // val >= \n\t\t\t\treturn  (Math.log2(val) + 9.72) / 17.52;\n\t\t\t}\n\t\t});\n\t},\n\t// encoded media white (rgb 1,1,1) => linear  [ 222.861, 222.861, 222.861 ]\n\t// encoded media black (rgb 0,0,0) => linear [ 0.0011857, 0.0011857, 0.0011857]\n});\n", "import * as util from \"./util.js\";\nimport hooks from \"./hooks.js\";\nimport defaults from \"./defaults.js\";\nimport ColorSpace from \"./space.js\";\nimport {WHITES} from \"./adapt.js\";\nimport {\n\tgetColor,\n\tparse,\n\tto,\n\tserialize,\n\tinGamut,\n\ttoGamut,\n\tdistance,\n\tequals,\n\tget,\n\tgetAll,\n\tset,\n\tsetAll,\n\tdisplay,\n} from \"./index-fn.js\";\n\n\nimport \"./spaces/xyz-d50.js\";\nimport \"./spaces/srgb.js\";\n\n/**\n * Class that represents a color\n */\nexport default class Color {\n\t/**\n\t * Creates an instance of Color.\n\t * Signatures:\n\t * - `new Color(stringToParse)`\n\t * - `new Color(otherColor)`\n\t * - `new Color({space, coords, alpha})`\n\t * - `new Color(space, coords, alpha)`\n\t * - `new Color(spaceId, coords, alpha)`\n\t */\n\tconstructor (...args) {\n\t\tlet color;\n\n\t\tif (args.length === 1) {\n\t\t\tcolor = getColor(args[0]);\n\t\t}\n\n\t\tlet space, coords, alpha;\n\n\t\tif (color) {\n\t\t\tspace = color.space || color.spaceId;\n\t\t\tcoords = color.coords;\n\t\t\talpha = color.alpha;\n\t\t}\n\t\telse {\n\t\t\t// default signature new Color(ColorSpace, array [, alpha])\n\t\t\t[space, coords, alpha] = args;\n\t\t}\n\n\t\tObject.defineProperty(this, \"space\", {\n\t\t\tvalue: ColorSpace.get(space),\n\t\t\twritable: false,\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true, // see note in https://262.ecma-international.org/8.0/#sec-proxy-object-internal-methods-and-internal-slots-get-p-receiver\n\t\t});\n\n\t\tthis.coords = coords ? coords.slice() : [0, 0, 0];\n\n\t\t// Clamp alpha to [0, 1]\n\t\tthis.alpha = alpha > 1 || alpha === undefined ? 1 : (alpha < 0 ? 0 : alpha);\n\n\t\t// Convert \"NaN\" to NaN\n\t\tfor (let i = 0; i < this.coords.length; i++) {\n\t\t\tif (this.coords[i] === \"NaN\") {\n\t\t\t\tthis.coords[i] = NaN;\n\t\t\t}\n\t\t}\n\n\t\t// Define getters and setters for each coordinate\n\t\tfor (let id in this.space.coords) {\n\t\t\tObject.defineProperty(this, id, {\n\t\t\t\tget: () => this.get(id),\n\t\t\t\tset: value => this.set(id, value),\n\t\t\t});\n\t\t}\n\t}\n\n\tget spaceId () {\n\t\treturn this.space.id;\n\t}\n\n\tclone () {\n\t\treturn new Color(this.space, this.coords, this.alpha);\n\t}\n\n\ttoJSON () {\n\t\treturn {\n\t\t\tspaceId: this.spaceId,\n\t\t\tcoords: this.coords,\n\t\t\talpha: this.alpha,\n\t\t};\n\t}\n\n\tdisplay (...args) {\n\t\tlet ret = display(this, ...args);\n\n\t\t// Convert color object to Color instance\n\t\tret.color = new Color(ret.color);\n\n\t\treturn ret;\n\t}\n\n\t/**\n\t * Get a color from the argument passed\n\t * Basically gets us the same result as new Color(color) but doesn't clone an existing color object\n\t */\n\tstatic get (color, ...args) {\n\t\tif (color instanceof Color) {\n\t\t\treturn color;\n\t\t}\n\n\t\treturn new Color(color, ...args);\n\t}\n\n\tstatic defineFunction (name, code, o = code) {\n\t\tlet {instance = true, returns} = o;\n\n\t\tlet func = function (...args) {\n\t\t\tlet ret = code(...args);\n\n\t\t\tif (returns === \"color\") {\n\t\t\t\tret = Color.get(ret);\n\t\t\t}\n\t\t\telse if (returns === \"function<color>\") {\n\t\t\t\tlet f = ret;\n\t\t\t\tret = function (...args) {\n\t\t\t\t\tlet ret = f(...args);\n\t\t\t\t\treturn Color.get(ret);\n\t\t\t\t};\n\t\t\t\t// Copy any function metadata\n\t\t\t\tObject.assign(ret, f);\n\t\t\t}\n\t\t\telse if (returns === \"array<color>\") {\n\t\t\t\tret = ret.map(c => Color.get(c));\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t};\n\n\t\tif (!(name in Color)) {\n\t\t\tColor[name] = func;\n\t\t}\n\n\t\tif (instance) {\n\t\t\tColor.prototype[name] = function (...args) {\n\t\t\t\treturn func(this, ...args);\n\t\t\t};\n\t\t}\n\t}\n\n\tstatic defineFunctions (o) {\n\t\tfor (let name in o) {\n\t\t\tColor.defineFunction(name, o[name], o[name]);\n\t\t}\n\t}\n\n\tstatic extend (exports) {\n\t\tif (exports.register) {\n\t\t\texports.register(Color);\n\t\t}\n\t\telse {\n\t\t\t// No register method, just add the module's functions\n\t\t\tfor (let name in exports) {\n\t\t\t\tColor.defineFunction(name, exports[name]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nColor.defineFunctions({\n\tget,\n\tgetAll,\n\tset,\n\tsetAll,\n\tto,\n\tequals,\n\tinGamut,\n\ttoGamut,\n\tdistance,\n\ttoString: serialize,\n});\n\nObject.assign(Color, {\n\tutil,\n\thooks,\n\tWHITES,\n\tSpace: ColorSpace,\n\tspaces: ColorSpace.registry,\n\tparse,\n\n\t// Global defaults one may want to configure\n\tdefaults,\n});\n", "import ColorSpace from \"../space.js\";\nimport * as spaces from \"./index-fn.js\";\n\nexport * as spaces from \"./index-fn.js\";\n\nfor (let key of Object.keys(spaces)) {\n\tColorSpace.register(spaces[key]);\n}\n", "/**\n * This plugin defines getters and setters for color[spaceId]\n * e.g. color.lch on *any* color gives us the lch coords\n */\nimport ColorSpace from \"./space.js\";\nimport Color from \"./color.js\";\nimport hooks from \"./hooks.js\";\n\n// Add space accessors to existing color spaces\nfor (let id in ColorSpace.registry) {\n\taddSpaceAccessors(id, ColorSpace.registry[id]);\n}\n\n// Add space accessors to color spaces not yet created\nhooks.add(\"colorspace-init-end\", space => {\n\taddSpaceAccessors(space.id, space);\n\tspace.aliases?.forEach(alias => {\n\t\taddSpaceAccessors(alias, space);\n\t});\n});\n\nfunction addSpaceAccessors (id, space) {\n\tlet propId = id.replace(/-/g, \"_\");\n\n\tObject.defineProperty(Color.prototype, propId, {\n\t\t// Convert coords to coords in another colorspace and return them\n\t\t// Source colorspace: this.spaceId\n\t\t// Target colorspace: id\n\t\tget () {\n\t\t\tlet ret = this.getAll(id);\n\n\t\t\tif (typeof Proxy === \"undefined\") {\n\t\t\t\t// If proxies are not supported, just return a static array\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Enable color.spaceId.coordName syntax\n\t\t\treturn new Proxy(ret, {\n\t\t\t\thas: (obj, property) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tColorSpace.resolveCoord([space, property]);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {}\n\n\t\t\t\t\treturn Reflect.has(obj, property);\n\t\t\t\t},\n\t\t\t\tget: (obj, property, receiver) => {\n\t\t\t\t\tif (property && typeof property !== \"symbol\" && !(property in obj)) {\n\t\t\t\t\t\tlet {index} = ColorSpace.resolveCoord([space, property]);\n\n\t\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\t\treturn obj[index];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Reflect.get(obj, property, receiver);\n\t\t\t\t},\n\t\t\t\tset: (obj, property, value, receiver) => {\n\t\t\t\t\tif (property && typeof property !== \"symbol\" && !(property in obj) || property >= 0) {\n\t\t\t\t\t\tlet {index} = ColorSpace.resolveCoord([space, property]);\n\n\t\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\t\tobj[index] = value;\n\n\t\t\t\t\t\t\t// Update color.coords\n\t\t\t\t\t\t\tthis.setAll(id, obj);\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Reflect.set(obj, property, value, receiver);\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t// Convert coords in another colorspace to internal coords and set them\n\t\t// Target colorspace: this.spaceId\n\t\t// Source colorspace: id\n\t\tset (coords) {\n\t\t\tthis.setAll(id, coords);\n\t\t},\n\t\tconfigurable: true,\n\t\tenumerable: true,\n\t});\n}\n", "// Import all modules of Color.js\nimport Color from \"./color.js\";\n\n// Import all color spaces\nimport \"./spaces/index.js\";\n\n// Import all DeltaE methods\nimport deltaE from \"./deltaE.js\";\nimport deltaEMethods from \"./deltaE/index.js\";\n\nColor.extend(deltaEMethods);\nColor.extend({deltaE});\nObject.assign(Color, {deltaEMethods});\n\n// Import optional modules\nimport * as variations from \"./variations.js\";\nColor.extend(variations);\n\nimport contrast from \"./contrast.js\";\nColor.extend({contrast});\n\nimport * as chromaticity from \"./chromaticity.js\";\nColor.extend(chromaticity);\n\nimport * as luminance from \"./luminance.js\";\nColor.extend(luminance);\n\nimport * as interpolation from \"./interpolation.js\";\nColor.extend(interpolation);\n\nimport * as contrastMethods from \"./contrast/index.js\";\nColor.extend(contrastMethods);\n\nimport \"./CATs.js\";\nimport \"./space-accessors.js\";\n\n// Re-export everything\nexport default Color;\n", "import { colord, Colord, extend } from \"colord\";\nimport labPlugin from \"colord/plugins/lab\";\nimport lchPlugin from \"colord/plugins/lch\";\n\nextend([lchPlugin]);\nextend([labPlugin]);\n\nexport const red = colord(\"rgb(235,51,51)\");\nexport const blue = colord(\"rgb(41,98,255)\");\nexport const teal = colord(\"rgb(43,212,189)\");\nexport const purple = colord(\"rgb(146,52,234)\");\nexport const yellow = colord(\"rgb(231,176,8)\");\nexport const orange = colord(\"rgb(249,116,21)\");\nexport const green = colord(\"rgb(65,190,82)\");\nexport const botColor = colord(\"rgb(209,205,199)\");\n\nexport const redTeamColors: Colord[] = generateTeamColors(red);\nexport const blueTeamColors: Colord[] = generateTeamColors(blue);\nexport const tealTeamColors: Colord[] = generateTeamColors(teal);\nexport const purpleTeamColors: Colord[] = generateTeamColors(purple);\nexport const yellowTeamColors: Colord[] = generateTeamColors(yellow);\nexport const orangeTeamColors: Colord[] = generateTeamColors(orange);\nexport const greenTeamColors: Colord[] = generateTeamColors(green);\nexport const botTeamColors: Colord[] = [botColor];\n\nfunction generateTeamColors(baseColor: Colord): Colord[] {\n  const hsl = baseColor.toHsl();\n  const colorCount = 64;\n\n  return Array.from({ length: colorCount }, (_, index) => {\n    const progression = index / (colorCount - 1);\n\n    const saturation = hsl.s * (1.0 - 0.3 * progression);\n    const lightness = Math.min(100, hsl.l + progression * 30);\n\n    return colord({\n      h: hsl.h,\n      s: saturation,\n      l: lightness,\n    });\n  });\n}\n\nexport const nationColors: Colord[] = [\n  colord(\"rgb(210,210,100)\"), // Lime Yellow\n  colord(\"rgb(180,210,120)\"), // Light Green\n  colord(\"rgb(170,190,100)\"), // Yellow Green\n  colord(\"rgb(80,200,120)\"), // Emerald Green\n  colord(\"rgb(130,200,130)\"), // Light Sea Green\n  colord(\"rgb(140,180,140)\"), // Dark Sea Green\n  colord(\"rgb(160,190,160)\"), // Pale Green\n  colord(\"rgb(160,180,140)\"), // Dark Olive Green\n  colord(\"rgb(100,160,80)\"), // Olive Green\n  colord(\"rgb(100,140,110)\"), // Sea Green\n  colord(\"rgb(100,180,160)\"), // Aquamarine\n  colord(\"rgb(130,180,170)\"), // Medium Aquamarine\n  colord(\"rgb(170,190,180)\"), // Pale Blue Green\n  colord(\"rgb(100,130,150)\"), // Steel Blue\n  colord(\"rgb(120,160,200)\"), // Cornflower Blue\n  colord(\"rgb(140,150,180)\"), // Light Slate Gray\n  colord(\"rgb(100,210,210)\"), // Turquoise\n  colord(\"rgb(140,180,220)\"), // Light Blue\n  colord(\"rgb(130,170,190)\"), // Cadet Blue\n  colord(\"rgb(100,180,230)\"), // Sky Blue\n  colord(\"rgb(80,130,190)\"), // Navy Blue\n  colord(\"rgb(120,120,190)\"), // Periwinkle\n  colord(\"rgb(150,110,190)\"), // Lavender\n  colord(\"rgb(160,120,160)\"), // Purple Gray\n  colord(\"rgb(170,140,190)\"), // Medium Purple\n  colord(\"rgb(180,130,180)\"), // Plum\n  colord(\"rgb(190,140,150)\"), // Puce\n  colord(\"rgb(180,100,230)\"), // Purple\n  colord(\"rgb(180,160,180)\"), // Mauve\n  colord(\"rgb(170,150,170)\"), // Dusty Rose\n  colord(\"rgb(150,130,150)\"), // Thistle\n  colord(\"rgb(230,180,180)\"), // Light Pink\n  colord(\"rgb(210,160,200)\"), // Orchid\n  colord(\"rgb(230,130,180)\"), // Pink\n  colord(\"rgb(210,100,160)\"), // Hot Pink\n  colord(\"rgb(190,100,130)\"), // Maroon\n  colord(\"rgb(220,120,120)\"), // Coral\n  colord(\"rgb(200,130,110)\"), // Dark Salmon\n  colord(\"rgb(230,140,140)\"), // Salmon\n  colord(\"rgb(230,100,100)\"), // Bright Red\n  colord(\"rgb(230,150,100)\"), // Peach\n  colord(\"rgb(210,140,80)\"), // Light Orange\n  colord(\"rgb(230,180,80)\"), // Golden Yellow\n  colord(\"rgb(200,160,110)\"), // Tan\n  colord(\"rgb(190,150,130)\"), // Rosy Brown\n  colord(\"rgb(190,180,160)\"), // Tan Gray\n  colord(\"rgb(180,170,140)\"), // Dark Khaki\n  colord(\"rgb(200,200,140)\"), // Khaki\n  colord(\"rgb(190,170,100)\"), // Sand\n];\n\n// Bright pastel theme with 64 colors\nexport const humanColors: Colord[] = [\n  colord(\"rgb(163,230,53)\"), // Yellow Green\n  colord(\"rgb(132,204,22)\"), // Lime\n  colord(\"rgb(16,185,129)\"), // Sea Green\n  colord(\"rgb(52,211,153)\"), // Spearmint\n  colord(\"rgb(45,212,191)\"), // Turquoise\n  colord(\"rgb(74,222,128)\"), // Mint\n  colord(\"rgb(110,231,183)\"), // Seafoam\n  colord(\"rgb(134,239,172)\"), // Light Green\n  colord(\"rgb(151,255,187)\"), // Fresh Mint\n  colord(\"rgb(186,255,201)\"), // Pale Emerald\n  colord(\"rgb(230,250,210)\"), // Pastel Lime\n  colord(\"rgb(34,197,94)\"), // Emerald\n  colord(\"rgb(67,190,84)\"), // Fresh Green\n  colord(\"rgb(82,183,136)\"), // Jade\n  colord(\"rgb(48,178,180)\"), // Teal\n  colord(\"rgb(230,255,250)\"), // Mint Whisper\n  colord(\"rgb(220,240,250)\"), // Ice Blue\n  colord(\"rgb(233,213,255)\"), // Light Lilac\n  colord(\"rgb(204,204,255)\"), // Soft Lavender Blue\n  colord(\"rgb(220,220,255)\"), // Meringue Blue\n  colord(\"rgb(202,225,255)\"), // Baby Blue\n  colord(\"rgb(147,197,253)\"), // Powder Blue\n  colord(\"rgb(125,211,252)\"), // Crystal Blue\n  colord(\"rgb(99,202,253)\"), // Azure\n  colord(\"rgb(56,189,248)\"), // Light Blue\n  colord(\"rgb(96,165,250)\"), // Sky Blue\n  colord(\"rgb(59,130,246)\"), // Royal Blue\n  colord(\"rgb(79,70,229)\"), // Indigo\n  colord(\"rgb(124,58,237)\"), // Royal Purple\n  colord(\"rgb(147,51,234)\"), // Bright Purple\n  colord(\"rgb(179,136,255)\"), // Light Purple\n  colord(\"rgb(167,139,250)\"), // Periwinkle\n  colord(\"rgb(217,70,239)\"), // Fuchsia\n  colord(\"rgb(168,85,247)\"), // Vibrant Purple\n  colord(\"rgb(190,92,251)\"), // Amethyst\n  colord(\"rgb(192,132,252)\"), // Lavender\n  colord(\"rgb(240,171,252)\"), // Orchid\n  colord(\"rgb(244,114,182)\"), // Rose\n  colord(\"rgb(236,72,153)\"), // Deep Pink\n  colord(\"rgb(220,38,38)\"), // Ruby\n  colord(\"rgb(239,68,68)\"), // Crimson\n  colord(\"rgb(235,75,75)\"), // Bright Red\n  colord(\"rgb(245,101,101)\"), // Coral\n  colord(\"rgb(248,113,113)\"), // Warm Red\n  colord(\"rgb(251,113,133)\"), // Watermelon\n  colord(\"rgb(253,164,175)\"), // Salmon Pink\n  colord(\"rgb(252,165,165)\"), // Peach\n  colord(\"rgb(255,204,229)\"), // Blush Pink\n  colord(\"rgb(250,215,225)\"), // Cotton Candy\n  colord(\"rgb(251,235,245)\"), // Rose Powder\n  colord(\"rgb(240,240,200)\"), // Light Khaki\n  colord(\"rgb(250,250,210)\"), // Pastel Lemon\n  colord(\"rgb(255,240,200)\"), // Vanilla\n  colord(\"rgb(255,223,186)\"), // Apricot Cream\n  colord(\"rgb(252,211,77)\"), // Golden\n  colord(\"rgb(251,191,36)\"), // Marigold\n  colord(\"rgb(234,179,8)\"), // Sunflower\n  colord(\"rgb(202,138,4)\"), // Rich Gold\n  colord(\"rgb(245,158,11)\"), // Amber\n  colord(\"rgb(251,146,60)\"), // Light Orange\n  colord(\"rgb(249,115,22)\"), // Tangerine\n  colord(\"rgb(234,88,12)\"), // Burnt Orange\n  colord(\"rgb(133,77,14)\"), // Chocolate\n];\n\nexport const botColors: Colord[] = [\n  colord(\"rgb(150,160,140)\"), // Muted Dark Olive Green\n  colord(\"rgb(160,160,150)\"), // Muted Tan Gray\n  colord(\"rgb(170,170,140)\"), // Muted Khaki\n  colord(\"rgb(170,170,120)\"), // Muted Lime Yellow\n  colord(\"rgb(150,160,120)\"), // Muted Yellow Green\n  colord(\"rgb(150,170,130)\"), // Muted Light Green\n  colord(\"rgb(150,170,150)\"), // Muted Pale Green\n  colord(\"rgb(130,170,130)\"), // Muted Light Sea Green\n  colord(\"rgb(140,160,140)\"), // Muted Dark Sea Green\n  colord(\"rgb(120,150,100)\"), // Muted Olive Green\n  colord(\"rgb(120,140,120)\"), // Muted Sea Green\n  colord(\"rgb(100,170,130)\"), // Muted Emerald Green\n  colord(\"rgb(120,160,150)\"), // Muted Aquamarine\n  colord(\"rgb(130,160,150)\"), // Muted Medium Aquamarine\n  colord(\"rgb(120,170,170)\"), // Muted Turquoise\n  colord(\"rgb(120,160,190)\"), // Muted Sky Blue\n  colord(\"rgb(130,150,170)\"), // Muted Cornflower Blue\n  colord(\"rgb(130,150,160)\"), // Muted Cadet Blue\n  colord(\"rgb(140,150,160)\"), // Muted Light Slate Gray\n  colord(\"rgb(140,160,170)\"), // Muted Light Blue\n  colord(\"rgb(150,160,160)\"), // Muted Pale Blue Green\n  colord(\"rgb(100,120,160)\"), // Muted Navy Blue\n  colord(\"rgb(120,130,140)\"), // Muted Steel Blue\n  colord(\"rgb(130,130,160)\"), // Muted Periwinkle\n  colord(\"rgb(140,130,140)\"), // Muted Thistle\n  colord(\"rgb(140,120,160)\"), // Muted Lavender\n  colord(\"rgb(150,130,150)\"), // Muted Purple Gray\n  colord(\"rgb(150,140,160)\"), // Muted Medium Purple\n  colord(\"rgb(160,130,160)\"), // Muted Plum\n  colord(\"rgb(170,150,170)\"), // Muted Orchid\n  colord(\"rgb(160,120,190)\"), // Muted Purple\n  colord(\"rgb(160,120,130)\"), // Muted Maroon\n  colord(\"rgb(170,120,140)\"), // Muted Hot Pink\n  colord(\"rgb(170,130,120)\"), // Muted Dark Salmon\n  colord(\"rgb(170,130,130)\"), // Muted Coral\n  colord(\"rgb(180,140,140)\"), // Muted Salmon\n  colord(\"rgb(190,130,160)\"), // Muted Pink\n  colord(\"rgb(190,120,120)\"), // Muted Red\n  colord(\"rgb(190,140,120)\"), // Muted Peach\n  colord(\"rgb(190,160,100)\"), // Muted Golden Yellow\n  colord(\"rgb(170,140,100)\"), // Muted Light Orange\n  colord(\"rgb(160,140,130)\"), // Muted Rosy Brown\n  colord(\"rgb(170,150,130)\"), // Muted Tan\n  colord(\"rgb(160,150,120)\"), // Muted Sand\n  colord(\"rgb(160,150,140)\"), // Muted Dark Khaki\n  colord(\"rgb(160,140,150)\"), // Muted Puce\n  colord(\"rgb(160,150,160)\"), // Muted Mauve\n  colord(\"rgb(150,140,150)\"), // Muted Dusty Rose\n  colord(\"rgb(180,160,160)\"), // Muted Light Pink\n];\n\n// Fallback colors for when the color palette is exhausted.\nexport const fallbackColors: Colord[] = [\n  colord(\"rgb(35,0,0)\"),\n  colord(\"rgb(45,0,0)\"),\n  colord(\"rgb(55,0,0)\"),\n  colord(\"rgb(65,0,0)\"),\n  colord(\"rgb(75,0,0)\"),\n  colord(\"rgb(85,0,0)\"),\n  colord(\"rgb(95,0,0)\"),\n  colord(\"rgb(105,0,0)\"),\n  colord(\"rgb(115,0,0)\"),\n  colord(\"rgb(125,0,0)\"),\n  colord(\"rgb(135,0,0)\"),\n  colord(\"rgb(145,0,0)\"),\n  colord(\"rgb(155,0,0)\"),\n  colord(\"rgb(165,0,0)\"),\n  colord(\"rgb(175,0,0)\"),\n  colord(\"rgb(185,0,0)\"),\n  colord(\"rgb(195,0,5)\"),\n  colord(\"rgb(205,0,10)\"),\n  colord(\"rgb(215,0,15)\"),\n  colord(\"rgb(225,0,20)\"),\n  colord(\"rgb(235,0,25)\"),\n  colord(\"rgb(245,0,30)\"),\n  colord(\"rgb(255,0,35)\"),\n  colord(\"rgb(255,10,45)\"),\n  colord(\"rgb(255,20,55)\"),\n  colord(\"rgb(255,30,65)\"),\n  colord(\"rgb(255,40,75)\"),\n  colord(\"rgb(255,50,85)\"),\n  colord(\"rgb(255,60,95)\"),\n  colord(\"rgb(255,70,105)\"),\n  colord(\"rgb(255,80,115)\"),\n  colord(\"rgb(255,90,125)\"),\n  colord(\"rgb(255,100,135)\"),\n  colord(\"rgb(255,110,145)\"),\n  colord(\"rgb(255,120,155)\"),\n  colord(\"rgb(255,130,165)\"),\n  colord(\"rgb(255,140,175)\"),\n  colord(\"rgb(255,150,185)\"),\n  colord(\"rgb(255,160,195)\"),\n  colord(\"rgb(255,170,205)\"),\n  colord(\"rgb(255,180,215)\"),\n  colord(\"rgb(255,190,225)\"),\n  colord(\"rgb(255,200,235)\"),\n  colord(\"rgb(0,45,0)\"),\n  colord(\"rgb(0,55,0)\"),\n  colord(\"rgb(0,65,0)\"),\n  colord(\"rgb(0,75,0)\"),\n  colord(\"rgb(0,85,0)\"),\n  colord(\"rgb(0,95,0)\"),\n  colord(\"rgb(0,105,0)\"),\n  colord(\"rgb(0,115,0)\"),\n  colord(\"rgb(0,125,0)\"),\n  colord(\"rgb(0,135,0)\"),\n  colord(\"rgb(0,145,0)\"),\n  colord(\"rgb(0,155,0)\"),\n  colord(\"rgb(0,165,0)\"),\n  colord(\"rgb(0,175,0)\"),\n  colord(\"rgb(0,185,0)\"),\n  colord(\"rgb(0,195,5)\"),\n  colord(\"rgb(0,205,10)\"),\n  colord(\"rgb(0,215,15)\"),\n  colord(\"rgb(0,225,20)\"),\n  colord(\"rgb(0,235,25)\"),\n  colord(\"rgb(0,245,30)\"),\n  colord(\"rgb(0,255,35)\"),\n  colord(\"rgb(10,255,45)\"),\n  colord(\"rgb(20,255,55)\"),\n  colord(\"rgb(30,255,65)\"),\n  colord(\"rgb(40,255,75)\"),\n  colord(\"rgb(50,255,85)\"),\n  colord(\"rgb(60,255,95)\"),\n  colord(\"rgb(70,255,105)\"),\n  colord(\"rgb(80,255,115)\"),\n  colord(\"rgb(90,255,125)\"),\n  colord(\"rgb(100,255,135)\"),\n  colord(\"rgb(110,255,145)\"),\n  colord(\"rgb(120,255,155)\"),\n  colord(\"rgb(130,255,165)\"),\n  colord(\"rgb(140,255,175)\"),\n  colord(\"rgb(150,255,185)\"),\n  colord(\"rgb(160,255,195)\"),\n  colord(\"rgb(170,255,205)\"),\n  colord(\"rgb(180,255,215)\"),\n  colord(\"rgb(190,255,225)\"),\n  colord(\"rgb(200,255,235)\"),\n  colord(\"rgb(0,0,35)\"),\n  colord(\"rgb(0,0,45)\"),\n  colord(\"rgb(0,0,55)\"),\n  colord(\"rgb(0,0,65)\"),\n  colord(\"rgb(0,0,75)\"),\n  colord(\"rgb(0,0,85)\"),\n  colord(\"rgb(0,0,95)\"),\n  colord(\"rgb(0,0,105)\"),\n  colord(\"rgb(0,0,115)\"),\n  colord(\"rgb(0,0,125)\"),\n  colord(\"rgb(0,0,135)\"),\n  colord(\"rgb(0,0,145)\"),\n  colord(\"rgb(0,0,155)\"),\n  colord(\"rgb(0,0,165)\"),\n  colord(\"rgb(0,0,175)\"),\n  colord(\"rgb(0,0,185)\"),\n  colord(\"rgb(5,0,195)\"),\n  colord(\"rgb(10,0,205)\"),\n  colord(\"rgb(15,0,215)\"),\n  colord(\"rgb(20,0,225)\"),\n  colord(\"rgb(25,0,235)\"),\n  colord(\"rgb(30,0,245)\"),\n  colord(\"rgb(35,0,255)\"),\n  colord(\"rgb(45,10,255)\"),\n  colord(\"rgb(55,20,255)\"),\n  colord(\"rgb(65,30,255)\"),\n  colord(\"rgb(75,40,255)\"),\n  colord(\"rgb(85,50,255)\"),\n  colord(\"rgb(95,60,255)\"),\n  colord(\"rgb(105,70,255)\"),\n  colord(\"rgb(115,80,255)\"),\n  colord(\"rgb(125,90,255)\"),\n  colord(\"rgb(135,100,255)\"),\n  colord(\"rgb(145,110,255)\"),\n  colord(\"rgb(155,120,255)\"),\n  colord(\"rgb(165,130,255)\"),\n  colord(\"rgb(175,140,255)\"),\n  colord(\"rgb(185,150,255)\"),\n  colord(\"rgb(195,160,255)\"),\n  colord(\"rgb(205,170,255)\"),\n  colord(\"rgb(215,180,255)\"),\n  colord(\"rgb(225,190,255)\"),\n  colord(\"rgb(235,200,255)\"),\n  colord(\"rgb(35,0,35)\"),\n  colord(\"rgb(45,0,45)\"),\n  colord(\"rgb(55,0,55)\"),\n  colord(\"rgb(65,0,65)\"),\n  colord(\"rgb(75,0,75)\"),\n  colord(\"rgb(85,0,85)\"),\n  colord(\"rgb(95,0,95)\"),\n  colord(\"rgb(105,0,105)\"),\n  colord(\"rgb(115,0,115)\"),\n  colord(\"rgb(125,0,125)\"),\n  colord(\"rgb(135,0,135)\"),\n  colord(\"rgb(145,0,145)\"),\n  colord(\"rgb(155,0,155)\"),\n  colord(\"rgb(165,0,165)\"),\n  colord(\"rgb(175,0,175)\"),\n  colord(\"rgb(185,0,185)\"),\n  colord(\"rgb(195,5,195)\"),\n  colord(\"rgb(205,10,205)\"),\n  colord(\"rgb(215,15,215)\"),\n  colord(\"rgb(225,20,225)\"),\n  colord(\"rgb(235,25,235)\"),\n  colord(\"rgb(245,30,245)\"),\n  colord(\"rgb(255,35,255)\"),\n  colord(\"rgb(255,45,255)\"),\n  colord(\"rgb(255,55,255)\"),\n  colord(\"rgb(255,65,255)\"),\n  colord(\"rgb(255,75,255)\"),\n  colord(\"rgb(255,85,255)\"),\n  colord(\"rgb(255,95,255)\"),\n  colord(\"rgb(255,105,255)\"),\n  colord(\"rgb(255,115,255)\"),\n  colord(\"rgb(255,125,255)\"),\n  colord(\"rgb(255,135,255)\"),\n  colord(\"rgb(255,145,255)\"),\n  colord(\"rgb(255,155,255)\"),\n  colord(\"rgb(255,165,255)\"),\n  colord(\"rgb(255,175,255)\"),\n  colord(\"rgb(255,185,255)\"),\n  colord(\"rgb(255,195,255)\"),\n  colord(\"rgb(255,205,255)\"),\n  colord(\"rgb(255,215,255)\"),\n  colord(\"rgb(0,35,35)\"),\n  colord(\"rgb(0,45,45)\"),\n  colord(\"rgb(0,55,55)\"),\n  colord(\"rgb(0,65,65)\"),\n  colord(\"rgb(0,75,75)\"),\n  colord(\"rgb(0,85,85)\"),\n  colord(\"rgb(0,95,95)\"),\n  colord(\"rgb(0,105,105)\"),\n  colord(\"rgb(0,115,115)\"),\n  colord(\"rgb(0,125,125)\"),\n  colord(\"rgb(0,135,135)\"),\n  colord(\"rgb(0,145,145)\"),\n  colord(\"rgb(0,155,155)\"),\n  colord(\"rgb(0,165,165)\"),\n  colord(\"rgb(0,175,175)\"),\n  colord(\"rgb(0,185,185)\"),\n  colord(\"rgb(5,195,195)\"),\n  colord(\"rgb(10,205,205)\"),\n  colord(\"rgb(15,215,215)\"),\n  colord(\"rgb(20,225,225)\"),\n  colord(\"rgb(25,235,235)\"),\n  colord(\"rgb(30,245,245)\"),\n  colord(\"rgb(35,255,255)\"),\n  colord(\"rgb(45,255,255)\"),\n  colord(\"rgb(55,255,255)\"),\n  colord(\"rgb(65,255,255)\"),\n  colord(\"rgb(75,255,255)\"),\n  colord(\"rgb(85,255,255)\"),\n  colord(\"rgb(95,255,255)\"),\n  colord(\"rgb(105,255,255)\"),\n  colord(\"rgb(115,255,255)\"),\n  colord(\"rgb(125,255,255)\"),\n  colord(\"rgb(135,255,255)\"),\n  colord(\"rgb(145,255,255)\"),\n  colord(\"rgb(155,255,255)\"),\n  colord(\"rgb(165,255,255)\"),\n  colord(\"rgb(175,255,255)\"),\n  colord(\"rgb(185,255,255)\"),\n  colord(\"rgb(195,255,255)\"),\n  colord(\"rgb(205,255,255)\"),\n  colord(\"rgb(215,255,255)\"),\n  colord(\"rgb(35,35,0)\"),\n  colord(\"rgb(45,45,0)\"),\n  colord(\"rgb(55,55,0)\"),\n  colord(\"rgb(65,65,0)\"),\n  colord(\"rgb(75,75,0)\"),\n  colord(\"rgb(85,85,0)\"),\n  colord(\"rgb(95,95,0)\"),\n  colord(\"rgb(105,105,0)\"),\n  colord(\"rgb(115,115,0)\"),\n  colord(\"rgb(125,125,0)\"),\n  colord(\"rgb(135,135,0)\"),\n  colord(\"rgb(145,145,0)\"),\n  colord(\"rgb(155,155,0)\"),\n  colord(\"rgb(165,165,0)\"),\n  colord(\"rgb(175,175,0)\"),\n  colord(\"rgb(185,185,0)\"),\n  colord(\"rgb(195,195,5)\"),\n  colord(\"rgb(205,205,10)\"),\n  colord(\"rgb(215,215,15)\"),\n  colord(\"rgb(225,225,20)\"),\n  colord(\"rgb(235,235,25)\"),\n  colord(\"rgb(245,245,30)\"),\n  colord(\"rgb(255,255,35)\"),\n  colord(\"rgb(255,255,45)\"),\n  colord(\"rgb(255,255,55)\"),\n  colord(\"rgb(255,255,65)\"),\n  colord(\"rgb(255,255,75)\"),\n  colord(\"rgb(255,255,85)\"),\n  colord(\"rgb(255,255,95)\"),\n  colord(\"rgb(255,255,105)\"),\n  colord(\"rgb(255,255,115)\"),\n  colord(\"rgb(255,255,125)\"),\n  colord(\"rgb(255,255,135)\"),\n  colord(\"rgb(255,255,145)\"),\n  colord(\"rgb(255,255,155)\"),\n  colord(\"rgb(255,255,165)\"),\n  colord(\"rgb(255,255,175)\"),\n  colord(\"rgb(255,255,185)\"),\n  colord(\"rgb(255,255,195)\"),\n  colord(\"rgb(255,255,205)\"),\n  colord(\"rgb(255,255,215)\"),\n  colord(\"rgb(215,255,200)\"), // Fresh Mint\n  colord(\"rgb(225,255,175)\"), // Soft Lime\n  colord(\"rgb(240,250,160)\"), // Citrus Wash\n  colord(\"rgb(245,245,175)\"), // Lemon Mist\n  colord(\"rgb(150,200,255)\"), // Cornflower Mist\n  colord(\"rgb(160,215,255)\"), // Powder Blue\n  colord(\"rgb(170,225,255)\"), // Baby Sky\n  colord(\"rgb(180,235,250)\"), // Aqua Pastel\n  colord(\"rgb(190,245,240)\"), // Ice Mint\n  colord(\"rgb(210,255,245)\"), // Sea Mist\n  colord(\"rgb(220,255,255)\"), // Pale Aqua\n  colord(\"rgb(230,250,255)\"), // Sky Haze\n  colord(\"rgb(240,240,255)\"), // Frosted Lilac\n  colord(\"rgb(250,230,255)\"), // Misty Mauve\n  colord(\"rgb(170,190,255)\"), // Periwinkle Ice\n  colord(\"rgb(180,180,255)\"), // Pale Indigo\n  colord(\"rgb(200,170,255)\"), // Lilac Bloom\n  colord(\"rgb(190,140,195)\"), // Fuchsia Tint\n  colord(\"rgb(195,145,200)\"), // Dusky Rose\n  colord(\"rgb(200,150,205)\"), // Plum Frost\n  colord(\"rgb(205,155,210)\"), // Berry Foam\n  colord(\"rgb(210,160,215)\"), // Grape Cloud\n  colord(\"rgb(215,165,220)\"), // Light Bloom\n  colord(\"rgb(220,170,225)\"), // Cherry Blossom\n  colord(\"rgb(225,175,230)\"), // Faded Rose\n  colord(\"rgb(230,180,235)\"), // Dreamy Mauve\n  colord(\"rgb(235,185,240)\"), // Powder Violet\n  colord(\"rgb(240,190,245)\"), // Pastel Violet\n  colord(\"rgb(245,195,250)\"), // Soft Magenta\n  colord(\"rgb(250,200,255)\"), // Lilac Cream\n  colord(\"rgb(255,205,255)\"), // Violet Bloom\n  colord(\"rgb(255,210,255)\"), // Orchid Mist\n  colord(\"rgb(255,210,250)\"), // Lavender Mist\n  colord(\"rgb(255,205,245)\"), // Pastel Orchid\n  colord(\"rgb(255,215,245)\"), // Rose Whisper\n  colord(\"rgb(220,160,255)\"), // Violet Mist\n  colord(\"rgb(235,150,255)\"), // Orchid Glow\n  colord(\"rgb(245,160,240)\"), // Rose Lilac\n  colord(\"rgb(255,170,225)\"), // Bubblegum Pink\n  colord(\"rgb(255,185,215)\"), // Blush Mist\n  colord(\"rgb(255,195,235)\"), // Faded Fuchsia\n  colord(\"rgb(255,200,220)\"), // Cotton Rose\n  colord(\"rgb(255,210,230)\"), // Pastel Blush\n  colord(\"rgb(255,220,235)\"), // Pink Mist\n  colord(\"rgb(255,220,250)\"), // Powder Petal\n  colord(\"rgb(255,225,255)\"), // Petal Mist\n  colord(\"rgb(255,230,245)\"), // Light Rose\n  colord(\"rgb(255,235,235)\"), // Blushed Petal\n  colord(\"rgb(255,215,195)\"), // Apricot Glow\n  colord(\"rgb(255,225,180)\"), // Butter Peach\n  colord(\"rgb(255,230,190)\"),\n  colord(\"rgb(255,235,200)\"), // Cream Peach\n  colord(\"rgb(255,245,210)\"), // Soft Banana\n  colord(\"rgb(255,240,220)\"), // Pastel Sand\n];\n", "import { colord, Colord, extend } from \"colord\";\nimport labPlugin from \"colord/plugins/lab\";\nimport lchPlugin from \"colord/plugins/lch\";\nimport Color from \"colorjs.io\";\nimport { ColoredTeams, Team } from \"../game/Game\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { simpleHash } from \"../Util\";\nimport {\n  blueTeamColors,\n  botTeamColors,\n  greenTeamColors,\n  orangeTeamColors,\n  purpleTeamColors,\n  redTeamColors,\n  tealTeamColors,\n  yellowTeamColors,\n} from \"./Colors\";\nextend([lchPlugin]);\nextend([labPlugin]);\n\nexport class ColorAllocator {\n  private availableColors: Colord[];\n  private fallbackColors: Colord[];\n  private assigned = new Map<string, Colord>();\n  private teamPlayerColors = new Map<string, Colord>();\n\n  constructor(colors: Colord[], fallback: Colord[]) {\n    this.availableColors = [...colors];\n    this.fallbackColors = [...colors, ...fallback];\n  }\n\n  private getTeamColorVariations(team: Team): Colord[] {\n    switch (team) {\n      case ColoredTeams.Blue:\n        return blueTeamColors;\n      case ColoredTeams.Red:\n        return redTeamColors;\n      case ColoredTeams.Teal:\n        return tealTeamColors;\n      case ColoredTeams.Purple:\n        return purpleTeamColors;\n      case ColoredTeams.Yellow:\n        return yellowTeamColors;\n      case ColoredTeams.Orange:\n        return orangeTeamColors;\n      case ColoredTeams.Green:\n        return greenTeamColors;\n      case ColoredTeams.Bot:\n        return botTeamColors;\n      case ColoredTeams.Humans:\n        return blueTeamColors;\n      case ColoredTeams.Nations:\n        return redTeamColors;\n      default:\n        return [this.assignColor(team)];\n    }\n  }\n\n  assignColor(id: string): Colord {\n    if (this.assigned.has(id)) {\n      return this.assigned.get(id)!;\n    }\n\n    if (this.availableColors.length === 0) {\n      this.availableColors = [...this.fallbackColors];\n    }\n\n    let selectedIndex = 0;\n\n    if (this.assigned.size === 0 || this.assigned.size > 50) {\n      // Randomly pick the first color if no colors have been assigned yet.\n      //\n      // Or if more than 50 colors assigned just pick a random one for perf reasons,\n      // as selecting a distinct color is O(n^2), and the color palette is mostly exhausted anyways.\n      const rand = new PseudoRandom(simpleHash(id));\n      selectedIndex = rand.nextInt(0, this.availableColors.length);\n    } else {\n      const assignedColors = Array.from(this.assigned.values());\n      selectedIndex =\n        selectDistinctColorIndex(this.availableColors, assignedColors) ?? 0;\n    }\n\n    const color = this.availableColors.splice(selectedIndex, 1)[0];\n    this.assigned.set(id, color);\n    return color;\n  }\n\n  assignTeamColor(team: Team): Colord {\n    const teamColors = this.getTeamColorVariations(team);\n    const rgb = teamColors[0].toRgb();\n    rgb.r = Math.round(rgb.r);\n    rgb.g = Math.round(rgb.g);\n    rgb.b = Math.round(rgb.b);\n    return colord(rgb);\n  }\n\n  assignTeamPlayerColor(team: Team, playerId: string): Colord {\n    if (this.teamPlayerColors.has(playerId)) {\n      return this.teamPlayerColors.get(playerId)!;\n    }\n\n    const teamColors = this.getTeamColorVariations(team);\n    const hashValue = simpleHash(playerId);\n    const colorIndex = hashValue % teamColors.length;\n    const color = teamColors[colorIndex];\n\n    this.teamPlayerColors.set(playerId, color);\n\n    return color;\n  }\n}\n\n// Select a distinct color index from the available colors that\n// is most different from the assigned colors\nexport function selectDistinctColorIndex(\n  availableColors: Colord[],\n  assignedColors: Colord[],\n): number | null {\n  if (assignedColors.length === 0) {\n    throw new Error(\"No assigned colors\");\n  }\n\n  const assignedLabColors = assignedColors.map(toColor);\n\n  let maxDeltaE = 0;\n  let maxIndex = 0;\n\n  for (let i = 0; i < availableColors.length; i++) {\n    const color = availableColors[i];\n    const deltaE = minDeltaE(toColor(color), assignedLabColors);\n    if (deltaE > maxDeltaE) {\n      maxDeltaE = deltaE;\n      maxIndex = i;\n    }\n  }\n  return maxIndex;\n}\n\nfunction minDeltaE(lab1: Color, assignedLabColors: Color[]) {\n  return assignedLabColors.reduce((min, assigned) => {\n    return Math.min(min, deltaE2000(lab1, assigned));\n  }, Infinity);\n}\n\nfunction deltaE2000(c1: Color, c2: Color): number {\n  return c1.deltaE(c2, \"2000\");\n}\n\nfunction toColor(colord: Colord): Color {\n  const lab = colord.toLab();\n  return new Color(\"lab\", [lab.l, lab.a, lab.b]);\n}\n", "import { Colord, colord, LabaColor } from \"colord\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { PlayerType, Team, TerrainType } from \"../game/Game\";\nimport { GameMap, TileRef } from \"../game/GameMap\";\nimport { PlayerView } from \"../game/GameView\";\nimport { ColorAllocator } from \"./ColorAllocator\";\nimport { botColors, fallbackColors, humanColors, nationColors } from \"./Colors\";\nimport { Theme } from \"./Config\";\n\nexport class PastelTheme implements Theme {\n  private rand = new PseudoRandom(123);\n  private humanColorAllocator = new ColorAllocator(humanColors, fallbackColors);\n  private botColorAllocator = new ColorAllocator(botColors, botColors);\n  private teamColorAllocator = new ColorAllocator(humanColors, fallbackColors);\n  private nationColorAllocator = new ColorAllocator(nationColors, nationColors);\n\n  private background = colord(\"rgb(60,60,60)\");\n  private shore = colord(\"rgb(204,203,158)\");\n  private falloutColors = [\n    colord(\"rgb(120,255,71)\"), // Original color\n    colord(\"rgb(130,255,85)\"), // Slightly lighter\n    colord(\"rgb(110,245,65)\"), // Slightly darker\n    colord(\"rgb(125,255,75)\"), // Warmer tint\n    colord(\"rgb(115,250,68)\"), // Cooler tint\n  ];\n  private water = colord(\"rgb(70,132,180)\");\n  private shorelineWater = colord(\"rgb(100,143,255)\");\n\n  /** Alternate View colors for self, green */\n  private _selfColor = colord(\"rgb(0,255,0)\");\n  /** Alternate View colors for allies, yellow */\n  private _allyColor = colord(\"rgb(255,255,0)\");\n  /** Alternate View colors for neutral, gray */\n  private _neutralColor = colord(\"rgb(128,128,128)\");\n  /** Alternate View colors for enemies, red */\n  private _enemyColor = colord(\"rgb(255,0,0)\");\n\n  /** Default spawn highlight colors for other players in FFA, yellow */\n  private _spawnHighlightColor = colord(\"rgb(255,213,79)\");\n  /** Added non-default spawn highlight colors for self, full white */\n  private _spawnHighlightSelfColor = colord(\"rgb(255,255,255)\");\n  /** Added non-default spawn highlight colors for teammates, green */\n  private _spawnHighlightTeamColor = colord(\"rgb(0,255,0)\");\n  /** Added non-default spawn highlight colors for enemies, red */\n  private _spawnHighlightEnemyColor = colord(\"rgb(255,0,0)\");\n\n  teamColor(team: Team): Colord {\n    return this.teamColorAllocator.assignTeamColor(team);\n  }\n\n  territoryColor(player: PlayerView): Colord {\n    const team = player.team();\n    if (team !== null) {\n      return this.teamColorAllocator.assignTeamPlayerColor(team, player.id());\n    }\n    if (player.type() === PlayerType.Human) {\n      return this.humanColorAllocator.assignColor(player.id());\n    }\n    if (player.type() === PlayerType.Bot) {\n      return this.botColorAllocator.assignColor(player.id());\n    }\n    return this.nationColorAllocator.assignColor(player.id());\n  }\n\n  structureColors(territoryColor: Colord): { light: Colord; dark: Colord } {\n    // Convert territory color to LAB color space. Territory color is rendered in game with alpha = 150/255, use that here.\n    const lightLAB = territoryColor.alpha(150 / 255).toLab();\n    // Get \"border color\" from territory color & convert to LAB color space\n    const darkLAB = this.borderColor(territoryColor).toLab();\n    // Calculate the contrast of the two provided colors\n    let contrast = this.contrast(lightLAB, darkLAB);\n\n    // Don't want excessive contrast, so incrementally increase contrast within a loop.\n    // Define target values, looping limits, and loop counter\n    const loopLimit = 10; // Switch from darkening border to lightening fill if loopLimit is reached\n    const maxIterations = 50; // maximum number of loops allowed, throw error above this limit\n    const contrastTarget = 0.5;\n    let loopCount = 0;\n\n    // Adjust luminance by 5 in each iteration. This is a balance between speed and not overdoing contrast changes.\n    const luminanceChange = 5;\n\n    while (contrast < contrastTarget) {\n      if (loopCount > maxIterations) {\n        // Prevent runaway loops\n        console.warn(`Infinite loop detected during structure color calculation. \n          Light color: ${colord(lightLAB).toRgbString()}, \n          Dark color: ${colord(darkLAB).toRgbString()}, \n          Contrast: ${contrast}`);\n        break;\n\n        // Increase the light color if the \"loop limit\" has been reach\n        // (probably due to the dark color already being as dark as it can be)\n      } else if (loopCount > loopLimit) {\n        lightLAB.l = this.clamp(lightLAB.l + luminanceChange);\n\n        // Decrease the dark color first to keep the light color as close\n        // to the territory color as possible\n      } else {\n        darkLAB.l = this.clamp(darkLAB.l - luminanceChange);\n      }\n\n      // re-calculate contrast and increment loop counter\n      contrast = this.contrast(lightLAB, darkLAB);\n      loopCount++;\n    }\n    return { light: colord(lightLAB), dark: colord(darkLAB) };\n  }\n\n  private contrast(first: LabaColor, second: LabaColor): number {\n    return colord(first).delta(colord(second));\n  }\n\n  private clamp(num: number, low: number = 0, high: number = 100): number {\n    return Math.min(Math.max(low, num), high);\n  }\n\n  // Don't call directly, use PlayerView\n  borderColor(territoryColor: Colord): Colord {\n    return territoryColor.darken(0.125);\n  }\n\n  defendedBorderColors(territoryColor: Colord): {\n    light: Colord;\n    dark: Colord;\n  } {\n    return {\n      light: territoryColor.darken(0.2),\n      dark: territoryColor.darken(0.4),\n    };\n  }\n\n  focusedBorderColor(): Colord {\n    return colord(\"rgb(230,230,230)\");\n  }\n\n  textColor(player: PlayerView): string {\n    return player.type() === PlayerType.Human ? \"#000000\" : \"#4D4D4D\";\n  }\n\n  terrainColor(gm: GameMap, tile: TileRef): Colord {\n    const mag = gm.magnitude(tile);\n    if (gm.isShore(tile)) {\n      return this.shore;\n    }\n    switch (gm.terrainType(tile)) {\n      case TerrainType.Ocean:\n      case TerrainType.Lake: {\n        const w = this.water.rgba;\n        if (gm.isShoreline(tile) && gm.isWater(tile)) {\n          return this.shorelineWater;\n        }\n        return colord({\n          r: Math.max(w.r - 10 + (11 - Math.min(mag, 10)), 0),\n          g: Math.max(w.g - 10 + (11 - Math.min(mag, 10)), 0),\n          b: Math.max(w.b - 10 + (11 - Math.min(mag, 10)), 0),\n        });\n      }\n      case TerrainType.Plains:\n        return colord({\n          r: 190,\n          g: 220 - 2 * mag,\n          b: 138,\n        });\n      case TerrainType.Highland:\n        return colord({\n          r: 200 + 2 * mag,\n          g: 183 + 2 * mag,\n          b: 138 + 2 * mag,\n        });\n      case TerrainType.Mountain:\n        return colord({\n          r: 230 + mag / 2,\n          g: 230 + mag / 2,\n          b: 230 + mag / 2,\n        });\n    }\n  }\n\n  backgroundColor(): Colord {\n    return this.background;\n  }\n\n  falloutColor(): Colord {\n    return this.rand.randElement(this.falloutColors);\n  }\n\n  font(): string {\n    return \"Overpass, sans-serif\";\n  }\n\n  selfColor(): Colord {\n    return this._selfColor;\n  }\n  allyColor(): Colord {\n    return this._allyColor;\n  }\n  neutralColor(): Colord {\n    return this._neutralColor;\n  }\n  enemyColor(): Colord {\n    return this._enemyColor;\n  }\n\n  spawnHighlightColor(): Colord {\n    return this._spawnHighlightColor;\n  }\n  /** Return spawn highlight color for self */\n  spawnHighlightSelfColor(): Colord {\n    return this._spawnHighlightSelfColor;\n  }\n  /** Return spawn highlight color for teammates */\n  spawnHighlightTeamColor(): Colord {\n    return this._spawnHighlightTeamColor;\n  }\n  /** Return spawn highlight color for enemies */\n  spawnHighlightEnemyColor(): Colord {\n    return this._spawnHighlightEnemyColor;\n  }\n}\n", "import { Colord, colord } from \"colord\";\nimport { TerrainType } from \"../game/Game\";\nimport { GameMap, TileRef } from \"../game/GameMap\";\nimport { PastelTheme } from \"./PastelTheme\";\n\nexport class PastelThemeDark extends PastelTheme {\n  private darkShore = colord(\"rgb(134,133,88)\");\n\n  private darkWater = colord(\"rgb(14,11,30)\");\n  private darkShorelineWater = colord(\"rgb(50,50,50)\");\n\n  terrainColor(gm: GameMap, tile: TileRef): Colord {\n    const mag = gm.magnitude(tile);\n    if (gm.isShore(tile)) {\n      return this.darkShore;\n    }\n    switch (gm.terrainType(tile)) {\n      case TerrainType.Ocean:\n      case TerrainType.Lake: {\n        const w = this.darkWater.rgba;\n        if (gm.isShoreline(tile) && gm.isWater(tile)) {\n          return this.darkShorelineWater;\n        }\n        if (gm.magnitude(tile) < 10) {\n          return colord({\n            r: Math.max(w.r + 9 - mag, 0),\n            g: Math.max(w.g + 9 - mag, 0),\n            b: Math.max(w.b + 9 - mag, 0),\n          });\n        }\n        return this.darkWater;\n      }\n      case TerrainType.Plains:\n        return colord({\n          r: 140,\n          g: 170 - 2 * mag,\n          b: 88,\n        });\n      case TerrainType.Highland:\n        return colord({\n          r: 150 + 2 * mag,\n          g: 133 + 2 * mag,\n          b: 88 + 2 * mag,\n        });\n      case TerrainType.Mountain:\n        return colord({\n          r: 180 + mag / 2,\n          g: 180 + mag / 2,\n          b: 180 + mag / 2,\n        });\n    }\n  }\n}\n", "import { JWK } from \"jose\";\nimport { z } from \"zod\";\nimport {\n  Difficulty,\n  Duos,\n  Game,\n  GameMapType,\n  GameMode,\n  GameType,\n  Gold,\n  HumansVsNations,\n  Player,\n  PlayerInfo,\n  PlayerType,\n  Quads,\n  TerrainType,\n  TerraNullius,\n  Tick,\n  Trios,\n  UnitInfo,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { PlayerView } from \"../game/GameView\";\nimport { UserSettings } from \"../game/UserSettings\";\nimport { GameConfig, GameID, TeamCountConfig } from \"../Schemas\";\nimport { NukeType } from \"../StatsSchemas\";\nimport { assertNever, sigmoid, simpleHash, within } from \"../Util\";\nimport { Config, GameEnv, NukeMagnitude, ServerConfig, Theme } from \"./Config\";\nimport { PastelTheme } from \"./PastelTheme\";\nimport { PastelThemeDark } from \"./PastelThemeDark\";\n\nconst DEFENSE_DEBUFF_MIDPOINT = 150_000;\nconst DEFENSE_DEBUFF_DECAY_RATE = Math.LN2 / 50000;\n\nconst JwksSchema = z.object({\n  keys: z\n    .object({\n      alg: z.literal(\"EdDSA\"),\n      crv: z.literal(\"Ed25519\"),\n      kty: z.literal(\"OKP\"),\n      x: z.string(),\n    })\n    .array()\n    .min(1),\n});\n\nconst numPlayersConfig = {\n  [GameMapType.Africa]: [100, 70, 50],\n  [GameMapType.Asia]: [50, 40, 30],\n  [GameMapType.Australia]: [70, 40, 30],\n  [GameMapType.Achiran]: [40, 36, 30],\n  [GameMapType.Baikal]: [100, 70, 50],\n  [GameMapType.BaikalNukeWars]: [100, 70, 50],\n  [GameMapType.BetweenTwoSeas]: [70, 50, 40],\n  [GameMapType.BlackSea]: [50, 30, 30],\n  [GameMapType.Britannia]: [50, 30, 20],\n  [GameMapType.DeglaciatedAntarctica]: [50, 40, 30],\n  [GameMapType.EastAsia]: [50, 30, 20],\n  [GameMapType.Europe]: [100, 70, 50],\n  [GameMapType.EuropeClassic]: [50, 30, 30],\n  [GameMapType.FalklandIslands]: [50, 30, 20],\n  [GameMapType.FourIslands]: [20, 15, 10],\n  [GameMapType.FaroeIslands]: [20, 15, 10],\n  [GameMapType.GatewayToTheAtlantic]: [100, 70, 50],\n  [GameMapType.GiantWorldMap]: [100, 70, 50],\n  [GameMapType.GulfOfStLawrence]: [60, 40, 30],\n  [GameMapType.Halkidiki]: [100, 50, 40],\n  [GameMapType.Iceland]: [50, 40, 30],\n  [GameMapType.Italia]: [50, 30, 20],\n  [GameMapType.Japan]: [20, 15, 10],\n  [GameMapType.Lisbon]: [50, 40, 30],\n  [GameMapType.Manicouagan]: [60, 40, 30],\n  [GameMapType.Mars]: [70, 40, 30],\n  [GameMapType.Mena]: [70, 50, 40],\n  [GameMapType.Montreal]: [60, 40, 30],\n  [GameMapType.NewYorkCity]: [60, 40, 30],\n  [GameMapType.NorthAmerica]: [70, 40, 30],\n  [GameMapType.Oceania]: [10, 10, 10],\n  [GameMapType.Pangaea]: [20, 15, 10],\n  [GameMapType.Pluto]: [100, 70, 50],\n  [GameMapType.SouthAmerica]: [70, 50, 40],\n  [GameMapType.StraitOfGibraltar]: [100, 70, 50],\n  [GameMapType.Svalmel]: [40, 36, 30],\n  [GameMapType.World]: [50, 30, 20],\n} as const satisfies Record<GameMapType, [number, number, number]>;\n\nexport abstract class DefaultServerConfig implements ServerConfig {\n  turnstileSecretKey(): string {\n    return process.env.TURNSTILE_SECRET_KEY ?? \"\";\n  }\n  abstract turnstileSiteKey(): string;\n  allowedFlares(): string[] | undefined {\n    return;\n  }\n  stripePublishableKey(): string {\n    return process.env.STRIPE_PUBLISHABLE_KEY ?? \"\";\n  }\n  domain(): string {\n    return process.env.DOMAIN ?? \"\";\n  }\n  subdomain(): string {\n    return process.env.SUBDOMAIN ?? \"\";\n  }\n  cloudflareAccountId(): string {\n    return process.env.CF_ACCOUNT_ID ?? \"\";\n  }\n  cloudflareApiToken(): string {\n    return process.env.CF_API_TOKEN ?? \"\";\n  }\n  cloudflareConfigPath(): string {\n    return process.env.CF_CONFIG_PATH ?? \"\";\n  }\n  cloudflareCredsPath(): string {\n    return process.env.CF_CREDS_PATH ?? \"\";\n  }\n\n  private publicKey: JWK;\n  abstract jwtAudience(): string;\n  jwtIssuer(): string {\n    const audience = this.jwtAudience();\n    return audience === \"localhost\"\n      ? \"http://localhost:8787\"\n      : `https://api.${audience}`;\n  }\n  async jwkPublicKey(): Promise<JWK> {\n    if (this.publicKey) return this.publicKey;\n    const jwksUrl = this.jwtIssuer() + \"/.well-known/jwks.json\";\n    console.log(`Fetching JWKS from ${jwksUrl}`);\n    const response = await fetch(jwksUrl);\n    const result = JwksSchema.safeParse(await response.json());\n    if (!result.success) {\n      const error = z.prettifyError(result.error);\n      console.error(\"Error parsing JWKS\", error);\n      throw new Error(\"Invalid JWKS\");\n    }\n    this.publicKey = result.data.keys[0];\n    return this.publicKey;\n  }\n  otelEnabled(): boolean {\n    return (\n      this.env() !== GameEnv.Dev &&\n      Boolean(this.otelEndpoint()) &&\n      Boolean(this.otelAuthHeader())\n    );\n  }\n  otelEndpoint(): string {\n    return process.env.OTEL_EXPORTER_OTLP_ENDPOINT ?? \"\";\n  }\n  otelAuthHeader(): string {\n    return process.env.OTEL_AUTH_HEADER ?? \"\";\n  }\n  gitCommit(): string {\n    return process.env.GIT_COMMIT ?? \"\";\n  }\n  r2Endpoint(): string {\n    return `https://${process.env.CF_ACCOUNT_ID}.r2.cloudflarestorage.com`;\n  }\n  r2AccessKey(): string {\n    return process.env.R2_ACCESS_KEY ?? \"\";\n  }\n  r2SecretKey(): string {\n    return process.env.R2_SECRET_KEY ?? \"\";\n  }\n\n  r2Bucket(): string {\n    return process.env.R2_BUCKET ?? \"\";\n  }\n\n  apiKey(): string {\n    return process.env.API_KEY ?? \"\";\n  }\n\n  adminHeader(): string {\n    return \"x-admin-key\";\n  }\n  adminToken(): string {\n    return process.env.ADMIN_TOKEN ?? \"dummy-admin-token\";\n  }\n  abstract numWorkers(): number;\n  abstract env(): GameEnv;\n  turnIntervalMs(): number {\n    return 100;\n  }\n  gameCreationRate(): number {\n    return 60 * 1000;\n  }\n\n  lobbyMaxPlayers(\n    map: GameMapType,\n    mode: GameMode,\n    numPlayerTeams: TeamCountConfig | undefined,\n  ): number {\n    const [l, m, s] = numPlayersConfig[map] ?? [50, 30, 20];\n    const r = Math.random();\n    const base = r < 0.3 ? l : r < 0.6 ? m : s;\n    let p = Math.min(mode === GameMode.Team ? Math.ceil(base * 1.5) : base, l);\n    if (numPlayerTeams === undefined) return p;\n    switch (numPlayerTeams) {\n      case Duos:\n        p -= p % 2;\n        break;\n      case Trios:\n        p -= p % 3;\n        break;\n      case Quads:\n        p -= p % 4;\n        break;\n      case HumansVsNations:\n        // For HumansVsNations, return the base team player count\n        break;\n      default:\n        p -= p % numPlayerTeams;\n        break;\n    }\n    return p;\n  }\n\n  workerIndex(gameID: GameID): number {\n    return simpleHash(gameID) % this.numWorkers();\n  }\n  workerPath(gameID: GameID): string {\n    return `w${this.workerIndex(gameID)}`;\n  }\n  workerPort(gameID: GameID): number {\n    return this.workerPortByIndex(this.workerIndex(gameID));\n  }\n  workerPortByIndex(index: number): number {\n    return 3001 + index;\n  }\n  enableMatchmaking(): boolean {\n    return false;\n  }\n}\n\nexport class DefaultConfig implements Config {\n  private pastelTheme: PastelTheme = new PastelTheme();\n  private pastelThemeDark: PastelThemeDark = new PastelThemeDark();\n  constructor(\n    private _serverConfig: ServerConfig,\n    private _gameConfig: GameConfig,\n    private _userSettings: UserSettings | null,\n    private _isReplay: boolean,\n  ) {}\n\n  stripePublishableKey(): string {\n    return process.env.STRIPE_PUBLISHABLE_KEY ?? \"\";\n  }\n\n  isReplay(): boolean {\n    return this._isReplay;\n  }\n\n  samHittingChance(): number {\n    return 0.8;\n  }\n\n  samWarheadHittingChance(): number {\n    return 0.5;\n  }\n\n  traitorDefenseDebuff(): number {\n    return 0.5;\n  }\n  traitorSpeedDebuff(): number {\n    return 0.8;\n  }\n  traitorDuration(): number {\n    return 30 * 10; // 30 seconds\n  }\n  spawnImmunityDuration(): Tick {\n    return 5 * 10;\n  }\n\n  gameConfig(): GameConfig {\n    return this._gameConfig;\n  }\n\n  serverConfig(): ServerConfig {\n    return this._serverConfig;\n  }\n\n  userSettings(): UserSettings {\n    if (this._userSettings === null) {\n      throw new Error(\"userSettings is null\");\n    }\n    return this._userSettings;\n  }\n\n  difficultyModifier(difficulty: Difficulty): number {\n    switch (difficulty) {\n      case Difficulty.Easy:\n        return 1;\n      case Difficulty.Medium:\n        return 3;\n      case Difficulty.Hard:\n        return 9;\n      case Difficulty.Impossible:\n        return 18;\n    }\n  }\n\n  cityTroopIncrease(): number {\n    return 250_000;\n  }\n\n  falloutDefenseModifier(falloutRatio: number): number {\n    // falloutRatio is between 0 and 1\n    // So defense modifier is between [5, 2.5]\n    return 5 - falloutRatio * 2;\n  }\n  SAMCooldown(): number {\n    return 75;\n  }\n  SiloCooldown(): number {\n    return 75;\n  }\n\n  defensePostRange(): number {\n    return 30;\n  }\n\n  defensePostDefenseBonus(): number {\n    return 5;\n  }\n\n  defensePostSpeedBonus(): number {\n    return 3;\n  }\n\n  playerTeams(): TeamCountConfig {\n    return this._gameConfig.playerTeams ?? 0;\n  }\n\n  spawnNPCs(): boolean {\n    return !this._gameConfig.disableNPCs;\n  }\n\n  isUnitDisabled(unitType: UnitType): boolean {\n    return this._gameConfig.disabledUnits?.includes(unitType) ?? false;\n  }\n\n  bots(): number {\n    return this._gameConfig.bots;\n  }\n  instantBuild(): boolean {\n    return this._gameConfig.instantBuild;\n  }\n  isRandomSpawn(): boolean {\n    return this._gameConfig.randomSpawn;\n  }\n  infiniteGold(): boolean {\n    return this._gameConfig.infiniteGold;\n  }\n  donateGold(): boolean {\n    return this._gameConfig.donateGold;\n  }\n  infiniteTroops(): boolean {\n    return this._gameConfig.infiniteTroops;\n  }\n  donateTroops(): boolean {\n    return this._gameConfig.donateTroops;\n  }\n\n  trainSpawnRate(numPlayerFactories: number): number {\n    // hyperbolic decay, midpoint at 10 factories\n    // expected number of trains = numPlayerFactories  / trainSpawnRate(numPlayerFactories)\n    return (numPlayerFactories + 10) * 18;\n  }\n  trainGold(rel: \"self\" | \"team\" | \"ally\" | \"other\"): Gold {\n    switch (rel) {\n      case \"ally\":\n        return 35_000n;\n      case \"team\":\n      case \"other\":\n        return 25_000n;\n      case \"self\":\n        return 10_000n;\n    }\n  }\n\n  trainStationMinRange(): number {\n    return 15;\n  }\n  trainStationMaxRange(): number {\n    return 100;\n  }\n  railroadMaxSize(): number {\n    return 120;\n  }\n\n  tradeShipGold(dist: number, numPorts: number): Gold {\n    // Sigmoid: concave start, sharp S-curve middle, linear end - heavily punishes trades under range debuff.\n    const debuff = this.tradeShipShortRangeDebuff();\n    const baseGold =\n      100_000 / (1 + Math.exp(-0.03 * (dist - debuff))) + 100 * dist;\n    const numPortBonus = numPorts - 1;\n    // Hyperbolic decay, midpoint at 5 ports, 3x bonus max.\n    const bonus = 1 + 2 * (numPortBonus / (numPortBonus + 5));\n    return BigInt(Math.floor(baseGold * bonus));\n  }\n\n  // Probability of trade ship spawn = 1 / tradeShipSpawnRate\n  tradeShipSpawnRate(\n    numTradeShips: number,\n    numPlayerPorts: number,\n    numPlayerTradeShips: number,\n  ): number {\n    // Geometric mean of base spawn rate and port multiplier\n    const combined = Math.sqrt(\n      this.tradeShipBaseSpawn(numTradeShips, numPlayerTradeShips) *\n        this.tradeShipPortMultiplier(numPlayerPorts),\n    );\n\n    return Math.floor(25 / combined);\n  }\n\n  private tradeShipBaseSpawn(\n    numTradeShips: number,\n    numPlayerTradeShips: number,\n  ): number {\n    if (numPlayerTradeShips < 3) {\n      // If other players have many ports, then they can starve out smaller players.\n      // So this prevents smaller players from being completely starved out.\n      return 1;\n    }\n    const decayRate = Math.LN2 / 10;\n    return 1 - sigmoid(numTradeShips, decayRate, 55);\n  }\n\n  private tradeShipPortMultiplier(numPlayerPorts: number): number {\n    // Hyperbolic decay function with midpoint at 10 ports\n    // Expected trade ship spawn rate is proportional to numPlayerPorts * multiplier\n    // Gradual decay prevents scenario where more ports => fewer ships\n    const decayRate = 1 / 10;\n    return 1 / (1 + decayRate * numPlayerPorts);\n  }\n\n  unitInfo(type: UnitType): UnitInfo {\n    switch (type) {\n      case UnitType.TransportShip:\n        return {\n          cost: () => 0n,\n          territoryBound: false,\n        };\n      case UnitType.Warship:\n        return {\n          cost: this.costWrapper(\n            (numUnits: number) => Math.min(1_000_000, (numUnits + 1) * 250_000),\n            UnitType.Warship,\n          ),\n          territoryBound: false,\n          maxHealth: 1000,\n        };\n      case UnitType.Shell:\n        return {\n          cost: () => 0n,\n          territoryBound: false,\n          damage: 250,\n        };\n      case UnitType.SAMMissile:\n        return {\n          cost: () => 0n,\n          territoryBound: false,\n        };\n      case UnitType.Port:\n        return {\n          cost: this.costWrapper(\n            (numUnits: number) =>\n              Math.min(1_000_000, Math.pow(2, numUnits) * 125_000),\n            UnitType.Port,\n            UnitType.Factory,\n          ),\n          territoryBound: true,\n          constructionDuration: this.instantBuild() ? 0 : 2 * 10,\n          upgradable: true,\n          canBuildTrainStation: true,\n        };\n      case UnitType.AtomBomb:\n        return {\n          cost: this.costWrapper(() => 750_000, UnitType.AtomBomb),\n          territoryBound: false,\n        };\n      case UnitType.HydrogenBomb:\n        return {\n          cost: this.costWrapper(() => 5_000_000, UnitType.HydrogenBomb),\n          territoryBound: false,\n        };\n      case UnitType.MIRV:\n        return {\n          cost: (game: Game, player: Player) => {\n            if (player.type() === PlayerType.Human && this.infiniteGold()) {\n              return 0n;\n            }\n            return 25_000_000n + game.stats().numMirvsLaunched() * 15_000_000n;\n          },\n          territoryBound: false,\n        };\n      case UnitType.MIRVWarhead:\n        return {\n          cost: () => 0n,\n          territoryBound: false,\n        };\n      case UnitType.TradeShip:\n        return {\n          cost: () => 0n,\n          territoryBound: false,\n        };\n      case UnitType.MissileSilo:\n        return {\n          cost: this.costWrapper(() => 1_000_000, UnitType.MissileSilo),\n          territoryBound: true,\n          constructionDuration: this.instantBuild() ? 0 : 10 * 10,\n          upgradable: true,\n        };\n      case UnitType.DefensePost:\n        return {\n          cost: this.costWrapper(\n            (numUnits: number) => Math.min(250_000, (numUnits + 1) * 50_000),\n            UnitType.DefensePost,\n          ),\n          territoryBound: true,\n          constructionDuration: this.instantBuild() ? 0 : 5 * 10,\n        };\n      case UnitType.SAMLauncher:\n        return {\n          cost: this.costWrapper(\n            (numUnits: number) =>\n              Math.min(3_000_000, (numUnits + 1) * 1_500_000),\n            UnitType.SAMLauncher,\n          ),\n          territoryBound: true,\n          constructionDuration: this.instantBuild() ? 0 : 30 * 10,\n          upgradable: true,\n        };\n      case UnitType.City:\n        return {\n          cost: this.costWrapper(\n            (numUnits: number) =>\n              Math.min(1_000_000, Math.pow(2, numUnits) * 125_000),\n            UnitType.City,\n          ),\n          territoryBound: true,\n          constructionDuration: this.instantBuild() ? 0 : 2 * 10,\n          upgradable: true,\n          canBuildTrainStation: true,\n        };\n      case UnitType.Factory:\n        return {\n          cost: this.costWrapper(\n            (numUnits: number) =>\n              Math.min(1_000_000, Math.pow(2, numUnits) * 125_000),\n            UnitType.Factory,\n            UnitType.Port,\n          ),\n          territoryBound: true,\n          constructionDuration: this.instantBuild() ? 0 : 2 * 10,\n          canBuildTrainStation: true,\n          experimental: true,\n          upgradable: true,\n        };\n      case UnitType.Train:\n        return {\n          cost: () => 0n,\n          territoryBound: false,\n          experimental: true,\n        };\n      default:\n        assertNever(type);\n    }\n  }\n\n  private costWrapper(\n    costFn: (units: number) => number,\n    ...types: UnitType[]\n  ): (g: Game, p: Player) => bigint {\n    return (game: Game, player: Player) => {\n      if (player.type() === PlayerType.Human && this.infiniteGold()) {\n        return 0n;\n      }\n      const numUnits = types.reduce(\n        (acc, type) =>\n          acc +\n          Math.min(player.unitsOwned(type), player.unitsConstructed(type)),\n        0,\n      );\n      return BigInt(costFn(numUnits));\n    };\n  }\n\n  defaultDonationAmount(sender: Player): number {\n    return Math.floor(sender.troops() / 3);\n  }\n  donateCooldown(): Tick {\n    return 10 * 10;\n  }\n  embargoAllCooldown(): Tick {\n    return 10 * 10;\n  }\n  deletionMarkDuration(): Tick {\n    return 30 * 10;\n  }\n\n  deleteUnitCooldown(): Tick {\n    return 30 * 10;\n  }\n  emojiMessageDuration(): Tick {\n    return 5 * 10;\n  }\n  emojiMessageCooldown(): Tick {\n    return 5 * 10;\n  }\n  targetDuration(): Tick {\n    return 10 * 10;\n  }\n  targetCooldown(): Tick {\n    return 15 * 10;\n  }\n  allianceRequestDuration(): Tick {\n    return 20 * 10;\n  }\n  allianceRequestCooldown(): Tick {\n    return 30 * 10;\n  }\n  allianceDuration(): Tick {\n    return 300 * 10; // 5 minutes.\n  }\n  temporaryEmbargoDuration(): Tick {\n    return 300 * 10; // 5 minutes.\n  }\n\n  percentageTilesOwnedToWin(): number {\n    if (this._gameConfig.gameMode === GameMode.Team) {\n      return 95;\n    }\n    return 80;\n  }\n  boatMaxNumber(): number {\n    return 3;\n  }\n  numSpawnPhaseTurns(): number {\n    return this._gameConfig.gameType === GameType.Singleplayer ? 100 : 300;\n  }\n  numBots(): number {\n    return this.bots();\n  }\n  theme(): Theme {\n    return this.userSettings()?.darkMode()\n      ? this.pastelThemeDark\n      : this.pastelTheme;\n  }\n\n  attackLogic(\n    gm: Game,\n    attackTroops: number,\n    attacker: Player,\n    defender: Player | TerraNullius,\n    tileToConquer: TileRef,\n  ): {\n    attackerTroopLoss: number;\n    defenderTroopLoss: number;\n    tilesPerTickUsed: number;\n  } {\n    let mag = 0;\n    let speed = 0;\n    const type = gm.terrainType(tileToConquer);\n    switch (type) {\n      case TerrainType.Plains:\n        mag = 80;\n        speed = 16.5;\n        break;\n      case TerrainType.Highland:\n        mag = 100;\n        speed = 20;\n        break;\n      case TerrainType.Mountain:\n        mag = 120;\n        speed = 25;\n        break;\n      default:\n        throw new Error(`terrain type ${type} not supported`);\n    }\n    if (defender.isPlayer()) {\n      for (const dp of gm.nearbyUnits(\n        tileToConquer,\n        gm.config().defensePostRange(),\n        UnitType.DefensePost,\n      )) {\n        if (dp.unit.owner() === defender) {\n          mag *= this.defensePostDefenseBonus();\n          speed *= this.defensePostSpeedBonus();\n          break;\n        }\n      }\n    }\n\n    if (gm.hasFallout(tileToConquer)) {\n      const falloutRatio = gm.numTilesWithFallout() / gm.numLandTiles();\n      mag *= this.falloutDefenseModifier(falloutRatio);\n      speed *= this.falloutDefenseModifier(falloutRatio);\n    }\n\n    if (attacker.isPlayer() && defender.isPlayer()) {\n      if (defender.isDisconnected() && attacker.isOnSameTeam(defender)) {\n        // No troop loss if defender is disconnected and on same team\n        mag = 0;\n      }\n      if (\n        attacker.type() === PlayerType.Human &&\n        defender.type() === PlayerType.Bot\n      ) {\n        mag *= 0.8;\n      }\n      if (\n        attacker.type() === PlayerType.FakeHuman &&\n        defender.type() === PlayerType.Bot\n      ) {\n        mag *= 0.8;\n      }\n    }\n\n    if (defender.isPlayer()) {\n      const defenseSig =\n        1 -\n        sigmoid(\n          defender.numTilesOwned(),\n          DEFENSE_DEBUFF_DECAY_RATE,\n          DEFENSE_DEBUFF_MIDPOINT,\n        );\n\n      const largeDefenderSpeedDebuff = 0.7 + 0.3 * defenseSig;\n      const largeDefenderAttackDebuff = 0.7 + 0.3 * defenseSig;\n\n      let largeAttackBonus = 1;\n      if (attacker.numTilesOwned() > 100_000) {\n        largeAttackBonus = Math.sqrt(100_000 / attacker.numTilesOwned()) ** 0.7;\n      }\n      let largeAttackerSpeedBonus = 1;\n      if (attacker.numTilesOwned() > 100_000) {\n        largeAttackerSpeedBonus = (100_000 / attacker.numTilesOwned()) ** 0.6;\n      }\n\n      return {\n        attackerTroopLoss:\n          within(defender.troops() / attackTroops, 0.6, 2) *\n          mag *\n          0.8 *\n          largeDefenderAttackDebuff *\n          largeAttackBonus *\n          (defender.isTraitor() ? this.traitorDefenseDebuff() : 1),\n        defenderTroopLoss: defender.troops() / defender.numTilesOwned(),\n        tilesPerTickUsed:\n          within(defender.troops() / (5 * attackTroops), 0.2, 1.5) *\n          speed *\n          largeDefenderSpeedDebuff *\n          largeAttackerSpeedBonus *\n          (defender.isTraitor() ? this.traitorSpeedDebuff() : 1),\n      };\n    } else {\n      return {\n        attackerTroopLoss:\n          attacker.type() === PlayerType.Bot ? mag / 10 : mag / 5,\n        defenderTroopLoss: 0,\n        tilesPerTickUsed: within(\n          (2000 * Math.max(10, speed)) / attackTroops,\n          5,\n          100,\n        ),\n      };\n    }\n  }\n\n  attackTilesPerTick(\n    attackTroops: number,\n    attacker: Player,\n    defender: Player | TerraNullius,\n    numAdjacentTilesWithEnemy: number,\n  ): number {\n    if (defender.isPlayer()) {\n      return (\n        within(((5 * attackTroops) / defender.troops()) * 2, 0.01, 0.5) *\n        numAdjacentTilesWithEnemy *\n        3\n      );\n    } else {\n      return numAdjacentTilesWithEnemy * 2;\n    }\n  }\n\n  boatAttackAmount(attacker: Player, defender: Player | TerraNullius): number {\n    return Math.floor(attacker.troops() / 5);\n  }\n\n  warshipShellLifetime(): number {\n    return 20; // in ticks (one tick is 100ms)\n  }\n\n  radiusPortSpawn() {\n    return 20;\n  }\n\n  tradeShipShortRangeDebuff(): number {\n    return 300;\n  }\n\n  proximityBonusPortsNb(totalPorts: number) {\n    return within(totalPorts / 3, 4, totalPorts);\n  }\n\n  attackAmount(attacker: Player, defender: Player | TerraNullius) {\n    if (attacker.type() === PlayerType.Bot) {\n      return attacker.troops() / 20;\n    } else {\n      return attacker.troops() / 5;\n    }\n  }\n\n  useNationStrengthForStartManpower(): boolean {\n    // Currently disabled: FakeHumans became harder to play against due to AI improvements\n    // nation strength multiplier was unintentionally disabled during those AI improvements (playerInfo.nation was undefined),\n    // Re-enabling this without rebalancing FakeHuman difficulty elsewhere may make them overpowered\n    return false;\n  }\n\n  startManpower(playerInfo: PlayerInfo): number {\n    if (playerInfo.playerType === PlayerType.Bot) {\n      return 10_000;\n    }\n    if (playerInfo.playerType === PlayerType.FakeHuman) {\n      const strength = this.useNationStrengthForStartManpower()\n        ? (playerInfo.nationStrength ?? 1)\n        : 1;\n\n      switch (this._gameConfig.difficulty) {\n        case Difficulty.Easy:\n          return 18_750 * strength;\n        case Difficulty.Medium:\n          return 25_000 * strength; // Like humans\n        case Difficulty.Hard:\n          return 31_250 * strength;\n        case Difficulty.Impossible:\n          return 37_500 * strength;\n      }\n    }\n    return this.infiniteTroops() ? 1_000_000 : 25_000;\n  }\n\n  maxTroops(player: Player | PlayerView): number {\n    const maxTroops =\n      player.type() === PlayerType.Human && this.infiniteTroops()\n        ? 1_000_000_000\n        : 2 * (Math.pow(player.numTilesOwned(), 0.6) * 1000 + 50000) +\n          player\n            .units(UnitType.City)\n            .map((city) => city.level())\n            .reduce((a, b) => a + b, 0) *\n            this.cityTroopIncrease();\n\n    if (player.type() === PlayerType.Bot) {\n      return maxTroops / 3;\n    }\n\n    if (player.type() === PlayerType.Human) {\n      return maxTroops;\n    }\n\n    switch (this._gameConfig.difficulty) {\n      case Difficulty.Easy:\n        return maxTroops * 0.75;\n      case Difficulty.Medium:\n        return maxTroops * 1; // Like humans\n      case Difficulty.Hard:\n        return maxTroops * 1.25;\n      case Difficulty.Impossible:\n        return maxTroops * 1.5;\n    }\n  }\n\n  troopIncreaseRate(player: Player): number {\n    const max = this.maxTroops(player);\n\n    let toAdd = 10 + Math.pow(player.troops(), 0.73) / 4;\n\n    const ratio = 1 - player.troops() / max;\n    toAdd *= ratio;\n\n    if (player.type() === PlayerType.Bot) {\n      toAdd *= 0.6;\n    }\n\n    if (player.type() === PlayerType.FakeHuman) {\n      switch (this._gameConfig.difficulty) {\n        case Difficulty.Easy:\n          toAdd *= 0.95;\n          break;\n        case Difficulty.Medium:\n          toAdd *= 1; // Like humans\n          break;\n        case Difficulty.Hard:\n          toAdd *= 1.05;\n          break;\n        case Difficulty.Impossible:\n          toAdd *= 1.1;\n          break;\n      }\n    }\n\n    return Math.min(player.troops() + toAdd, max) - player.troops();\n  }\n\n  goldAdditionRate(player: Player): Gold {\n    if (player.type() === PlayerType.Bot) {\n      return 50n;\n    }\n    return 100n;\n  }\n\n  nukeMagnitudes(unitType: UnitType): NukeMagnitude {\n    switch (unitType) {\n      case UnitType.MIRVWarhead:\n        return { inner: 12, outer: 18 };\n      case UnitType.AtomBomb:\n        return { inner: 12, outer: 30 };\n      case UnitType.HydrogenBomb:\n        return { inner: 80, outer: 100 };\n    }\n    throw new Error(`Unknown nuke type: ${unitType}`);\n  }\n\n  nukeAllianceBreakThreshold(): number {\n    return 100;\n  }\n\n  defaultNukeSpeed(): number {\n    return 6;\n  }\n\n  defaultNukeTargetableRange(): number {\n    return 150;\n  }\n\n  defaultSamRange(): number {\n    return 70;\n  }\n\n  samRange(level: number): number {\n    // rational growth function (level 1 = 70, level 5 just above hydro range, asymptotically approaches 150)\n    return this.maxSamRange() - 480 / (level + 5);\n  }\n\n  maxSamRange(): number {\n    return 150;\n  }\n\n  defaultSamMissileSpeed(): number {\n    return 12;\n  }\n\n  // Humans can be soldiers, soldiers attacking, soldiers in boat etc.\n  nukeDeathFactor(\n    nukeType: NukeType,\n    humans: number,\n    tilesOwned: number,\n    maxTroops: number,\n  ): number {\n    if (nukeType !== UnitType.MIRVWarhead) {\n      return (5 * humans) / Math.max(1, tilesOwned);\n    }\n    const targetTroops = 0.03 * maxTroops;\n    const excessTroops = Math.max(0, humans - targetTroops);\n    const scalingFactor = 500;\n\n    const steepness = 2;\n    const normalizedExcess = excessTroops / maxTroops;\n    return scalingFactor * (1 - Math.exp(-steepness * normalizedExcess));\n  }\n\n  structureMinDist(): number {\n    return 15;\n  }\n\n  shellLifetime(): number {\n    return 50;\n  }\n\n  warshipPatrolRange(): number {\n    return 100;\n  }\n\n  warshipTargettingRange(): number {\n    return 130;\n  }\n\n  warshipShellAttackRate(): number {\n    return 20;\n  }\n\n  defensePostShellAttackRate(): number {\n    return 100;\n  }\n\n  safeFromPiratesCooldownMax(): number {\n    return 20;\n  }\n\n  defensePostTargettingRange(): number {\n    return 75;\n  }\n\n  allianceExtensionPromptOffset(): number {\n    return 300; // 30 seconds before expiration\n  }\n}\n", "import { UserSettings } from \"../game/UserSettings\";\nimport { GameConfig } from \"../Schemas\";\nimport { GameEnv, ServerConfig } from \"./Config\";\nimport { DefaultConfig, DefaultServerConfig } from \"./DefaultConfig\";\n\nexport class DevServerConfig extends DefaultServerConfig {\n  turnstileSiteKey(): string {\n    return \"1x00000000000000000000AA\";\n  }\n\n  turnstileSecretKey(): string {\n    return \"1x0000000000000000000000000000000AA\";\n  }\n\n  adminToken(): string {\n    return \"WARNING_DEV_ADMIN_KEY_DO_NOT_USE_IN_PRODUCTION\";\n  }\n\n  apiKey(): string {\n    return \"WARNING_DEV_API_KEY_DO_NOT_USE_IN_PRODUCTION\";\n  }\n\n  env(): GameEnv {\n    return GameEnv.Dev;\n  }\n\n  gameCreationRate(): number {\n    return 5 * 1000;\n  }\n\n  samWarheadHittingChance(): number {\n    return 1;\n  }\n\n  samHittingChance(): number {\n    return 1;\n  }\n\n  numWorkers(): number {\n    return 2;\n  }\n  jwtAudience(): string {\n    return \"localhost\";\n  }\n  gitCommit(): string {\n    return \"DEV\";\n  }\n\n  domain(): string {\n    return \"localhost\";\n  }\n\n  subdomain(): string {\n    return \"\";\n  }\n}\n\nexport class DevConfig extends DefaultConfig {\n  constructor(\n    sc: ServerConfig,\n    gc: GameConfig,\n    us: UserSettings | null,\n    isReplay: boolean,\n  ) {\n    super(sc, gc, us, isReplay);\n  }\n}\n", "import { GameEnv } from \"./Config\";\nimport { DefaultServerConfig } from \"./DefaultConfig\";\n\nexport const preprodConfig = new (class extends DefaultServerConfig {\n  env(): GameEnv {\n    return GameEnv.Preprod;\n  }\n  numWorkers(): number {\n    return 2;\n  }\n  turnstileSiteKey(): string {\n    return \"0x4AAAAAAB7QetxHwRCKw-aP\";\n  }\n  jwtAudience(): string {\n    return \"openfront.dev\";\n  }\n  allowedFlares(): string[] | undefined {\n    return undefined;\n    // TODO: Uncomment this after testing.\n    // Allow access without login for now to test\n    // the new login flow.\n    // return [\n    //   // \"access:openfront.dev\"\n    // ];\n  }\n})();\n", "import { GameEnv } from \"./Config\";\nimport { DefaultServerConfig } from \"./DefaultConfig\";\n\nexport const prodConfig = new (class extends DefaultServerConfig {\n  numWorkers(): number {\n    return 20;\n  }\n  env(): GameEnv {\n    return GameEnv.Prod;\n  }\n  jwtAudience(): string {\n    return \"openfront.io\";\n  }\n  turnstileSiteKey(): string {\n    return \"0x4AAAAAACFLkaecN39lS8sk\";\n  }\n})();\n", "import { UserSettings } from \"../game/UserSettings\";\nimport { GameConfig } from \"../Schemas\";\nimport { Config, GameEnv, ServerConfig } from \"./Config\";\nimport { DefaultConfig } from \"./DefaultConfig\";\nimport { DevConfig, DevServerConfig } from \"./DevConfig\";\nimport { preprodConfig } from \"./PreprodConfig\";\nimport { prodConfig } from \"./ProdConfig\";\n\nexport let cachedSC: ServerConfig | null = null;\n\nexport async function getConfig(\n  gameConfig: GameConfig,\n  userSettings: UserSettings | null,\n  isReplay: boolean = false,\n): Promise<Config> {\n  const sc = await getServerConfigFromClient();\n  switch (sc.env()) {\n    case GameEnv.Dev:\n      return new DevConfig(sc, gameConfig, userSettings, isReplay);\n    case GameEnv.Preprod:\n    case GameEnv.Prod:\n      console.log(\"using prod config\");\n      return new DefaultConfig(sc, gameConfig, userSettings, isReplay);\n    default:\n      throw Error(`unsupported server configuration: ${process.env.GAME_ENV}`);\n  }\n}\nexport async function getServerConfigFromClient(): Promise<ServerConfig> {\n  if (cachedSC) {\n    return cachedSC;\n  }\n  const response = await fetch(\"/api/env\");\n\n  if (!response.ok) {\n    throw new Error(\n      `Failed to fetch server config: ${response.status} ${response.statusText}`,\n    );\n  }\n  const config = await response.json();\n  // Log the retrieved configuration\n  console.log(\"Server config loaded:\", config);\n\n  cachedSC = getServerConfig(config.game_env);\n  return cachedSC;\n}\nexport function getServerConfigFromServer(): ServerConfig {\n  const gameEnv = process.env.GAME_ENV ?? \"dev\";\n  return getServerConfig(gameEnv);\n}\nexport function getServerConfig(gameEnv: string) {\n  switch (gameEnv) {\n    case \"dev\":\n      console.log(\"using dev server config\");\n      return new DevServerConfig();\n    case \"staging\":\n      console.log(\"using preprod server config\");\n      return preprodConfig;\n    case \"prod\":\n      console.log(\"using prod server config\");\n      return prodConfig;\n    default:\n      throw Error(`unsupported server configuration: ${gameEnv}`);\n  }\n}\n", "import {\n  Execution,\n  Game,\n  MessageType,\n  Player,\n  PlayerID,\n} from \"../../game/Game\";\n\nexport class AllianceExtensionExecution implements Execution {\n  constructor(\n    private readonly from: Player,\n    private readonly toID: PlayerID,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    if (!mg.hasPlayer(this.toID)) {\n      console.warn(\n        `[AllianceExtensionExecution] Player ${this.toID} not found`,\n      );\n      return;\n    }\n    const to = mg.player(this.toID);\n\n    if (!this.from.isAlive() || !to.isAlive()) {\n      console.info(\n        `[AllianceExtensionExecution] Player ${this.from.id()} or ${this.toID} is not alive`,\n      );\n      return;\n    }\n\n    const alliance = this.from.allianceWith(to);\n    if (!alliance) {\n      console.warn(\n        `[AllianceExtensionExecution] No alliance to extend between ${this.from.id()} and ${this.toID}`,\n      );\n      return;\n    }\n\n    // Check if this is a new request (before adding it)\n    const wasOnlyOneAgreed = alliance.onlyOneAgreedToExtend();\n\n    // Mark this player's intent to extend\n    alliance.addExtensionRequest(this.from);\n\n    if (alliance.bothAgreedToExtend()) {\n      alliance.extend();\n\n      mg.displayMessage(\n        \"events_display.alliance_renewed\",\n        MessageType.ALLIANCE_ACCEPTED,\n        this.from.id(),\n        undefined,\n        { name: to.displayName() },\n      );\n      mg.displayMessage(\n        \"events_display.alliance_renewed\",\n        MessageType.ALLIANCE_ACCEPTED,\n        this.toID,\n        undefined,\n        { name: this.from.displayName() },\n      );\n    } else if (alliance.onlyOneAgreedToExtend() && !wasOnlyOneAgreed) {\n      // Send message to the other player that someone wants to renew\n      // Only send if this is a new request (transition from \"none\" to \"one\")\n      mg.displayMessage(\n        \"events_display.wants_to_renew_alliance\",\n        MessageType.RENEW_ALLIANCE,\n        this.toID,\n        undefined,\n        { name: this.from.displayName() },\n      );\n    }\n  }\n\n  tick(ticks: number): void {\n    // No-op\n  }\n\n  isActive(): boolean {\n    return false;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import {\n  AllianceRequest,\n  Execution,\n  Game,\n  Player,\n  PlayerID,\n} from \"../../game/Game\";\n\nexport class AllianceRequestExecution implements Execution {\n  private req: AllianceRequest | null = null;\n  private active = true;\n  private mg: Game;\n\n  constructor(\n    private requestor: Player,\n    private recipientID: PlayerID,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    if (!mg.hasPlayer(this.recipientID)) {\n      console.warn(\n        `AllianceRequestExecution recipient ${this.recipientID} not found`,\n      );\n      return;\n    }\n\n    const recipient = mg.player(this.recipientID);\n\n    if (!this.requestor.canSendAllianceRequest(recipient)) {\n      console.warn(\"cannot send alliance request\");\n      this.active = false;\n    } else {\n      const incoming = recipient\n        .outgoingAllianceRequests()\n        .find((r) => r.recipient() === this.requestor);\n      if (incoming) {\n        // If the recipient already has pending alliance request,\n        // then accept it instead of creating a new one.\n        this.active = false;\n        incoming.accept();\n      } else {\n        this.req = this.requestor.createAllianceRequest(recipient);\n      }\n    }\n  }\n\n  tick(ticks: number): void {\n    if (\n      this.req?.status() === \"accepted\" ||\n      this.req?.status() === \"rejected\"\n    ) {\n      this.active = false;\n      return;\n    }\n    if (\n      this.mg.ticks() - (this.req?.createdAt() ?? 0) >\n      this.mg.config().allianceRequestDuration()\n    ) {\n      this.req?.reject();\n      this.active = false;\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Player, PlayerID } from \"../../game/Game\";\n\nexport class AllianceRequestReplyExecution implements Execution {\n  private active = true;\n  private requestor: Player | null = null;\n\n  constructor(\n    private requestorID: PlayerID,\n    private recipient: Player,\n    private accept: boolean,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    if (!mg.hasPlayer(this.requestorID)) {\n      console.warn(\n        `AllianceRequestReplyExecution requester ${this.requestorID} not found`,\n      );\n      this.active = false;\n      return;\n    }\n    this.requestor = mg.player(this.requestorID);\n\n    if (this.requestor.isFriendly(this.recipient)) {\n      console.warn(\"already allied\");\n    } else {\n      const request = this.requestor\n        .outgoingAllianceRequests()\n        .find((ar) => ar.recipient() === this.recipient);\n      if (request === undefined) {\n        console.warn(\"no alliance request found\");\n      } else {\n        if (this.accept) {\n          request.accept();\n          this.requestor.updateRelation(this.recipient, 100);\n          this.recipient.updateRelation(this.requestor, 100);\n        } else {\n          request.reject();\n        }\n      }\n    }\n    this.active = false;\n  }\n\n  tick(ticks: number): void {}\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Player, PlayerID } from \"../../game/Game\";\n\nexport class BreakAllianceExecution implements Execution {\n  private active = true;\n  private recipient: Player | null = null;\n  private mg: Game | null = null;\n\n  constructor(\n    private requestor: Player,\n    private recipientID: PlayerID,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    if (!mg.hasPlayer(this.recipientID)) {\n      console.warn(\n        `BreakAllianceExecution: recipient ${this.recipientID} not found`,\n      );\n      this.active = false;\n      return;\n    }\n    this.recipient = mg.player(this.recipientID);\n    this.mg = mg;\n  }\n\n  tick(ticks: number): void {\n    if (\n      this.mg === null ||\n      this.requestor === null ||\n      this.recipient === null\n    ) {\n      throw new Error(\"Not initialized\");\n    }\n    const alliance = this.requestor.allianceWith(this.recipient);\n    if (alliance === null) {\n      console.warn(\"cant break alliance, not allied\");\n    } else {\n      this.requestor.breakAlliance(alliance);\n      this.recipient.updateRelation(this.requestor, -200);\n      for (const player of this.mg.players()) {\n        if (player !== this.requestor && !player.isOnSameTeam(this.requestor)) {\n          player.updateRelation(this.requestor, -40);\n        }\n      }\n    }\n    this.active = false;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import IntlMessageFormat from \"intl-messageformat\";\nimport { MessageType } from \"../core/game/Game\";\nimport { LangSelector } from \"./LangSelector\";\n\nexport function renderDuration(totalSeconds: number): string {\n  if (totalSeconds <= 0) return \"0s\";\n  const minutes = Math.floor(totalSeconds / 60);\n  const seconds = totalSeconds % 60;\n  let time = \"\";\n  if (minutes > 0) time += `${minutes}min `;\n  time += `${seconds}s`;\n  return time.trim();\n}\n\nexport function renderTroops(troops: number): string {\n  return renderNumber(troops / 10);\n}\n\nexport function renderNumber(\n  num: number | bigint,\n  fixedPoints?: number,\n): string {\n  num = Number(num);\n  num = Math.max(num, 0);\n\n  if (num >= 10_000_000) {\n    const value = Math.floor(num / 100000) / 10;\n    return value.toFixed(fixedPoints ?? 1) + \"M\";\n  } else if (num >= 1_000_000) {\n    const value = Math.floor(num / 10000) / 100;\n    return value.toFixed(fixedPoints ?? 2) + \"M\";\n  } else if (num >= 100000) {\n    return Math.floor(num / 1000) + \"K\";\n  } else if (num >= 10000) {\n    const value = Math.floor(num / 100) / 10;\n    return value.toFixed(fixedPoints ?? 1) + \"K\";\n  } else if (num >= 1000) {\n    const value = Math.floor(num / 10) / 100;\n    return value.toFixed(fixedPoints ?? 2) + \"K\";\n  } else {\n    return Math.floor(num).toString();\n  }\n}\n\nexport function createCanvas(): HTMLCanvasElement {\n  const canvas = document.createElement(\"canvas\");\n\n  // Set canvas style to fill the screen\n  canvas.style.position = \"fixed\";\n  canvas.style.left = \"0\";\n  canvas.style.top = \"0\";\n  canvas.style.width = \"100%\";\n  canvas.style.height = \"100%\";\n  canvas.style.touchAction = \"none\";\n\n  return canvas;\n}\n/**\n * A polyfill for crypto.randomUUID that provides fallback implementations\n * for older browsers, particularly Safari versions < 15.4\n */\nexport function generateCryptoRandomUUID(): string {\n  // Type guard to check if randomUUID is available\n  if (crypto !== undefined && \"randomUUID\" in crypto) {\n    return crypto.randomUUID();\n  }\n\n  // Fallback using crypto.getRandomValues\n  if (crypto !== undefined && \"getRandomValues\" in crypto) {\n    return (([1e7] as any) + -1e3 + -4e3 + -8e3 + -1e11).replace(\n      /[018]/g,\n      (c: number): string =>\n        (\n          c ^\n          (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n        ).toString(16),\n    );\n  }\n\n  // Last resort fallback using Math.random\n  // Note: This is less cryptographically secure but ensures functionality\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\n    /[xy]/g,\n    (c: string): string => {\n      const r: number = (Math.random() * 16) | 0;\n      const v: number = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    },\n  );\n}\n\nexport const translateText = (\n  key: string,\n  params: Record<string, string | number> = {},\n): string => {\n  const self = translateText as any;\n  self.formatterCache ??= new Map();\n  self.lastLang ??= null;\n\n  const langSelector = document.querySelector(\"lang-selector\") as LangSelector;\n  if (!langSelector) {\n    console.warn(\"LangSelector not found in DOM\");\n    return key;\n  }\n\n  if (\n    !langSelector.translations ||\n    Object.keys(langSelector.translations).length === 0\n  ) {\n    return key;\n  }\n\n  if (self.lastLang !== langSelector.currentLang) {\n    self.formatterCache.clear();\n    self.lastLang = langSelector.currentLang;\n  }\n\n  let message = langSelector.translations[key];\n\n  if (!message && langSelector.defaultTranslations) {\n    const defaultTranslations = langSelector.defaultTranslations;\n    if (defaultTranslations && defaultTranslations[key]) {\n      message = defaultTranslations[key];\n    }\n  }\n\n  if (!message) return key;\n\n  try {\n    const locale =\n      !langSelector.translations[key] && langSelector.currentLang !== \"en\"\n        ? \"en\"\n        : langSelector.currentLang;\n    const cacheKey = `${key}:${locale}:${message}`;\n    let formatter = self.formatterCache.get(cacheKey);\n\n    if (!formatter) {\n      formatter = new IntlMessageFormat(message, locale);\n      self.formatterCache.set(cacheKey, formatter);\n    }\n\n    return formatter.format(params) as string;\n  } catch (e) {\n    console.warn(\"ICU format error\", e);\n    return message;\n  }\n};\n\n/**\n * Severity colors mapping for message types\n */\nexport const severityColors: Record<string, string> = {\n  fail: \"text-red-400\",\n  warn: \"text-yellow-400\",\n  success: \"text-green-400\",\n  info: \"text-gray-200\",\n  blue: \"text-blue-400\",\n  white: \"text-white\",\n};\n\n/**\n * Gets the CSS classes for styling message types based on their severity\n * @param type The message type to get styling for\n * @returns CSS class string for the message type\n */\nexport function getMessageTypeClasses(type: MessageType): string {\n  switch (type) {\n    case MessageType.SAM_HIT:\n    case MessageType.CAPTURED_ENEMY_UNIT:\n    case MessageType.RECEIVED_GOLD_FROM_TRADE:\n    case MessageType.CONQUERED_PLAYER:\n      return severityColors[\"success\"];\n    case MessageType.ATTACK_FAILED:\n    case MessageType.ALLIANCE_REJECTED:\n    case MessageType.ALLIANCE_BROKEN:\n    case MessageType.UNIT_CAPTURED_BY_ENEMY:\n    case MessageType.UNIT_DESTROYED:\n      return severityColors[\"fail\"];\n    case MessageType.ATTACK_CANCELLED:\n    case MessageType.ATTACK_REQUEST:\n    case MessageType.ALLIANCE_ACCEPTED:\n    case MessageType.SENT_GOLD_TO_PLAYER:\n    case MessageType.SENT_TROOPS_TO_PLAYER:\n    case MessageType.RECEIVED_GOLD_FROM_PLAYER:\n    case MessageType.RECEIVED_TROOPS_FROM_PLAYER:\n      return severityColors[\"blue\"];\n    case MessageType.MIRV_INBOUND:\n    case MessageType.NUKE_INBOUND:\n    case MessageType.HYDROGEN_BOMB_INBOUND:\n    case MessageType.SAM_MISS:\n    case MessageType.ALLIANCE_EXPIRED:\n    case MessageType.NAVAL_INVASION_INBOUND:\n    case MessageType.RENEW_ALLIANCE:\n      return severityColors[\"warn\"];\n    case MessageType.CHAT:\n    case MessageType.ALLIANCE_REQUEST:\n      return severityColors[\"info\"];\n    default:\n      console.warn(`Message type ${type} has no explicit color`);\n      return severityColors[\"white\"];\n  }\n}\n\nexport function getModifierKey(): string {\n  const isMac = /Mac/.test(navigator.userAgent);\n  if (isMac) {\n    return \"\u2318\"; // Command key\n  } else {\n    return \"Ctrl\";\n  }\n}\n\nexport function getAltKey(): string {\n  const isMac = /Mac/.test(navigator.userAgent);\n  if (isMac) {\n    return \"\u2325\"; // Option key\n  } else {\n    return \"Alt\";\n  }\n}\n\nexport function getGamesPlayed(): number {\n  try {\n    return parseInt(localStorage.getItem(\"gamesPlayed\") ?? \"0\", 10) || 0;\n  } catch (error) {\n    console.warn(\"Failed to read games played from localStorage:\", error);\n    return 0;\n  }\n}\n\nexport function incrementGamesPlayed(): void {\n  try {\n    localStorage.setItem(\"gamesPlayed\", (getGamesPlayed() + 1).toString());\n  } catch (error) {\n    console.warn(\"Failed to increment games played in localStorage:\", error);\n  }\n}\n\nexport function isInIframe(): boolean {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    // If we can't access window.top due to cross-origin restrictions,\n    // we're definitely in an iframe\n    return true;\n  }\n}\n\nexport async function getSvgAspectRatio(src: string): Promise<number | null> {\n  const self = getSvgAspectRatio as any;\n  self.svgAspectRatioCache ??= new Map();\n\n  const cached = self.svgAspectRatioCache.get(src);\n  if (cached !== undefined) return cached;\n\n  try {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 5000);\n    const resp = await fetch(src, { signal: controller.signal });\n    clearTimeout(timeoutId);\n    if (!resp.ok) throw new Error(`Fetch failed: ${resp.status}`);\n    const text = await resp.text();\n\n    // Try parse viewBox\n    const vbMatch = text.match(/viewBox=\"([^\"]+)\"/i);\n    if (vbMatch) {\n      const parts = vbMatch[1]\n        .trim()\n        .split(/[\\s,]+/)\n        .map(Number);\n      if (parts.length === 4 && parts.every((n) => !Number.isNaN(n))) {\n        const [, , vbW, vbH] = parts;\n        if (vbW > 0 && vbH > 0) {\n          const ratio = vbW / vbH;\n          self.svgAspectRatioCache.set(src, ratio);\n          return ratio;\n        }\n      }\n    }\n\n    // Fallback to width/height attributes (may be with units; strip px)\n    const widthMatch = text.match(/<svg[^>]*\\swidth=\"([^\"]+)\"/i);\n    const heightMatch = text.match(/<svg[^>]*\\sheight=\"([^\"]+)\"/i);\n    if (widthMatch && heightMatch) {\n      const parseNum = (s: string) => Number(s.replace(/[^0-9.]/g, \"\"));\n      const w = parseNum(widthMatch[1]);\n      const h = parseNum(heightMatch[1]);\n      if (w > 0 && h > 0) {\n        const ratio = w / h;\n        self.svgAspectRatioCache.set(src, ratio);\n        return ratio;\n      }\n    }\n    // Not an SVG or no usable metadata\n  } catch (e) {\n    // fetch may fail due to CORS or non-SVG..\n  }\n\n  return null;\n}\n", "import { TileRef } from \"../../game/GameMap\";\n\n/**\n * Lightweight min-heap specialised for (priority:number, tile:TileRef) pairs.\n * - priorities stored in a contiguous Float32Array\n * - tiles stored in a parallel object array\n */\nexport class FlatBinaryHeap {\n  /** parallel arrays: pri[ i ] is the priority of tiles[ i ] */\n  private pri: Float32Array;\n  private tiles: TileRef[];\n  private len = 0; // current number of elements\n\n  constructor(capacity = 1024) {\n    this.pri = new Float32Array(capacity);\n    this.tiles = new Array<TileRef>(capacity);\n  }\n\n  /** remove every element without reallocating */\n  clear(): void {\n    this.len = 0;\n  }\n\n  /** current heap size */\n  size(): number {\n    return this.len;\n  }\n\n  //insert tiles\n  enqueue(tile: TileRef, priority: number): void {\n    if (this.len === this.pri.length) this.grow(); // ensure space\n    let i = this.len++;\n\n    /* sift-up */\n    while (i > 0) {\n      const parent = (i - 1) >> 1;\n      if (priority >= this.pri[parent]) break;\n      this.pri[i] = this.pri[parent];\n      this.tiles[i] = this.tiles[parent];\n      i = parent;\n    }\n    this.pri[i] = priority;\n    this.tiles[i] = tile;\n  }\n\n  //remove tiles\n  dequeue(): [TileRef, number] {\n    if (this.len === 0) throw new Error(\"heap empty\");\n\n    const topTile = this.tiles[0];\n    const topPri = this.pri[0];\n\n    const lastPri = this.pri[--this.len];\n    const lastTile = this.tiles[this.len];\n\n    /* sift-down */\n    let i = 0;\n    while (true) {\n      const left = (i << 1) + 1;\n      if (left >= this.len) break;\n      const right = left + 1;\n      const child =\n        right < this.len && this.pri[right] < this.pri[left] ? right : left;\n      if (lastPri <= this.pri[child]) break;\n      this.pri[i] = this.pri[child];\n      this.tiles[i] = this.tiles[child];\n      i = child;\n    }\n    this.pri[i] = lastPri;\n    this.tiles[i] = lastTile;\n    return [topTile, topPri];\n  }\n\n  /** double the underlying storage */\n  private grow(): void {\n    const newCap = this.pri.length << 1;\n\n    const newPri = new Float32Array(newCap);\n    newPri.set(this.pri);\n    this.pri = newPri;\n\n    this.tiles.length = newCap;\n  }\n}\n", "import { renderTroops } from \"../../client/Utils\";\nimport {\n  Attack,\n  Execution,\n  Game,\n  MessageType,\n  Player,\n  PlayerID,\n  PlayerType,\n  TerrainType,\n  TerraNullius,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { FlatBinaryHeap } from \"./utils/FlatBinaryHeap\"; // adjust path if needed\n\nconst malusForRetreat = 25;\nexport class AttackExecution implements Execution {\n  private active: boolean = true;\n  private toConquer = new FlatBinaryHeap();\n\n  private random = new PseudoRandom(123);\n\n  private target: Player | TerraNullius;\n\n  private mg: Game;\n\n  private attack: Attack | null = null;\n\n  constructor(\n    private startTroops: number | null = null,\n    private _owner: Player,\n    private _targetID: PlayerID | null,\n    private sourceTile: TileRef | null = null,\n    private removeTroops: boolean = true,\n  ) {}\n\n  public targetID(): PlayerID | null {\n    return this._targetID;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  init(mg: Game, ticks: number) {\n    if (!this.active) {\n      return;\n    }\n    this.mg = mg;\n\n    if (this._targetID !== null && !mg.hasPlayer(this._targetID)) {\n      console.warn(`target ${this._targetID} not found`);\n      this.active = false;\n      return;\n    }\n\n    this.target =\n      this._targetID === this.mg.terraNullius().id()\n        ? mg.terraNullius()\n        : mg.player(this._targetID);\n\n    if (this._owner === this.target) {\n      console.error(`Player ${this._owner} cannot attack itself`);\n      this.active = false;\n      return;\n    }\n\n    // ALLIANCE CHECK \u2014 block attacks on friendly (ally or same team)\n    if (this.target.isPlayer()) {\n      const targetPlayer = this.target as Player;\n      if (this._owner.isFriendly(targetPlayer)) {\n        console.warn(\n          `${this._owner.displayName()} cannot attack ${targetPlayer.displayName()} because they are friendly (allied or same team)`,\n        );\n        this.active = false;\n        return;\n      }\n    }\n\n    if (this.target && this.target.isPlayer()) {\n      const targetPlayer = this.target as Player;\n      if (\n        targetPlayer.type() !== PlayerType.Bot &&\n        this._owner.type() !== PlayerType.Bot\n      ) {\n        // Don't let bots embargo since they can't trade anyway.\n        targetPlayer.addEmbargo(this._owner, true);\n        this.rejectIncomingAllianceRequests(targetPlayer);\n      }\n    }\n\n    if (this.target.isPlayer()) {\n      if (\n        this.mg.config().numSpawnPhaseTurns() +\n          this.mg.config().spawnImmunityDuration() >\n        this.mg.ticks()\n      ) {\n        console.warn(\"cannot attack player during immunity phase\");\n        this.active = false;\n        return;\n      }\n    }\n\n    this.startTroops ??= this.mg\n      .config()\n      .attackAmount(this._owner, this.target);\n    if (this.removeTroops) {\n      this.startTroops = Math.min(this._owner.troops(), this.startTroops);\n      this._owner.removeTroops(this.startTroops);\n    }\n    this.attack = this._owner.createAttack(\n      this.target,\n      this.startTroops,\n      this.sourceTile,\n      new Set<TileRef>(),\n    );\n\n    if (this.sourceTile !== null) {\n      this.addNeighbors(this.sourceTile);\n    } else {\n      this.refreshToConquer();\n    }\n\n    // Record stats\n    this.mg.stats().attack(this._owner, this.target, this.startTroops);\n\n    for (const incoming of this._owner.incomingAttacks()) {\n      if (incoming.attacker() === this.target) {\n        // Target has opposing attack, cancel them out\n        if (incoming.troops() > this.attack.troops()) {\n          incoming.setTroops(incoming.troops() - this.attack.troops());\n          this.attack.delete();\n          this.active = false;\n          return;\n        } else {\n          this.attack.setTroops(this.attack.troops() - incoming.troops());\n          incoming.delete();\n        }\n      }\n    }\n    for (const outgoing of this._owner.outgoingAttacks()) {\n      if (\n        outgoing !== this.attack &&\n        outgoing.target() === this.attack.target() &&\n        // Boat attacks (sourceTile is not null) are not combined with other attacks\n        this.attack.sourceTile() === null\n      ) {\n        this.attack.setTroops(this.attack.troops() + outgoing.troops());\n        outgoing.delete();\n      }\n    }\n\n    if (this.target.isPlayer()) {\n      this.target.updateRelation(this._owner, -80);\n    }\n  }\n\n  private refreshToConquer() {\n    if (this.attack === null) {\n      throw new Error(\"Attack not initialized\");\n    }\n\n    this.toConquer.clear();\n    this.attack.clearBorder();\n    for (const tile of this._owner.borderTiles()) {\n      this.addNeighbors(tile);\n    }\n  }\n\n  private retreat(malusPercent = 0) {\n    if (this.attack === null) {\n      throw new Error(\"Attack not initialized\");\n    }\n\n    const deaths = this.attack.troops() * (malusPercent / 100);\n    if (deaths) {\n      this.mg.displayMessage(\n        `Attack cancelled, ${renderTroops(deaths)} soldiers killed during retreat.`,\n        MessageType.ATTACK_CANCELLED,\n        this._owner.id(),\n      );\n    }\n    if (this.removeTroops === false && this.sourceTile === null) {\n      // startTroops are always added to attack troops at init but not always removed from owner troops\n      // subtract startTroops from attack troops so we don't give back startTroops to owner that were never removed\n      // boat attacks (sourceTile !== null) are the exception: troops were removed at departure and must be returned after attack still\n      this.attack.setTroops(this.attack.troops() - (this.startTroops ?? 0));\n    }\n\n    const survivors = this.attack.troops() - deaths;\n    this._owner.addTroops(survivors);\n    this.attack.delete();\n    this.active = false;\n\n    // Not all retreats are canceled attacks\n    if (this.attack.retreated()) {\n      // Record stats\n      this.mg.stats().attackCancel(this._owner, this.target, survivors);\n    }\n  }\n\n  tick(ticks: number) {\n    if (this.attack === null) {\n      throw new Error(\"Attack not initialized\");\n    }\n    let troopCount = this.attack.troops(); // cache troop count\n    const targetIsPlayer = this.target.isPlayer(); // cache target type\n    const targetPlayer = targetIsPlayer ? (this.target as Player) : null; // cache target player\n\n    if (this.attack.retreated()) {\n      if (targetIsPlayer) {\n        this.retreat(malusForRetreat);\n      } else {\n        this.retreat();\n      }\n      this.active = false;\n      return;\n    }\n\n    if (this.attack.retreating()) {\n      return;\n    }\n\n    if (!this.attack.isActive()) {\n      this.active = false;\n      return;\n    }\n\n    if (targetPlayer && this._owner.isFriendly(targetPlayer)) {\n      // In this case a new alliance was created AFTER the attack started.\n      this.retreat();\n      return;\n    }\n\n    let numTilesPerTick = this.mg\n      .config()\n      .attackTilesPerTick(\n        troopCount,\n        this._owner,\n        this.target,\n        this.attack.borderSize() + this.random.nextInt(0, 5),\n      );\n\n    while (numTilesPerTick > 0) {\n      if (troopCount < 1) {\n        this.attack.delete();\n        this.active = false;\n        return;\n      }\n\n      if (this.toConquer.size() === 0) {\n        this.refreshToConquer();\n        this.retreat();\n        return;\n      }\n\n      const [tileToConquer] = this.toConquer.dequeue();\n      this.attack.removeBorderTile(tileToConquer);\n\n      let onBorder = false;\n      for (const n of this.mg.neighbors(tileToConquer)) {\n        if (this.mg.owner(n) === this._owner) {\n          onBorder = true;\n          break;\n        }\n      }\n      if (this.mg.owner(tileToConquer) !== this.target || !onBorder) {\n        continue;\n      }\n      this.addNeighbors(tileToConquer);\n      const { attackerTroopLoss, defenderTroopLoss, tilesPerTickUsed } = this.mg\n        .config()\n        .attackLogic(\n          this.mg,\n          troopCount,\n          this._owner,\n          this.target,\n          tileToConquer,\n        );\n      numTilesPerTick -= tilesPerTickUsed;\n      troopCount -= attackerTroopLoss;\n      this.attack.setTroops(troopCount);\n      if (targetPlayer) {\n        targetPlayer.removeTroops(defenderTroopLoss);\n      }\n      this._owner.conquer(tileToConquer);\n      this.handleDeadDefender();\n    }\n  }\n\n  private rejectIncomingAllianceRequests(target: Player) {\n    const request = this._owner\n      .incomingAllianceRequests()\n      .find((ar) => ar.requestor() === target);\n    if (request !== undefined) {\n      request.reject();\n    }\n  }\n\n  private addNeighbors(tile: TileRef) {\n    if (this.attack === null) {\n      throw new Error(\"Attack not initialized\");\n    }\n\n    const tickNow = this.mg.ticks(); // cache tick\n\n    for (const neighbor of this.mg.neighbors(tile)) {\n      if (\n        this.mg.isWater(neighbor) ||\n        this.mg.owner(neighbor) !== this.target\n      ) {\n        continue;\n      }\n      this.attack.addBorderTile(neighbor);\n      let numOwnedByMe = 0;\n      for (const n of this.mg.neighbors(neighbor)) {\n        if (this.mg.owner(n) === this._owner) {\n          numOwnedByMe++;\n        }\n      }\n\n      let mag = 0;\n      switch (this.mg.terrainType(neighbor)) {\n        case TerrainType.Plains:\n          mag = 1;\n          break;\n        case TerrainType.Highland:\n          mag = 1.5;\n          break;\n        case TerrainType.Mountain:\n          mag = 2;\n          break;\n      }\n\n      const priority =\n        (this.random.nextInt(0, 7) + 10) * (1 - numOwnedByMe * 0.5 + mag / 2) +\n        tickNow;\n\n      this.toConquer.enqueue(neighbor, priority);\n    }\n  }\n\n  private handleDeadDefender() {\n    if (!(this.target.isPlayer() && this.target.numTilesOwned() < 100)) return;\n\n    this.mg.conquerPlayer(this._owner, this.target);\n\n    for (let i = 0; i < 10; i++) {\n      for (const tile of this.target.tiles()) {\n        const borders = this.mg\n          .neighbors(tile)\n          .some((t) => this.mg.owner(t) === this._owner);\n        if (borders) {\n          this._owner.conquer(tile);\n        } else {\n          for (const neighbor of this.mg.neighbors(tile)) {\n            const no = this.mg.owner(neighbor);\n            if (no.isPlayer() && no !== this.target) {\n              this.mg.player(no.id()).conquer(tile);\n              break;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  owner(): Player {\n    return this._owner;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n}\n", "import { Execution, Game, Player, UnitType } from \"../game/Game\";\n\nexport class BoatRetreatExecution implements Execution {\n  private active = true;\n  constructor(\n    private player: Player,\n    private unitID: number,\n  ) {}\n\n  init(mg: Game, ticks: number): void {}\n\n  tick(ticks: number): void {\n    const unit = this.player\n      .units()\n      .find(\n        (unit) =>\n          unit.id() === this.unitID && unit.type() === UnitType.TransportShip,\n      );\n\n    if (!unit) {\n      console.warn(`Didn't find outgoing boat with id ${this.unitID}`);\n      this.active = false;\n      return;\n    }\n\n    unit.orderBoatRetreat();\n    this.active = false;\n  }\n\n  owner(): Player {\n    return this.player;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import {\n  AllPlayers,\n  Execution,\n  Game,\n  Player,\n  PlayerID,\n  PlayerType,\n} from \"../game/Game\";\nimport { flattenedEmojiTable } from \"../Util\";\n\nexport class EmojiExecution implements Execution {\n  private recipient: Player | typeof AllPlayers;\n\n  private active = true;\n\n  constructor(\n    private requestor: Player,\n    private recipientID: PlayerID | typeof AllPlayers,\n    private emoji: number,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    if (this.recipientID !== AllPlayers && !mg.hasPlayer(this.recipientID)) {\n      console.warn(`EmojiExecution: recipient ${this.recipientID} not found`);\n      this.active = false;\n      return;\n    }\n\n    this.recipient =\n      this.recipientID === AllPlayers\n        ? AllPlayers\n        : mg.player(this.recipientID);\n  }\n\n  tick(ticks: number): void {\n    const emojiString = flattenedEmojiTable[this.emoji];\n    if (emojiString === undefined) {\n      console.warn(\n        `cannot send emoji ${this.emoji} from ${this.requestor} to ${this.recipient}`,\n      );\n    } else if (this.requestor.canSendEmoji(this.recipient)) {\n      this.requestor.sendEmoji(this.recipient, emojiString);\n      if (\n        emojiString === \"\uD83D\uDD95\" &&\n        this.recipient !== AllPlayers &&\n        this.recipient.type() === PlayerType.FakeHuman\n      ) {\n        this.recipient.updateRelation(this.requestor, -100);\n      }\n    } else {\n      console.warn(\n        `cannot send emoji from ${this.requestor} to ${this.recipient}`,\n      );\n    }\n    this.active = false;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import FastPriorityQueue from \"fastpriorityqueue\";\nimport { AStar, PathFindResultType } from \"./AStar\";\n\n/**\n * Implement this interface with your graph to find paths with A*\n */\nexport interface GraphAdapter<NodeType> {\n  neighbors(node: NodeType): NodeType[];\n  cost(node: NodeType): number;\n  position(node: NodeType): { x: number; y: number };\n  isTraversable(from: NodeType, to: NodeType): boolean;\n}\n\nexport class SerialAStar<NodeType> implements AStar<NodeType> {\n  private fwdOpenSet: FastPriorityQueue<{\n    tile: NodeType;\n    fScore: number;\n  }>;\n  private bwdOpenSet: FastPriorityQueue<{\n    tile: NodeType;\n    fScore: number;\n  }>;\n\n  private fwdCameFrom = new Map<NodeType, NodeType>();\n  private bwdCameFrom = new Map<NodeType, NodeType>();\n  private fwdGScore = new Map<NodeType, number>();\n  private bwdGScore = new Map<NodeType, number>();\n\n  private meetingPoint: NodeType | null = null;\n  public completed = false;\n  private sources: NodeType[];\n  private closestSource: NodeType;\n\n  constructor(\n    src: NodeType | NodeType[],\n    private dst: NodeType,\n    private iterations: number,\n    private maxTries: number,\n    private graph: GraphAdapter<NodeType>,\n    private directionChangePenalty: number = 0,\n  ) {\n    this.fwdOpenSet = new FastPriorityQueue((a, b) => a.fScore < b.fScore);\n    this.bwdOpenSet = new FastPriorityQueue((a, b) => a.fScore < b.fScore);\n    this.sources = Array.isArray(src) ? src : [src];\n    this.closestSource = this.findClosestSource(dst);\n\n    // Initialize forward search with source point(s)\n    this.sources.forEach((startPoint) => {\n      this.fwdGScore.set(startPoint, 0);\n      this.fwdOpenSet.add({\n        tile: startPoint,\n        fScore: this.heuristic(startPoint, dst),\n      });\n    });\n\n    // Initialize backward search from destination\n    this.bwdGScore.set(dst, 0);\n    this.bwdOpenSet.add({\n      tile: dst,\n      fScore: this.heuristic(dst, this.findClosestSource(dst)),\n    });\n  }\n\n  private findClosestSource(tile: NodeType): NodeType {\n    return this.sources.reduce((closest, source) =>\n      this.heuristic(tile, source) < this.heuristic(tile, closest)\n        ? source\n        : closest,\n    );\n  }\n\n  compute(): PathFindResultType {\n    if (this.completed) return PathFindResultType.Completed;\n\n    this.maxTries -= 1;\n    let iterations = this.iterations;\n\n    while (!this.fwdOpenSet.isEmpty() && !this.bwdOpenSet.isEmpty()) {\n      iterations--;\n      if (iterations <= 0) {\n        if (this.maxTries <= 0) {\n          return PathFindResultType.PathNotFound;\n        }\n        return PathFindResultType.Pending;\n      }\n\n      // Process forward search\n      const fwdCurrent = this.fwdOpenSet.poll()!.tile;\n\n      // Check if we've found a meeting point\n      if (this.bwdGScore.has(fwdCurrent)) {\n        this.meetingPoint = fwdCurrent;\n        this.completed = true;\n        return PathFindResultType.Completed;\n      }\n      this.expandNode(fwdCurrent, true);\n\n      // Process backward search\n      const bwdCurrent = this.bwdOpenSet.poll()!.tile;\n\n      // Check if we've found a meeting point\n      if (this.fwdGScore.has(bwdCurrent)) {\n        this.meetingPoint = bwdCurrent;\n        this.completed = true;\n        return PathFindResultType.Completed;\n      }\n      this.expandNode(bwdCurrent, false);\n    }\n\n    return this.completed\n      ? PathFindResultType.Completed\n      : PathFindResultType.PathNotFound;\n  }\n\n  private expandNode(current: NodeType, isForward: boolean) {\n    for (const neighbor of this.graph.neighbors(current)) {\n      if (\n        neighbor !== (isForward ? this.dst : this.closestSource) &&\n        !this.graph.isTraversable(current, neighbor)\n      )\n        continue;\n\n      const gScore = isForward ? this.fwdGScore : this.bwdGScore;\n      const openSet = isForward ? this.fwdOpenSet : this.bwdOpenSet;\n      const cameFrom = isForward ? this.fwdCameFrom : this.bwdCameFrom;\n\n      const tentativeGScore = gScore.get(current)! + this.graph.cost(neighbor);\n      let penalty = 0;\n      // With a direction change penalty, the path will get as straight as possible\n      if (this.directionChangePenalty > 0) {\n        const prev = cameFrom.get(current);\n        if (prev) {\n          const prevDir = this.getDirection(prev, current);\n          const newDir = this.getDirection(current, neighbor);\n          if (prevDir !== newDir) {\n            penalty = this.directionChangePenalty;\n          }\n        }\n      }\n\n      const totalG = tentativeGScore + penalty;\n      if (!gScore.has(neighbor) || totalG < gScore.get(neighbor)!) {\n        cameFrom.set(neighbor, current);\n        gScore.set(neighbor, totalG);\n        const fScore =\n          totalG +\n          this.heuristic(neighbor, isForward ? this.dst : this.closestSource);\n        openSet.add({ tile: neighbor, fScore: fScore });\n      }\n    }\n  }\n\n  private heuristic(a: NodeType, b: NodeType): number {\n    const posA = this.graph.position(a);\n    const posB = this.graph.position(b);\n    return 2 * (Math.abs(posA.x - posB.x) + Math.abs(posA.y - posB.y));\n  }\n\n  private getDirection(from: NodeType, to: NodeType): string {\n    const fromPos = this.graph.position(from);\n    const toPos = this.graph.position(to);\n    const dx = toPos.x - fromPos.x;\n    const dy = toPos.y - fromPos.y;\n    return `${Math.sign(dx)},${Math.sign(dy)}`;\n  }\n\n  public reconstructPath(): NodeType[] {\n    if (!this.meetingPoint) return [];\n\n    // Reconstruct path from start to meeting point\n    const fwdPath: NodeType[] = [this.meetingPoint];\n    let current = this.meetingPoint;\n\n    while (this.fwdCameFrom.has(current)) {\n      current = this.fwdCameFrom.get(current)!;\n      fwdPath.unshift(current);\n    }\n\n    // Reconstruct path from meeting point to goal\n    current = this.meetingPoint;\n\n    while (this.bwdCameFrom.has(current)) {\n      current = this.bwdCameFrom.get(current)!;\n      fwdPath.push(current);\n    }\n\n    return fwdPath;\n  }\n}\n", "import { Cell } from \"../game/Game\";\nimport { GameMap, TileRef } from \"../game/GameMap\";\nimport { AStar, PathFindResultType } from \"./AStar\";\nimport { GraphAdapter, SerialAStar } from \"./SerialAStar\";\n\nexport class GameMapAdapter implements GraphAdapter<TileRef> {\n  private readonly waterPenalty = 3;\n  constructor(\n    private gameMap: GameMap,\n    private waterPath: boolean,\n  ) {}\n\n  neighbors(node: TileRef): TileRef[] {\n    return this.gameMap.neighbors(node);\n  }\n\n  cost(node: TileRef): number {\n    let base = this.gameMap.cost(node);\n    // Avoid crossing water when possible\n    if (!this.waterPath && this.gameMap.isWater(node)) {\n      base += this.waterPenalty;\n    }\n    return base;\n  }\n\n  position(node: TileRef): { x: number; y: number } {\n    return { x: this.gameMap.x(node), y: this.gameMap.y(node) };\n  }\n\n  isTraversable(from: TileRef, to: TileRef): boolean {\n    const toWater = this.gameMap.isWater(to);\n    if (this.waterPath) {\n      return toWater;\n    }\n    // Allow water access from/to shore\n    const fromShore = this.gameMap.isShoreline(from);\n    const toShore = this.gameMap.isShoreline(to);\n    return !toWater || fromShore || toShore;\n  }\n}\nexport class MiniAStar implements AStar<TileRef> {\n  private aStar: AStar<TileRef>;\n\n  constructor(\n    private gameMap: GameMap,\n    private miniMap: GameMap,\n    private src: TileRef | TileRef[],\n    private dst: TileRef,\n    iterations: number,\n    maxTries: number,\n    waterPath: boolean = true,\n    directionChangePenalty: number = 0,\n  ) {\n    const srcArray: TileRef[] = Array.isArray(src) ? src : [src];\n    const miniSrc = srcArray.map((srcPoint) =>\n      this.miniMap.ref(\n        Math.floor(gameMap.x(srcPoint) / 2),\n        Math.floor(gameMap.y(srcPoint) / 2),\n      ),\n    );\n\n    const miniDst = this.miniMap.ref(\n      Math.floor(gameMap.x(dst) / 2),\n      Math.floor(gameMap.y(dst) / 2),\n    );\n\n    this.aStar = new SerialAStar(\n      miniSrc,\n      miniDst,\n      iterations,\n      maxTries,\n      new GameMapAdapter(miniMap, waterPath),\n      directionChangePenalty,\n    );\n  }\n\n  compute(): PathFindResultType {\n    return this.aStar.compute();\n  }\n\n  reconstructPath(): TileRef[] {\n    let cellSrc: Cell | undefined;\n    if (!Array.isArray(this.src)) {\n      cellSrc = new Cell(this.gameMap.x(this.src), this.gameMap.y(this.src));\n    }\n    const cellDst = new Cell(\n      this.gameMap.x(this.dst),\n      this.gameMap.y(this.dst),\n    );\n    const upscaled = fixExtremes(\n      upscalePath(\n        this.aStar\n          .reconstructPath()\n          .map((tr) => new Cell(this.miniMap.x(tr), this.miniMap.y(tr))),\n      ),\n      cellDst,\n      cellSrc,\n    );\n    return upscaled.map((c) => this.gameMap.ref(c.x, c.y));\n  }\n}\n\nfunction fixExtremes(upscaled: Cell[], cellDst: Cell, cellSrc?: Cell): Cell[] {\n  if (cellSrc !== undefined) {\n    const srcIndex = findCell(upscaled, cellSrc);\n    if (srcIndex === -1) {\n      // didn't find the start tile in the path\n      upscaled.unshift(cellSrc);\n    } else if (srcIndex !== 0) {\n      // found start tile but not at the start\n      // remove all tiles before the start tile\n      upscaled = upscaled.slice(srcIndex);\n    }\n  }\n\n  const dstIndex = findCell(upscaled, cellDst);\n  if (dstIndex === -1) {\n    // didn't find the dst tile in the path\n    upscaled.push(cellDst);\n  } else if (dstIndex !== upscaled.length - 1) {\n    // found dst tile but not at the end\n    // remove all tiles after the dst tile\n    upscaled = upscaled.slice(0, dstIndex + 1);\n  }\n  return upscaled;\n}\n\nfunction upscalePath(path: Cell[], scaleFactor: number = 2): Cell[] {\n  // Scale up each point\n  const scaledPath = path.map(\n    (point) => new Cell(point.x * scaleFactor, point.y * scaleFactor),\n  );\n\n  const smoothPath: Cell[] = [];\n\n  for (let i = 0; i < scaledPath.length - 1; i++) {\n    const current = scaledPath[i];\n    const next = scaledPath[i + 1];\n\n    // Add the current point\n    smoothPath.push(current);\n\n    // Always interpolate between scaled points\n    const dx = next.x - current.x;\n    const dy = next.y - current.y;\n\n    // Calculate number of steps needed\n    const distance = Math.max(Math.abs(dx), Math.abs(dy));\n    const steps = distance;\n\n    // Add intermediate points\n    for (let step = 1; step < steps; step++) {\n      smoothPath.push(\n        new Cell(\n          Math.round(current.x + (dx * step) / steps),\n          Math.round(current.y + (dy * step) / steps),\n        ),\n      );\n    }\n  }\n\n  // Add the last point\n  if (scaledPath.length > 0) {\n    smoothPath.push(scaledPath[scaledPath.length - 1]);\n  }\n\n  return smoothPath;\n}\n\nfunction findCell(upscaled: Cell[], cellDst: Cell): number {\n  for (let i = 0; i < upscaled.length; i++) {\n    if (upscaled[i].x === cellDst.x && upscaled[i].y === cellDst.y) {\n      return i;\n    }\n  }\n  return -1;\n}\n", "import { Cell, TerrainType } from \"./Game\";\n\nexport type TileRef = number;\nexport type TileUpdate = bigint;\n\nexport interface GameMap {\n  ref(x: number, y: number): TileRef;\n  isValidRef(ref: TileRef): boolean;\n  x(ref: TileRef): number;\n  y(ref: TileRef): number;\n  cell(ref: TileRef): Cell;\n  width(): number;\n  height(): number;\n  numLandTiles(): number;\n\n  isValidCoord(x: number, y: number): boolean;\n  // Terrain getters (immutable)\n  isLand(ref: TileRef): boolean;\n  isOceanShore(ref: TileRef): boolean;\n  isOcean(ref: TileRef): boolean;\n  isShoreline(ref: TileRef): boolean;\n  magnitude(ref: TileRef): number;\n  // State getters and setters (mutable)\n  ownerID(ref: TileRef): number;\n  hasOwner(ref: TileRef): boolean;\n\n  setOwnerID(ref: TileRef, playerId: number): void;\n  hasFallout(ref: TileRef): boolean;\n  setFallout(ref: TileRef, value: boolean): void;\n  isOnEdgeOfMap(ref: TileRef): boolean;\n  isBorder(ref: TileRef): boolean;\n  neighbors(ref: TileRef): TileRef[];\n  isWater(ref: TileRef): boolean;\n  isLake(ref: TileRef): boolean;\n  isShore(ref: TileRef): boolean;\n  cost(ref: TileRef): number;\n  terrainType(ref: TileRef): TerrainType;\n  forEachTile(fn: (tile: TileRef) => void): void;\n\n  manhattanDist(c1: TileRef, c2: TileRef): number;\n  euclideanDistSquared(c1: TileRef, c2: TileRef): number;\n  bfs(\n    tile: TileRef,\n    filter: (gm: GameMap, tile: TileRef) => boolean,\n  ): Set<TileRef>;\n\n  toTileUpdate(tile: TileRef): bigint;\n  updateTile(tu: TileUpdate): TileRef;\n\n  numTilesWithFallout(): number;\n}\n\nexport class GameMapImpl implements GameMap {\n  private _numTilesWithFallout = 0;\n\n  private readonly terrain: Uint8Array; // Immutable terrain data\n  private readonly state: Uint16Array; // Mutable game state\n  private readonly width_: number;\n  private readonly height_: number;\n\n  // Lookup tables (LUTs) contain pre-computed values to avoid performing division at runtime\n  private readonly refToX: number[];\n  private readonly refToY: number[];\n  private readonly yToRef: number[];\n\n  // Terrain bits (Uint8Array)\n  private static readonly IS_LAND_BIT = 7;\n  private static readonly SHORELINE_BIT = 6;\n  private static readonly OCEAN_BIT = 5;\n  private static readonly MAGNITUDE_MASK = 0x1f; // 11111 in binary\n\n  // State bits (Uint16Array)\n  private static readonly PLAYER_ID_MASK = 0xfff;\n  private static readonly FALLOUT_BIT = 13;\n  private static readonly DEFENSE_BONUS_BIT = 14;\n  // Bit 15 still reserved\n\n  constructor(\n    width: number,\n    height: number,\n    terrainData: Uint8Array,\n    private numLandTiles_: number,\n  ) {\n    if (terrainData.length !== width * height) {\n      throw new Error(\n        `Terrain data length ${terrainData.length} doesn't match dimensions ${width}x${height}`,\n      );\n    }\n    this.width_ = width;\n    this.height_ = height;\n    this.terrain = terrainData;\n    this.state = new Uint16Array(width * height);\n    // Precompute the LUTs\n    let ref = 0;\n    this.refToX = new Array(width * height);\n    this.refToY = new Array(width * height);\n    this.yToRef = new Array(height);\n    for (let y = 0; y < height; y++) {\n      this.yToRef[y] = ref;\n      for (let x = 0; x < width; x++) {\n        this.refToX[ref] = x;\n        this.refToY[ref] = y;\n        ref++;\n      }\n    }\n  }\n  numTilesWithFallout(): number {\n    return this._numTilesWithFallout;\n  }\n\n  ref(x: number, y: number): TileRef {\n    if (!this.isValidCoord(x, y)) {\n      throw new Error(`Invalid coordinates: ${x},${y}`);\n    }\n    return this.yToRef[y] + x;\n  }\n\n  isValidRef(ref: TileRef): boolean {\n    return ref >= 0 && ref < this.refToX.length;\n  }\n\n  x(ref: TileRef): number {\n    return this.refToX[ref];\n  }\n\n  y(ref: TileRef): number {\n    return this.refToY[ref];\n  }\n\n  cell(ref: TileRef): Cell {\n    return new Cell(this.x(ref), this.y(ref));\n  }\n\n  width(): number {\n    return this.width_;\n  }\n  height(): number {\n    return this.height_;\n  }\n  numLandTiles(): number {\n    return this.numLandTiles_;\n  }\n\n  isValidCoord(x: number, y: number): boolean {\n    return x >= 0 && x < this.width_ && y >= 0 && y < this.height_;\n  }\n\n  // Terrain getters (immutable)\n  isLand(ref: TileRef): boolean {\n    return Boolean(this.terrain[ref] & (1 << GameMapImpl.IS_LAND_BIT));\n  }\n\n  isOceanShore(ref: TileRef): boolean {\n    return (\n      this.isLand(ref) && this.neighbors(ref).some((tr) => this.isOcean(tr))\n    );\n  }\n\n  isOcean(ref: TileRef): boolean {\n    return Boolean(this.terrain[ref] & (1 << GameMapImpl.OCEAN_BIT));\n  }\n\n  isShoreline(ref: TileRef): boolean {\n    return Boolean(this.terrain[ref] & (1 << GameMapImpl.SHORELINE_BIT));\n  }\n\n  magnitude(ref: TileRef): number {\n    return this.terrain[ref] & GameMapImpl.MAGNITUDE_MASK;\n  }\n\n  // State getters and setters (mutable)\n  ownerID(ref: TileRef): number {\n    return this.state[ref] & GameMapImpl.PLAYER_ID_MASK;\n  }\n\n  hasOwner(ref: TileRef): boolean {\n    return this.ownerID(ref) !== 0;\n  }\n\n  setOwnerID(ref: TileRef, playerId: number): void {\n    if (playerId > GameMapImpl.PLAYER_ID_MASK) {\n      throw new Error(\n        `Player ID ${playerId} exceeds maximum value ${GameMapImpl.PLAYER_ID_MASK}`,\n      );\n    }\n    this.state[ref] =\n      (this.state[ref] & ~GameMapImpl.PLAYER_ID_MASK) | playerId;\n  }\n\n  hasFallout(ref: TileRef): boolean {\n    return Boolean(this.state[ref] & (1 << GameMapImpl.FALLOUT_BIT));\n  }\n\n  setFallout(ref: TileRef, value: boolean): void {\n    const existingFallout = this.hasFallout(ref);\n    if (value) {\n      if (!existingFallout) {\n        this._numTilesWithFallout++;\n        this.state[ref] |= 1 << GameMapImpl.FALLOUT_BIT;\n      }\n    } else {\n      if (existingFallout) {\n        this._numTilesWithFallout--;\n        this.state[ref] &= ~(1 << GameMapImpl.FALLOUT_BIT);\n      }\n    }\n  }\n\n  isOnEdgeOfMap(ref: TileRef): boolean {\n    const x = this.x(ref);\n    const y = this.y(ref);\n    return (\n      x === 0 || x === this.width() - 1 || y === 0 || y === this.height() - 1\n    );\n  }\n\n  isBorder(ref: TileRef): boolean {\n    return this.neighbors(ref).some(\n      (tr) => this.ownerID(tr) !== this.ownerID(ref),\n    );\n  }\n\n  hasDefenseBonus(ref: TileRef): boolean {\n    return Boolean(this.state[ref] & (1 << GameMapImpl.DEFENSE_BONUS_BIT));\n  }\n\n  setDefenseBonus(ref: TileRef, value: boolean): void {\n    if (value) {\n      this.state[ref] |= 1 << GameMapImpl.DEFENSE_BONUS_BIT;\n    } else {\n      this.state[ref] &= ~(1 << GameMapImpl.DEFENSE_BONUS_BIT);\n    }\n  }\n\n  // Helper methods\n  isWater(ref: TileRef): boolean {\n    return !this.isLand(ref);\n  }\n\n  isLake(ref: TileRef): boolean {\n    return !this.isLand(ref) && !this.isOcean(ref);\n  }\n\n  isShore(ref: TileRef): boolean {\n    return this.isLand(ref) && this.isShoreline(ref);\n  }\n\n  cost(ref: TileRef): number {\n    return this.magnitude(ref) < 10 ? 2 : 1;\n  }\n\n  terrainType(ref: TileRef): TerrainType {\n    if (this.isLand(ref)) {\n      const magnitude = this.magnitude(ref);\n      if (magnitude < 10) return TerrainType.Plains;\n      if (magnitude < 20) return TerrainType.Highland;\n      return TerrainType.Mountain;\n    }\n    return this.isOcean(ref) ? TerrainType.Ocean : TerrainType.Lake;\n  }\n\n  neighbors(ref: TileRef): TileRef[] {\n    const neighbors: TileRef[] = [];\n    const w = this.width_;\n    const x = this.refToX[ref];\n\n    if (ref >= w) neighbors.push(ref - w);\n    if (ref < (this.height_ - 1) * w) neighbors.push(ref + w);\n    if (x !== 0) neighbors.push(ref - 1);\n    if (x !== w - 1) neighbors.push(ref + 1);\n\n    return neighbors;\n  }\n\n  forEachTile(fn: (tile: TileRef) => void): void {\n    for (let ref: TileRef = 0; ref < this.width_ * this.height_; ref++) {\n      fn(ref);\n    }\n  }\n\n  manhattanDist(c1: TileRef, c2: TileRef): number {\n    return (\n      Math.abs(this.x(c1) - this.x(c2)) + Math.abs(this.y(c1) - this.y(c2))\n    );\n  }\n  euclideanDistSquared(c1: TileRef, c2: TileRef): number {\n    const x = this.x(c1) - this.x(c2);\n    const y = this.y(c1) - this.y(c2);\n    return x * x + y * y;\n  }\n  bfs(\n    tile: TileRef,\n    filter: (gm: GameMap, tile: TileRef) => boolean,\n  ): Set<TileRef> {\n    const seen = new Set<TileRef>();\n    const q: TileRef[] = [];\n    if (filter(this, tile)) {\n      seen.add(tile);\n      q.push(tile);\n    }\n\n    while (q.length > 0) {\n      const curr = q.pop();\n      if (curr === undefined) continue;\n      for (const n of this.neighbors(curr)) {\n        if (!seen.has(n) && filter(this, n)) {\n          seen.add(n);\n          q.push(n);\n        }\n      }\n    }\n    return seen;\n  }\n\n  toTileUpdate(tile: TileRef): bigint {\n    // Pack the tile reference and state into a bigint\n    // Format: [32 bits for tile reference][16 bits for state]\n    return (BigInt(tile) << 16n) | BigInt(this.state[tile]);\n  }\n\n  updateTile(tu: TileUpdate): TileRef {\n    // Extract tile reference and state from the TileUpdate\n    // Last 16 bits are state, rest is tile reference\n    const tileRef = Number(tu >> 16n);\n    const state = Number(tu & 0xffffn);\n\n    const existingFallout = this.hasFallout(tileRef);\n    this.state[tileRef] = state;\n    const newFallout = this.hasFallout(tileRef);\n    if (existingFallout && !newFallout) {\n      this._numTilesWithFallout--;\n    }\n    if (!existingFallout && newFallout) {\n      this._numTilesWithFallout++;\n    }\n\n    return tileRef;\n  }\n}\n\nexport function euclDistFN(\n  root: TileRef,\n  dist: number,\n  center: boolean = false,\n): (gm: GameMap, tile: TileRef) => boolean {\n  const dist2 = dist * dist;\n  if (!center) {\n    return (gm: GameMap, n: TileRef) =>\n      gm.euclideanDistSquared(root, n) <= dist2;\n  } else {\n    return (gm: GameMap, n: TileRef) => {\n      // shifts the root tile\u2019s coordinates by -0.5 so that its \u201Ccenter\u201D\n      // center becomes the corner of four pixels rather than the middle of one pixel.\n      // just makes things based off even pixels instead of odd. Used to use 9x9 icons now 10x10 icons etc...\n      const rootX = gm.x(root) - 0.5;\n      const rootY = gm.y(root) - 0.5;\n      const dx = gm.x(n) - rootX;\n      const dy = gm.y(n) - rootY;\n      return dx * dx + dy * dy <= dist2;\n    };\n  }\n}\n\nexport function manhattanDistFN(\n  root: TileRef,\n  dist: number,\n  center: boolean = false,\n): (gm: GameMap, tile: TileRef) => boolean {\n  if (!center) {\n    return (gm: GameMap, n: TileRef) => gm.manhattanDist(root, n) <= dist;\n  } else {\n    return (gm: GameMap, n: TileRef) => {\n      const rootX = gm.x(root) - 0.5;\n      const rootY = gm.y(root) - 0.5;\n      const dx = Math.abs(gm.x(n) - rootX);\n      const dy = Math.abs(gm.y(n) - rootY);\n      return dx + dy <= dist;\n    };\n  }\n}\n\nexport function rectDistFN(\n  root: TileRef,\n  dist: number,\n  center: boolean = false,\n): (gm: GameMap, tile: TileRef) => boolean {\n  if (!center) {\n    return (gm: GameMap, n: TileRef) => {\n      const dx = Math.abs(gm.x(n) - gm.x(root));\n      const dy = Math.abs(gm.y(n) - gm.y(root));\n      return dx <= dist && dy <= dist;\n    };\n  } else {\n    return (gm: GameMap, n: TileRef) => {\n      const rootX = gm.x(root) - 0.5;\n      const rootY = gm.y(root) - 0.5;\n      const dx = Math.abs(gm.x(n) - rootX);\n      const dy = Math.abs(gm.y(n) - rootY);\n      return dx <= dist && dy <= dist;\n    };\n  }\n}\n\nfunction isInIsometricTile(\n  center: { x: number; y: number },\n  tile: { x: number; y: number },\n  yOffset: number,\n  distance: number,\n): boolean {\n  const dx = Math.abs(tile.x - center.x);\n  const dy = Math.abs(tile.y - (center.y + yOffset));\n  return dx + dy * 2 <= distance + 1;\n}\n\nexport function isometricDistFN(\n  root: TileRef,\n  dist: number,\n  center: boolean = false,\n): (gm: GameMap, tile: TileRef) => boolean {\n  if (!center) {\n    return (gm: GameMap, n: TileRef) => gm.manhattanDist(root, n) <= dist;\n  } else {\n    return (gm: GameMap, n: TileRef) => {\n      const rootX = gm.x(root) - 0.5;\n      const rootY = gm.y(root) - 0.5;\n\n      return isInIsometricTile(\n        { x: rootX, y: rootY },\n        { x: gm.x(n), y: gm.y(n) },\n        0,\n        dist,\n      );\n    };\n  }\n}\n\nexport function hexDistFN(\n  root: TileRef,\n  dist: number,\n  center: boolean = false,\n): (gm: GameMap, tile: TileRef) => boolean {\n  if (!center) {\n    return (gm: GameMap, n: TileRef) => {\n      const dx = Math.abs(gm.x(n) - gm.x(root));\n      const dy = Math.abs(gm.y(n) - gm.y(root));\n      return dx <= dist && dy <= dist && dx + dy <= dist * 1.5;\n    };\n  } else {\n    return (gm: GameMap, n: TileRef) => {\n      const rootX = gm.x(root) - 0.5;\n      const rootY = gm.y(root) - 0.5;\n      const dx = Math.abs(gm.x(n) - rootX);\n      const dy = Math.abs(gm.y(n) - rootY);\n      return dx <= dist && dy <= dist && dx + dy <= dist * 1.5;\n    };\n  }\n}\n\nexport function andFN(\n  x: (gm: GameMap, tile: TileRef) => boolean,\n  y: (gm: GameMap, tile: TileRef) => boolean,\n): (gm: GameMap, tile: TileRef) => boolean {\n  return (gm: GameMap, tile: TileRef) => x(gm, tile) && y(gm, tile);\n}\n", "import { PathFindResultType } from \"../pathfinding/AStar\";\nimport { MiniAStar } from \"../pathfinding/MiniAStar\";\nimport { Game, Player, UnitType } from \"./Game\";\nimport { andFN, GameMap, manhattanDistFN, TileRef } from \"./GameMap\";\n\nexport function canBuildTransportShip(\n  game: Game,\n  player: Player,\n  tile: TileRef,\n): TileRef | false {\n  if (\n    player.unitCount(UnitType.TransportShip) >= game.config().boatMaxNumber()\n  ) {\n    return false;\n  }\n\n  const dst = targetTransportTile(game, tile);\n  if (dst === null) {\n    return false;\n  }\n\n  const other = game.owner(tile);\n  if (other === player) {\n    return false;\n  }\n  if (other.isPlayer() && player.isFriendly(other)) {\n    return false;\n  }\n\n  if (game.isOceanShore(dst)) {\n    let myPlayerBordersOcean = false;\n    for (const bt of player.borderTiles()) {\n      if (game.isOceanShore(bt)) {\n        myPlayerBordersOcean = true;\n        break;\n      }\n    }\n\n    let otherPlayerBordersOcean = false;\n    if (!game.hasOwner(tile)) {\n      otherPlayerBordersOcean = true;\n    } else {\n      for (const bt of (other as Player).borderTiles()) {\n        if (game.isOceanShore(bt)) {\n          otherPlayerBordersOcean = true;\n          break;\n        }\n      }\n    }\n\n    if (myPlayerBordersOcean && otherPlayerBordersOcean) {\n      return transportShipSpawn(game, player, dst);\n    } else {\n      return false;\n    }\n  }\n\n  // Now we are boating in a lake, so do a bfs from target until we find\n  // a border tile owned by the player\n\n  const tiles = game.bfs(\n    dst,\n    andFN(\n      manhattanDistFN(dst, 300),\n      (_, t: TileRef) => game.isLake(t) || game.isShore(t),\n    ),\n  );\n\n  const sorted = Array.from(tiles).sort(\n    (a, b) => game.manhattanDist(dst, a) - game.manhattanDist(dst, b),\n  );\n\n  for (const t of sorted) {\n    if (game.owner(t) === player) {\n      return transportShipSpawn(game, player, t);\n    }\n  }\n  return false;\n}\n\nfunction transportShipSpawn(\n  game: Game,\n  player: Player,\n  targetTile: TileRef,\n): TileRef | false {\n  if (!game.isShore(targetTile)) {\n    return false;\n  }\n  const spawn = closestShoreFromPlayer(game, player, targetTile);\n  if (spawn === null) {\n    return false;\n  }\n  return spawn;\n}\n\nexport function sourceDstOceanShore(\n  gm: Game,\n  src: Player,\n  tile: TileRef,\n): [TileRef | null, TileRef | null] {\n  const dst = gm.owner(tile);\n  const srcTile = closestShoreFromPlayer(gm, src, tile);\n  let dstTile: TileRef | null = null;\n  if (dst.isPlayer()) {\n    dstTile = closestShoreFromPlayer(gm, dst as Player, tile);\n  } else {\n    dstTile = closestShoreTN(gm, tile, 50);\n  }\n  return [srcTile, dstTile];\n}\n\nexport function targetTransportTile(gm: Game, tile: TileRef): TileRef | null {\n  const dst = gm.playerBySmallID(gm.ownerID(tile));\n  let dstTile: TileRef | null = null;\n  if (dst.isPlayer()) {\n    dstTile = closestShoreFromPlayer(gm, dst as Player, tile);\n  } else {\n    dstTile = closestShoreTN(gm, tile, 50);\n  }\n  return dstTile;\n}\n\nexport function closestShoreFromPlayer(\n  gm: GameMap,\n  player: Player,\n  target: TileRef,\n): TileRef | null {\n  const shoreTiles = Array.from(player.borderTiles()).filter((t) =>\n    gm.isShore(t),\n  );\n  if (shoreTiles.length === 0) {\n    return null;\n  }\n\n  return shoreTiles.reduce((closest, current) => {\n    const closestDistance = gm.manhattanDist(target, closest);\n    const currentDistance = gm.manhattanDist(target, current);\n    return currentDistance < closestDistance ? current : closest;\n  });\n}\n\nexport function bestShoreDeploymentSource(\n  gm: Game,\n  player: Player,\n  target: TileRef,\n): TileRef | false {\n  const t = targetTransportTile(gm, target);\n  if (t === null) return false;\n\n  const candidates = candidateShoreTiles(gm, player, t);\n  if (candidates.length === 0) return false;\n\n  const aStar = new MiniAStar(gm, gm.miniMap(), candidates, t, 1_000_000, 1);\n  const result = aStar.compute();\n  if (result !== PathFindResultType.Completed) {\n    console.warn(`bestShoreDeploymentSource: path not found: ${result}`);\n    return false;\n  }\n  const path = aStar.reconstructPath();\n  if (path.length === 0) {\n    return false;\n  }\n  const potential = path[0];\n  // Since mini a* downscales the map, we need to check the neighbors\n  // of the potential tile to find a valid deployment point\n  const neighbors = gm\n    .neighbors(potential)\n    .filter((n) => gm.isShore(n) && gm.owner(n) === player);\n  if (neighbors.length === 0) {\n    return false;\n  }\n  return neighbors[0];\n}\n\nexport function candidateShoreTiles(\n  gm: Game,\n  player: Player,\n  target: TileRef,\n): TileRef[] {\n  let closestManhattanDistance = Infinity;\n  let minX = Infinity,\n    minY = Infinity,\n    maxX = -Infinity,\n    maxY = -Infinity;\n\n  let bestByManhattan: TileRef | null = null;\n  const extremumTiles: Record<string, TileRef | null> = {\n    minX: null,\n    minY: null,\n    maxX: null,\n    maxY: null,\n  };\n\n  const borderShoreTiles = Array.from(player.borderTiles()).filter((t) =>\n    gm.isShore(t),\n  );\n\n  for (const tile of borderShoreTiles) {\n    const distance = gm.manhattanDist(tile, target);\n    const cell = gm.cell(tile);\n\n    // Manhattan-closest tile\n    if (distance < closestManhattanDistance) {\n      closestManhattanDistance = distance;\n      bestByManhattan = tile;\n    }\n\n    // Extremum tiles\n    if (cell.x < minX) {\n      minX = cell.x;\n      extremumTiles.minX = tile;\n    } else if (cell.y < minY) {\n      minY = cell.y;\n      extremumTiles.minY = tile;\n    } else if (cell.x > maxX) {\n      maxX = cell.x;\n      extremumTiles.maxX = tile;\n    } else if (cell.y > maxY) {\n      maxY = cell.y;\n      extremumTiles.maxY = tile;\n    }\n  }\n\n  // Calculate sampling interval to ensure we get at most 50 tiles\n  const samplingInterval = Math.max(\n    10,\n    Math.ceil(borderShoreTiles.length / 50),\n  );\n  const sampledTiles = borderShoreTiles.filter(\n    (_, index) => index % samplingInterval === 0,\n  );\n\n  const candidates = [\n    bestByManhattan,\n    extremumTiles.minX,\n    extremumTiles.minY,\n    extremumTiles.maxX,\n    extremumTiles.maxY,\n    ...sampledTiles,\n  ].filter(Boolean) as number[];\n\n  return candidates;\n}\n\nfunction closestShoreTN(\n  gm: GameMap,\n  tile: TileRef,\n  searchDist: number,\n): TileRef | null {\n  const tn = Array.from(\n    gm.bfs(\n      tile,\n      andFN((_, t) => !gm.hasOwner(t), manhattanDistFN(tile, searchDist)),\n    ),\n  )\n    .filter((t) => gm.isShore(t))\n    .sort((a, b) => gm.manhattanDist(tile, a) - gm.manhattanDist(tile, b));\n  if (tn.length === 0) {\n    return null;\n  }\n  return tn[0];\n}\n", "type Point = { x: number; y: number };\n\nexport class BezenhamLine {\n  constructor(\n    private p1: Point,\n    private p2: Point,\n  ) {\n    this.dx = Math.abs(p2.x - p1.x);\n    this.dy = Math.abs(p2.y - p1.y);\n    this.sx = p1.x < p2.x ? 1 : -1;\n    this.sy = p1.y < p2.y ? 1 : -1;\n    this.error = this.dx - this.dy;\n  }\n\n  private dx: number;\n  private dy: number;\n  private sx: number;\n  private sy: number;\n  private error: number;\n\n  size() {\n    return Math.max(this.dx, this.dy) + 1;\n  }\n\n  // Increment either by 1 in x or y\n  increment(): Point | true {\n    if (this.p1.x === this.p2.x && this.p1.y === this.p2.y) {\n      return true;\n    }\n    const x = this.p1.x;\n    const y = this.p1.y;\n    const err2 = 2 * this.error;\n\n    if (err2 > -this.dy) {\n      this.error -= this.dy;\n      this.p1.x += this.sx;\n    }\n    if (err2 < this.dx) {\n      this.error += this.dx;\n      this.p1.y += this.sy;\n    }\n    return { x, y };\n  }\n}\n\nexport class CubicBezierCurve {\n  constructor(\n    private p0: Point,\n    private p1: Point,\n    private p2: Point,\n    private p3: Point,\n  ) {}\n  getPointAt(t: number): Point {\n    const T = 1 - t;\n    const TT = T * T;\n    const TTT = TT * T;\n    const tt = t * t;\n    const ttt = tt * t;\n\n    const x =\n      TTT * this.p0.x +\n      3 * TT * t * this.p1.x +\n      3 * T * tt * this.p2.x +\n      ttt * this.p3.x;\n\n    const y =\n      TTT * this.p0.y +\n      3 * TT * t * this.p1.y +\n      3 * T * tt * this.p2.y +\n      ttt * this.p3.y;\n    return { x, y };\n  }\n}\n\n/**\n *  Use a cumulative distance LUT to approximate the traveled distance\n *  Useful to compute regular steps based on the curve rather than a t\n */\nexport class DistanceBasedBezierCurve extends CubicBezierCurve {\n  private totalDistance: number = 0;\n  private cachedPoints: Point[] = [];\n  private currentIndex: number = 0;\n\n  constructor(\n    p0: Point,\n    p1: Point,\n    p2: Point,\n    p3: Point,\n    distanceIncrement: number,\n  ) {\n    super(p0, p1, p2, p3);\n    this.computeAllPoints(distanceIncrement, 0.002);\n  }\n\n  getAllPoints(): Point[] {\n    return this.cachedPoints;\n  }\n  /**\n   * Move forward along the curve by the given distance.\n   * Returns the next cached point, or null if at the end.\n   */\n  increment(distance: number): Point | null {\n    this.totalDistance += distance;\n\n    // Step forward through cached points until we're at the correct distance\n    while (\n      this.currentIndex < this.cachedPoints.length - 1 &&\n      this.getDistanceUpToIndex(this.currentIndex + 1) < this.totalDistance\n    ) {\n      this.currentIndex++;\n    }\n\n    if (this.currentIndex >= this.cachedPoints.length - 1) {\n      return null; // End of curve\n    }\n\n    return this.cachedPoints[this.currentIndex];\n  }\n\n  getCurrentIndex(): number {\n    return this.currentIndex;\n  }\n\n  /**\n   * Precompute all points spaced @p pixelSpacing apart\n   */\n  computeAllPoints(pixelSpacing: number, precision: number): void {\n    this.cachedPoints = [];\n    this.totalDistance = 0;\n    this.currentIndex = 0;\n\n    let t = 0;\n    let prevPoint = this.getPointAt(t);\n    this.cachedPoints.push(prevPoint);\n\n    let cumulativeDistance = 0;\n\n    while (t < 1) {\n      t = Math.min(t + precision, 1);\n      const currentPoint = this.getPointAt(t);\n\n      const dx = currentPoint.x - prevPoint.x;\n      const dy = currentPoint.y - prevPoint.y;\n      const segmentLength = Math.sqrt(dx * dx + dy * dy);\n      cumulativeDistance += segmentLength;\n\n      if (cumulativeDistance >= pixelSpacing) {\n        this.cachedPoints.push(currentPoint);\n        cumulativeDistance = 0;\n      }\n\n      prevPoint = currentPoint;\n    }\n\n    // Make sure the last point is exactly at t=1\n    const finalPoint = this.getPointAt(1);\n    if (\n      this.cachedPoints.length === 0 ||\n      finalPoint.x !== this.cachedPoints[this.cachedPoints.length - 1].x ||\n      finalPoint.y !== this.cachedPoints[this.cachedPoints.length - 1].y\n    ) {\n      this.cachedPoints.push(finalPoint);\n    }\n  }\n\n  /**\n   * Optional helper: get distance along the cached points up to a given index\n   */\n  private getDistanceUpToIndex(index: number): number {\n    let dist = 0;\n    for (let i = 1; i <= index; i++) {\n      const p1 = this.cachedPoints[i - 1];\n      const p2 = this.cachedPoints[i];\n      const dx = p2.x - p1.x;\n      const dy = p2.y - p1.y;\n      dist += Math.sqrt(dx * dx + dy * dy);\n    }\n    return dist;\n  }\n}\n", "import { Game } from \"../game/Game\";\nimport { GameMap, TileRef } from \"../game/GameMap\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { DistanceBasedBezierCurve } from \"../utilities/Line\";\nimport { AStar, AStarResult, PathFindResultType } from \"./AStar\";\nimport { MiniAStar } from \"./MiniAStar\";\n\nconst parabolaMinHeight = 50;\n\nexport class ParabolaPathFinder {\n  constructor(private mg: GameMap) {}\n  private curve: DistanceBasedBezierCurve | undefined;\n\n  computeControlPoints(\n    orig: TileRef,\n    dst: TileRef,\n    increment: number = 3,\n    distanceBasedHeight = true,\n  ) {\n    const p0 = { x: this.mg.x(orig), y: this.mg.y(orig) };\n    const p3 = { x: this.mg.x(dst), y: this.mg.y(dst) };\n    const dx = p3.x - p0.x;\n    const dy = p3.y - p0.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    const maxHeight = distanceBasedHeight\n      ? Math.max(distance / 3, parabolaMinHeight)\n      : 0;\n    // Use a bezier curve always pointing up\n    const p1 = {\n      x: p0.x + (p3.x - p0.x) / 4,\n      y: Math.max(p0.y + (p3.y - p0.y) / 4 - maxHeight, 0),\n    };\n    const p2 = {\n      x: p0.x + ((p3.x - p0.x) * 3) / 4,\n      y: Math.max(p0.y + ((p3.y - p0.y) * 3) / 4 - maxHeight, 0),\n    };\n\n    this.curve = new DistanceBasedBezierCurve(p0, p1, p2, p3, increment);\n  }\n\n  nextTile(speed: number): TileRef | true {\n    if (!this.curve) {\n      throw new Error(\"ParabolaPathFinder not initialized\");\n    }\n    const nextPoint = this.curve.increment(speed);\n    if (!nextPoint) {\n      return true;\n    }\n    return this.mg.ref(Math.floor(nextPoint.x), Math.floor(nextPoint.y));\n  }\n\n  currentIndex(): number {\n    if (!this.curve) {\n      return 0;\n    }\n    return this.curve.getCurrentIndex();\n  }\n\n  allTiles(): TileRef[] {\n    if (!this.curve) {\n      return [];\n    }\n    return this.curve\n      .getAllPoints()\n      .map((point) => this.mg.ref(Math.floor(point.x), Math.floor(point.y)));\n  }\n}\n\nexport class AirPathFinder {\n  constructor(\n    private mg: GameMap,\n    private random: PseudoRandom,\n  ) {}\n\n  nextTile(tile: TileRef, dst: TileRef): TileRef | true {\n    const x = this.mg.x(tile);\n    const y = this.mg.y(tile);\n    const dstX = this.mg.x(dst);\n    const dstY = this.mg.y(dst);\n\n    if (x === dstX && y === dstY) {\n      return true;\n    }\n\n    // Calculate next position\n    let nextX = x;\n    let nextY = y;\n\n    const ratio = Math.floor(1 + Math.abs(dstY - y) / (Math.abs(dstX - x) + 1));\n\n    if (this.random.chance(ratio) && x !== dstX) {\n      if (x < dstX) nextX++;\n      else if (x > dstX) nextX--;\n    } else {\n      if (y < dstY) nextY++;\n      else if (y > dstY) nextY--;\n    }\n    if (nextX === x && nextY === y) {\n      return true;\n    }\n    return this.mg.ref(nextX, nextY);\n  }\n}\n\nexport class PathFinder {\n  private curr: TileRef | null = null;\n  private dst: TileRef | null = null;\n  private path: TileRef[] | null = null;\n  private path_idx: number = 0;\n  private aStar: AStar<TileRef>;\n  private computeFinished = true;\n\n  private constructor(\n    private game: Game,\n    private newAStar: (curr: TileRef, dst: TileRef) => AStar<TileRef>,\n  ) {}\n\n  public static Mini(\n    game: Game,\n    iterations: number,\n    waterPath: boolean = true,\n    maxTries: number = 20,\n  ) {\n    return new PathFinder(game, (curr: TileRef, dst: TileRef) => {\n      return new MiniAStar(\n        game.map(),\n        game.miniMap(),\n        curr,\n        dst,\n        iterations,\n        maxTries,\n        waterPath,\n      );\n    });\n  }\n\n  nextTile(\n    curr: TileRef | null,\n    dst: TileRef | null,\n    dist: number = 1,\n  ): AStarResult<TileRef> {\n    if (curr === null) {\n      console.error(\"curr is null\");\n      return { type: PathFindResultType.PathNotFound };\n    }\n    if (dst === null) {\n      console.error(\"dst is null\");\n      return { type: PathFindResultType.PathNotFound };\n    }\n\n    if (this.game.manhattanDist(curr, dst) < dist) {\n      this.path = null;\n      return { type: PathFindResultType.Completed, node: curr };\n    }\n\n    if (this.computeFinished) {\n      if (this.shouldRecompute(curr, dst)) {\n        this.curr = curr;\n        this.dst = dst;\n        this.path = null;\n        this.path_idx = 0;\n        this.aStar = this.newAStar(curr, dst);\n        this.computeFinished = false;\n        return this.nextTile(curr, dst);\n      } else {\n        const tile = this.path?.[this.path_idx++];\n        if (tile === undefined) {\n          throw new Error(\"missing tile\");\n        }\n        return { type: PathFindResultType.NextTile, node: tile };\n      }\n    }\n\n    switch (this.aStar.compute()) {\n      case PathFindResultType.Completed:\n        this.computeFinished = true;\n        this.path = this.aStar.reconstructPath();\n\n        // exclude first tile\n        this.path_idx = 1;\n\n        return this.nextTile(curr, dst);\n      case PathFindResultType.Pending:\n        return { type: PathFindResultType.Pending };\n      case PathFindResultType.PathNotFound:\n        return { type: PathFindResultType.PathNotFound };\n      default:\n        throw new Error(\"unexpected compute result\");\n    }\n  }\n\n  private shouldRecompute(curr: TileRef, dst: TileRef) {\n    if (this.path === null || this.curr === null || this.dst === null) {\n      return true;\n    }\n    const dist = this.game.manhattanDist(curr, dst);\n    let tolerance = 10;\n    if (dist > 50) {\n      tolerance = 10;\n    } else if (dist > 25) {\n      tolerance = 5;\n    } else {\n      tolerance = 0;\n    }\n    if (this.game.manhattanDist(this.dst, dst) > tolerance) {\n      return true;\n    }\n    return false;\n  }\n}\n", "import { renderTroops } from \"../../client/Utils\";\nimport {\n  Execution,\n  Game,\n  MessageType,\n  Player,\n  PlayerID,\n  TerraNullius,\n  Unit,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { targetTransportTile } from \"../game/TransportShipUtils\";\nimport { PathFindResultType } from \"../pathfinding/AStar\";\nimport { PathFinder } from \"../pathfinding/PathFinding\";\nimport { AttackExecution } from \"./AttackExecution\";\n\nconst malusForRetreat = 25;\nexport class TransportShipExecution implements Execution {\n  private lastMove: number;\n\n  // TODO: make this configurable\n  private ticksPerMove = 1;\n\n  private active = true;\n\n  private mg: Game;\n  private target: Player | TerraNullius;\n\n  // TODO make private\n  public path: TileRef[];\n  private dst: TileRef | null;\n\n  private boat: Unit;\n\n  private pathFinder: PathFinder;\n\n  private originalOwner: Player;\n\n  constructor(\n    private attacker: Player,\n    private targetID: PlayerID | null,\n    private ref: TileRef,\n    private startTroops: number,\n    private src: TileRef | null,\n  ) {\n    this.originalOwner = this.attacker;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  init(mg: Game, ticks: number) {\n    if (this.targetID !== null && !mg.hasPlayer(this.targetID)) {\n      console.warn(`TransportShipExecution: target ${this.targetID} not found`);\n      this.active = false;\n      return;\n    }\n    if (!mg.isValidRef(this.ref)) {\n      console.warn(`TransportShipExecution: ref ${this.ref} not valid`);\n      this.active = false;\n      return;\n    }\n    if (this.src !== null && !mg.isValidRef(this.src)) {\n      console.warn(`TransportShipExecution: src ${this.src} not valid`);\n      this.active = false;\n      return;\n    }\n\n    this.lastMove = ticks;\n    this.mg = mg;\n    this.pathFinder = PathFinder.Mini(mg, 10_000, true, 100);\n\n    if (\n      this.attacker.unitCount(UnitType.TransportShip) >=\n      mg.config().boatMaxNumber()\n    ) {\n      mg.displayMessage(\n        `No boats available, max ${mg.config().boatMaxNumber()}`,\n        MessageType.ATTACK_FAILED,\n        this.attacker.id(),\n      );\n      this.active = false;\n      return;\n    }\n\n    if (\n      this.targetID === null ||\n      this.targetID === this.mg.terraNullius().id()\n    ) {\n      this.target = mg.terraNullius();\n    } else {\n      this.target = mg.player(this.targetID);\n    }\n\n    this.startTroops ??= this.mg\n      .config()\n      .boatAttackAmount(this.attacker, this.target);\n\n    this.startTroops = Math.min(this.startTroops, this.attacker.troops());\n\n    this.dst = targetTransportTile(this.mg, this.ref);\n    if (this.dst === null) {\n      console.warn(\n        `${this.attacker} cannot send ship to ${this.target}, cannot find attack tile`,\n      );\n      this.active = false;\n      return;\n    }\n\n    const closestTileSrc = this.attacker.canBuild(\n      UnitType.TransportShip,\n      this.dst,\n    );\n    if (closestTileSrc === false) {\n      console.warn(`can't build transport ship`);\n      this.active = false;\n      return;\n    }\n\n    if (this.src === null) {\n      // Only update the src if it's not already set\n      // because we assume that the src is set to the best spawn tile\n      this.src = closestTileSrc;\n    } else {\n      if (\n        this.mg.owner(this.src) !== this.attacker ||\n        !this.mg.isShore(this.src)\n      ) {\n        console.warn(\n          `src is not a shore tile or not owned by: ${this.attacker.name()}`,\n        );\n        this.src = closestTileSrc;\n      }\n    }\n\n    this.boat = this.attacker.buildUnit(UnitType.TransportShip, this.src, {\n      troops: this.startTroops,\n    });\n\n    if (this.dst !== null) {\n      this.boat.setTargetTile(this.dst);\n    } else {\n      this.boat.setTargetTile(undefined);\n    }\n\n    // Notify the target player about the incoming naval invasion\n    if (this.targetID && this.targetID !== mg.terraNullius().id()) {\n      mg.displayIncomingUnit(\n        this.boat.id(),\n        // TODO TranslateText\n        `Naval invasion incoming from ${this.attacker.displayName()}`,\n        MessageType.NAVAL_INVASION_INBOUND,\n        this.targetID,\n      );\n    }\n\n    // Record stats\n    this.mg\n      .stats()\n      .boatSendTroops(this.attacker, this.target, this.boat.troops());\n  }\n\n  tick(ticks: number) {\n    if (this.dst === null) {\n      this.active = false;\n      return;\n    }\n    if (!this.active) {\n      return;\n    }\n    if (!this.boat.isActive()) {\n      this.active = false;\n      return;\n    }\n    if (ticks - this.lastMove < this.ticksPerMove) {\n      return;\n    }\n    this.lastMove = ticks;\n\n    // Team mate can conquer disconnected player and get their ships\n    // captureUnit has changed the owner of the unit, now update attacker\n    const boatOwner = this.boat.owner();\n    if (\n      this.originalOwner.isDisconnected() &&\n      boatOwner !== this.originalOwner &&\n      boatOwner.isOnSameTeam(this.originalOwner)\n    ) {\n      this.attacker = boatOwner;\n      this.originalOwner = boatOwner; // for when this owner disconnects too\n    }\n\n    if (this.boat.retreating()) {\n      // Ensure retreat source is still valid for (new) owner\n      if (this.mg.owner(this.src!) !== this.attacker) {\n        // Use bestTransportShipSpawn, not canBuild because of its max boats check etc\n        const newSrc = this.attacker.bestTransportShipSpawn(this.dst);\n        if (newSrc === false) {\n          this.src = null;\n        } else {\n          this.src = newSrc;\n        }\n      }\n\n      if (this.src === null) {\n        console.warn(\n          `TransportShipExecution: retreating but no src found for new attacker`,\n        );\n        this.attacker.addTroops(this.boat.troops());\n        this.boat.delete(false);\n        this.active = false;\n        return;\n      } else {\n        this.dst = this.src;\n\n        if (this.boat.targetTile() !== this.dst) {\n          this.boat.setTargetTile(this.dst);\n        }\n      }\n    }\n\n    const result = this.pathFinder.nextTile(this.boat.tile(), this.dst);\n    switch (result.type) {\n      case PathFindResultType.Completed:\n        if (this.mg.owner(this.dst) === this.attacker) {\n          const deaths = this.boat.troops() * (malusForRetreat / 100);\n          const survivors = this.boat.troops() - deaths;\n          this.attacker.addTroops(survivors);\n          this.boat.delete(false);\n          this.active = false;\n\n          // Record stats\n          this.mg\n            .stats()\n            .boatArriveTroops(this.attacker, this.target, survivors);\n          if (deaths) {\n            this.mg.displayMessage(\n              `Attack cancelled, ${renderTroops(deaths)} soldiers killed during retreat.`,\n              MessageType.ATTACK_CANCELLED,\n              this.attacker.id(),\n            );\n          }\n          return;\n        }\n        this.attacker.conquer(this.dst);\n        if (this.target.isPlayer() && this.attacker.isFriendly(this.target)) {\n          this.attacker.addTroops(this.boat.troops());\n        } else {\n          this.mg.addExecution(\n            new AttackExecution(\n              this.boat.troops(),\n              this.attacker,\n              this.targetID,\n              this.dst,\n              false,\n            ),\n          );\n        }\n        this.boat.delete(false);\n        this.active = false;\n\n        // Record stats\n        this.mg\n          .stats()\n          .boatArriveTroops(this.attacker, this.target, this.boat.troops());\n        return;\n      case PathFindResultType.NextTile:\n        this.boat.move(result.node);\n        break;\n      case PathFindResultType.Pending:\n        break;\n      case PathFindResultType.PathNotFound:\n        // TODO: add to poisoned port list\n        console.warn(`path not found to dst`);\n        this.attacker.addTroops(this.boat.troops());\n        this.boat.delete(false);\n        this.active = false;\n        return;\n    }\n  }\n\n  owner(): Player {\n    return this.attacker;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n}\n", "import { Game, Player } from \"../game/Game\";\nimport { euclDistFN, GameMap, TileRef } from \"../game/GameMap\";\n\nexport function getSpawnTiles(gm: GameMap, tile: TileRef): TileRef[] {\n  return Array.from(gm.bfs(tile, euclDistFN(tile, 4, true))).filter(\n    (t) => !gm.hasOwner(t) && gm.isLand(t),\n  );\n}\n\nexport function closestTile(\n  gm: GameMap,\n  refs: Iterable<TileRef>,\n  tile: TileRef,\n): [TileRef | null, number] {\n  let minDistance = Infinity;\n  let minRef: TileRef | null = null;\n  for (const ref of refs) {\n    const distance = gm.manhattanDist(ref, tile);\n    if (distance < minDistance) {\n      minDistance = distance;\n      minRef = ref;\n    }\n  }\n  return [minRef, minDistance];\n}\n\nexport function closestTwoTiles(\n  gm: GameMap,\n  x: Iterable<TileRef>,\n  y: Iterable<TileRef>,\n): { x: TileRef; y: TileRef } | null {\n  const xSorted = Array.from(x).sort((a, b) => gm.x(a) - gm.x(b));\n  const ySorted = Array.from(y).sort((a, b) => gm.x(a) - gm.x(b));\n\n  if (xSorted.length === 0 || ySorted.length === 0) {\n    return null;\n  }\n\n  let i = 0;\n  let j = 0;\n  let minDistance = Infinity;\n  let result = { x: xSorted[0], y: ySorted[0] };\n\n  while (i < xSorted.length && j < ySorted.length) {\n    const currentX = xSorted[i];\n    const currentY = ySorted[j];\n\n    const distance =\n      Math.abs(gm.x(currentX) - gm.x(currentY)) +\n      Math.abs(gm.y(currentX) - gm.y(currentY));\n\n    if (distance < minDistance) {\n      minDistance = distance;\n      result = { x: currentX, y: currentY };\n    }\n\n    // If we're at the end of X, must move Y forward\n    if (i === xSorted.length - 1) {\n      j++;\n    }\n    // If we're at the end of Y, must move X forward\n    else if (j === ySorted.length - 1) {\n      i++;\n    }\n    // Otherwise, move whichever pointer has smaller x value\n    else if (gm.x(currentX) < gm.x(currentY)) {\n      i++;\n    } else {\n      j++;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Calculates the center of a player's territory using geometric approach.\n * Uses the bounding box center and verifies ownership, falling back to nearest border tile if necessary.\n *\n * @param game - The game instance\n * @param target - The player whose territory center to calculate\n * @returns The tile reference for the territory center, or null if no valid center found\n */\nexport function calculateTerritoryCenter(\n  game: Game,\n  target: Player,\n): TileRef | null {\n  const borderTiles = target.borderTiles();\n  if (borderTiles.size === 0) return null;\n\n  // Calculate bounding box center in a single pass through border tiles\n  let minX = Infinity,\n    maxX = -Infinity;\n  let minY = Infinity,\n    maxY = -Infinity;\n\n  for (const tile of borderTiles) {\n    const x = game.x(tile);\n    const y = game.y(tile);\n    if (x < minX) minX = x;\n    if (x > maxX) maxX = x;\n    if (y < minY) minY = y;\n    if (y > maxY) maxY = y;\n  }\n\n  const centerX = Math.floor((minX + maxX) / 2);\n  const centerY = Math.floor((minY + maxY) / 2);\n\n  const centerTile = game.ref(centerX, centerY);\n\n  // Verify ownership of the center tile\n  if (game.owner(centerTile) === target) {\n    return centerTile;\n  }\n\n  // Fall back to nearest border tile if center is not owned\n  let closestTile: TileRef | null = null;\n  let closestDistanceSquared = Infinity;\n\n  for (const tile of borderTiles) {\n    const dx = game.x(tile) - centerX;\n    const dy = game.y(tile) - centerY;\n    const distSquared = dx * dx + dy * dy;\n\n    if (distSquared < closestDistanceSquared) {\n      closestDistanceSquared = distSquared;\n      closestTile = tile;\n    }\n  }\n\n  return closestTile;\n}\n", "import {\n  Difficulty,\n  Game,\n  Player,\n  PlayerType,\n  Relation,\n  TerraNullius,\n  Tick,\n} from \"../../game/Game\";\nimport { PseudoRandom } from \"../../PseudoRandom\";\nimport {\n  boundingBoxCenter,\n  calculateBoundingBoxCenter,\n  flattenedEmojiTable,\n} from \"../../Util\";\nimport { AttackExecution } from \"../AttackExecution\";\nimport { EmojiExecution } from \"../EmojiExecution\";\nimport { TransportShipExecution } from \"../TransportShipExecution\";\nimport { closestTwoTiles } from \"../Util\";\n\nconst emojiId = (e: (typeof flattenedEmojiTable)[number]) =>\n  flattenedEmojiTable.indexOf(e);\nconst EMOJI_ASSIST_ACCEPT = ([\"\uD83D\uDC4D\", \"\u26F5\", \"\uD83E\uDD1D\", \"\uD83C\uDFAF\"] as const).map(emojiId);\nconst EMOJI_RELATION_TOO_LOW = ([\"\uD83E\uDD71\", \"\uD83E\uDD26\u200D\u2642\uFE0F\"] as const).map(emojiId);\nconst EMOJI_TARGET_ME = ([\"\uD83E\uDD7A\", \"\uD83D\uDC80\"] as const).map(emojiId);\nconst EMOJI_TARGET_ALLY = ([\"\uD83D\uDD4A\uFE0F\", \"\uD83D\uDC4E\"] as const).map(emojiId);\nconst EMOJI_HECKLE = ([\"\uD83E\uDD21\", \"\uD83D\uDE21\"] as const).map(emojiId);\n\nexport class BotBehavior {\n  private botAttackTroopsSent: number = 0;\n  private readonly lastEmojiSent = new Map<Player, Tick>();\n\n  constructor(\n    private random: PseudoRandom,\n    private game: Game,\n    private player: Player,\n    private triggerRatio: number,\n    private reserveRatio: number,\n    private expandRatio: number,\n  ) {}\n\n  private emoji(player: Player, emoji: number) {\n    if (player.type() !== PlayerType.Human) return;\n    this.game.addExecution(new EmojiExecution(this.player, player.id(), emoji));\n  }\n\n  // Prevent attacking of humans on lower difficulties\n  private shouldAttack(other: Player | TerraNullius): boolean {\n    // Always attack Terra Nullius, non-humans and traitors\n    if (\n      other.isPlayer() === false ||\n      other.type() !== PlayerType.Human ||\n      other.isTraitor()\n    ) {\n      return true;\n    }\n\n    const { difficulty } = this.game.config().gameConfig();\n    if (difficulty === Difficulty.Easy && this.random.chance(4)) {\n      return false;\n    }\n    if (difficulty === Difficulty.Medium && this.random.chance(2)) {\n      return false;\n    }\n    return true;\n  }\n\n  private betray(target: Player): void {\n    const alliance = this.player.allianceWith(target);\n    if (!alliance) return;\n    this.player.breakAlliance(alliance);\n  }\n\n  private hasReserveRatioTroops(): boolean {\n    const maxTroops = this.game.config().maxTroops(this.player);\n    const ratio = this.player.troops() / maxTroops;\n    return ratio >= this.reserveRatio;\n  }\n\n  private hasTriggerRatioTroops(): boolean {\n    const maxTroops = this.game.config().maxTroops(this.player);\n    const ratio = this.player.troops() / maxTroops;\n    return ratio >= this.triggerRatio;\n  }\n\n  private findIncomingAttackPlayer(): Player | null {\n    // Ignore bot attacks if we are not a bot.\n    let incomingAttacks = this.player.incomingAttacks();\n    if (this.player.type() !== PlayerType.Bot) {\n      incomingAttacks = incomingAttacks.filter(\n        (attack) => attack.attacker().type() !== PlayerType.Bot,\n      );\n    }\n    let largestAttack = 0;\n    let largestAttacker: Player | undefined;\n    for (const attack of incomingAttacks) {\n      if (attack.troops() <= largestAttack) continue;\n      largestAttack = attack.troops();\n      largestAttacker = attack.attacker();\n    }\n    if (largestAttacker !== undefined) {\n      return largestAttacker;\n    }\n    return null;\n  }\n\n  getNeighborTraitorToAttack(): Player | null {\n    const traitors = this.player\n      .neighbors()\n      .filter(\n        (n): n is Player =>\n          n.isPlayer() && this.player.isFriendly(n) === false && n.isTraitor(),\n      );\n    return traitors.length > 0 ? this.random.randElement(traitors) : null;\n  }\n\n  assistAllies() {\n    for (const ally of this.player.allies()) {\n      if (ally.targets().length === 0) continue;\n      if (this.player.relation(ally) < Relation.Friendly) {\n        this.emoji(ally, this.random.randElement(EMOJI_RELATION_TOO_LOW));\n        continue;\n      }\n      for (const target of ally.targets()) {\n        if (target === this.player) {\n          this.emoji(ally, this.random.randElement(EMOJI_TARGET_ME));\n          continue;\n        }\n        if (this.player.isFriendly(target)) {\n          this.emoji(ally, this.random.randElement(EMOJI_TARGET_ALLY));\n          continue;\n        }\n        // All checks passed, assist them\n        this.player.updateRelation(ally, -20);\n        this.sendAttack(target);\n        this.emoji(ally, this.random.randElement(EMOJI_ASSIST_ACCEPT));\n        return;\n      }\n    }\n  }\n\n  attackBestTarget(borderingFriends: Player[], borderingEnemies: Player[]) {\n    // Save up troops until we reach the reserve ratio\n    if (!this.hasReserveRatioTroops()) return;\n\n    // Maybe save up troops until we reach the trigger ratio\n    if (!this.hasTriggerRatioTroops() && !this.random.chance(10)) return;\n\n    // Retaliate against incoming attacks (Most important!)\n    const incomingAttackPlayer = this.findIncomingAttackPlayer();\n    if (incomingAttackPlayer) {\n      this.sendAttack(incomingAttackPlayer, true);\n      return;\n    }\n\n    // Attack bots\n    if (this.attackBots()) return;\n\n    // Maybe betray and attack\n    if (this.maybeBetrayAndAttack(borderingFriends)) return;\n\n    // Attack nuked territory\n    if (this.isBorderingNukedTerritory()) {\n      this.sendAttack(this.game.terraNullius());\n      return;\n    }\n\n    // Attack the most hated player with hostile relation\n    const mostHated = this.player.allRelationsSorted()[0];\n    if (\n      mostHated !== undefined &&\n      mostHated.relation === Relation.Hostile &&\n      this.player.isFriendly(mostHated.player) === false\n    ) {\n      this.sendAttack(mostHated.player);\n      return;\n    }\n\n    // Attack the weakest player\n    if (borderingEnemies.length > 0) {\n      this.sendAttack(borderingEnemies[0]);\n      return;\n    }\n\n    // If we don't have bordering enemies, attack someone on an island next to us\n    if (borderingEnemies.length === 0) {\n      const nearestIslandEnemy = this.findNearestIslandEnemy();\n      if (nearestIslandEnemy) {\n        this.sendAttack(nearestIslandEnemy);\n        return;\n      }\n    }\n  }\n\n  // Sort neighboring bots by density (troops / tiles) and attempt to attack many of them (Parallel attacks)\n  // sendAttack will do nothing if we don't have enough reserve troops left\n  attackBots(): boolean {\n    const bots = this.player\n      .neighbors()\n      .filter(\n        (n): n is Player =>\n          n.isPlayer() &&\n          this.player.isFriendly(n) === false &&\n          n.type() === PlayerType.Bot,\n      );\n\n    if (bots.length === 0) {\n      return false;\n    }\n\n    this.botAttackTroopsSent = 0;\n\n    const density = (p: Player) => p.troops() / p.numTilesOwned();\n    const sortedBots = bots.slice().sort((a, b) => density(a) - density(b));\n    const reducedBots = sortedBots.slice(0, this.getBotAttackMaxParallelism());\n\n    for (const bot of reducedBots) {\n      this.sendAttack(bot);\n    }\n\n    // Only short-circuit the rest of the targeting pipeline if we actually\n    // allocated some troops to bot attacks.\n    return this.botAttackTroopsSent > 0;\n  }\n\n  getBotAttackMaxParallelism(): number {\n    const { difficulty } = this.game.config().gameConfig();\n    switch (difficulty) {\n      case Difficulty.Easy:\n        return 1;\n      case Difficulty.Medium:\n        return 2;\n      case Difficulty.Hard:\n        return 4;\n      // On impossible difficulty, attack as much bots as possible in parallel\n      default:\n        return 100;\n    }\n  }\n\n  // Betray friends if we have 10 times more troops than them\n  // TODO: Implement better and deeper strategies, for example:\n  // Check impact on relations with other players\n  // Check value of targets territory\n  // Check if target is distracted\n  // Check the targets territory size\n  maybeBetrayAndAttack(borderingFriends: Player[]): boolean {\n    if (borderingFriends.length > 0) {\n      for (const friend of borderingFriends) {\n        if (\n          this.player.isAlliedWith(friend) &&\n          this.player.troops() >= friend.troops() * 10\n        ) {\n          this.betray(friend);\n          this.sendAttack(friend, true);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // TODO: Nuke the crown if it's far enough ahead of everybody else (based on difficulty)\n  findBestNukeTarget(borderingEnemies: Player[]): Player | null {\n    // Retaliate against incoming attacks (Most important!)\n    const incomingAttackPlayer = this.findIncomingAttackPlayer();\n    if (incomingAttackPlayer) {\n      return incomingAttackPlayer;\n    }\n\n    // Find the most hated player with hostile relation\n    const mostHated = this.player.allRelationsSorted()[0];\n    if (\n      mostHated !== undefined &&\n      mostHated.relation === Relation.Hostile &&\n      this.player.isFriendly(mostHated.player) === false\n    ) {\n      return mostHated.player;\n    }\n\n    // Find the weakest player\n    if (borderingEnemies.length > 0) {\n      return borderingEnemies[0];\n    }\n\n    // If we don't have bordering enemies, find someone on an island next to us\n    if (borderingEnemies.length === 0) {\n      const nearestIslandEnemy = this.findNearestIslandEnemy();\n      if (nearestIslandEnemy) {\n        return nearestIslandEnemy;\n      }\n    }\n\n    return null;\n  }\n\n  getPlayerCenter(player: Player) {\n    if (player.largestClusterBoundingBox) {\n      return boundingBoxCenter(player.largestClusterBoundingBox);\n    }\n    return calculateBoundingBoxCenter(this.game, player.borderTiles());\n  }\n\n  findNearestIslandEnemy(): Player | null {\n    const myBorder = this.player.borderTiles();\n    if (myBorder.size === 0) return null;\n\n    const filteredPlayers = this.game.players().filter((p) => {\n      if (p === this.player) return false;\n      if (!p.isAlive()) return false;\n      if (p.borderTiles().size === 0) return false;\n      if (this.player.isFriendly(p)) return false;\n      // Don't spam boats into players more than 2x our troops\n      return p.troops() <= this.player.troops() * 2;\n    });\n\n    if (filteredPlayers.length > 0) {\n      const playerCenter = this.getPlayerCenter(this.player);\n\n      const sortedPlayers = filteredPlayers\n        .map((filteredPlayer) => {\n          const filteredPlayerCenter = this.getPlayerCenter(filteredPlayer);\n\n          const playerCenterTile = this.game.ref(\n            playerCenter.x,\n            playerCenter.y,\n          );\n          const filteredPlayerCenterTile = this.game.ref(\n            filteredPlayerCenter.x,\n            filteredPlayerCenter.y,\n          );\n\n          const distance = this.game.manhattanDist(\n            playerCenterTile,\n            filteredPlayerCenterTile,\n          );\n          return { player: filteredPlayer, distance };\n        })\n        .sort((a, b) => a.distance - b.distance); // Sort by distance (ascending)\n\n      // Select the nearest or second-nearest enemy (So our boat doesn't always run into the same warship, if there is one)\n      let selectedEnemy: Player | null;\n      if (sortedPlayers.length > 1 && this.random.chance(2)) {\n        selectedEnemy = sortedPlayers[1].player;\n      } else {\n        selectedEnemy = sortedPlayers[0].player;\n      }\n\n      if (selectedEnemy !== null) {\n        return selectedEnemy;\n      }\n    }\n    return null;\n  }\n\n  attackRandomTarget() {\n    // Save up troops until we reach the trigger ratio\n    if (!this.hasTriggerRatioTroops()) return;\n\n    // Retaliate against incoming attacks\n    const incomingAttackPlayer = this.findIncomingAttackPlayer();\n    if (incomingAttackPlayer) {\n      this.sendAttack(incomingAttackPlayer, true);\n      return;\n    }\n\n    // Select a traitor as an enemy\n    const toAttack = this.getNeighborTraitorToAttack();\n    if (toAttack !== null) {\n      if (this.random.chance(3)) {\n        this.sendAttack(toAttack);\n        return;\n      }\n    }\n\n    // Choose a new enemy randomly\n    const { difficulty } = this.game.config().gameConfig();\n    const neighbors = this.player.neighbors();\n    for (const neighbor of this.random.shuffleArray(neighbors)) {\n      if (!neighbor.isPlayer()) continue;\n      if (this.player.isFriendly(neighbor)) continue;\n      if (\n        neighbor.type() === PlayerType.FakeHuman ||\n        neighbor.type() === PlayerType.Human\n      ) {\n        if (this.random.chance(2) || difficulty === Difficulty.Easy) {\n          continue;\n        }\n      }\n      this.sendAttack(neighbor);\n      return;\n    }\n  }\n\n  isBorderingNukedTerritory(): boolean {\n    for (const tile of this.player.borderTiles()) {\n      for (const neighbor of this.game.neighbors(tile)) {\n        if (\n          this.game.isLand(neighbor) &&\n          !this.game.hasOwner(neighbor) &&\n          this.game.hasFallout(neighbor)\n        ) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  forceSendAttack(target: Player | TerraNullius) {\n    this.game.addExecution(\n      new AttackExecution(\n        this.player.troops() / 2,\n        this.player,\n        target.isPlayer() ? target.id() : this.game.terraNullius().id(),\n      ),\n    );\n  }\n\n  sendAttack(target: Player | TerraNullius, force = false) {\n    if (!force && !this.shouldAttack(target)) return;\n\n    if (this.player.sharesBorderWith(target)) {\n      this.sendLandAttack(target);\n    } else if (target.isPlayer()) {\n      this.sendBoatAttack(target);\n    }\n  }\n\n  sendLandAttack(target: Player | TerraNullius) {\n    const maxTroops = this.game.config().maxTroops(this.player);\n    const reserveRatio = target.isPlayer()\n      ? this.reserveRatio\n      : this.expandRatio;\n    const targetTroops = maxTroops * reserveRatio;\n\n    let troops;\n    if (\n      target.isPlayer() &&\n      target.type() === PlayerType.Bot &&\n      this.player.type() !== PlayerType.Bot\n    ) {\n      troops = this.calculateBotAttackTroops(\n        target,\n        this.player.troops() - targetTroops - this.botAttackTroopsSent,\n      );\n    } else {\n      troops = this.player.troops() - targetTroops;\n    }\n\n    if (troops < 1) {\n      return;\n    }\n\n    this.game.addExecution(\n      new AttackExecution(\n        troops,\n        this.player,\n        target.isPlayer() ? target.id() : this.game.terraNullius().id(),\n      ),\n    );\n\n    if (target.isPlayer()) {\n      this.maybeSendEmoji(target);\n    }\n  }\n\n  sendBoatAttack(other: Player) {\n    const closest = closestTwoTiles(\n      this.game,\n      Array.from(this.player.borderTiles()).filter((t) =>\n        this.game.isOceanShore(t),\n      ),\n      Array.from(other.borderTiles()).filter((t) => this.game.isOceanShore(t)),\n    );\n    if (closest === null) {\n      return;\n    }\n\n    let troops;\n    if (other.type() === PlayerType.Bot) {\n      troops = this.calculateBotAttackTroops(other, this.player.troops() / 5);\n    } else {\n      troops = this.player.troops() / 5;\n    }\n\n    if (troops < 1) {\n      return;\n    }\n\n    this.game.addExecution(\n      new TransportShipExecution(\n        this.player,\n        other.id(),\n        closest.y,\n        troops,\n        null,\n      ),\n    );\n\n    this.maybeSendEmoji(other);\n  }\n\n  calculateBotAttackTroops(target: Player, maxTroops: number): number {\n    const { difficulty } = this.game.config().gameConfig();\n    if (difficulty === Difficulty.Easy) {\n      this.botAttackTroopsSent += maxTroops;\n      return maxTroops;\n    }\n    let troops = target.troops() * 4;\n\n    // Don't send more troops than maxTroops (Keep reserve)\n    if (troops > maxTroops) {\n      // If we haven't enough troops left to do a big enough bot attack, skip it\n      if (maxTroops < target.troops() * 2) {\n        troops = 0;\n      } else {\n        troops = maxTroops;\n      }\n    }\n    this.botAttackTroopsSent += troops;\n    return troops;\n  }\n\n  maybeSendEmoji(enemy: Player) {\n    if (this.player.type() === PlayerType.Bot) return;\n    if (enemy.type() !== PlayerType.Human) return;\n    const lastSent = this.lastEmojiSent.get(enemy) ?? -300;\n    if (this.game.ticks() - lastSent <= 300) return;\n    this.lastEmojiSent.set(enemy, this.game.ticks());\n    this.game.addExecution(\n      new EmojiExecution(\n        this.player,\n        enemy.id(),\n        this.random.randElement(EMOJI_HECKLE),\n      ),\n    );\n  }\n}\n", "import { Execution, Game, Player } from \"../game/Game\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { simpleHash } from \"../Util\";\nimport { AllianceExtensionExecution } from \"./alliance/AllianceExtensionExecution\";\nimport { BotBehavior } from \"./utils/BotBehavior\";\n\nexport class BotExecution implements Execution {\n  private active = true;\n  private random: PseudoRandom;\n  private mg: Game;\n  private neighborsTerraNullius = true;\n\n  private behavior: BotBehavior | null = null;\n  private attackRate: number;\n  private attackTick: number;\n  private triggerRatio: number;\n  private reserveRatio: number;\n  private expandRatio: number;\n\n  constructor(private bot: Player) {\n    this.random = new PseudoRandom(simpleHash(bot.id()));\n    this.attackRate = this.random.nextInt(40, 80);\n    this.attackTick = this.random.nextInt(0, this.attackRate);\n    this.triggerRatio = this.random.nextInt(50, 60) / 100;\n    this.reserveRatio = this.random.nextInt(30, 40) / 100;\n    this.expandRatio = this.random.nextInt(10, 20) / 100;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  init(mg: Game) {\n    this.mg = mg;\n  }\n\n  tick(ticks: number) {\n    if (ticks % this.attackRate !== this.attackTick) return;\n\n    if (!this.bot.isAlive()) {\n      this.active = false;\n      return;\n    }\n\n    if (this.behavior === null) {\n      this.behavior = new BotBehavior(\n        this.random,\n        this.mg,\n        this.bot,\n        this.triggerRatio,\n        this.reserveRatio,\n        this.expandRatio,\n      );\n\n      // Send an attack on the first tick\n      this.behavior.sendAttack(this.mg.terraNullius());\n      return;\n    }\n\n    this.acceptAllAllianceRequests();\n    this.maybeAttack();\n  }\n\n  private acceptAllAllianceRequests() {\n    // Accept all alliance requests\n    for (const req of this.bot.incomingAllianceRequests()) {\n      req.accept();\n    }\n\n    // Accept all alliance extension requests\n    for (const alliance of this.bot.alliances()) {\n      // Alliance expiration tracked by Events Panel, only human ally can click Request to Renew\n      // Skip if no expiration yet/ ally didn't request extension yet / bot already agreed to extend\n      if (!alliance.onlyOneAgreedToExtend()) continue;\n\n      const human = alliance.other(this.bot);\n      this.mg.addExecution(\n        new AllianceExtensionExecution(this.bot, human.id()),\n      );\n    }\n  }\n\n  private maybeAttack() {\n    if (this.behavior === null) {\n      throw new Error(\"not initialized\");\n    }\n    const toAttack = this.behavior.getNeighborTraitorToAttack();\n    if (toAttack !== null) {\n      const odds = this.bot.isFriendly(toAttack) ? 6 : 3;\n      if (this.random.chance(odds)) {\n        // Check and break alliance before attacking if needed\n        const alliance = this.bot.allianceWith(toAttack);\n\n        if (alliance !== null) {\n          this.bot.breakAlliance(alliance);\n        }\n\n        this.behavior.sendAttack(toAttack);\n        return;\n      }\n    }\n\n    if (this.neighborsTerraNullius) {\n      if (this.bot.sharesBorderWith(this.mg.terraNullius())) {\n        this.behavior.sendAttack(this.mg.terraNullius());\n        return;\n      }\n      this.neighborsTerraNullius = false;\n    }\n\n    this.behavior.attackRandomTarget();\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n}\n", "import { Config } from \"../configuration/Config\";\nimport { Execution, Game, Player, UnitType } from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { calculateBoundingBox, getMode, inscribed, simpleHash } from \"../Util\";\n\ninterface ClusterTraversalState {\n  visited: Uint32Array;\n  gen: number;\n}\n\n// Per-game traversal state used by calculateClusters() to avoid per-player buffers.\nconst traversalStates = new WeakMap<Game, ClusterTraversalState>();\n\nexport class PlayerExecution implements Execution {\n  private readonly ticksPerClusterCalc = 20;\n\n  private config: Config;\n  private lastCalc = 0;\n  private mg: Game;\n  private active = true;\n\n  constructor(private player: Player) {}\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  init(mg: Game, ticks: number) {\n    this.mg = mg;\n    this.config = mg.config();\n    this.lastCalc =\n      ticks + (simpleHash(this.player.name()) % this.ticksPerClusterCalc);\n  }\n\n  tick(ticks: number) {\n    this.player.decayRelations();\n    for (const u of this.player.units()) {\n      if (!u.info().territoryBound) {\n        continue;\n      }\n\n      const owner = this.mg!.owner(u.tile());\n      if (!owner?.isPlayer()) {\n        u.delete();\n        continue;\n      }\n      if (owner === this.player) {\n        continue;\n      }\n\n      const captor = this.mg!.player(owner.id());\n      if (u.type() === UnitType.DefensePost) {\n        u.decreaseLevel(captor);\n        if (u.isActive()) {\n          captor.captureUnit(u);\n        }\n      } else {\n        captor.captureUnit(u);\n      }\n    }\n\n    if (!this.player.isAlive()) {\n      // Player has no tiles, delete any remaining units and gold\n      const gold = this.player.gold();\n      this.player.removeGold(gold);\n      this.player.units().forEach((u) => {\n        if (\n          u.type() !== UnitType.AtomBomb &&\n          u.type() !== UnitType.HydrogenBomb &&\n          u.type() !== UnitType.MIRVWarhead &&\n          u.type() !== UnitType.MIRV\n        ) {\n          u.delete();\n        }\n      });\n      this.active = false;\n      this.mg.stats().playerKilled(this.player, ticks);\n      return;\n    }\n\n    const troopInc = this.config.troopIncreaseRate(this.player);\n    this.player.addTroops(troopInc);\n    const goldFromWorkers = this.config.goldAdditionRate(this.player);\n    this.player.addGold(goldFromWorkers);\n\n    // Record stats\n    this.mg.stats().goldWork(this.player, goldFromWorkers);\n\n    const alliances = Array.from(this.player.alliances());\n    for (const alliance of alliances) {\n      if (alliance.expiresAt() <= this.mg.ticks()) {\n        alliance.expire();\n      }\n    }\n\n    const embargoes = this.player.getEmbargoes();\n    for (const embargo of embargoes) {\n      if (\n        embargo.isTemporary &&\n        this.mg.ticks() - embargo.createdAt >\n          this.mg.config().temporaryEmbargoDuration()\n      ) {\n        this.player.stopEmbargo(embargo.target);\n      }\n    }\n\n    if (ticks - this.lastCalc > this.ticksPerClusterCalc) {\n      if (this.player.lastTileChange() > this.lastCalc) {\n        this.lastCalc = ticks;\n        const start = performance.now();\n        this.removeClusters();\n        const end = performance.now();\n        if (end - start > 1000) {\n          console.log(`player ${this.player.name()}, took ${end - start}ms`);\n        }\n      }\n    }\n  }\n\n  private removeClusters() {\n    const clusters = this.calculateClusters();\n\n    if (clusters.length === 0) {\n      this.player.largestClusterBoundingBox = null;\n      return;\n    }\n\n    // Find the largest cluster with a single linear scan (O(n)).\n    let largestIndex = 0;\n    let largestSize = clusters[0].size;\n    for (let i = 1; i < clusters.length; i++) {\n      const size = clusters[i].size;\n      if (size > largestSize) {\n        largestSize = size;\n        largestIndex = i;\n      }\n    }\n\n    const largestCluster = clusters[largestIndex];\n    if (largestCluster === undefined) throw new Error(\"No clusters\");\n\n    this.player.largestClusterBoundingBox = calculateBoundingBox(\n      this.mg,\n      largestCluster,\n    );\n    const surroundedBy = this.surroundedBySamePlayer(largestCluster);\n    if (surroundedBy && !surroundedBy.isFriendly(this.player)) {\n      this.removeCluster(largestCluster);\n    }\n\n    // Process remaining clusters\n    for (let i = 0; i < clusters.length; i++) {\n      if (i === largestIndex) continue;\n      const cluster = clusters[i];\n      if (this.isSurrounded(cluster)) {\n        this.removeCluster(cluster);\n      }\n    }\n  }\n\n  private surroundedBySamePlayer(cluster: Set<TileRef>): false | Player {\n    const enemies = new Set<number>();\n    for (const tile of cluster) {\n      let hasUnownedNeighbor = false;\n      if (this.mg.isOceanShore(tile) || this.mg.isOnEdgeOfMap(tile)) {\n        return false;\n      }\n      this.mg.forEachNeighbor(tile, (n) => {\n        if (!this.mg.hasOwner(n)) {\n          hasUnownedNeighbor = true;\n          return;\n        }\n        const ownerId = this.mg.ownerID(n);\n        if (ownerId !== this.player.smallID()) {\n          enemies.add(ownerId);\n        }\n      });\n      if (hasUnownedNeighbor) {\n        return false;\n      }\n      if (enemies.size !== 1) {\n        return false;\n      }\n    }\n    if (enemies.size !== 1) {\n      return false;\n    }\n    const enemy = this.mg.playerBySmallID(Array.from(enemies)[0]) as Player;\n    const enemyBox = calculateBoundingBox(this.mg, enemy.borderTiles());\n    const clusterBox = calculateBoundingBox(this.mg, cluster);\n    if (inscribed(enemyBox, clusterBox)) {\n      return enemy;\n    }\n    return false;\n  }\n\n  private isSurrounded(cluster: Set<TileRef>): boolean {\n    const enemyTiles = new Set<TileRef>();\n    for (const tr of cluster) {\n      if (this.mg.isShore(tr) || this.mg.isOnEdgeOfMap(tr)) {\n        return false;\n      }\n      this.mg.forEachNeighbor(tr, (n) => {\n        const owner = this.mg.owner(n);\n        if (owner.isPlayer() && this.mg.ownerID(n) !== this.player.smallID()) {\n          enemyTiles.add(n);\n        }\n      });\n    }\n    if (enemyTiles.size === 0) {\n      return false;\n    }\n    const enemyBox = calculateBoundingBox(this.mg, enemyTiles);\n    const clusterBox = calculateBoundingBox(this.mg, cluster);\n    return inscribed(enemyBox, clusterBox);\n  }\n\n  private removeCluster(cluster: Set<TileRef>) {\n    if (\n      Array.from(cluster).some(\n        (t) => this.mg?.ownerID(t) !== this.player?.smallID(),\n      )\n    ) {\n      // Other removeCluster operations could change tile owners,\n      // so double check.\n      return;\n    }\n\n    const capturing = this.getCapturingPlayer(cluster);\n    if (capturing === null) {\n      return;\n    }\n\n    const firstTile = cluster.values().next().value;\n    if (!firstTile) {\n      return;\n    }\n\n    const tiles = this.floodFillWithGen(\n      this.bumpGeneration(),\n      this.traversalState().visited,\n      [firstTile],\n      (tile, cb) => this.mg.forEachNeighbor(tile, cb),\n      (tile) => this.mg.ownerID(tile) === this.player.smallID(),\n    );\n\n    if (this.player.numTilesOwned() === tiles.size) {\n      this.mg.conquerPlayer(capturing, this.player);\n    }\n\n    for (const tile of tiles) {\n      capturing.conquer(tile);\n    }\n  }\n\n  private getCapturingPlayer(cluster: Set<TileRef>): Player | null {\n    const neighbors = new Map<Player, number>();\n    for (const t of cluster) {\n      this.mg.forEachNeighbor(t, (neighbor) => {\n        const owner = this.mg.owner(neighbor);\n        if (\n          owner.isPlayer() &&\n          owner !== this.player &&\n          !owner.isFriendly(this.player)\n        ) {\n          neighbors.set(owner, (neighbors.get(owner) ?? 0) + 1);\n        }\n      });\n    }\n\n    // If there are no enemies, return null\n    if (neighbors.size === 0) {\n      return null;\n    }\n\n    // Get the largest attack from the neighbors\n    let largestNeighborAttack: Player | null = null;\n    let largestTroopCount = 0;\n    for (const [neighbor] of neighbors) {\n      for (const attack of neighbor.outgoingAttacks()) {\n        if (attack.target() === this.player) {\n          if (attack.troops() > largestTroopCount) {\n            largestTroopCount = attack.troops();\n            largestNeighborAttack = neighbor;\n          }\n        }\n      }\n    }\n\n    if (largestNeighborAttack !== null) {\n      return largestNeighborAttack;\n    }\n\n    // There are no ongoing attacks, so find the enemy with the largest border.\n    return getMode(neighbors);\n  }\n\n  private calculateClusters(): Set<TileRef>[] {\n    const borderTiles = this.player.borderTiles();\n    if (borderTiles.size === 0) return [];\n\n    const state = this.traversalState();\n    const currentGen = this.bumpGeneration();\n    const visited = state.visited;\n\n    const clusters: Set<TileRef>[] = [];\n\n    for (const startTile of borderTiles) {\n      if (visited[startTile] === currentGen) continue;\n\n      const cluster = this.floodFillWithGen(\n        currentGen,\n        visited,\n        [startTile],\n        (tile, cb) => this.mg.forEachNeighborWithDiag(tile, cb),\n        (tile) => borderTiles.has(tile),\n      );\n      clusters.push(cluster);\n    }\n    return clusters;\n  }\n\n  owner(): Player {\n    if (this.player === null) {\n      throw new Error(\"Not initialized\");\n    }\n    return this.player;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  private traversalState(): ClusterTraversalState {\n    const totalTiles = this.mg.width() * this.mg.height();\n    let state = traversalStates.get(this.mg);\n    if (!state || state.visited.length < totalTiles) {\n      state = {\n        visited: new Uint32Array(totalTiles),\n        gen: 0,\n      };\n      traversalStates.set(this.mg, state);\n    }\n    return state;\n  }\n\n  private bumpGeneration(): number {\n    const state = this.traversalState();\n    state.gen++;\n    if (state.gen === 0xffffffff) {\n      state.visited.fill(0);\n      state.gen = 1;\n    }\n    return state.gen;\n  }\n\n  private floodFillWithGen(\n    currentGen: number,\n    visited: Uint32Array,\n    startTiles: TileRef[],\n    neighborFn: (tile: TileRef, callback: (neighbor: TileRef) => void) => void,\n    includeFn: (tile: TileRef) => boolean,\n  ): Set<TileRef> {\n    const result = new Set<TileRef>();\n    const stack: TileRef[] = [];\n\n    for (const start of startTiles) {\n      if (visited[start] === currentGen) continue;\n      if (!includeFn(start)) continue;\n      visited[start] = currentGen;\n      result.add(start);\n      stack.push(start);\n    }\n\n    while (stack.length > 0) {\n      const tile = stack.pop()!;\n      neighborFn(tile, (neighbor) => {\n        if (visited[neighbor] === currentGen) {\n          return;\n        }\n        if (!includeFn(neighbor)) {\n          return;\n        }\n        visited[neighbor] = currentGen;\n        result.add(neighbor);\n        stack.push(neighbor);\n      });\n    }\n\n    return result;\n  }\n}\n", "import { Execution, Game, Player, PlayerInfo, PlayerType } from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { BotExecution } from \"./BotExecution\";\nimport { PlayerExecution } from \"./PlayerExecution\";\nimport { getSpawnTiles } from \"./Util\";\n\nexport class SpawnExecution implements Execution {\n  active: boolean = true;\n  private mg: Game;\n\n  constructor(\n    private playerInfo: PlayerInfo,\n    public readonly tile: TileRef,\n  ) {}\n\n  init(mg: Game, ticks: number) {\n    this.mg = mg;\n  }\n\n  tick(ticks: number) {\n    this.active = false;\n\n    if (!this.mg.isValidRef(this.tile)) {\n      console.warn(`SpawnExecution: tile ${this.tile} not valid`);\n      return;\n    }\n\n    if (!this.mg.inSpawnPhase()) {\n      this.active = false;\n      return;\n    }\n\n    let player: Player | null = null;\n    if (this.mg.hasPlayer(this.playerInfo.id)) {\n      player = this.mg.player(this.playerInfo.id);\n    } else {\n      player = this.mg.addPlayer(this.playerInfo);\n    }\n\n    player.tiles().forEach((t) => player.relinquish(t));\n    getSpawnTiles(this.mg, this.tile).forEach((t) => {\n      player.conquer(t);\n    });\n\n    if (!player.hasSpawned()) {\n      this.mg.addExecution(new PlayerExecution(player));\n      if (player.type() === PlayerType.Bot) {\n        this.mg.addExecution(new BotExecution(player));\n      }\n    }\n    player.setHasSpawned(true);\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return true;\n  }\n}\n", "import { Game, PlayerInfo, PlayerType } from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { GameID } from \"../Schemas\";\nimport { simpleHash } from \"../Util\";\nimport { SpawnExecution } from \"./SpawnExecution\";\nimport {\n  COMMUNITY_FULL_ELF_NAMES,\n  COMMUNITY_PREFIXES,\n  SPECIAL_FULL_ELF_NAMES,\n} from \"./utils/BotNames\";\n\nexport class BotSpawner {\n  private random: PseudoRandom;\n  private bots: SpawnExecution[] = [];\n  private nameIndex = 0;\n\n  constructor(\n    private gs: Game,\n    gameID: GameID,\n  ) {\n    this.random = new PseudoRandom(simpleHash(gameID));\n  }\n\n  spawnBots(numBots: number): SpawnExecution[] {\n    let tries = 0;\n    while (this.bots.length < numBots) {\n      if (tries > 10000) {\n        console.log(\"too many retries while spawning bots, giving up\");\n        return this.bots;\n      }\n      const candidate = this.nextCandidateName();\n      const spawn = this.spawnBot(candidate.name);\n      if (spawn !== null) {\n        // Only use candidate name once bot successfully spawned\n        if (candidate.source === \"list\") {\n          this.nameIndex++;\n        }\n        this.bots.push(spawn);\n      } else {\n        tries++;\n      }\n    }\n    return this.bots;\n  }\n\n  spawnBot(botName: string): SpawnExecution | null {\n    const tile = this.randTile();\n    if (!this.gs.isLand(tile)) {\n      return null;\n    }\n    for (const spawn of this.bots) {\n      if (this.gs.manhattanDist(spawn.tile, tile) < 30) {\n        return null;\n      }\n    }\n    return new SpawnExecution(\n      new PlayerInfo(botName, PlayerType.Bot, null, this.random.nextID()),\n      tile,\n    );\n  }\n\n  private nextCandidateName(): {\n    name: string;\n    source: \"list\" | \"random\";\n  } {\n    if (this.bots.length < 20) {\n      //first few usually overwritten by Nation spawn\n      return { name: this.getRandomElf(), source: \"random\" };\n    }\n\n    if (this.nameIndex < COMMUNITY_FULL_ELF_NAMES.length) {\n      return {\n        name: COMMUNITY_FULL_ELF_NAMES[this.nameIndex],\n        source: \"list\",\n      };\n    }\n    const specialOffset = COMMUNITY_FULL_ELF_NAMES.length;\n    if (this.nameIndex < specialOffset + SPECIAL_FULL_ELF_NAMES.length) {\n      return {\n        name: SPECIAL_FULL_ELF_NAMES[this.nameIndex - specialOffset],\n        source: \"list\",\n      };\n    }\n    const prefixOffset = specialOffset + SPECIAL_FULL_ELF_NAMES.length;\n    if (this.nameIndex < prefixOffset + COMMUNITY_PREFIXES.length) {\n      return {\n        name: `${COMMUNITY_PREFIXES[this.nameIndex - prefixOffset]} the Elf`,\n        source: \"list\",\n      };\n    }\n\n    return { name: this.getRandomElf(), source: \"random\" };\n  }\n\n  private getRandomElf(): string {\n    const suffixNumber = this.random.nextInt(1, 10001);\n    return `Elf ${suffixNumber}`;\n  }\n\n  private randTile(): TileRef {\n    return this.gs.ref(\n      this.random.nextInt(0, this.gs.width()),\n      this.random.nextInt(0, this.gs.height()),\n    );\n  }\n}\n", "import { AllPlayersStats, ClientID, Winner } from \"../Schemas\";\nimport {\n  EmojiMessage,\n  GameUpdates,\n  Gold,\n  MessageType,\n  NameViewData,\n  PlayerID,\n  PlayerType,\n  Team,\n  Tick,\n  TrainType,\n  UnitType,\n} from \"./Game\";\nimport { TileRef, TileUpdate } from \"./GameMap\";\n\nexport interface GameUpdateViewData {\n  tick: number;\n  updates: GameUpdates;\n  packedTileUpdates: BigUint64Array;\n  playerNameViewData: Record<string, NameViewData>;\n  tickExecutionDuration?: number;\n}\n\nexport interface ErrorUpdate {\n  errMsg: string;\n  stack?: string;\n}\n\nexport enum GameUpdateType {\n  Tile,\n  Unit,\n  Player,\n  DisplayEvent,\n  DisplayChatEvent,\n  AllianceRequest,\n  AllianceRequestReply,\n  BrokeAlliance,\n  AllianceExpired,\n  AllianceExtension,\n  TargetPlayer,\n  Emoji,\n  Win,\n  Hash,\n  UnitIncoming,\n  BonusEvent,\n  RailroadEvent,\n  ConquestEvent,\n  EmbargoEvent,\n}\n\nexport type GameUpdate =\n  | TileUpdateWrapper\n  | UnitUpdate\n  | PlayerUpdate\n  | AllianceRequestUpdate\n  | AllianceRequestReplyUpdate\n  | BrokeAllianceUpdate\n  | AllianceExpiredUpdate\n  | DisplayMessageUpdate\n  | DisplayChatMessageUpdate\n  | TargetPlayerUpdate\n  | EmojiUpdate\n  | WinUpdate\n  | HashUpdate\n  | UnitIncomingUpdate\n  | AllianceExtensionUpdate\n  | BonusEventUpdate\n  | RailroadUpdate\n  | ConquestUpdate\n  | EmbargoUpdate;\n\nexport interface BonusEventUpdate {\n  type: GameUpdateType.BonusEvent;\n  player: PlayerID;\n  tile: TileRef;\n  gold: number;\n  troops: number;\n}\n\nexport enum RailType {\n  VERTICAL,\n  HORIZONTAL,\n  TOP_LEFT,\n  TOP_RIGHT,\n  BOTTOM_LEFT,\n  BOTTOM_RIGHT,\n}\n\nexport interface RailTile {\n  tile: TileRef;\n  railType: RailType;\n}\n\nexport interface RailroadUpdate {\n  type: GameUpdateType.RailroadEvent;\n  isActive: boolean;\n  railTiles: RailTile[];\n}\n\nexport interface ConquestUpdate {\n  type: GameUpdateType.ConquestEvent;\n  conquerorId: PlayerID;\n  conqueredId: PlayerID;\n  gold: Gold;\n}\n\nexport interface TileUpdateWrapper {\n  type: GameUpdateType.Tile;\n  update: TileUpdate;\n}\n\nexport interface UnitUpdate {\n  type: GameUpdateType.Unit;\n  unitType: UnitType;\n  troops: number;\n  id: number;\n  ownerID: number;\n  lastOwnerID?: number;\n  // TODO: make these tilerefs\n  pos: TileRef;\n  lastPos: TileRef;\n  isActive: boolean;\n  reachedTarget: boolean;\n  retreating: boolean;\n  targetable: boolean;\n  markedForDeletion: number | false;\n  targetUnitId?: number; // Only for trade ships\n  targetTile?: TileRef; // Only for nukes\n  health?: number;\n  underConstruction?: boolean;\n  missileTimerQueue: number[];\n  level: number;\n  hasTrainStation: boolean;\n  trainType?: TrainType; // Only for trains\n  loaded?: boolean; // Only for trains\n}\n\nexport interface AttackUpdate {\n  attackerID: number;\n  targetID: number;\n  troops: number;\n  id: string;\n  retreating: boolean;\n}\n\nexport interface PlayerUpdate {\n  type: GameUpdateType.Player;\n  nameViewData?: NameViewData;\n  clientID: ClientID | null;\n  name: string;\n  displayName: string;\n  id: PlayerID;\n  team?: Team;\n  smallID: number;\n  playerType: PlayerType;\n  isAlive: boolean;\n  isDisconnected: boolean;\n  tilesOwned: number;\n  gold: Gold;\n  troops: number;\n  allies: number[];\n  embargoes: Set<PlayerID>;\n  isTraitor: boolean;\n  traitorRemainingTicks?: number;\n  targets: number[];\n  outgoingEmojis: EmojiMessage[];\n  outgoingAttacks: AttackUpdate[];\n  incomingAttacks: AttackUpdate[];\n  outgoingAllianceRequests: PlayerID[];\n  alliances: AllianceView[];\n  hasSpawned: boolean;\n  betrayals: number;\n  lastDeleteUnitTick: Tick;\n}\n\nexport interface AllianceView {\n  id: number;\n  other: PlayerID;\n  createdAt: Tick;\n  expiresAt: Tick;\n  hasExtensionRequest: boolean;\n}\n\nexport interface AllianceRequestUpdate {\n  type: GameUpdateType.AllianceRequest;\n  requestorID: number;\n  recipientID: number;\n  createdAt: Tick;\n}\n\nexport interface AllianceRequestReplyUpdate {\n  type: GameUpdateType.AllianceRequestReply;\n  request: AllianceRequestUpdate;\n  accepted: boolean;\n}\n\nexport interface BrokeAllianceUpdate {\n  type: GameUpdateType.BrokeAlliance;\n  traitorID: number;\n  betrayedID: number;\n}\n\nexport interface AllianceExpiredUpdate {\n  type: GameUpdateType.AllianceExpired;\n  player1ID: number;\n  player2ID: number;\n}\n\nexport interface AllianceExtensionUpdate {\n  type: GameUpdateType.AllianceExtension;\n  playerID: number;\n  allianceID: number;\n}\n\nexport interface TargetPlayerUpdate {\n  type: GameUpdateType.TargetPlayer;\n  playerID: number;\n  targetID: number;\n}\n\nexport interface EmojiUpdate {\n  type: GameUpdateType.Emoji;\n  emoji: EmojiMessage;\n}\n\nexport interface DisplayMessageUpdate {\n  type: GameUpdateType.DisplayEvent;\n  message: string;\n  messageType: MessageType;\n  goldAmount?: bigint;\n  playerID: number | null;\n  params?: Record<string, string | number>;\n}\n\nexport type DisplayChatMessageUpdate = {\n  type: GameUpdateType.DisplayChatEvent;\n  key: string;\n  category: string;\n  target: string | undefined;\n  playerID: number | null;\n  isFrom: boolean;\n  recipient: string;\n};\n\nexport interface WinUpdate {\n  type: GameUpdateType.Win;\n  allPlayersStats: AllPlayersStats;\n  winner: Winner;\n}\n\nexport interface HashUpdate {\n  type: GameUpdateType.Hash;\n  tick: Tick;\n  hash: number;\n}\n\nexport interface UnitIncomingUpdate {\n  type: GameUpdateType.UnitIncoming;\n  unitID: number;\n  message: string;\n  messageType: MessageType;\n  playerID: number;\n}\n\nexport interface EmbargoUpdate {\n  type: GameUpdateType.EmbargoEvent;\n  event: \"start\" | \"stop\";\n  playerID: number;\n  embargoedID: number;\n}\n", "import { TrainExecution } from \"../execution/TrainExecution\";\nimport { GraphAdapter } from \"../pathfinding/SerialAStar\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { Game, Player, Unit, UnitType } from \"./Game\";\nimport { TileRef } from \"./GameMap\";\nimport { GameUpdateType, RailTile, RailType } from \"./GameUpdates\";\nimport { Railroad } from \"./Railroad\";\n\n/**\n * Handle train stops at various station types\n */\ninterface TrainStopHandler {\n  onStop(mg: Game, station: TrainStation, trainExecution: TrainExecution): void;\n}\n\n/**\n * All stop handlers share the same logic for the time being\n * Behavior to be defined\n */\nclass CityStopHandler implements TrainStopHandler {\n  onStop(\n    mg: Game,\n    station: TrainStation,\n    trainExecution: TrainExecution,\n  ): void {\n    const stationOwner = station.unit.owner();\n    const trainOwner = trainExecution.owner();\n    const goldBonus = mg.config().trainGold(rel(trainOwner, stationOwner));\n    // Share revenue with the station owner if it's not the current player\n    if (trainOwner !== stationOwner) {\n      stationOwner.addGold(goldBonus, station.tile());\n    }\n    trainOwner.addGold(goldBonus, station.tile());\n  }\n}\n\nclass PortStopHandler implements TrainStopHandler {\n  constructor(private random: PseudoRandom) {}\n  onStop(\n    mg: Game,\n    station: TrainStation,\n    trainExecution: TrainExecution,\n  ): void {\n    const stationOwner = station.unit.owner();\n    const trainOwner = trainExecution.owner();\n    const goldBonus = mg.config().trainGold(rel(trainOwner, stationOwner));\n\n    trainOwner.addGold(goldBonus, station.tile());\n    // Share revenue with the station owner if it's not the current player\n    if (trainOwner !== stationOwner) {\n      stationOwner.addGold(goldBonus, station.tile());\n    }\n  }\n}\n\nclass FactoryStopHandler implements TrainStopHandler {\n  onStop(\n    mg: Game,\n    station: TrainStation,\n    trainExecution: TrainExecution,\n  ): void {}\n}\n\nexport function createTrainStopHandlers(\n  random: PseudoRandom,\n): Partial<Record<UnitType, TrainStopHandler>> {\n  return {\n    [UnitType.City]: new CityStopHandler(),\n    [UnitType.Port]: new PortStopHandler(random),\n    [UnitType.Factory]: new FactoryStopHandler(),\n  };\n}\n\nexport class TrainStation {\n  private readonly stopHandlers: Partial<Record<UnitType, TrainStopHandler>> =\n    {};\n  private cluster: Cluster | null;\n  private railroads: Set<Railroad> = new Set();\n  // Quick lookup from neighboring station to connecting railroad\n  private railroadByNeighbor: Map<TrainStation, Railroad> = new Map();\n\n  constructor(\n    private mg: Game,\n    public unit: Unit,\n  ) {\n    this.stopHandlers = createTrainStopHandlers(new PseudoRandom(mg.ticks()));\n  }\n\n  tradeAvailable(otherPlayer: Player): boolean {\n    const player = this.unit.owner();\n    return otherPlayer === player || player.canTrade(otherPlayer);\n  }\n\n  clearRailroads() {\n    this.railroads.clear();\n    this.railroadByNeighbor.clear();\n  }\n\n  addRailroad(railRoad: Railroad) {\n    this.railroads.add(railRoad);\n    const neighbor = railRoad.from === this ? railRoad.to : railRoad.from;\n    this.railroadByNeighbor.set(neighbor, railRoad);\n  }\n\n  removeRailroad(railRoad: Railroad) {\n    this.railroads.delete(railRoad);\n    const neighbor = railRoad.from === this ? railRoad.to : railRoad.from;\n    this.railroadByNeighbor.delete(neighbor);\n  }\n\n  removeNeighboringRails(station: TrainStation) {\n    const toRemove = [...this.railroads].find(\n      (r) => r.from === station || r.to === station,\n    );\n    if (toRemove) {\n      const railTiles: RailTile[] = toRemove.tiles.map((tile) => ({\n        tile,\n        railType: RailType.VERTICAL,\n      }));\n      this.mg.addUpdate({\n        type: GameUpdateType.RailroadEvent,\n        isActive: false,\n        railTiles,\n      });\n      this.removeRailroad(toRemove);\n    }\n  }\n\n  neighbors(): TrainStation[] {\n    const neighbors: TrainStation[] = [];\n    for (const r of this.railroads) {\n      if (r.from !== this) {\n        neighbors.push(r.from);\n      } else {\n        neighbors.push(r.to);\n      }\n    }\n    return neighbors;\n  }\n\n  tile(): TileRef {\n    return this.unit.tile();\n  }\n\n  isActive(): boolean {\n    return this.unit.isActive();\n  }\n\n  getRailroads(): Set<Railroad> {\n    return this.railroads;\n  }\n\n  getRailroadTo(station: TrainStation): Railroad | null {\n    return this.railroadByNeighbor.get(station) ?? null;\n  }\n\n  setCluster(cluster: Cluster | null) {\n    this.cluster = cluster;\n  }\n\n  getCluster(): Cluster | null {\n    return this.cluster;\n  }\n\n  onTrainStop(trainExecution: TrainExecution) {\n    const type = this.unit.type();\n    const handler = this.stopHandlers[type];\n    if (handler) {\n      handler.onStop(this.mg, this, trainExecution);\n    }\n  }\n}\n\n/**\n * Make the trainstation usable with A*\n */\nexport class TrainStationMapAdapter implements GraphAdapter<TrainStation> {\n  constructor(private game: Game) {}\n\n  neighbors(node: TrainStation): TrainStation[] {\n    return node.neighbors();\n  }\n\n  cost(node: TrainStation): number {\n    return 1;\n  }\n\n  position(node: TrainStation): { x: number; y: number } {\n    return { x: this.game.x(node.tile()), y: this.game.y(node.tile()) };\n  }\n\n  isTraversable(from: TrainStation, to: TrainStation): boolean {\n    return true;\n  }\n}\n\n/**\n * Cluster of connected stations\n */\nexport class Cluster {\n  public stations: Set<TrainStation> = new Set();\n\n  has(station: TrainStation) {\n    return this.stations.has(station);\n  }\n\n  addStation(station: TrainStation) {\n    this.stations.add(station);\n    station.setCluster(this);\n  }\n\n  removeStation(station: TrainStation) {\n    this.stations.delete(station);\n  }\n\n  addStations(stations: Set<TrainStation>) {\n    for (const station of stations) {\n      this.addStation(station);\n    }\n  }\n\n  merge(other: Cluster) {\n    for (const s of other.stations) {\n      this.addStation(s);\n    }\n  }\n\n  availableForTrade(player: Player): Set<TrainStation> {\n    const tradingStations = new Set<TrainStation>();\n    for (const station of this.stations) {\n      if (\n        (station.unit.type() === UnitType.City ||\n          station.unit.type() === UnitType.Port) &&\n        station.tradeAvailable(player)\n      ) {\n        tradingStations.add(station);\n      }\n    }\n    return tradingStations;\n  }\n\n  size() {\n    return this.stations.size;\n  }\n\n  clear() {\n    this.stations.clear();\n  }\n}\n\nfunction rel(\n  player: Player,\n  other: Player,\n): \"self\" | \"team\" | \"ally\" | \"other\" {\n  if (player === other) {\n    return \"self\";\n  }\n  if (player.isOnSameTeam(other)) {\n    return \"team\";\n  }\n  if (player.isAlliedWith(other)) {\n    return \"ally\";\n  }\n  return \"other\";\n}\n", "import { Game } from \"./Game\";\nimport { TileRef } from \"./GameMap\";\nimport { GameUpdateType, RailTile, RailType } from \"./GameUpdates\";\nimport { TrainStation } from \"./TrainStation\";\n\nexport class Railroad {\n  constructor(\n    public from: TrainStation,\n    public to: TrainStation,\n    public tiles: TileRef[],\n  ) {}\n\n  delete(game: Game) {\n    const railTiles: RailTile[] = this.tiles.map((tile) => ({\n      tile,\n      railType: RailType.VERTICAL,\n    }));\n    game.addUpdate({\n      type: GameUpdateType.RailroadEvent,\n      isActive: false,\n      railTiles,\n    });\n    this.from.removeRailroad(this);\n    this.to.removeRailroad(this);\n  }\n}\n\nexport function getOrientedRailroad(\n  from: TrainStation,\n  to: TrainStation,\n): OrientedRailroad | null {\n  const railroad = from.getRailroadTo(to);\n  if (!railroad) return null;\n  // If tiles are stored from -> to, we go forward when railroad.to === to\n  const forward = railroad.to === to;\n  return new OrientedRailroad(railroad, forward);\n}\n\n/**\n * Wrap a railroad with a direction so it always starts at tiles[0]\n */\nexport class OrientedRailroad {\n  private tiles: TileRef[] = [];\n  constructor(\n    private railroad: Railroad,\n    private forward: boolean,\n  ) {\n    this.tiles = this.forward\n      ? this.railroad.tiles\n      : [...this.railroad.tiles].reverse();\n  }\n\n  getTiles(): TileRef[] {\n    return this.tiles;\n  }\n\n  getStart(): TrainStation {\n    return this.forward ? this.railroad.from : this.railroad.to;\n  }\n\n  getEnd(): TrainStation {\n    return this.forward ? this.railroad.to : this.railroad.from;\n  }\n}\n", "import {\n  Execution,\n  Game,\n  Player,\n  TrainType,\n  Unit,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { RailNetwork } from \"../game/RailNetwork\";\nimport { getOrientedRailroad, OrientedRailroad } from \"../game/Railroad\";\nimport { TrainStation } from \"../game/TrainStation\";\n\nexport class TrainExecution implements Execution {\n  private active = true;\n  private mg: Game | null = null;\n  private train: Unit | null = null;\n  private cars: Unit[] = [];\n  private hasCargo: boolean = false;\n  private currentTile: number = 0;\n  private spacing = 2;\n  private usedTiles: TileRef[] = []; // used for cars behind\n  private stations: TrainStation[] = [];\n  private currentRailroad: OrientedRailroad | null = null;\n  private speed: number = 2;\n\n  constructor(\n    private railNetwork: RailNetwork,\n    private player: Player,\n    private source: TrainStation,\n    private destination: TrainStation,\n    private numCars: number,\n  ) {}\n\n  public owner(): Player {\n    return this.player;\n  }\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    const stations = this.railNetwork.findStationsPath(\n      this.source,\n      this.destination,\n    );\n    if (!stations || stations.length <= 1) {\n      this.active = false;\n      return;\n    }\n\n    this.stations = stations;\n    const railroad = getOrientedRailroad(this.stations[0], this.stations[1]);\n    if (railroad) {\n      this.currentRailroad = railroad;\n    } else {\n      this.active = false;\n      return;\n    }\n\n    const spawn = this.player.canBuild(UnitType.Train, this.stations[0].tile());\n    if (spawn === false) {\n      console.warn(`cannot build train`);\n      this.active = false;\n      return;\n    }\n    this.train = this.createTrainUnits(spawn);\n  }\n\n  tick(ticks: number): void {\n    if (this.train === null) {\n      throw new Error(\"Not initialized\");\n    }\n    if (!this.train.isActive() || !this.activeSourceOrDestination()) {\n      this.deleteTrain();\n      return;\n    }\n\n    const tile = this.getNextTile();\n    if (tile) {\n      this.updateCarsPositions(tile);\n    } else {\n      this.targetReached();\n      this.deleteTrain();\n    }\n  }\n\n  loadCargo() {\n    if (this.hasCargo || this.train === null) {\n      return;\n    }\n    this.hasCargo = true;\n    // Starts at 1: don't load tail engine\n    for (let i = 1; i < this.cars.length; i++) {\n      this.cars[i].setLoaded(true);\n    }\n  }\n\n  private targetReached() {\n    if (this.train === null) {\n      return;\n    }\n    this.train.setReachedTarget();\n    this.cars.forEach((car: Unit) => {\n      car.setReachedTarget();\n    });\n  }\n\n  private createTrainUnits(tile: TileRef): Unit {\n    const train = this.player.buildUnit(UnitType.Train, tile, {\n      targetUnit: this.destination.unit,\n      trainType: TrainType.Engine,\n    });\n    // Tail is also an engine, just for cosmetics\n    this.cars.push(\n      this.player.buildUnit(UnitType.Train, tile, {\n        targetUnit: this.destination.unit,\n        trainType: TrainType.Engine,\n      }),\n    );\n    for (let i = 0; i < this.numCars; i++) {\n      this.cars.push(\n        this.player.buildUnit(UnitType.Train, tile, {\n          trainType: TrainType.Carriage,\n          loaded: this.hasCargo,\n        }),\n      );\n    }\n    return train;\n  }\n\n  private deleteTrain() {\n    this.active = false;\n    if (this.train?.isActive()) {\n      this.train.delete(false);\n    }\n    for (const car of this.cars) {\n      if (car.isActive()) {\n        car.delete(false);\n      }\n    }\n  }\n\n  private activeSourceOrDestination(): boolean {\n    return (\n      this.stations.length > 1 &&\n      this.stations[1].isActive() &&\n      this.stations[0].isActive()\n    );\n  }\n\n  /**\n   * Save the tiles the train go through so the cars can reuse them\n   * Don't simply save the tiles the engine uses, otherwise the spacing will be dictated by the train speed\n   */\n  private saveTraversedTiles(from: number, speed: number) {\n    if (!this.currentRailroad) {\n      return;\n    }\n    let tileToSave: number = from;\n    for (\n      let i = 0;\n      i < speed && tileToSave < this.currentRailroad.getTiles().length;\n      i++\n    ) {\n      this.saveTile(this.currentRailroad.getTiles()[tileToSave]);\n      tileToSave = tileToSave + 1;\n    }\n  }\n\n  private saveTile(tile: TileRef) {\n    this.usedTiles.push(tile);\n    if (this.usedTiles.length > this.cars.length * this.spacing + 3) {\n      this.usedTiles.shift();\n    }\n  }\n\n  private updateCarsPositions(newTile: TileRef) {\n    if (this.cars.length > 0) {\n      for (let i = this.cars.length - 1; i >= 0; --i) {\n        const carTileIndex = (i + 1) * this.spacing + 2;\n        if (this.usedTiles.length > carTileIndex) {\n          this.cars[i].move(this.usedTiles[carTileIndex]);\n        }\n      }\n    }\n    if (this.train !== null) {\n      this.train.move(newTile);\n    }\n  }\n\n  private nextStation() {\n    if (this.stations.length > 2) {\n      this.stations.shift();\n      const railRoad = getOrientedRailroad(this.stations[0], this.stations[1]);\n      if (railRoad) {\n        this.currentRailroad = railRoad;\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private canTradeWithDestination() {\n    return (\n      this.stations.length > 1 && this.stations[1].tradeAvailable(this.player)\n    );\n  }\n\n  private getNextTile(): TileRef | null {\n    if (this.currentRailroad === null || !this.canTradeWithDestination()) {\n      return null;\n    }\n    this.saveTraversedTiles(this.currentTile, this.speed);\n    this.currentTile = this.currentTile + this.speed;\n    const leftOver = this.currentTile - this.currentRailroad.getTiles().length;\n    if (leftOver >= 0) {\n      // Station reached, pick the next station\n      this.stationReached();\n      if (!this.nextStation()) {\n        return null; // Destination reached (or no valid connection)\n      }\n      this.currentTile = leftOver;\n      this.saveTraversedTiles(0, leftOver);\n    }\n    return this.currentRailroad.getTiles()[this.currentTile];\n  }\n\n  private stationReached() {\n    if (this.mg === null || this.player === null) {\n      throw new Error(\"Not initialized\");\n    }\n    this.stations[1].onTrainStop(this);\n    return;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Unit, UnitType } from \"../game/Game\";\nimport { TrainStation } from \"../game/TrainStation\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { TrainExecution } from \"./TrainExecution\";\n\nexport class TrainStationExecution implements Execution {\n  private mg: Game;\n  private active: boolean = true;\n  private random: PseudoRandom;\n  private station: TrainStation | null = null;\n  private numCars: number = 5;\n  private lastSpawnTick: number = 0;\n  private ticksCooldown: number = 10; // Minimum cooldown between two trains\n  constructor(\n    private unit: Unit,\n    private spawnTrains?: boolean, // If set, the station will spawn trains\n  ) {\n    this.unit.setTrainStation(true);\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    if (this.spawnTrains) {\n      this.random = new PseudoRandom(mg.ticks());\n    }\n  }\n\n  tick(ticks: number): void {\n    if (this.mg === undefined) {\n      throw new Error(\"Not initialized\");\n    }\n    if (!this.isActive() || this.unit === undefined) {\n      return;\n    }\n    if (this.station === null) {\n      // Can't create new executions on init, so it has to be done in the tick\n      this.station = new TrainStation(this.mg, this.unit);\n      this.mg.railNetwork().connectStation(this.station);\n    }\n    if (!this.station.isActive()) {\n      this.active = false;\n      return;\n    }\n    this.spawnTrain(this.station, ticks);\n  }\n\n  private shouldSpawnTrain(): boolean {\n    const spawnRate = this.mg\n      .config()\n      .trainSpawnRate(this.unit.owner().unitCount(UnitType.Factory));\n    for (let i = 0; i < this.unit!.level(); i++) {\n      if (this.random.chance(spawnRate)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private spawnTrain(station: TrainStation, currentTick: number) {\n    if (this.mg === undefined) throw new Error(\"Not initialized\");\n    if (!this.spawnTrains) return;\n    if (this.random === undefined) throw new Error(\"Not initialized\");\n    if (currentTick < this.lastSpawnTick + this.ticksCooldown) return;\n    const cluster = station.getCluster();\n    if (cluster === null) {\n      return;\n    }\n    const availableForTrade = cluster.availableForTrade(this.unit.owner());\n    if (availableForTrade.size === 0) {\n      return;\n    }\n    if (!this.shouldSpawnTrain()) {\n      return;\n    }\n\n    // Pick a destination randomly.\n    // Could be improved to pick a lucrative trip\n    const destination: TrainStation =\n      this.random.randFromSet(availableForTrade);\n    if (destination !== station) {\n      this.mg.addExecution(\n        new TrainExecution(\n          this.mg.railNetwork(),\n          this.unit.owner(),\n          station,\n          destination,\n          this.numCars,\n        ),\n      );\n      this.lastSpawnTick = currentTick;\n    }\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Unit, UnitType } from \"../game/Game\";\nimport { TrainStationExecution } from \"./TrainStationExecution\";\n\nexport class CityExecution implements Execution {\n  private mg: Game;\n  private active: boolean = true;\n  private stationCreated = false;\n\n  constructor(private city: Unit) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n  }\n\n  tick(ticks: number): void {\n    if (!this.stationCreated) {\n      this.createStation();\n      this.stationCreated = true;\n    }\n    if (!this.city.isActive()) {\n      this.active = false;\n      return;\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  private createStation(): void {\n    const nearbyFactory = this.mg.hasUnitNearby(\n      this.city.tile()!,\n      this.mg.config().trainStationMaxRange(),\n      UnitType.Factory,\n    );\n    if (nearbyFactory) {\n      this.mg.addExecution(new TrainStationExecution(this.city));\n    }\n  }\n}\n", "import { Execution, Game, Player, Unit, UnitType } from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { AirPathFinder } from \"../pathfinding/PathFinding\";\nimport { PseudoRandom } from \"../PseudoRandom\";\n\nexport class ShellExecution implements Execution {\n  private active = true;\n  private pathFinder: AirPathFinder;\n  private shell: Unit | undefined;\n  private mg: Game;\n  private destroyAtTick: number = -1;\n  private random: PseudoRandom;\n\n  constructor(\n    private spawn: TileRef,\n    private _owner: Player,\n    private ownerUnit: Unit,\n    private target: Unit,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.pathFinder = new AirPathFinder(mg, new PseudoRandom(mg.ticks()));\n    this.mg = mg;\n    this.random = new PseudoRandom(mg.ticks());\n  }\n\n  tick(ticks: number): void {\n    this.shell ??= this._owner.buildUnit(UnitType.Shell, this.spawn, {});\n    if (!this.shell.isActive()) {\n      this.active = false;\n      return;\n    }\n    if (\n      !this.target.isActive() ||\n      this.target.owner() === this.shell.owner() ||\n      (this.destroyAtTick !== -1 && this.mg.ticks() >= this.destroyAtTick)\n    ) {\n      this.shell.delete(false);\n      this.active = false;\n      return;\n    }\n\n    if (this.destroyAtTick === -1 && !this.ownerUnit.isActive()) {\n      this.destroyAtTick = this.mg.ticks() + this.mg.config().shellLifetime();\n    }\n\n    for (let i = 0; i < 3; i++) {\n      const result = this.pathFinder.nextTile(\n        this.shell.tile(),\n        this.target.tile(),\n      );\n      if (result === true) {\n        this.active = false;\n        this.target.modifyHealth(-this.effectOnTarget(), this._owner);\n        this.shell.setReachedTarget();\n        this.shell.delete(false);\n        return;\n      } else {\n        this.shell.move(result);\n      }\n    }\n  }\n\n  private effectOnTarget(): number {\n    const { damage } = this.mg.config().unitInfo(UnitType.Shell);\n    const baseDamage = damage ?? 250;\n\n    const roll = this.random.nextInt(1, 6);\n    const damageMultiplier = (roll - 1) * 25 + 200;\n\n    return Math.round((baseDamage / 250) * damageMultiplier);\n  }\n\n  public getEffectOnTargetForTesting(): number {\n    return this.effectOnTarget();\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Unit } from \"../game/Game\";\nimport { ShellExecution } from \"./ShellExecution\";\n\nexport class DefensePostExecution implements Execution {\n  private mg: Game;\n  private active: boolean = true;\n\n  private target: Unit | null = null;\n  private lastShellAttack = 0;\n\n  private alreadySentShell = new Set<Unit>();\n\n  constructor(private post: Unit) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n  }\n\n  private shoot() {\n    if (this.target === null) return;\n    const shellAttackRate = this.mg.config().defensePostShellAttackRate();\n    if (this.mg.ticks() - this.lastShellAttack > shellAttackRate) {\n      this.lastShellAttack = this.mg.ticks();\n      this.mg.addExecution(\n        new ShellExecution(\n          this.post.tile(),\n          this.post.owner(),\n          this.post,\n          this.target,\n        ),\n      );\n      if (!this.target.hasHealth()) {\n        // Don't send multiple shells to target that can be oneshotted\n        this.alreadySentShell.add(this.target);\n        this.target = null;\n        return;\n      }\n    }\n  }\n\n  tick(ticks: number): void {\n    if (!this.post.isActive()) {\n      this.active = false;\n      return;\n    }\n\n    // Do nothing while the structure is under construction\n    if (this.post.isUnderConstruction()) {\n      return;\n    }\n\n    if (this.target !== null && !this.target.isActive()) {\n      this.target = null;\n    }\n\n    // TODO: Reconsider how/if defense posts target ships.\n    // const ships = this.mg\n    //   .nearbyUnits(\n    //     this.post.tile(),\n    //     this.mg.config().defensePostTargettingRange(),\n    //     [UnitType.TransportShip, UnitType.Warship],\n    //   )\n    //   .filter(\n    //     ({ unit }) =>\n    //       this.post !== null &&\n    //       unit.owner() !== this.post.owner() &&\n    //       !unit.owner().isFriendly(this.post.owner()) &&\n    //       !this.alreadySentShell.has(unit),\n    //   );\n    //\n    // this.target =\n    //   ships.sort((a, b) => {\n    //     const { unit: unitA, distSquared: distA } = a;\n    //     const { unit: unitB, distSquared: distB } = b;\n    //\n    //     // Prioritize TransportShip\n    //     if (\n    //       unitA.type() === UnitType.TransportShip &&\n    //       unitB.type() !== UnitType.TransportShip\n    //     )\n    //       return -1;\n    //     if (\n    //       unitA.type() !== UnitType.TransportShip &&\n    //       unitB.type() === UnitType.TransportShip\n    //     )\n    //       return 1;\n    //\n    //     // If both are the same type, sort by distance (lower `distSquared` means closer)\n    //     return distA - distB;\n    //   })[0]?.unit ?? null;\n    //\n    // if (this.target === null || !this.target.isActive()) {\n    //   this.target = null;\n    //   return;\n    // } else {\n    //   this.shoot();\n    //   return;\n    // }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Unit, UnitType } from \"../game/Game\";\nimport { TrainStationExecution } from \"./TrainStationExecution\";\n\nexport class FactoryExecution implements Execution {\n  private active: boolean = true;\n  private game: Game;\n  private stationCreated = false;\n\n  constructor(private factory: Unit) {}\n\n  init(mg: Game, ticks: number): void {\n    this.game = mg;\n  }\n\n  tick(ticks: number): void {\n    if (!this.stationCreated) {\n      this.createStation();\n      this.stationCreated = true;\n    }\n    if (!this.factory.isActive()) {\n      this.active = false;\n      return;\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  private createStation(): void {\n    const structures = this.game.nearbyUnits(\n      this.factory.tile()!,\n      this.game.config().trainStationMaxRange(),\n      [UnitType.City, UnitType.Port, UnitType.Factory],\n    );\n\n    this.game.addExecution(new TrainStationExecution(this.factory, true));\n    for (const { unit } of structures) {\n      if (!unit.hasTrainStation()) {\n        this.game.addExecution(new TrainStationExecution(unit));\n      }\n    }\n  }\n}\n", "import {\n  Execution,\n  Game,\n  isStructureType,\n  MessageType,\n  Player,\n  TerraNullius,\n  TrajectoryTile,\n  Unit,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { ParabolaPathFinder } from \"../pathfinding/PathFinding\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { NukeType } from \"../StatsSchemas\";\n\nconst SPRITE_RADIUS = 16;\n\nexport class NukeExecution implements Execution {\n  private active = true;\n  private mg: Game;\n  private nuke: Unit | null = null;\n  private tilesToDestroyCache: Set<TileRef> | undefined;\n  private pathFinder: ParabolaPathFinder;\n\n  constructor(\n    private nukeType: NukeType,\n    private player: Player,\n    private dst: TileRef,\n    private src?: TileRef | null,\n    private speed: number = -1,\n    private waitTicks = 0,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    if (this.speed === -1) {\n      this.speed = this.mg.config().defaultNukeSpeed();\n    }\n    this.pathFinder = new ParabolaPathFinder(mg);\n  }\n\n  public target(): Player | TerraNullius {\n    return this.mg.owner(this.dst);\n  }\n\n  private tilesToDestroy(): Set<TileRef> {\n    if (this.tilesToDestroyCache !== undefined) {\n      return this.tilesToDestroyCache;\n    }\n    if (this.nuke === null) {\n      throw new Error(\"Not initialized\");\n    }\n    const magnitude = this.mg.config().nukeMagnitudes(this.nuke.type());\n    const rand = new PseudoRandom(this.mg.ticks());\n    const inner2 = magnitude.inner * magnitude.inner;\n    const outer2 = magnitude.outer * magnitude.outer;\n    this.tilesToDestroyCache = this.mg.bfs(this.dst, (_, n: TileRef) => {\n      const d2 = this.mg?.euclideanDistSquared(this.dst, n) ?? 0;\n      return d2 <= outer2 && (d2 <= inner2 || rand.chance(2));\n    });\n    return this.tilesToDestroyCache;\n  }\n\n  private maybeBreakAlliances(toDestroy: Set<TileRef>) {\n    if (this.nuke === null) {\n      throw new Error(\"Not initialized\");\n    }\n    const attacked = new Map<Player, number>();\n    for (const tile of toDestroy) {\n      const owner = this.mg.owner(tile);\n      if (owner.isPlayer()) {\n        const prev = attacked.get(owner) ?? 0;\n        attacked.set(owner, prev + 1);\n      }\n    }\n\n    const threshold = this.mg.config().nukeAllianceBreakThreshold();\n    for (const [attackedPlayer, tilesDestroyed] of attacked) {\n      if (\n        tilesDestroyed > threshold &&\n        this.nuke.type() !== UnitType.MIRVWarhead\n      ) {\n        // Resolves exploit of alliance breaking in which a pending alliance request\n        // was accepted in the middle of a missile attack.\n        const allianceRequest = attackedPlayer\n          .incomingAllianceRequests()\n          .find((ar) => ar.requestor() === this.player);\n        if (allianceRequest) {\n          allianceRequest?.reject();\n        }\n        // Mirv warheads shouldn't break alliances\n        const alliance = this.player.allianceWith(attackedPlayer);\n        if (alliance !== null) {\n          this.player.breakAlliance(alliance);\n        }\n        if (attackedPlayer !== this.player) {\n          attackedPlayer.updateRelation(this.player, -100);\n        }\n      }\n    }\n  }\n\n  tick(ticks: number): void {\n    if (this.nuke === null) {\n      const spawn = this.player.canBuild(this.nukeType, this.dst);\n      if (spawn === false) {\n        console.warn(`cannot build Nuke`);\n        this.active = false;\n        return;\n      }\n      this.src = spawn;\n      this.pathFinder.computeControlPoints(\n        spawn,\n        this.dst,\n        this.speed,\n        this.nukeType !== UnitType.MIRVWarhead,\n      );\n      this.nuke = this.player.buildUnit(this.nukeType, spawn, {\n        targetTile: this.dst,\n        trajectory: this.getTrajectory(this.dst),\n      });\n      this.maybeBreakAlliances(this.tilesToDestroy());\n      if (this.mg.hasOwner(this.dst)) {\n        const target = this.mg.owner(this.dst);\n        if (!target.isPlayer()) {\n          // Ignore terra nullius\n        } else if (this.nukeType === UnitType.AtomBomb) {\n          this.mg.displayIncomingUnit(\n            this.nuke.id(),\n            // TODO TranslateText\n            `${this.player.name()} - atom bomb inbound`,\n            MessageType.NUKE_INBOUND,\n            target.id(),\n          );\n        } else if (this.nukeType === UnitType.HydrogenBomb) {\n          this.mg.displayIncomingUnit(\n            this.nuke.id(),\n            // TODO TranslateText\n            `${this.player.name()} - hydrogen bomb inbound`,\n            MessageType.HYDROGEN_BOMB_INBOUND,\n            target.id(),\n          );\n        }\n\n        // Record stats\n        this.mg.stats().bombLaunch(this.player, target, this.nukeType);\n      }\n\n      // after sending a nuke set the missilesilo on cooldown\n      const silo = this.player\n        .units(UnitType.MissileSilo)\n        .find((silo) => silo.tile() === spawn);\n      if (silo) {\n        silo.launch();\n      }\n      return;\n    }\n\n    // make the nuke unactive if it was intercepted\n    if (!this.nuke.isActive()) {\n      console.log(`Nuke destroyed before reaching target`);\n      this.active = false;\n      return;\n    }\n\n    if (this.waitTicks > 0) {\n      this.waitTicks--;\n      return;\n    }\n\n    // Move to next tile\n    const nextTile = this.pathFinder.nextTile(this.speed);\n    if (nextTile === true) {\n      this.detonate();\n      return;\n    } else {\n      this.updateNukeTargetable();\n      this.nuke.move(nextTile);\n      // Update index so SAM can interpolate future position\n      this.nuke.setTrajectoryIndex(this.pathFinder.currentIndex());\n    }\n  }\n\n  public getNuke(): Unit | null {\n    return this.nuke;\n  }\n\n  private getTrajectory(target: TileRef): TrajectoryTile[] {\n    const trajectoryTiles: TrajectoryTile[] = [];\n    const targetRangeSquared =\n      this.mg.config().defaultNukeTargetableRange() ** 2;\n    const allTiles: TileRef[] = this.pathFinder.allTiles();\n    for (const tile of allTiles) {\n      trajectoryTiles.push({\n        tile,\n        targetable: this.isTargetable(target, tile, targetRangeSquared),\n      });\n    }\n\n    return trajectoryTiles;\n  }\n\n  private isTargetable(\n    targetTile: TileRef,\n    nukeTile: TileRef,\n    targetRangeSquared: number,\n  ): boolean {\n    return (\n      this.mg.euclideanDistSquared(nukeTile, targetTile) < targetRangeSquared ||\n      (this.src !== undefined &&\n        this.src !== null &&\n        this.mg.euclideanDistSquared(this.src, nukeTile) < targetRangeSquared)\n    );\n  }\n\n  private updateNukeTargetable() {\n    if (this.nuke === null || this.nuke.targetTile() === undefined) {\n      return;\n    }\n    const targetRangeSquared =\n      this.mg.config().defaultNukeTargetableRange() ** 2;\n    const targetTile = this.nuke.targetTile();\n    this.nuke.setTargetable(\n      this.isTargetable(targetTile!, this.nuke.tile(), targetRangeSquared),\n    );\n  }\n\n  private detonate() {\n    if (this.nuke === null) {\n      throw new Error(\"Not initialized\");\n    }\n\n    const magnitude = this.mg.config().nukeMagnitudes(this.nuke.type());\n    const toDestroy = this.tilesToDestroy();\n    this.maybeBreakAlliances(toDestroy);\n\n    const maxTroops = this.target().isPlayer()\n      ? this.mg.config().maxTroops(this.target() as Player)\n      : 1;\n\n    for (const tile of toDestroy) {\n      const owner = this.mg.owner(tile);\n      if (owner.isPlayer()) {\n        owner.relinquish(tile);\n        owner.removeTroops(\n          this.mg\n            .config()\n            .nukeDeathFactor(\n              this.nukeType,\n              owner.troops(),\n              owner.numTilesOwned(),\n              maxTroops,\n            ),\n        );\n        owner.outgoingAttacks().forEach((attack) => {\n          const deaths =\n            this.mg\n              ?.config()\n              .nukeDeathFactor(\n                this.nukeType,\n                attack.troops(),\n                owner.numTilesOwned(),\n                maxTroops,\n              ) ?? 0;\n          attack.setTroops(attack.troops() - deaths);\n        });\n        owner.units(UnitType.TransportShip).forEach((attack) => {\n          const deaths =\n            this.mg\n              ?.config()\n              .nukeDeathFactor(\n                this.nukeType,\n                attack.troops(),\n                owner.numTilesOwned(),\n                maxTroops,\n              ) ?? 0;\n          attack.setTroops(attack.troops() - deaths);\n        });\n      }\n\n      if (this.mg.isLand(tile)) {\n        this.mg.setFallout(tile, true);\n      }\n    }\n\n    const outer2 = magnitude.outer * magnitude.outer;\n    for (const unit of this.mg.units()) {\n      if (\n        unit.type() !== UnitType.AtomBomb &&\n        unit.type() !== UnitType.HydrogenBomb &&\n        unit.type() !== UnitType.MIRVWarhead &&\n        unit.type() !== UnitType.MIRV\n      ) {\n        if (this.mg.euclideanDistSquared(this.dst, unit.tile()) < outer2) {\n          unit.delete(true, this.player);\n        }\n      }\n    }\n\n    this.redrawBuildings(magnitude.outer + SPRITE_RADIUS);\n    this.active = false;\n    this.nuke.setReachedTarget();\n    this.nuke.delete(false);\n\n    // Record stats\n    this.mg\n      .stats()\n      .bombLand(this.player, this.target(), this.nuke.type() as NukeType);\n  }\n\n  private redrawBuildings(range: number) {\n    const rangeSquared = range * range;\n    for (const unit of this.mg.units()) {\n      if (isStructureType(unit.type())) {\n        if (\n          this.mg.euclideanDistSquared(this.dst, unit.tile()) < rangeSquared\n        ) {\n          unit.touch();\n        }\n      }\n    }\n  }\n\n  owner(): Player {\n    return this.player;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import {\n  Execution,\n  Game,\n  MessageType,\n  Player,\n  TerraNullius,\n  Unit,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { ParabolaPathFinder } from \"../pathfinding/PathFinding\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { simpleHash } from \"../Util\";\nimport { NukeExecution } from \"./NukeExecution\";\n\nexport class MirvExecution implements Execution {\n  private active = true;\n\n  private mg: Game;\n\n  private nuke: Unit | null = null;\n\n  private mirvRange = 1500;\n  private warheadCount = 350;\n\n  private random: PseudoRandom;\n\n  private pathFinder: ParabolaPathFinder;\n\n  private targetPlayer: Player | TerraNullius;\n\n  private separateDst: TileRef;\n\n  private speed: number = -1;\n\n  constructor(\n    private player: Player,\n    private dst: TileRef,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.random = new PseudoRandom(mg.ticks() + simpleHash(this.player.id()));\n    this.mg = mg;\n    this.pathFinder = new ParabolaPathFinder(mg);\n    this.targetPlayer = this.mg.owner(this.dst);\n    this.speed = this.mg.config().defaultNukeSpeed();\n\n    // Betrayal on launch\n    if (this.targetPlayer.isPlayer()) {\n      const alliance = this.player.allianceWith(this.targetPlayer);\n      if (alliance !== null) {\n        this.player.breakAlliance(alliance);\n      }\n      if (this.targetPlayer !== this.player) {\n        this.targetPlayer.updateRelation(this.player, -100);\n      }\n    }\n  }\n\n  tick(ticks: number): void {\n    if (this.nuke === null) {\n      const spawn = this.player.canBuild(UnitType.MIRV, this.dst);\n      if (spawn === false) {\n        console.warn(`cannot build MIRV`);\n        this.active = false;\n        return;\n      }\n      this.nuke = this.player.buildUnit(UnitType.MIRV, spawn, {\n        targetTile: this.dst,\n      });\n      this.mg.stats().bombLaunch(this.player, this.targetPlayer, UnitType.MIRV);\n      const x = Math.floor(\n        (this.mg.x(this.dst) + this.mg.x(this.mg.x(this.nuke.tile()))) / 2,\n      );\n      const y = Math.max(0, this.mg.y(this.dst) - 500) + 50;\n      this.separateDst = this.mg.ref(x, y);\n      this.pathFinder.computeControlPoints(spawn, this.separateDst);\n\n      this.mg.displayIncomingUnit(\n        this.nuke.id(),\n        // TODO TranslateText\n        `\u26A0\uFE0F\u26A0\uFE0F\u26A0\uFE0F ${this.player.name()} - MIRV INBOUND \u26A0\uFE0F\u26A0\uFE0F\u26A0\uFE0F`,\n        MessageType.MIRV_INBOUND,\n        this.targetPlayer.id(),\n      );\n    }\n\n    const result = this.pathFinder.nextTile(this.speed);\n    if (result === true) {\n      this.separate();\n      this.active = false;\n      // Record stats\n      this.mg.stats().bombLand(this.player, this.targetPlayer, UnitType.MIRV);\n      return;\n    } else {\n      this.nuke.move(result);\n    }\n  }\n\n  private separate() {\n    if (this.nuke === null) throw new Error(\"uninitialized\");\n    const dsts: TileRef[] = [this.dst];\n    let attempts = 1000;\n    while (attempts > 0 && dsts.length < this.warheadCount) {\n      attempts--;\n      const potential = this.randomLand(this.dst, dsts);\n      if (potential === null) {\n        continue;\n      }\n      dsts.push(potential);\n    }\n    console.log(`dsts: ${dsts.length}`);\n    dsts.sort(\n      (a, b) =>\n        this.mg.manhattanDist(b, this.dst) - this.mg.manhattanDist(a, this.dst),\n    );\n    console.log(`got ${dsts.length} dsts!!`);\n\n    for (const [i, dst] of dsts.entries()) {\n      this.mg.addExecution(\n        new NukeExecution(\n          UnitType.MIRVWarhead,\n          this.player,\n          dst,\n          this.nuke.tile(),\n          15 + Math.floor((i / this.warheadCount) * 5),\n          //   this.random.nextInt(5, 9),\n          this.random.nextInt(0, 15),\n        ),\n      );\n    }\n    this.nuke.delete(false);\n  }\n\n  randomLand(ref: TileRef, taken: TileRef[]): TileRef | null {\n    let tries = 0;\n    const mirvRange2 = this.mirvRange * this.mirvRange;\n    while (tries < 100) {\n      tries++;\n      const x = this.random.nextInt(\n        this.mg.x(ref) - this.mirvRange,\n        this.mg.x(ref) + this.mirvRange,\n      );\n      const y = this.random.nextInt(\n        this.mg.y(ref) - this.mirvRange,\n        this.mg.y(ref) + this.mirvRange,\n      );\n      if (!this.mg.isValidCoord(x, y)) {\n        continue;\n      }\n      const tile = this.mg.ref(x, y);\n      if (!this.mg.isLand(tile)) {\n        continue;\n      }\n      if (this.mg.euclideanDistSquared(tile, ref) > mirvRange2) {\n        continue;\n      }\n      if (this.mg.owner(tile) !== this.targetPlayer) {\n        continue;\n      }\n      if (this.proximityCheck(tile, taken)) {\n        continue;\n      }\n      return tile;\n    }\n    console.log(\"couldn't find place, giving up\");\n    return null;\n  }\n\n  private proximityCheck(tile: TileRef, taken: TileRef[]): boolean {\n    for (const t of taken) {\n      if (this.mg.manhattanDist(tile, t) < 55) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  owner(): Player {\n    return this.player;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Unit } from \"../game/Game\";\n\nexport class MissileSiloExecution implements Execution {\n  private active = true;\n  private mg: Game;\n  private silo: Unit;\n\n  constructor(silo: Unit) {\n    this.silo = silo;\n  }\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n  }\n\n  tick(ticks: number): void {\n    if (this.silo.isUnderConstruction()) {\n      return;\n    }\n\n    // frontTime is the time the earliest missile fired.\n    const frontTime = this.silo.missileTimerQueue()[0];\n    if (frontTime === undefined) {\n      return;\n    }\n\n    const cooldown =\n      this.mg.config().SiloCooldown() - (this.mg.ticks() - frontTime);\n\n    if (cooldown <= 0) {\n      this.silo.reloadMissile();\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { renderNumber } from \"../../client/Utils\";\nimport {\n  Execution,\n  Game,\n  MessageType,\n  Player,\n  Unit,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { PathFindResultType } from \"../pathfinding/AStar\";\nimport { PathFinder } from \"../pathfinding/PathFinding\";\nimport { distSortUnit } from \"../Util\";\n\nexport class TradeShipExecution implements Execution {\n  private active = true;\n  private mg: Game;\n  private tradeShip: Unit | undefined;\n  private wasCaptured = false;\n  private pathFinder: PathFinder;\n  private tilesTraveled = 0;\n\n  constructor(\n    private origOwner: Player,\n    private srcPort: Unit,\n    private _dstPort: Unit,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    this.pathFinder = PathFinder.Mini(mg, 2500);\n  }\n\n  tick(ticks: number): void {\n    if (this.tradeShip === undefined) {\n      const spawn = this.origOwner.canBuild(\n        UnitType.TradeShip,\n        this.srcPort.tile(),\n      );\n      if (spawn === false) {\n        console.warn(`cannot build trade ship`);\n        this.active = false;\n        return;\n      }\n      this.tradeShip = this.origOwner.buildUnit(UnitType.TradeShip, spawn, {\n        targetUnit: this._dstPort,\n        lastSetSafeFromPirates: ticks,\n      });\n      this.mg.stats().boatSendTrade(this.origOwner, this._dstPort.owner());\n    }\n\n    if (!this.tradeShip.isActive()) {\n      this.active = false;\n      return;\n    }\n\n    const tradeShipOwner = this.tradeShip.owner();\n    const dstPortOwner = this._dstPort.owner();\n    if (this.wasCaptured !== true && this.origOwner !== tradeShipOwner) {\n      // Store as variable in case ship is recaptured by previous owner\n      this.wasCaptured = true;\n    }\n\n    // If a player captures another player's port while trading we should delete\n    // the ship.\n    if (dstPortOwner.id() === this.srcPort.owner().id()) {\n      this.tradeShip.delete(false);\n      this.active = false;\n      return;\n    }\n\n    if (\n      !this.wasCaptured &&\n      (!this._dstPort.isActive() || !tradeShipOwner.canTrade(dstPortOwner))\n    ) {\n      this.tradeShip.delete(false);\n      this.active = false;\n      return;\n    }\n\n    if (\n      this.wasCaptured &&\n      (tradeShipOwner !== dstPortOwner || !this._dstPort.isActive())\n    ) {\n      const ports = this.tradeShip\n        .owner()\n        .units(UnitType.Port)\n        .sort(distSortUnit(this.mg, this.tradeShip));\n      if (ports.length === 0) {\n        this.tradeShip.delete(false);\n        this.active = false;\n        return;\n      } else {\n        this._dstPort = ports[0];\n        this.tradeShip.setTargetUnit(this._dstPort);\n      }\n    }\n\n    const curTile = this.tradeShip.tile();\n    if (curTile === this.dstPort()) {\n      this.complete();\n      return;\n    }\n\n    const result = this.pathFinder.nextTile(curTile, this._dstPort.tile());\n\n    switch (result.type) {\n      case PathFindResultType.Pending:\n        // Fire unit event to rerender.\n        this.tradeShip.move(curTile);\n        break;\n      case PathFindResultType.NextTile:\n        // Update safeFromPirates status\n        if (this.mg.isWater(result.node) && this.mg.isShoreline(result.node)) {\n          this.tradeShip.setSafeFromPirates();\n        }\n        this.tradeShip.move(result.node);\n        this.tilesTraveled++;\n        break;\n      case PathFindResultType.Completed:\n        this.complete();\n        break;\n      case PathFindResultType.PathNotFound:\n        console.warn(\"captured trade ship cannot find route\");\n        if (this.tradeShip.isActive()) {\n          this.tradeShip.delete(false);\n        }\n        this.active = false;\n        break;\n    }\n  }\n\n  private complete() {\n    this.active = false;\n    this.tradeShip!.delete(false);\n    const gold = this.mg\n      .config()\n      .tradeShipGold(\n        this.tilesTraveled,\n        this.tradeShip!.owner().unitCount(UnitType.Port),\n      );\n\n    if (this.wasCaptured) {\n      this.tradeShip!.owner().addGold(gold, this._dstPort.tile());\n      this.mg.displayMessage(\n        `Received ${renderNumber(gold)} gold from ship captured from ${this.origOwner.displayName()}`,\n        MessageType.CAPTURED_ENEMY_UNIT,\n        this.tradeShip!.owner().id(),\n        gold,\n      );\n      // Record stats\n      this.mg\n        .stats()\n        .boatCapturedTrade(this.tradeShip!.owner(), this.origOwner, gold);\n    } else {\n      this.srcPort.owner().addGold(gold);\n      this._dstPort.owner().addGold(gold, this._dstPort.tile());\n      this.mg.displayMessage(\n        `Received ${renderNumber(gold)} gold from trade with ${this.srcPort.owner().displayName()}`,\n        MessageType.RECEIVED_GOLD_FROM_TRADE,\n        this._dstPort.owner().id(),\n        gold,\n      );\n      this.mg.displayMessage(\n        `Received ${renderNumber(gold)} gold from trade with ${this._dstPort.owner().displayName()}`,\n        MessageType.RECEIVED_GOLD_FROM_TRADE,\n        this.srcPort.owner().id(),\n        gold,\n      );\n      // Record stats\n      this.mg\n        .stats()\n        .boatArriveTrade(this.srcPort.owner(), this._dstPort.owner(), gold);\n    }\n    return;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  dstPort(): TileRef {\n    return this._dstPort.tile();\n  }\n}\n", "import { Execution, Game, Unit, UnitType } from \"../game/Game\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { TradeShipExecution } from \"./TradeShipExecution\";\nimport { TrainStationExecution } from \"./TrainStationExecution\";\n\nexport class PortExecution implements Execution {\n  private active = true;\n  private mg: Game;\n  private port: Unit;\n  private random: PseudoRandom;\n  private checkOffset: number;\n\n  constructor(port: Unit) {\n    this.port = port;\n  }\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    this.random = new PseudoRandom(mg.ticks());\n    this.checkOffset = mg.ticks() % 10;\n  }\n\n  tick(ticks: number): void {\n    if (this.mg === null || this.random === null || this.checkOffset === null) {\n      throw new Error(\"Not initialized\");\n    }\n\n    if (!this.port.isActive()) {\n      this.active = false;\n      return;\n    }\n\n    if (this.port.isUnderConstruction()) {\n      return;\n    }\n\n    if (!this.port.hasTrainStation()) {\n      this.createStation();\n    }\n\n    // Only check every 10 ticks for performance.\n    if ((this.mg.ticks() + this.checkOffset) % 10 !== 0) {\n      return;\n    }\n\n    if (!this.shouldSpawnTradeShip()) {\n      return;\n    }\n\n    const ports = this.tradingPorts();\n\n    if (ports.length === 0) {\n      return;\n    }\n\n    const port = this.random.randElement(ports);\n    this.mg.addExecution(\n      new TradeShipExecution(this.port.owner(), this.port, port),\n    );\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  shouldSpawnTradeShip(): boolean {\n    const numTradeShips = this.mg.unitCount(UnitType.TradeShip);\n    const numPlayerPorts = this.port!.owner().unitCount(UnitType.Port);\n    const numPlayerTradeShips = this.port!.owner().unitCount(\n      UnitType.TradeShip,\n    );\n    const spawnRate = this.mg\n      .config()\n      .tradeShipSpawnRate(numTradeShips, numPlayerPorts, numPlayerTradeShips);\n    for (let i = 0; i < this.port!.level(); i++) {\n      if (this.random.chance(spawnRate)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  createStation(): void {\n    const nearbyFactory = this.mg.hasUnitNearby(\n      this.port.tile()!,\n      this.mg.config().trainStationMaxRange(),\n      UnitType.Factory,\n    );\n    if (nearbyFactory) {\n      this.mg.addExecution(new TrainStationExecution(this.port));\n    }\n  }\n\n  // It's a probability list, so if an element appears twice it's because it's\n  // twice more likely to be picked later.\n  tradingPorts(): Unit[] {\n    const ports = this.mg\n      .players()\n      .filter((p) => p !== this.port!.owner() && p.canTrade(this.port!.owner()))\n      .flatMap((p) => p.units(UnitType.Port))\n      .sort((p1, p2) => {\n        return (\n          this.mg.manhattanDist(this.port!.tile(), p1.tile()) -\n          this.mg.manhattanDist(this.port!.tile(), p2.tile())\n        );\n      });\n\n    const weightedPorts: Unit[] = [];\n\n    for (const [i, otherPort] of ports.entries()) {\n      const expanded = new Array(otherPort.level()).fill(otherPort);\n      weightedPorts.push(...expanded);\n      const tooClose =\n        this.mg.manhattanDist(this.port!.tile(), otherPort.tile()) <\n        this.mg.config().tradeShipShortRangeDebuff();\n      const closeBonus =\n        i < this.mg.config().proximityBonusPortsNb(ports.length);\n      if (!tooClose && closeBonus) {\n        // If the port is close, but not too close, add it again\n        // to increase the chances of trading with it.\n        weightedPorts.push(...expanded);\n      }\n      if (!tooClose && this.port!.owner().isFriendly(otherPort.owner())) {\n        weightedPorts.push(...expanded);\n      }\n    }\n    return weightedPorts;\n  }\n}\n", "import {\n  Execution,\n  Game,\n  MessageType,\n  Player,\n  Unit,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { AirPathFinder } from \"../pathfinding/PathFinding\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { NukeType } from \"../StatsSchemas\";\n\nexport class SAMMissileExecution implements Execution {\n  private active = true;\n  private pathFinder: AirPathFinder;\n  private SAMMissile: Unit | undefined;\n  private mg: Game;\n  private speed: number = 0;\n\n  constructor(\n    private spawn: TileRef,\n    private _owner: Player,\n    private ownerUnit: Unit,\n    private target: Unit,\n    private targetTile: TileRef,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.pathFinder = new AirPathFinder(mg, new PseudoRandom(mg.ticks()));\n    this.mg = mg;\n    this.speed = this.mg.config().defaultSamMissileSpeed();\n  }\n\n  tick(ticks: number): void {\n    this.SAMMissile ??= this._owner.buildUnit(\n      UnitType.SAMMissile,\n      this.spawn,\n      {},\n    );\n    if (!this.SAMMissile.isActive()) {\n      this.active = false;\n      return;\n    }\n    // Mirv warheads are too fast, and mirv shouldn't be stopped ever\n    const nukesWhitelist = [UnitType.AtomBomb, UnitType.HydrogenBomb];\n    if (\n      !this.target.isActive() ||\n      !this.ownerUnit.isActive() ||\n      this.target.owner() === this.SAMMissile.owner() ||\n      !nukesWhitelist.includes(this.target.type())\n    ) {\n      this.SAMMissile.delete(false);\n      this.active = false;\n      return;\n    }\n    for (let i = 0; i < this.speed; i++) {\n      const result = this.pathFinder.nextTile(\n        this.SAMMissile.tile(),\n        this.targetTile,\n      );\n      if (result === true) {\n        this.mg.displayMessage(\n          `Missile intercepted ${this.target.type()}`,\n          MessageType.SAM_HIT,\n          this._owner.id(),\n        );\n        this.active = false;\n        this.target.delete(true, this._owner);\n        this.SAMMissile.delete(false);\n\n        // Record stats\n        this.mg\n          .stats()\n          .bombIntercept(this._owner, this.target.type() as NukeType, 1);\n        return;\n      } else {\n        this.SAMMissile.move(result);\n      }\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import {\n  Execution,\n  Game,\n  isUnit,\n  MessageType,\n  Player,\n  Unit,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { SAMMissileExecution } from \"./SAMMissileExecution\";\n\ntype Target = {\n  unit: Unit;\n  tile: TileRef;\n};\n\ntype InterceptionTile = {\n  tile: TileRef;\n  tick: number;\n};\n\n/**\n * Smart SAM targeting system preshoting nukes so its range is strictly enforced\n */\nclass SAMTargetingSystem {\n  // Interception tiles are computed a single time, but it may not be reachable yet.\n  // Store the result so it can be intercepted at the proper time, rather than recomputing each ticks\n  // Null interception tile means there are no interception tiles in range. Store it to\n  private readonly precomputedNukes: Map<number, InterceptionTile | null> =\n    new Map();\n  private readonly missileSpeed: number;\n\n  constructor(\n    private readonly mg: Game,\n    private readonly sam: Unit,\n  ) {\n    this.missileSpeed = this.mg.config().defaultSamMissileSpeed();\n  }\n\n  updateUnreachableNukes(nearbyUnits: { unit: Unit; distSquared: number }[]) {\n    const nearbyUnitSet = new Set(nearbyUnits.map((u) => u.unit.id()));\n    for (const nukeId of this.precomputedNukes.keys()) {\n      if (!nearbyUnitSet.has(nukeId)) {\n        this.precomputedNukes.delete(nukeId);\n      }\n    }\n  }\n\n  private isInRange(tile: TileRef) {\n    const samTile = this.sam.tile();\n    const range = this.mg.config().samRange(this.sam.level());\n    const rangeSquared = range * range;\n    return this.mg.euclideanDistSquared(samTile, tile) <= rangeSquared;\n  }\n\n  private tickToReach(currentTile: TileRef, tile: TileRef): number {\n    return Math.ceil(\n      this.mg.manhattanDist(currentTile, tile) / this.missileSpeed,\n    );\n  }\n\n  private computeInterceptionTile(unit: Unit): InterceptionTile | undefined {\n    const trajectory = unit.trajectory();\n    const samTile = this.sam.tile();\n    const currentIndex = unit.trajectoryIndex();\n    const explosionTick: number = trajectory.length - currentIndex;\n    for (let i = currentIndex; i < trajectory.length; i++) {\n      const trajectoryTile = trajectory[i];\n      if (trajectoryTile.targetable && this.isInRange(trajectoryTile.tile)) {\n        const nukeTickToReach = i - currentIndex;\n        const samTickToReach = this.tickToReach(samTile, trajectoryTile.tile);\n        const tickBeforeShooting = nukeTickToReach - samTickToReach;\n        if (samTickToReach < explosionTick && tickBeforeShooting >= 0) {\n          return { tick: tickBeforeShooting, tile: trajectoryTile.tile };\n        }\n      }\n    }\n    return undefined;\n  }\n\n  public getSingleTarget(ticks: number): Target | null {\n    // Look beyond the SAM range so it can preshot nukes\n    const detectionRange = this.mg.config().maxSamRange() * 2;\n    const nukes = this.mg.nearbyUnits(\n      this.sam.tile(),\n      detectionRange,\n      [UnitType.AtomBomb, UnitType.HydrogenBomb],\n      ({ unit }) => {\n        return (\n          isUnit(unit) &&\n          unit.owner() !== this.sam.owner() &&\n          !this.sam.owner().isFriendly(unit.owner())\n        );\n      },\n    );\n\n    // Clear unreachable nukes that went out of range\n    this.updateUnreachableNukes(nukes);\n\n    const targets: Array<Target> = [];\n    for (const nuke of nukes) {\n      const nukeId = nuke.unit.id();\n      const cached = this.precomputedNukes.get(nukeId);\n      if (cached !== undefined) {\n        if (cached === null) {\n          // Known unreachable, skip.\n          continue;\n        }\n        if (cached.tick === ticks) {\n          // Time to shoot!\n          targets.push({ tile: cached.tile, unit: nuke.unit });\n          this.precomputedNukes.delete(nukeId);\n          continue;\n        }\n        if (cached.tick > ticks) {\n          // Not due yet, skip for now.\n          continue;\n        }\n        // Missed the planned tick (e.g was on cooldown), recompute a new interception tile if possible\n        this.precomputedNukes.delete(nukeId);\n      }\n      const interceptionTile = this.computeInterceptionTile(nuke.unit);\n      if (interceptionTile !== undefined) {\n        if (interceptionTile.tick <= 1) {\n          // Shoot instantly\n\n          targets.push({ unit: nuke.unit, tile: interceptionTile.tile });\n        } else {\n          // Nuke will be reachable but not yet. Store the result.\n          this.precomputedNukes.set(nukeId, {\n            tick: interceptionTile.tick + ticks,\n            tile: interceptionTile.tile,\n          });\n        }\n      } else {\n        // Store unreachable nukes in order to prevent useless interception computation\n        this.precomputedNukes.set(nukeId, null);\n      }\n    }\n\n    return (\n      targets.sort((a: Target, b: Target) => {\n        // Prioritize Hydrogen Bombs\n        if (\n          a.unit.type() === UnitType.HydrogenBomb &&\n          b.unit.type() !== UnitType.HydrogenBomb\n        )\n          return -1;\n        if (\n          a.unit.type() !== UnitType.HydrogenBomb &&\n          b.unit.type() === UnitType.HydrogenBomb\n        )\n          return 1;\n\n        return 0;\n      })[0] ?? null\n    );\n  }\n}\n\nexport class SAMLauncherExecution implements Execution {\n  private mg: Game;\n  private active: boolean = true;\n\n  // As MIRV go very fast we have to detect them very early but we only\n  // shoot the one targeting very close (MIRVWarheadProtectionRadius)\n  private MIRVWarheadSearchRadius = 400;\n  private MIRVWarheadProtectionRadius = 50;\n  private targetingSystem: SAMTargetingSystem;\n\n  private pseudoRandom: PseudoRandom | undefined;\n\n  constructor(\n    private player: Player,\n    private tile: TileRef | null,\n    private sam: Unit | null = null,\n  ) {\n    if (sam !== null) {\n      this.tile = sam.tile();\n    }\n  }\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n  }\n\n  private isHit(type: UnitType, random: number): boolean {\n    if (type === UnitType.AtomBomb) {\n      return true;\n    }\n\n    if (type === UnitType.MIRVWarhead) {\n      return random < this.mg.config().samWarheadHittingChance();\n    }\n\n    return random < this.mg.config().samHittingChance();\n  }\n\n  tick(ticks: number): void {\n    if (this.mg === null || this.player === null) {\n      throw new Error(\"Not initialized\");\n    }\n    if (this.sam === null) {\n      if (this.tile === null) {\n        throw new Error(\"tile is null\");\n      }\n      const spawnTile = this.player.canBuild(UnitType.SAMLauncher, this.tile);\n      if (spawnTile === false) {\n        console.warn(\"cannot build SAM Launcher\");\n        this.active = false;\n        return;\n      }\n      this.sam = this.player.buildUnit(UnitType.SAMLauncher, spawnTile, {});\n    }\n    this.targetingSystem ??= new SAMTargetingSystem(this.mg, this.sam);\n\n    if (this.sam.isUnderConstruction()) {\n      return;\n    }\n\n    if (this.sam.isInCooldown()) {\n      const frontTime = this.sam.missileTimerQueue()[0];\n      if (frontTime === undefined) {\n        return;\n      }\n      const cooldown =\n        this.mg.config().SAMCooldown() - (this.mg.ticks() - frontTime);\n\n      if (cooldown <= 0) {\n        this.sam.reloadMissile();\n      }\n      return;\n    }\n\n    if (!this.sam.isActive()) {\n      this.active = false;\n      return;\n    }\n\n    if (this.player !== this.sam.owner()) {\n      this.player = this.sam.owner();\n    }\n\n    this.pseudoRandom ??= new PseudoRandom(this.sam.id());\n\n    const mirvWarheadTargets = this.mg.nearbyUnits(\n      this.sam.tile(),\n      this.MIRVWarheadSearchRadius,\n      UnitType.MIRVWarhead,\n      ({ unit }) => {\n        if (!isUnit(unit)) return false;\n        if (unit.owner() === this.player) return false;\n        if (this.player.isFriendly(unit.owner())) return false;\n        const dst = unit.targetTile();\n        return (\n          this.sam !== null &&\n          dst !== undefined &&\n          this.mg.manhattanDist(dst, this.sam.tile()) <\n            this.MIRVWarheadProtectionRadius\n        );\n      },\n    );\n\n    let target: Target | null = null;\n    if (mirvWarheadTargets.length === 0) {\n      target = this.targetingSystem.getSingleTarget(ticks);\n      if (target !== null) {\n        console.log(\"Target acquired\");\n      }\n    }\n\n    const isSingleTarget = target && !target.unit.targetedBySAM();\n    if (isSingleTarget || mirvWarheadTargets.length > 0) {\n      this.sam.launch();\n      const type =\n        mirvWarheadTargets.length > 0\n          ? UnitType.MIRVWarhead\n          : target?.unit.type();\n      if (type === undefined) throw new Error(\"Unknown unit type\");\n      const random = this.pseudoRandom.next();\n      const hit = this.isHit(type, random);\n      if (!hit) {\n        this.mg.displayMessage(\n          `Missile failed to intercept ${type}`,\n          MessageType.SAM_MISS,\n          this.sam.owner().id(),\n        );\n      } else if (mirvWarheadTargets.length > 0) {\n        const samOwner = this.sam.owner();\n\n        // Message\n        this.mg.displayMessage(\n          `${mirvWarheadTargets.length} MIRV warheads intercepted`,\n          MessageType.SAM_HIT,\n          samOwner.id(),\n        );\n\n        mirvWarheadTargets.forEach(({ unit: u }) => {\n          // Delete warheads\n          u.delete();\n        });\n\n        // Record stats\n        this.mg\n          .stats()\n          .bombIntercept(\n            samOwner,\n            UnitType.MIRVWarhead,\n            mirvWarheadTargets.length,\n          );\n      } else if (target !== null) {\n        target.unit.setTargetedBySAM(true);\n        this.mg.addExecution(\n          new SAMMissileExecution(\n            this.sam.tile(),\n            this.sam.owner(),\n            this.sam,\n            target.unit,\n            target.tile,\n          ),\n        );\n      } else {\n        throw new Error(\"target is null\");\n      }\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import {\n  Execution,\n  Game,\n  isUnit,\n  OwnerComp,\n  Unit,\n  UnitParams,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { PathFindResultType } from \"../pathfinding/AStar\";\nimport { PathFinder } from \"../pathfinding/PathFinding\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { ShellExecution } from \"./ShellExecution\";\n\nexport class WarshipExecution implements Execution {\n  private random: PseudoRandom;\n  private warship: Unit;\n  private mg: Game;\n  private pathfinder: PathFinder;\n  private lastShellAttack = 0;\n  private alreadySentShell = new Set<Unit>();\n\n  constructor(\n    private input: (UnitParams<UnitType.Warship> & OwnerComp) | Unit,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    this.pathfinder = PathFinder.Mini(mg, 10_000, true, 100);\n    this.random = new PseudoRandom(mg.ticks());\n    if (isUnit(this.input)) {\n      this.warship = this.input;\n    } else {\n      const spawn = this.input.owner.canBuild(\n        UnitType.Warship,\n        this.input.patrolTile,\n      );\n      if (spawn === false) {\n        console.warn(\n          `Failed to spawn warship for ${this.input.owner.name()} at ${this.input.patrolTile}`,\n        );\n        return;\n      }\n      this.warship = this.input.owner.buildUnit(\n        UnitType.Warship,\n        spawn,\n        this.input,\n      );\n    }\n  }\n\n  tick(ticks: number): void {\n    if (this.warship.health() <= 0) {\n      this.warship.delete();\n      return;\n    }\n\n    const hasPort = this.warship.owner().unitCount(UnitType.Port) > 0;\n    if (hasPort) {\n      this.warship.modifyHealth(1);\n    }\n\n    this.warship.setTargetUnit(this.findTargetUnit());\n    if (this.warship.targetUnit()?.type() === UnitType.TradeShip) {\n      this.huntDownTradeShip();\n      return;\n    }\n\n    this.patrol();\n\n    if (this.warship.targetUnit() !== undefined) {\n      this.shootTarget();\n      return;\n    }\n  }\n\n  private findTargetUnit(): Unit | undefined {\n    const hasPort = this.warship.owner().unitCount(UnitType.Port) > 0;\n    const patrolRangeSquared = this.mg.config().warshipPatrolRange() ** 2;\n\n    const ships = this.mg.nearbyUnits(\n      this.warship.tile()!,\n      this.mg.config().warshipTargettingRange(),\n      [UnitType.TransportShip, UnitType.Warship, UnitType.TradeShip],\n    );\n    const potentialTargets: { unit: Unit; distSquared: number }[] = [];\n    for (const { unit, distSquared } of ships) {\n      if (\n        unit.owner() === this.warship.owner() ||\n        unit === this.warship ||\n        unit.owner().isFriendly(this.warship.owner(), true) ||\n        this.alreadySentShell.has(unit)\n      ) {\n        continue;\n      }\n      if (unit.type() === UnitType.TradeShip) {\n        if (\n          !hasPort ||\n          unit.isSafeFromPirates() ||\n          unit.targetUnit()?.owner() === this.warship.owner() || // trade ship is coming to my port\n          unit.targetUnit()?.owner().isFriendly(this.warship.owner()) // trade ship is coming to my ally\n        ) {\n          continue;\n        }\n        if (\n          this.mg.euclideanDistSquared(\n            this.warship.patrolTile()!,\n            unit.tile(),\n          ) > patrolRangeSquared\n        ) {\n          // Prevent warship from chasing trade ship that is too far away from\n          // the patrol tile to prevent warships from wandering around the map.\n          continue;\n        }\n      }\n      potentialTargets.push({ unit: unit, distSquared });\n    }\n\n    return potentialTargets.sort((a, b) => {\n      const { unit: unitA, distSquared: distA } = a;\n      const { unit: unitB, distSquared: distB } = b;\n\n      // Prioritize Transport Ships above all other units\n      if (\n        unitA.type() === UnitType.TransportShip &&\n        unitB.type() !== UnitType.TransportShip\n      )\n        return -1;\n      if (\n        unitA.type() !== UnitType.TransportShip &&\n        unitB.type() === UnitType.TransportShip\n      )\n        return 1;\n\n      // Then prioritize Warships.\n      if (\n        unitA.type() === UnitType.Warship &&\n        unitB.type() !== UnitType.Warship\n      )\n        return -1;\n      if (\n        unitA.type() !== UnitType.Warship &&\n        unitB.type() === UnitType.Warship\n      )\n        return 1;\n\n      // If both are the same type, sort by distance (lower `distSquared` means closer)\n      return distA - distB;\n    })[0]?.unit;\n  }\n\n  private shootTarget() {\n    const shellAttackRate = this.mg.config().warshipShellAttackRate();\n    if (this.mg.ticks() - this.lastShellAttack > shellAttackRate) {\n      if (this.warship.targetUnit()?.type() !== UnitType.TransportShip) {\n        // Warships don't need to reload when attacking transport ships.\n        this.lastShellAttack = this.mg.ticks();\n      }\n      this.mg.addExecution(\n        new ShellExecution(\n          this.warship.tile(),\n          this.warship.owner(),\n          this.warship,\n          this.warship.targetUnit()!,\n        ),\n      );\n      if (!this.warship.targetUnit()!.hasHealth()) {\n        // Don't send multiple shells to target that can be oneshotted\n        this.alreadySentShell.add(this.warship.targetUnit()!);\n        this.warship.setTargetUnit(undefined);\n        return;\n      }\n    }\n  }\n\n  private huntDownTradeShip() {\n    for (let i = 0; i < 2; i++) {\n      // target is trade ship so capture it.\n      const result = this.pathfinder.nextTile(\n        this.warship.tile(),\n        this.warship.targetUnit()!.tile(),\n        5,\n      );\n      switch (result.type) {\n        case PathFindResultType.Completed:\n          this.warship.owner().captureUnit(this.warship.targetUnit()!);\n          this.warship.setTargetUnit(undefined);\n          this.warship.move(this.warship.tile());\n          return;\n        case PathFindResultType.NextTile:\n          this.warship.move(result.node);\n          break;\n        case PathFindResultType.Pending:\n          this.warship.touch();\n          break;\n        case PathFindResultType.PathNotFound:\n          console.log(`path not found to target`);\n          break;\n      }\n    }\n  }\n\n  private patrol() {\n    if (this.warship.targetTile() === undefined) {\n      this.warship.setTargetTile(this.randomTile());\n      if (this.warship.targetTile() === undefined) {\n        return;\n      }\n    }\n\n    const result = this.pathfinder.nextTile(\n      this.warship.tile(),\n      this.warship.targetTile()!,\n    );\n    switch (result.type) {\n      case PathFindResultType.Completed:\n        this.warship.setTargetTile(undefined);\n        this.warship.move(result.node);\n        break;\n      case PathFindResultType.NextTile:\n        this.warship.move(result.node);\n        break;\n      case PathFindResultType.Pending:\n        this.warship.touch();\n        return;\n      case PathFindResultType.PathNotFound:\n        console.warn(`path not found to target tile`);\n        this.warship.setTargetTile(undefined);\n        break;\n    }\n  }\n\n  isActive(): boolean {\n    return this.warship?.isActive();\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  randomTile(allowShoreline: boolean = false): TileRef | undefined {\n    let warshipPatrolRange = this.mg.config().warshipPatrolRange();\n    const maxAttemptBeforeExpand: number = 500;\n    let attempts: number = 0;\n    let expandCount: number = 0;\n    while (expandCount < 3) {\n      const x =\n        this.mg.x(this.warship.patrolTile()!) +\n        this.random.nextInt(-warshipPatrolRange / 2, warshipPatrolRange / 2);\n      const y =\n        this.mg.y(this.warship.patrolTile()!) +\n        this.random.nextInt(-warshipPatrolRange / 2, warshipPatrolRange / 2);\n      if (!this.mg.isValidCoord(x, y)) {\n        continue;\n      }\n      const tile = this.mg.ref(x, y);\n      if (\n        !this.mg.isOcean(tile) ||\n        (!allowShoreline && this.mg.isShoreline(tile))\n      ) {\n        attempts++;\n        if (attempts === maxAttemptBeforeExpand) {\n          expandCount++;\n          attempts = 0;\n          warshipPatrolRange =\n            warshipPatrolRange + Math.floor(warshipPatrolRange / 2);\n        }\n        continue;\n      }\n      return tile;\n    }\n    console.warn(\n      `Failed to find random tile for warship for ${this.warship.owner().name()}`,\n    );\n    if (!allowShoreline) {\n      // If we failed to find a tile on the ocean, try again but allow shoreline\n      return this.randomTile(true);\n    }\n    return undefined;\n  }\n}\n", "import { Execution, Game, Player, Tick, Unit, UnitType } from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { CityExecution } from \"./CityExecution\";\nimport { DefensePostExecution } from \"./DefensePostExecution\";\nimport { FactoryExecution } from \"./FactoryExecution\";\nimport { MirvExecution } from \"./MIRVExecution\";\nimport { MissileSiloExecution } from \"./MissileSiloExecution\";\nimport { NukeExecution } from \"./NukeExecution\";\nimport { PortExecution } from \"./PortExecution\";\nimport { SAMLauncherExecution } from \"./SAMLauncherExecution\";\nimport { WarshipExecution } from \"./WarshipExecution\";\n\nexport class ConstructionExecution implements Execution {\n  private structure: Unit | null = null;\n  private active: boolean = true;\n  private mg: Game;\n\n  private ticksUntilComplete: Tick;\n\n  constructor(\n    private player: Player,\n    private constructionType: UnitType,\n    private tile: TileRef,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n\n    if (this.mg.config().isUnitDisabled(this.constructionType)) {\n      console.warn(\n        `cannot build construction ${this.constructionType} because it is disabled`,\n      );\n      this.active = false;\n      return;\n    }\n\n    if (!this.mg.isValidRef(this.tile)) {\n      console.warn(`cannot build construction invalid tile ${this.tile}`);\n      this.active = false;\n      return;\n    }\n  }\n\n  tick(ticks: number): void {\n    if (this.structure === null) {\n      const info = this.mg.unitInfo(this.constructionType);\n      // For non-structure units (nukes/warship), charge once and delegate to specialized executions.\n      const isStructure = this.isStructure(this.constructionType);\n      if (!isStructure) {\n        // Defer validation and gold deduction to the specific execution\n        this.completeConstruction();\n        this.active = false;\n        return;\n      }\n\n      // Structures: build real unit and mark under construction\n      const spawnTile = this.player.canBuild(this.constructionType, this.tile);\n      if (spawnTile === false) {\n        console.warn(`cannot build ${this.constructionType}`);\n        this.active = false;\n        return;\n      }\n      this.structure = this.player.buildUnit(\n        this.constructionType,\n        spawnTile,\n        {},\n      );\n      const duration = info.constructionDuration ?? 0;\n      if (duration > 0) {\n        this.structure.setUnderConstruction(true);\n        this.ticksUntilComplete = duration;\n        return;\n      }\n      // No construction time\n      this.completeConstruction();\n      this.active = false;\n      return;\n    }\n\n    if (!this.structure.isActive()) {\n      this.active = false;\n      return;\n    }\n\n    if (this.player !== this.structure.owner()) {\n      this.player = this.structure.owner();\n    }\n\n    if (this.ticksUntilComplete === 0) {\n      this.player = this.structure.owner();\n      this.completeConstruction();\n      this.active = false;\n      return;\n    }\n    this.ticksUntilComplete--;\n  }\n\n  private completeConstruction() {\n    if (this.structure) {\n      this.structure.setUnderConstruction(false);\n    }\n    const player = this.player;\n    switch (this.constructionType) {\n      case UnitType.AtomBomb:\n      case UnitType.HydrogenBomb:\n        this.mg.addExecution(\n          new NukeExecution(this.constructionType, player, this.tile),\n        );\n        break;\n      case UnitType.MIRV:\n        this.mg.addExecution(new MirvExecution(player, this.tile));\n        break;\n      case UnitType.Warship:\n        this.mg.addExecution(\n          new WarshipExecution({ owner: player, patrolTile: this.tile }),\n        );\n        break;\n      case UnitType.Port:\n        this.mg.addExecution(new PortExecution(this.structure!));\n        break;\n      case UnitType.MissileSilo:\n        this.mg.addExecution(new MissileSiloExecution(this.structure!));\n        break;\n      case UnitType.DefensePost:\n        this.mg.addExecution(new DefensePostExecution(this.structure!));\n        break;\n      case UnitType.SAMLauncher:\n        this.mg.addExecution(\n          new SAMLauncherExecution(player, null, this.structure!),\n        );\n        break;\n      case UnitType.City:\n        this.mg.addExecution(new CityExecution(this.structure!));\n        break;\n      case UnitType.Factory:\n        this.mg.addExecution(new FactoryExecution(this.structure!));\n        break;\n      default:\n        console.warn(\n          `unit type ${this.constructionType} cannot be constructed`,\n        );\n        break;\n    }\n  }\n\n  private isStructure(type: UnitType): boolean {\n    switch (type) {\n      case UnitType.Port:\n      case UnitType.MissileSilo:\n      case UnitType.DefensePost:\n      case UnitType.SAMLauncher:\n      case UnitType.City:\n      case UnitType.Factory:\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, MessageType, Player, Unit } from \"../game/Game\";\n\nexport class DeleteUnitExecution implements Execution {\n  private active: boolean = true;\n  private mg: Game;\n  private unit: Unit | null = null;\n\n  constructor(\n    private player: Player,\n    private unitId: number,\n  ) {}\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  init(mg: Game, ticks: number) {\n    if (!this.active) {\n      return;\n    }\n    this.mg = mg;\n\n    const unit = this.player.units().find((u) => u.id() === this.unitId);\n    if (!unit) {\n      console.warn(\n        `SECURITY: unit ${this.unitId} not found or not owned by player ${this.player.displayName()}`,\n      );\n      this.active = false;\n      return;\n    }\n\n    if (!unit.isActive()) {\n      console.warn(`SECURITY: unit ${this.unitId} is not active`);\n      this.active = false;\n      return;\n    }\n    this.unit = unit;\n\n    const tileOwner = mg.owner(unit.tile());\n    if (!tileOwner.isPlayer() || tileOwner.id() !== this.player.id()) {\n      console.warn(\n        `SECURITY: unit ${this.unitId} is not on player's territory`,\n      );\n      this.active = false;\n      return;\n    }\n\n    if (!mg.isLand(unit.tile())) {\n      console.warn(`SECURITY: unit ${this.unitId} is not on land`);\n      this.active = false;\n      return;\n    }\n\n    if (mg.inSpawnPhase()) {\n      console.warn(`SECURITY: cannot delete units during spawn phase`);\n      this.active = false;\n      return;\n    }\n\n    if (!this.player.canDeleteUnit()) {\n      console.warn(`SECURITY: delete unit cooldown not expired`);\n      this.active = false;\n      return;\n    }\n\n    this.player.recordDeleteUnit();\n    unit.markForDeletion();\n  }\n\n  tick(ticks: number) {\n    if (!this.active || !this.unit) {\n      return;\n    }\n    if (!this.unit.isActive()) {\n      this.active = false;\n      return;\n    }\n    if (this.unit.isOverdueDeletion()) {\n      this.unit.delete(false);\n\n      this.mg.displayMessage(\n        `events_display.unit_voluntarily_deleted`,\n        MessageType.UNIT_DESTROYED,\n        this.player.id(),\n      );\n      this.active = false;\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n}\n", "import {\n  Difficulty,\n  Execution,\n  Game,\n  Gold,\n  Player,\n  PlayerID,\n} from \"../game/Game\";\nimport { assertNever, toInt } from \"../Util\";\n\nexport class DonateGoldExecution implements Execution {\n  private recipient: Player;\n  private mg: Game;\n\n  private active = true;\n  private gold: Gold;\n\n  constructor(\n    private sender: Player,\n    private recipientID: PlayerID,\n    goldNum: number | null,\n  ) {\n    this.gold = toInt(goldNum ?? 0);\n  }\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n\n    if (!mg.hasPlayer(this.recipientID)) {\n      console.warn(\n        `DonateGoldExecution recipient ${this.recipientID} not found`,\n      );\n      this.active = false;\n      return;\n    }\n\n    this.recipient = mg.player(this.recipientID);\n    this.gold ??= this.sender.gold() / 3n;\n  }\n\n  tick(ticks: number): void {\n    if (this.gold === null) throw new Error(\"not initialized\");\n    if (\n      this.sender.canDonateGold(this.recipient) &&\n      this.sender.donateGold(this.recipient, this.gold)\n    ) {\n      // Give relation points based on how much gold was donated\n      const relationUpdate = this.calculateRelationUpdate(this.gold, ticks);\n      if (relationUpdate > 0) {\n        this.recipient.updateRelation(this.sender, relationUpdate);\n      }\n    } else {\n      console.warn(\n        `cannot send gold from ${this.sender.name()} to ${this.recipient.name()}`,\n      );\n    }\n    this.active = false;\n  }\n\n  private getGoldChunkSize(): number {\n    const { difficulty } = this.mg.config().gameConfig();\n    switch (difficulty) {\n      case Difficulty.Easy:\n        return 2_500;\n      case Difficulty.Medium:\n        return 5_000;\n      case Difficulty.Hard:\n        return 12_500;\n      case Difficulty.Impossible:\n        return 25_000;\n      default:\n        assertNever(difficulty);\n    }\n  }\n\n  private calculateRelationUpdate(goldSent: Gold, ticks: number): number {\n    const chunkSize = this.getGoldChunkSize();\n    // For every 5 minutes that pass, multiply the chunk size to scale with game progression\n    const chunkSizeMultiplier =\n      ticks / (3000 + this.mg.config().numSpawnPhaseTurns());\n    const adjustedChunkSize = BigInt(\n      Math.round(chunkSize + chunkSize * chunkSizeMultiplier),\n    );\n    // Calculate how many complete chunks were donated\n    const chunks = Number(goldSent / adjustedChunkSize);\n    // Each chunk gives 5 relation points\n    const relationUpdate = chunks * 5;\n    // Cap at 100 relation points\n    if (relationUpdate > 100) return 100;\n    return relationUpdate;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Difficulty, Execution, Game, Player, PlayerID } from \"../game/Game\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { assertNever } from \"../Util\";\n\nexport class DonateTroopsExecution implements Execution {\n  private recipient: Player;\n  private random: PseudoRandom;\n  private mg: Game;\n\n  private active = true;\n\n  constructor(\n    private sender: Player,\n    private recipientID: PlayerID,\n    private troops: number | null,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    this.random = new PseudoRandom(mg.ticks());\n\n    if (!mg.hasPlayer(this.recipientID)) {\n      console.warn(\n        `DonateTroopExecution recipient ${this.recipientID} not found`,\n      );\n      this.active = false;\n      return;\n    }\n\n    this.recipient = mg.player(this.recipientID);\n    this.troops ??= mg.config().defaultDonationAmount(this.sender);\n    const maxDonation =\n      mg.config().maxTroops(this.recipient) - this.recipient.troops();\n    this.troops = Math.min(this.troops, maxDonation);\n  }\n\n  tick(ticks: number): void {\n    if (this.troops === null) throw new Error(\"not initialized\");\n\n    const minTroops = this.getMinTroopsForRelationUpdate();\n\n    if (\n      this.sender.canDonateTroops(this.recipient) &&\n      this.sender.donateTroops(this.recipient, this.troops)\n    ) {\n      // Prevent players from just buying a good relation by sending 1% troops. Instead, a minimum is needed, and it's random.\n      if (this.troops >= minTroops) {\n        this.recipient.updateRelation(this.sender, 50);\n      }\n    } else {\n      console.warn(\n        `cannot send troops from ${this.sender} to ${this.recipient}`,\n      );\n    }\n    this.active = false;\n  }\n\n  private getMinTroopsForRelationUpdate(): number {\n    const { difficulty } = this.mg.config().gameConfig();\n    const recipientMaxTroops = this.mg.config().maxTroops(this.recipient);\n\n    switch (difficulty) {\n      // ~7.7k - ~9.1k troops (for 100k troops)\n      case Difficulty.Easy:\n        return this.random.nextInt(\n          recipientMaxTroops / 13,\n          recipientMaxTroops / 11,\n        );\n      // ~9.1k - ~11.1k troops (for 100k troops)\n      case Difficulty.Medium:\n        return this.random.nextInt(\n          recipientMaxTroops / 11,\n          recipientMaxTroops / 9,\n        );\n      // ~11.1k - ~14.3k troops (for 100k troops)\n      case Difficulty.Hard:\n        return this.random.nextInt(\n          recipientMaxTroops / 9,\n          recipientMaxTroops / 7,\n        );\n      // ~14.3k - ~20k troops (for 100k troops)\n      case Difficulty.Impossible:\n        return this.random.nextInt(\n          recipientMaxTroops / 7,\n          recipientMaxTroops / 5,\n        );\n      default:\n        assertNever(difficulty);\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Player, PlayerType } from \"../game/Game\";\n\nexport class EmbargoAllExecution implements Execution {\n  constructor(\n    private readonly player: Player,\n    private readonly action: \"start\" | \"stop\",\n  ) {}\n\n  init(mg: Game, _: number): void {\n    if (!this.player.canEmbargoAll()) {\n      return;\n    }\n    const me = this.player;\n    for (const p of mg.players()) {\n      if (p.id() === me.id()) continue;\n      if (p.type() === PlayerType.Bot) continue;\n      if (me.isOnSameTeam(p)) continue;\n\n      if (this.action === \"start\") {\n        if (!me.hasEmbargoAgainst(p)) me.addEmbargo(p, false);\n      } else {\n        if (me.hasEmbargoAgainst(p)) me.stopEmbargo(p);\n      }\n    }\n\n    this.player.recordEmbargoAll();\n  }\n\n  tick(_: number): void {}\n\n  isActive(): boolean {\n    return false;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Player, PlayerID } from \"../game/Game\";\n\nexport class EmbargoExecution implements Execution {\n  private active = true;\n\n  private target: Player;\n\n  constructor(\n    private player: Player,\n    private targetID: PlayerID,\n    private readonly action: \"start\" | \"stop\",\n  ) {}\n\n  init(mg: Game, _: number): void {\n    if (!mg.hasPlayer(this.targetID)) {\n      console.warn(`EmbargoExecution recipient ${this.targetID} not found`);\n      this.active = false;\n      return;\n    }\n    this.target = mg.player(this.targetID);\n  }\n\n  tick(_: number): void {\n    if (this.action === \"start\") this.player.addEmbargo(this.target, false);\n    else this.player.stopEmbargo(this.target);\n\n    this.active = false;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Game, Player, Relation, UnitType } from \"../../game/Game\";\nimport { TileRef } from \"../../game/GameMap\";\nimport { closestTile, closestTwoTiles } from \"../Util\";\n\nexport function structureSpawnTileValue(\n  mg: Game,\n  player: Player,\n  type: UnitType,\n): (tile: TileRef) => number {\n  const borderTiles = player.borderTiles();\n  const otherUnits = player.units(type);\n  // Prefer spacing structures out of atom bomb range\n  const borderSpacing = mg.config().nukeMagnitudes(UnitType.AtomBomb).outer;\n  const structureSpacing = borderSpacing * 2;\n  switch (type) {\n    case UnitType.City:\n    case UnitType.Factory:\n    case UnitType.MissileSilo: {\n      return (tile) => {\n        let w = 0;\n\n        // Prefer higher elevations\n        w += mg.magnitude(tile);\n\n        // Prefer to be away from the border\n        const [, closestBorderDist] = closestTile(mg, borderTiles, tile);\n        w += Math.min(closestBorderDist, borderSpacing);\n\n        // Prefer to be away from other structures of the same type\n        const otherTiles: Set<TileRef> = new Set(\n          otherUnits.map((u) => u.tile()),\n        );\n        otherTiles.delete(tile);\n        const closestOther = closestTwoTiles(mg, otherTiles, [tile]);\n        if (closestOther !== null) {\n          const d = mg.manhattanDist(closestOther.x, tile);\n          w += Math.min(d, structureSpacing);\n        }\n\n        // TODO: Cities and factories should consider train range limits\n        return w;\n      };\n    }\n    case UnitType.Port: {\n      return (tile) => {\n        let w = 0;\n\n        // Prefer to be away from other structures of the same type\n        const otherTiles: Set<TileRef> = new Set(\n          otherUnits.map((u) => u.tile()),\n        );\n        otherTiles.delete(tile);\n        const [, closestOtherDist] = closestTile(mg, otherTiles, tile);\n        w += Math.min(closestOtherDist, structureSpacing);\n\n        return w;\n      };\n    }\n    case UnitType.DefensePost: {\n      return (tile) => {\n        let w = 0;\n\n        // Prefer higher elevations\n        w += mg.magnitude(tile);\n\n        const [closest, closestBorderDist] = closestTile(mg, borderTiles, tile);\n        if (closest !== null) {\n          // Prefer to be borderSpacing tiles from the border\n          w += Math.max(\n            0,\n            borderSpacing - Math.abs(borderSpacing - closestBorderDist),\n          );\n\n          // Prefer adjacent players who are hostile\n          const neighbors: Set<Player> = new Set();\n          for (const tile of mg.neighbors(closest)) {\n            if (!mg.isLand(tile)) continue;\n            const id = mg.ownerID(tile);\n            if (id === player.smallID()) continue;\n            const neighbor = mg.playerBySmallID(id);\n            if (!neighbor.isPlayer()) continue;\n            neighbors.add(neighbor);\n          }\n          for (const neighbor of neighbors) {\n            w +=\n              borderSpacing * (Relation.Friendly - player.relation(neighbor));\n          }\n        }\n\n        // Prefer to be away from other structures of the same type\n        const otherTiles: Set<TileRef> = new Set(\n          otherUnits.map((u) => u.tile()),\n        );\n        otherTiles.delete(tile);\n        const closestOther = closestTwoTiles(mg, otherTiles, [tile]);\n        if (closestOther !== null) {\n          const d = mg.manhattanDist(closestOther.x, tile);\n          w += Math.min(d, structureSpacing);\n        }\n\n        return w;\n      };\n    }\n    case UnitType.SAMLauncher: {\n      const protectTiles: Set<TileRef> = new Set();\n      for (const unit of player.units()) {\n        switch (unit.type()) {\n          case UnitType.City:\n          case UnitType.Factory:\n          case UnitType.MissileSilo:\n          case UnitType.Port:\n            protectTiles.add(unit.tile());\n        }\n      }\n      const range = mg.config().defaultSamRange();\n      const rangeSquared = range * range;\n      return (tile) => {\n        let w = 0;\n\n        // Prefer higher elevations\n        w += mg.magnitude(tile);\n\n        // Prefer to be away from the border\n        const closestBorder = closestTwoTiles(mg, borderTiles, [tile]);\n        if (closestBorder !== null) {\n          const d = mg.manhattanDist(closestBorder.x, tile);\n          w += Math.min(d, borderSpacing);\n        }\n\n        // Prefer to be away from other structures of the same type\n        const otherTiles: Set<TileRef> = new Set(\n          otherUnits.map((u) => u.tile()),\n        );\n        otherTiles.delete(tile);\n        const closestOther = closestTwoTiles(mg, otherTiles, [tile]);\n        if (closestOther !== null) {\n          const d = mg.manhattanDist(closestOther.x, tile);\n          w += Math.min(d, structureSpacing);\n        }\n\n        // Prefer to be in range of other structures\n        for (const maybeProtected of protectTiles) {\n          const distanceSquared = mg.euclideanDistSquared(tile, maybeProtected);\n          if (distanceSquared > rangeSquared) continue;\n          w += structureSpacing;\n        }\n\n        return w;\n      };\n    }\n    default:\n      throw new Error(`Value function not implemented for ${type}`);\n  }\n}\n", "import {\n  Difficulty,\n  Game,\n  Player,\n  PlayerType,\n  Relation,\n} from \"../../game/Game\";\nimport { PseudoRandom } from \"../../PseudoRandom\";\nimport { AllianceExtensionExecution } from \"../alliance/AllianceExtensionExecution\";\nimport { AllianceRequestExecution } from \"../alliance/AllianceRequestExecution\";\n\nexport class AllianceBehavior {\n  constructor(\n    private random: PseudoRandom,\n    private game: Game,\n    private player: Player,\n  ) {}\n\n  handleAllianceRequests() {\n    for (const req of this.player.incomingAllianceRequests()) {\n      if (this.getAllianceRequestDecision(req.requestor())) {\n        req.accept();\n      } else {\n        req.reject();\n      }\n    }\n  }\n\n  handleAllianceExtensionRequests() {\n    for (const alliance of this.player.alliances()) {\n      // Alliance expiration tracked by Events Panel, only human ally can click Request to Renew\n      // Skip if no expiration yet/ ally didn't request extension yet / nation already agreed to extend\n      if (!alliance.onlyOneAgreedToExtend()) continue;\n\n      const human = alliance.other(this.player);\n      if (!this.getAllianceRequestDecision(human)) continue;\n\n      this.game.addExecution(\n        new AllianceExtensionExecution(this.player, human.id()),\n      );\n    }\n  }\n\n  maybeSendAllianceRequests(borderingEnemies: Player[]) {\n    // Impossible / smart nations know the strategic value of alliances and thus send more requests\n    const { difficulty } = this.game.config().gameConfig();\n    const shouldSendAllianceRequest = () => {\n      switch (difficulty) {\n        case Difficulty.Easy:\n          return this.random.chance(35);\n        case Difficulty.Medium:\n          return this.random.chance(30);\n        case Difficulty.Hard:\n          return this.random.chance(25);\n        default:\n          return this.random.chance(20);\n      }\n    };\n\n    // Only easy nations are allowed to send alliance requests to bots\n    const isAcceptablePlayerType = (p: Player) =>\n      (p.type() === PlayerType.Bot && difficulty === Difficulty.Easy) ||\n      p.type() !== PlayerType.Bot;\n\n    for (const enemy of borderingEnemies) {\n      if (\n        shouldSendAllianceRequest() &&\n        isAcceptablePlayerType(enemy) &&\n        this.player.canSendAllianceRequest(enemy) &&\n        this.getAllianceRequestDecision(enemy)\n      ) {\n        this.game.addExecution(\n          new AllianceRequestExecution(this.player, enemy.id()),\n        );\n      }\n    }\n  }\n\n  private getAllianceRequestDecision(otherPlayer: Player): boolean {\n    // Easy (dumb) nations sometimes get confused and accept/reject randomly (Just like dumb humans do)\n    if (this.isConfused()) {\n      return this.random.chance(2);\n    }\n    // Nearly always reject traitors\n    if (otherPlayer.isTraitor() && this.random.nextInt(0, 100) >= 10) {\n      return false;\n    }\n    // Before caring about the relation, first check if the otherPlayer is a threat\n    // Easy (dumb) nations are blinded by hatred, they don't care about threats, they care about the relation\n    // Impossible (smart) nations on the other hand are analyzing the facts\n    if (this.isAlliancePartnerThreat(otherPlayer)) {\n      return true;\n    }\n    // Reject if relation is bad\n    if (this.player.relation(otherPlayer) < Relation.Neutral) {\n      return false;\n    }\n    // Maybe accept if relation is friendly\n    if (this.isAlliancePartnerFriendly(otherPlayer)) {\n      return true;\n    }\n    // Reject if we already have some alliances, we don't want to ally with the entire map\n    if (this.checkAlreadyEnoughAlliances(otherPlayer)) {\n      return false;\n    }\n    // Accept if we are similarly strong\n    return this.isAlliancePartnerSimilarlyStrong(otherPlayer);\n  }\n\n  private isConfused(): boolean {\n    const { difficulty } = this.game.config().gameConfig();\n    switch (difficulty) {\n      case Difficulty.Easy:\n        return this.random.chance(10); // 10% chance to be confused on easy\n      case Difficulty.Medium:\n        return this.random.chance(20); // 5% chance to be confused on medium\n      case Difficulty.Hard:\n        return this.random.chance(40); // 2.5% chance to be confused on hard\n      default:\n        return false; // No confusion on impossible\n    }\n  }\n\n  private isAlliancePartnerThreat(otherPlayer: Player): boolean {\n    const { difficulty } = this.game.config().gameConfig();\n    switch (difficulty) {\n      case Difficulty.Easy:\n        // On easy we are very dumb, we don't see anybody as a threat\n        return false;\n      case Difficulty.Medium:\n        // On medium we just see players with much more troops as a threat\n        return otherPlayer.troops() > this.player.troops() * 2.5;\n      case Difficulty.Hard:\n        // On hard we are smarter, we check for maxTroops to see the actual strength\n        return (\n          otherPlayer.troops() > this.player.troops() &&\n          this.game.config().maxTroops(otherPlayer) >\n            this.game.config().maxTroops(this.player) * 2\n        );\n      default: {\n        // On impossible we check for multiple factors and try to not mess with stronger players (we want to steamroll over weaklings)\n        const otherHasMoreTroops =\n          otherPlayer.troops() > this.player.troops() * 1.5;\n        const otherHasMoreMaxTroops =\n          otherPlayer.troops() > this.player.troops() &&\n          this.game.config().maxTroops(otherPlayer) >\n            this.game.config().maxTroops(this.player) * 1.5;\n        const otherHasMoreTiles =\n          otherPlayer.troops() > this.player.troops() &&\n          otherPlayer.numTilesOwned() > this.player.numTilesOwned() * 1.5;\n        return otherHasMoreTroops || otherHasMoreMaxTroops || otherHasMoreTiles;\n      }\n    }\n  }\n\n  private checkAlreadyEnoughAlliances(otherPlayer: Player): boolean {\n    const { difficulty } = this.game.config().gameConfig();\n    switch (difficulty) {\n      case Difficulty.Easy:\n        return false; // On easy we never think we have enough alliances\n      case Difficulty.Medium:\n        return this.player.alliances().length >= this.random.nextInt(5, 8);\n      default: {\n        // On hard and impossible we try to not ally with all our neighbors (If we have 3+ neighbors)\n        const borderingPlayers = this.player\n          .neighbors()\n          .filter(\n            (n): n is Player => n.isPlayer() && n.type() !== PlayerType.Bot,\n          );\n        const borderingFriends = borderingPlayers.filter(\n          (o) => this.player?.isFriendly(o) === true,\n        );\n        if (\n          borderingPlayers.length >= 3 &&\n          borderingPlayers.includes(otherPlayer)\n        ) {\n          return borderingPlayers.length <= borderingFriends.length + 1;\n        }\n        if (difficulty === Difficulty.Hard) {\n          return this.player.alliances().length >= this.random.nextInt(3, 6);\n        }\n        return this.player.alliances().length >= this.random.nextInt(2, 5);\n      }\n    }\n  }\n\n  private isAlliancePartnerFriendly(otherPlayer: Player): boolean {\n    const { difficulty } = this.game.config().gameConfig();\n    switch (difficulty) {\n      case Difficulty.Easy:\n      case Difficulty.Medium:\n        return this.player.relation(otherPlayer) === Relation.Friendly;\n      case Difficulty.Hard:\n        return (\n          this.player.relation(otherPlayer) === Relation.Friendly &&\n          this.random.nextInt(0, 100) >= 17\n        );\n      default:\n        return (\n          this.player.relation(otherPlayer) === Relation.Friendly &&\n          this.random.nextInt(0, 100) >= 33\n        );\n    }\n  }\n\n  // It would make a lot of sense to use nextFloat here, but \"there's a chance floats can cause desyncs\"\n  private isAlliancePartnerSimilarlyStrong(otherPlayer: Player): boolean {\n    const { difficulty } = this.game.config().gameConfig();\n    switch (difficulty) {\n      case Difficulty.Easy:\n        return (\n          otherPlayer.troops() >\n          this.player.troops() * (this.random.nextInt(60, 70) / 100)\n        );\n      case Difficulty.Medium:\n        return (\n          otherPlayer.troops() >\n          this.player.troops() * (this.random.nextInt(70, 80) / 100)\n        );\n      case Difficulty.Hard:\n        return (\n          otherPlayer.troops() >\n          this.player.troops() * (this.random.nextInt(75, 85) / 100)\n        );\n      default:\n        return (\n          otherPlayer.troops() >\n          this.player.troops() * (this.random.nextInt(80, 90) / 100)\n        );\n    }\n  }\n}\n", "import {\n  Cell,\n  Difficulty,\n  Execution,\n  Game,\n  Gold,\n  Nation,\n  Player,\n  PlayerID,\n  PlayerType,\n  Relation,\n  TerrainType,\n  Tick,\n  Unit,\n  UnitType,\n} from \"../game/Game\";\nimport { TileRef, euclDistFN } from \"../game/GameMap\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { GameID } from \"../Schemas\";\nimport { boundingBoxTiles, calculateBoundingBox, simpleHash } from \"../Util\";\nimport { ConstructionExecution } from \"./ConstructionExecution\";\nimport { MirvExecution } from \"./MIRVExecution\";\nimport { structureSpawnTileValue } from \"./nation/structureSpawnTileValue\";\nimport { NukeExecution } from \"./NukeExecution\";\nimport { SpawnExecution } from \"./SpawnExecution\";\nimport { TransportShipExecution } from \"./TransportShipExecution\";\nimport { calculateTerritoryCenter, closestTwoTiles } from \"./Util\";\nimport { AllianceBehavior } from \"./utils/AllianceBehavior\";\nimport { BotBehavior } from \"./utils/BotBehavior\";\n\nexport class FakeHumanExecution implements Execution {\n  private active = true;\n  private random: PseudoRandom;\n  private behavior: BotBehavior | null = null; // Shared behavior logic for both bots and fakehumans\n  private allianceBehavior: AllianceBehavior | null = null;\n  private mg: Game;\n  private player: Player | null = null;\n\n  private attackRate: number;\n  private attackTick: number;\n  private triggerRatio: number;\n  private reserveRatio: number;\n  private expandRatio: number;\n\n  private readonly lastNukeSent: [Tick, TileRef][] = [];\n  private readonly lastMIRVSent: [Tick, TileRef][] = [];\n  private readonly embargoMalusApplied = new Set<PlayerID>();\n\n  // Track our transport ships we currently own\n  private trackedTransportShips: Set<Unit> = new Set();\n  // Track our trade ships we currently own\n  private trackedTradeShips: Set<Unit> = new Set();\n\n  /** MIRV Strategy Constants */\n\n  /** Ticks until MIRV can be attempted again */\n  private static readonly MIRV_COOLDOWN_TICKS = 20;\n\n  /** Odds of aborting a MIRV attempt */\n  private static readonly MIRV_HESITATION_ODDS = 7;\n\n  /** Threshold for team victory denial */\n  private static readonly VICTORY_DENIAL_TEAM_THRESHOLD = 0.8;\n\n  /** Threshold for individual victory denial */\n  private static readonly VICTORY_DENIAL_INDIVIDUAL_THRESHOLD = 0.65;\n\n  /** Multiplier for steamroll city gap threshold */\n  private static readonly STEAMROLL_CITY_GAP_MULTIPLIER = 1.3;\n\n  /** Minimum city count for leader to trigger steam roll detection */\n  private static readonly STEAMROLL_MIN_LEADER_CITIES = 10;\n\n  constructor(\n    gameID: GameID,\n    private nation: Nation, // Nation contains PlayerInfo with PlayerType.FakeHuman\n  ) {\n    this.random = new PseudoRandom(\n      simpleHash(nation.playerInfo.id) + simpleHash(gameID),\n    );\n    this.attackRate = this.random.nextInt(40, 80);\n    this.attackTick = this.random.nextInt(0, this.attackRate);\n    this.triggerRatio = this.random.nextInt(50, 60) / 100;\n    this.reserveRatio = this.random.nextInt(30, 40) / 100;\n    this.expandRatio = this.random.nextInt(10, 20) / 100;\n  }\n\n  init(mg: Game) {\n    this.mg = mg;\n    if (this.random.chance(10)) {\n      // this.isTraitor = true\n    }\n  }\n\n  private updateRelationsFromEmbargos() {\n    const player = this.player;\n    if (player === null) return;\n    const others = this.mg.players().filter((p) => p.id() !== player.id());\n\n    others.forEach((other: Player) => {\n      const embargoMalus = -20;\n      if (\n        other.hasEmbargoAgainst(player) &&\n        !this.embargoMalusApplied.has(other.id())\n      ) {\n        player.updateRelation(other, embargoMalus);\n        this.embargoMalusApplied.add(other.id());\n      } else if (\n        !other.hasEmbargoAgainst(player) &&\n        this.embargoMalusApplied.has(other.id())\n      ) {\n        player.updateRelation(other, -embargoMalus);\n        this.embargoMalusApplied.delete(other.id());\n      }\n    });\n  }\n\n  private handleEmbargoesToHostileNations() {\n    const player = this.player;\n    if (player === null) return;\n    const others = this.mg.players().filter((p) => p.id() !== player.id());\n\n    others.forEach((other: Player) => {\n      /* When player is hostile starts embargo. Do not stop until neutral again */\n      if (\n        player.relation(other) <= Relation.Hostile &&\n        !player.hasEmbargoAgainst(other) &&\n        !player.isOnSameTeam(other)\n      ) {\n        player.addEmbargo(other, false);\n      } else if (\n        player.relation(other) >= Relation.Neutral &&\n        player.hasEmbargoAgainst(other)\n      ) {\n        player.stopEmbargo(other);\n      }\n    });\n  }\n\n  tick(ticks: number) {\n    // Ship tracking\n    if (\n      this.player !== null &&\n      this.player.isAlive() &&\n      this.mg.config().gameConfig().difficulty !== Difficulty.Easy\n    ) {\n      this.trackTransportShipsAndRetaliate();\n      this.trackTradeShipsAndRetaliate();\n    }\n\n    if (ticks % this.attackRate !== this.attackTick) {\n      return;\n    }\n\n    if (this.mg.inSpawnPhase()) {\n      const rl = this.randomSpawnLand();\n      if (rl === null) {\n        console.warn(`cannot spawn ${this.nation.playerInfo.name}`);\n        return;\n      }\n      this.mg.addExecution(new SpawnExecution(this.nation.playerInfo, rl));\n      return;\n    }\n\n    if (this.player === null) {\n      this.player =\n        this.mg.players().find((p) => p.id() === this.nation.playerInfo.id) ??\n        null;\n      if (this.player === null) {\n        return;\n      }\n    }\n\n    if (!this.player.isAlive()) {\n      this.active = false;\n      return;\n    }\n\n    if (this.behavior === null || this.allianceBehavior === null) {\n      // Player is unavailable during init()\n      this.behavior = new BotBehavior(\n        this.random,\n        this.mg,\n        this.player,\n        this.triggerRatio,\n        this.reserveRatio,\n        this.expandRatio,\n      );\n      this.allianceBehavior = new AllianceBehavior(\n        this.random,\n        this.mg,\n        this.player,\n      );\n\n      // Send an attack on the first tick\n      this.behavior.forceSendAttack(this.mg.terraNullius());\n      return;\n    }\n\n    this.updateRelationsFromEmbargos();\n    this.allianceBehavior.handleAllianceRequests();\n    this.allianceBehavior.handleAllianceExtensionRequests();\n    this.handleUnits();\n    this.handleEmbargoesToHostileNations();\n    this.considerMIRV();\n    this.maybeAttack();\n  }\n\n  private maybeAttack() {\n    if (\n      this.player === null ||\n      this.behavior === null ||\n      this.allianceBehavior === null\n    ) {\n      throw new Error(\"not initialized\");\n    }\n\n    const border = Array.from(this.player.borderTiles())\n      .flatMap((t) => this.mg.neighbors(t))\n      .filter(\n        (t) =>\n          this.mg.isLand(t) && this.mg.ownerID(t) !== this.player?.smallID(),\n      );\n    const borderingPlayers = [\n      ...new Set(\n        border\n          .map((t) => this.mg.playerBySmallID(this.mg.ownerID(t)))\n          .filter((o): o is Player => o.isPlayer()),\n      ),\n    ].sort((a, b) => a.troops() - b.troops());\n    const borderingFriends = borderingPlayers.filter(\n      (o) => this.player?.isFriendly(o) === true,\n    );\n    const borderingEnemies = borderingPlayers.filter(\n      (o) => this.player?.isFriendly(o) === false,\n    );\n\n    // Attack TerraNullius but not nuked territory\n    const hasNonNukedTerraNullius = border.some(\n      (t) => !this.mg.hasOwner(t) && !this.mg.hasFallout(t),\n    );\n    if (hasNonNukedTerraNullius) {\n      this.behavior.sendAttack(this.mg.terraNullius());\n      return;\n    }\n\n    if (borderingEnemies.length === 0) {\n      if (this.random.chance(5)) {\n        this.sendBoatRandomly();\n      }\n    } else {\n      if (this.random.chance(10)) {\n        this.sendBoatRandomly(borderingEnemies);\n        return;\n      }\n\n      this.allianceBehavior.maybeSendAllianceRequests(borderingEnemies);\n    }\n\n    this.behavior.assistAllies();\n\n    this.behavior.attackBestTarget(borderingFriends, borderingEnemies);\n\n    this.maybeSendNuke(this.behavior.findBestNukeTarget(borderingEnemies));\n  }\n\n  private maybeSendNuke(other: Player | null) {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const silos = this.player.units(UnitType.MissileSilo);\n    if (\n      silos.length === 0 ||\n      this.player.gold() < this.cost(UnitType.AtomBomb) ||\n      other === null ||\n      other.type() === PlayerType.Bot || // Don't nuke bots (as opposed to fakehumans and humans)\n      this.player.isOnSameTeam(other)\n    ) {\n      return;\n    }\n\n    const nukeType =\n      this.player.gold() > this.cost(UnitType.HydrogenBomb)\n        ? UnitType.HydrogenBomb\n        : UnitType.AtomBomb;\n    const range = nukeType === UnitType.HydrogenBomb ? 60 : 15;\n\n    const structures = other.units(\n      UnitType.City,\n      UnitType.DefensePost,\n      UnitType.MissileSilo,\n      UnitType.Port,\n      UnitType.SAMLauncher,\n    );\n    const structureTiles = structures.map((u) => u.tile());\n    const randomTiles = this.randTerritoryTileArray(10);\n    const allTiles = randomTiles.concat(structureTiles);\n\n    let bestTile: TileRef | null = null;\n    let bestValue = 0;\n    this.removeOldNukeEvents();\n    outer: for (const tile of new Set(allTiles)) {\n      if (tile === null) continue;\n      const boundingBox = boundingBoxTiles(this.mg, tile, range)\n        // Add radius / 2 in case there is a piece of unwanted territory inside the outer radius that we miss.\n        .concat(boundingBoxTiles(this.mg, tile, Math.floor(range / 2)));\n      for (const t of boundingBox) {\n        // Make sure we nuke away from the border\n        if (this.mg.owner(t) !== other) {\n          continue outer;\n        }\n      }\n      if (!this.player.canBuild(nukeType, tile)) continue;\n      const value = this.nukeTileScore(tile, silos, structures);\n      if (value > bestValue) {\n        bestTile = tile;\n        bestValue = value;\n      }\n    }\n    if (bestTile !== null) {\n      this.sendNuke(bestTile, nukeType, other);\n    }\n  }\n\n  private removeOldNukeEvents() {\n    const maxAge = 500;\n    const tick = this.mg.ticks();\n    while (\n      this.lastNukeSent.length > 0 &&\n      this.lastNukeSent[0][0] + maxAge < tick\n    ) {\n      this.lastNukeSent.shift();\n    }\n  }\n\n  private sendNuke(\n    tile: TileRef,\n    nukeType: UnitType.AtomBomb | UnitType.HydrogenBomb,\n    targetPlayer: Player,\n  ) {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const tick = this.mg.ticks();\n    this.lastNukeSent.push([tick, tile]);\n    this.mg.addExecution(new NukeExecution(nukeType, this.player, tile));\n    this.behavior?.maybeSendEmoji(targetPlayer);\n  }\n\n  private nukeTileScore(tile: TileRef, silos: Unit[], targets: Unit[]): number {\n    // Potential damage in a 25-tile radius\n    const dist = euclDistFN(tile, 25, false);\n    let tileValue = targets\n      .filter((unit) => dist(this.mg, unit.tile()))\n      .map((unit): number => {\n        switch (unit.type()) {\n          case UnitType.City:\n            return 25_000;\n          case UnitType.DefensePost:\n            return 5_000;\n          case UnitType.MissileSilo:\n            return 50_000;\n          case UnitType.Port:\n            return 10_000;\n          default:\n            return 0;\n        }\n      })\n      .reduce((prev, cur) => prev + cur, 0);\n\n    // Avoid areas defended by SAM launchers\n    const dist50 = euclDistFN(tile, 50, false);\n    tileValue -=\n      50_000 *\n      targets.filter(\n        (unit) =>\n          unit.type() === UnitType.SAMLauncher && dist50(this.mg, unit.tile()),\n      ).length;\n\n    // Prefer tiles that are closer to a silo\n    const siloTiles = silos.map((u) => u.tile());\n    const result = closestTwoTiles(this.mg, siloTiles, [tile]);\n    if (result === null) throw new Error(\"Missing result\");\n    const { x: closestSilo } = result;\n    const distanceSquared = this.mg.euclideanDistSquared(tile, closestSilo);\n    const distanceToClosestSilo = Math.sqrt(distanceSquared);\n    tileValue -= distanceToClosestSilo * 30;\n\n    // Don't target near recent targets\n    tileValue -= this.lastNukeSent\n      .filter(([_tick, tile]) => dist(this.mg, tile))\n      .map((_) => 1_000_000)\n      .reduce((prev, cur) => prev + cur, 0);\n\n    return tileValue;\n  }\n\n  private handleUnits() {\n    return (\n      this.maybeSpawnStructure(UnitType.City, (num) => num) ||\n      this.maybeSpawnStructure(UnitType.Port, (num) => num) ||\n      this.maybeSpawnWarship() ||\n      this.maybeSpawnStructure(UnitType.Factory, (num) => num) ||\n      this.maybeSpawnStructure(UnitType.DefensePost, (num) => (num + 2) ** 2) ||\n      this.maybeSpawnStructure(UnitType.SAMLauncher, (num) => num ** 2) ||\n      this.maybeSpawnStructure(UnitType.MissileSilo, (num) => num ** 2)\n    );\n  }\n\n  private maybeSpawnStructure(\n    type: UnitType,\n    multiplier: (num: number) => number,\n  ) {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const owned = this.player.unitsOwned(type);\n    const perceivedCostMultiplier = multiplier(owned + 1);\n    const realCost = this.cost(type);\n    const perceivedCost = realCost * BigInt(perceivedCostMultiplier);\n    if (this.player.gold() < perceivedCost) {\n      return false;\n    }\n    const tile = this.structureSpawnTile(type);\n    if (tile === null) {\n      return false;\n    }\n    const canBuild = this.player.canBuild(type, tile);\n    if (canBuild === false) {\n      return false;\n    }\n    this.mg.addExecution(new ConstructionExecution(this.player, type, tile));\n    return true;\n  }\n\n  private structureSpawnTile(type: UnitType): TileRef | null {\n    if (this.mg === undefined) throw new Error(\"Not initialized\");\n    if (this.player === null) throw new Error(\"Not initialized\");\n    const tiles =\n      type === UnitType.Port\n        ? this.randCoastalTileArray(25)\n        : this.randTerritoryTileArray(25);\n    if (tiles.length === 0) return null;\n    const valueFunction = structureSpawnTileValue(this.mg, this.player, type);\n    let bestTile: TileRef | null = null;\n    let bestValue = 0;\n    for (const t of tiles) {\n      const v = valueFunction(t);\n      if (v <= bestValue && bestTile !== null) continue;\n      if (!this.player.canBuild(type, t)) continue;\n      // Found a better tile\n      bestTile = t;\n      bestValue = v;\n    }\n    return bestTile;\n  }\n\n  private randCoastalTileArray(numTiles: number): TileRef[] {\n    const tiles = Array.from(this.player!.borderTiles()).filter((t) =>\n      this.mg.isOceanShore(t),\n    );\n    return Array.from(this.arraySampler(tiles, numTiles));\n  }\n\n  private *arraySampler<T>(a: T[], sampleSize: number): Generator<T> {\n    if (a.length <= sampleSize) {\n      // Return all elements\n      yield* a;\n    } else {\n      // Sample `sampleSize` elements\n      const remaining = new Set<T>(a);\n      while (sampleSize--) {\n        const t = this.random.randFromSet(remaining);\n        remaining.delete(t);\n        yield t;\n      }\n    }\n  }\n\n  private maybeSpawnWarship(): boolean {\n    if (this.player === null) throw new Error(\"not initialized\");\n    if (!this.random.chance(50)) {\n      return false;\n    }\n    const ports = this.player.units(UnitType.Port);\n    const ships = this.player.units(UnitType.Warship);\n    if (\n      ports.length > 0 &&\n      ships.length === 0 &&\n      this.player.gold() > this.cost(UnitType.Warship)\n    ) {\n      const port = this.random.randElement(ports);\n      const targetTile = this.warshipSpawnTile(port.tile());\n      if (targetTile === null) {\n        return false;\n      }\n      const canBuild = this.player.canBuild(UnitType.Warship, targetTile);\n      if (canBuild === false) {\n        console.warn(\"cannot spawn destroyer\");\n        return false;\n      }\n      this.mg.addExecution(\n        new ConstructionExecution(this.player, UnitType.Warship, targetTile),\n      );\n      return true;\n    }\n    return false;\n  }\n\n  private randTerritoryTileArray(numTiles: number): TileRef[] {\n    const boundingBox = calculateBoundingBox(\n      this.mg,\n      this.player!.borderTiles(),\n    );\n    const tiles: TileRef[] = [];\n    for (let i = 0; i < numTiles; i++) {\n      const tile = this.randTerritoryTile(this.player!, boundingBox);\n      if (tile !== null) {\n        tiles.push(tile);\n      }\n    }\n    return tiles;\n  }\n\n  private randTerritoryTile(\n    p: Player,\n    boundingBox: { min: Cell; max: Cell } | null = null,\n  ): TileRef | null {\n    boundingBox ??= calculateBoundingBox(this.mg, p.borderTiles());\n    for (let i = 0; i < 100; i++) {\n      const randX = this.random.nextInt(boundingBox.min.x, boundingBox.max.x);\n      const randY = this.random.nextInt(boundingBox.min.y, boundingBox.max.y);\n      if (!this.mg.isOnMap(new Cell(randX, randY))) {\n        // Sanity check should never happen\n        continue;\n      }\n      const randTile = this.mg.ref(randX, randY);\n      if (this.mg.owner(randTile) === p) {\n        return randTile;\n      }\n    }\n    return null;\n  }\n\n  private warshipSpawnTile(portTile: TileRef): TileRef | null {\n    const radius = 250;\n    for (let attempts = 0; attempts < 50; attempts++) {\n      const randX = this.random.nextInt(\n        this.mg.x(portTile) - radius,\n        this.mg.x(portTile) + radius,\n      );\n      const randY = this.random.nextInt(\n        this.mg.y(portTile) - radius,\n        this.mg.y(portTile) + radius,\n      );\n      if (!this.mg.isValidCoord(randX, randY)) {\n        continue;\n      }\n      const tile = this.mg.ref(randX, randY);\n      // Sanity check\n      if (!this.mg.isOcean(tile)) {\n        continue;\n      }\n      return tile;\n    }\n    return null;\n  }\n\n  private cost(type: UnitType): Gold {\n    if (this.player === null) throw new Error(\"not initialized\");\n    return this.mg.unitInfo(type).cost(this.mg, this.player);\n  }\n\n  sendBoatRandomly(borderingEnemies: Player[] = []) {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const oceanShore = Array.from(this.player.borderTiles()).filter((t) =>\n      this.mg.isOceanShore(t),\n    );\n    if (oceanShore.length === 0) {\n      return;\n    }\n\n    const src = this.random.randElement(oceanShore);\n\n    // First look for high-interest targets (unowned or bot-owned). Mainly relevant for earlygame\n    let dst = this.randomBoatTarget(src, borderingEnemies, true);\n    if (dst === null) {\n      // None found? Then look for players\n      dst = this.randomBoatTarget(src, borderingEnemies, false);\n      if (dst === null) {\n        return;\n      }\n    }\n\n    this.mg.addExecution(\n      new TransportShipExecution(\n        this.player,\n        this.mg.owner(dst).id(),\n        dst,\n        this.player.troops() / 5,\n        null,\n      ),\n    );\n    return;\n  }\n\n  randomSpawnLand(): TileRef | null {\n    const delta = 25;\n    let tries = 0;\n    while (tries < 50) {\n      tries++;\n      const cell = this.nation.spawnCell;\n      const x = this.random.nextInt(cell.x - delta, cell.x + delta);\n      const y = this.random.nextInt(cell.y - delta, cell.y + delta);\n      if (!this.mg.isValidCoord(x, y)) {\n        continue;\n      }\n      const tile = this.mg.ref(x, y);\n      if (this.mg.isLand(tile) && !this.mg.hasOwner(tile)) {\n        if (\n          this.mg.terrainType(tile) === TerrainType.Mountain &&\n          this.random.chance(2)\n        ) {\n          continue;\n        }\n        return tile;\n      }\n    }\n    return null;\n  }\n\n  private randomBoatTarget(\n    tile: TileRef,\n    borderingEnemies: Player[],\n    highInterestOnly: boolean = false,\n  ): TileRef | null {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const x = this.mg.x(tile);\n    const y = this.mg.y(tile);\n    for (let i = 0; i < 500; i++) {\n      const randX = this.random.nextInt(x - 150, x + 150);\n      const randY = this.random.nextInt(y - 150, y + 150);\n      if (!this.mg.isValidCoord(randX, randY)) {\n        continue;\n      }\n      const randTile = this.mg.ref(randX, randY);\n      if (!this.mg.isLand(randTile)) {\n        continue;\n      }\n      const owner = this.mg.owner(randTile);\n      if (owner === this.player) {\n        continue;\n      }\n      // Don't send boats to players with which we share a border, that usually looks stupid\n      if (owner.isPlayer() && borderingEnemies.includes(owner)) {\n        continue;\n      }\n      // Don't spam boats into players that are more than twice as large as us\n      if (owner.isPlayer() && owner.troops() > this.player.troops() * 2) {\n        continue;\n      }\n      // High-interest targeting: prioritize unowned tiles or tiles owned by bots\n      if (highInterestOnly) {\n        if (!owner.isPlayer() || owner.type() === PlayerType.Bot) {\n          return randTile;\n        }\n      } else {\n        // Normal targeting: return unowned tiles or tiles owned by non-friendly players\n        if (!owner.isPlayer() || !owner.isFriendly(this.player)) {\n          return randTile;\n        }\n      }\n    }\n    return null;\n  }\n\n  // MIRV Strategy Methods\n  private considerMIRV(): boolean {\n    if (this.player === null) throw new Error(\"not initialized\");\n    if (this.player.units(UnitType.MissileSilo).length === 0) {\n      return false;\n    }\n    if (this.player.gold() < this.cost(UnitType.MIRV)) {\n      return false;\n    }\n\n    this.removeOldMIRVEvents();\n    if (this.lastMIRVSent.length > 0) {\n      return false;\n    }\n\n    if (this.random.chance(FakeHumanExecution.MIRV_HESITATION_ODDS)) {\n      this.triggerMIRVCooldown();\n      return false;\n    }\n\n    const inboundMIRVSender = this.selectCounterMirvTarget();\n    if (inboundMIRVSender) {\n      this.maybeSendMIRV(inboundMIRVSender);\n      return true;\n    }\n\n    const victoryDenialTarget = this.selectVictoryDenialTarget();\n    if (victoryDenialTarget) {\n      this.maybeSendMIRV(victoryDenialTarget);\n      return true;\n    }\n\n    const steamrollStopTarget = this.selectSteamrollStopTarget();\n    if (steamrollStopTarget) {\n      this.maybeSendMIRV(steamrollStopTarget);\n      return true;\n    }\n\n    return false;\n  }\n\n  private selectCounterMirvTarget(): Player | null {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const attackers = this.getValidMirvTargetPlayers().filter((p) =>\n      this.isInboundMIRVFrom(p),\n    );\n    if (attackers.length === 0) return null;\n    attackers.sort((a, b) => b.numTilesOwned() - a.numTilesOwned());\n    return attackers[0];\n  }\n\n  private selectVictoryDenialTarget(): Player | null {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const totalLand = this.mg.numLandTiles();\n    if (totalLand === 0) return null;\n    let best: { p: Player; severity: number } | null = null;\n    for (const p of this.getValidMirvTargetPlayers()) {\n      let severity = 0;\n      const team = p.team();\n      if (team !== null) {\n        const teamMembers = this.mg\n          .players()\n          .filter((x) => x.team() === team && x.isPlayer());\n        const teamTerritory = teamMembers\n          .map((x) => x.numTilesOwned())\n          .reduce((a, b) => a + b, 0);\n        const teamShare = teamTerritory / totalLand;\n        if (teamShare >= FakeHumanExecution.VICTORY_DENIAL_TEAM_THRESHOLD) {\n          // Only consider the largest team member as the target when team exceeds threshold\n          let largestMember: Player | null = null;\n          let largestTiles = -1;\n          for (const member of teamMembers) {\n            const tiles = member.numTilesOwned();\n            if (tiles > largestTiles) {\n              largestTiles = tiles;\n              largestMember = member;\n            }\n          }\n          if (largestMember === p) {\n            severity = teamShare;\n          } else {\n            severity = 0; // Skip non-largest members\n          }\n        }\n      } else {\n        const share = p.numTilesOwned() / totalLand;\n        if (share >= FakeHumanExecution.VICTORY_DENIAL_INDIVIDUAL_THRESHOLD)\n          severity = share;\n      }\n      if (severity > 0) {\n        if (best === null || severity > best.severity) best = { p, severity };\n      }\n    }\n    return best ? best.p : null;\n  }\n\n  private selectSteamrollStopTarget(): Player | null {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const validTargets = this.getValidMirvTargetPlayers();\n\n    if (validTargets.length === 0) return null;\n\n    const allPlayers = this.mg\n      .players()\n      .filter((p) => p.isPlayer())\n      .map((p) => ({ p, cityCount: this.countCities(p) }))\n      .sort((a, b) => b.cityCount - a.cityCount);\n\n    if (allPlayers.length < 2) return null;\n\n    const topPlayer = allPlayers[0];\n\n    if (topPlayer.cityCount <= FakeHumanExecution.STEAMROLL_MIN_LEADER_CITIES)\n      return null;\n\n    const secondHighest = allPlayers[1].cityCount;\n\n    const threshold =\n      secondHighest * FakeHumanExecution.STEAMROLL_CITY_GAP_MULTIPLIER;\n\n    if (topPlayer.cityCount >= threshold) {\n      return validTargets.some((p) => p === topPlayer.p) ? topPlayer.p : null;\n    }\n\n    return null;\n  }\n\n  // MIRV Helper Methods\n  private mirvTargetsCache: {\n    tick: number;\n    players: Player[];\n  } | null = null;\n\n  private getValidMirvTargetPlayers(): Player[] {\n    const MIRV_TARGETS_CACHE_TICKS = 2 * 10; // 2 seconds\n    if (this.player === null) throw new Error(\"not initialized\");\n\n    if (\n      this.mirvTargetsCache &&\n      this.mg.ticks() - this.mirvTargetsCache.tick < MIRV_TARGETS_CACHE_TICKS\n    ) {\n      return this.mirvTargetsCache.players;\n    }\n\n    const players = this.mg.players().filter((p) => {\n      return (\n        p !== this.player &&\n        p.isPlayer() &&\n        p.type() !== PlayerType.Bot &&\n        !this.player!.isOnSameTeam(p)\n      );\n    });\n\n    this.mirvTargetsCache = { tick: this.mg.ticks(), players };\n    return players;\n  }\n\n  private isInboundMIRVFrom(attacker: Player): boolean {\n    if (this.player === null) throw new Error(\"not initialized\");\n    const enemyMirvs = attacker.units(UnitType.MIRV);\n    for (const mirv of enemyMirvs) {\n      const dst = mirv.targetTile();\n      if (!dst) continue;\n      if (!this.mg.hasOwner(dst)) continue;\n      const owner = this.mg.owner(dst);\n      if (owner === this.player) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private countCities(p: Player): number {\n    return p.unitCount(UnitType.City);\n  }\n\n  private calculateTerritoryCenter(target: Player): TileRef | null {\n    return calculateTerritoryCenter(this.mg, target);\n  }\n\n  // MIRV Execution Methods\n  private maybeSendMIRV(enemy: Player): void {\n    if (this.player === null) throw new Error(\"not initialized\");\n\n    this.behavior?.maybeSendEmoji(enemy);\n\n    const centerTile = this.calculateTerritoryCenter(enemy);\n    if (centerTile && this.player.canBuild(UnitType.MIRV, centerTile)) {\n      this.sendMIRV(centerTile);\n      return;\n    }\n  }\n\n  private sendMIRV(tile: TileRef): void {\n    if (this.player === null) throw new Error(\"not initialized\");\n    this.triggerMIRVCooldown(tile);\n    this.mg.addExecution(new MirvExecution(this.player, tile));\n  }\n\n  private triggerMIRVCooldown(tile?: TileRef): void {\n    if (this.player === null) throw new Error(\"not initialized\");\n    this.removeOldMIRVEvents();\n    const tick = this.mg.ticks();\n    // Use provided tile or any tile from player's territory for cooldown tracking\n    const cooldownTile =\n      tile ?? Array.from(this.player.tiles())[0] ?? this.mg.ref(0, 0);\n    this.lastMIRVSent.push([tick, cooldownTile]);\n  }\n\n  private removeOldMIRVEvents() {\n    const maxAge = FakeHumanExecution.MIRV_COOLDOWN_TICKS;\n    const tick = this.mg.ticks();\n    while (\n      this.lastMIRVSent.length > 0 &&\n      this.lastMIRVSent[0][0] + maxAge <= tick\n    ) {\n      this.lastMIRVSent.shift();\n    }\n  }\n\n  // Send out a warship if our transport ship got captured\n  private trackTransportShipsAndRetaliate(): void {\n    if (this.player === null) return;\n\n    // Add any currently owned transport ships to our tracking set\n    this.player\n      .units(UnitType.TransportShip)\n      .forEach((u) => this.trackedTransportShips.add(u));\n\n    // Iterate tracked transport ships; if it got destroyed by an enemy: retaliate\n    for (const ship of Array.from(this.trackedTransportShips)) {\n      if (!ship.isActive()) {\n        // Distinguish between arrival/retreat and enemy destruction\n        if (ship.wasDestroyedByEnemy()) {\n          this.maybeRetaliateWithWarship(ship.tile());\n        }\n        this.trackedTransportShips.delete(ship);\n      }\n    }\n  }\n\n  // Send out a warship if our trade ship got captured\n  private trackTradeShipsAndRetaliate(): void {\n    if (this.player === null) return;\n\n    // Add any currently owned trade ships to our tracking map\n    this.player\n      .units(UnitType.TradeShip)\n      .forEach((u) => this.trackedTradeShips.add(u));\n\n    // Iterate tracked trade ships; if we no longer own it, it was captured: retaliate\n    for (const ship of Array.from(this.trackedTradeShips)) {\n      if (!ship.isActive()) {\n        this.trackedTradeShips.delete(ship);\n        continue;\n      }\n      if (ship.owner().id() !== this.player.id()) {\n        // Ship was ours and is now owned by someone else -> captured\n        this.maybeRetaliateWithWarship(ship.tile());\n        this.trackedTradeShips.delete(ship);\n      }\n    }\n  }\n\n  private maybeRetaliateWithWarship(tile: TileRef): void {\n    if (this.player === null) return;\n\n    const { difficulty } = this.mg.config().gameConfig();\n    // In Easy never retaliate. In Medium retaliate with 15% chance. Hard with 50%, Impossible with 80%.\n    if (\n      (difficulty === Difficulty.Medium && this.random.nextInt(0, 100) < 15) ||\n      (difficulty === Difficulty.Hard && this.random.nextInt(0, 100) < 50) ||\n      (difficulty === Difficulty.Impossible && this.random.nextInt(0, 100) < 80)\n    ) {\n      const canBuild = this.player.canBuild(UnitType.Warship, tile);\n      if (canBuild === false) {\n        return;\n      }\n      this.mg.addExecution(\n        new ConstructionExecution(this.player, UnitType.Warship, tile),\n      );\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return true;\n  }\n}\n", "import { Execution, Game, Player } from \"../game/Game\";\n\nexport class MarkDisconnectedExecution implements Execution {\n  constructor(\n    private player: Player,\n    private isDisconnected: boolean,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.player.markDisconnected(this.isDisconnected);\n  }\n\n  tick(ticks: number): void {\n    return;\n  }\n\n  isActive(): boolean {\n    return false;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Player, UnitType } from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\n\nexport class MoveWarshipExecution implements Execution {\n  constructor(\n    private readonly owner: Player,\n    private readonly unitId: number,\n    private readonly position: TileRef,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    if (!mg.isValidRef(this.position)) {\n      console.warn(`MoveWarshipExecution: position ${this.position} not valid`);\n      return;\n    }\n    const warship = this.owner\n      .units(UnitType.Warship)\n      .find((u) => u.id() === this.unitId);\n    if (!warship) {\n      console.warn(\"MoveWarshipExecution: warship not found\");\n      return;\n    }\n    if (!warship.isActive()) {\n      console.warn(\"MoveWarshipExecution: warship is not active\");\n      return;\n    }\n    warship.setPatrolTile(this.position);\n    warship.setTargetTile(undefined);\n  }\n\n  tick(ticks: number): void {}\n\n  isActive(): boolean {\n    return false;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game } from \"../game/Game\";\n\nexport class NoOpExecution implements Execution {\n  isActive(): boolean {\n    return false;\n  }\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n  init(mg: Game, ticks: number): void {}\n  tick(ticks: number): void {}\n}\n", "import { Execution, Game, Player, PlayerID } from \"../game/Game\";\n\nexport class QuickChatExecution implements Execution {\n  private recipient: Player;\n  private mg: Game;\n\n  private active = true;\n\n  constructor(\n    private sender: Player,\n    private recipientID: PlayerID,\n    private quickChatKey: string,\n    private target: PlayerID | undefined,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    if (!mg.hasPlayer(this.recipientID)) {\n      console.warn(\n        `QuickChatExecution: recipient ${this.recipientID} not found`,\n      );\n      this.active = false;\n      return;\n    }\n\n    this.recipient = mg.player(this.recipientID);\n  }\n\n  tick(ticks: number): void {\n    const message = this.getMessageFromKey(this.quickChatKey);\n\n    this.mg.displayChat(\n      message[1],\n      message[0],\n      this.target,\n      this.recipient.id(),\n      true,\n      this.sender.id(),\n    );\n\n    this.mg.displayChat(\n      message[1],\n      message[0],\n      this.target,\n      this.sender.id(),\n      false,\n      this.recipient.id(),\n    );\n\n    console.log(\n      `[QuickChat] ${this.sender.name} \u2192 ${this.recipient.displayName}: ${message}`,\n    );\n\n    this.active = false;\n  }\n\n  owner(): Player {\n    return this.sender;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  private getMessageFromKey(fullKey: string): string[] {\n    const translated = fullKey.split(\".\");\n    return translated;\n  }\n}\n", "import { Execution, Game, Player } from \"../game/Game\";\n\nconst cancelDelay = 20;\n\nexport class RetreatExecution implements Execution {\n  private active = true;\n  private retreatOrdered = false;\n  private startTick: number;\n  private mg: Game;\n  constructor(\n    private player: Player,\n    private attackID: string,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    this.startTick = mg.ticks();\n  }\n\n  tick(ticks: number): void {\n    if (!this.retreatOrdered) {\n      this.player.orderRetreat(this.attackID);\n      this.retreatOrdered = true;\n    }\n\n    if (this.mg.ticks() >= this.startTick + cancelDelay) {\n      this.player.executeRetreat(this.attackID);\n      this.active = false;\n    }\n  }\n\n  owner(): Player {\n    return this.player;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Player, PlayerID } from \"../game/Game\";\n\nexport class TargetPlayerExecution implements Execution {\n  private target: Player;\n\n  private active = true;\n\n  constructor(\n    private requestor: Player,\n    private targetID: PlayerID,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    if (!mg.hasPlayer(this.targetID)) {\n      console.warn(`TargetPlayerExecution: target ${this.targetID} not found`);\n      this.active = false;\n      return;\n    }\n\n    this.target = mg.player(this.targetID);\n  }\n\n  tick(ticks: number): void {\n    if (this.requestor.canTarget(this.target)) {\n      this.requestor.target(this.target);\n      this.target.updateRelation(this.requestor, -40);\n    }\n    this.active = false;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Execution, Game, Player, Unit } from \"../game/Game\";\n\nexport class UpgradeStructureExecution implements Execution {\n  private structure: Unit | undefined;\n  private cost: bigint;\n\n  constructor(\n    private player: Player,\n    private unitId: number,\n  ) {}\n\n  init(mg: Game, ticks: number): void {\n    this.structure = this.player\n      .units()\n      .find((unit) => unit.id() === this.unitId);\n\n    if (this.structure === undefined) {\n      console.warn(`structure is undefined`);\n      return;\n    }\n\n    if (!this.player.canUpgradeUnit(this.structure)) {\n      console.warn(\n        `[UpgradeStructureExecution] unit type ${this.structure.type()} cannot be upgraded`,\n      );\n      return;\n    }\n    this.player.upgradeUnit(this.structure);\n    return;\n  }\n\n  tick(ticks: number): void {\n    return;\n  }\n\n  isActive(): boolean {\n    return false;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Game, PlayerType } from \"../../game/Game\";\nimport { TileRef } from \"../../game/GameMap\";\nimport { PseudoRandom } from \"../../PseudoRandom\";\nimport { GameID } from \"../../Schemas\";\nimport { simpleHash } from \"../../Util\";\nimport { SpawnExecution } from \"../SpawnExecution\";\n\nexport class PlayerSpawner {\n  private random: PseudoRandom;\n  private players: SpawnExecution[] = [];\n  private static readonly MAX_SPAWN_TRIES = 10_000;\n  private static readonly MIN_SPAWN_DISTANCE = 30;\n\n  constructor(\n    private gm: Game,\n    gameID: GameID,\n  ) {\n    this.random = new PseudoRandom(simpleHash(gameID));\n  }\n\n  private randTile(): TileRef {\n    const x = this.random.nextInt(0, this.gm.width());\n    const y = this.random.nextInt(0, this.gm.height());\n\n    return this.gm.ref(x, y);\n  }\n\n  private randomSpawnLand(): TileRef | null {\n    let tries = 0;\n\n    while (tries < PlayerSpawner.MAX_SPAWN_TRIES) {\n      tries++;\n\n      const tile = this.randTile();\n\n      if (\n        !this.gm.isLand(tile) ||\n        this.gm.hasOwner(tile) ||\n        this.gm.isBorder(tile)\n      ) {\n        continue;\n      }\n\n      let tooCloseToOtherPlayer = false;\n      for (const spawn of this.players) {\n        if (\n          this.gm.manhattanDist(spawn.tile, tile) <\n          PlayerSpawner.MIN_SPAWN_DISTANCE\n        ) {\n          tooCloseToOtherPlayer = true;\n          break;\n        }\n      }\n\n      if (tooCloseToOtherPlayer) {\n        continue;\n      }\n\n      return tile;\n    }\n\n    return null;\n  }\n\n  spawnPlayers(): SpawnExecution[] {\n    for (const player of this.gm.allPlayers()) {\n      if (player.type() !== PlayerType.Human) {\n        continue;\n      }\n\n      const spawnLand = this.randomSpawnLand();\n\n      if (spawnLand === null) {\n        // TODO: this should normally not happen, additional logic may be needed, if this occurs\n        continue;\n      }\n\n      this.players.push(new SpawnExecution(player.info(), spawnLand));\n    }\n\n    return this.players;\n  }\n}\n", "import { Execution, Game } from \"../game/Game\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { ClientID, GameID, Intent, Turn } from \"../Schemas\";\nimport { simpleHash } from \"../Util\";\nimport { AllianceExtensionExecution } from \"./alliance/AllianceExtensionExecution\";\nimport { AllianceRequestExecution } from \"./alliance/AllianceRequestExecution\";\nimport { AllianceRequestReplyExecution } from \"./alliance/AllianceRequestReplyExecution\";\nimport { BreakAllianceExecution } from \"./alliance/BreakAllianceExecution\";\nimport { AttackExecution } from \"./AttackExecution\";\nimport { BoatRetreatExecution } from \"./BoatRetreatExecution\";\nimport { BotSpawner } from \"./BotSpawner\";\nimport { ConstructionExecution } from \"./ConstructionExecution\";\nimport { DeleteUnitExecution } from \"./DeleteUnitExecution\";\nimport { DonateGoldExecution } from \"./DonateGoldExecution\";\nimport { DonateTroopsExecution } from \"./DonateTroopExecution\";\nimport { EmbargoAllExecution } from \"./EmbargoAllExecution\";\nimport { EmbargoExecution } from \"./EmbargoExecution\";\nimport { EmojiExecution } from \"./EmojiExecution\";\nimport { FakeHumanExecution } from \"./FakeHumanExecution\";\nimport { MarkDisconnectedExecution } from \"./MarkDisconnectedExecution\";\nimport { MoveWarshipExecution } from \"./MoveWarshipExecution\";\nimport { NoOpExecution } from \"./NoOpExecution\";\nimport { QuickChatExecution } from \"./QuickChatExecution\";\nimport { RetreatExecution } from \"./RetreatExecution\";\nimport { SpawnExecution } from \"./SpawnExecution\";\nimport { TargetPlayerExecution } from \"./TargetPlayerExecution\";\nimport { TransportShipExecution } from \"./TransportShipExecution\";\nimport { UpgradeStructureExecution } from \"./UpgradeStructureExecution\";\nimport { PlayerSpawner } from \"./utils/PlayerSpawner\";\n\nexport class Executor {\n  // private random = new PseudoRandom(999)\n  private random: PseudoRandom;\n\n  constructor(\n    private mg: Game,\n    private gameID: GameID,\n    private clientID: ClientID,\n  ) {\n    // Add one to avoid id collisions with bots.\n    this.random = new PseudoRandom(simpleHash(gameID) + 1);\n  }\n\n  createExecs(turn: Turn): Execution[] {\n    return turn.intents.map((i) => this.createExec(i));\n  }\n\n  createExec(intent: Intent): Execution {\n    const player = this.mg.playerByClientID(intent.clientID);\n    if (!player) {\n      console.warn(`player with clientID ${intent.clientID} not found`);\n      return new NoOpExecution();\n    }\n\n    // create execution\n    switch (intent.type) {\n      case \"attack\": {\n        return new AttackExecution(\n          intent.troops,\n          player,\n          intent.targetID,\n          null,\n        );\n      }\n      case \"cancel_attack\":\n        return new RetreatExecution(player, intent.attackID);\n      case \"cancel_boat\":\n        return new BoatRetreatExecution(player, intent.unitID);\n      case \"move_warship\":\n        return new MoveWarshipExecution(player, intent.unitId, intent.tile);\n      case \"spawn\":\n        return new SpawnExecution(player.info(), intent.tile);\n      case \"boat\":\n        return new TransportShipExecution(\n          player,\n          intent.targetID,\n          intent.dst,\n          intent.troops,\n          intent.src,\n        );\n      case \"allianceRequest\":\n        return new AllianceRequestExecution(player, intent.recipient);\n      case \"allianceRequestReply\":\n        return new AllianceRequestReplyExecution(\n          intent.requestor,\n          player,\n          intent.accept,\n        );\n      case \"breakAlliance\":\n        return new BreakAllianceExecution(player, intent.recipient);\n      case \"targetPlayer\":\n        return new TargetPlayerExecution(player, intent.target);\n      case \"emoji\":\n        return new EmojiExecution(player, intent.recipient, intent.emoji);\n      case \"donate_troops\":\n        return new DonateTroopsExecution(\n          player,\n          intent.recipient,\n          intent.troops,\n        );\n      case \"donate_gold\":\n        return new DonateGoldExecution(player, intent.recipient, intent.gold);\n      case \"embargo\":\n        return new EmbargoExecution(player, intent.targetID, intent.action);\n      case \"embargo_all\":\n        return new EmbargoAllExecution(player, intent.action);\n      case \"build_unit\":\n        return new ConstructionExecution(player, intent.unit, intent.tile);\n      case \"allianceExtension\": {\n        return new AllianceExtensionExecution(player, intent.recipient);\n      }\n\n      case \"upgrade_structure\":\n        return new UpgradeStructureExecution(player, intent.unitId);\n      case \"delete_unit\":\n        return new DeleteUnitExecution(player, intent.unitId);\n      case \"quick_chat\":\n        return new QuickChatExecution(\n          player,\n          intent.recipient,\n          intent.quickChatKey,\n          intent.target,\n        );\n      case \"mark_disconnected\":\n        return new MarkDisconnectedExecution(player, intent.isDisconnected);\n      default:\n        throw new Error(`intent type ${intent} not found`);\n    }\n  }\n\n  spawnBots(numBots: number): Execution[] {\n    return new BotSpawner(this.mg, this.gameID).spawnBots(numBots);\n  }\n\n  spawnPlayers(): Execution[] {\n    return new PlayerSpawner(this.mg, this.gameID).spawnPlayers();\n  }\n\n  fakeHumanExecutions(): Execution[] {\n    const execs: Execution[] = [];\n    for (const nation of this.mg.nations()) {\n      execs.push(new FakeHumanExecution(this.gameID, nation));\n    }\n    return execs;\n  }\n}\n", "import { GameEvent } from \"../EventBus\";\nimport {\n  ColoredTeams,\n  Execution,\n  Game,\n  GameMode,\n  Player,\n  Team,\n} from \"../game/Game\";\n\nexport class WinEvent implements GameEvent {\n  constructor(public readonly winner: Player) {}\n}\n\nexport class WinCheckExecution implements Execution {\n  private active = true;\n\n  private mg: Game | null = null;\n\n  constructor() {}\n\n  init(mg: Game, ticks: number) {\n    this.mg = mg;\n  }\n\n  tick(ticks: number) {\n    if (ticks % 10 !== 0) {\n      return;\n    }\n    if (this.mg === null) throw new Error(\"Not initialized\");\n\n    if (this.mg.config().gameConfig().gameMode === GameMode.FFA) {\n      this.checkWinnerFFA();\n    } else {\n      this.checkWinnerTeam();\n    }\n  }\n\n  checkWinnerFFA(): void {\n    if (this.mg === null) throw new Error(\"Not initialized\");\n    const sorted = this.mg\n      .players()\n      .sort((a, b) => b.numTilesOwned() - a.numTilesOwned());\n    if (sorted.length === 0) {\n      return;\n    }\n    const max = sorted[0];\n    const timeElapsed =\n      (this.mg.ticks() - this.mg.config().numSpawnPhaseTurns()) / 10;\n    const numTilesWithoutFallout =\n      this.mg.numLandTiles() - this.mg.numTilesWithFallout();\n    if (\n      (max.numTilesOwned() / numTilesWithoutFallout) * 100 >\n        this.mg.config().percentageTilesOwnedToWin() ||\n      (this.mg.config().gameConfig().maxTimerValue !== undefined &&\n        timeElapsed - this.mg.config().gameConfig().maxTimerValue! * 60 >= 0)\n    ) {\n      this.mg.setWinner(max, this.mg.stats().stats());\n      console.log(`${max.name()} has won the game`);\n      this.active = false;\n    }\n  }\n\n  checkWinnerTeam(): void {\n    if (this.mg === null) throw new Error(\"Not initialized\");\n    const teamToTiles = new Map<Team, number>();\n    for (const player of this.mg.players()) {\n      const team = player.team();\n      // Sanity check, team should not be null here\n      if (team === null) continue;\n      teamToTiles.set(\n        team,\n        (teamToTiles.get(team) ?? 0) + player.numTilesOwned(),\n      );\n    }\n    const sorted = Array.from(teamToTiles.entries()).sort(\n      (a, b) => b[1] - a[1],\n    );\n    if (sorted.length === 0) {\n      return;\n    }\n    const max = sorted[0];\n    const timeElapsed =\n      (this.mg.ticks() - this.mg.config().numSpawnPhaseTurns()) / 10;\n    const numTilesWithoutFallout =\n      this.mg.numLandTiles() - this.mg.numTilesWithFallout();\n    const percentage = (max[1] / numTilesWithoutFallout) * 100;\n    if (\n      percentage > this.mg.config().percentageTilesOwnedToWin() ||\n      (this.mg.config().gameConfig().maxTimerValue !== undefined &&\n        timeElapsed - this.mg.config().gameConfig().maxTimerValue! * 60 >= 0)\n    ) {\n      if (max[0] === ColoredTeams.Bot) return;\n      this.mg.setWinner(max[0], this.mg.stats().stats());\n      console.log(`${max[0]} has won the game`);\n      this.active = false;\n    }\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n}\n", "import { Game, MutableAlliance, Player, Tick } from \"./Game\";\n\nexport class AllianceImpl implements MutableAlliance {\n  private extensionRequestedRequestor_: boolean = false;\n  private extensionRequestedRecipient_: boolean = false;\n\n  private expiresAt_: Tick;\n\n  constructor(\n    private readonly mg: Game,\n    readonly requestor_: Player,\n    readonly recipient_: Player,\n    private readonly createdAt_: Tick,\n    private readonly id_: number,\n  ) {\n    this.expiresAt_ = createdAt_ + mg.config().allianceDuration();\n  }\n\n  other(player: Player): Player {\n    if (this.requestor_ === player) {\n      return this.recipient_;\n    }\n    return this.requestor_;\n  }\n\n  requestor(): Player {\n    return this.requestor_;\n  }\n\n  recipient(): Player {\n    return this.recipient_;\n  }\n\n  createdAt(): Tick {\n    return this.createdAt_;\n  }\n\n  expire(): void {\n    this.mg.expireAlliance(this);\n  }\n\n  addExtensionRequest(player: Player): void {\n    if (this.requestor_ === player) {\n      this.extensionRequestedRequestor_ = true;\n    } else if (this.recipient_ === player) {\n      this.extensionRequestedRecipient_ = true;\n    }\n  }\n\n  bothAgreedToExtend(): boolean {\n    return (\n      this.extensionRequestedRequestor_ && this.extensionRequestedRecipient_\n    );\n  }\n\n  onlyOneAgreedToExtend(): boolean {\n    // Requestor / Recipient of the original alliance request, not of the extension request\n    // False if: no expiration or neither requested extension yet (both false), or both agreed to extend (both true)\n    // True if: one requested extension, other didn't yet or actively ignored (one true, one false)\n    return (\n      this.extensionRequestedRequestor_ !== this.extensionRequestedRecipient_\n    );\n  }\n\n  public id(): number {\n    return this.id_;\n  }\n\n  extend(): void {\n    this.extensionRequestedRequestor_ = false;\n    this.extensionRequestedRecipient_ = false;\n    this.expiresAt_ = this.mg.ticks() + this.mg.config().allianceDuration();\n  }\n\n  expiresAt(): Tick {\n    return this.expiresAt_;\n  }\n}\n", "import { AllianceRequest, Player, Tick } from \"./Game\";\nimport { GameImpl } from \"./GameImpl\";\nimport { AllianceRequestUpdate, GameUpdateType } from \"./GameUpdates\";\n\nexport class AllianceRequestImpl implements AllianceRequest {\n  private status_: \"pending\" | \"accepted\" | \"rejected\" = \"pending\";\n\n  constructor(\n    private requestor_: Player,\n    private recipient_: Player,\n    private tickCreated: number,\n    private game: GameImpl,\n  ) {}\n\n  status(): \"pending\" | \"accepted\" | \"rejected\" {\n    return this.status_;\n  }\n\n  requestor(): Player {\n    return this.requestor_;\n  }\n\n  recipient(): Player {\n    return this.recipient_;\n  }\n\n  createdAt(): Tick {\n    return this.tickCreated;\n  }\n\n  accept(): void {\n    this.status_ = \"accepted\";\n    this.game.acceptAllianceRequest(this);\n  }\n  reject(): void {\n    this.status_ = \"rejected\";\n    this.game.rejectAllianceRequest(this);\n  }\n\n  toUpdate(): AllianceRequestUpdate {\n    return {\n      type: GameUpdateType.AllianceRequest,\n      requestorID: this.requestor_.smallID(),\n      recipientID: this.recipient_.smallID(),\n      createdAt: this.tickCreated,\n    };\n  }\n}\n", "import { Attack, Cell, Player, TerraNullius } from \"./Game\";\nimport { GameImpl } from \"./GameImpl\";\nimport { TileRef } from \"./GameMap\";\nimport { PlayerImpl } from \"./PlayerImpl\";\n\nexport class AttackImpl implements Attack {\n  private _isActive = true;\n  private _borderSize = 0;\n  public _retreating = false;\n  public _retreated = false;\n\n  constructor(\n    private _id: string,\n    private _target: Player | TerraNullius,\n    private _attacker: Player,\n    private _troops: number,\n    private _sourceTile: TileRef | null,\n    private _border: Set<number>,\n    private _mg: GameImpl,\n  ) {}\n\n  sourceTile(): TileRef | null {\n    return this._sourceTile;\n  }\n\n  target(): Player | TerraNullius {\n    return this._target;\n  }\n  attacker(): Player {\n    return this._attacker;\n  }\n  troops(): number {\n    return this._troops;\n  }\n  setTroops(troops: number) {\n    this._troops = troops;\n  }\n\n  isActive() {\n    return this._isActive;\n  }\n\n  id() {\n    return this._id;\n  }\n\n  delete() {\n    if (this._target.isPlayer()) {\n      (this._target as PlayerImpl)._incomingAttacks = (\n        this._target as PlayerImpl\n      )._incomingAttacks.filter((a) => a !== this);\n    }\n\n    (this._attacker as PlayerImpl)._outgoingAttacks = (\n      this._attacker as PlayerImpl\n    )._outgoingAttacks.filter((a) => a !== this);\n\n    this._isActive = false;\n  }\n\n  orderRetreat() {\n    this._retreating = true;\n  }\n\n  executeRetreat() {\n    this._retreated = true;\n  }\n\n  retreating(): boolean {\n    return this._retreating;\n  }\n\n  retreated(): boolean {\n    return this._retreated;\n  }\n\n  borderSize(): number {\n    return this._borderSize;\n  }\n\n  clearBorder(): void {\n    this._borderSize = 0;\n    this._border.clear();\n  }\n\n  addBorderTile(tile: TileRef): void {\n    if (!this._border.has(tile)) {\n      this._borderSize += 1;\n      this._border.add(tile);\n    }\n  }\n\n  removeBorderTile(tile: TileRef): void {\n    if (this._border.has(tile)) {\n      this._borderSize -= 1;\n      this._border.delete(tile);\n    }\n  }\n\n  averagePosition(): Cell | null {\n    if (this._borderSize === 0) {\n      if (this.sourceTile() === null) {\n        // No border tiles and no source tile\u2014return a default position or throw an error\n        return null;\n      }\n      // No border tiles yet\u2014use the source tile's location\n      const tile: number = this.sourceTile()!;\n      return new Cell(this._mg.map().x(tile), this._mg.map().y(tile));\n    }\n\n    let averageX = 0;\n    let averageY = 0;\n\n    for (const t of this._border) {\n      averageX += this._mg.map().x(t);\n      averageY += this._mg.map().y(t);\n    }\n\n    averageX = averageX / this._borderSize;\n    averageY = averageY / this._borderSize;\n\n    return new Cell(averageX, averageY);\n  }\n}\n", "import { simpleHash, toInt, withinInt } from \"../Util\";\nimport {\n  AllUnitParams,\n  MessageType,\n  Player,\n  Tick,\n  TrainType,\n  TrajectoryTile,\n  Unit,\n  UnitInfo,\n  UnitType,\n} from \"./Game\";\nimport { GameImpl } from \"./GameImpl\";\nimport { TileRef } from \"./GameMap\";\nimport { GameUpdateType, UnitUpdate } from \"./GameUpdates\";\nimport { PlayerImpl } from \"./PlayerImpl\";\n\nexport class UnitImpl implements Unit {\n  private _active = true;\n  private _targetTile: TileRef | undefined;\n  private _targetUnit: Unit | undefined;\n  private _health: bigint;\n  private _lastTile: TileRef;\n  private _retreating: boolean = false;\n  private _targetedBySAM = false;\n  private _reachedTarget = false;\n  private _wasDestroyedByEnemy: boolean = false;\n  private _lastSetSafeFromPirates: number; // Only for trade ships\n  private _underConstruction: boolean = false;\n  private _lastOwner: PlayerImpl | null = null;\n  private _troops: number;\n  // Number of missiles in cooldown, if empty all missiles are ready.\n  private _missileTimerQueue: number[] = [];\n  private _hasTrainStation: boolean = false;\n  private _patrolTile: TileRef | undefined;\n  private _level: number = 1;\n  private _targetable: boolean = true;\n  private _loaded: boolean | undefined;\n  private _trainType: TrainType | undefined;\n  // Nuke only\n  private _trajectoryIndex: number = 0;\n  private _trajectory: TrajectoryTile[];\n  private _deletionAt: number | null = null;\n\n  constructor(\n    private _type: UnitType,\n    private mg: GameImpl,\n    private _tile: TileRef,\n    private _id: number,\n    public _owner: PlayerImpl,\n    params: AllUnitParams = {},\n  ) {\n    this._lastTile = _tile;\n    this._health = toInt(this.mg.unitInfo(_type).maxHealth ?? 1);\n    this._targetTile =\n      \"targetTile\" in params ? (params.targetTile ?? undefined) : undefined;\n    this._trajectory = \"trajectory\" in params ? (params.trajectory ?? []) : [];\n    this._troops = \"troops\" in params ? (params.troops ?? 0) : 0;\n    this._lastSetSafeFromPirates =\n      \"lastSetSafeFromPirates\" in params\n        ? (params.lastSetSafeFromPirates ?? 0)\n        : 0;\n    this._patrolTile =\n      \"patrolTile\" in params ? (params.patrolTile ?? undefined) : undefined;\n    this._targetUnit =\n      \"targetUnit\" in params ? (params.targetUnit ?? undefined) : undefined;\n    this._loaded =\n      \"loaded\" in params ? (params.loaded ?? undefined) : undefined;\n    this._trainType = \"trainType\" in params ? params.trainType : undefined;\n\n    switch (this._type) {\n      case UnitType.Warship:\n      case UnitType.Port:\n      case UnitType.MissileSilo:\n      case UnitType.DefensePost:\n      case UnitType.SAMLauncher:\n      case UnitType.City:\n      case UnitType.Factory:\n        this.mg.stats().unitBuild(_owner, this._type);\n    }\n  }\n\n  setTargetable(targetable: boolean): void {\n    if (this._targetable !== targetable) {\n      this._targetable = targetable;\n      this.mg.addUpdate(this.toUpdate());\n    }\n  }\n\n  isTargetable(): boolean {\n    return this._targetable;\n  }\n\n  setPatrolTile(tile: TileRef): void {\n    this._patrolTile = tile;\n  }\n\n  patrolTile(): TileRef | undefined {\n    return this._patrolTile;\n  }\n\n  isUnit(): this is Unit {\n    return true;\n  }\n\n  touch(): void {\n    this.mg.addUpdate(this.toUpdate());\n  }\n  setTileTarget(tile: TileRef | undefined): void {\n    this._targetTile = tile;\n  }\n  tileTarget(): TileRef | undefined {\n    return this._targetTile;\n  }\n\n  id() {\n    return this._id;\n  }\n\n  toUpdate(): UnitUpdate {\n    return {\n      type: GameUpdateType.Unit,\n      unitType: this._type,\n      id: this._id,\n      troops: this._troops,\n      ownerID: this._owner.smallID(),\n      lastOwnerID: this._lastOwner?.smallID(),\n      isActive: this._active,\n      reachedTarget: this._reachedTarget,\n      retreating: this._retreating,\n      pos: this._tile,\n      markedForDeletion: this._deletionAt ?? false,\n      targetable: this._targetable,\n      lastPos: this._lastTile,\n      health: this.hasHealth() ? Number(this._health) : undefined,\n      underConstruction: this._underConstruction,\n      targetUnitId: this._targetUnit?.id() ?? undefined,\n      targetTile: this.targetTile() ?? undefined,\n      missileTimerQueue: this._missileTimerQueue,\n      level: this.level(),\n      hasTrainStation: this._hasTrainStation,\n      trainType: this._trainType,\n      loaded: this._loaded,\n    };\n  }\n\n  type(): UnitType {\n    return this._type;\n  }\n\n  lastTile(): TileRef {\n    return this._lastTile;\n  }\n\n  move(tile: TileRef): void {\n    if (tile === null) {\n      throw new Error(\"tile cannot be null\");\n    }\n    this._lastTile = this._tile;\n    this._tile = tile;\n    this.mg.updateUnitTile(this);\n    this.mg.addUpdate(this.toUpdate());\n  }\n\n  setTroops(troops: number): void {\n    this._troops = troops;\n  }\n  troops(): number {\n    return this._troops;\n  }\n  health(): number {\n    return Number(this._health);\n  }\n  hasHealth(): boolean {\n    return this.info().maxHealth !== undefined;\n  }\n  tile(): TileRef {\n    return this._tile;\n  }\n  owner(): PlayerImpl {\n    return this._owner;\n  }\n\n  info(): UnitInfo {\n    return this.mg.unitInfo(this._type);\n  }\n\n  setOwner(newOwner: PlayerImpl): void {\n    this.clearPendingDeletion();\n    switch (this._type) {\n      case UnitType.Warship:\n      case UnitType.Port:\n      case UnitType.MissileSilo:\n      case UnitType.DefensePost:\n      case UnitType.SAMLauncher:\n      case UnitType.City:\n      case UnitType.Factory:\n        this.mg.stats().unitCapture(newOwner, this._type);\n        this.mg.stats().unitLose(this._owner, this._type);\n        break;\n    }\n    this._lastOwner = this._owner;\n    this._lastOwner._units = this._lastOwner._units.filter((u) => u !== this);\n    this._owner = newOwner;\n    this._owner._units.push(this);\n    this.mg.addUpdate(this.toUpdate());\n    this.mg.displayMessage(\n      `Your ${this.type()} was captured by ${newOwner.displayName()}`,\n      MessageType.UNIT_CAPTURED_BY_ENEMY,\n      this._lastOwner.id(),\n    );\n    this.mg.displayMessage(\n      `Captured ${this.type()} from ${this._lastOwner.displayName()}`,\n      MessageType.CAPTURED_ENEMY_UNIT,\n      newOwner.id(),\n    );\n  }\n\n  modifyHealth(delta: number, attacker?: Player): void {\n    this._health = withinInt(\n      this._health + toInt(delta),\n      0n,\n      toInt(this.info().maxHealth ?? 1),\n    );\n    if (this._health === 0n) {\n      this.delete(true, attacker);\n    }\n  }\n\n  clearPendingDeletion(): void {\n    this._deletionAt = null;\n  }\n\n  isMarkedForDeletion(): boolean {\n    return this._deletionAt !== null;\n  }\n\n  markForDeletion(): void {\n    if (!this.isActive()) {\n      return;\n    }\n    this._deletionAt =\n      this.mg.ticks() + this.mg.config().deletionMarkDuration();\n    this.mg.addUpdate(this.toUpdate());\n  }\n\n  isOverdueDeletion(): boolean {\n    if (!this.isActive()) {\n      return false;\n    }\n    return this._deletionAt !== null && this.mg.ticks() - this._deletionAt > 0;\n  }\n\n  delete(displayMessage?: boolean, destroyer?: Player): void {\n    if (!this.isActive()) {\n      throw new Error(`cannot delete ${this} not active`);\n    }\n\n    // Record whether this unit was destroyed by an enemy (vs. arrived / retreated)\n    this._wasDestroyedByEnemy = destroyer !== undefined;\n\n    this._owner._units = this._owner._units.filter((b) => b !== this);\n    this._active = false;\n    this.mg.addUpdate(this.toUpdate());\n    this.mg.removeUnit(this);\n    if (displayMessage !== false && this._type !== UnitType.MIRVWarhead) {\n      this.mg.displayMessage(\n        `Your ${this._type} was destroyed`,\n        MessageType.UNIT_DESTROYED,\n        this.owner().id(),\n      );\n    }\n    if (destroyer !== undefined) {\n      switch (this._type) {\n        case UnitType.TransportShip:\n          this.mg\n            .stats()\n            .boatDestroyTroops(destroyer, this._owner, this._troops);\n          break;\n        case UnitType.TradeShip:\n          this.mg.stats().boatDestroyTrade(destroyer, this._owner);\n          break;\n        case UnitType.City:\n        case UnitType.DefensePost:\n        case UnitType.MissileSilo:\n        case UnitType.Port:\n        case UnitType.SAMLauncher:\n        case UnitType.Warship:\n        case UnitType.Factory:\n          this.mg.stats().unitDestroy(destroyer, this._type);\n          this.mg.stats().unitLose(this.owner(), this._type);\n          break;\n      }\n    }\n  }\n\n  isActive(): boolean {\n    return this._active;\n  }\n\n  wasDestroyedByEnemy(): boolean {\n    return this._wasDestroyedByEnemy;\n  }\n\n  retreating(): boolean {\n    return this._retreating;\n  }\n\n  orderBoatRetreat() {\n    if (this.type() !== UnitType.TransportShip) {\n      throw new Error(`Cannot retreat ${this.type()}`);\n    }\n    this._retreating = true;\n  }\n\n  isUnderConstruction(): boolean {\n    return this._underConstruction;\n  }\n\n  setUnderConstruction(underConstruction: boolean): void {\n    if (this._underConstruction !== underConstruction) {\n      this._underConstruction = underConstruction;\n      this.mg.addUpdate(this.toUpdate());\n    }\n  }\n\n  hash(): number {\n    return this.tile() + simpleHash(this.type()) * this._id;\n  }\n\n  toString(): string {\n    return `Unit:${this._type},owner:${this.owner().name()}`;\n  }\n\n  launch(): void {\n    this._missileTimerQueue.push(this.mg.ticks());\n    this.mg.addUpdate(this.toUpdate());\n  }\n\n  ticksLeftInCooldown(): Tick | undefined {\n    return this._missileTimerQueue[0];\n  }\n\n  isInCooldown(): boolean {\n    return this._missileTimerQueue.length === this._level;\n  }\n\n  missileTimerQueue(): number[] {\n    return this._missileTimerQueue;\n  }\n\n  reloadMissile(): void {\n    this._missileTimerQueue.shift();\n    this.mg.addUpdate(this.toUpdate());\n  }\n\n  setTargetTile(targetTile: TileRef | undefined) {\n    this._targetTile = targetTile;\n  }\n\n  targetTile(): TileRef | undefined {\n    return this._targetTile;\n  }\n\n  setTrajectoryIndex(i: number): void {\n    const max = this._trajectory.length - 1;\n    this._trajectoryIndex = i < 0 ? 0 : i > max ? max : i;\n  }\n\n  trajectoryIndex(): number {\n    return this._trajectoryIndex;\n  }\n\n  trajectory(): TrajectoryTile[] {\n    return this._trajectory;\n  }\n\n  setTargetUnit(target: Unit | undefined): void {\n    this._targetUnit = target;\n  }\n\n  targetUnit(): Unit | undefined {\n    return this._targetUnit;\n  }\n\n  setTargetedBySAM(targeted: boolean): void {\n    this._targetedBySAM = targeted;\n  }\n\n  targetedBySAM(): boolean {\n    return this._targetedBySAM;\n  }\n\n  setReachedTarget(): void {\n    this._reachedTarget = true;\n  }\n\n  reachedTarget(): boolean {\n    return this._reachedTarget;\n  }\n\n  setSafeFromPirates(): void {\n    this._lastSetSafeFromPirates = this.mg.ticks();\n  }\n\n  isSafeFromPirates(): boolean {\n    return (\n      this.mg.ticks() - this._lastSetSafeFromPirates <\n      this.mg.config().safeFromPiratesCooldownMax()\n    );\n  }\n\n  level(): number {\n    return this._level;\n  }\n\n  setTrainStation(trainStation: boolean): void {\n    this._hasTrainStation = trainStation;\n    this.mg.addUpdate(this.toUpdate());\n  }\n\n  hasTrainStation(): boolean {\n    return this._hasTrainStation;\n  }\n\n  increaseLevel(): void {\n    this._level++;\n    if ([UnitType.MissileSilo, UnitType.SAMLauncher].includes(this.type())) {\n      this._missileTimerQueue.push(this.mg.ticks());\n    }\n    this.mg.addUpdate(this.toUpdate());\n  }\n\n  decreaseLevel(destroyer?: Player): void {\n    this._level--;\n    if ([UnitType.MissileSilo, UnitType.SAMLauncher].includes(this.type())) {\n      this._missileTimerQueue.pop();\n    }\n    if (this._level <= 0) {\n      this.delete(true, destroyer);\n      return;\n    }\n    this.mg.addUpdate(this.toUpdate());\n  }\n\n  trainType(): TrainType | undefined {\n    return this._trainType;\n  }\n\n  isLoaded(): boolean | undefined {\n    return this._loaded;\n  }\n\n  setLoaded(loaded: boolean): void {\n    if (this._loaded !== loaded) {\n      this._loaded = loaded;\n      this.mg.addUpdate(this.toUpdate());\n    }\n  }\n}\n", "import { renderNumber, renderTroops } from \"../../client/Utils\";\nimport { PseudoRandom } from \"../PseudoRandom\";\nimport { ClientID } from \"../Schemas\";\nimport {\n  assertNever,\n  distSortUnit,\n  minInt,\n  simpleHash,\n  toInt,\n  within,\n} from \"../Util\";\nimport { AttackImpl } from \"./AttackImpl\";\nimport {\n  Alliance,\n  AllianceRequest,\n  AllPlayers,\n  Attack,\n  BuildableUnit,\n  Cell,\n  ColoredTeams,\n  Embargo,\n  EmojiMessage,\n  Gold,\n  MessageType,\n  MutableAlliance,\n  Player,\n  PlayerID,\n  PlayerInfo,\n  PlayerProfile,\n  PlayerType,\n  Relation,\n  Team,\n  TerraNullius,\n  Tick,\n  Unit,\n  UnitParams,\n  UnitType,\n} from \"./Game\";\nimport { GameImpl } from \"./GameImpl\";\nimport { andFN, manhattanDistFN, TileRef } from \"./GameMap\";\nimport {\n  AllianceView,\n  AttackUpdate,\n  GameUpdateType,\n  PlayerUpdate,\n} from \"./GameUpdates\";\nimport {\n  bestShoreDeploymentSource,\n  canBuildTransportShip,\n} from \"./TransportShipUtils\";\nimport { UnitImpl } from \"./UnitImpl\";\n\ninterface Target {\n  tick: Tick;\n  target: Player;\n}\n\nclass Donation {\n  constructor(\n    public readonly recipient: Player,\n    public readonly tick: Tick,\n  ) {}\n}\n\nexport class PlayerImpl implements Player {\n  public _lastTileChange: number = 0;\n  public _pseudo_random: PseudoRandom;\n\n  private _gold: bigint;\n  private _troops: bigint;\n\n  markedTraitorTick = -1;\n  private _betrayalCount: number = 0;\n\n  private embargoes = new Map<PlayerID, Embargo>();\n\n  public _borderTiles: Set<TileRef> = new Set();\n\n  public _units: Unit[] = [];\n  public _tiles: Set<TileRef> = new Set();\n\n  private _name: string;\n  private _displayName: string;\n\n  public pastOutgoingAllianceRequests: AllianceRequest[] = [];\n  private _expiredAlliances: Alliance[] = [];\n\n  private targets_: Target[] = [];\n\n  private outgoingEmojis_: EmojiMessage[] = [];\n\n  private sentDonations: Donation[] = [];\n\n  private relations = new Map<Player, number>();\n\n  private lastDeleteUnitTick: Tick = -1;\n  private lastEmbargoAllTick: Tick = -1;\n\n  public _incomingAttacks: Attack[] = [];\n  public _outgoingAttacks: Attack[] = [];\n  public _outgoingLandAttacks: Attack[] = [];\n\n  private _hasSpawned = false;\n  private _isDisconnected = false;\n\n  constructor(\n    private mg: GameImpl,\n    private _smallID: number,\n    private readonly playerInfo: PlayerInfo,\n    startTroops: number,\n    private readonly _team: Team | null,\n  ) {\n    this._name = playerInfo.name;\n    this._troops = toInt(startTroops);\n    this._gold = 0n;\n    this._displayName = this._name;\n    this._pseudo_random = new PseudoRandom(simpleHash(this.playerInfo.id));\n  }\n\n  largestClusterBoundingBox: { min: Cell; max: Cell } | null;\n\n  toUpdate(): PlayerUpdate {\n    const outgoingAllianceRequests = this.outgoingAllianceRequests().map((ar) =>\n      ar.recipient().id(),\n    );\n\n    return {\n      type: GameUpdateType.Player,\n      clientID: this.clientID(),\n      name: this.name(),\n      displayName: this.displayName(),\n      id: this.id(),\n      team: this.team() ?? undefined,\n      smallID: this.smallID(),\n      playerType: this.type(),\n      isAlive: this.isAlive(),\n      isDisconnected: this.isDisconnected(),\n      tilesOwned: this.numTilesOwned(),\n      gold: this._gold,\n      troops: this.troops(),\n      allies: this.alliances().map((a) => a.other(this).smallID()),\n      embargoes: new Set([...this.embargoes.keys()].map((p) => p.toString())),\n      isTraitor: this.isTraitor(),\n      traitorRemainingTicks: this.getTraitorRemainingTicks(),\n      targets: this.targets().map((p) => p.smallID()),\n      outgoingEmojis: this.outgoingEmojis(),\n      outgoingAttacks: this._outgoingAttacks.map((a) => {\n        return {\n          attackerID: a.attacker().smallID(),\n          targetID: a.target().smallID(),\n          troops: a.troops(),\n          id: a.id(),\n          retreating: a.retreating(),\n        } satisfies AttackUpdate;\n      }),\n      incomingAttacks: this._incomingAttacks.map((a) => {\n        return {\n          attackerID: a.attacker().smallID(),\n          targetID: a.target().smallID(),\n          troops: a.troops(),\n          id: a.id(),\n          retreating: a.retreating(),\n        } satisfies AttackUpdate;\n      }),\n      outgoingAllianceRequests: outgoingAllianceRequests,\n      alliances: this.alliances().map(\n        (a) =>\n          ({\n            id: a.id(),\n            other: a.other(this).id(),\n            createdAt: a.createdAt(),\n            expiresAt: a.expiresAt(),\n            hasExtensionRequest:\n              a.expiresAt() <=\n              this.mg.ticks() +\n                this.mg.config().allianceExtensionPromptOffset(),\n          }) satisfies AllianceView,\n      ),\n      hasSpawned: this.hasSpawned(),\n      betrayals: this._betrayalCount,\n      lastDeleteUnitTick: this.lastDeleteUnitTick,\n    };\n  }\n\n  smallID(): number {\n    return this._smallID;\n  }\n\n  name(): string {\n    return this._name;\n  }\n  displayName(): string {\n    return this._displayName;\n  }\n\n  clientID(): ClientID | null {\n    return this.playerInfo.clientID;\n  }\n\n  id(): PlayerID {\n    return this.playerInfo.id;\n  }\n\n  type(): PlayerType {\n    return this.playerInfo.playerType;\n  }\n\n  clan(): string | null {\n    return this.playerInfo.clan;\n  }\n\n  units(...types: UnitType[]): Unit[] {\n    if (types.length === 0) {\n      return this._units;\n    }\n    const ts = new Set(types);\n    return this._units.filter((u) => ts.has(u.type()));\n  }\n\n  private numUnitsConstructed: Partial<Record<UnitType, number>> = {};\n  private recordUnitConstructed(type: UnitType): void {\n    if (this.numUnitsConstructed[type] !== undefined) {\n      this.numUnitsConstructed[type]++;\n    } else {\n      this.numUnitsConstructed[type] = 1;\n    }\n  }\n\n  // Count of units built by the player, including construction\n  unitsConstructed(type: UnitType): number {\n    const built = this.numUnitsConstructed[type] ?? 0;\n    let constructing = 0;\n    for (const unit of this._units) {\n      if (unit.type() !== type) continue;\n      if (!unit.isUnderConstruction()) continue;\n      constructing++;\n    }\n    const total = constructing + built;\n    return total;\n  }\n\n  // Count of units owned by the player, not including construction\n  unitCount(type: UnitType): number {\n    let total = 0;\n    for (const unit of this._units) {\n      if (unit.type() === type) {\n        total += unit.level();\n      }\n    }\n    return total;\n  }\n\n  // Count of units owned by the player, including construction\n  unitsOwned(type: UnitType): number {\n    let total = 0;\n    for (const unit of this._units) {\n      if (unit.type() === type) {\n        if (unit.isUnderConstruction()) {\n          total++;\n        } else {\n          total += unit.level();\n        }\n      }\n    }\n    return total;\n  }\n\n  sharesBorderWith(other: Player | TerraNullius): boolean {\n    for (const border of this._borderTiles) {\n      for (const neighbor of this.mg.map().neighbors(border)) {\n        if (this.mg.map().ownerID(neighbor) === other.smallID()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  numTilesOwned(): number {\n    return this._tiles.size;\n  }\n\n  tiles(): ReadonlySet<TileRef> {\n    return new Set(this._tiles.values()) as Set<TileRef>;\n  }\n\n  borderTiles(): ReadonlySet<TileRef> {\n    return this._borderTiles;\n  }\n\n  neighbors(): (Player | TerraNullius)[] {\n    const ns: Set<Player | TerraNullius> = new Set();\n    for (const border of this.borderTiles()) {\n      for (const neighbor of this.mg.map().neighbors(border)) {\n        if (this.mg.map().isLand(neighbor)) {\n          const owner = this.mg.map().ownerID(neighbor);\n          if (owner !== this.smallID()) {\n            ns.add(\n              this.mg.playerBySmallID(owner) satisfies Player | TerraNullius,\n            );\n          }\n        }\n      }\n    }\n    return Array.from(ns);\n  }\n\n  isPlayer(): this is Player {\n    return true as const;\n  }\n  setTroops(troops: number) {\n    this._troops = toInt(troops);\n  }\n  conquer(tile: TileRef) {\n    this.mg.conquer(this, tile);\n  }\n  orderRetreat(id: string) {\n    const attack = this._outgoingAttacks.filter((attack) => attack.id() === id);\n    if (!attack || !attack[0]) {\n      console.warn(`Didn't find outgoing attack with id ${id}`);\n      return;\n    }\n    attack[0].orderRetreat();\n  }\n  executeRetreat(id: string): void {\n    const attack = this._outgoingAttacks.filter((attack) => attack.id() === id);\n    // Execution is delayed so it's not an error that the attack does not exist.\n    if (!attack || !attack[0]) {\n      return;\n    }\n    attack[0].executeRetreat();\n  }\n  relinquish(tile: TileRef) {\n    if (this.mg.owner(tile) !== this) {\n      throw new Error(`Cannot relinquish tile not owned by this player`);\n    }\n    this.mg.relinquish(tile);\n  }\n  info(): PlayerInfo {\n    return this.playerInfo;\n  }\n  isAlive(): boolean {\n    return this._tiles.size > 0;\n  }\n\n  hasSpawned(): boolean {\n    return this._hasSpawned;\n  }\n\n  setHasSpawned(hasSpawned: boolean): void {\n    this._hasSpawned = hasSpawned;\n  }\n\n  incomingAllianceRequests(): AllianceRequest[] {\n    return this.mg.allianceRequests.filter((ar) => ar.recipient() === this);\n  }\n\n  outgoingAllianceRequests(): AllianceRequest[] {\n    return this.mg.allianceRequests.filter((ar) => ar.requestor() === this);\n  }\n\n  alliances(): MutableAlliance[] {\n    return this.mg.alliances_.filter(\n      (a) => a.requestor() === this || a.recipient() === this,\n    );\n  }\n\n  expiredAlliances(): Alliance[] {\n    return [...this._expiredAlliances];\n  }\n\n  allies(): Player[] {\n    return this.alliances().map((a) => a.other(this));\n  }\n\n  isAlliedWith(other: Player): boolean {\n    if (other === this) {\n      return false;\n    }\n    return this.allianceWith(other) !== null;\n  }\n\n  allianceWith(other: Player): MutableAlliance | null {\n    if (other === this) {\n      return null;\n    }\n    return (\n      this.alliances().find(\n        (a) => a.recipient() === other || a.requestor() === other,\n      ) ?? null\n    );\n  }\n\n  canSendAllianceRequest(other: Player): boolean {\n    if (other === this) {\n      return false;\n    }\n    if (this.isDisconnected() || other.isDisconnected()) {\n      // Disconnected players are marked as not-friendly even if they are allies,\n      // so we need to return early if either player is disconnected.\n      // Otherwise we could end up sending an alliance request to someone\n      // we are already allied with.\n      return false;\n    }\n    if (this.isFriendly(other) || !this.isAlive()) {\n      return false;\n    }\n\n    const hasPending = this.outgoingAllianceRequests().some(\n      (ar) => ar.recipient() === other,\n    );\n\n    if (hasPending) {\n      return false;\n    }\n\n    const recent = this.pastOutgoingAllianceRequests\n      .filter((ar) => ar.recipient() === other)\n      .sort((a, b) => b.createdAt() - a.createdAt());\n\n    if (recent.length === 0) {\n      return true;\n    }\n\n    const delta = this.mg.ticks() - recent[0].createdAt();\n\n    return delta >= this.mg.config().allianceRequestCooldown();\n  }\n\n  breakAlliance(alliance: Alliance): void {\n    this.mg.breakAlliance(this, alliance);\n  }\n\n  isTraitor(): boolean {\n    return this.getTraitorRemainingTicks() > 0;\n  }\n\n  getTraitorRemainingTicks(): number {\n    if (this.markedTraitorTick < 0) return 0;\n    const elapsed = this.mg.ticks() - this.markedTraitorTick;\n    const duration = this.mg.config().traitorDuration();\n    const remaining = duration - elapsed;\n    return remaining > 0 ? remaining : 0;\n  }\n\n  markTraitor(): void {\n    this.markedTraitorTick = this.mg.ticks();\n    this._betrayalCount++; // Keep count for FakeHumans too\n\n    // Record stats (only for real Humans)\n    this.mg.stats().betray(this);\n  }\n\n  betrayals(): number {\n    return this._betrayalCount;\n  }\n\n  createAllianceRequest(recipient: Player): AllianceRequest | null {\n    if (this.isAlliedWith(recipient)) {\n      throw new Error(`cannot create alliance request, already allies`);\n    }\n    return this.mg.createAllianceRequest(this, recipient satisfies Player);\n  }\n\n  relation(other: Player): Relation {\n    if (other === this) {\n      throw new Error(`cannot get relation with self: ${this}`);\n    }\n    const relation = this.relations.get(other) ?? 0;\n    return this.relationFromValue(relation);\n  }\n\n  private relationFromValue(relationValue: number): Relation {\n    if (relationValue < -50) {\n      return Relation.Hostile;\n    }\n    if (relationValue < 0) {\n      return Relation.Distrustful;\n    }\n    if (relationValue < 50) {\n      return Relation.Neutral;\n    }\n    return Relation.Friendly;\n  }\n\n  allRelationsSorted(): { player: Player; relation: Relation }[] {\n    return Array.from(this.relations, ([k, v]) => ({ player: k, relation: v }))\n      .sort((a, b) => a.relation - b.relation)\n      .map((r) => ({\n        player: r.player,\n        relation: this.relationFromValue(r.relation),\n      }));\n  }\n\n  updateRelation(other: Player, delta: number): void {\n    if (other === this) {\n      throw new Error(`cannot update relation with self: ${this}`);\n    }\n    const relation = this.relations.get(other) ?? 0;\n    const newRelation = within(relation + delta, -100, 100);\n    this.relations.set(other, newRelation);\n  }\n\n  decayRelations() {\n    this.relations.forEach((r: number, p: Player) => {\n      const sign = -1 * Math.sign(r);\n      const delta = 0.05;\n      r += sign * delta;\n      if (Math.abs(r) < delta * 2) {\n        r = 0;\n      }\n      this.relations.set(p, r);\n    });\n  }\n\n  canTarget(other: Player): boolean {\n    if (this === other) {\n      return false;\n    }\n    if (this.isFriendly(other)) {\n      return false;\n    }\n    for (const t of this.targets_) {\n      if (this.mg.ticks() - t.tick < this.mg.config().targetCooldown()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  target(other: Player): void {\n    this.targets_.push({ tick: this.mg.ticks(), target: other });\n    this.mg.target(this, other);\n  }\n\n  targets(): Player[] {\n    return this.targets_\n      .filter(\n        (t) => this.mg.ticks() - t.tick < this.mg.config().targetDuration(),\n      )\n      .map((t) => t.target);\n  }\n\n  transitiveTargets(): Player[] {\n    const ts = this.alliances()\n      .map((a) => a.other(this))\n      .flatMap((ally) => ally.targets());\n    ts.push(...this.targets());\n    return [...new Set(ts)] satisfies Player[];\n  }\n\n  sendEmoji(recipient: Player | typeof AllPlayers, emoji: string): void {\n    if (recipient === this) {\n      throw Error(`Cannot send emoji to oneself: ${this}`);\n    }\n    const msg: EmojiMessage = {\n      message: emoji,\n      senderID: this.smallID(),\n      recipientID: recipient === AllPlayers ? recipient : recipient.smallID(),\n      createdAt: this.mg.ticks(),\n    };\n    this.outgoingEmojis_.push(msg);\n    this.mg.sendEmojiUpdate(msg);\n  }\n\n  outgoingEmojis(): EmojiMessage[] {\n    return this.outgoingEmojis_\n      .filter(\n        (e) =>\n          this.mg.ticks() - e.createdAt <\n          this.mg.config().emojiMessageDuration(),\n      )\n      .sort((a, b) => b.createdAt - a.createdAt);\n  }\n\n  canSendEmoji(recipient: Player | typeof AllPlayers): boolean {\n    if (recipient === this) {\n      return false;\n    }\n    const recipientID =\n      recipient === AllPlayers ? AllPlayers : recipient.smallID();\n    const prevMsgs = this.outgoingEmojis_.filter(\n      (msg) => msg.recipientID === recipientID,\n    );\n    for (const msg of prevMsgs) {\n      if (\n        this.mg.ticks() - msg.createdAt <\n        this.mg.config().emojiMessageCooldown()\n      ) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  canDonateGold(recipient: Player): boolean {\n    if (\n      !this.isAlive() ||\n      !recipient.isAlive() ||\n      !this.isFriendly(recipient)\n    ) {\n      return false;\n    }\n    if (\n      recipient.type() === PlayerType.Human &&\n      this.mg.config().donateGold() === false\n    ) {\n      return false;\n    }\n    for (const donation of this.sentDonations) {\n      if (donation.recipient === recipient) {\n        if (\n          this.mg.ticks() - donation.tick <\n          this.mg.config().donateCooldown()\n        ) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  canDonateTroops(recipient: Player): boolean {\n    if (\n      !this.isAlive() ||\n      !recipient.isAlive() ||\n      !this.isFriendly(recipient)\n    ) {\n      return false;\n    }\n    if (\n      recipient.type() === PlayerType.Human &&\n      this.mg.config().donateTroops() === false\n    ) {\n      return false;\n    }\n    for (const donation of this.sentDonations) {\n      if (donation.recipient === recipient) {\n        if (\n          this.mg.ticks() - donation.tick <\n          this.mg.config().donateCooldown()\n        ) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  donateTroops(recipient: Player, troops: number): boolean {\n    if (troops <= 0) return false;\n    const removed = this.removeTroops(troops);\n    if (removed === 0) return false;\n    recipient.addTroops(removed);\n\n    this.sentDonations.push(new Donation(recipient, this.mg.ticks()));\n    this.mg.displayMessage(\n      `Sent ${renderTroops(troops)} troops to ${recipient.name()}`,\n      MessageType.SENT_TROOPS_TO_PLAYER,\n      this.id(),\n    );\n    this.mg.displayMessage(\n      `Received ${renderTroops(troops)} troops from ${this.name()}`,\n      MessageType.RECEIVED_TROOPS_FROM_PLAYER,\n      recipient.id(),\n    );\n    return true;\n  }\n\n  donateGold(recipient: Player, gold: Gold): boolean {\n    if (gold <= 0n) return false;\n    const removed = this.removeGold(gold);\n    if (removed === 0n) return false;\n    recipient.addGold(removed);\n\n    this.sentDonations.push(new Donation(recipient, this.mg.ticks()));\n    this.mg.displayMessage(\n      `Sent ${renderNumber(gold)} gold to ${recipient.name()}`,\n      MessageType.SENT_GOLD_TO_PLAYER,\n      this.id(),\n    );\n    this.mg.displayMessage(\n      `Received ${renderNumber(gold)} gold from ${this.name()}`,\n      MessageType.RECEIVED_GOLD_FROM_PLAYER,\n      recipient.id(),\n      gold,\n    );\n    return true;\n  }\n\n  canDeleteUnit(): boolean {\n    return (\n      this.mg.ticks() - this.lastDeleteUnitTick >=\n      this.mg.config().deleteUnitCooldown()\n    );\n  }\n\n  recordDeleteUnit(): void {\n    this.lastDeleteUnitTick = this.mg.ticks();\n  }\n\n  canEmbargoAll(): boolean {\n    // Cooldown gate\n    if (\n      this.mg.ticks() - this.lastEmbargoAllTick <\n      this.mg.config().embargoAllCooldown()\n    ) {\n      return false;\n    }\n    // At least one eligible player exists\n    for (const p of this.mg.players()) {\n      if (p.id() === this.id()) continue;\n      if (p.type() === PlayerType.Bot) continue;\n      if (this.isOnSameTeam(p)) continue;\n      return true;\n    }\n    return false;\n  }\n\n  recordEmbargoAll(): void {\n    this.lastEmbargoAllTick = this.mg.ticks();\n  }\n\n  hasEmbargoAgainst(other: Player): boolean {\n    return this.embargoes.has(other.id());\n  }\n\n  canTrade(other: Player): boolean {\n    const embargo =\n      other.hasEmbargoAgainst(this) || this.hasEmbargoAgainst(other);\n    return !embargo && other.id() !== this.id();\n  }\n\n  getEmbargoes(): Embargo[] {\n    return [...this.embargoes.values()];\n  }\n\n  addEmbargo(other: Player, isTemporary: boolean): void {\n    const embargo = this.embargoes.get(other.id());\n    if (embargo !== undefined && !embargo.isTemporary) return;\n\n    this.mg.addUpdate({\n      type: GameUpdateType.EmbargoEvent,\n      event: \"start\",\n      playerID: this.smallID(),\n      embargoedID: other.smallID(),\n    });\n\n    this.embargoes.set(other.id(), {\n      createdAt: this.mg.ticks(),\n      isTemporary: isTemporary,\n      target: other,\n    });\n  }\n\n  stopEmbargo(other: Player): void {\n    this.embargoes.delete(other.id());\n    this.mg.addUpdate({\n      type: GameUpdateType.EmbargoEvent,\n      event: \"stop\",\n      playerID: this.smallID(),\n      embargoedID: other.smallID(),\n    });\n  }\n\n  endTemporaryEmbargo(other: Player): void {\n    const embargo = this.embargoes.get(other.id());\n    if (embargo !== undefined && !embargo.isTemporary) return;\n\n    this.stopEmbargo(other);\n  }\n\n  tradingPartners(): Player[] {\n    return this.mg\n      .players()\n      .filter((other) => other !== this && this.canTrade(other));\n  }\n\n  team(): Team | null {\n    return this._team;\n  }\n\n  isOnSameTeam(other: Player): boolean {\n    if (other === this) {\n      return false;\n    }\n    if (this.team() === null || other.team() === null) {\n      return false;\n    }\n    if (this.team() === ColoredTeams.Bot || other.team() === ColoredTeams.Bot) {\n      return false;\n    }\n    return this._team === other.team();\n  }\n\n  isFriendly(other: Player, treatAFKFriendly: boolean = false): boolean {\n    if (other.isDisconnected() && !treatAFKFriendly) {\n      return false;\n    }\n    return this.isOnSameTeam(other) || this.isAlliedWith(other);\n  }\n\n  gold(): Gold {\n    return this._gold;\n  }\n\n  addGold(toAdd: Gold, tile?: TileRef): void {\n    this._gold += toAdd;\n    if (tile) {\n      this.mg.addUpdate({\n        type: GameUpdateType.BonusEvent,\n        player: this.id(),\n        tile,\n        gold: Number(toAdd),\n        troops: 0,\n      });\n    }\n  }\n\n  removeGold(toRemove: Gold): Gold {\n    if (toRemove <= 0n) {\n      return 0n;\n    }\n    const actualRemoved = minInt(this._gold, toRemove);\n    this._gold -= actualRemoved;\n    return actualRemoved;\n  }\n\n  troops(): number {\n    return Number(this._troops);\n  }\n\n  addTroops(troops: number): void {\n    if (troops < 0) {\n      this.removeTroops(-1 * troops);\n      return;\n    }\n    this._troops += toInt(troops);\n  }\n  removeTroops(troops: number): number {\n    if (troops <= 0) {\n      return 0;\n    }\n    const toRemove = minInt(this._troops, toInt(troops));\n    this._troops -= toRemove;\n    return Number(toRemove);\n  }\n\n  captureUnit(unit: Unit): void {\n    if (unit.owner() === this) {\n      throw new Error(`Cannot capture unit, ${this} already owns ${unit}`);\n    }\n    unit.setOwner(this);\n  }\n\n  buildUnit<T extends UnitType>(\n    type: T,\n    spawnTile: TileRef,\n    params: UnitParams<T>,\n  ): Unit {\n    if (this.mg.config().isUnitDisabled(type)) {\n      throw new Error(\n        `Attempted to build disabled unit ${type} at tile ${spawnTile} by player ${this.name()}`,\n      );\n    }\n\n    const cost = this.mg.unitInfo(type).cost(this.mg, this);\n    const b = new UnitImpl(\n      type,\n      this.mg,\n      spawnTile,\n      this.mg.nextUnitID(),\n      this,\n      params,\n    );\n    this._units.push(b);\n    this.recordUnitConstructed(type);\n    this.removeGold(cost);\n    this.removeTroops(\"troops\" in params ? (params.troops ?? 0) : 0);\n    this.mg.addUpdate(b.toUpdate());\n    this.mg.addUnit(b);\n\n    return b;\n  }\n\n  public findUnitToUpgrade(type: UnitType, targetTile: TileRef): Unit | false {\n    const range = this.mg.config().structureMinDist();\n    const existing = this.mg\n      .nearbyUnits(targetTile, range, type, undefined, true)\n      .sort((a, b) => a.distSquared - b.distSquared);\n    if (existing.length === 0) {\n      return false;\n    }\n    const unit = existing[0].unit;\n    if (!this.canUpgradeUnit(unit)) {\n      return false;\n    }\n    return unit;\n  }\n\n  public canUpgradeUnit(unit: Unit): boolean {\n    if (unit.isMarkedForDeletion()) {\n      return false;\n    }\n    if (unit.isUnderConstruction()) {\n      return false;\n    }\n    if (!this.mg.config().unitInfo(unit.type()).upgradable) {\n      return false;\n    }\n    if (this.mg.config().isUnitDisabled(unit.type())) {\n      return false;\n    }\n    if (\n      this._gold < this.mg.config().unitInfo(unit.type()).cost(this.mg, this)\n    ) {\n      return false;\n    }\n    if (unit.owner() !== this) {\n      return false;\n    }\n    return true;\n  }\n\n  upgradeUnit(unit: Unit) {\n    const cost = this.mg.unitInfo(unit.type()).cost(this.mg, this);\n    this.removeGold(cost);\n    unit.increaseLevel();\n    this.recordUnitConstructed(unit.type());\n  }\n\n  public buildableUnits(tile: TileRef | null): BuildableUnit[] {\n    const validTiles = tile !== null ? this.validStructureSpawnTiles(tile) : [];\n    return Object.values(UnitType).map((u) => {\n      let canUpgrade: number | false = false;\n      if (!this.mg.inSpawnPhase()) {\n        const existingUnit = tile !== null && this.findUnitToUpgrade(u, tile);\n        if (existingUnit !== false) {\n          canUpgrade = existingUnit.id();\n        }\n      }\n      return {\n        type: u,\n        canBuild:\n          this.mg.inSpawnPhase() || tile === null\n            ? false\n            : this.canBuild(u, tile, validTiles),\n        canUpgrade: canUpgrade,\n        cost: this.mg.config().unitInfo(u).cost(this.mg, this),\n      } as BuildableUnit;\n    });\n  }\n\n  canBuild(\n    unitType: UnitType,\n    targetTile: TileRef,\n    validTiles: TileRef[] | null = null,\n  ): TileRef | false {\n    if (this.mg.config().isUnitDisabled(unitType)) {\n      return false;\n    }\n\n    const cost = this.mg.unitInfo(unitType).cost(this.mg, this);\n    if (!this.isAlive() || this.gold() < cost) {\n      return false;\n    }\n    switch (unitType) {\n      case UnitType.MIRV:\n        if (!this.mg.hasOwner(targetTile)) {\n          return false;\n        }\n        return this.nukeSpawn(targetTile);\n      case UnitType.AtomBomb:\n      case UnitType.HydrogenBomb:\n        return this.nukeSpawn(targetTile);\n      case UnitType.MIRVWarhead:\n        return targetTile;\n      case UnitType.Port:\n        return this.portSpawn(targetTile, validTiles);\n      case UnitType.Warship:\n        return this.warshipSpawn(targetTile);\n      case UnitType.Shell:\n      case UnitType.SAMMissile:\n        return targetTile;\n      case UnitType.TransportShip:\n        return canBuildTransportShip(this.mg, this, targetTile);\n      case UnitType.TradeShip:\n        return this.tradeShipSpawn(targetTile);\n      case UnitType.Train:\n        return this.landBasedUnitSpawn(targetTile);\n      case UnitType.MissileSilo:\n      case UnitType.DefensePost:\n      case UnitType.SAMLauncher:\n      case UnitType.City:\n      case UnitType.Factory:\n        return this.landBasedStructureSpawn(targetTile, validTiles);\n      default:\n        assertNever(unitType);\n    }\n  }\n\n  nukeSpawn(tile: TileRef): TileRef | false {\n    const owner = this.mg.owner(tile);\n    if (owner.isPlayer()) {\n      if (this.isOnSameTeam(owner)) {\n        return false;\n      }\n    }\n    // only get missilesilos that are not on cooldown and not under construction\n    const spawns = this.units(UnitType.MissileSilo)\n      .filter((silo) => {\n        return !silo.isInCooldown() && !silo.isUnderConstruction();\n      })\n      .sort(distSortUnit(this.mg, tile));\n    if (spawns.length === 0) {\n      return false;\n    }\n    return spawns[0].tile();\n  }\n\n  portSpawn(tile: TileRef, validTiles: TileRef[] | null): TileRef | false {\n    const spawns = Array.from(\n      this.mg.bfs(\n        tile,\n        manhattanDistFN(tile, this.mg.config().radiusPortSpawn()),\n      ),\n    )\n      .filter((t) => this.mg.owner(t) === this && this.mg.isOceanShore(t))\n      .sort(\n        (a, b) =>\n          this.mg.manhattanDist(a, tile) - this.mg.manhattanDist(b, tile),\n      );\n    const validTileSet = new Set(\n      validTiles ?? this.validStructureSpawnTiles(tile),\n    );\n    for (const t of spawns) {\n      if (validTileSet.has(t)) {\n        return t;\n      }\n    }\n    return false;\n  }\n\n  warshipSpawn(tile: TileRef): TileRef | false {\n    if (!this.mg.isOcean(tile)) {\n      return false;\n    }\n    const spawns = this.units(UnitType.Port).sort(\n      (a, b) =>\n        this.mg.manhattanDist(a.tile(), tile) -\n        this.mg.manhattanDist(b.tile(), tile),\n    );\n    if (spawns.length === 0) {\n      return false;\n    }\n    return spawns[0].tile();\n  }\n\n  landBasedUnitSpawn(tile: TileRef): TileRef | false {\n    return this.mg.isLand(tile) ? tile : false;\n  }\n\n  landBasedStructureSpawn(\n    tile: TileRef,\n    validTiles: TileRef[] | null = null,\n  ): TileRef | false {\n    const tiles = validTiles ?? this.validStructureSpawnTiles(tile);\n    if (tiles.length === 0) {\n      return false;\n    }\n    return tiles[0];\n  }\n\n  private validStructureSpawnTiles(tile: TileRef): TileRef[] {\n    if (this.mg.owner(tile) !== this) {\n      return [];\n    }\n    const searchRadius = 15;\n    const searchRadiusSquared = searchRadius ** 2;\n    const types = Object.values(UnitType).filter((unitTypeValue) => {\n      return this.mg.config().unitInfo(unitTypeValue).territoryBound;\n    });\n\n    const nearbyUnits = this.mg.nearbyUnits(\n      tile,\n      searchRadius * 2,\n      types,\n      undefined,\n      true,\n    );\n    const nearbyTiles = this.mg.bfs(tile, (gm, t) => {\n      return (\n        this.mg.euclideanDistSquared(tile, t) < searchRadiusSquared &&\n        gm.ownerID(t) === this.smallID()\n      );\n    });\n    const validSet: Set<TileRef> = new Set(nearbyTiles);\n\n    const minDistSquared = this.mg.config().structureMinDist() ** 2;\n    for (const t of nearbyTiles) {\n      for (const { unit } of nearbyUnits) {\n        if (this.mg.euclideanDistSquared(unit.tile(), t) < minDistSquared) {\n          validSet.delete(t);\n          break;\n        }\n      }\n    }\n    const valid = Array.from(validSet);\n    valid.sort(\n      (a, b) =>\n        this.mg.euclideanDistSquared(a, tile) -\n        this.mg.euclideanDistSquared(b, tile),\n    );\n    return valid;\n  }\n\n  tradeShipSpawn(targetTile: TileRef): TileRef | false {\n    const spawns = this.units(UnitType.Port).filter(\n      (u) => u.tile() === targetTile,\n    );\n    if (spawns.length === 0) {\n      return false;\n    }\n    return spawns[0].tile();\n  }\n  lastTileChange(): Tick {\n    return this._lastTileChange;\n  }\n\n  isDisconnected(): boolean {\n    return this._isDisconnected;\n  }\n\n  markDisconnected(isDisconnected: boolean): void {\n    this._isDisconnected = isDisconnected;\n  }\n\n  hash(): number {\n    return (\n      simpleHash(this.id()) * (this.troops() + this.numTilesOwned()) +\n      this._units.reduce((acc, unit) => acc + unit.hash(), 0)\n    );\n  }\n  toString(): string {\n    return `Player:{name:${this.info().name},clientID:${\n      this.info().clientID\n    },isAlive:${this.isAlive()},troops:${\n      this._troops\n    },numTileOwned:${this.numTilesOwned()}}]`;\n  }\n\n  public playerProfile(): PlayerProfile {\n    const rel = {\n      relations: Object.fromEntries(\n        this.allRelationsSorted().map(({ player, relation }) => [\n          player.smallID(),\n          relation,\n        ]),\n      ),\n      alliances: this.alliances().map((a) => a.other(this).smallID()),\n    };\n    return rel;\n  }\n\n  createAttack(\n    target: Player | TerraNullius,\n    troops: number,\n    sourceTile: TileRef | null,\n    border: Set<number>,\n  ): Attack {\n    const attack = new AttackImpl(\n      this._pseudo_random.nextID(),\n      target,\n      this,\n      troops,\n      sourceTile,\n      border,\n      this.mg,\n    );\n    this._outgoingAttacks.push(attack);\n    if (target.isPlayer()) {\n      (target as PlayerImpl)._incomingAttacks.push(attack);\n    }\n    return attack;\n  }\n  outgoingAttacks(): Attack[] {\n    return this._outgoingAttacks;\n  }\n  incomingAttacks(): Attack[] {\n    return this._incomingAttacks;\n  }\n\n  public canAttack(tile: TileRef): boolean {\n    if (\n      this.mg.hasOwner(tile) &&\n      this.mg.config().numSpawnPhaseTurns() +\n        this.mg.config().spawnImmunityDuration() >\n        this.mg.ticks()\n    ) {\n      return false;\n    }\n\n    if (this.mg.owner(tile) === this) {\n      return false;\n    }\n    const other = this.mg.owner(tile);\n    if (other.isPlayer()) {\n      if (this.isFriendly(other)) {\n        return false;\n      }\n    }\n\n    if (!this.mg.isLand(tile)) {\n      return false;\n    }\n    if (this.mg.hasOwner(tile)) {\n      return this.sharesBorderWith(other);\n    } else {\n      for (const t of this.mg.bfs(\n        tile,\n        andFN(\n          (gm, t) => !gm.hasOwner(t) && gm.isLand(t),\n          manhattanDistFN(tile, 200),\n        ),\n      )) {\n        for (const n of this.mg.neighbors(t)) {\n          if (this.mg.owner(n) === this) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n  }\n\n  bestTransportShipSpawn(targetTile: TileRef): TileRef | false {\n    return bestShoreDeploymentSource(this.mg, this, targetTile);\n  }\n}\n", "import { Execution, Game } from \"../game/Game\";\nimport { TileRef } from \"../game/GameMap\";\nimport { GameUpdateType, RailTile, RailType } from \"../game/GameUpdates\";\nimport { Railroad } from \"../game/Railroad\";\n\nexport class RailroadExecution implements Execution {\n  private mg: Game;\n  private active: boolean = true;\n  private headIndex: number = 0;\n  private tailIndex: number = 0;\n  private increment: number = 3;\n  private railTiles: RailTile[] = [];\n  constructor(private railRoad: Railroad) {\n    this.tailIndex = railRoad.tiles.length;\n  }\n\n  isActive(): boolean {\n    return this.active;\n  }\n\n  init(mg: Game, ticks: number): void {\n    this.mg = mg;\n    const tiles = this.railRoad.tiles;\n    // Inverse direction computation for the first tile\n    this.railTiles.push({\n      tile: tiles[0],\n      railType:\n        tiles.length > 0\n          ? this.computeExtremityDirection(tiles[0], tiles[1])\n          : RailType.VERTICAL,\n    });\n    for (let i = 1; i < tiles.length - 1; i++) {\n      const direction = this.computeDirection(\n        tiles[i - 1],\n        tiles[i],\n        tiles[i + 1],\n      );\n      this.railTiles.push({ tile: tiles[i], railType: direction });\n    }\n    this.railTiles.push({\n      tile: tiles[tiles.length - 1],\n      railType:\n        tiles.length > 0\n          ? this.computeExtremityDirection(\n              tiles[tiles.length - 1],\n              tiles[tiles.length - 2],\n            )\n          : RailType.VERTICAL,\n    });\n  }\n\n  private computeExtremityDirection(tile: TileRef, next: TileRef): RailType {\n    const x = this.mg.x(tile);\n    const y = this.mg.y(tile);\n    const nextX = this.mg.x(next);\n    const nextY = this.mg.y(next);\n\n    const dx = nextX - x;\n    const dy = nextY - y;\n\n    if (dx === 0 && dy === 0) return RailType.VERTICAL; // No movement\n\n    if (dx === 0) {\n      return RailType.VERTICAL;\n    } else if (dy === 0) {\n      return RailType.HORIZONTAL;\n    }\n    return RailType.VERTICAL;\n  }\n\n  private computeDirection(\n    prev: TileRef,\n    current: TileRef,\n    next: TileRef,\n  ): RailType {\n    if (this.mg === null) {\n      throw new Error(\"Not initialized\");\n    }\n    const x1 = this.mg.x(prev);\n    const y1 = this.mg.y(prev);\n    const x2 = this.mg.x(current);\n    const y2 = this.mg.y(current);\n    const x3 = this.mg.x(next);\n    const y3 = this.mg.y(next);\n\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    const dx2 = x3 - x2;\n    const dy2 = y3 - y2;\n\n    // Straight line\n    if (dx1 === dx2 && dy1 === dy2) {\n      if (dx1 !== 0) return RailType.HORIZONTAL;\n      if (dy1 !== 0) return RailType.VERTICAL;\n    }\n\n    // Turn (corner) cases\n    if ((dx1 === 0 && dx2 !== 0) || (dx1 !== 0 && dx2 === 0)) {\n      // Now figure out which type of corner\n      if (dx1 === 0 && dx2 === 1 && dy1 === -1) return RailType.BOTTOM_RIGHT;\n      if (dx1 === 0 && dx2 === -1 && dy1 === -1) return RailType.BOTTOM_LEFT;\n      if (dx1 === 0 && dx2 === 1 && dy1 === 1) return RailType.TOP_RIGHT;\n      if (dx1 === 0 && dx2 === -1 && dy1 === 1) return RailType.TOP_LEFT;\n\n      if (dx1 === 1 && dx2 === 0 && dy2 === -1) return RailType.TOP_LEFT;\n      if (dx1 === -1 && dx2 === 0 && dy2 === -1) return RailType.TOP_RIGHT;\n      if (dx1 === 1 && dx2 === 0 && dy2 === 1) return RailType.BOTTOM_LEFT;\n      if (dx1 === -1 && dx2 === 0 && dy2 === 1) return RailType.BOTTOM_RIGHT;\n    }\n    console.warn(`Invalid rail segment: ${dx1}:${dy1}, ${dx2}:${dy2}`);\n    return RailType.VERTICAL;\n  }\n\n  tick(ticks: number): void {\n    if (this.mg === null) {\n      throw new Error(\"Not initialized\");\n    }\n    if (!this.activeSourceOrDestination()) {\n      this.active = false;\n      return;\n    }\n    if (this.headIndex > this.tailIndex) {\n      // Construction complete\n      this.constructionComplete();\n      return;\n    }\n\n    let updatedRailTiles: RailTile[];\n    // Check if remaining tiles can be done all at once\n    if (this.tailIndex - this.headIndex <= 2 * this.increment) {\n      updatedRailTiles = this.railTiles.slice(this.headIndex, this.tailIndex);\n      this.constructionComplete();\n    } else {\n      updatedRailTiles = this.railTiles.slice(\n        this.headIndex,\n        this.headIndex + this.increment,\n      );\n      updatedRailTiles = updatedRailTiles.concat(\n        this.railTiles.slice(this.tailIndex - this.increment, this.tailIndex),\n      );\n      this.headIndex += this.increment;\n      this.tailIndex -= this.increment;\n    }\n    if (updatedRailTiles) {\n      this.mg.addUpdate({\n        type: GameUpdateType.RailroadEvent,\n        isActive: true,\n        railTiles: updatedRailTiles,\n      });\n    }\n  }\n\n  activeDuringSpawnPhase(): boolean {\n    return false;\n  }\n\n  private activeSourceOrDestination(): boolean {\n    return this.railRoad.from.isActive() && this.railRoad.to.isActive();\n  }\n\n  private constructionComplete() {\n    this.redrawBuildings();\n    this.active = false;\n  }\n\n  private redrawBuildings() {\n    if (this.railRoad.from.unit.isActive()) this.railRoad.from.unit.touch();\n    if (this.railRoad.to.unit.isActive()) this.railRoad.to.unit.touch();\n  }\n}\n", "import { RailroadExecution } from \"../execution/RailroadExecution\";\nimport { PathFindResultType } from \"../pathfinding/AStar\";\nimport { MiniAStar } from \"../pathfinding/MiniAStar\";\nimport { SerialAStar } from \"../pathfinding/SerialAStar\";\nimport { Game, Unit, UnitType } from \"./Game\";\nimport { TileRef } from \"./GameMap\";\nimport { RailNetwork } from \"./RailNetwork\";\nimport { Railroad } from \"./Railroad\";\nimport { Cluster, TrainStation, TrainStationMapAdapter } from \"./TrainStation\";\n\n/**\n * The Stations handle their own neighbors so the graph is naturally traversable,\n * but it would be expensive to look through the graph to find a station.\n * This class stores the existing stations for quick access\n */\nexport interface StationManager {\n  addStation(station: TrainStation): void;\n  removeStation(station: TrainStation): void;\n  findStation(unit: Unit): TrainStation | null;\n  getAll(): Set<TrainStation>;\n}\n\nexport class StationManagerImpl implements StationManager {\n  private stations: Set<TrainStation> = new Set();\n\n  addStation(station: TrainStation) {\n    this.stations.add(station);\n  }\n\n  removeStation(station: TrainStation) {\n    this.stations.delete(station);\n  }\n\n  findStation(unit: Unit): TrainStation | null {\n    for (const station of this.stations) {\n      if (station.unit === unit) return station;\n    }\n    return null;\n  }\n\n  getAll(): Set<TrainStation> {\n    return this.stations;\n  }\n}\n\nexport interface RailPathFinderService {\n  findTilePath(from: TileRef, to: TileRef): TileRef[];\n  findStationsPath(from: TrainStation, to: TrainStation): TrainStation[];\n}\n\nclass RailPathFinderServiceImpl implements RailPathFinderService {\n  constructor(private game: Game) {}\n\n  findTilePath(from: TileRef, to: TileRef): TileRef[] {\n    const astar = new MiniAStar(\n      this.game.map(),\n      this.game.miniMap(),\n      from,\n      to,\n      5000,\n      20,\n      false,\n      3,\n    );\n    return astar.compute() === PathFindResultType.Completed\n      ? astar.reconstructPath()\n      : [];\n  }\n\n  findStationsPath(from: TrainStation, to: TrainStation): TrainStation[] {\n    const stationAStar = new SerialAStar(\n      from,\n      to,\n      5000,\n      20,\n      new TrainStationMapAdapter(this.game),\n    );\n    return stationAStar.compute() === PathFindResultType.Completed\n      ? stationAStar.reconstructPath()\n      : [];\n  }\n}\n\nexport function createRailNetwork(game: Game): RailNetwork {\n  const stationManager = new StationManagerImpl();\n  const pathService = new RailPathFinderServiceImpl(game);\n  return new RailNetworkImpl(game, stationManager, pathService);\n}\n\nexport class RailNetworkImpl implements RailNetwork {\n  private maxConnectionDistance: number = 4;\n\n  constructor(\n    private game: Game,\n    private stationManager: StationManager,\n    private pathService: RailPathFinderService,\n  ) {}\n\n  connectStation(station: TrainStation) {\n    this.stationManager.addStation(station);\n    this.connectToNearbyStations(station);\n  }\n\n  removeStation(unit: Unit): void {\n    const station = this.stationManager.findStation(unit);\n    if (!station) return;\n\n    const neighbors = station.neighbors();\n    this.disconnectFromNetwork(station);\n    this.stationManager.removeStation(station);\n\n    const cluster = station.getCluster();\n    if (!cluster) return;\n    if (neighbors.length === 1) {\n      cluster.removeStation(station);\n    } else if (neighbors.length > 1) {\n      for (const neighbor of neighbors) {\n        const stations = this.computeCluster(neighbor);\n        const newCluster = new Cluster();\n        newCluster.addStations(stations);\n      }\n    }\n    station.unit.setTrainStation(false);\n  }\n\n  /**\n   * Return the intermediary stations connecting two stations\n   */\n  findStationsPath(from: TrainStation, to: TrainStation): TrainStation[] {\n    return this.pathService.findStationsPath(from, to);\n  }\n\n  private connectToNearbyStations(station: TrainStation) {\n    const neighbors = this.game.nearbyUnits(\n      station.tile(),\n      this.game.config().trainStationMaxRange(),\n      [UnitType.City, UnitType.Factory, UnitType.Port],\n    );\n\n    const editedClusters = new Set<Cluster>();\n    neighbors.sort((a, b) => a.distSquared - b.distSquared);\n\n    for (const neighbor of neighbors) {\n      if (neighbor.unit === station.unit) continue;\n      const neighborStation = this.stationManager.findStation(neighbor.unit);\n      if (!neighborStation) continue;\n\n      const distanceToStation = this.distanceFrom(\n        neighborStation,\n        station,\n        this.maxConnectionDistance,\n      );\n\n      const neighborCluster = neighborStation.getCluster();\n      if (neighborCluster === null) continue;\n      const connectionAvailable =\n        distanceToStation > this.maxConnectionDistance ||\n        distanceToStation === -1;\n      if (\n        connectionAvailable &&\n        neighbor.distSquared > this.game.config().trainStationMinRange() ** 2\n      ) {\n        if (this.connect(station, neighborStation)) {\n          neighborCluster.addStation(station);\n          editedClusters.add(neighborCluster);\n        }\n      }\n    }\n\n    // If multiple clusters own the new station, merge them into a single cluster\n    if (editedClusters.size > 1) {\n      this.mergeClusters(editedClusters);\n    } else if (editedClusters.size === 0) {\n      // If no cluster owns the station, creates a new one for it\n      const newCluster = new Cluster();\n      newCluster.addStation(station);\n    }\n  }\n\n  private disconnectFromNetwork(station: TrainStation) {\n    for (const rail of station.getRailroads()) {\n      rail.delete(this.game);\n    }\n    station.clearRailroads();\n    const cluster = station.getCluster();\n    if (cluster !== null && cluster.size() === 1) {\n      this.deleteCluster(cluster);\n    }\n  }\n\n  private deleteCluster(cluster: Cluster) {\n    for (const station of cluster.stations) {\n      station.setCluster(null);\n    }\n    cluster.clear();\n  }\n\n  private connect(from: TrainStation, to: TrainStation) {\n    const path = this.pathService.findTilePath(from.tile(), to.tile());\n    if (path.length > 0 && path.length < this.game.config().railroadMaxSize()) {\n      const railRoad = new Railroad(from, to, path);\n      this.game.addExecution(new RailroadExecution(railRoad));\n      from.addRailroad(railRoad);\n      to.addRailroad(railRoad);\n      return true;\n    }\n    return false;\n  }\n\n  private distanceFrom(\n    start: TrainStation,\n    dest: TrainStation,\n    maxDistance: number,\n  ): number {\n    if (start === dest) return 0;\n\n    const visited = new Set<TrainStation>();\n    const queue: Array<{ station: TrainStation; distance: number }> = [\n      { station: start, distance: 0 },\n    ];\n\n    while (queue.length > 0) {\n      const { station, distance } = queue.shift()!;\n      if (visited.has(station)) continue;\n      visited.add(station);\n\n      if (distance >= maxDistance) continue;\n\n      for (const neighbor of station.neighbors()) {\n        if (neighbor === dest) return distance + 1;\n        if (!visited.has(neighbor)) {\n          queue.push({ station: neighbor, distance: distance + 1 });\n        }\n      }\n    }\n\n    // If destination not found within maxDistance\n    return -1;\n  }\n\n  private computeCluster(start: TrainStation): Set<TrainStation> {\n    const visited = new Set<TrainStation>();\n    const queue = [start];\n\n    while (queue.length > 0) {\n      const current = queue.shift()!;\n      if (visited.has(current)) continue;\n      visited.add(current);\n\n      for (const neighbor of current.neighbors()) {\n        if (!visited.has(neighbor)) queue.push(neighbor);\n      }\n    }\n\n    return visited;\n  }\n\n  private mergeClusters(clustersToMerge: Set<Cluster>) {\n    const merged = new Cluster();\n    for (const cluster of clustersToMerge) {\n      merged.merge(cluster);\n    }\n  }\n}\n", "import { z } from \"zod\";\nimport { UnitType } from \"./game/Game\";\n\nexport const bombUnits = [\"abomb\", \"hbomb\", \"mirv\", \"mirvw\"] as const;\nexport const BombUnitSchema = z.enum(bombUnits);\nexport type BombUnit = z.infer<typeof BombUnitSchema>;\nexport type NukeType =\n  | UnitType.AtomBomb\n  | UnitType.HydrogenBomb\n  | UnitType.MIRV\n  | UnitType.MIRVWarhead;\n\nexport const unitTypeToBombUnit = {\n  [UnitType.AtomBomb]: \"abomb\",\n  [UnitType.HydrogenBomb]: \"hbomb\",\n  [UnitType.MIRV]: \"mirv\",\n  [UnitType.MIRVWarhead]: \"mirvw\",\n} as const satisfies Record<NukeType, BombUnit>;\n\nexport const boatUnits = [\"trade\", \"trans\"] as const;\nexport const BoatUnitSchema = z.enum(boatUnits);\nexport type BoatUnit = z.infer<typeof BoatUnitSchema>;\nexport type BoatUnitType = UnitType.TradeShip | UnitType.TransportShip;\n\n// export const unitTypeToBoatUnit = {\n//   [UnitType.TradeShip]: \"trade\",\n//   [UnitType.TransportShip]: \"trans\",\n// } as const satisfies Record<BoatUnitType, BoatUnit>;\n\nexport const otherUnits = [\n  \"city\",\n  \"defp\",\n  \"port\",\n  \"wshp\",\n  \"silo\",\n  \"saml\",\n  \"fact\",\n] as const;\nexport const OtherUnitSchema = z.enum(otherUnits);\nexport type OtherUnit = z.infer<typeof OtherUnitSchema>;\nexport type OtherUnitType =\n  | UnitType.City\n  | UnitType.DefensePost\n  | UnitType.MissileSilo\n  | UnitType.Port\n  | UnitType.SAMLauncher\n  | UnitType.Warship\n  | UnitType.Factory;\n\nexport const unitTypeToOtherUnit = {\n  [UnitType.City]: \"city\",\n  [UnitType.DefensePost]: \"defp\",\n  [UnitType.MissileSilo]: \"silo\",\n  [UnitType.Port]: \"port\",\n  [UnitType.SAMLauncher]: \"saml\",\n  [UnitType.Warship]: \"wshp\",\n  [UnitType.Factory]: \"fact\",\n} as const satisfies Record<OtherUnitType, OtherUnit>;\n\n// Attacks\nexport const ATTACK_INDEX_SENT = 0; // Outgoing attack troops\nexport const ATTACK_INDEX_RECV = 1; // Incmoing attack troops\nexport const ATTACK_INDEX_CANCEL = 2; // Cancelled attack troops\n\n// Boats\nexport const BOAT_INDEX_SENT = 0; // Boats launched\nexport const BOAT_INDEX_ARRIVE = 1; // Boats arrived\nexport const BOAT_INDEX_CAPTURE = 2; // Boats captured\nexport const BOAT_INDEX_DESTROY = 3; // Boats destroyed\n\n// Bombs\nexport const BOMB_INDEX_LAUNCH = 0; // Bombs launched\nexport const BOMB_INDEX_LAND = 1; // Bombs landed\nexport const BOMB_INDEX_INTERCEPT = 2; // Bombs intercepted\n\n// Gold\nexport const GOLD_INDEX_WORK = 0; // Gold earned by workers\nexport const GOLD_INDEX_WAR = 1; // Gold earned by conquering players\nexport const GOLD_INDEX_TRADE = 2; // Gold earned by trade ships\nexport const GOLD_INDEX_STEAL = 3; // Gold earned by capturing trade ships\n\n// Other Units\nexport const OTHER_INDEX_BUILT = 0; // Structures and warships built\nexport const OTHER_INDEX_DESTROY = 1; // Structures and warships destroyed\nexport const OTHER_INDEX_CAPTURE = 2; // Structures captured\nexport const OTHER_INDEX_LOST = 3; // Structures/warships destroyed/captured by others\nexport const OTHER_INDEX_UPGRADE = 4; // Structures upgraded\n\nexport const BigIntStringSchema = z.preprocess((val) => {\n  if (typeof val === \"string\" && /^-?\\d+$/.test(val)) return BigInt(val);\n  if (typeof val === \"bigint\") return val;\n  return val;\n}, z.bigint());\n\nconst AtLeastOneNumberSchema = BigIntStringSchema.array().min(1);\nexport type AtLeastOneNumber = z.infer<typeof AtLeastOneNumberSchema>;\n\nexport const PlayerStatsSchema = z\n  .object({\n    attacks: AtLeastOneNumberSchema.optional(),\n    betrayals: BigIntStringSchema.optional(),\n    killedAt: BigIntStringSchema.optional(),\n    conquests: BigIntStringSchema.optional(),\n    boats: z.partialRecord(BoatUnitSchema, AtLeastOneNumberSchema).optional(),\n    bombs: z.partialRecord(BombUnitSchema, AtLeastOneNumberSchema).optional(),\n    gold: AtLeastOneNumberSchema.optional(),\n    units: z.partialRecord(OtherUnitSchema, AtLeastOneNumberSchema).optional(),\n  })\n  .optional();\nexport type PlayerStats = z.infer<typeof PlayerStatsSchema>;\n", "import { AllPlayersStats } from \"../Schemas\";\nimport {\n  ATTACK_INDEX_CANCEL,\n  ATTACK_INDEX_RECV,\n  ATTACK_INDEX_SENT,\n  BOAT_INDEX_ARRIVE,\n  BOAT_INDEX_CAPTURE,\n  BOAT_INDEX_DESTROY,\n  BOAT_INDEX_SENT,\n  BoatUnit,\n  BOMB_INDEX_INTERCEPT,\n  BOMB_INDEX_LAND,\n  BOMB_INDEX_LAUNCH,\n  GOLD_INDEX_STEAL,\n  GOLD_INDEX_TRADE,\n  GOLD_INDEX_WAR,\n  GOLD_INDEX_WORK,\n  NukeType,\n  OTHER_INDEX_BUILT,\n  OTHER_INDEX_CAPTURE,\n  OTHER_INDEX_DESTROY,\n  OTHER_INDEX_LOST,\n  OTHER_INDEX_UPGRADE,\n  OtherUnitType,\n  PlayerStats,\n  unitTypeToBombUnit,\n  unitTypeToOtherUnit,\n} from \"../StatsSchemas\";\nimport { Player, TerraNullius, UnitType } from \"./Game\";\nimport { Stats } from \"./Stats\";\n\ntype BigIntLike = bigint | number;\nfunction _bigint(value: BigIntLike): bigint {\n  switch (typeof value) {\n    case \"bigint\":\n      return value;\n    case \"number\":\n      return BigInt(Math.floor(value));\n  }\n}\n\nexport class StatsImpl implements Stats {\n  private readonly data: AllPlayersStats = {};\n\n  private _numMirvLaunched: bigint = 0n;\n\n  numMirvsLaunched(): bigint {\n    return this._numMirvLaunched;\n  }\n\n  getPlayerStats(player: Player): PlayerStats {\n    const clientID = player.clientID();\n    if (clientID === null) return undefined;\n    return this.data[clientID];\n  }\n\n  stats() {\n    return this.data;\n  }\n\n  private _makePlayerStats(player: Player): PlayerStats {\n    const clientID = player.clientID();\n    if (clientID === null) return undefined;\n    if (clientID in this.data) {\n      return this.data[clientID];\n    }\n    const data = {} satisfies PlayerStats;\n    this.data[clientID] = data;\n    return data;\n  }\n\n  private _addAttack(player: Player, index: number, value: BigIntLike) {\n    const p = this._makePlayerStats(player);\n    if (p === undefined) return;\n    p.attacks ??= [0n];\n    while (p.attacks.length <= index) p.attacks.push(0n);\n    p.attacks[index] += _bigint(value);\n  }\n\n  private _addBetrayal(player: Player, value: BigIntLike) {\n    const data = this._makePlayerStats(player);\n    if (data === undefined) return;\n    data.betrayals ??= 0n;\n    data.betrayals += _bigint(value);\n  }\n\n  private _addBoat(\n    player: Player,\n    type: BoatUnit,\n    index: number,\n    value: BigIntLike,\n  ) {\n    const p = this._makePlayerStats(player);\n    if (p === undefined) return;\n    p.boats ??= { [type]: [0n] };\n    p.boats[type] ??= [0n];\n    while (p.boats[type].length <= index) p.boats[type].push(0n);\n    p.boats[type][index] += _bigint(value);\n  }\n\n  private _addBomb(\n    player: Player,\n    nukeType: NukeType,\n    index: number,\n    value: BigIntLike,\n  ): void {\n    const type = unitTypeToBombUnit[nukeType];\n    const p = this._makePlayerStats(player);\n    if (p === undefined) return;\n    p.bombs ??= { [type]: [0n] };\n    p.bombs[type] ??= [0n];\n    while (p.bombs[type].length <= index) p.bombs[type].push(0n);\n    p.bombs[type][index] += _bigint(value);\n  }\n\n  private _addGold(player: Player, index: number, value: BigIntLike) {\n    const p = this._makePlayerStats(player);\n    if (p === undefined) return;\n    p.gold ??= [0n];\n    while (p.gold.length <= index) p.gold.push(0n);\n    p.gold[index] += _bigint(value);\n  }\n\n  private _addOtherUnit(\n    player: Player,\n    otherUnitType: OtherUnitType,\n    index: number,\n    value: BigIntLike,\n  ) {\n    const type = unitTypeToOtherUnit[otherUnitType];\n    const p = this._makePlayerStats(player);\n    if (p === undefined) return;\n    p.units ??= { [type]: [0n] };\n    p.units[type] ??= [0n];\n    while (p.units[type].length <= index) p.units[type].push(0n);\n    p.units[type][index] += _bigint(value);\n  }\n\n  private _addConquest(player: Player) {\n    const p = this._makePlayerStats(player);\n    if (p === undefined) return;\n    if (p.conquests === undefined) {\n      p.conquests = _bigint(1);\n    } else {\n      p.conquests += _bigint(1);\n    }\n  }\n\n  private _addPlayerKilled(player: Player, tick: number) {\n    const p = this._makePlayerStats(player);\n    if (p === undefined) return;\n    p.killedAt = _bigint(tick);\n  }\n\n  attack(\n    player: Player,\n    target: Player | TerraNullius,\n    troops: BigIntLike,\n  ): void {\n    this._addAttack(player, ATTACK_INDEX_SENT, troops);\n    if (target.isPlayer()) {\n      this._addAttack(target, ATTACK_INDEX_RECV, troops);\n    }\n  }\n\n  attackCancel(\n    player: Player,\n    target: Player | TerraNullius,\n    troops: BigIntLike,\n  ): void {\n    this._addAttack(player, ATTACK_INDEX_CANCEL, troops);\n    this._addAttack(player, ATTACK_INDEX_SENT, -troops);\n    if (target.isPlayer()) {\n      this._addAttack(target, ATTACK_INDEX_RECV, -troops);\n    }\n  }\n\n  betray(player: Player): void {\n    this._addBetrayal(player, 1);\n  }\n\n  boatSendTrade(player: Player, target: Player): void {\n    this._addBoat(player, \"trade\", BOAT_INDEX_SENT, 1);\n  }\n\n  boatArriveTrade(player: Player, target: Player, gold: BigIntLike): void {\n    this._addBoat(player, \"trade\", BOAT_INDEX_ARRIVE, 1);\n    this._addGold(player, GOLD_INDEX_TRADE, gold);\n    this._addGold(target, GOLD_INDEX_TRADE, gold);\n  }\n\n  boatCapturedTrade(player: Player, target: Player, gold: BigIntLike): void {\n    this._addBoat(player, \"trade\", BOAT_INDEX_CAPTURE, 1);\n    this._addGold(player, GOLD_INDEX_STEAL, gold);\n  }\n\n  boatDestroyTrade(player: Player, target: Player): void {\n    this._addBoat(player, \"trade\", BOAT_INDEX_DESTROY, 1);\n  }\n\n  boatSendTroops(\n    player: Player,\n    target: Player | TerraNullius,\n    troops: BigIntLike,\n  ): void {\n    this._addBoat(player, \"trans\", BOAT_INDEX_SENT, 1);\n  }\n\n  boatArriveTroops(\n    player: Player,\n    target: Player | TerraNullius,\n    troops: BigIntLike,\n  ): void {\n    this._addBoat(player, \"trans\", BOAT_INDEX_ARRIVE, 1);\n  }\n\n  boatDestroyTroops(player: Player, target: Player, troops: BigIntLike): void {\n    this._addBoat(player, \"trans\", BOAT_INDEX_DESTROY, 1);\n  }\n\n  bombLaunch(\n    player: Player,\n    target: Player | TerraNullius,\n    type: NukeType,\n  ): void {\n    if (type === UnitType.MIRV) {\n      this._numMirvLaunched++;\n    }\n    this._addBomb(player, type, BOMB_INDEX_LAUNCH, 1);\n  }\n\n  bombLand(\n    player: Player,\n    target: Player | TerraNullius,\n    type: NukeType,\n  ): void {\n    this._addBomb(player, type, BOMB_INDEX_LAND, 1);\n  }\n\n  bombIntercept(player: Player, type: NukeType, count: BigIntLike): void {\n    this._addBomb(player, type, BOMB_INDEX_INTERCEPT, count);\n  }\n\n  goldWork(player: Player, gold: BigIntLike): void {\n    this._addGold(player, GOLD_INDEX_WORK, gold);\n  }\n\n  goldWar(player: Player, captured: Player, gold: BigIntLike): void {\n    this._addGold(player, GOLD_INDEX_WAR, gold);\n    this._addConquest(player);\n  }\n\n  unitBuild(player: Player, type: OtherUnitType): void {\n    this._addOtherUnit(player, type, OTHER_INDEX_BUILT, 1);\n  }\n\n  unitCapture(player: Player, type: OtherUnitType): void {\n    this._addOtherUnit(player, type, OTHER_INDEX_CAPTURE, 1);\n  }\n\n  unitUpgrade(player: Player, type: OtherUnitType): void {\n    this._addOtherUnit(player, type, OTHER_INDEX_UPGRADE, 1);\n  }\n\n  unitDestroy(player: Player, type: OtherUnitType): void {\n    this._addOtherUnit(player, type, OTHER_INDEX_DESTROY, 1);\n  }\n\n  unitLose(player: Player, type: OtherUnitType): void {\n    this._addOtherUnit(player, type, OTHER_INDEX_LOST, 1);\n  }\n\n  playerKilled(player: Player, tick: number): void {\n    this._addPlayerKilled(player, tick);\n  }\n\n  lobbyFillTime(fillTimeMs: number): void {}\n}\n", "import { PseudoRandom } from \"../PseudoRandom\";\nimport { simpleHash } from \"../Util\";\nimport { PlayerInfo, PlayerType, Team } from \"./Game\";\n\nexport function assignTeams(\n  players: PlayerInfo[],\n  teams: Team[],\n  maxTeamSize: number = getMaxTeamSize(players.length, teams.length),\n): Map<PlayerInfo, Team | \"kicked\"> {\n  const result = new Map<PlayerInfo, Team | \"kicked\">();\n  const teamPlayerCount = new Map<Team, number>();\n\n  // Group players by clan\n  const clanGroups = new Map<string, PlayerInfo[]>();\n  const noClanPlayers: PlayerInfo[] = [];\n\n  // Sort players into clan groups or no-clan list\n  for (const player of players) {\n    if (player.clan) {\n      if (!clanGroups.has(player.clan)) {\n        clanGroups.set(player.clan, []);\n      }\n      clanGroups.get(player.clan)!.push(player);\n    } else {\n      noClanPlayers.push(player);\n    }\n  }\n\n  // Sort clans by size (largest first)\n  const sortedClans = Array.from(clanGroups.entries()).sort(\n    (a, b) => b[1].length - a[1].length,\n  );\n\n  // First, assign clan players\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  for (const [_, clanPlayers] of sortedClans) {\n    // Try to keep the clan together on the team with fewer players\n    let team: Team | null = null;\n    let teamSize = 0;\n    for (const t of teams) {\n      const p = teamPlayerCount.get(t) ?? 0;\n      if (team !== null && teamSize <= p) continue;\n      teamSize = p;\n      team = t;\n    }\n\n    if (team === null) continue;\n\n    for (const player of clanPlayers) {\n      if (teamSize < maxTeamSize) {\n        teamSize++;\n        result.set(player, team);\n      } else {\n        result.set(player, \"kicked\");\n      }\n    }\n    teamPlayerCount.set(team, teamSize);\n  }\n\n  // Then, assign non-clan players to balance teams\n  let nationPlayers = noClanPlayers.filter(\n    (player) => player.playerType === PlayerType.FakeHuman,\n  );\n  if (nationPlayers.length > 0) {\n    // Shuffle only nations to randomize their team assignment\n    const random = new PseudoRandom(simpleHash(nationPlayers[0].id));\n    nationPlayers = random.shuffleArray(nationPlayers);\n  }\n  const otherPlayers = noClanPlayers.filter(\n    (player) => player.playerType !== PlayerType.FakeHuman,\n  );\n\n  for (const player of otherPlayers.concat(nationPlayers)) {\n    let team: Team | null = null;\n    let teamSize = 0;\n    for (const t of teams) {\n      const p = teamPlayerCount.get(t) ?? 0;\n      if (team !== null && teamSize <= p) continue;\n      teamSize = p;\n      team = t;\n    }\n    if (team === null) continue;\n    teamPlayerCount.set(team, teamSize + 1);\n    result.set(player, team);\n  }\n\n  return result;\n}\n\nexport function assignTeamsLobbyPreview(\n  players: PlayerInfo[],\n  teams: Team[],\n  nationCount: number,\n): Map<PlayerInfo, Team | \"kicked\"> {\n  const maxTeamSize = getMaxTeamSize(\n    players.length + nationCount,\n    teams.length,\n  );\n  return assignTeams(players, teams, maxTeamSize);\n}\n\nexport function getMaxTeamSize(numPlayers: number, numTeams: number): number {\n  return Math.ceil(numPlayers / numTeams);\n}\n", "import { ClientID } from \"../Schemas\";\nimport { TerraNullius } from \"./Game\";\n\nexport class TerraNulliusImpl implements TerraNullius {\n  constructor() {}\n  smallID(): number {\n    return 0;\n  }\n  clientID(): ClientID {\n    return \"TERRA_NULLIUS_CLIENT_ID\";\n  }\n\n  id() {\n    return null;\n  }\n\n  isPlayer(): false {\n    return false as const;\n  }\n}\n", "import { PlayerID, Unit, UnitType } from \"./Game\";\nimport { GameMap, TileRef } from \"./GameMap\";\nimport { UnitView } from \"./GameView\";\n\nexport type UnitPredicate = (value: {\n  unit: Unit | UnitView;\n  distSquared: number;\n}) => boolean;\n\nexport class UnitGrid {\n  private grid: Map<UnitType, Set<Unit | UnitView>>[][];\n  private readonly cellSize = 100;\n\n  constructor(private gm: GameMap) {\n    this.grid = Array(Math.ceil(gm.height() / this.cellSize))\n      .fill(null)\n      .map(() =>\n        Array(Math.ceil(gm.width() / this.cellSize))\n          .fill(null)\n          .map(() => new Map<UnitType, Set<Unit | UnitView>>()),\n      );\n  }\n\n  // Get grid coordinates from pixel coordinates\n  private getGridCoords(x: number, y: number): [number, number] {\n    return [Math.floor(x / this.cellSize), Math.floor(y / this.cellSize)];\n  }\n\n  // Add a unit to the grid\n  addUnit(unit: Unit | UnitView) {\n    const tile = unit.tile();\n    const [gridX, gridY] = this.getGridCoords(this.gm.x(tile), this.gm.y(tile));\n\n    if (this.isValidCell(gridX, gridY)) {\n      const unitSet = this.grid[gridY][gridX].get(unit.type());\n      if (unitSet !== undefined) {\n        unitSet.add(unit);\n      } else {\n        this.grid[gridY][gridX].set(\n          unit.type(),\n          new Set<Unit | UnitView>([unit]),\n        );\n      }\n    }\n  }\n\n  // Remove a unit from the grid\n  removeUnit(unit: Unit | UnitView) {\n    const tile = unit.tile();\n    this.removeUnitByTile(unit, tile);\n  }\n\n  removeUnitByTile(unit: Unit | UnitView, tile: TileRef) {\n    const [gridX, gridY] = this.getGridCoords(this.gm.x(tile), this.gm.y(tile));\n\n    if (this.isValidCell(gridX, gridY)) {\n      const unitSet = this.grid[gridY][gridX].get(unit.type());\n      if (unitSet !== undefined) {\n        unitSet.delete(unit);\n      }\n    }\n  }\n\n  /**\n   * Move an unit to its new cell if it changed\n   */\n  updateUnitCell(unit: Unit | UnitView) {\n    const newTile = unit.tile();\n    const oldTile = unit.lastTile();\n    const [gridX, gridY] = this.getGridCoords(\n      this.gm.x(oldTile),\n      this.gm.y(oldTile),\n    );\n    const [newGridX, newGridY] = this.getGridCoords(\n      this.gm.x(newTile),\n      this.gm.y(newTile),\n    );\n    if (gridX !== newGridX || gridY !== newGridY) {\n      this.removeUnitByTile(unit, oldTile);\n      this.addUnit(unit);\n    }\n  }\n\n  private isValidCell(gridX: number, gridY: number): boolean {\n    return (\n      gridX >= 0 &&\n      gridX < this.grid[0].length &&\n      gridY >= 0 &&\n      gridY < this.grid.length\n    );\n  }\n\n  // Compute the exact cells in range of tile\n  private getCellsInRange(tile: TileRef, range: number) {\n    const x = this.gm.x(tile);\n    const y = this.gm.y(tile);\n    const cellSize = this.cellSize;\n    const [gridX, gridY] = this.getGridCoords(x, y);\n    const startGridX = Math.max(\n      0,\n      gridX - Math.ceil((range - (x % cellSize)) / cellSize),\n    );\n    const endGridX = Math.min(\n      this.grid[0].length - 1,\n      gridX + Math.ceil((range - (cellSize - (x % cellSize))) / cellSize),\n    );\n    const startGridY = Math.max(\n      0,\n      gridY - Math.ceil((range - (y % cellSize)) / cellSize),\n    );\n    const endGridY = Math.min(\n      this.grid.length - 1,\n      gridY + Math.ceil((range - (cellSize - (y % cellSize))) / cellSize),\n    );\n\n    return { startGridX, endGridX, startGridY, endGridY };\n  }\n\n  private squaredDistanceFromTile(\n    unit: Unit | UnitView,\n    tile: TileRef,\n  ): number {\n    const x = this.gm.x(tile);\n    const y = this.gm.y(tile);\n    const tileX = this.gm.x(unit.tile());\n    const tileY = this.gm.y(unit.tile());\n    const dx = tileX - x;\n    const dy = tileY - y;\n    const distSquared = dx * dx + dy * dy;\n    return distSquared;\n  }\n\n  // Get all units within range of a point\n  // Returns [unit, distanceSquared] pairs for efficient filtering\n  nearbyUnits(\n    tile: TileRef,\n    searchRange: number,\n    types: readonly UnitType[] | UnitType,\n    predicate?: UnitPredicate,\n    includeUnderConstruction: boolean = false,\n  ): Array<{ unit: Unit | UnitView; distSquared: number }> {\n    const nearby: Array<{ unit: Unit | UnitView; distSquared: number }> = [];\n    const { startGridX, endGridX, startGridY, endGridY } = this.getCellsInRange(\n      tile,\n      searchRange,\n    );\n    const rangeSquared = searchRange * searchRange;\n    const typeSet = Array.isArray(types) ? new Set(types) : new Set([types]);\n    for (let cy = startGridY; cy <= endGridY; cy++) {\n      for (let cx = startGridX; cx <= endGridX; cx++) {\n        for (const type of typeSet) {\n          const unitSet = this.grid[cy][cx].get(type);\n          if (unitSet === undefined) continue;\n          for (const unit of unitSet) {\n            if (!unit.isActive()) continue;\n            // Exclude units under construction by default (e.g., defense posts being built)\n            // But include them for spacing checks\n            if (!includeUnderConstruction && unit.isUnderConstruction())\n              continue;\n            const distSquared = this.squaredDistanceFromTile(unit, tile);\n            if (distSquared > rangeSquared) continue;\n            const value = { unit, distSquared };\n            if (predicate !== undefined && !predicate(value)) continue;\n            nearby.push(value);\n          }\n        }\n      }\n    }\n    return nearby;\n  }\n\n  private unitIsInRange(\n    unit: Unit | UnitView,\n    tile: TileRef,\n    rangeSquared: number,\n    playerId?: PlayerID,\n    includeUnderConstruction: boolean = false,\n  ): boolean {\n    if (!unit.isActive()) {\n      return false;\n    }\n    // Exclude units under construction by default (e.g., defense posts being built)\n    // But include them for spacing checks\n    if (!includeUnderConstruction && unit.isUnderConstruction()) {\n      return false;\n    }\n    if (playerId !== undefined && unit.owner().id() !== playerId) {\n      return false;\n    }\n    const distSquared = this.squaredDistanceFromTile(unit, tile);\n    return distSquared <= rangeSquared;\n  }\n\n  // Return true if it finds an owned specific unit in range\n  hasUnitNearby(\n    tile: TileRef,\n    searchRange: number,\n    type: UnitType,\n    playerId?: PlayerID,\n    includeUnderConstruction: boolean = false,\n  ): boolean {\n    const { startGridX, endGridX, startGridY, endGridY } = this.getCellsInRange(\n      tile,\n      searchRange,\n    );\n    const rangeSquared = searchRange * searchRange;\n    for (let cy = startGridY; cy <= endGridY; cy++) {\n      for (let cx = startGridX; cx <= endGridX; cx++) {\n        const unitSet = this.grid[cy][cx].get(type);\n        if (unitSet === undefined) continue;\n        for (const unit of unitSet) {\n          if (\n            this.unitIsInRange(\n              unit,\n              tile,\n              rangeSquared,\n              playerId,\n              includeUnderConstruction,\n            )\n          ) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n}\n", "import { renderNumber } from \"../../client/Utils\";\nimport { Config } from \"../configuration/Config\";\nimport { AllPlayersStats, ClientID, Winner } from \"../Schemas\";\nimport { simpleHash } from \"../Util\";\nimport { AllianceImpl } from \"./AllianceImpl\";\nimport { AllianceRequestImpl } from \"./AllianceRequestImpl\";\nimport {\n  Alliance,\n  AllianceRequest,\n  Cell,\n  ColoredTeams,\n  Duos,\n  EmojiMessage,\n  Execution,\n  Game,\n  GameMode,\n  GameUpdates,\n  HumansVsNations,\n  MessageType,\n  MutableAlliance,\n  Nation,\n  Player,\n  PlayerID,\n  PlayerInfo,\n  PlayerType,\n  Quads,\n  Team,\n  TerrainType,\n  TerraNullius,\n  Trios,\n  Unit,\n  UnitInfo,\n  UnitType,\n} from \"./Game\";\nimport { GameMap, TileRef, TileUpdate } from \"./GameMap\";\nimport { GameUpdate, GameUpdateType } from \"./GameUpdates\";\nimport { PlayerImpl } from \"./PlayerImpl\";\nimport { RailNetwork } from \"./RailNetwork\";\nimport { createRailNetwork } from \"./RailNetworkImpl\";\nimport { Stats } from \"./Stats\";\nimport { StatsImpl } from \"./StatsImpl\";\nimport { assignTeams } from \"./TeamAssignment\";\nimport { TerraNulliusImpl } from \"./TerraNulliusImpl\";\nimport { UnitGrid, UnitPredicate } from \"./UnitGrid\";\n\nexport function createGame(\n  humans: PlayerInfo[],\n  nations: Nation[],\n  gameMap: GameMap,\n  miniGameMap: GameMap,\n  config: Config,\n): Game {\n  const stats = new StatsImpl();\n  return new GameImpl(humans, nations, gameMap, miniGameMap, config, stats);\n}\n\nexport type CellString = string;\n\nexport class GameImpl implements Game {\n  private _ticks = 0;\n\n  private unInitExecs: Execution[] = [];\n\n  _players: Map<PlayerID, PlayerImpl> = new Map<PlayerID, PlayerImpl>();\n  _playersBySmallID: Player[] = [];\n\n  private execs: Execution[] = [];\n  private _width: number;\n  private _height: number;\n  _terraNullius: TerraNulliusImpl;\n\n  allianceRequests: AllianceRequestImpl[] = [];\n  alliances_: AllianceImpl[] = [];\n\n  private nextPlayerID = 1;\n  private _nextUnitID = 1;\n\n  private updates: GameUpdates = createGameUpdatesMap();\n  private unitGrid: UnitGrid;\n\n  private playerTeams: Team[];\n  private botTeam: Team = ColoredTeams.Bot;\n  private _railNetwork: RailNetwork = createRailNetwork(this);\n\n  // Used to assign unique IDs to each new alliance\n  private nextAllianceID: number = 0;\n\n  constructor(\n    private _humans: PlayerInfo[],\n    private _nations: Nation[],\n    private _map: GameMap,\n    private miniGameMap: GameMap,\n    private _config: Config,\n    private _stats: Stats,\n  ) {\n    this._terraNullius = new TerraNulliusImpl();\n    this._width = _map.width();\n    this._height = _map.height();\n    this.unitGrid = new UnitGrid(this._map);\n\n    if (_config.gameConfig().gameMode === GameMode.Team) {\n      this.populateTeams();\n    }\n    this.addPlayers();\n  }\n\n  private populateTeams() {\n    let numPlayerTeams = this._config.playerTeams();\n\n    // HumansVsNations mode always has exactly 2 teams\n    if (numPlayerTeams === HumansVsNations) {\n      this.playerTeams = [ColoredTeams.Humans, ColoredTeams.Nations];\n      return;\n    }\n\n    if (typeof numPlayerTeams !== \"number\") {\n      const players = this._humans.length + this._nations.length;\n      switch (numPlayerTeams) {\n        case Duos:\n          numPlayerTeams = Math.ceil(players / 2);\n          break;\n        case Trios:\n          numPlayerTeams = Math.ceil(players / 3);\n          break;\n        case Quads:\n          numPlayerTeams = Math.ceil(players / 4);\n          break;\n        default:\n          throw new Error(`Unknown TeamCountConfig ${numPlayerTeams}`);\n      }\n    }\n    if (numPlayerTeams < 2) {\n      throw new Error(`Too few teams: ${numPlayerTeams}`);\n    } else if (numPlayerTeams < 8) {\n      this.playerTeams = [ColoredTeams.Red, ColoredTeams.Blue];\n      if (numPlayerTeams >= 3) this.playerTeams.push(ColoredTeams.Yellow);\n      if (numPlayerTeams >= 4) this.playerTeams.push(ColoredTeams.Green);\n      if (numPlayerTeams >= 5) this.playerTeams.push(ColoredTeams.Purple);\n      if (numPlayerTeams >= 6) this.playerTeams.push(ColoredTeams.Orange);\n      if (numPlayerTeams >= 7) this.playerTeams.push(ColoredTeams.Teal);\n    } else {\n      this.playerTeams = [];\n      for (let i = 1; i <= numPlayerTeams; i++) {\n        this.playerTeams.push(`Team ${i}`);\n      }\n    }\n  }\n\n  private addPlayers() {\n    if (this.config().gameConfig().gameMode === GameMode.FFA) {\n      this._humans.forEach((p) => this.addPlayer(p));\n      this._nations.forEach((n) => this.addPlayer(n.playerInfo));\n      return;\n    }\n\n    if (this._config.playerTeams() === HumansVsNations) {\n      this._humans.forEach((p) => this.addPlayer(p, ColoredTeams.Humans));\n      this._nations.forEach((n) =>\n        this.addPlayer(n.playerInfo, ColoredTeams.Nations),\n      );\n      return;\n    }\n\n    // Team mode\n    const allPlayers = [\n      ...this._humans,\n      ...this._nations.map((n) => n.playerInfo),\n    ];\n    const playerToTeam = assignTeams(allPlayers, this.playerTeams);\n    for (const [playerInfo, team] of playerToTeam.entries()) {\n      if (team === \"kicked\") {\n        console.warn(`Player ${playerInfo.name} was kicked from team`);\n        continue;\n      }\n      this.addPlayer(playerInfo, team);\n    }\n  }\n\n  isOnEdgeOfMap(ref: TileRef): boolean {\n    return this._map.isOnEdgeOfMap(ref);\n  }\n\n  owner(ref: TileRef): Player | TerraNullius {\n    return this.playerBySmallID(this.ownerID(ref));\n  }\n\n  alliances(): MutableAlliance[] {\n    return this.alliances_;\n  }\n\n  playerBySmallID(id: number): Player | TerraNullius {\n    if (id === 0) {\n      return this.terraNullius();\n    }\n    return this._playersBySmallID[id - 1];\n  }\n  map(): GameMap {\n    return this._map;\n  }\n  miniMap(): GameMap {\n    return this.miniGameMap;\n  }\n\n  addUpdate(update: GameUpdate) {\n    (this.updates[update.type] as GameUpdate[]).push(update);\n  }\n\n  nextUnitID(): number {\n    const old = this._nextUnitID;\n    this._nextUnitID++;\n    return old;\n  }\n\n  setFallout(tile: TileRef, value: boolean) {\n    if (value && this.hasOwner(tile)) {\n      throw Error(`cannot set fallout, tile ${tile} has owner`);\n    }\n    if (this._map.hasFallout(tile)) {\n      return;\n    }\n    this._map.setFallout(tile, value);\n    this.addUpdate({\n      type: GameUpdateType.Tile,\n      update: this.toTileUpdate(tile),\n    });\n  }\n\n  units(...types: UnitType[]): Unit[] {\n    return Array.from(this._players.values()).flatMap((p) => p.units(...types));\n  }\n\n  unitCount(type: UnitType): number {\n    let total = 0;\n    for (const player of this._players.values()) {\n      total += player.unitCount(type);\n    }\n    return total;\n  }\n\n  unitInfo(type: UnitType): UnitInfo {\n    return this.config().unitInfo(type);\n  }\n\n  nations(): Nation[] {\n    return this._nations;\n  }\n\n  createAllianceRequest(\n    requestor: Player,\n    recipient: Player,\n  ): AllianceRequest | null {\n    if (requestor.isAlliedWith(recipient)) {\n      console.log(\"cannot request alliance, already allied\");\n      return null;\n    }\n    if (\n      recipient\n        .incomingAllianceRequests()\n        .find((ar) => ar.requestor() === requestor) !== undefined\n    ) {\n      console.log(`duplicate alliance request from ${requestor.name()}`);\n      return null;\n    }\n    const correspondingReq = requestor\n      .incomingAllianceRequests()\n      .find((ar) => ar.requestor() === recipient);\n    if (correspondingReq !== undefined) {\n      console.log(`got corresponding alliance requests, accepting`);\n      correspondingReq.accept();\n      return null;\n    }\n    const ar = new AllianceRequestImpl(requestor, recipient, this._ticks, this);\n    this.allianceRequests.push(ar);\n    this.addUpdate(ar.toUpdate());\n    return ar;\n  }\n\n  acceptAllianceRequest(request: AllianceRequestImpl) {\n    this.allianceRequests = this.allianceRequests.filter(\n      (ar) => ar !== request,\n    );\n\n    const requestor = request.requestor();\n    const recipient = request.recipient();\n\n    const existing = requestor.allianceWith(recipient);\n    if (existing) {\n      throw new Error(\n        `cannot accept alliance request, already allied with ${recipient.name()}`,\n      );\n    }\n\n    // Create and register the new alliance\n    const alliance = new AllianceImpl(\n      this,\n      requestor as PlayerImpl,\n      recipient as PlayerImpl,\n      this._ticks,\n      this.nextAllianceID++,\n    );\n    this.alliances_.push(alliance);\n    (request.requestor() as PlayerImpl).pastOutgoingAllianceRequests.push(\n      request,\n    );\n\n    // Automatically remove embargoes only if they were automatically created\n    if (requestor.hasEmbargoAgainst(recipient))\n      requestor.endTemporaryEmbargo(recipient);\n    if (recipient.hasEmbargoAgainst(requestor))\n      recipient.endTemporaryEmbargo(requestor);\n\n    this.addUpdate({\n      type: GameUpdateType.AllianceRequestReply,\n      request: request.toUpdate(),\n      accepted: true,\n    });\n  }\n\n  rejectAllianceRequest(request: AllianceRequestImpl) {\n    this.allianceRequests = this.allianceRequests.filter(\n      (ar) => ar !== request,\n    );\n    (request.requestor() as PlayerImpl).pastOutgoingAllianceRequests.push(\n      request,\n    );\n    this.addUpdate({\n      type: GameUpdateType.AllianceRequestReply,\n      request: request.toUpdate(),\n      accepted: false,\n    });\n  }\n\n  hasPlayer(id: PlayerID): boolean {\n    return this._players.has(id);\n  }\n  config(): Config {\n    return this._config;\n  }\n\n  inSpawnPhase(): boolean {\n    return this._ticks <= this.config().numSpawnPhaseTurns();\n  }\n\n  ticks(): number {\n    return this._ticks;\n  }\n\n  executeNextTick(): GameUpdates {\n    this.updates = createGameUpdatesMap();\n    this.execs.forEach((e) => {\n      if (\n        (!this.inSpawnPhase() || e.activeDuringSpawnPhase()) &&\n        e.isActive()\n      ) {\n        e.tick(this._ticks);\n      }\n    });\n    const inited: Execution[] = [];\n    const unInited: Execution[] = [];\n    this.unInitExecs.forEach((e) => {\n      if (!this.inSpawnPhase() || e.activeDuringSpawnPhase()) {\n        e.init(this, this._ticks);\n        inited.push(e);\n      } else {\n        unInited.push(e);\n      }\n    });\n\n    this.removeInactiveExecutions();\n\n    this.execs.push(...inited);\n    this.unInitExecs = unInited;\n    for (const player of this._players.values()) {\n      // Players change each to so always add them\n      this.addUpdate(player.toUpdate());\n    }\n    if (this.ticks() % 10 === 0) {\n      this.addUpdate({\n        type: GameUpdateType.Hash,\n        tick: this.ticks(),\n        hash: this.hash(),\n      });\n    }\n    this._ticks++;\n    return this.updates;\n  }\n\n  private hash(): number {\n    let hash = 1;\n    this._players.forEach((p) => {\n      hash += p.hash();\n    });\n    return hash;\n  }\n\n  terraNullius(): TerraNullius {\n    return this._terraNullius;\n  }\n\n  removeInactiveExecutions(): void {\n    const activeExecs: Execution[] = [];\n    for (const exec of this.execs) {\n      if (this.inSpawnPhase()) {\n        if (exec.activeDuringSpawnPhase()) {\n          if (exec.isActive()) {\n            activeExecs.push(exec);\n          }\n        } else {\n          activeExecs.push(exec);\n        }\n      } else {\n        if (exec.isActive()) {\n          activeExecs.push(exec);\n        }\n      }\n    }\n    this.execs = activeExecs;\n  }\n\n  players(): Player[] {\n    return Array.from(this._players.values()).filter((p) => p.isAlive());\n  }\n\n  allPlayers(): Player[] {\n    return Array.from(this._players.values());\n  }\n\n  executions(): Execution[] {\n    return [...this.execs, ...this.unInitExecs];\n  }\n\n  addExecution(...exec: Execution[]) {\n    this.unInitExecs.push(...exec);\n  }\n\n  removeExecution(exec: Execution) {\n    this.execs = this.execs.filter((execution) => execution !== exec);\n    this.unInitExecs = this.unInitExecs.filter(\n      (execution) => execution !== exec,\n    );\n  }\n\n  playerView(id: PlayerID): Player {\n    return this.player(id);\n  }\n\n  addPlayer(playerInfo: PlayerInfo, team: Team | null = null): Player {\n    const player = new PlayerImpl(\n      this,\n      this.nextPlayerID,\n      playerInfo,\n      this.config().startManpower(playerInfo),\n      team ?? this.maybeAssignTeam(playerInfo),\n    );\n    this._playersBySmallID.push(player);\n    this.nextPlayerID++;\n    this._players.set(playerInfo.id, player);\n    return player;\n  }\n\n  private maybeAssignTeam(player: PlayerInfo): Team | null {\n    if (this._config.gameConfig().gameMode !== GameMode.Team) {\n      return null;\n    }\n    if (player.playerType === PlayerType.Bot) {\n      return this.botTeam;\n    }\n    const rand = simpleHash(player.id);\n    return this.playerTeams[rand % this.playerTeams.length];\n  }\n\n  player(id: PlayerID): Player {\n    const player = this._players.get(id);\n    if (player === undefined) {\n      throw new Error(`Player with id ${id} not found`);\n    }\n    return player;\n  }\n\n  playerByClientID(id: ClientID): Player | null {\n    for (const [, player] of this._players) {\n      if (player.clientID() === id) {\n        return player;\n      }\n    }\n    return null;\n  }\n\n  isOnMap(cell: Cell): boolean {\n    return (\n      cell.x >= 0 &&\n      cell.x < this._width &&\n      cell.y >= 0 &&\n      cell.y < this._height\n    );\n  }\n\n  neighborsWithDiag(tile: TileRef): TileRef[] {\n    const x = this.x(tile);\n    const y = this.y(tile);\n    const ns: TileRef[] = [];\n    for (let dx = -1; dx <= 1; dx++) {\n      for (let dy = -1; dy <= 1; dy++) {\n        if (dx === 0 && dy === 0) continue; // Skip the center tile\n        const newX = x + dx;\n        const newY = y + dy;\n        if (\n          newX >= 0 &&\n          newX < this._width &&\n          newY >= 0 &&\n          newY < this._height\n        ) {\n          ns.push(this._map.ref(newX, newY));\n        }\n      }\n    }\n    return ns;\n  }\n\n  // Zero-allocation neighbor iteration for performance-critical code\n  forEachNeighborWithDiag(\n    tile: TileRef,\n    callback: (neighbor: TileRef) => void,\n  ): void {\n    const x = this.x(tile);\n    const y = this.y(tile);\n    for (let dx = -1; dx <= 1; dx++) {\n      for (let dy = -1; dy <= 1; dy++) {\n        if (dx === 0 && dy === 0) continue; // Skip the center tile\n        const newX = x + dx;\n        const newY = y + dy;\n        if (\n          newX >= 0 &&\n          newX < this._width &&\n          newY >= 0 &&\n          newY < this._height\n        ) {\n          callback(this._map.ref(newX, newY));\n        }\n      }\n    }\n  }\n\n  conquer(owner: PlayerImpl, tile: TileRef): void {\n    if (!this.isLand(tile)) {\n      throw Error(`cannot conquer water`);\n    }\n    const previousOwner = this.owner(tile) as TerraNullius | PlayerImpl;\n    if (previousOwner.isPlayer()) {\n      previousOwner._lastTileChange = this._ticks;\n      previousOwner._tiles.delete(tile);\n      previousOwner._borderTiles.delete(tile);\n    }\n    this._map.setOwnerID(tile, owner.smallID());\n    owner._tiles.add(tile);\n    owner._lastTileChange = this._ticks;\n    this.updateBorders(tile);\n    this._map.setFallout(tile, false);\n    this.addUpdate({\n      type: GameUpdateType.Tile,\n      update: this.toTileUpdate(tile),\n    });\n  }\n\n  relinquish(tile: TileRef) {\n    if (!this.hasOwner(tile)) {\n      throw new Error(`Cannot relinquish tile because it is unowned`);\n    }\n    if (this.isWater(tile)) {\n      throw new Error(\"Cannot relinquish water\");\n    }\n\n    const previousOwner = this.owner(tile) as PlayerImpl;\n    previousOwner._lastTileChange = this._ticks;\n    previousOwner._tiles.delete(tile);\n    previousOwner._borderTiles.delete(tile);\n\n    this._map.setOwnerID(tile, 0);\n    this.updateBorders(tile);\n    this.addUpdate({\n      type: GameUpdateType.Tile,\n      update: this.toTileUpdate(tile),\n    });\n  }\n\n  private updateBorders(tile: TileRef) {\n    const tiles: TileRef[] = [];\n    tiles.push(tile);\n    this.neighbors(tile).forEach((t) => tiles.push(t));\n\n    for (const t of tiles) {\n      if (!this.hasOwner(t)) {\n        continue;\n      }\n      if (this.calcIsBorder(t)) {\n        (this.owner(t) as PlayerImpl)._borderTiles.add(t);\n      } else {\n        (this.owner(t) as PlayerImpl)._borderTiles.delete(t);\n      }\n    }\n  }\n\n  private calcIsBorder(tile: TileRef): boolean {\n    if (!this.hasOwner(tile)) {\n      return false;\n    }\n    for (const neighbor of this.neighbors(tile)) {\n      const bordersEnemy = this.owner(tile) !== this.owner(neighbor);\n      if (bordersEnemy) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  target(targeter: Player, target: Player) {\n    this.addUpdate({\n      type: GameUpdateType.TargetPlayer,\n      playerID: targeter.smallID(),\n      targetID: target.smallID(),\n    });\n  }\n\n  public breakAlliance(breaker: Player, alliance: Alliance) {\n    let other: Player;\n    if (alliance.requestor() === breaker) {\n      other = alliance.recipient();\n    } else {\n      other = alliance.requestor();\n    }\n    if (!breaker.isAlliedWith(other)) {\n      throw new Error(\n        `${breaker} not allied with ${other}, cannot break alliance`,\n      );\n    }\n    if (!other.isTraitor() && !other.isDisconnected()) {\n      breaker.markTraitor();\n    }\n\n    const breakerSet = new Set(breaker.alliances());\n    const alliances = other.alliances().filter((a) => breakerSet.has(a));\n    if (alliances.length !== 1) {\n      throw new Error(\n        `must have exactly one alliance, have ${alliances.length}`,\n      );\n    }\n    this.alliances_ = this.alliances_.filter((a) => a !== alliances[0]);\n    this.addUpdate({\n      type: GameUpdateType.BrokeAlliance,\n      traitorID: breaker.smallID(),\n      betrayedID: other.smallID(),\n    });\n  }\n\n  public expireAlliance(alliance: Alliance) {\n    const p1Set = new Set(alliance.recipient().alliances());\n    const alliances = alliance\n      .requestor()\n      .alliances()\n      .filter((a) => p1Set.has(a));\n    if (alliances.length !== 1) {\n      throw new Error(\n        `cannot expire alliance: must have exactly one alliance, have ${alliances.length}`,\n      );\n    }\n    this.alliances_ = this.alliances_.filter((a) => a !== alliances[0]);\n    this.addUpdate({\n      type: GameUpdateType.AllianceExpired,\n      player1ID: alliance.requestor().smallID(),\n      player2ID: alliance.recipient().smallID(),\n    });\n  }\n\n  sendEmojiUpdate(msg: EmojiMessage): void {\n    this.addUpdate({\n      type: GameUpdateType.Emoji,\n      emoji: msg,\n    });\n  }\n\n  setWinner(winner: Player | Team, allPlayersStats: AllPlayersStats): void {\n    this.addUpdate({\n      type: GameUpdateType.Win,\n      winner: this.makeWinner(winner),\n      allPlayersStats,\n    });\n  }\n\n  private makeWinner(winner: string | Player): Winner | undefined {\n    if (typeof winner === \"string\") {\n      return [\n        \"team\",\n        winner,\n        ...this.players()\n          .filter((p) => p.team() === winner && p.clientID() !== null)\n          .map((p) => p.clientID()!),\n      ];\n    } else {\n      const clientId = winner.clientID();\n      if (clientId === null) return;\n      return [\n        \"player\",\n        clientId,\n        // TODO: Assists (vote for peace)\n      ];\n    }\n  }\n\n  teams(): Team[] {\n    if (this._config.gameConfig().gameMode !== GameMode.Team) {\n      return [];\n    }\n    return [this.botTeam, ...this.playerTeams];\n  }\n\n  displayMessage(\n    message: string,\n    type: MessageType,\n    playerID: PlayerID | null,\n    goldAmount?: bigint,\n    params?: Record<string, string | number>,\n  ): void {\n    let id: number | null = null;\n    if (playerID !== null) {\n      id = this.player(playerID).smallID();\n    }\n    this.addUpdate({\n      type: GameUpdateType.DisplayEvent,\n      messageType: type,\n      message: message,\n      playerID: id,\n      goldAmount: goldAmount,\n      params: params,\n    });\n  }\n\n  displayChat(\n    message: string,\n    category: string,\n    target: PlayerID | undefined,\n    playerID: PlayerID | null,\n    isFrom: boolean,\n    recipient: string,\n  ): void {\n    let id: number | null = null;\n    if (playerID !== null) {\n      id = this.player(playerID).smallID();\n    }\n    this.addUpdate({\n      type: GameUpdateType.DisplayChatEvent,\n      key: message,\n      category: category,\n      target: target,\n      playerID: id,\n      isFrom,\n      recipient: recipient,\n    });\n  }\n\n  displayIncomingUnit(\n    unitID: number,\n    message: string,\n    type: MessageType,\n    playerID: PlayerID,\n  ): void {\n    const id = this.player(playerID).smallID();\n\n    this.addUpdate({\n      type: GameUpdateType.UnitIncoming,\n      unitID: unitID,\n      message: message,\n      messageType: type,\n      playerID: id,\n    });\n  }\n\n  addUnit(u: Unit) {\n    this.unitGrid.addUnit(u);\n  }\n  removeUnit(u: Unit) {\n    this.unitGrid.removeUnit(u);\n    if (u.hasTrainStation()) {\n      this._railNetwork.removeStation(u);\n    }\n  }\n  updateUnitTile(u: Unit) {\n    this.unitGrid.updateUnitCell(u);\n  }\n\n  hasUnitNearby(\n    tile: TileRef,\n    searchRange: number,\n    type: UnitType,\n    playerId?: PlayerID,\n    includeUnderConstruction?: boolean,\n  ) {\n    return this.unitGrid.hasUnitNearby(\n      tile,\n      searchRange,\n      type,\n      playerId,\n      includeUnderConstruction,\n    );\n  }\n\n  nearbyUnits(\n    tile: TileRef,\n    searchRange: number,\n    types: UnitType | UnitType[],\n    predicate?: UnitPredicate,\n    includeUnderConstruction?: boolean,\n  ): Array<{ unit: Unit; distSquared: number }> {\n    return this.unitGrid.nearbyUnits(\n      tile,\n      searchRange,\n      types,\n      predicate,\n      includeUnderConstruction,\n    ) as Array<{\n      unit: Unit;\n      distSquared: number;\n    }>;\n  }\n\n  ref(x: number, y: number): TileRef {\n    return this._map.ref(x, y);\n  }\n  isValidRef(ref: TileRef): boolean {\n    return this._map.isValidRef(ref);\n  }\n  x(ref: TileRef): number {\n    return this._map.x(ref);\n  }\n  y(ref: TileRef): number {\n    return this._map.y(ref);\n  }\n  cell(ref: TileRef): Cell {\n    return this._map.cell(ref);\n  }\n  width(): number {\n    return this._map.width();\n  }\n  height(): number {\n    return this._map.height();\n  }\n  numLandTiles(): number {\n    return this._map.numLandTiles();\n  }\n  isValidCoord(x: number, y: number): boolean {\n    return this._map.isValidCoord(x, y);\n  }\n  isLand(ref: TileRef): boolean {\n    return this._map.isLand(ref);\n  }\n  isOceanShore(ref: TileRef): boolean {\n    return this._map.isOceanShore(ref);\n  }\n  isOcean(ref: TileRef): boolean {\n    return this._map.isOcean(ref);\n  }\n  isShoreline(ref: TileRef): boolean {\n    return this._map.isShoreline(ref);\n  }\n  magnitude(ref: TileRef): number {\n    return this._map.magnitude(ref);\n  }\n  ownerID(ref: TileRef): number {\n    return this._map.ownerID(ref);\n  }\n  hasOwner(ref: TileRef): boolean {\n    return this._map.hasOwner(ref);\n  }\n  setOwnerID(ref: TileRef, playerId: number): void {\n    return this._map.setOwnerID(ref, playerId);\n  }\n  hasFallout(ref: TileRef): boolean {\n    return this._map.hasFallout(ref);\n  }\n  isBorder(ref: TileRef): boolean {\n    return this._map.isBorder(ref);\n  }\n  neighbors(ref: TileRef): TileRef[] {\n    return this._map.neighbors(ref);\n  }\n  // Zero-allocation neighbor iteration (cardinal only)\n  forEachNeighbor(tile: TileRef, callback: (neighbor: TileRef) => void): void {\n    const x = this.x(tile);\n    const y = this.y(tile);\n    if (x > 0) callback(this._map.ref(x - 1, y));\n    if (x + 1 < this._width) callback(this._map.ref(x + 1, y));\n    if (y > 0) callback(this._map.ref(x, y - 1));\n    if (y + 1 < this._height) callback(this._map.ref(x, y + 1));\n  }\n  isWater(ref: TileRef): boolean {\n    return this._map.isWater(ref);\n  }\n  isLake(ref: TileRef): boolean {\n    return this._map.isLake(ref);\n  }\n  isShore(ref: TileRef): boolean {\n    return this._map.isShore(ref);\n  }\n  cost(ref: TileRef): number {\n    return this._map.cost(ref);\n  }\n  terrainType(ref: TileRef): TerrainType {\n    return this._map.terrainType(ref);\n  }\n  forEachTile(fn: (tile: TileRef) => void): void {\n    return this._map.forEachTile(fn);\n  }\n  manhattanDist(c1: TileRef, c2: TileRef): number {\n    return this._map.manhattanDist(c1, c2);\n  }\n  euclideanDistSquared(c1: TileRef, c2: TileRef): number {\n    return this._map.euclideanDistSquared(c1, c2);\n  }\n  bfs(\n    tile: TileRef,\n    filter: (gm: GameMap, tile: TileRef) => boolean,\n  ): Set<TileRef> {\n    return this._map.bfs(tile, filter);\n  }\n  toTileUpdate(tile: TileRef): bigint {\n    return this._map.toTileUpdate(tile);\n  }\n  updateTile(tu: TileUpdate): TileRef {\n    return this._map.updateTile(tu);\n  }\n  numTilesWithFallout(): number {\n    return this._map.numTilesWithFallout();\n  }\n  stats(): Stats {\n    return this._stats;\n  }\n  railNetwork(): RailNetwork {\n    return this._railNetwork;\n  }\n  conquerPlayer(conqueror: Player, conquered: Player) {\n    if (conquered.isDisconnected() && conqueror.isOnSameTeam(conquered)) {\n      const ships = conquered\n        .units()\n        .filter(\n          (u) =>\n            u.type() === UnitType.Warship ||\n            u.type() === UnitType.TransportShip,\n        );\n\n      for (const ship of ships) {\n        conqueror.captureUnit(ship);\n      }\n    }\n\n    const gold = conquered.gold();\n    this.displayMessage(\n      `Conquered ${conquered.displayName()} received ${renderNumber(\n        gold,\n      )} gold`,\n      MessageType.CONQUERED_PLAYER,\n      conqueror.id(),\n      gold,\n    );\n    conqueror.addGold(gold);\n    conquered.removeGold(gold);\n    this.addUpdate({\n      type: GameUpdateType.ConquestEvent,\n      conquerorId: conqueror.id(),\n      conqueredId: conquered.id(),\n      gold,\n    });\n\n    // Record stats\n    this.stats().goldWar(conqueror, conquered, gold);\n  }\n}\n\n// Or a more dynamic approach that will catch new enum values:\nconst createGameUpdatesMap = (): GameUpdates => {\n  const map = {} as GameUpdates;\n  Object.values(GameUpdateType)\n    .filter((key) => !isNaN(Number(key))) // Filter out reverse mappings\n    .forEach((key) => {\n      map[key as GameUpdateType] = [];\n    });\n  return map;\n};\n", "import { GameMapSize, GameMapType } from \"./Game\";\nimport { GameMap, GameMapImpl } from \"./GameMap\";\nimport { GameMapLoader } from \"./GameMapLoader\";\n\nexport type TerrainMapData = {\n  nations: Nation[];\n  gameMap: GameMap;\n  miniGameMap: GameMap;\n};\n\nconst loadedMaps = new Map<GameMapType, TerrainMapData>();\n\nexport interface MapMetadata {\n  width: number;\n  height: number;\n  num_land_tiles: number;\n}\n\nexport interface MapManifest {\n  name: string;\n  map: MapMetadata;\n  map4x: MapMetadata;\n  map16x: MapMetadata;\n  nations: Nation[];\n}\n\nexport interface Nation {\n  coordinates: [number, number];\n  flag: string;\n  name: string;\n  strength: number;\n}\n\nexport async function loadTerrainMap(\n  map: GameMapType,\n  mapSize: GameMapSize,\n  terrainMapFileLoader: GameMapLoader,\n): Promise<TerrainMapData> {\n  const cached = loadedMaps.get(map);\n  if (cached !== undefined) return cached;\n  const mapFiles = terrainMapFileLoader.getMapData(map);\n  const manifest = await mapFiles.manifest();\n\n  const gameMap =\n    mapSize === GameMapSize.Normal\n      ? await genTerrainFromBin(manifest.map, await mapFiles.mapBin())\n      : await genTerrainFromBin(manifest.map4x, await mapFiles.map4xBin());\n\n  const miniMap =\n    mapSize === GameMapSize.Normal\n      ? await genTerrainFromBin(\n          mapSize === GameMapSize.Normal ? manifest.map4x : manifest.map16x,\n          await mapFiles.map4xBin(),\n        )\n      : await genTerrainFromBin(manifest.map16x, await mapFiles.map16xBin());\n\n  if (mapSize === GameMapSize.Compact) {\n    manifest.nations.forEach((nation) => {\n      nation.coordinates = [\n        Math.floor(nation.coordinates[0] / 2),\n        Math.floor(nation.coordinates[1] / 2),\n      ];\n    });\n  }\n\n  const result = {\n    nations: manifest.nations,\n    gameMap: gameMap,\n    miniGameMap: miniMap,\n  };\n  loadedMaps.set(map, result);\n  return result;\n}\n\nexport async function genTerrainFromBin(\n  mapData: MapMetadata,\n  data: Uint8Array,\n): Promise<GameMap> {\n  if (data.length !== mapData.width * mapData.height) {\n    throw new Error(\n      `Invalid data: buffer size ${data.length} incorrect for ${mapData.width}x${mapData.height} terrain plus 4 bytes for dimensions.`,\n    );\n  }\n\n  return new GameMapImpl(\n    mapData.width,\n    mapData.height,\n    data,\n    mapData.num_land_tiles,\n  );\n}\n", "import mod from \"./index.js\";\n\nexport default mod;\nexport const DataSet = mod.DataSet;\nexport const ParserError = mod.ParserError;\nexport const PhraseBuilder = mod.PhraseBuilder;\nexport const RegExpMatcher = mod.RegExpMatcher;\nexport const SyntaxKind = mod.SyntaxKind;\nexport const TextCensor = mod.TextCensor;\nexport const assignIncrementingIds = mod.assignIncrementingIds;\nexport const asteriskCensorStrategy = mod.asteriskCensorStrategy;\nexport const collapseDuplicatesTransformer = mod.collapseDuplicatesTransformer;\nexport const compareMatchByPositionAndId = mod.compareMatchByPositionAndId;\nexport const englishDataset = mod.englishDataset;\nexport const englishRecommendedBlacklistMatcherTransformers = mod.englishRecommendedBlacklistMatcherTransformers;\nexport const englishRecommendedTransformers = mod.englishRecommendedTransformers;\nexport const englishRecommendedWhitelistMatcherTransformers = mod.englishRecommendedWhitelistMatcherTransformers;\nexport const fixedCharCensorStrategy = mod.fixedCharCensorStrategy;\nexport const fixedPhraseCensorStrategy = mod.fixedPhraseCensorStrategy;\nexport const grawlixCensorStrategy = mod.grawlixCensorStrategy;\nexport const keepEndCensorStrategy = mod.keepEndCensorStrategy;\nexport const keepStartCensorStrategy = mod.keepStartCensorStrategy;\nexport const parseRawPattern = mod.parseRawPattern;\nexport const pattern = mod.pattern;\nexport const randomCharFromSetCensorStrategy = mod.randomCharFromSetCensorStrategy;\nexport const remapCharactersTransformer = mod.remapCharactersTransformer;\nexport const resolveConfusablesTransformer = mod.resolveConfusablesTransformer;\nexport const resolveLeetSpeakTransformer = mod.resolveLeetSpeakTransformer;\nexport const skipNonAlphabeticTransformer = mod.skipNonAlphabeticTransformer;\nexport const toAsciiLowerCaseTransformer = mod.toAsciiLowerCaseTransformer;\n", "{\n  \"help\": [\n    {\n      \"key\": \"troops\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"troops_frontlines\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"gold\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"no_attack\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"sorry_attack\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"alliance\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"help_defend\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"trade_partners\",\n      \"requiresPlayer\": false\n    }\n  ],\n  \"attack\": [\n    {\n      \"key\": \"attack\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"mirv\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"focus\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"finish\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"build_warships\",\n      \"requiresPlayer\": false\n    }\n  ],\n  \"defend\": [\n    {\n      \"key\": \"defend\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"defend_from\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"dont_attack\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"ally\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"build_posts\",\n      \"requiresPlayer\": false\n    }\n  ],\n  \"greet\": [\n    {\n      \"key\": \"hello\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"good_job\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"good_luck\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"have_fun\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"gg\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"nice_to_meet\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"well_played\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"hi_again\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"bye\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"thanks\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"oops\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"trust_me\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"trust_broken\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"ruining_games\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"dont_do_that\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"same_team\",\n      \"requiresPlayer\": false\n    }\n  ],\n  \"misc\": [\n    {\n      \"key\": \"go\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"strategy\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"fun\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"team_up\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"pr\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"build_closer\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"coastline\",\n      \"requiresPlayer\": false\n    }\n  ],\n  \"warnings\": [\n    {\n      \"key\": \"strong\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"weak\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"mirv_soon\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"number1_warning\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"stalemate\",\n      \"requiresPlayer\": false\n    },\n    {\n      \"key\": \"has_allies\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"no_allies\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"betrayed\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"betrayed_me\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"getting_big\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"danger_base\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"saving_for_mirv\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"mirv_ready\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"snowballing\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"cheating\",\n      \"requiresPlayer\": true\n    },\n    {\n      \"key\": \"stop_trading\",\n      \"requiresPlayer\": true\n    }\n  ]\n}\n", "[\n  {\n    \"code\": \"xx\",\n    \"name\": \"None\"\n  },\n  {\n    \"code\": \"Abbasid Caliphate\",\n    \"continent\": \"Asia\",\n    \"name\": \"Abbasid Caliphate\"\n  },\n  {\n    \"code\": \"Achaemenid Empire\",\n    \"continent\": \"Asia\",\n    \"name\": \"Achaemenid Empire\"\n  },\n  {\n    \"code\": \"ae\",\n    \"continent\": \"Asia\",\n    \"name\": \"United Arab Emirates\"\n  },\n  {\n    \"code\": \"af\",\n    \"continent\": \"Asia\",\n    \"name\": \"Afghanistan\"\n  },\n  {\n    \"code\": \"African union\",\n    \"continent\": \"Africa\",\n    \"name\": \"African Union\"\n  },\n  {\n    \"code\": \"ag\",\n    \"continent\": \"North America\",\n    \"name\": \"Antigua and Barbuda\"\n  },\n  {\n    \"code\": \"ai\",\n    \"continent\": \"North America\",\n    \"name\": \"Anguilla\"\n  },\n  {\n    \"code\": \"1_Airgialla\",\n    \"continent\": \"Europe\",\n    \"name\": \"Airgialla\"\n  },\n  {\n    \"code\": \"al\",\n    \"continent\": \"Europe\",\n    \"name\": \"Albania\"\n  },\n  {\n    \"code\": \"Alabama\",\n    \"continent\": \"North America\",\n    \"name\": \"Alabama\"\n  },\n  {\n    \"code\": \"ax\",\n    \"continent\": \"Europe\",\n    \"name\": \"Aland Islands\"\n  },\n  {\n    \"code\": \"Alaska\",\n    \"continent\": \"North America\",\n    \"name\": \"Alaska\"\n  },\n  {\n    \"code\": \"dz\",\n    \"continent\": \"Africa\",\n    \"name\": \"Algeria\"\n  },\n  {\n    \"code\": \"Amazigh flag\",\n    \"continent\": \"Africa\",\n    \"name\": \"Amazigh Flag\"\n  },\n  {\n    \"code\": \"amazonas\",\n    \"continent\": \"South America\",\n    \"name\": \"Amazonas\"\n  },\n  {\n    \"code\": \"as\",\n    \"continent\": \"Oceania\",\n    \"name\": \"American Samoa\"\n  },\n  {\n    \"code\": \"am\",\n    \"continent\": \"Asia\",\n    \"name\": \"Armenia\"\n  },\n  {\n    \"code\": \"Anarchist flag\",\n    \"name\": \"Anarchist Flag\"\n  },\n  {\n    \"code\": \"ad\",\n    \"continent\": \"Europe\",\n    \"name\": \"Andorra\"\n  },\n  {\n    \"code\": \"ao\",\n    \"continent\": \"Africa\",\n    \"name\": \"Angola\"\n  },\n  {\n    \"code\": \"aq\",\n    \"name\": \"Antarctica\"\n  },\n  {\n    \"code\": \"antipope\",\n    \"continent\": \"Europe\",\n    \"name\": \"Anti-Pope\"\n  },\n  {\n    \"code\": \"aquitaine\",\n    \"continent\": \"Europe\",\n    \"name\": \"Aquitaine\"\n  },\n  {\n    \"code\": \"ar\",\n    \"continent\": \"South America\",\n    \"name\": \"Argentina\"\n  },\n  {\n    \"code\": \"Aram Damascus\",\n    \"continent\": \"Asia\",\n    \"name\": \"Aram Damascus\"\n  },\n  {\n    \"code\": \"Arabia\",\n    \"continent\": \"Asia\",\n    \"name\": \"Arabia\"\n  },\n  {\n    \"code\": \"Arizona\",\n    \"continent\": \"North America\",\n    \"name\": \"Arizona\"\n  },\n  {\n    \"code\": \"Arkansas\",\n    \"continent\": \"North America\",\n    \"name\": \"Arkansas\"\n  },\n  {\n    \"code\": \"armagnac\",\n    \"continent\": \"Europe\",\n    \"name\": \"Armagnac\"\n  },\n  {\n    \"code\": \"aw\",\n    \"continent\": \"South America\",\n    \"name\": \"Aruba\"\n  },\n  {\n    \"code\": \"sh-ac\",\n    \"continent\": \"Africa\",\n    \"name\": \"Ascension Island\"\n  },\n  {\n    \"code\": \"Assyria\",\n    \"continent\": \"Asia\",\n    \"name\": \"Assyria\"\n  },\n  {\n    \"code\": \"asturias\",\n    \"continent\": \"Europe\",\n    \"name\": \"Asturias\"\n  },\n  {\n    \"code\": \"Athens\",\n    \"continent\": \"Europe\",\n    \"name\": \"Athens\"\n  },\n  {\n    \"code\": \"at\",\n    \"continent\": \"Europe\",\n    \"name\": \"Austria\"\n  },\n  {\n    \"code\": \"austria-hungary\",\n    \"continent\": \"Europe\",\n    \"name\": \"Austria-Hungary\"\n  },\n  {\n    \"code\": \"au\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Australia\"\n  },\n  {\n    \"code\": \"az\",\n    \"continent\": \"Asia\",\n    \"name\": \"Azerbaijan\"\n  },\n  {\n    \"code\": \"Aztec Empire\",\n    \"continent\": \"North America\",\n    \"name\": \"Aztec Empire\"\n  },\n  {\n    \"code\": \"bs\",\n    \"continent\": \"North America\",\n    \"name\": \"Bahamas\"\n  },\n  {\n    \"code\": \"bahia\",\n    \"continent\": \"South America\",\n    \"name\": \"Bahia\"\n  },\n  {\n    \"code\": \"bh\",\n    \"continent\": \"Asia\",\n    \"name\": \"Bahrain\"\n  },\n  {\n    \"code\": \"baguette\",\n    \"name\": \"Baguette\"\n  },\n  {\n    \"code\": \"bd\",\n    \"continent\": \"Asia\",\n    \"name\": \"Bangladesh\"\n  },\n  {\n    \"code\": \"bb\",\n    \"continent\": \"North America\",\n    \"name\": \"Barbados\"\n  },\n  {\n    \"code\": \"Babylonia\",\n    \"continent\": \"Asia\",\n    \"name\": \"Babylonia\"\n  },\n  {\n    \"code\": \"es-pv\",\n    \"continent\": \"Europe\",\n    \"name\": \"Basque Country\"\n  },\n  {\n    \"code\": \"by\",\n    \"continent\": \"Europe\",\n    \"name\": \"Belarus\"\n  },\n  {\n    \"code\": \"be\",\n    \"continent\": \"Europe\",\n    \"name\": \"Belgium\"\n  },\n  {\n    \"code\": \"bz\",\n    \"continent\": \"North America\",\n    \"name\": \"Belize\"\n  },\n  {\n    \"code\": \"bj\",\n    \"continent\": \"Africa\",\n    \"name\": \"Benin\"\n  },\n  {\n    \"code\": \"bm\",\n    \"continent\": \"North America\",\n    \"name\": \"Bermuda\"\n  },\n  {\n    \"code\": \"bt\",\n    \"continent\": \"Asia\",\n    \"name\": \"Bhutan\"\n  },\n  {\n    \"code\": \"bo\",\n    \"continent\": \"South America\",\n    \"name\": \"Bolivia\"\n  },\n  {\n    \"code\": \"bq\",\n    \"continent\": \"South America\",\n    \"name\": \"Bonaire, Sint Eustatius and Saba\"\n  },\n  {\n    \"code\": \"ba\",\n    \"continent\": \"Europe\",\n    \"name\": \"Bosnia and Herzegovina\"\n  },\n  {\n    \"code\": \"bw\",\n    \"continent\": \"Africa\",\n    \"name\": \"Botswana\"\n  },\n  {\n    \"code\": \"bv\",\n    \"name\": \"Bouvet Island\"\n  },\n  {\n    \"code\": \"br\",\n    \"continent\": \"South America\",\n    \"name\": \"Brazil\"\n  },\n  {\n    \"code\": \"io\",\n    \"continent\": \"Asia\",\n    \"name\": \"British Indian Ocean Territory\"\n  },\n  {\n    \"code\": \"brittany\",\n    \"continent\": \"Europe\",\n    \"name\": \"Brittany\"\n  },\n  {\n    \"code\": \"bn\",\n    \"continent\": \"Asia\",\n    \"name\": \"Brunei Darussalam\"\n  },\n  {\n    \"code\": \"buenos_aires\",\n    \"continent\": \"South America\",\n    \"name\": \"Buenos Aires\"\n  },\n  {\n    \"code\": \"bg\",\n    \"continent\": \"Europe\",\n    \"name\": \"Bulgaria\"\n  },\n  {\n    \"code\": \"bf\",\n    \"continent\": \"Africa\",\n    \"name\": \"Burkina Faso\"\n  },\n  {\n    \"code\": \"burgundy\",\n    \"continent\": \"Europe\",\n    \"name\": \"Burgundy\"\n  },\n  {\n    \"code\": \"Burma\",\n    \"continent\": \"Asia\",\n    \"name\": \"Burma\"\n  },\n  {\n    \"code\": \"bi\",\n    \"continent\": \"Africa\",\n    \"name\": \"Burundi\"\n  },\n  {\n    \"code\": \"Byzantine Empire\",\n    \"continent\": \"Europe\",\n    \"name\": \"Byzantine Empire\"\n  },\n  {\n    \"code\": \"cv\",\n    \"continent\": \"Africa\",\n    \"name\": \"Cabo Verde\"\n  },\n  {\n    \"code\": \"California\",\n    \"continent\": \"North America\",\n    \"name\": \"California\"\n  },\n  {\n    \"code\": \"kh\",\n    \"continent\": \"Asia\",\n    \"name\": \"Cambodia\"\n  },\n  {\n    \"code\": \"cm\",\n    \"continent\": \"Africa\",\n    \"name\": \"Cameroon\"\n  },\n  {\n    \"code\": \"ca\",\n    \"continent\": \"North America\",\n    \"name\": \"Canada\"\n  },\n  {\n    \"code\": \"ic\",\n    \"continent\": \"Africa\",\n    \"name\": \"Canary Islands\"\n  },\n  {\n    \"code\": \"Capybara\",\n    \"name\": \"Capybara\"\n  },\n  {\n    \"code\": \"Carthage\",\n    \"continent\": \"Africa\",\n    \"name\": \"Carthage\"\n  },\n  {\n    \"code\": \"castille\",\n    \"continent\": \"Europe\",\n    \"name\": \"Castille\"\n  },\n  {\n    \"code\": \"catamarca\",\n    \"continent\": \"South America\",\n    \"name\": \"Catamarca\"\n  },\n  {\n    \"code\": \"es-ct\",\n    \"continent\": \"Europe\",\n    \"name\": \"Catalonia\"\n  },\n  {\n    \"code\": \"ky\",\n    \"continent\": \"North America\",\n    \"name\": \"Cayman Islands\"\n  },\n  {\n    \"code\": \"Ceara\",\n    \"continent\": \"South America\",\n    \"name\": \"Cear\u00E1\"\n  },\n  {\n    \"code\": \"cf\",\n    \"continent\": \"Africa\",\n    \"name\": \"Central African Republic\"\n  },\n  {\n    \"code\": \"td\",\n    \"continent\": \"Africa\",\n    \"name\": \"Chad\"\n  },\n  {\n    \"code\": \"cl\",\n    \"continent\": \"South America\",\n    \"name\": \"Chile\"\n  },\n  {\n    \"code\": \"cn\",\n    \"continent\": \"Asia\",\n    \"name\": \"China\"\n  },\n  {\n    \"code\": \"Chinook\",\n    \"continent\": \"North America\",\n    \"name\": \"Chinook\"\n  },\n  {\n    \"code\": \"cx\",\n    \"continent\": \"Asia\",\n    \"name\": \"Christmas Island\"\n  },\n  {\n    \"code\": \"Chuvashia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Chuvashia\"\n  },\n  {\n    \"code\": \"Circassia\",\n    \"continent\": \"Asia\",\n    \"name\": \"Circassia\"\n  },\n  {\n    \"code\": \"cp\",\n    \"name\": \"Clipperton Island\"\n  },\n  {\n    \"code\": \"cc\",\n    \"continent\": \"Asia\",\n    \"name\": \"Cocos (Keeling) Islands\"\n  },\n  {\n    \"code\": \"Colchis\",\n    \"continent\": \"Asia\",\n    \"name\": \"Colchis\"\n  },\n  {\n    \"code\": \"co\",\n    \"continent\": \"South America\",\n    \"name\": \"Colombia\"\n  },\n  {\n    \"code\": \"Colorado\",\n    \"continent\": \"North America\",\n    \"name\": \"Colorado\"\n  },\n  {\n    \"code\": \"km\",\n    \"continent\": \"Africa\",\n    \"name\": \"Comoros\"\n  },\n  {\n    \"code\": \"Communist flag\",\n    \"name\": \"Communist Flag\"\n  },\n  {\n    \"code\": \"Confederate States\",\n    \"continent\": \"North America\",\n    \"name\": \"Confederate States\",\n    \"restricted\": true\n  },\n  {\n    \"code\": \"1_Connacht\",\n    \"continent\": \"Europe\",\n    \"name\": \"Connacht\"\n  },\n  {\n    \"code\": \"ck\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Cook Islands\"\n  },\n  {\n    \"code\": \"cordoba\",\n    \"continent\": \"Europe\",\n    \"name\": \"Cordoba\"\n  },\n  {\n    \"code\": \"Corsica\",\n    \"continent\": \"Europe\",\n    \"name\": \"Corsica\"\n  },\n  {\n    \"code\": \"cr\",\n    \"continent\": \"North America\",\n    \"name\": \"Costa Rica\"\n  },\n  {\n    \"code\": \"ci\",\n    \"continent\": \"Africa\",\n    \"name\": \"C\u00F4te d'Ivoire\"\n  },\n  {\n    \"code\": \"hr\",\n    \"continent\": \"Europe\",\n    \"name\": \"Croatia\"\n  },\n  {\n    \"code\": \"Cthulhu Republic\",\n    \"name\": \"Cthulhu Republic\"\n  },\n  {\n    \"code\": \"cu\",\n    \"continent\": \"North America\",\n    \"name\": \"Cuba\"\n  },\n  {\n    \"code\": \"cw\",\n    \"continent\": \"South America\",\n    \"name\": \"Cura\u00E7ao\"\n  },\n  {\n    \"code\": \"cy\",\n    \"continent\": \"Europe\",\n    \"name\": \"Cyprus\"\n  },\n  {\n    \"code\": \"cz\",\n    \"continent\": \"Europe\",\n    \"name\": \"Czech Republic\"\n  },\n  {\n    \"code\": \"Danzig\",\n    \"continent\": \"Europe\",\n    \"name\": \"Danzig\"\n  },\n  {\n    \"code\": \"1_Dalriata\",\n    \"continent\": \"Europe\",\n    \"name\": \"D\u00E1l Riata\"\n  },\n  {\n    \"code\": \"dk\",\n    \"continent\": \"Europe\",\n    \"name\": \"Denmark\"\n  },\n  {\n    \"code\": \"cd\",\n    \"continent\": \"Africa\",\n    \"name\": \"Democratic Republic of the Congo\"\n  },\n  {\n    \"code\": \"dg\",\n    \"continent\": \"Asia\",\n    \"name\": \"Diego Garcia\"\n  },\n  {\n    \"code\": \"Dilmun\",\n    \"continent\": \"Asia\",\n    \"name\": \"Dilmun\"\n  },\n  {\n    \"code\": \"dj\",\n    \"continent\": \"Africa\",\n    \"name\": \"Djibouti\"\n  },\n  {\n    \"code\": \"dm\",\n    \"continent\": \"North America\",\n    \"name\": \"Dominica\"\n  },\n  {\n    \"code\": \"do\",\n    \"continent\": \"North America\",\n    \"name\": \"Dominican Republic\"\n  },\n  {\n    \"code\": \"1_Dumnonia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Dumnonia\"\n  },\n  {\n    \"code\": \"Dutch East India Company\",\n    \"name\": \"Dutch East India Company\"\n  },\n  {\n    \"code\": \"1_Dyfed\",\n    \"continent\": \"Europe\",\n    \"name\": \"Dyfed\"\n  },\n  {\n    \"code\": \"1_East Anglia\",\n    \"continent\": \"Europe\",\n    \"name\": \"East Anglia\"\n  },\n  {\n    \"code\": \"east_germany\",\n    \"continent\": \"Europe\",\n    \"name\": \"East Germany\"\n  },\n  {\n    \"code\": \"ec\",\n    \"continent\": \"South America\",\n    \"name\": \"Ecuador\"\n  },\n  {\n    \"code\": \"eg\",\n    \"continent\": \"Africa\",\n    \"name\": \"Egypt\"\n  },\n  {\n    \"code\": \"Elam\",\n    \"continent\": \"Asia\",\n    \"name\": \"Elam\"\n  },\n  {\n    \"code\": \"sv\",\n    \"continent\": \"North America\",\n    \"name\": \"El Salvador\"\n  },\n  {\n    \"code\": \"granada\",\n    \"continent\": \"Europe\",\n    \"name\": \"Emirate of Granada\"\n  },\n  {\n    \"code\": \"Empire of Japan\",\n    \"continent\": \"Asia\",\n    \"name\": \"Empire of Japan\"\n  },\n  {\n    \"code\": \"Empire of Japan1\",\n    \"continent\": \"Asia\",\n    \"name\": \"Empire of Japan\"\n  },\n  {\n    \"code\": \"gb-eng\",\n    \"continent\": \"Europe\",\n    \"name\": \"England\"\n  },\n  {\n    \"code\": \"gq\",\n    \"continent\": \"Africa\",\n    \"name\": \"Equatorial Guinea\"\n  },\n  {\n    \"code\": \"er\",\n    \"continent\": \"Africa\",\n    \"name\": \"Eritrea\"\n  },\n  {\n    \"code\": \"1_Essex\",\n    \"continent\": \"Europe\",\n    \"name\": \"Essex\"\n  },\n  {\n    \"code\": \"ee\",\n    \"continent\": \"Europe\",\n    \"name\": \"Estonia\"\n  },\n  {\n    \"code\": \"sz\",\n    \"continent\": \"Africa\",\n    \"name\": \"Eswatini\"\n  },\n  {\n    \"code\": \"et\",\n    \"continent\": \"Africa\",\n    \"name\": \"Ethiopia\"\n  },\n  {\n    \"code\": \"eu\",\n    \"continent\": \"Europe\",\n    \"name\": \"Europe\"\n  },\n  {\n    \"code\": \"fk\",\n    \"continent\": \"South America\",\n    \"name\": \"Falkland Islands\"\n  },\n  {\n    \"code\": \"fo\",\n    \"continent\": \"Europe\",\n    \"name\": \"Faroe Islands\"\n  },\n  {\n    \"code\": \"Fascist Spain\",\n    \"continent\": \"Europe\",\n    \"name\": \"Fascist Spain\",\n    \"restricted\": true\n  },\n  {\n    \"code\": \"fm\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Federated States of Micronesia\"\n  },\n  {\n    \"code\": \"fj\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Fiji\"\n  },\n  {\n    \"code\": \"fi\",\n    \"continent\": \"Europe\",\n    \"name\": \"Finland\"\n  },\n  {\n    \"code\": \"Flanders\",\n    \"continent\": \"Europe\",\n    \"name\": \"Flanders\"\n  },\n  {\n    \"code\": \"Florida\",\n    \"continent\": \"North America\",\n    \"name\": \"Florida\"\n  },\n  {\n    \"code\": \"1_Fortriu\",\n    \"continent\": \"Europe\",\n    \"name\": \"Fortriu\"\n  },\n  {\n    \"code\": \"fr\",\n    \"continent\": \"Europe\",\n    \"name\": \"France\"\n  },\n  {\n    \"code\": \"1_Franks\",\n    \"continent\": \"Europe\",\n    \"name\": \"Franks\"\n  },\n  {\n    \"code\": \"French foreign legion\",\n    \"name\": \"French Foreign Legion\"\n  },\n  {\n    \"code\": \"gf\",\n    \"continent\": \"South America\",\n    \"name\": \"French Guiana\"\n  },\n  {\n    \"code\": \"pf\",\n    \"continent\": \"Oceania\",\n    \"name\": \"French Polynesia\"\n  },\n  {\n    \"code\": \"frost_giant\",\n    \"name\": \"Frost Giant\"\n  },\n  {\n    \"code\": \"tf\",\n    \"continent\": \"Africa\",\n    \"name\": \"French Southern Territories\"\n  },\n  {\n    \"code\": \"ga\",\n    \"continent\": \"Africa\",\n    \"name\": \"Gabon\"\n  },\n  {\n    \"code\": \"galapagos\",\n    \"continent\": \"South America\",\n    \"name\": \"Gal\u00E1pagos\"\n  },\n  {\n    \"code\": \"es-ga\",\n    \"continent\": \"Europe\",\n    \"name\": \"Galicia\"\n  },\n  {\n    \"code\": \"gm\",\n    \"continent\": \"Africa\",\n    \"name\": \"Gambia\"\n  },\n  {\n    \"code\": \"Garamant\",\n    \"continent\": \"Africa\",\n    \"name\": \"Garamantes\"\n  },\n  {\n    \"code\": \"ge\",\n    \"continent\": \"Asia\",\n    \"name\": \"Georgia\"\n  },\n  {\n    \"code\": \"Georgia_US\",\n    \"continent\": \"North America\",\n    \"name\": \"Georgia (US State)\"\n  },\n  {\n    \"code\": \"German Empire\",\n    \"continent\": \"Europe\",\n    \"name\": \"German Empire\",\n    \"restricted\": true\n  },\n  {\n    \"code\": \"de\",\n    \"continent\": \"Europe\",\n    \"name\": \"Germany\"\n  },\n  {\n    \"code\": \"gh\",\n    \"continent\": \"Africa\",\n    \"name\": \"Ghana\"\n  },\n  {\n    \"code\": \"gi\",\n    \"continent\": \"Europe\",\n    \"name\": \"Gibraltar\"\n  },\n  {\n    \"code\": \"gr\",\n    \"continent\": \"Europe\",\n    \"name\": \"Greece\"\n  },\n  {\n    \"code\": \"gl\",\n    \"continent\": \"North America\",\n    \"name\": \"Greenland\"\n  },\n  {\n    \"code\": \"gd\",\n    \"continent\": \"North America\",\n    \"name\": \"Grenada\"\n  },\n  {\n    \"code\": \"gp\",\n    \"continent\": \"North America\",\n    \"name\": \"Guadeloupe\"\n  },\n  {\n    \"code\": \"gu\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Guam\"\n  },\n  {\n    \"code\": \"gt\",\n    \"continent\": \"North America\",\n    \"name\": \"Guatemala\"\n  },\n  {\n    \"code\": \"gg\",\n    \"continent\": \"Europe\",\n    \"name\": \"Guernsey\"\n  },\n  {\n    \"code\": \"gn\",\n    \"continent\": \"Africa\",\n    \"name\": \"Guinea\"\n  },\n  {\n    \"code\": \"gw\",\n    \"continent\": \"Africa\",\n    \"name\": \"Guinea-Bissau\"\n  },\n  {\n    \"code\": \"1_Gwent\",\n    \"continent\": \"Europe\",\n    \"name\": \"Gwent\"\n  },\n  {\n    \"code\": \"1_Gwynedd\",\n    \"continent\": \"Europe\",\n    \"name\": \"Gwynedd\"\n  },\n  {\n    \"code\": \"gy\",\n    \"continent\": \"South America\",\n    \"name\": \"Guyana\"\n  },\n  {\n    \"code\": \"Habsburg Austria\",\n    \"continent\": \"Europe\",\n    \"name\": \"Habsburg Austria\"\n  },\n  {\n    \"code\": \"ht\",\n    \"continent\": \"North America\",\n    \"name\": \"Haiti\"\n  },\n  {\n    \"code\": \"Hawaii\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Hawaii\"\n  },\n  {\n    \"code\": \"hm\",\n    \"name\": \"Heard Island and McDonald Islands\"\n  },\n  {\n    \"code\": \"va\",\n    \"continent\": \"Europe\",\n    \"name\": \"Holy See\"\n  },\n  {\n    \"code\": \"Holy Roman Empire\",\n    \"continent\": \"Europe\",\n    \"name\": \"Holy Roman Empire\"\n  },\n  {\n    \"code\": \"hn\",\n    \"continent\": \"North America\",\n    \"name\": \"Honduras\"\n  },\n  {\n    \"code\": \"hk\",\n    \"continent\": \"Asia\",\n    \"name\": \"Hong Kong\"\n  },\n  {\n    \"code\": \"hu\",\n    \"continent\": \"Europe\",\n    \"name\": \"Hungary\"\n  },\n  {\n    \"code\": \"Hyrcania\",\n    \"continent\": \"Asia\",\n    \"name\": \"Hyrcania\"\n  },\n  {\n    \"code\": \"is\",\n    \"continent\": \"Europe\",\n    \"name\": \"Iceland\"\n  },\n  {\n    \"code\": \"Idaho\",\n    \"continent\": \"North America\",\n    \"name\": \"Idaho\"\n  },\n  {\n    \"code\": \"Illinois\",\n    \"continent\": \"North America\",\n    \"name\": \"Illinois\"\n  },\n  {\n    \"code\": \"in\",\n    \"continent\": \"Asia\",\n    \"name\": \"India\"\n  },\n  {\n    \"code\": \"Indiana\",\n    \"continent\": \"North America\",\n    \"name\": \"Indiana\"\n  },\n  {\n    \"code\": \"id\",\n    \"continent\": \"Asia\",\n    \"name\": \"Indonesia\"\n  },\n  {\n    \"code\": \"Iowa\",\n    \"continent\": \"North America\",\n    \"name\": \"Iowa\"\n  },\n  {\n    \"code\": \"iq\",\n    \"continent\": \"Asia\",\n    \"name\": \"Iraq\"\n  },\n  {\n    \"code\": \"ir\",\n    \"continent\": \"Asia\",\n    \"name\": \"Iran\"\n  },\n  {\n    \"code\": \"Pahlavi Iran\",\n    \"continent\": \"Asia\",\n    \"name\": \"Pahlavi Iran\"\n  },\n  {\n    \"code\": \"ie\",\n    \"continent\": \"Europe\",\n    \"name\": \"Ireland\"\n  },\n  {\n    \"code\": \"im\",\n    \"continent\": \"Europe\",\n    \"name\": \"Isle of Man\"\n  },\n  {\n    \"code\": \"il\",\n    \"continent\": \"Asia\",\n    \"name\": \"Israel\"\n  },\n  {\n    \"code\": \"it\",\n    \"continent\": \"Europe\",\n    \"name\": \"Italy\"\n  },\n  {\n    \"code\": \"italy\",\n    \"continent\": \"Europe\",\n    \"name\": \"Kingdom of Italy\"\n  },\n  {\n    \"code\": \"jm\",\n    \"continent\": \"North America\",\n    \"name\": \"Jamaica\"\n  },\n  {\n    \"code\": \"jp\",\n    \"continent\": \"Asia\",\n    \"name\": \"Japan\"\n  },\n  {\n    \"code\": \"je\",\n    \"continent\": \"Europe\",\n    \"name\": \"Jersey\"\n  },\n  {\n    \"code\": \"jo\",\n    \"continent\": \"Asia\",\n    \"name\": \"Jordan\"\n  },\n  {\n    \"code\": \"Kansas\",\n    \"continent\": \"North America\",\n    \"name\": \"Kansas\"\n  },\n  {\n    \"code\": \"kz\",\n    \"continent\": \"Asia\",\n    \"name\": \"Kazakhstan\"\n  },\n  {\n    \"code\": \"Kemet\",\n    \"continent\": \"Africa\",\n    \"name\": \"Kemet\"\n  },\n  {\n    \"code\": \"ke\",\n    \"continent\": \"Africa\",\n    \"name\": \"Kenya\"\n  },\n  {\n    \"code\": \"1_Kent\",\n    \"continent\": \"Europe\",\n    \"name\": \"Kent\"\n  },\n  {\n    \"code\": \"Kentucky\",\n    \"continent\": \"North America\",\n    \"name\": \"Kentucky\"\n  },\n  {\n    \"code\": \"Khemet\",\n    \"continent\": \"Africa\",\n    \"name\": \"Khemet\"\n  },\n  {\n    \"code\": \"Kingdom of Egypt\",\n    \"continent\": \"Africa\",\n    \"name\": \"Kingdom of Egypt\"\n  },\n  {\n    \"code\": \"Kingdom of Iraq\",\n    \"continent\": \"Asia\",\n    \"name\": \"Kingdom of Iraq\"\n  },\n  {\n    \"code\": \"Kingdom of Jerusalem\",\n    \"continent\": \"Asia\",\n    \"name\": \"Kingdom of Jerusalem\"\n  },\n  {\n    \"code\": \"Kingdom of Judah\",\n    \"continent\": \"Asia\",\n    \"name\": \"Kingdom of Judah\"\n  },\n  {\n    \"code\": \"ki\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Kiribati\"\n  },\n  {\n    \"code\": \"Kiwi\",\n    \"name\": \"Kiwi\"\n  },\n  {\n    \"code\": \"xk\",\n    \"continent\": \"Europe\",\n    \"name\": \"Kosovo\"\n  },\n  {\n    \"code\": \"kurdistan\",\n    \"continent\": \"Asia\",\n    \"name\": \"Kurdistan\"\n  },\n  {\n    \"code\": \"Kush\",\n    \"continent\": \"Africa\",\n    \"name\": \"Kush\"\n  },\n  {\n    \"code\": \"kw\",\n    \"continent\": \"Asia\",\n    \"name\": \"Kuwait\"\n  },\n  {\n    \"code\": \"kg\",\n    \"continent\": \"Asia\",\n    \"name\": \"Kyrgyzstan\"\n  },\n  {\n    \"code\": \"1_Laigin\",\n    \"continent\": \"Europe\",\n    \"name\": \"Laigin\"\n  },\n  {\n    \"code\": \"la\",\n    \"continent\": \"Asia\",\n    \"name\": \"Laos\"\n  },\n  {\n    \"code\": \"lv\",\n    \"continent\": \"Europe\",\n    \"name\": \"Latvia\"\n  },\n  {\n    \"code\": \"League of Nations\",\n    \"name\": \"League of Nations\"\n  },\n  {\n    \"code\": \"lb\",\n    \"continent\": \"Asia\",\n    \"name\": \"Lebanon\"\n  },\n  {\n    \"code\": \"Leinster\",\n    \"continent\": \"Europe\",\n    \"name\": \"Leinster\"\n  },\n  {\n    \"code\": \"leon\",\n    \"continent\": \"Europe\",\n    \"name\": \"Le\u00F3n\"\n  },\n  {\n    \"code\": \"ls\",\n    \"continent\": \"Africa\",\n    \"name\": \"Lesotho\"\n  },\n  {\n    \"code\": \"lr\",\n    \"continent\": \"Africa\",\n    \"name\": \"Liberia\"\n  },\n  {\n    \"code\": \"Liberalism_flag\",\n    \"name\": \"Liberalism Flag\"\n  },\n  {\n    \"code\": \"Libyan Jamahiriya\",\n    \"continent\": \"Africa\",\n    \"name\": \"Libyan Jamahiriya\"\n  },\n  {\n    \"code\": \"ly\",\n    \"continent\": \"Africa\",\n    \"name\": \"Libya\"\n  },\n  {\n    \"code\": \"li\",\n    \"continent\": \"Europe\",\n    \"name\": \"Liechtenstein\"\n  },\n  {\n    \"code\": \"Listenbourg\",\n    \"name\": \"Listenbourg\"\n  },\n  {\n    \"code\": \"lt\",\n    \"continent\": \"Europe\",\n    \"name\": \"Lithuania\"\n  },\n  {\n    \"code\": \"Louisiana\",\n    \"continent\": \"North America\",\n    \"name\": \"Louisiana\"\n  },\n  {\n    \"code\": \"lu\",\n    \"continent\": \"Europe\",\n    \"name\": \"Luxembourg\"\n  },\n  {\n    \"code\": \"Lydia\",\n    \"continent\": \"Asia\",\n    \"name\": \"Lydia\"\n  },\n  {\n    \"code\": \"Macedonia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Macedonia\"\n  },\n  {\n    \"code\": \"mo\",\n    \"continent\": \"Asia\",\n    \"name\": \"Macau\"\n  },\n  {\n    \"code\": \"mg\",\n    \"continent\": \"Africa\",\n    \"name\": \"Madagascar\"\n  },\n  {\n    \"code\": \"Maine\",\n    \"continent\": \"North America\",\n    \"name\": \"Maine\"\n  },\n  {\n    \"code\": \"mw\",\n    \"continent\": \"Africa\",\n    \"name\": \"Malawi\"\n  },\n  {\n    \"code\": \"my\",\n    \"continent\": \"Asia\",\n    \"name\": \"Malaysia\"\n  },\n  {\n    \"code\": \"mv\",\n    \"continent\": \"Asia\",\n    \"name\": \"Maldives\"\n  },\n  {\n    \"code\": \"ml\",\n    \"continent\": \"Africa\",\n    \"name\": \"Mali\"\n  },\n  {\n    \"code\": \"mt\",\n    \"continent\": \"Europe\",\n    \"name\": \"Malta\"\n  },\n  {\n    \"code\": \"Maori flag\",\n    \"continent\": \"Oceania\",\n    \"name\": \"M\u0101ori Flag\"\n  },\n  {\n    \"code\": \"mh\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Marshall Islands\"\n  },\n  {\n    \"code\": \"mq\",\n    \"continent\": \"North America\",\n    \"name\": \"Martinique\"\n  },\n  {\n    \"code\": \"Maryland\",\n    \"continent\": \"North America\",\n    \"name\": \"Maryland\"\n  },\n  {\n    \"code\": \"mr\",\n    \"continent\": \"Africa\",\n    \"name\": \"Mauritania\"\n  },\n  {\n    \"code\": \"mu\",\n    \"continent\": \"Africa\",\n    \"name\": \"Mauritius\"\n  },\n  {\n    \"code\": \"yt\",\n    \"continent\": \"Africa\",\n    \"name\": \"Mayotte\"\n  },\n  {\n    \"code\": \"Median Empire\",\n    \"continent\": \"Asia\",\n    \"name\": \"Median Empire\"\n  },\n  {\n    \"code\": \"1_Mercia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Mercia\"\n  },\n  {\n    \"code\": \"mx\",\n    \"continent\": \"North America\",\n    \"name\": \"Mexico\"\n  },\n  {\n    \"code\": \"Michigan\",\n    \"continent\": \"North America\",\n    \"name\": \"Michigan\"\n  },\n  {\n    \"code\": \"minas_gerais\",\n    \"continent\": \"South America\",\n    \"name\": \"Minas Gerais\"\n  },\n  {\n    \"code\": \"Minnesota\",\n    \"continent\": \"North America\",\n    \"name\": \"Minnesota\"\n  },\n  {\n    \"code\": \"Mississippi\",\n    \"continent\": \"North America\",\n    \"name\": \"Mississippi\"\n  },\n  {\n    \"code\": \"Missouri\",\n    \"continent\": \"North America\",\n    \"name\": \"Missouri\"\n  },\n  {\n    \"code\": \"md\",\n    \"continent\": \"Europe\",\n    \"name\": \"Moldova\"\n  },\n  {\n    \"code\": \"mc\",\n    \"continent\": \"Europe\",\n    \"name\": \"Monaco\"\n  },\n  {\n    \"code\": \"Mongol Empire\",\n    \"continent\": \"Asia\",\n    \"name\": \"Mongol Empire\"\n  },\n  {\n    \"code\": \"mn\",\n    \"continent\": \"Asia\",\n    \"name\": \"Mongolia\"\n  },\n  {\n    \"code\": \"Montana\",\n    \"continent\": \"North America\",\n    \"name\": \"Montana\"\n  },\n  {\n    \"code\": \"me\",\n    \"continent\": \"Europe\",\n    \"name\": \"Montenegro\"\n  },\n  {\n    \"code\": \"ms\",\n    \"continent\": \"North America\",\n    \"name\": \"Montserrat\"\n  },\n  {\n    \"code\": \"ma\",\n    \"continent\": \"Africa\",\n    \"name\": \"Morocco\"\n  },\n  {\n    \"code\": \"mz\",\n    \"continent\": \"Africa\",\n    \"name\": \"Mozambique\"\n  },\n  {\n    \"code\": \"1_Munster\",\n    \"continent\": \"Europe\",\n    \"name\": \"Munster\"\n  },\n  {\n    \"code\": \"mm\",\n    \"continent\": \"Asia\",\n    \"name\": \"Myanmar\"\n  },\n  {\n    \"code\": \"na\",\n    \"continent\": \"Africa\",\n    \"name\": \"Namibia\"\n  },\n  {\n    \"code\": \"NATO\",\n    \"name\": \"NATO\"\n  },\n  {\n    \"code\": \"nr\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Nauru\"\n  },\n  {\n    \"code\": \"Nebraska\",\n    \"continent\": \"North America\",\n    \"name\": \"Nebraska\"\n  },\n  {\n    \"code\": \"np\",\n    \"continent\": \"Asia\",\n    \"name\": \"Nepal\"\n  },\n  {\n    \"code\": \"nl\",\n    \"continent\": \"Europe\",\n    \"name\": \"Netherlands\"\n  },\n  {\n    \"code\": \"neuragic_empire\",\n    \"name\": \"Neuragic Empire\"\n  },\n  {\n    \"code\": \"Nevada\",\n    \"continent\": \"North America\",\n    \"name\": \"Nevada\"\n  },\n  {\n    \"code\": \"nc\",\n    \"continent\": \"Oceania\",\n    \"name\": \"New Caledonia\"\n  },\n  {\n    \"code\": \"New_Hampshire\",\n    \"continent\": \"North America\",\n    \"name\": \"New Hampshire\"\n  },\n  {\n    \"code\": \"New_Jersey\",\n    \"continent\": \"North America\",\n    \"name\": \"New Jersey\"\n  },\n  {\n    \"code\": \"New_Mexico\",\n    \"continent\": \"North America\",\n    \"name\": \"New Mexico\"\n  },\n  {\n    \"code\": \"New_York\",\n    \"continent\": \"North America\",\n    \"name\": \"New York\"\n  },\n  {\n    \"code\": \"nz\",\n    \"continent\": \"Oceania\",\n    \"name\": \"New Zealand\"\n  },\n  {\n    \"code\": \"ni\",\n    \"continent\": \"North America\",\n    \"name\": \"Nicaragua\"\n  },\n  {\n    \"code\": \"ne\",\n    \"continent\": \"Africa\",\n    \"name\": \"Niger\"\n  },\n  {\n    \"code\": \"ng\",\n    \"continent\": \"Africa\",\n    \"name\": \"Nigeria\"\n  },\n  {\n    \"code\": \"nu\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Niue\"\n  },\n  {\n    \"code\": \"nf\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Norfolk Island\"\n  },\n  {\n    \"code\": \"normandy\",\n    \"continent\": \"Europe\",\n    \"name\": \"Normandy\"\n  },\n  {\n    \"code\": \"North karelia\",\n    \"continent\": \"Europe\",\n    \"name\": \"North Karelia\"\n  },\n  {\n    \"code\": \"North_Carolina\",\n    \"continent\": \"North America\",\n    \"name\": \"North Carolina\"\n  },\n  {\n    \"code\": \"North_Dakota\",\n    \"continent\": \"North America\",\n    \"name\": \"North Dakota\"\n  },\n  {\n    \"code\": \"kp\",\n    \"continent\": \"Asia\",\n    \"name\": \"North Korea\"\n  },\n  {\n    \"code\": \"mk\",\n    \"continent\": \"Europe\",\n    \"name\": \"North Macedonia\"\n  },\n  {\n    \"code\": \"northern_ireland\",\n    \"continent\": \"Europe\",\n    \"name\": \"Northern Ireland\"\n  },\n  {\n    \"code\": \"mp\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Northern Mariana Islands\"\n  },\n  {\n    \"code\": \"1_Northern Ui Neill\",\n    \"continent\": \"Europe\",\n    \"name\": \"Northern U\u00ED N\u00E9ill\"\n  },\n  {\n    \"code\": \"1_Northumbria\",\n    \"continent\": \"Europe\",\n    \"name\": \"Northumbria\"\n  },\n  {\n    \"code\": \"no\",\n    \"continent\": \"Europe\",\n    \"name\": \"Norway\"\n  },\n  {\n    \"code\": \"Ohio\",\n    \"continent\": \"North America\",\n    \"name\": \"Ohio\"\n  },\n  {\n    \"code\": \"Oklahoma\",\n    \"continent\": \"North America\",\n    \"name\": \"Oklahoma\"\n  },\n  {\n    \"code\": \"om\",\n    \"continent\": \"Asia\",\n    \"name\": \"Oman\"\n  },\n  {\n    \"code\": \"Oregon\",\n    \"continent\": \"North America\",\n    \"name\": \"Oregon\"\n  },\n  {\n    \"code\": \"Ottoman Empire\",\n    \"continent\": \"Asia\",\n    \"name\": \"Ottoman Empire\"\n  },\n  {\n    \"code\": \"pk\",\n    \"continent\": \"Asia\",\n    \"name\": \"Pakistan\"\n  },\n  {\n    \"code\": \"pw\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Palau\"\n  },\n  {\n    \"code\": \"Palekh\",\n    \"continent\": \"Europe\",\n    \"name\": \"Palekh\"\n  },\n  {\n    \"code\": \"pa\",\n    \"continent\": \"North America\",\n    \"name\": \"Panama\"\n  },\n  {\n    \"code\": \"pg\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Papua New Guinea\"\n  },\n  {\n    \"code\": \"Para\",\n    \"continent\": \"South America\",\n    \"name\": \"Par\u00E1\"\n  },\n  {\n    \"code\": \"py\",\n    \"continent\": \"South America\",\n    \"name\": \"Paraguay\"\n  },\n  {\n    \"code\": \"paris\",\n    \"continent\": \"Europe\",\n    \"name\": \"Paris\"\n  },\n  {\n    \"code\": \"Pennsylvania\",\n    \"continent\": \"North America\",\n    \"name\": \"Pennsylvania\"\n  },\n  {\n    \"code\": \"pe\",\n    \"continent\": \"South America\",\n    \"name\": \"Peru\"\n  },\n  {\n    \"code\": \"Persia\",\n    \"continent\": \"Asia\",\n    \"name\": \"Persia\"\n  },\n  {\n    \"code\": \"ph\",\n    \"continent\": \"Asia\",\n    \"name\": \"Philippines\"\n  },\n  {\n    \"code\": \"Phrygia\",\n    \"continent\": \"Asia\",\n    \"name\": \"Phrygia\"\n  },\n  {\n    \"code\": \"pn\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Pitcairn\"\n  },\n  {\n    \"code\": \"pl\",\n    \"continent\": \"Europe\",\n    \"name\": \"Poland\"\n  },\n  {\n    \"code\": \"polar_bears\",\n    \"name\": \"Polar Bears\"\n  },\n  {\n    \"code\": \"Polish\u2013Lithuanian Commonwealth\",\n    \"continent\": \"Europe\",\n    \"name\": \"Polish\u2013Lithuanian Commonwealth\"\n  },\n  {\n    \"code\": \"pt\",\n    \"continent\": \"Europe\",\n    \"name\": \"Portugal\"\n  },\n  {\n    \"code\": \"1_Powys\",\n    \"continent\": \"Europe\",\n    \"name\": \"Powys\"\n  },\n  {\n    \"code\": \"provence\",\n    \"continent\": \"Europe\",\n    \"name\": \"Provence\"\n  },\n  {\n    \"code\": \"prussia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Prussia\"\n  },\n  {\n    \"code\": \"pr\",\n    \"continent\": \"North America\",\n    \"name\": \"Puerto Rico\"\n  },\n  {\n    \"code\": \"qa\",\n    \"continent\": \"Asia\",\n    \"name\": \"Qatar\"\n  },\n  {\n    \"code\": \"Qing Dynasty\",\n    \"continent\": \"Asia\",\n    \"name\": \"Qing Dynasty\"\n  },\n  {\n    \"code\": \"Quebec\",\n    \"continent\": \"North America\",\n    \"name\": \"Quebec\"\n  },\n  {\n    \"code\": \"Republic of China\",\n    \"continent\": \"Asia\",\n    \"name\": \"Republic of China\"\n  },\n  {\n    \"code\": \"cg\",\n    \"continent\": \"Africa\",\n    \"name\": \"Republic of the Congo\"\n  },\n  {\n    \"code\": \"Republic of Egypt\",\n    \"continent\": \"Africa\",\n    \"name\": \"Republic of Egypt\"\n  },\n  {\n    \"code\": \"Republic of Formosa\",\n    \"continent\": \"Asia\",\n    \"name\": \"Republic of Formosa\"\n  },\n  {\n    \"code\": \"Republic of Korea\",\n    \"continent\": \"Asia\",\n    \"name\": \"Republic of Korea\"\n  },\n  {\n    \"code\": \"Republic of Pirates\",\n    \"continent\": \"North America\",\n    \"name\": \"Republic of Pirates\"\n  },\n  {\n    \"code\": \"re\",\n    \"continent\": \"Africa\",\n    \"name\": \"R\u00E9union\"\n  },\n  {\n    \"code\": \"Rhode_Island\",\n    \"continent\": \"North America\",\n    \"name\": \"Rhode Island\"\n  },\n  {\n    \"code\": \"rio_de_janeiro\",\n    \"continent\": \"South America\",\n    \"name\": \"Rio de Janeiro\"\n  },\n  {\n    \"code\": \"Romanov Russia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Romanov Russia\"\n  },\n  {\n    \"code\": \"ro\",\n    \"continent\": \"Europe\",\n    \"name\": \"Romania\"\n  },\n  {\n    \"code\": \"Ror Empire\",\n    \"name\": \"Ror Empire\"\n  },\n  {\n    \"code\": \"ru\",\n    \"continent\": \"Europe\",\n    \"name\": \"Russia\"\n  },\n  {\n    \"code\": \"rw\",\n    \"continent\": \"Africa\",\n    \"name\": \"Rwanda\"\n  },\n  {\n    \"code\": \"Saba kingdom\",\n    \"continent\": \"Asia\",\n    \"name\": \"Saba Kingdom\"\n  },\n  {\n    \"code\": \"bl\",\n    \"continent\": \"North America\",\n    \"name\": \"Saint Barth\u00E9lemy\"\n  },\n  {\n    \"code\": \"sh-hl\",\n    \"continent\": \"Africa\",\n    \"name\": \"Saint Helena\"\n  },\n  {\n    \"code\": \"kn\",\n    \"continent\": \"North America\",\n    \"name\": \"Saint Kitts and Nevis\"\n  },\n  {\n    \"code\": \"lc\",\n    \"continent\": \"North America\",\n    \"name\": \"Saint Lucia\"\n  },\n  {\n    \"code\": \"mf\",\n    \"continent\": \"North America\",\n    \"name\": \"Saint Martin\"\n  },\n  {\n    \"code\": \"pm\",\n    \"continent\": \"North America\",\n    \"name\": \"Saint Pierre and Miquelon\"\n  },\n  {\n    \"code\": \"vc\",\n    \"continent\": \"North America\",\n    \"name\": \"Saint Vincent and the Grenadines\"\n  },\n  {\n    \"code\": \"Sami flag\",\n    \"continent\": \"Europe\",\n    \"name\": \"Sami Flag\"\n  },\n  {\n    \"code\": \"ws\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Samoa\"\n  },\n  {\n    \"code\": \"sm\",\n    \"continent\": \"Europe\",\n    \"name\": \"San Marino\"\n  },\n  {\n    \"code\": \"Santa Cruz\",\n    \"continent\": \"South America\",\n    \"name\": \"Santa Cruz\"\n  },\n  {\n    \"code\": \"santa_claus\",\n    \"name\": \"Santa Claus\"\n  },\n  {\n    \"code\": \"st\",\n    \"continent\": \"Africa\",\n    \"name\": \"Sao Tome and Principe\"\n  },\n  {\n    \"code\": \"Sao Paulo\",\n    \"continent\": \"South America\",\n    \"name\": \"S\u00E3o Paulo\"\n  },\n  {\n    \"code\": \"sardines\",\n    \"name\": \"Sardines\"\n  },\n  {\n    \"code\": \"Sassanid Empire\",\n    \"continent\": \"Asia\",\n    \"name\": \"Sassanid Empire\"\n  },\n  {\n    \"code\": \"sa\",\n    \"continent\": \"Asia\",\n    \"name\": \"Saudi Arabia\"\n  },\n  {\n    \"code\": \"gb-sct\",\n    \"continent\": \"Europe\",\n    \"name\": \"Scotland\"\n  },\n  {\n    \"code\": \"Second Republic of Iraq\",\n    \"continent\": \"Asia\",\n    \"name\": \"Second Republic of Iraq\"\n  },\n  {\n    \"code\": \"Second Spanish Republic\",\n    \"continent\": \"Europe\",\n    \"name\": \"Second Spanish Republic\"\n  },\n  {\n    \"code\": \"sn\",\n    \"continent\": \"Africa\",\n    \"name\": \"Senegal\"\n  },\n  {\n    \"code\": \"rs\",\n    \"continent\": \"Europe\",\n    \"name\": \"Serbia\"\n  },\n  {\n    \"code\": \"seville\",\n    \"continent\": \"Europe\",\n    \"name\": \"Seville\"\n  },\n  {\n    \"code\": \"sc\",\n    \"continent\": \"Africa\",\n    \"name\": \"Seychelles\"\n  },\n  {\n    \"code\": \"Siam\",\n    \"continent\": \"Asia\",\n    \"name\": \"Siam\"\n  },\n  {\n    \"code\": \"Siberia\",\n    \"continent\": \"Asia\",\n    \"name\": \"Siberia\"\n  },\n  {\n    \"code\": \"Sicily\",\n    \"continent\": \"Europe\",\n    \"name\": \"Sicily\"\n  },\n  {\n    \"code\": \"sl\",\n    \"continent\": \"Africa\",\n    \"name\": \"Sierra Leone\"\n  },\n  {\n    \"code\": \"sg\",\n    \"continent\": \"Asia\",\n    \"name\": \"Singapore\"\n  },\n  {\n    \"code\": \"sx\",\n    \"continent\": \"North America\",\n    \"name\": \"Sint Maarten\"\n  },\n  {\n    \"code\": \"sk\",\n    \"continent\": \"Europe\",\n    \"name\": \"Slovakia\"\n  },\n  {\n    \"code\": \"si\",\n    \"continent\": \"Europe\",\n    \"name\": \"Slovenia\"\n  },\n  {\n    \"code\": \"Socialist_flag\",\n    \"name\": \"Socialist Flag\"\n  },\n  {\n    \"code\": \"sb\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Solomon Islands\"\n  },\n  {\n    \"code\": \"so\",\n    \"continent\": \"Africa\",\n    \"name\": \"Somalia\"\n  },\n  {\n    \"code\": \"za\",\n    \"continent\": \"Africa\",\n    \"name\": \"South Africa\"\n  },\n  {\n    \"code\": \"South_Carolina\",\n    \"continent\": \"North America\",\n    \"name\": \"South Carolina\"\n  },\n  {\n    \"code\": \"South_Dakota\",\n    \"continent\": \"North America\",\n    \"name\": \"South Dakota\"\n  },\n  {\n    \"code\": \"gs\",\n    \"continent\": \"Antarctica\",\n    \"name\": \"South Georgia and the South Sandwich Islands\"\n  },\n  {\n    \"code\": \"kr\",\n    \"continent\": \"Asia\",\n    \"name\": \"South Korea\"\n  },\n  {\n    \"code\": \"ss\",\n    \"continent\": \"Africa\",\n    \"name\": \"South Sudan\"\n  },\n  {\n    \"code\": \"1_Southern Ui Neill\",\n    \"continent\": \"Europe\",\n    \"name\": \"Southern U\u00ED N\u00E9ill\"\n  },\n  {\n    \"code\": \"es\",\n    \"continent\": \"Europe\",\n    \"name\": \"Spain\"\n  },\n  {\n    \"code\": \"spanish_empire\",\n    \"continent\": \"Europe\",\n    \"name\": \"Spanish Empire\"\n  },\n  {\n    \"code\": \"Sparta\",\n    \"continent\": \"Europe\",\n    \"name\": \"Sparta\"\n  },\n  {\n    \"code\": \"SPQR\",\n    \"continent\": \"Europe\",\n    \"name\": \"SPQR\"\n  },\n  {\n    \"code\": \"lk\",\n    \"continent\": \"Asia\",\n    \"name\": \"Sri Lanka\"\n  },\n  {\n    \"code\": \"ps\",\n    \"continent\": \"Asia\",\n    \"name\": \"State of Palestine\"\n  },\n  {\n    \"code\": \"1_Strathclyde\",\n    \"continent\": \"Europe\",\n    \"name\": \"Strathclyde\"\n  },\n  {\n    \"code\": \"sd\",\n    \"continent\": \"Africa\",\n    \"name\": \"Sudan\"\n  },\n  {\n    \"code\": \"Sultanate of Nejd\",\n    \"continent\": \"Asia\",\n    \"name\": \"Sultanate of Nejd\"\n  },\n  {\n    \"code\": \"sr\",\n    \"continent\": \"South America\",\n    \"name\": \"Suriname\"\n  },\n  {\n    \"code\": \"1_Sussex\",\n    \"continent\": \"Europe\",\n    \"name\": \"Sussex\"\n  },\n  {\n    \"code\": \"sj\",\n    \"continent\": \"Europe\",\n    \"name\": \"Svalbard and Jan Mayen\"\n  },\n  {\n    \"code\": \"se\",\n    \"continent\": \"Europe\",\n    \"name\": \"Sweden\"\n  },\n  {\n    \"code\": \"Sweden Norway Union\",\n    \"continent\": \"Europe\",\n    \"name\": \"Sweden Norway Union\"\n  },\n  {\n    \"code\": \"ch\",\n    \"continent\": \"Europe\",\n    \"name\": \"Switzerland\"\n  },\n  {\n    \"code\": \"sy\",\n    \"continent\": \"Asia\",\n    \"name\": \"Syria\"\n  },\n  {\n    \"code\": \"tw\",\n    \"continent\": \"Asia\",\n    \"name\": \"Taiwan\"\n  },\n  {\n    \"code\": \"tj\",\n    \"continent\": \"Asia\",\n    \"name\": \"Tajikistan\"\n  },\n  {\n    \"code\": \"tz\",\n    \"continent\": \"Africa\",\n    \"name\": \"Tanzania\"\n  },\n  {\n    \"code\": \"Tennessee\",\n    \"continent\": \"North America\",\n    \"name\": \"Tennessee\"\n  },\n  {\n    \"code\": \"Texas\",\n    \"continent\": \"North America\",\n    \"name\": \"Texas\"\n  },\n  {\n    \"code\": \"th\",\n    \"continent\": \"Asia\",\n    \"name\": \"Thailand\"\n  },\n  {\n    \"code\": \"tibet\",\n    \"continent\": \"Asia\",\n    \"name\": \"Tibet\"\n  },\n  {\n    \"code\": \"tl\",\n    \"continent\": \"Asia\",\n    \"name\": \"Timor-Leste\"\n  },\n  {\n    \"code\": \"tg\",\n    \"continent\": \"Africa\",\n    \"name\": \"Togo\"\n  },\n  {\n    \"code\": \"tk\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Tokelau\"\n  },\n  {\n    \"code\": \"to\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Tonga\"\n  },\n  {\n    \"code\": \"tt\",\n    \"continent\": \"South America\",\n    \"name\": \"Trinidad and Tobago\"\n  },\n  {\n    \"code\": \"sh-ta\",\n    \"continent\": \"Africa\",\n    \"name\": \"Tristan da Cunha\"\n  },\n  {\n    \"code\": \"Trucial States\",\n    \"continent\": \"Asia\",\n    \"name\": \"Trucial States\"\n  },\n  {\n    \"code\": \"tn\",\n    \"continent\": \"Africa\",\n    \"name\": \"Tunisia\"\n  },\n  {\n    \"code\": \"tr\",\n    \"continent\": \"Asia\",\n    \"name\": \"T\u00FCrkiye\"\n  },\n  {\n    \"code\": \"tm\",\n    \"continent\": \"Asia\",\n    \"name\": \"Turkmenistan\"\n  },\n  {\n    \"code\": \"tc\",\n    \"continent\": \"North America\",\n    \"name\": \"Turks and Caicos Islands\"\n  },\n  {\n    \"code\": \"tv\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Tuvalu\"\n  },\n  {\n    \"code\": \"USA 1776\",\n    \"continent\": \"North America\",\n    \"name\": \"USA 1776\"\n  },\n  {\n    \"code\": \"ussr\",\n    \"continent\": \"Europe\",\n    \"name\": \"USSR\"\n  },\n  {\n    \"code\": \"ug\",\n    \"continent\": \"Africa\",\n    \"name\": \"Uganda\"\n  },\n  {\n    \"code\": \"ua\",\n    \"continent\": \"Europe\",\n    \"name\": \"Ukraine\"\n  },\n  {\n    \"code\": \"1_Ulaid\",\n    \"continent\": \"Europe\",\n    \"name\": \"Ulaid\"\n  },\n  {\n    \"code\": \"Umayyad Caliphate\",\n    \"continent\": \"Asia\",\n    \"name\": \"Umayyad Caliphate\"\n  },\n  {\n    \"code\": \"United Arab Republic\",\n    \"continent\": \"Asia\",\n    \"name\": \"United Arab Republic\"\n  },\n  {\n    \"code\": \"gb\",\n    \"continent\": \"Europe\",\n    \"name\": \"United Kingdom\"\n  },\n  {\n    \"code\": \"un\",\n    \"name\": \"United Nations\"\n  },\n  {\n    \"code\": \"us\",\n    \"continent\": \"North America\",\n    \"name\": \"United States of America\"\n  },\n  {\n    \"code\": \"Urartu\",\n    \"continent\": \"Asia\",\n    \"name\": \"Urartu\"\n  },\n  {\n    \"code\": \"uy\",\n    \"continent\": \"South America\",\n    \"name\": \"Uruguay\"\n  },\n  {\n    \"code\": \"Utah\",\n    \"continent\": \"North America\",\n    \"name\": \"Utah\"\n  },\n  {\n    \"code\": \"uz\",\n    \"continent\": \"Asia\",\n    \"name\": \"Uzbekistan\"\n  },\n  {\n    \"code\": \"valencia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Valencia\"\n  },\n  {\n    \"code\": \"vu\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Vanuatu\"\n  },\n  {\n    \"code\": \"ve\",\n    \"continent\": \"South America\",\n    \"name\": \"Venezuela\"\n  },\n  {\n    \"code\": \"venice\",\n    \"continent\": \"Europe\",\n    \"name\": \"Venice\"\n  },\n  {\n    \"code\": \"Vermont\",\n    \"continent\": \"North America\",\n    \"name\": \"Vermont\"\n  },\n  {\n    \"code\": \"vn\",\n    \"continent\": \"Asia\",\n    \"name\": \"Vietnam\"\n  },\n  {\n    \"code\": \"vg\",\n    \"continent\": \"North America\",\n    \"name\": \"Virgin Islands (British)\"\n  },\n  {\n    \"code\": \"vi\",\n    \"continent\": \"North America\",\n    \"name\": \"Virgin Islands (U.S.)\"\n  },\n  {\n    \"code\": \"Virginia\",\n    \"continent\": \"North America\",\n    \"name\": \"Virginia\"\n  },\n  {\n    \"code\": \"gb-wls\",\n    \"continent\": \"Europe\",\n    \"name\": \"Wales\"\n  },\n  {\n    \"code\": \"Wallonia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Wallonia\"\n  },\n  {\n    \"code\": \"wf\",\n    \"continent\": \"Oceania\",\n    \"name\": \"Wallis and Futuna\"\n  },\n  {\n    \"code\": \"Washington\",\n    \"continent\": \"North America\",\n    \"name\": \"Washington\"\n  },\n  {\n    \"code\": \"1_Wessex\",\n    \"continent\": \"Europe\",\n    \"name\": \"Wessex\"\n  },\n  {\n    \"code\": \"west_germany\",\n    \"continent\": \"Europe\",\n    \"name\": \"West Germany\"\n  },\n  {\n    \"code\": \"West Roman Empire\",\n    \"continent\": \"Europe\",\n    \"name\": \"West Roman Empire\"\n  },\n  {\n    \"code\": \"West_Virginia\",\n    \"continent\": \"North America\",\n    \"name\": \"West Virginia\"\n  },\n  {\n    \"code\": \"eh\",\n    \"continent\": \"Africa\",\n    \"name\": \"Western Sahara\"\n  },\n  {\n    \"code\": \"Wisconsin\",\n    \"continent\": \"North America\",\n    \"name\": \"Wisconsin\"\n  },\n  {\n    \"code\": \"Wyoming\",\n    \"continent\": \"North America\",\n    \"name\": \"Wyoming\"\n  },\n  {\n    \"code\": \"Yellow_Flag\",\n    \"name\": \"Yellow Flag\"\n  },\n  {\n    \"code\": \"ye\",\n    \"continent\": \"Asia\",\n    \"name\": \"Yemen\"\n  },\n  {\n    \"code\": \"yugoslavia\",\n    \"continent\": \"Europe\",\n    \"name\": \"Yugoslavia\"\n  },\n  {\n    \"code\": \"Zaire\",\n    \"continent\": \"Africa\",\n    \"name\": \"Zaire\"\n  },\n  {\n    \"code\": \"zm\",\n    \"continent\": \"Africa\",\n    \"name\": \"Zambia\"\n  },\n  {\n    \"code\": \"Zheleznogorsk\",\n    \"continent\": \"Asia\",\n    \"name\": \"Zheleznogorsk\"\n  },\n  {\n    \"code\": \"zw\",\n    \"continent\": \"Africa\",\n    \"name\": \"Zimbabwe\"\n  }\n]\n", "import { encoder, decoder } from '../lib/buffer_utils.js';\nimport { encodeBase64, decodeBase64 } from '../lib/base64.js';\nexport function decode(input) {\n    if (Uint8Array.fromBase64) {\n        return Uint8Array.fromBase64(typeof input === 'string' ? input : decoder.decode(input), {\n            alphabet: 'base64url',\n        });\n    }\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n}\nexport function encode(input) {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = encoder.encode(unencoded);\n    }\n    if (Uint8Array.prototype.toBase64) {\n        return unencoded.toBase64({ alphabet: 'base64url', omitPadding: true });\n    }\n    return encodeBase64(unencoded).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n", "export const encoder = new TextEncoder();\nexport const decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nexport function concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    for (const buffer of buffers) {\n        buf.set(buffer, i);\n        i += buffer.length;\n    }\n    return buf;\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nexport function uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nexport function uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\n", "export function encodeBase64(input) {\n    if (Uint8Array.prototype.toBase64) {\n        return input.toBase64();\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < input.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n}\nexport function decodeBase64(encoded) {\n    if (Uint8Array.fromBase64) {\n        return Uint8Array.fromBase64(encoded);\n    }\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n}\n", "import { PlayerPattern } from \"./Schemas\";\n\nexport class PatternDecoder {\n  private bytes: Uint8Array;\n\n  readonly height: number;\n  readonly width: number;\n  readonly scale: number;\n\n  constructor(\n    pattern: PlayerPattern,\n    base64urlDecode: (input: string) => Uint8Array,\n  ) {\n    ({\n      height: this.height,\n      width: this.width,\n      scale: this.scale,\n      bytes: this.bytes,\n    } = decodePatternData(pattern.patternData, base64urlDecode));\n  }\n\n  isPrimary(x: number, y: number): boolean {\n    const px = (x >> this.scale) % this.width;\n    const py = (y >> this.scale) % this.height;\n    const idx = py * this.width + px;\n    const byteIndex = idx >> 3;\n    const bitIndex = idx & 7;\n    const byte = this.bytes[3 + byteIndex];\n    if (byte === undefined) throw new Error(\"Invalid pattern\");\n\n    return (byte & (1 << bitIndex)) === 0;\n  }\n\n  scaledHeight(): number {\n    return this.height << this.scale;\n  }\n\n  scaledWidth(): number {\n    return this.width << this.scale;\n  }\n}\n\nexport function decodePatternData(\n  b64: string,\n  base64urlDecode: (input: string) => Uint8Array,\n): { height: number; width: number; scale: number; bytes: Uint8Array } {\n  const bytes = base64urlDecode(b64);\n\n  if (bytes.length < 3) {\n    throw new Error(\"Pattern data is too short to contain required metadata.\");\n  }\n\n  const version = bytes[0];\n  if (version !== 0) {\n    throw new Error(`Unrecognized pattern version ${version}.`);\n  }\n\n  const byte1 = bytes[1];\n  const byte2 = bytes[2];\n  const scale = byte1 & 0x07;\n\n  const width = (((byte2 & 0x03) << 5) | ((byte1 >> 3) & 0x1f)) + 2;\n  const height = ((byte2 >> 2) & 0x3f) + 2;\n\n  const expectedBits = width * height;\n  const expectedBytes = (expectedBits + 7) >> 3; // Equivalent to: ceil(expectedBits / 8);\n  if (bytes.length - 3 < expectedBytes) {\n    throw new Error(\"Pattern data is too short for the specified dimensions.\");\n  }\n\n  return { height, width, scale, bytes };\n}\n", "import { base64url } from \"jose\";\nimport { z } from \"zod/v4\";\nimport { decodePatternData } from \"./PatternDecoder\";\nimport { PlayerPattern } from \"./Schemas\";\n\nexport type Cosmetics = z.infer<typeof CosmeticsSchema>;\nexport type Pattern = z.infer<typeof PatternSchema>;\nexport type PatternName = z.infer<typeof PatternNameSchema>;\nexport type Product = z.infer<typeof ProductSchema>;\nexport type ColorPalette = z.infer<typeof ColorPaletteSchema>;\nexport type PatternData = z.infer<typeof PatternDataSchema>;\n\nexport const ProductSchema = z.object({\n  productId: z.string(),\n  priceId: z.string(),\n  price: z.string(),\n});\n\nexport const PatternNameSchema = z\n  .string()\n  .regex(/^[a-z0-9_]+$/)\n  .max(32);\n\nexport const PatternDataSchema = z\n  .string()\n  .max(1403)\n  .base64url()\n  .refine(\n    (val) => {\n      try {\n        decodePatternData(val, base64url.decode);\n        return true;\n      } catch (e) {\n        if (e instanceof Error) {\n          console.error(JSON.stringify(e.message, null, 2));\n        } else {\n          console.error(String(e));\n        }\n        return false;\n      }\n    },\n    {\n      message: \"Invalid pattern\",\n    },\n  );\n\nexport const ColorPaletteSchema = z.object({\n  name: z.string(),\n  primaryColor: z.string(),\n  secondaryColor: z.string(),\n});\n\nexport const PatternSchema = z.object({\n  name: PatternNameSchema,\n  pattern: PatternDataSchema,\n  colorPalettes: z\n    .object({\n      name: z.string(),\n      isArchived: z.boolean(),\n    })\n    .array()\n    .optional(),\n  affiliateCode: z.string().nullable(),\n  product: ProductSchema.nullable(),\n});\n\n// Schema for resources/cosmetics/cosmetics.json\nexport const CosmeticsSchema = z.object({\n  colorPalettes: z.record(z.string(), ColorPaletteSchema).optional(),\n  patterns: z.record(z.string(), PatternSchema),\n  flag: z\n    .object({\n      layers: z.record(\n        z.string(),\n        z.object({\n          name: z.string(),\n          flares: z.array(z.string()).optional(),\n        }),\n      ),\n      color: z.record(\n        z.string(),\n        z.object({\n          color: z.string(),\n          name: z.string(),\n          flares: z.array(z.string()).optional(),\n        }),\n      ),\n    })\n    .optional(),\n});\n\nexport const DefaultPattern = {\n  name: \"default\",\n  patternData: \"AAAAAA\",\n  colorPalette: undefined,\n} satisfies PlayerPattern;\n", "import { z } from \"zod\";\nimport quickChatData from \"../../resources/QuickChat.json\" with { type: \"json\" };\nimport countries from \"../client/data/countries.json\" with { type: \"json\" };\nimport {\n  ColorPaletteSchema,\n  PatternDataSchema,\n  PatternNameSchema,\n} from \"./CosmeticSchemas\";\nimport {\n  AllPlayers,\n  Difficulty,\n  Duos,\n  GameMapSize,\n  GameMapType,\n  GameMode,\n  GameType,\n  HumansVsNations,\n  Quads,\n  Trios,\n  UnitType,\n} from \"./game/Game\";\nimport { PlayerStatsSchema } from \"./StatsSchemas\";\nimport { flattenedEmojiTable } from \"./Util\";\n\nexport type GameID = string;\nexport type ClientID = string;\n\nexport type Intent =\n  | SpawnIntent\n  | AttackIntent\n  | CancelAttackIntent\n  | BoatAttackIntent\n  | CancelBoatIntent\n  | AllianceRequestIntent\n  | AllianceRequestReplyIntent\n  | AllianceExtensionIntent\n  | BreakAllianceIntent\n  | TargetPlayerIntent\n  | EmojiIntent\n  | DonateGoldIntent\n  | DonateTroopsIntent\n  | BuildUnitIntent\n  | EmbargoIntent\n  | QuickChatIntent\n  | MoveWarshipIntent\n  | MarkDisconnectedIntent\n  | EmbargoAllIntent\n  | UpgradeStructureIntent\n  | DeleteUnitIntent\n  | KickPlayerIntent;\n\nexport type AttackIntent = z.infer<typeof AttackIntentSchema>;\nexport type CancelAttackIntent = z.infer<typeof CancelAttackIntentSchema>;\nexport type SpawnIntent = z.infer<typeof SpawnIntentSchema>;\nexport type BoatAttackIntent = z.infer<typeof BoatAttackIntentSchema>;\nexport type EmbargoAllIntent = z.infer<typeof EmbargoAllIntentSchema>;\nexport type CancelBoatIntent = z.infer<typeof CancelBoatIntentSchema>;\nexport type AllianceRequestIntent = z.infer<typeof AllianceRequestIntentSchema>;\nexport type AllianceRequestReplyIntent = z.infer<\n  typeof AllianceRequestReplyIntentSchema\n>;\nexport type BreakAllianceIntent = z.infer<typeof BreakAllianceIntentSchema>;\nexport type TargetPlayerIntent = z.infer<typeof TargetPlayerIntentSchema>;\nexport type EmojiIntent = z.infer<typeof EmojiIntentSchema>;\nexport type DonateGoldIntent = z.infer<typeof DonateGoldIntentSchema>;\nexport type DonateTroopsIntent = z.infer<typeof DonateTroopIntentSchema>;\nexport type EmbargoIntent = z.infer<typeof EmbargoIntentSchema>;\nexport type BuildUnitIntent = z.infer<typeof BuildUnitIntentSchema>;\nexport type UpgradeStructureIntent = z.infer<\n  typeof UpgradeStructureIntentSchema\n>;\nexport type MoveWarshipIntent = z.infer<typeof MoveWarshipIntentSchema>;\nexport type QuickChatIntent = z.infer<typeof QuickChatIntentSchema>;\nexport type MarkDisconnectedIntent = z.infer<\n  typeof MarkDisconnectedIntentSchema\n>;\nexport type AllianceExtensionIntent = z.infer<\n  typeof AllianceExtensionIntentSchema\n>;\nexport type DeleteUnitIntent = z.infer<typeof DeleteUnitIntentSchema>;\nexport type KickPlayerIntent = z.infer<typeof KickPlayerIntentSchema>;\n\nexport type Turn = z.infer<typeof TurnSchema>;\nexport type GameConfig = z.infer<typeof GameConfigSchema>;\n\nexport type ClientMessage =\n  | ClientSendWinnerMessage\n  | ClientPingMessage\n  | ClientIntentMessage\n  | ClientJoinMessage\n  | ClientRejoinMessage\n  | ClientLogMessage\n  | ClientHashMessage;\nexport type ServerMessage =\n  | ServerTurnMessage\n  | ServerStartGameMessage\n  | ServerPingMessage\n  | ServerDesyncMessage\n  | ServerPrestartMessage\n  | ServerErrorMessage;\n\nexport type ServerTurnMessage = z.infer<typeof ServerTurnMessageSchema>;\nexport type ServerStartGameMessage = z.infer<\n  typeof ServerStartGameMessageSchema\n>;\nexport type ServerPingMessage = z.infer<typeof ServerPingMessageSchema>;\nexport type ServerDesyncMessage = z.infer<typeof ServerDesyncSchema>;\nexport type ServerPrestartMessage = z.infer<typeof ServerPrestartMessageSchema>;\nexport type ServerErrorMessage = z.infer<typeof ServerErrorSchema>;\nexport type ClientSendWinnerMessage = z.infer<typeof ClientSendWinnerSchema>;\nexport type ClientPingMessage = z.infer<typeof ClientPingMessageSchema>;\nexport type ClientIntentMessage = z.infer<typeof ClientIntentMessageSchema>;\nexport type ClientJoinMessage = z.infer<typeof ClientJoinMessageSchema>;\nexport type ClientRejoinMessage = z.infer<typeof ClientRejoinMessageSchema>;\nexport type ClientLogMessage = z.infer<typeof ClientLogMessageSchema>;\nexport type ClientHashMessage = z.infer<typeof ClientHashSchema>;\n\nexport type AllPlayersStats = z.infer<typeof AllPlayersStatsSchema>;\nexport type Player = z.infer<typeof PlayerSchema>;\nexport type PlayerCosmetics = z.infer<typeof PlayerCosmeticsSchema>;\nexport type PlayerCosmeticRefs = z.infer<typeof PlayerCosmeticRefsSchema>;\nexport type PlayerPattern = z.infer<typeof PlayerPatternSchema>;\nexport type PlayerColor = z.infer<typeof PlayerColorSchema>;\nexport type Flag = z.infer<typeof FlagSchema>;\nexport type GameStartInfo = z.infer<typeof GameStartInfoSchema>;\n\nexport interface GameInfo {\n  gameID: GameID;\n  clients?: ClientInfo[];\n  numClients?: number;\n  msUntilStart?: number;\n  gameConfig?: GameConfig;\n}\nexport interface ClientInfo {\n  clientID: ClientID;\n  username: string;\n}\nexport enum LogSeverity {\n  Debug = \"DEBUG\",\n  Info = \"INFO\",\n  Warn = \"WARN\",\n  Error = \"ERROR\",\n  Fatal = \"FATAL\",\n}\n\n//\n// Utility types\n//\n\nconst TeamCountConfigSchema = z.union([\n  z.number(),\n  z.literal(Duos),\n  z.literal(Trios),\n  z.literal(Quads),\n  z.literal(HumansVsNations),\n]);\nexport type TeamCountConfig = z.infer<typeof TeamCountConfigSchema>;\n\nexport const GameConfigSchema = z.object({\n  gameMap: z.enum(GameMapType),\n  difficulty: z.enum(Difficulty),\n  donateGold: z.boolean(), // Configures donations to humans only\n  donateTroops: z.boolean(), // Configures donations to humans only\n  gameType: z.enum(GameType),\n  gameMode: z.enum(GameMode),\n  gameMapSize: z.enum(GameMapSize),\n  disableNPCs: z.boolean(),\n  bots: z.number().int().min(0).max(400),\n  infiniteGold: z.boolean(),\n  infiniteTroops: z.boolean(),\n  instantBuild: z.boolean(),\n  randomSpawn: z.boolean(),\n  maxPlayers: z.number().optional(),\n  maxTimerValue: z.number().int().min(1).max(120).optional(),\n  disabledUnits: z.enum(UnitType).array().optional(),\n  playerTeams: TeamCountConfigSchema.optional(),\n});\n\nexport const TeamSchema = z.string();\n\nconst SafeString = z\n  .string()\n  .regex(\n    /^([a-zA-Z0-9\\s.,!?@#$%&*()\\-_+=[\\]{}|;:\"'/\\u00a9|\\u00ae|[\\u2000-\\u3300]|\\ud83c[\\ud000-\\udfff]|\\ud83d[\\ud000-\\udfff]|\\ud83e[\\ud000-\\udfff]|[\u00FC\u00DC])*$/u,\n  )\n  .max(1000);\n\nexport const PersistentIdSchema = z.uuid();\nconst JwtTokenSchema = z.jwt();\nconst TokenSchema = z\n  .string()\n  .refine(\n    (v) =>\n      PersistentIdSchema.safeParse(v).success ||\n      JwtTokenSchema.safeParse(v).success,\n    {\n      message: \"Token must be a valid UUID or JWT\",\n    },\n  );\n\nconst EmojiSchema = z\n  .number()\n  .nonnegative()\n  .max(flattenedEmojiTable.length - 1);\nexport const ID = z\n  .string()\n  .regex(/^[a-zA-Z0-9]+$/)\n  .length(8);\n\nexport const AllPlayersStatsSchema = z.record(ID, PlayerStatsSchema);\n\nexport const UsernameSchema = z\n  .string()\n  .regex(/^[a-zA-Z0-9_ [\\]\u00FC\u00DC]+$/u)\n  .min(3)\n  .max(27);\nconst countryCodes = countries.filter((c) => !c.restricted).map((c) => c.code);\n\nexport const QuickChatKeySchema = z.enum(\n  Object.entries(quickChatData).flatMap(([category, entries]) =>\n    entries.map((entry) => `${category}.${entry.key}`),\n  ) as [string, ...string[]],\n);\n\n//\n// Intents\n//\n\nconst BaseIntentSchema = z.object({\n  clientID: ID,\n});\n\nexport const AllianceExtensionIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"allianceExtension\"),\n  recipient: ID,\n});\n\nexport const AttackIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"attack\"),\n  targetID: ID.nullable(),\n  troops: z.number().nonnegative().nullable(),\n});\n\nexport const SpawnIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"spawn\"),\n  tile: z.number(),\n});\n\nexport const BoatAttackIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"boat\"),\n  targetID: ID.nullable(),\n  troops: z.number().nonnegative(),\n  dst: z.number(),\n  src: z.number().nullable(),\n});\n\nexport const AllianceRequestIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"allianceRequest\"),\n  recipient: ID,\n});\n\nexport const AllianceRequestReplyIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"allianceRequestReply\"),\n  requestor: ID, // The one who made the original alliance request\n  accept: z.boolean(),\n});\n\nexport const BreakAllianceIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"breakAlliance\"),\n  recipient: ID,\n});\n\nexport const TargetPlayerIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"targetPlayer\"),\n  target: ID,\n});\n\nexport const EmojiIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"emoji\"),\n  recipient: z.union([ID, z.literal(AllPlayers)]),\n  emoji: EmojiSchema,\n});\n\nexport const EmbargoIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"embargo\"),\n  targetID: ID,\n  action: z.union([z.literal(\"start\"), z.literal(\"stop\")]),\n});\n\nexport const EmbargoAllIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"embargo_all\"),\n  action: z.union([z.literal(\"start\"), z.literal(\"stop\")]),\n});\n\nexport const DonateGoldIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"donate_gold\"),\n  recipient: ID,\n  gold: z.number().nullable(),\n});\n\nexport const DonateTroopIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"donate_troops\"),\n  recipient: ID,\n  troops: z.number().nullable(),\n});\n\nexport const BuildUnitIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"build_unit\"),\n  unit: z.enum(UnitType),\n  tile: z.number(),\n});\n\nexport const UpgradeStructureIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"upgrade_structure\"),\n  unit: z.enum(UnitType),\n  unitId: z.number(),\n});\n\nexport const CancelAttackIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"cancel_attack\"),\n  attackID: z.string(),\n});\n\nexport const CancelBoatIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"cancel_boat\"),\n  unitID: z.number(),\n});\n\nexport const MoveWarshipIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"move_warship\"),\n  unitId: z.number(),\n  tile: z.number(),\n});\n\nexport const DeleteUnitIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"delete_unit\"),\n  unitId: z.number(),\n});\n\nexport const QuickChatIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"quick_chat\"),\n  recipient: ID,\n  quickChatKey: QuickChatKeySchema,\n  target: ID.optional(),\n});\n\nexport const MarkDisconnectedIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"mark_disconnected\"),\n  isDisconnected: z.boolean(),\n});\n\nexport const KickPlayerIntentSchema = BaseIntentSchema.extend({\n  type: z.literal(\"kick_player\"),\n  target: ID,\n});\n\nconst IntentSchema = z.discriminatedUnion(\"type\", [\n  AttackIntentSchema,\n  CancelAttackIntentSchema,\n  SpawnIntentSchema,\n  MarkDisconnectedIntentSchema,\n  BoatAttackIntentSchema,\n  CancelBoatIntentSchema,\n  AllianceRequestIntentSchema,\n  AllianceRequestReplyIntentSchema,\n  BreakAllianceIntentSchema,\n  TargetPlayerIntentSchema,\n  EmojiIntentSchema,\n  DonateGoldIntentSchema,\n  DonateTroopIntentSchema,\n  BuildUnitIntentSchema,\n  UpgradeStructureIntentSchema,\n  EmbargoIntentSchema,\n  EmbargoAllIntentSchema,\n  MoveWarshipIntentSchema,\n  QuickChatIntentSchema,\n  AllianceExtensionIntentSchema,\n  DeleteUnitIntentSchema,\n  KickPlayerIntentSchema,\n]);\n\n//\n// Server utility types\n//\n\nexport const TurnSchema = z.object({\n  turnNumber: z.number(),\n  intents: IntentSchema.array(),\n  // The hash of the game state at the end of the turn.\n  hash: z.number().nullable().optional(),\n});\n\nexport const FlagSchema = z\n  .string()\n  .max(128)\n  .optional()\n  .refine(\n    (val) => {\n      if (val === undefined || val === \"\") return true;\n      if (val.startsWith(\"!\")) return true;\n      return countryCodes.includes(val);\n    },\n    { message: \"Invalid flag: must be a valid country code or start with !\" },\n  );\n\nexport const PlayerCosmeticRefsSchema = z.object({\n  flag: FlagSchema.optional(),\n  color: z.string().optional(),\n  patternName: PatternNameSchema.optional(),\n  patternColorPaletteName: z.string().optional(),\n});\n\nexport const PlayerPatternSchema = z.object({\n  name: PatternNameSchema,\n  patternData: PatternDataSchema,\n  colorPalette: ColorPaletteSchema.optional(),\n});\n\nexport const PlayerColorSchema = z.object({\n  color: z.string(),\n});\n\nexport const PlayerCosmeticsSchema = z.object({\n  flag: FlagSchema.optional(),\n  pattern: PlayerPatternSchema.optional(),\n  color: PlayerColorSchema.optional(),\n});\n\nexport const PlayerSchema = z.object({\n  clientID: ID,\n  username: UsernameSchema,\n  cosmetics: PlayerCosmeticsSchema.optional(),\n});\n\nexport const GameStartInfoSchema = z.object({\n  gameID: ID,\n  lobbyCreatedAt: z.number(),\n  config: GameConfigSchema,\n  players: PlayerSchema.array(),\n});\n\nexport const WinnerSchema = z\n  .union([\n    z.tuple([z.literal(\"player\"), ID]).rest(ID),\n    z.tuple([z.literal(\"team\"), SafeString]).rest(ID),\n  ])\n  .optional();\nexport type Winner = z.infer<typeof WinnerSchema>;\n\n//\n// Server\n//\n\nexport const ServerTurnMessageSchema = z.object({\n  type: z.literal(\"turn\"),\n  turn: TurnSchema,\n});\n\nexport const ServerPingMessageSchema = z.object({\n  type: z.literal(\"ping\"),\n});\n\nexport const ServerPrestartMessageSchema = z.object({\n  type: z.literal(\"prestart\"),\n  gameMap: z.enum(GameMapType),\n  gameMapSize: z.enum(GameMapSize),\n});\n\nexport const ServerStartGameMessageSchema = z.object({\n  type: z.literal(\"start\"),\n  // Turns the client missed if they are late to the game.\n  turns: TurnSchema.array(),\n  gameStartInfo: GameStartInfoSchema,\n  lobbyCreatedAt: z.number(),\n});\n\nexport const ServerDesyncSchema = z.object({\n  type: z.literal(\"desync\"),\n  turn: z.number(),\n  correctHash: z.number().nullable(),\n  clientsWithCorrectHash: z.number(),\n  totalActiveClients: z.number(),\n  yourHash: z.number().optional(),\n});\n\nexport const ServerErrorSchema = z.object({\n  type: z.literal(\"error\"),\n  error: z.string(),\n  message: z.string().optional(),\n});\n\nexport const ServerMessageSchema = z.discriminatedUnion(\"type\", [\n  ServerTurnMessageSchema,\n  ServerPrestartMessageSchema,\n  ServerStartGameMessageSchema,\n  ServerPingMessageSchema,\n  ServerDesyncSchema,\n  ServerErrorSchema,\n]);\n\n//\n// Client\n//\n\nexport const ClientSendWinnerSchema = z.object({\n  type: z.literal(\"winner\"),\n  winner: WinnerSchema,\n  allPlayersStats: AllPlayersStatsSchema,\n});\n\nexport const ClientHashSchema = z.object({\n  type: z.literal(\"hash\"),\n  hash: z.number(),\n  turnNumber: z.number(),\n});\n\nexport const ClientLogMessageSchema = z.object({\n  type: z.literal(\"log\"),\n  severity: z.enum(LogSeverity),\n  log: ID,\n});\n\nexport const ClientPingMessageSchema = z.object({\n  type: z.literal(\"ping\"),\n});\n\nexport const ClientIntentMessageSchema = z.object({\n  type: z.literal(\"intent\"),\n  intent: IntentSchema,\n});\n\n// WARNING: never send this message to clients.\nexport const ClientJoinMessageSchema = z.object({\n  type: z.literal(\"join\"),\n  clientID: ID,\n  token: TokenSchema, // WARNING: PII\n  gameID: ID,\n  username: UsernameSchema,\n  // Server replaces the refs with the actual cosmetic data.\n  cosmetics: PlayerCosmeticRefsSchema.optional(),\n  turnstileToken: z.string().nullable(),\n});\n\nexport const ClientRejoinMessageSchema = z.object({\n  type: z.literal(\"rejoin\"),\n  gameID: ID,\n  clientID: ID,\n  lastTurn: z.number(),\n  token: TokenSchema,\n});\n\nexport const ClientMessageSchema = z.discriminatedUnion(\"type\", [\n  ClientSendWinnerSchema,\n  ClientPingMessageSchema,\n  ClientIntentMessageSchema,\n  ClientJoinMessageSchema,\n  ClientRejoinMessageSchema,\n  ClientLogMessageSchema,\n  ClientHashSchema,\n]);\n\n//\n// Records\n//\n\nexport const PlayerRecordSchema = PlayerSchema.extend({\n  persistentID: PersistentIdSchema.nullable(), // WARNING: PII\n  clanTag: z.string().optional(),\n  stats: PlayerStatsSchema,\n});\nexport type PlayerRecord = z.infer<typeof PlayerRecordSchema>;\n\nexport const GameEndInfoSchema = GameStartInfoSchema.extend({\n  players: PlayerRecordSchema.array(),\n  start: z.number(),\n  end: z.number(),\n  duration: z.number().nonnegative(),\n  num_turns: z.number(),\n  winner: WinnerSchema,\n  lobbyFillTime: z.number().nonnegative(),\n});\nexport type GameEndInfo = z.infer<typeof GameEndInfoSchema>;\n\nconst GitCommitSchema = z\n  .string()\n  .regex(/^[0-9a-fA-F]{40}$/)\n  .or(z.literal(\"DEV\"));\n\nexport const PartialAnalyticsRecordSchema = z.object({\n  info: GameEndInfoSchema,\n  version: z.literal(\"v0.0.2\"),\n});\nexport type ClientAnalyticsRecord = z.infer<\n  typeof PartialAnalyticsRecordSchema\n>;\n\nexport const AnalyticsRecordSchema = PartialAnalyticsRecordSchema.extend({\n  gitCommit: GitCommitSchema,\n  subdomain: z.string(),\n  domain: z.string(),\n});\n\nexport type AnalyticsRecord = z.infer<typeof AnalyticsRecordSchema>;\n\nexport const GameRecordSchema = AnalyticsRecordSchema.extend({\n  turns: TurnSchema.array(),\n});\n\nexport const PartialGameRecordSchema = PartialAnalyticsRecordSchema.extend({\n  turns: TurnSchema.array(),\n});\n\nexport type PartialGameRecord = z.infer<typeof PartialGameRecordSchema>;\n\nexport type GameRecord = z.infer<typeof GameRecordSchema>;\n", "import {\n  RegExpMatcher,\n  collapseDuplicatesTransformer,\n  englishDataset,\n  englishRecommendedTransformers,\n  resolveConfusablesTransformer,\n  resolveLeetSpeakTransformer,\n  skipNonAlphabeticTransformer,\n} from \"obscenity\";\nimport { translateText } from \"../../client/Utils\";\nimport { UsernameSchema } from \"../Schemas\";\nimport { getClanTagOriginalCase, simpleHash } from \"../Util\";\n\nconst matcher = new RegExpMatcher({\n  ...englishDataset.build(),\n  ...englishRecommendedTransformers,\n  ...resolveConfusablesTransformer(),\n  ...skipNonAlphabeticTransformer(),\n  ...collapseDuplicatesTransformer(),\n  ...resolveLeetSpeakTransformer(),\n});\n\nexport const MIN_USERNAME_LENGTH = 3;\nexport const MAX_USERNAME_LENGTH = 27;\n\nconst shadowNames = [\n  \"NicePeopleOnly\",\n  \"BeKindPlz\",\n  \"LearningManners\",\n  \"StayClassy\",\n  \"BeNicer\",\n  \"NeedHugs\",\n  \"MakeFriends\",\n];\n\nexport function fixProfaneUsername(username: string): string {\n  if (isProfaneUsername(username)) {\n    return shadowNames[simpleHash(username) % shadowNames.length];\n  }\n  return username;\n}\n\nexport function isProfaneUsername(username: string): boolean {\n  return matcher.hasMatch(username);\n}\n\n/**\n * Sanitizes and censors profane usernames and clan tags.\n * Profane username is overwritten, profane clan tag is removed.\n *\n * Preserves non-profane clan tag:\n * prevents desync after clan team assignment because local player's own clan tag and name aren't overwritten\n *\n * Removing bad clan tags won't hurt existing clans nor cause desyncs:\n * - full name including clan tag was overwritten in the past, if any part of name was bad\n * - only each separate local player name with a profane clan tag will remain, no clan team assignment\n *\n * Examples:\n * - \"GoodName\" -> \"GoodName\"\n * - \"BadName\" -> \"Censored\"\n * - \"[CLAN]GoodName\" -> \"[CLAN]GoodName\"\n * - \"[CLaN]BadName\" -> \"[CLaN] Censored\"\n * - \"[BAD]GoodName\" -> \"GoodName\"\n * - \"[BAD]BadName\" -> \"Censored\"\n */\nexport function censorNameWithClanTag(username: string): string {\n  // Don't use getClanTag because that returns upperCase and if original isn't, str replace `[{$clanTag}]` won't match\n  const clanTag = getClanTagOriginalCase(username);\n\n  const nameWithoutClan = clanTag\n    ? username.replace(`[${clanTag}]`, \"\").trim()\n    : username;\n\n  const clanTagIsProfane = clanTag ? isProfaneUsername(clanTag) : false;\n  const usernameIsProfane = isProfaneUsername(nameWithoutClan);\n\n  const censoredNameWithoutClan = usernameIsProfane\n    ? fixProfaneUsername(nameWithoutClan)\n    : nameWithoutClan;\n\n  // Restore clan tag if it existed and is not profane\n  if (clanTag && !clanTagIsProfane) {\n    if (usernameIsProfane) {\n      return `[${clanTag}] ${censoredNameWithoutClan}`;\n    }\n    return username;\n  }\n\n  // Don't restore profane or nonexistent clan tag\n  return censoredNameWithoutClan;\n}\n\nexport function validateUsername(username: string): {\n  isValid: boolean;\n  error?: string;\n} {\n  const parsed = UsernameSchema.safeParse(username);\n\n  if (!parsed.success) {\n    const errType = parsed.error.issues[0].code;\n\n    if (errType === \"invalid_type\") {\n      return { isValid: false, error: translateText(\"username.not_string\") };\n    }\n\n    if (errType === \"too_small\") {\n      return {\n        isValid: false,\n        error: translateText(\"username.too_short\", {\n          min: MIN_USERNAME_LENGTH,\n        }),\n      };\n    }\n\n    if (errType === \"too_big\") {\n      return {\n        isValid: false,\n        error: translateText(\"username.too_long\", {\n          max: MAX_USERNAME_LENGTH,\n        }),\n      };\n    }\n\n    // Invalid regex, or any other issue\n    else {\n      return { isValid: false, error: translateText(\"username.invalid_chars\") };\n    }\n  }\n\n  // All checks passed\n  return { isValid: true };\n}\n", "import { placeName } from \"../client/graphics/NameBoxCalculator\";\nimport { getConfig } from \"./configuration/ConfigLoader\";\nimport { Executor } from \"./execution/ExecutionManager\";\nimport { WinCheckExecution } from \"./execution/WinCheckExecution\";\nimport {\n  AllPlayers,\n  Attack,\n  Cell,\n  Game,\n  GameUpdates,\n  NameViewData,\n  Nation,\n  Player,\n  PlayerActions,\n  PlayerBorderTiles,\n  PlayerID,\n  PlayerInfo,\n  PlayerProfile,\n  PlayerType,\n} from \"./game/Game\";\nimport { createGame } from \"./game/GameImpl\";\nimport { TileRef } from \"./game/GameMap\";\nimport { GameMapLoader } from \"./game/GameMapLoader\";\nimport {\n  ErrorUpdate,\n  GameUpdateType,\n  GameUpdateViewData,\n} from \"./game/GameUpdates\";\nimport { loadTerrainMap as loadGameMap } from \"./game/TerrainMapLoader\";\nimport { PseudoRandom } from \"./PseudoRandom\";\nimport { ClientID, GameStartInfo, Turn } from \"./Schemas\";\nimport { simpleHash } from \"./Util\";\nimport { censorNameWithClanTag } from \"./validations/username\";\n\nexport async function createGameRunner(\n  gameStart: GameStartInfo,\n  clientID: ClientID,\n  mapLoader: GameMapLoader,\n  callBack: (gu: GameUpdateViewData | ErrorUpdate) => void,\n): Promise<GameRunner> {\n  const config = await getConfig(gameStart.config, null);\n  const gameMap = await loadGameMap(\n    gameStart.config.gameMap,\n    gameStart.config.gameMapSize,\n    mapLoader,\n  );\n  const random = new PseudoRandom(simpleHash(gameStart.gameID));\n\n  const humans = gameStart.players.map((p) => {\n    return new PlayerInfo(\n      p.clientID === clientID ? p.username : censorNameWithClanTag(p.username),\n      PlayerType.Human,\n      p.clientID,\n      random.nextID(),\n    );\n  });\n\n  const nations = gameStart.config.disableNPCs\n    ? []\n    : gameMap.nations.map(\n        (n) =>\n          new Nation(\n            new Cell(n.coordinates[0], n.coordinates[1]),\n            new PlayerInfo(\n              n.name,\n              PlayerType.FakeHuman,\n              null,\n              random.nextID(),\n              n.strength,\n            ),\n          ),\n      );\n\n  const game: Game = createGame(\n    humans,\n    nations,\n    gameMap.gameMap,\n    gameMap.miniGameMap,\n    config,\n  );\n\n  const gr = new GameRunner(\n    game,\n    new Executor(game, gameStart.gameID, clientID),\n    callBack,\n  );\n  gr.init();\n  return gr;\n}\n\nexport class GameRunner {\n  private turns: Turn[] = [];\n  private currTurn = 0;\n  private isExecuting = false;\n\n  private playerViewData: Record<PlayerID, NameViewData> = {};\n\n  constructor(\n    public game: Game,\n    private execManager: Executor,\n    private callBack: (gu: GameUpdateViewData | ErrorUpdate) => void,\n  ) {}\n\n  init() {\n    if (this.game.config().isRandomSpawn()) {\n      this.game.addExecution(...this.execManager.spawnPlayers());\n    }\n    if (this.game.config().bots() > 0) {\n      this.game.addExecution(\n        ...this.execManager.spawnBots(this.game.config().numBots()),\n      );\n    }\n    if (this.game.config().spawnNPCs()) {\n      this.game.addExecution(...this.execManager.fakeHumanExecutions());\n    }\n    this.game.addExecution(new WinCheckExecution());\n  }\n\n  public addTurn(turn: Turn): void {\n    this.turns.push(turn);\n  }\n\n  public executeNextTick() {\n    if (this.isExecuting) {\n      return;\n    }\n    if (this.currTurn >= this.turns.length) {\n      return;\n    }\n    this.isExecuting = true;\n\n    this.game.addExecution(\n      ...this.execManager.createExecs(this.turns[this.currTurn]),\n    );\n    this.currTurn++;\n\n    let updates: GameUpdates;\n    let tickExecutionDuration: number = 0;\n\n    try {\n      const startTime = performance.now();\n      updates = this.game.executeNextTick();\n      const endTime = performance.now();\n      tickExecutionDuration = endTime - startTime;\n    } catch (error: unknown) {\n      if (error instanceof Error) {\n        console.error(\"Game tick error:\", error.message);\n        this.callBack({\n          errMsg: error.message,\n          stack: error.stack,\n        } as ErrorUpdate);\n      } else {\n        console.error(\"Game tick error:\", error);\n      }\n      return;\n    }\n\n    if (this.game.inSpawnPhase() && this.game.ticks() % 2 === 0) {\n      this.game\n        .players()\n        .filter(\n          (p) =>\n            p.type() === PlayerType.Human || p.type() === PlayerType.FakeHuman,\n        )\n        .forEach(\n          (p) => (this.playerViewData[p.id()] = placeName(this.game, p)),\n        );\n    }\n\n    if (this.game.ticks() < 3 || this.game.ticks() % 30 === 0) {\n      this.game.players().forEach((p) => {\n        this.playerViewData[p.id()] = placeName(this.game, p);\n      });\n    }\n\n    // Many tiles are updated to pack it into an array\n    const packedTileUpdates = updates[GameUpdateType.Tile].map((u) => u.update);\n    updates[GameUpdateType.Tile] = [];\n\n    this.callBack({\n      tick: this.game.ticks(),\n      packedTileUpdates: new BigUint64Array(packedTileUpdates),\n      updates: updates,\n      playerNameViewData: this.playerViewData,\n      tickExecutionDuration: tickExecutionDuration,\n    });\n    this.isExecuting = false;\n  }\n\n  public playerActions(\n    playerID: PlayerID,\n    x?: number,\n    y?: number,\n  ): PlayerActions {\n    const player = this.game.player(playerID);\n    const tile =\n      x !== undefined && y !== undefined ? this.game.ref(x, y) : null;\n    const actions = {\n      canAttack: tile !== null && player.canAttack(tile),\n      buildableUnits: player.buildableUnits(tile),\n      canSendEmojiAllPlayers: player.canSendEmoji(AllPlayers),\n      canEmbargoAll: player.canEmbargoAll(),\n    } as PlayerActions;\n\n    if (tile !== null && this.game.hasOwner(tile)) {\n      const other = this.game.owner(tile) as Player;\n      actions.interaction = {\n        sharedBorder: player.sharesBorderWith(other),\n        canSendEmoji: player.canSendEmoji(other),\n        canTarget: player.canTarget(other),\n        canSendAllianceRequest: player.canSendAllianceRequest(other),\n        canBreakAlliance: player.isAlliedWith(other),\n        canDonateGold: player.canDonateGold(other),\n        canDonateTroops: player.canDonateTroops(other),\n        canEmbargo: !player.hasEmbargoAgainst(other),\n      };\n      const alliance = player.allianceWith(other as Player);\n      if (alliance) {\n        actions.interaction.allianceExpiresAt = alliance.expiresAt();\n      }\n    }\n\n    return actions;\n  }\n\n  public playerProfile(playerID: number): PlayerProfile {\n    const player = this.game.playerBySmallID(playerID);\n    if (!player.isPlayer()) {\n      throw new Error(`player with id ${playerID} not found`);\n    }\n    return player.playerProfile();\n  }\n  public playerBorderTiles(playerID: PlayerID): PlayerBorderTiles {\n    const player = this.game.player(playerID);\n    if (!player.isPlayer()) {\n      throw new Error(`player with id ${playerID} not found`);\n    }\n    return {\n      borderTiles: player.borderTiles(),\n    } as PlayerBorderTiles;\n  }\n\n  public attackAveragePosition(\n    playerID: number,\n    attackID: string,\n  ): Cell | null {\n    const player = this.game.playerBySmallID(playerID);\n    if (!player.isPlayer()) {\n      throw new Error(`player with id ${playerID} not found`);\n    }\n\n    const condition = (a: Attack) => a.id() === attackID;\n    const attack =\n      player.outgoingAttacks().find(condition) ??\n      player.incomingAttacks().find(condition);\n    if (attack === undefined) {\n      return null;\n    }\n\n    return attack.averagePosition();\n  }\n\n  public bestTransportShipSpawn(\n    playerID: PlayerID,\n    targetTile: TileRef,\n  ): TileRef | false {\n    const player = this.game.player(playerID);\n    if (!player.isPlayer()) {\n      throw new Error(`player with id ${playerID} not found`);\n    }\n    return player.bestTransportShipSpawn(targetTile);\n  }\n}\n"],
  "mappings": "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D,GAAQ4D,EAAKL,KAAK,CAE7B,CAEAH,EAASnE,GAAemE,CAAM,CAChC,CAEA,SAASU,GAAa,CACpB,OAAO,IACT,CAEA,OAAOA,CACT,CC3MO,IAAMC,GAAO3E,GAAO,CACzB,IACA,OACA,UACA,UACA,OACA,UACA,QACA,QACA,IACA,MACA,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,KAAK,CACG,EAEG4E,GAAM5E,GAAO,CACxB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,OAAO,CACC,EAEG6E,GAAa7E,GAAO,CAC/B,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,cAAc,CACN,EAMG8E,GAAgB9E,GAAO,CAClC,UACA,gBACA,SACA,UACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,KAAK,CACG,EAEG+E,GAAS/E,GAAO,CAC3B,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,aACA,aAAa,CACL,EAIGgF,GAAmBhF,GAAO,CACrC,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,MAAM,CACE,EAEGiF,GAAOjF,GAAO,CAAC,OAAO,CAAU,ECpRhC2E,GAAO3E,GAAO,CACzB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,UACA,gBACA,sBACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,OACA,QACA,MAAM,CACE,EAEG4E,GAAM5E,GAAO,CACxB,gBACA,aACA,WACA,qBACA,YACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,WACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,YACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,QACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,cACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,YAAY,CACJ,EAEG+E,GAAS/E,GAAO,CAC3B,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,OAAO,CACR,EAEYkF,GAAMlF,GAAO,CACxB,aACA,SACA,cACA,YACA,aAAa,CACL,EC/WGmF,GAAgBlF,GAAK,2BAA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CAAU,EAAGC,CAAY,GAG3CvM,EAAUwM,WAAa,SAAUF,EAAYC,EAAY,CACvD,GAAIA,IAAiBxM,OAAW,CAC9B,IAAMrE,EAAQ9C,GAAiBuJ,EAAMmK,CAAU,EAAGC,CAAY,EAE9D,OAAO7Q,IAAU,GACbqE,OACA7G,GAAYiJ,EAAMmK,CAAU,EAAG5Q,EAAO,CAAC,EAAE,CAAC,CAChD,CAEA,OAAO5C,GAASqJ,EAAMmK,CAAU,CAAC,GAGnCtM,EAAUyM,YAAc,SAAUH,EAAU,CAC1CnK,EAAMmK,CAAU,EAAI,CAAA,GAGtBtM,EAAU0M,eAAiB,UAAA,CACzBvK,EAAQ/C,GAAe,GAGlBY,CACT,CAEA,IAAA2M,GAAe7M,GAAe,ECt4CvB,IAAM8M,GAA2B,CACtC,uBACA,wBACA,4BACA,qBACA,4BACA,uBACA,oBACA,qBACA,wBACA,4BACA,uBACA,mBACA,qBACA,kBACA,mBACA,qBACA,kBACA,oBACA,wBACA,uBACA,+BACA,mBACA,gBACA,kBACA,oBACA,mBACA,sBACA,qBACA,sBACA,2BACA,qBACA,oBACF,EACaC,GAAyB,CACpC,QACA,sBACA,qBACA,iBACA,eACA,mBACA,gBACA,UACA,SACA,YACA,WACA,YACF,EACaC,GAAqB,CAChC,oBACA,YACA,UACA,UACA,eACA,OACA,UACA,UACA,SACA,QACA,MACA,WACA,SACA,gBACA,SACA,SACA,UACA,WACA,eACA,QACA,SACA,QACA,SACA,SACA,SACA,UACA,UACA,YACA,aACA,QACA,WACA,aACA,SACA,eACA,MACA,cACA,aACA,YACA,YACA,aACA,OACA,SACA,UACA,eACA,QACA,UACA,OACA,SACA,WACA,KACA,MACA,cACA,OACA,OACA,oBACA,WACA,SACA,YACA,eACA,YACA,WACA,MACA,SACA,SACA,gBACA,SACA,UACA,QACA,SACA,QACA,WACA,SACA,WACA,WACA,eACA,OACA,WACA,kBACA,oBACA,iBACA,OACA,SACA,WACA,SACA,OACA,aACA,OACA,cACA,UACA,gBACA,QACA,UACA,qBACA,QACA,WACA,YACA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BA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,cAAc,EACrBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,gBAAgB,EACvBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,EACzBA,EAAO,kBAAkB,CAC3B,ECxfA6B,GAAO,CAACC,EAAS,CAAC,EAClBD,GAAO,CAACE,EAAS,CAAC,EAEX,IAAMC,GAAN,KAAqB,CAM1B,YAAYC,EAAkBC,EAAoB,CAHlD,KAAQ,SAAW,IAAI,IACvB,KAAQ,iBAAmB,IAAI,IAG7B,KAAK,gBAAkB,CAAC,GAAGD,CAAM,EACjC,KAAK,eAAiB,CAAC,GAAGA,EAAQ,GAAGC,CAAQ,CAC/C,CAEQ,uBAAuBC,EAAsB,CACnD,OAAQA,EAAM,CACZ,KAAKC,EAAa,KAChB,OAAOC,GACT,KAAKD,EAAa,IAChB,OAAOE,GACT,KAAKF,EAAa,KAChB,OAAOG,GACT,KAAKH,EAAa,OAChB,OAAOI,GACT,KAAKJ,EAAa,OAChB,OAAOK,GACT,KAAKL,EAAa,OAChB,OAAOM,GACT,KAAKN,EAAa,MAChB,OAAOO,GACT,KAAKP,EAAa,IAChB,OAAOQ,GACT,KAAKR,EAAa,OAChB,OAAOC,GACT,KAAKD,EAAa,QAChB,OAAOE,GACT,QACE,MAAO,CAAC,KAAK,YAAYH,CAAI,CAAC,CAClC,CACF,CAEA,YAAYU,EAAoB,CAC9B,GAAI,KAAK,SAAS,IAAIA,CAAE,EACtB,OAAO,KAAK,SAAS,IAAIA,CAAE,EAGzB,KAAK,gBAAgB,SAAW,IAClC,KAAK,gBAAkB,CAAC,GAAG,KAAK,cAAc,GAGhD,IAAIC,EAAgB,EAEpB,GAAI,KAAK,SAAS,OAAS,GAAK,KAAK,SAAS,KAAO,GAMnDA,EADa,IAAIC,EAAaC,EAAWH,CAAE,CAAC,EACvB,QAAQ,EAAG,KAAK,gBAAgB,MAAM,MACtD,CACL,IAAMI,EAAiB,MAAM,KAAK,KAAK,SAAS,OAAO,CAAC,EACxDH,EACEI,GAAyB,KAAK,gBAAiBD,CAAc,GAAK,CACtE,CAEA,IAAME,EAAQ,KAAK,gBAAgB,OAAOL,EAAe,CAAC,EAAE,CAAC,EAC7D,YAAK,SAAS,IAAID,EAAIM,CAAK,EACpBA,CACT,CAEA,gBAAgBhB,EAAoB,CAElC,IAAMiB,EADa,KAAK,uBAAuBjB,CAAI,EAC5B,CAAC,EAAE,MAAM,EAChC,OAAAiB,EAAI,EAAI,KAAK,MAAMA,EAAI,CAAC,EACxBA,EAAI,EAAI,KAAK,MAAMA,EAAI,CAAC,EACxBA,EAAI,EAAI,KAAK,MAAMA,EAAI,CAAC,EACjBC,EAAOD,CAAG,CACnB,CAEA,sBAAsBjB,EAAYmB,EAA0B,CAC1D,GAAI,KAAK,iBAAiB,IAAIA,CAAQ,EACpC,OAAO,KAAK,iBAAiB,IAAIA,CAAQ,EAG3C,IAAMC,EAAa,KAAK,uBAAuBpB,CAAI,EAE7CqB,EADYR,EAAWM,CAAQ,EACNC,EAAW,OACpCJ,EAAQI,EAAWC,CAAU,EAEnC,YAAK,iBAAiB,IAAIF,EAAUH,CAAK,EAElCA,CACT,CACF,EAIO,SAASD,GACdO,EACAR,EACe,CACf,GAAIA,EAAe,SAAW,EAC5B,MAAM,IAAI,MAAM,oBAAoB,EAGtC,IAAMS,EAAoBT,EAAe,IAAIU,EAAO,EAEhDC,EAAY,EACZC,EAAW,EAEf,QAASC,EAAI,EAAGA,EAAIL,EAAgB,OAAQK,IAAK,CAC/C,IAAMX,EAAQM,EAAgBK,CAAC,EACzBC,EAASC,GAAUL,GAAQR,CAAK,EAAGO,CAAiB,EACtDK,EAASH,IACXA,EAAYG,EACZF,EAAWC,EAEf,CACA,OAAOD,CACT,CAEA,SAASG,GAAUC,EAAaP,EAA4B,CAC1D,OAAOA,EAAkB,OAAO,CAACQ,EAAKC,IAC7B,KAAK,IAAID,EAAKE,GAAWH,EAAME,CAAQ,CAAC,EAC9C,GAAQ,CACb,CAEA,SAASC,GAAWC,EAAWC,EAAmB,CAChD,OAAOD,EAAG,OAAOC,EAAI,MAAM,CAC7B,CAEA,SAASX,GAAQY,EAAuB,CACtC,IAAMC,EAAMD,EAAO,MAAM,EACzB,OAAO,IAAIE,GAAM,MAAO,CAACD,EAAI,EAAGA,EAAI,EAAGA,EAAI,CAAC,CAAC,CAC/C,CC9IO,IAAME,GAAN,KAAmC,CAAnC,cACL,KAAQ,KAAO,IAAIC,EAAa,GAAG,EACnC,KAAQ,oBAAsB,IAAIC,GAAeC,GAAaC,EAAc,EAC5E,KAAQ,kBAAoB,IAAIF,GAAeG,GAAWA,EAAS,EACnE,KAAQ,mBAAqB,IAAIH,GAAeC,GAAaC,EAAc,EAC3E,KAAQ,qBAAuB,IAAIF,GAAeI,GAAcA,EAAY,EAE5E,KAAQ,WAAaC,EAAO,eAAe,EAC3C,KAAQ,MAAQA,EAAO,kBAAkB,EACzC,KAAQ,cAAgB,CACtBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,EACxBA,EAAO,iBAAiB,CAC1B,EACA,KAAQ,MAAQA,EAAO,iBAAiB,EACxC,KAAQ,eAAiBA,EAAO,kBAAkB,EAGlD,KAAQ,WAAaA,EAAO,cAAc,EAE1C,KAAQ,WAAaA,EAAO,gBAAgB,EAE5C,KAAQ,cAAgBA,EAAO,kBAAkB,EAEjD,KAAQ,YAAcA,EAAO,cAAc,EAG3C,KAAQ,qBAAuBA,EAAO,iBAAiB,EAEvD,KAAQ,yBAA2BA,EAAO,kBAAkB,EAE5D,KAAQ,yBAA2BA,EAAO,cAAc,EAExD,KAAQ,0BAA4BA,EAAO,cAAc,EAEzD,UAAUC,EAAoB,CAC5B,OAAO,KAAK,mBAAmB,gBAAgBA,CAAI,CACrD,CAEA,eAAeC,EAA4B,CACzC,IAAMD,EAAOC,EAAO,KAAK,EACzB,OAAID,IAAS,KACJ,KAAK,mBAAmB,sBAAsBA,EAAMC,EAAO,GAAG,CAAC,EAEpEA,EAAO,KAAK,IAAM,QACb,KAAK,oBAAoB,YAAYA,EAAO,GAAG,CAAC,EAErDA,EAAO,KAAK,IAAM,MACb,KAAK,kBAAkB,YAAYA,EAAO,GAAG,CAAC,EAEhD,KAAK,qBAAqB,YAAYA,EAAO,GAAG,CAAC,CAC1D,CAEA,gBAAgBC,EAAyD,CAEvE,IAAMC,EAAWD,EAAe,MAAM,iBAAS,EAAE,MAAM,EAEjDE,EAAU,KAAK,YAAYF,CAAc,EAAE,MAAM,EAEnDG,EAAW,KAAK,SAASF,EAAUC,CAAO,EAIxCE,EAAY,GACZC,EAAgB,GAChBC,EAAiB,GACnBC,EAAY,EAGVC,EAAkB,EAExB,KAAOL,EAAWG,GAAgB,CAChC,GAAIC,EAAYF,EAAe,CAE7B,QAAQ,KAAK;AAAA,yBACIR,EAAOI,CAAQ,EAAE,YAAY,CAAC;AAAA,wBAC/BJ,EAAOK,CAAO,EAAE,YAAY,CAAC;AAAA,sBAC/BC,CAAQ,EAAE,EACxB,KAIF,MAAWI,EAAYH,EACrBH,EAAS,EAAI,KAAK,MAAMA,EAAS,EAAIO,CAAe,EAKpDN,EAAQ,EAAI,KAAK,MAAMA,EAAQ,EAAIM,CAAe,EAIpDL,EAAW,KAAK,SAASF,EAAUC,CAAO,EAC1CK,GACF,CACA,MAAO,CAAE,MAAOV,EAAOI,CAAQ,EAAG,KAAMJ,EAAOK,CAAO,CAAE,CAC1D,CAEQ,SAASO,EAAkBC,EAA2B,CAC5D,OAAOb,EAAOY,CAAK,EAAE,MAAMZ,EAAOa,CAAM,CAAC,CAC3C,CAEQ,MAAMC,EAAaC,EAAc,EAAGC,EAAe,IAAa,CACtE,OAAO,KAAK,IAAI,KAAK,IAAID,EAAKD,CAAG,EAAGE,CAAI,CAC1C,CAGA,YAAYb,EAAgC,CAC1C,OAAOA,EAAe,OAAO,IAAK,CACpC,CAEA,qBAAqBA,EAGnB,CACA,MAAO,CACL,MAAOA,EAAe,OAAO,EAAG,EAChC,KAAMA,EAAe,OAAO,EAAG,CACjC,CACF,CAEA,oBAA6B,CAC3B,OAAOH,EAAO,kBAAkB,CAClC,CAEA,UAAUE,EAA4B,CACpC,OAAOA,EAAO,KAAK,IAAM,QAAmB,UAAY,SAC1D,CAEA,aAAae,EAAaC,EAAuB,CAC/C,IAAMC,EAAMF,EAAG,UAAUC,CAAI,EAC7B,GAAID,EAAG,QAAQC,CAAI,EACjB,OAAO,KAAK,MAEd,OAAQD,EAAG,YAAYC,CAAI,EAAG,CAC5B,OACA,OAAuB,CACrB,IAAMlB,EAAI,KAAK,MAAM,KACrB,OAAIiB,EAAG,YAAYC,CAAI,GAAKD,EAAG,QAAQC,CAAI,EAClC,KAAK,eAEPlB,EAAO,CACZ,EAAG,KAAK,IAAIA,EAAE,EAAI,IAAM,GAAK,KAAK,IAAImB,EAAK,EAAE,GAAI,CAAC,EAClD,EAAG,KAAK,IAAInB,EAAE,EAAI,IAAM,GAAK,KAAK,IAAImB,EAAK,EAAE,GAAI,CAAC,EAClD,EAAG,KAAK,IAAInB,EAAE,EAAI,IAAM,GAAK,KAAK,IAAImB,EAAK,EAAE,GAAI,CAAC,CACpD,CAAC,CACH,CACA,OACE,OAAOnB,EAAO,CACZ,EAAG,IACH,EAAG,IAAM,EAAImB,EACb,EAAG,GACL,CAAC,EACH,OACE,OAAOnB,EAAO,CACZ,EAAG,IAAM,EAAImB,EACb,EAAG,IAAM,EAAIA,EACb,EAAG,IAAM,EAAIA,CACf,CAAC,EACH,OACE,OAAOnB,EAAO,CACZ,EAAG,IAAMmB,EAAM,EACf,EAAG,IAAMA,EAAM,EACf,EAAG,IAAMA,EAAM,CACjB,CAAC,CACL,CACF,CAEA,iBAA0B,CACxB,OAAO,KAAK,UACd,CAEA,cAAuB,CACrB,OAAO,KAAK,KAAK,YAAY,KAAK,aAAa,CACjD,CAEA,MAAe,CACb,MAAO,sBACT,CAEA,WAAoB,CAClB,OAAO,KAAK,UACd,CACA,WAAoB,CAClB,OAAO,KAAK,UACd,CACA,cAAuB,CACrB,OAAO,KAAK,aACd,CACA,YAAqB,CACnB,OAAO,KAAK,WACd,CAEA,qBAA8B,CAC5B,OAAO,KAAK,oBACd,CAEA,yBAAkC,CAChC,OAAO,KAAK,wBACd,CAEA,yBAAkC,CAChC,OAAO,KAAK,wBACd,CAEA,0BAAmC,CACjC,OAAO,KAAK,yBACd,CACF,ECtNO,IAAMC,GAAN,cAA8BC,EAAY,CAA1C,kCACL,KAAQ,UAAYC,EAAO,iBAAiB,EAE5C,KAAQ,UAAYA,EAAO,eAAe,EAC1C,KAAQ,mBAAqBA,EAAO,eAAe,EAEnD,aAAaC,EAAaC,EAAuB,CAC/C,IAAMC,EAAMF,EAAG,UAAUC,CAAI,EAC7B,GAAID,EAAG,QAAQC,CAAI,EACjB,OAAO,KAAK,UAEd,OAAQD,EAAG,YAAYC,CAAI,EAAG,CAC5B,OACA,OAAuB,CACrB,IAAMF,EAAI,KAAK,UAAU,KACzB,OAAIC,EAAG,YAAYC,CAAI,GAAKD,EAAG,QAAQC,CAAI,EAClC,KAAK,mBAEVD,EAAG,UAAUC,CAAI,EAAI,GAChBF,EAAO,CACZ,EAAG,KAAK,IAAIA,EAAE,EAAI,EAAIG,EAAK,CAAC,EAC5B,EAAG,KAAK,IAAIH,EAAE,EAAI,EAAIG,EAAK,CAAC,EAC5B,EAAG,KAAK,IAAIH,EAAE,EAAI,EAAIG,EAAK,CAAC,CAC9B,CAAC,EAEI,KAAK,SACd,CACA,OACE,OAAOH,EAAO,CACZ,EAAG,IACH,EAAG,IAAM,EAAIG,EACb,EAAG,EACL,CAAC,EACH,OACE,OAAOH,EAAO,CACZ,EAAG,IAAM,EAAIG,EACb,EAAG,IAAM,EAAIA,EACb,EAAG,GAAK,EAAIA,CACd,CAAC,EACH,OACE,OAAOH,EAAO,CACZ,EAAG,IAAMG,EAAM,EACf,EAAG,IAAMA,EAAM,EACf,EAAG,IAAMA,EAAM,CACjB,CAAC,CACL,CACF,CACF,ECpBA,IAAMC,GAA0B,KAC1BC,GAA4B,KAAK,IAAM,IAEvCC,GAAaC,EAAE,OAAO,CAC1B,KAAMA,EACH,OAAO,CACN,IAAKA,EAAE,QAAQ,OAAO,EACtB,IAAKA,EAAE,QAAQ,SAAS,EACxB,IAAKA,EAAE,QAAQ,KAAK,EACpB,EAAGA,EAAE,OAAO,CACd,CAAC,EACA,MAAM,EACN,IAAI,CAAC,CACV,CAAC,EAEKC,GAAmB,CACtB,OAAqB,CAAC,IAAK,GAAI,EAAE,EACjC,KAAmB,CAAC,GAAI,GAAI,EAAE,EAC9B,UAAwB,CAAC,GAAI,GAAI,EAAE,EACnC,QAAsB,CAAC,GAAI,GAAI,EAAE,EACjC,OAAqB,CAAC,IAAK,GAAI,EAAE,EACjC,qBAA6B,CAAC,IAAK,GAAI,EAAE,EACzC,mBAA6B,CAAC,GAAI,GAAI,EAAE,EACxC,YAAuB,CAAC,GAAI,GAAI,EAAE,EAClC,UAAwB,CAAC,GAAI,GAAI,EAAE,EACnC,yBAAoC,CAAC,GAAI,GAAI,EAAE,EAC/C,YAAuB,CAAC,GAAI,GAAI,EAAE,EAClC,OAAqB,CAAC,IAAK,GAAI,EAAE,EACjC,iBAA4B,CAAC,GAAI,GAAI,EAAE,EACvC,mBAA8B,CAAC,GAAI,GAAI,EAAE,EACzC,eAA0B,CAAC,GAAI,GAAI,EAAE,EACrC,gBAA2B,CAAC,GAAI,GAAI,EAAE,EACtC,0BAAmC,CAAC,IAAK,GAAI,EAAE,EAC/C,kBAA4B,CAAC,IAAK,GAAI,EAAE,EACxC,uBAA+B,CAAC,GAAI,GAAI,EAAE,EAC1C,UAAwB,CAAC,IAAK,GAAI,EAAE,EACpC,QAAsB,CAAC,GAAI,GAAI,EAAE,EACjC,OAAqB,CAAC,GAAI,GAAI,EAAE,EAChC,MAAoB,CAAC,GAAI,GAAI,EAAE,EAC/B,OAAqB,CAAC,GAAI,GAAI,EAAE,EAChC,YAA0B,CAAC,GAAI,GAAI,EAAE,EACrC,KAAmB,CAAC,GAAI,GAAI,EAAE,EAC9B,KAAmB,CAAC,GAAI,GAAI,EAAE,EAC9B,SAAuB,CAAC,GAAI,GAAI,EAAE,EAClC,gBAA0B,CAAC,GAAI,GAAI,EAAE,EACrC,gBAA2B,CAAC,GAAI,GAAI,EAAE,EACtC,QAAsB,CAAC,GAAI,GAAI,EAAE,EACjC,QAAsB,CAAC,GAAI,GAAI,EAAE,EACjC,MAAoB,CAAC,IAAK,GAAI,EAAE,EAChC,gBAA2B,CAAC,GAAI,GAAI,EAAE,EACtC,sBAAgC,CAAC,IAAK,GAAI,EAAE,EAC5C,QAAsB,CAAC,GAAI,GAAI,EAAE,EACjC,MAAoB,CAAC,GAAI,GAAI,EAAE,CAClC,EAEsBC,GAAf,KAA2D,CAChE,oBAA6B,CAC3B,OAAO,QAAQ,IAAI,sBAAwB,EAC7C,CAEA,eAAsC,CAEtC,CACA,sBAA+B,CAC7B,OAAO,QAAQ,IAAI,wBAA0B,EAC/C,CACA,QAAiB,CACf,OAAO,QAAQ,IAAI,QAAU,EAC/B,CACA,WAAoB,CAClB,OAAO,QAAQ,IAAI,WAAa,EAClC,CACA,qBAA8B,CAC5B,OAAO,QAAQ,IAAI,eAAiB,EACtC,CACA,oBAA6B,CAC3B,OAAO,QAAQ,IAAI,cAAgB,EACrC,CACA,sBAA+B,CAC7B,OAAO,QAAQ,IAAI,gBAAkB,EACvC,CACA,qBAA8B,CAC5B,OAAO,QAAQ,IAAI,eAAiB,EACtC,CAIA,WAAoB,CAClB,IAAMC,EAAW,KAAK,YAAY,EAClC,OAAOA,IAAa,YAChB,wBACA,eAAeA,CAAQ,EAC7B,CACA,MAAM,cAA6B,CACjC,GAAI,KAAK,UAAW,OAAO,KAAK,UAChC,IAAMC,EAAU,KAAK,UAAU,EAAI,yBACnC,QAAQ,IAAI,sBAAsBA,CAAO,EAAE,EAC3C,IAAMC,EAAW,MAAM,MAAMD,CAAO,EAC9BE,EAASP,GAAW,UAAU,MAAMM,EAAS,KAAK,CAAC,EACzD,GAAI,CAACC,EAAO,QAAS,CACnB,IAAMC,EAAQP,EAAE,cAAcM,EAAO,KAAK,EAC1C,cAAQ,MAAM,qBAAsBC,CAAK,EACnC,IAAI,MAAM,cAAc,CAChC,CACA,YAAK,UAAYD,EAAO,KAAK,KAAK,CAAC,EAC5B,KAAK,SACd,CACA,aAAuB,CACrB,OACE,KAAK,IAAI,IAAM,GACf,EAAQ,KAAK,aAAa,GAC1B,EAAQ,KAAK,eAAe,CAEhC,CACA,cAAuB,CACrB,OAAO,QAAQ,IAAI,6BAA+B,EACpD,CACA,gBAAyB,CACvB,OAAO,QAAQ,IAAI,kBAAoB,EACzC,CACA,WAAoB,CAClB,OAAO,QAAQ,IAAI,YAAc,EACnC,CACA,YAAqB,CACnB,MAAO,WAAW,QAAQ,IAAI,aAAa,2BAC7C,CACA,aAAsB,CACpB,OAAO,QAAQ,IAAI,eAAiB,EACtC,CACA,aAAsB,CACpB,OAAO,QAAQ,IAAI,eAAiB,EACtC,CAEA,UAAmB,CACjB,OAAO,QAAQ,IAAI,WAAa,EAClC,CAEA,QAAiB,CACf,OAAO,QAAQ,IAAI,SAAW,EAChC,CAEA,aAAsB,CACpB,MAAO,aACT,CACA,YAAqB,CACnB,OAAO,QAAQ,IAAI,aAAe,mBACpC,CAGA,gBAAyB,CACvB,MAAO,IACT,CACA,kBAA2B,CACzB,MAAO,IAAK,GACd,CAEA,gBACEE,EACAC,EACAC,EACQ,CACR,GAAM,CAACC,EAAGC,EAAGC,CAAC,EAAIZ,GAAiBO,CAAG,GAAK,CAAC,GAAI,GAAI,EAAE,EAChDM,EAAI,KAAK,OAAO,EAChBC,EAAOD,EAAI,GAAMH,EAAIG,EAAI,GAAMF,EAAIC,EACrCG,EAAI,KAAK,IAAIP,IAAS,OAAgB,KAAK,KAAKM,EAAO,GAAG,EAAIA,EAAMJ,CAAC,EACzE,GAAID,IAAmB,OAAW,OAAOM,EACzC,OAAQN,EAAgB,CACtB,KAAKO,GACHD,GAAKA,EAAI,EACT,MACF,KAAKE,GACHF,GAAKA,EAAI,EACT,MACF,KAAKG,GACHH,GAAKA,EAAI,EACT,MACF,KAAKI,GAEH,MACF,QACEJ,GAAKA,EAAIN,EACT,KACJ,CACA,OAAOM,CACT,CAEA,YAAYK,EAAwB,CAClC,OAAOC,EAAWD,CAAM,EAAI,KAAK,WAAW,CAC9C,CACA,WAAWA,EAAwB,CACjC,MAAO,IAAI,KAAK,YAAYA,CAAM,CAAC,EACrC,CACA,WAAWA,EAAwB,CACjC,OAAO,KAAK,kBAAkB,KAAK,YAAYA,CAAM,CAAC,CACxD,CACA,kBAAkBE,EAAuB,CACvC,MAAO,MAAOA,CAChB,CACA,mBAA6B,CAC3B,MAAO,EACT,CACF,EAEaC,GAAN,KAAsC,CAG3C,YACUC,EACAC,EACAC,EACAC,EACR,CAJQ,mBAAAH,EACA,iBAAAC,EACA,mBAAAC,EACA,eAAAC,EANV,KAAQ,YAA2B,IAAIC,GACvC,KAAQ,gBAAmC,IAAIC,EAM5C,CAEH,sBAA+B,CAC7B,OAAO,QAAQ,IAAI,wBAA0B,EAC/C,CAEA,UAAoB,CAClB,OAAO,KAAK,SACd,CAEA,kBAA2B,CACzB,MAAO,GACT,CAEA,yBAAkC,CAChC,MAAO,GACT,CAEA,sBAA+B,CAC7B,MAAO,GACT,CACA,oBAA6B,CAC3B,MAAO,GACT,CACA,iBAA0B,CACxB,MAAO,IAAK,EACd,CACA,uBAA8B,CAC5B,MAAO,GAAI,EACb,CAEA,YAAyB,CACvB,OAAO,KAAK,WACd,CAEA,cAA6B,CAC3B,OAAO,KAAK,aACd,CAEA,cAA6B,CAC3B,GAAI,KAAK,gBAAkB,KACzB,MAAM,IAAI,MAAM,sBAAsB,EAExC,OAAO,KAAK,aACd,CAEA,mBAAmBC,EAAgC,CACjD,OAAQA,EAAY,CAClB,WACE,MAAO,GACT,aACE,MAAO,GACT,WACE,MAAO,GACT,iBACE,MAAO,GACX,CACF,CAEA,mBAA4B,CAC1B,MAAO,KACT,CAEA,uBAAuBC,EAA8B,CAGnD,MAAO,GAAIA,EAAe,CAC5B,CACA,aAAsB,CACpB,MAAO,GACT,CACA,cAAuB,CACrB,MAAO,GACT,CAEA,kBAA2B,CACzB,MAAO,GACT,CAEA,yBAAkC,CAChC,MAAO,EACT,CAEA,uBAAgC,CAC9B,MAAO,EACT,CAEA,aAA+B,CAC7B,OAAO,KAAK,YAAY,aAAe,CACzC,CAEA,WAAqB,CACnB,MAAO,CAAC,KAAK,YAAY,WAC3B,CAEA,eAAeC,EAA6B,CAC1C,OAAO,KAAK,YAAY,eAAe,SAASA,CAAQ,GAAK,EAC/D,CAEA,MAAe,CACb,OAAO,KAAK,YAAY,IAC1B,CACA,cAAwB,CACtB,OAAO,KAAK,YAAY,YAC1B,CACA,eAAyB,CACvB,OAAO,KAAK,YAAY,WAC1B,CACA,cAAwB,CACtB,OAAO,KAAK,YAAY,YAC1B,CACA,YAAsB,CACpB,OAAO,KAAK,YAAY,UAC1B,CACA,gBAA0B,CACxB,OAAO,KAAK,YAAY,cAC1B,CACA,cAAwB,CACtB,OAAO,KAAK,YAAY,YAC1B,CAEA,eAAeC,EAAoC,CAGjD,OAAQA,EAAqB,IAAM,EACrC,CACA,UAAUC,EAA+C,CACvD,OAAQA,EAAK,CACX,IAAK,OACH,OAAO,OACT,IAAK,OACL,IAAK,QACH,OAAO,OACT,IAAK,OACH,OAAO,MACX,CACF,CAEA,sBAA+B,CAC7B,MAAO,GACT,CACA,sBAA+B,CAC7B,MAAO,IACT,CACA,iBAA0B,CACxB,MAAO,IACT,CAEA,cAAcC,EAAcC,EAAwB,CAElD,IAAMC,EAAS,KAAK,0BAA0B,EACxCC,EACJ,KAAW,EAAI,KAAK,IAAI,MAASH,EAAOE,EAAO,GAAK,IAAMF,EACtDI,EAAeH,EAAW,EAE1BI,EAAQ,EAAI,GAAKD,GAAgBA,EAAe,IACtD,OAAO,OAAO,KAAK,MAAMD,EAAWE,CAAK,CAAC,CAC5C,CAGA,mBACEC,EACAC,EACAC,EACQ,CAER,IAAMC,EAAW,KAAK,KACpB,KAAK,mBAAmBH,EAAeE,CAAmB,EACxD,KAAK,wBAAwBD,CAAc,CAC/C,EAEA,OAAO,KAAK,MAAM,GAAKE,CAAQ,CACjC,CAEQ,mBACNH,EACAE,EACQ,CACR,GAAIA,EAAsB,EAGxB,MAAO,GAET,IAAME,EAAY,KAAK,IAAM,GAC7B,MAAO,GAAIC,GAAQL,EAAeI,EAAW,EAAE,CACjD,CAEQ,wBAAwBH,EAAgC,CAK9D,MAAO,IAAK,EAAI,GAAYA,EAC9B,CAEA,SAASK,EAA0B,CACjC,OAAQA,EAAM,CACZ,gBACE,MAAO,CACL,KAAM,IAAM,GACZ,eAAgB,EAClB,EACF,cACE,MAAO,CACL,KAAM,KAAK,YACRC,GAAqB,KAAK,IAAI,KAAYA,EAAW,GAAK,IAAO,WAEpE,EACA,eAAgB,GAChB,UAAW,GACb,EACF,YACE,MAAO,CACL,KAAM,IAAM,GACZ,eAAgB,GAChB,OAAQ,GACV,EACF,iBACE,MAAO,CACL,KAAM,IAAM,GACZ,eAAgB,EAClB,EACF,WACE,MAAO,CACL,KAAM,KAAK,YACRA,GACC,KAAK,IAAI,IAAW,KAAK,IAAI,EAAGA,CAAQ,EAAI,KAAO,kBAGvD,EACA,eAAgB,GAChB,qBAAsB,KAAK,aAAa,EAAI,EAAI,EAAI,GACpD,WAAY,GACZ,qBAAsB,EACxB,EACF,gBACE,MAAO,CACL,KAAM,KAAK,YAAY,IAAM,gBAA0B,EACvD,eAAgB,EAClB,EACF,oBACE,MAAO,CACL,KAAM,KAAK,YAAY,IAAM,mBAAgC,EAC7D,eAAgB,EAClB,EACF,WACE,MAAO,CACL,KAAM,CAACC,EAAYC,IACbA,EAAO,KAAK,IAAM,SAAoB,KAAK,aAAa,EACnD,GAEF,UAAcD,EAAK,MAAM,EAAE,iBAAiB,EAAI,UAEzD,eAAgB,EAClB,EACF,mBACE,MAAO,CACL,KAAM,IAAM,GACZ,eAAgB,EAClB,EACF,iBACE,MAAO,CACL,KAAM,IAAM,GACZ,eAAgB,EAClB,EACF,mBACE,MAAO,CACL,KAAM,KAAK,YAAY,IAAM,kBAA+B,EAC5D,eAAgB,GAChB,qBAAsB,KAAK,aAAa,EAAI,EAAI,GAAK,GACrD,WAAY,EACd,EACF,mBACE,MAAO,CACL,KAAM,KAAK,YACRD,GAAqB,KAAK,IAAI,MAAUA,EAAW,GAAK,GAAM,gBAEjE,EACA,eAAgB,GAChB,qBAAsB,KAAK,aAAa,EAAI,EAAI,EAAI,EACtD,EACF,mBACE,MAAO,CACL,KAAM,KAAK,YACRA,GACC,KAAK,IAAI,KAAYA,EAAW,GAAK,IAAS,gBAElD,EACA,eAAgB,GAChB,qBAAsB,KAAK,aAAa,EAAI,EAAI,GAAK,GACrD,WAAY,EACd,EACF,WACE,MAAO,CACL,KAAM,KAAK,YACRA,GACC,KAAK,IAAI,IAAW,KAAK,IAAI,EAAGA,CAAQ,EAAI,KAAO,QAEvD,EACA,eAAgB,GAChB,qBAAsB,KAAK,aAAa,EAAI,EAAI,EAAI,GACpD,WAAY,GACZ,qBAAsB,EACxB,EACF,cACE,MAAO,CACL,KAAM,KAAK,YACRA,GACC,KAAK,IAAI,IAAW,KAAK,IAAI,EAAGA,CAAQ,EAAI,KAAO,kBAGvD,EACA,eAAgB,GAChB,qBAAsB,KAAK,aAAa,EAAI,EAAI,EAAI,GACpD,qBAAsB,GACtB,aAAc,GACd,WAAY,EACd,EACF,YACE,MAAO,CACL,KAAM,IAAM,GACZ,eAAgB,GAChB,aAAc,EAChB,EACF,QACEG,GAAYJ,CAAI,CACpB,CACF,CAEQ,YACNK,KACGC,EAC6B,CAChC,MAAO,CAACJ,EAAYC,IAAmB,CACrC,GAAIA,EAAO,KAAK,IAAM,SAAoB,KAAK,aAAa,EAC1D,OAAO,GAET,IAAMF,EAAWK,EAAM,OACrB,CAACC,EAAKP,IACJO,EACA,KAAK,IAAIJ,EAAO,WAAWH,CAAI,EAAGG,EAAO,iBAAiBH,CAAI,CAAC,EACjE,CACF,EACA,OAAO,OAAOK,EAAOJ,CAAQ,CAAC,CAChC,CACF,CAEA,sBAAsBO,EAAwB,CAC5C,OAAO,KAAK,MAAMA,EAAO,OAAO,EAAI,CAAC,CACvC,CACA,gBAAuB,CACrB,MAAO,IAAK,EACd,CACA,oBAA2B,CACzB,MAAO,IAAK,EACd,CACA,sBAA6B,CAC3B,MAAO,IAAK,EACd,CAEA,oBAA2B,CACzB,MAAO,IAAK,EACd,CACA,sBAA6B,CAC3B,MAAO,GAAI,EACb,CACA,sBAA6B,CAC3B,MAAO,GAAI,EACb,CACA,gBAAuB,CACrB,MAAO,IAAK,EACd,CACA,gBAAuB,CACrB,MAAO,IAAK,EACd,CACA,yBAAgC,CAC9B,MAAO,IAAK,EACd,CACA,yBAAgC,CAC9B,MAAO,IAAK,EACd,CACA,kBAAyB,CACvB,MAAO,KAAM,EACf,CACA,0BAAiC,CAC/B,MAAO,KAAM,EACf,CAEA,2BAAoC,CAClC,OAAI,KAAK,YAAY,WAAa,OACzB,GAEF,EACT,CACA,eAAwB,CACtB,MAAO,EACT,CACA,oBAA6B,CAC3B,OAAO,KAAK,YAAY,WAAa,eAAwB,IAAM,GACrE,CACA,SAAkB,CAChB,OAAO,KAAK,KAAK,CACnB,CACA,OAAe,CACb,OAAO,KAAK,aAAa,GAAG,SAAS,EACjC,KAAK,gBACL,KAAK,WACX,CAEA,YACEC,EACAC,EACAC,EACAC,EACAC,EAKA,CACA,IAAIC,EAAM,EACNC,EAAQ,EACNf,EAAOS,EAAG,YAAYI,CAAa,EACzC,OAAQb,EAAM,CACZ,OACEc,EAAM,GACNC,EAAQ,KACR,MACF,OACED,EAAM,IACNC,EAAQ,GACR,MACF,OACED,EAAM,IACNC,EAAQ,GACR,MACF,QACE,MAAM,IAAI,MAAM,gBAAgBf,CAAI,gBAAgB,CACxD,CACA,GAAIY,EAAS,SAAS,GACpB,QAAWI,KAAMP,EAAG,YAClBI,EACAJ,EAAG,OAAO,EAAE,iBAAiB,gBAE/B,EACE,GAAIO,EAAG,KAAK,MAAM,IAAMJ,EAAU,CAChCE,GAAO,KAAK,wBAAwB,EACpCC,GAAS,KAAK,sBAAsB,EACpC,KACF,EAIJ,GAAIN,EAAG,WAAWI,CAAa,EAAG,CAChC,IAAM7B,EAAeyB,EAAG,oBAAoB,EAAIA,EAAG,aAAa,EAChEK,GAAO,KAAK,uBAAuB9B,CAAY,EAC/C+B,GAAS,KAAK,uBAAuB/B,CAAY,CACnD,CAqBA,GAnBI2B,EAAS,SAAS,GAAKC,EAAS,SAAS,IACvCA,EAAS,eAAe,GAAKD,EAAS,aAAaC,CAAQ,IAE7DE,EAAM,GAGNH,EAAS,KAAK,IAAM,SACpBC,EAAS,KAAK,IAAM,QAEpBE,GAAO,IAGPH,EAAS,KAAK,IAAM,aACpBC,EAAS,KAAK,IAAM,QAEpBE,GAAO,KAIPF,EAAS,SAAS,EAAG,CACvB,IAAMK,EACJ,EACAlB,GACEa,EAAS,cAAc,EACvB9D,GACAD,EACF,EAEIqE,EAA2B,GAAM,GAAMD,EACvCE,EAA4B,GAAM,GAAMF,EAE1CG,EAAmB,EACnBT,EAAS,cAAc,EAAI,MAC7BS,EAAmB,KAAK,KAAK,IAAUT,EAAS,cAAc,CAAC,GAAK,IAEtE,IAAIU,EAA0B,EAC9B,OAAIV,EAAS,cAAc,EAAI,MAC7BU,GAA2B,IAAUV,EAAS,cAAc,IAAM,IAG7D,CACL,kBACEW,GAAOV,EAAS,OAAO,EAAIF,EAAc,GAAK,CAAC,EAC/CI,EACA,GACAK,EACAC,GACCR,EAAS,UAAU,EAAI,KAAK,qBAAqB,EAAI,GACxD,kBAAmBA,EAAS,OAAO,EAAIA,EAAS,cAAc,EAC9D,iBACEU,GAAOV,EAAS,OAAO,GAAK,EAAIF,GAAe,GAAK,GAAG,EACvDK,EACAG,EACAG,GACCT,EAAS,UAAU,EAAI,KAAK,mBAAmB,EAAI,EACxD,CACF,KACE,OAAO,CACL,kBACED,EAAS,KAAK,IAAM,MAAiBG,EAAM,GAAKA,EAAM,EACxD,kBAAmB,EACnB,iBAAkBQ,GACf,IAAO,KAAK,IAAI,GAAIP,CAAK,EAAKL,EAC/B,EACA,GACF,CACF,CAEJ,CAEA,mBACEA,EACAC,EACAC,EACAW,EACQ,CACR,OAAIX,EAAS,SAAS,EAElBU,GAAS,EAAIZ,EAAgBE,EAAS,OAAO,EAAK,EAAG,IAAM,EAAG,EAC9DW,EACA,EAGKA,EAA4B,CAEvC,CAEA,iBAAiBZ,EAAkBC,EAAyC,CAC1E,OAAO,KAAK,MAAMD,EAAS,OAAO,EAAI,CAAC,CACzC,CAEA,sBAA+B,CAC7B,MAAO,GACT,CAEA,iBAAkB,CAChB,MAAO,GACT,CAEA,2BAAoC,CAClC,MAAO,IACT,CAEA,sBAAsBa,EAAoB,CACxC,OAAOF,GAAOE,EAAa,EAAG,EAAGA,CAAU,CAC7C,CAEA,aAAab,EAAkBC,EAAiC,CAC9D,OAAID,EAAS,KAAK,IAAM,MACfA,EAAS,OAAO,EAAI,GAEpBA,EAAS,OAAO,EAAI,CAE/B,CAEA,mCAA6C,CAI3C,MAAO,EACT,CAEA,cAAcc,EAAgC,CAC5C,GAAIA,EAAW,aAAe,MAC5B,MAAO,KAET,GAAIA,EAAW,aAAe,YAAsB,CAClD,IAAMC,EAAW,KAAK,kCAAkC,EACnDD,EAAW,gBAAkB,EAC9B,EAEJ,OAAQ,KAAK,YAAY,WAAY,CACnC,WACE,MAAO,OAASC,EAClB,aACE,MAAO,MAASA,EAClB,WACE,MAAO,OAASA,EAClB,iBACE,MAAO,OAASA,CACpB,CACF,CACA,OAAO,KAAK,eAAe,EAAI,IAAY,IAC7C,CAEA,UAAUvB,EAAqC,CAC7C,IAAMwB,EACJxB,EAAO,KAAK,IAAM,SAAoB,KAAK,eAAe,EACtD,IACA,GAAK,KAAK,IAAIA,EAAO,cAAc,EAAG,EAAG,EAAI,IAAO,KACpDA,EACG,YAAmB,EACnB,IAAKyB,GAASA,EAAK,MAAM,CAAC,EAC1B,OAAO,CAACC,EAAGC,IAAMD,EAAIC,EAAG,CAAC,EAC1B,KAAK,kBAAkB,EAE/B,GAAI3B,EAAO,KAAK,IAAM,MACpB,OAAOwB,EAAY,EAGrB,GAAIxB,EAAO,KAAK,IAAM,QACpB,OAAOwB,EAGT,OAAQ,KAAK,YAAY,WAAY,CACnC,WACE,OAAOA,EAAY,IACrB,aACE,OAAOA,EAAY,EACrB,WACE,OAAOA,EAAY,KACrB,iBACE,OAAOA,EAAY,GACvB,CACF,CAEA,kBAAkBxB,EAAwB,CACxC,IAAM4B,EAAM,KAAK,UAAU5B,CAAM,EAE7B6B,EAAQ,GAAK,KAAK,IAAI7B,EAAO,OAAO,EAAG,GAAI,EAAI,EAE7C8B,EAAQ,EAAI9B,EAAO,OAAO,EAAI4B,EAOpC,GANAC,GAASC,EAEL9B,EAAO,KAAK,IAAM,QACpB6B,GAAS,IAGP7B,EAAO,KAAK,IAAM,YACpB,OAAQ,KAAK,YAAY,WAAY,CACnC,WACE6B,GAAS,IACT,MACF,aACEA,GAAS,EACT,MACF,WACEA,GAAS,KACT,MACF,iBACEA,GAAS,IACT,KACJ,CAGF,OAAO,KAAK,IAAI7B,EAAO,OAAO,EAAI6B,EAAOD,CAAG,EAAI5B,EAAO,OAAO,CAChE,CAEA,iBAAiBA,EAAsB,CACrC,OAAIA,EAAO,KAAK,IAAM,MACb,IAEF,IACT,CAEA,eAAelB,EAAmC,CAChD,OAAQA,EAAU,CAChB,mBACE,MAAO,CAAE,MAAO,GAAI,MAAO,EAAG,EAChC,gBACE,MAAO,CAAE,MAAO,GAAI,MAAO,EAAG,EAChC,oBACE,MAAO,CAAE,MAAO,GAAI,MAAO,GAAI,CACnC,CACA,MAAM,IAAI,MAAM,sBAAsBA,CAAQ,EAAE,CAClD,CAEA,4BAAqC,CACnC,MAAO,IACT,CAEA,kBAA2B,CACzB,MAAO,EACT,CAEA,4BAAqC,CACnC,MAAO,IACT,CAEA,iBAA0B,CACxB,MAAO,GACT,CAEA,SAASiD,EAAuB,CAE9B,OAAO,KAAK,YAAY,EAAI,KAAOA,EAAQ,EAC7C,CAEA,aAAsB,CACpB,MAAO,IACT,CAEA,wBAAiC,CAC/B,MAAO,GACT,CAGA,gBACEC,EACAC,EACAC,EACAV,EACQ,CACR,GAAIQ,IAAa,eACf,MAAQ,GAAIC,EAAU,KAAK,IAAI,EAAGC,CAAU,EAE9C,IAAMC,EAAe,IAAOX,EACtBY,EAAe,KAAK,IAAI,EAAGH,EAASE,CAAY,EAChDE,EAAgB,IAEhBC,EAAY,EACZC,EAAmBH,EAAeZ,EACxC,OAAOa,GAAiB,EAAI,KAAK,IAAI,CAACC,EAAYC,CAAgB,EACpE,CAEA,kBAA2B,CACzB,MAAO,GACT,CAEA,eAAwB,CACtB,MAAO,GACT,CAEA,oBAA6B,CAC3B,MAAO,IACT,CAEA,wBAAiC,CAC/B,MAAO,IACT,CAEA,wBAAiC,CAC/B,MAAO,GACT,CAEA,4BAAqC,CACnC,MAAO,IACT,CAEA,4BAAqC,CACnC,MAAO,GACT,CAEA,4BAAqC,CACnC,MAAO,GACT,CAEA,+BAAwC,CACtC,MAAO,IACT,CACF,EC/+BO,IAAMC,GAAN,cAA8BC,EAAoB,CACvD,kBAA2B,CACzB,MAAO,0BACT,CAEA,oBAA6B,CAC3B,MAAO,qCACT,CAEA,YAAqB,CACnB,MAAO,gDACT,CAEA,QAAiB,CACf,MAAO,8CACT,CAEA,KAAe,CACb,QACF,CAEA,kBAA2B,CACzB,MAAO,GAAI,GACb,CAEA,yBAAkC,CAChC,MAAO,EACT,CAEA,kBAA2B,CACzB,MAAO,EACT,CAEA,YAAqB,CACnB,MAAO,EACT,CACA,aAAsB,CACpB,MAAO,WACT,CACA,WAAoB,CAClB,MAAO,KACT,CAEA,QAAiB,CACf,MAAO,WACT,CAEA,WAAoB,CAClB,MAAO,EACT,CACF,EAEaC,GAAN,cAAwBC,EAAc,CAC3C,YACEC,EACAC,EACAC,EACAC,EACA,CACA,MAAMH,EAAIC,EAAIC,EAAIC,CAAQ,CAC5B,CACF,EC/DO,IAAMC,GAAgB,IAAK,cAAcC,EAAoB,CAClE,KAAe,CACb,QACF,CACA,YAAqB,CACnB,MAAO,EACT,CACA,kBAA2B,CACzB,MAAO,0BACT,CACA,aAAsB,CACpB,MAAO,eACT,CACA,eAAsC,CAQtC,CACF,ECtBO,IAAMC,GAAa,IAAK,cAAcC,EAAoB,CAC/D,YAAqB,CACnB,MAAO,GACT,CACA,KAAe,CACb,QACF,CACA,aAAsB,CACpB,MAAO,cACT,CACA,kBAA2B,CACzB,MAAO,0BACT,CACF,ECRO,IAAIC,GAAgC,KAE3C,eAAsBC,GACpBC,EACAC,EACAC,EAAoB,GACH,CACjB,IAAMC,EAAK,MAAMC,GAA0B,EAC3C,OAAQD,EAAG,IAAI,EAAG,CAChB,OACE,OAAO,IAAIE,GAAUF,EAAIH,EAAYC,EAAcC,CAAQ,EAC7D,OACA,OACE,eAAQ,IAAI,mBAAmB,EACxB,IAAII,GAAcH,EAAIH,EAAYC,EAAcC,CAAQ,EACjE,QACE,MAAM,MAAM,qCAAqC,QAAQ,IAAI,QAAQ,EAAE,CAC3E,CACF,CACA,eAAsBE,IAAmD,CACvE,GAAIN,GACF,OAAOA,GAET,IAAMS,EAAW,MAAM,MAAM,UAAU,EAEvC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MACR,kCAAkCA,EAAS,MAAM,IAAIA,EAAS,UAAU,EAC1E,EAEF,IAAMC,EAAS,MAAMD,EAAS,KAAK,EAEnC,eAAQ,IAAI,wBAAyBC,CAAM,EAE3CV,GAAWW,GAAgBD,EAAO,QAAQ,EACnCV,EACT,CAKO,SAASY,GAAgBC,EAAiB,CAC/C,OAAQA,EAAS,CACf,IAAK,MACH,eAAQ,IAAI,yBAAyB,EAC9B,IAAIC,GACb,IAAK,UACH,eAAQ,IAAI,6BAA6B,EAClCC,GACT,IAAK,OACH,eAAQ,IAAI,0BAA0B,EAC/BC,GACT,QACE,MAAM,MAAM,qCAAqCH,CAAO,EAAE,CAC9D,CACF,CCvDO,IAAMI,GAAN,KAAsD,CAC3D,YACmBC,EACAC,EACjB,CAFiB,UAAAD,EACA,UAAAC,CAChB,CAEH,KAAKC,EAAUC,EAAqB,CAClC,GAAI,CAACD,EAAG,UAAU,KAAK,IAAI,EAAG,CAC5B,QAAQ,KACN,uCAAuC,KAAK,IAAI,YAClD,EACA,MACF,CACA,IAAME,EAAKF,EAAG,OAAO,KAAK,IAAI,EAE9B,GAAI,CAAC,KAAK,KAAK,QAAQ,GAAK,CAACE,EAAG,QAAQ,EAAG,CACzC,QAAQ,KACN,uCAAuC,KAAK,KAAK,GAAG,CAAC,OAAO,KAAK,IAAI,eACvE,EACA,MACF,CAEA,IAAMC,EAAW,KAAK,KAAK,aAAaD,CAAE,EAC1C,GAAI,CAACC,EAAU,CACb,QAAQ,KACN,8DAA8D,KAAK,KAAK,GAAG,CAAC,QAAQ,KAAK,IAAI,EAC/F,EACA,MACF,CAGA,IAAMC,EAAmBD,EAAS,sBAAsB,EAGxDA,EAAS,oBAAoB,KAAK,IAAI,EAElCA,EAAS,mBAAmB,GAC9BA,EAAS,OAAO,EAEhBH,EAAG,eACD,qCAEA,KAAK,KAAK,GAAG,EACb,OACA,CAAE,KAAME,EAAG,YAAY,CAAE,CAC3B,EACAF,EAAG,eACD,qCAEA,KAAK,KACL,OACA,CAAE,KAAM,KAAK,KAAK,YAAY,CAAE,CAClC,GACSG,EAAS,sBAAsB,GAAK,CAACC,GAG9CJ,EAAG,eACD,4CAEA,KAAK,KACL,OACA,CAAE,KAAM,KAAK,KAAK,YAAY,CAAE,CAClC,CAEJ,CAEA,KAAKC,EAAqB,CAE1B,CAEA,UAAoB,CAClB,MAAO,EACT,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EC7EO,IAAMI,GAAN,KAAoD,CAKzD,YACUC,EACAC,EACR,CAFQ,eAAAD,EACA,iBAAAC,EANV,KAAQ,IAA8B,KACtC,KAAQ,OAAS,EAMd,CAEH,KAAKC,EAAUC,EAAqB,CAElC,GADA,KAAK,GAAKD,EACN,CAACA,EAAG,UAAU,KAAK,WAAW,EAAG,CACnC,QAAQ,KACN,sCAAsC,KAAK,WAAW,YACxD,EACA,MACF,CAEA,IAAME,EAAYF,EAAG,OAAO,KAAK,WAAW,EAE5C,GAAI,CAAC,KAAK,UAAU,uBAAuBE,CAAS,EAClD,QAAQ,KAAK,8BAA8B,EAC3C,KAAK,OAAS,OACT,CACL,IAAMC,EAAWD,EACd,yBAAyB,EACzB,KAAME,GAAMA,EAAE,UAAU,IAAM,KAAK,SAAS,EAC3CD,GAGF,KAAK,OAAS,GACdA,EAAS,OAAO,GAEhB,KAAK,IAAM,KAAK,UAAU,sBAAsBD,CAAS,CAE7D,CACF,CAEA,KAAKD,EAAqB,CACxB,GACE,KAAK,KAAK,OAAO,IAAM,YACvB,KAAK,KAAK,OAAO,IAAM,WACvB,CACA,KAAK,OAAS,GACd,MACF,CAEE,KAAK,GAAG,MAAM,GAAK,KAAK,KAAK,UAAU,GAAK,GAC5C,KAAK,GAAG,OAAO,EAAE,wBAAwB,IAEzC,KAAK,KAAK,OAAO,EACjB,KAAK,OAAS,GAElB,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECrEO,IAAMI,GAAN,KAAyD,CAI9D,YACUC,EACAC,EACAC,EACR,CAHQ,iBAAAF,EACA,eAAAC,EACA,YAAAC,EANV,KAAQ,OAAS,GACjB,KAAQ,UAA2B,IAMhC,CAEH,KAAKC,EAAUC,EAAqB,CAClC,GAAI,CAACD,EAAG,UAAU,KAAK,WAAW,EAAG,CACnC,QAAQ,KACN,2CAA2C,KAAK,WAAW,YAC7D,EACA,KAAK,OAAS,GACd,MACF,CAGA,GAFA,KAAK,UAAYA,EAAG,OAAO,KAAK,WAAW,EAEvC,KAAK,UAAU,WAAW,KAAK,SAAS,EAC1C,QAAQ,KAAK,gBAAgB,MACxB,CACL,IAAME,EAAU,KAAK,UAClB,yBAAyB,EACzB,KAAMC,GAAOA,EAAG,UAAU,IAAM,KAAK,SAAS,EAC7CD,IAAY,OACd,QAAQ,KAAK,2BAA2B,EAEpC,KAAK,QACPA,EAAQ,OAAO,EACf,KAAK,UAAU,eAAe,KAAK,UAAW,GAAG,EACjD,KAAK,UAAU,eAAe,KAAK,UAAW,GAAG,GAEjDA,EAAQ,OAAO,CAGrB,CACA,KAAK,OAAS,EAChB,CAEA,KAAKD,EAAqB,CAAC,CAE3B,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EClDO,IAAMG,GAAN,KAAkD,CAKvD,YACUC,EACAC,EACR,CAFQ,eAAAD,EACA,iBAAAC,EANV,KAAQ,OAAS,GACjB,KAAQ,UAA2B,KACnC,KAAQ,GAAkB,IAKvB,CAEH,KAAKC,EAAUC,EAAqB,CAClC,GAAI,CAACD,EAAG,UAAU,KAAK,WAAW,EAAG,CACnC,QAAQ,KACN,qCAAqC,KAAK,WAAW,YACvD,EACA,KAAK,OAAS,GACd,MACF,CACA,KAAK,UAAYA,EAAG,OAAO,KAAK,WAAW,EAC3C,KAAK,GAAKA,CACZ,CAEA,KAAKC,EAAqB,CACxB,GACE,KAAK,KAAO,MACZ,KAAK,YAAc,MACnB,KAAK,YAAc,KAEnB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,IAAMC,EAAW,KAAK,UAAU,aAAa,KAAK,SAAS,EAC3D,GAAIA,IAAa,KACf,QAAQ,KAAK,iCAAiC,MACzC,CACL,KAAK,UAAU,cAAcA,CAAQ,EACrC,KAAK,UAAU,eAAe,KAAK,UAAW,IAAI,EAClD,QAAWC,KAAU,KAAK,GAAG,QAAQ,EAC/BA,IAAW,KAAK,WAAa,CAACA,EAAO,aAAa,KAAK,SAAS,GAClEA,EAAO,eAAe,KAAK,UAAW,GAAG,CAG/C,CACA,KAAK,OAAS,EAChB,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECxCO,SAASC,GAAaC,EAAwB,CACnD,OAAOC,GAAaD,EAAS,EAAE,CACjC,CAEO,SAASC,GACdC,EACAC,EACQ,CAIR,OAHAD,EAAM,OAAOA,CAAG,EAChBA,EAAM,KAAK,IAAIA,EAAK,CAAC,EAEjBA,GAAO,KACK,KAAK,MAAMA,EAAM,GAAM,EAAI,IAC5B,QAAQC,GAAe,CAAC,EAAI,IAChCD,GAAO,KACF,KAAK,MAAMA,EAAM,GAAK,EAAI,KAC3B,QAAQC,GAAe,CAAC,EAAI,IAChCD,GAAO,IACT,KAAK,MAAMA,EAAM,GAAI,EAAI,IACvBA,GAAO,KACF,KAAK,MAAMA,EAAM,GAAG,EAAI,IACzB,QAAQC,GAAe,CAAC,EAAI,IAChCD,GAAO,KACF,KAAK,MAAMA,EAAM,EAAE,EAAI,KACxB,QAAQC,GAAe,CAAC,EAAI,IAElC,KAAK,MAAMD,CAAG,EAAE,SAAS,CAEpC,CCnCO,IAAME,GAAN,KAAqB,CAM1B,YAAYC,EAAW,KAAM,CAF7B,KAAQ,IAAM,EAGZ,KAAK,IAAM,IAAI,aAAaA,CAAQ,EACpC,KAAK,MAAQ,IAAI,MAAeA,CAAQ,CAC1C,CAGA,OAAc,CACZ,KAAK,IAAM,CACb,CAGA,MAAe,CACb,OAAO,KAAK,GACd,CAGA,QAAQC,EAAeC,EAAwB,CACzC,KAAK,MAAQ,KAAK,IAAI,QAAQ,KAAK,KAAK,EAC5C,IAAI,EAAI,KAAK,MAGb,KAAO,EAAI,GAAG,CACZ,IAAMC,EAAU,EAAI,GAAM,EAC1B,GAAID,GAAY,KAAK,IAAIC,CAAM,EAAG,MAClC,KAAK,IAAI,CAAC,EAAI,KAAK,IAAIA,CAAM,EAC7B,KAAK,MAAM,CAAC,EAAI,KAAK,MAAMA,CAAM,EACjC,EAAIA,CACN,CACA,KAAK,IAAI,CAAC,EAAID,EACd,KAAK,MAAM,CAAC,EAAID,CAClB,CAGA,SAA6B,CAC3B,GAAI,KAAK,MAAQ,EAAG,MAAM,IAAI,MAAM,YAAY,EAEhD,IAAMG,EAAU,KAAK,MAAM,CAAC,EACtBC,EAAS,KAAK,IAAI,CAAC,EAEnBC,EAAU,KAAK,IAAI,EAAE,KAAK,GAAG,EAC7BC,EAAW,KAAK,MAAM,KAAK,GAAG,EAGhCC,EAAI,EACR,OAAa,CACX,IAAMC,GAAQD,GAAK,GAAK,EACxB,GAAIC,GAAQ,KAAK,IAAK,MACtB,IAAMC,EAAQD,EAAO,EACfE,EACJD,EAAQ,KAAK,KAAO,KAAK,IAAIA,CAAK,EAAI,KAAK,IAAID,CAAI,EAAIC,EAAQD,EACjE,GAAIH,GAAW,KAAK,IAAIK,CAAK,EAAG,MAChC,KAAK,IAAIH,CAAC,EAAI,KAAK,IAAIG,CAAK,EAC5B,KAAK,MAAMH,CAAC,EAAI,KAAK,MAAMG,CAAK,EAChCH,EAAIG,CACN,CACA,YAAK,IAAIH,CAAC,EAAIF,EACd,KAAK,MAAME,CAAC,EAAID,EACT,CAACH,EAASC,CAAM,CACzB,CAGQ,MAAa,CACnB,IAAMO,EAAS,KAAK,IAAI,QAAU,EAE5BC,EAAS,IAAI,aAAaD,CAAM,EACtCC,EAAO,IAAI,KAAK,GAAG,EACnB,KAAK,IAAMA,EAEX,KAAK,MAAM,OAASD,CACtB,CACF,ECnEA,IAAME,GAAkB,GACXC,GAAN,KAA2C,CAYhD,YACUC,EAA6B,KAC7BC,EACAC,EACAC,EAA6B,KAC7BC,EAAwB,GAChC,CALQ,iBAAAJ,EACA,YAAAC,EACA,eAAAC,EACA,gBAAAC,EACA,kBAAAC,EAhBV,KAAQ,OAAkB,GAC1B,KAAQ,UAAY,IAAIC,GAExB,KAAQ,OAAS,IAAIC,EAAa,GAAG,EAMrC,KAAQ,OAAwB,IAQ7B,CAEI,UAA4B,CACjC,OAAO,KAAK,SACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEA,KAAKC,EAAUC,EAAe,CAC5B,GAAK,KAAK,OAKV,IAFA,KAAK,GAAKD,EAEN,KAAK,YAAc,MAAQ,CAACA,EAAG,UAAU,KAAK,SAAS,EAAG,CAC5D,QAAQ,KAAK,UAAU,KAAK,SAAS,YAAY,EACjD,KAAK,OAAS,GACd,MACF,CAOA,GALA,KAAK,OACH,KAAK,YAAc,KAAK,GAAG,aAAa,EAAE,GAAG,EACzCA,EAAG,aAAa,EAChBA,EAAG,OAAO,KAAK,SAAS,EAE1B,KAAK,SAAW,KAAK,OAAQ,CAC/B,QAAQ,MAAM,UAAU,KAAK,MAAM,uBAAuB,EAC1D,KAAK,OAAS,GACd,MACF,CAGA,GAAI,KAAK,OAAO,SAAS,EAAG,CAC1B,IAAME,EAAe,KAAK,OAC1B,GAAI,KAAK,OAAO,WAAWA,CAAY,EAAG,CACxC,QAAQ,KACN,GAAG,KAAK,OAAO,YAAY,CAAC,kBAAkBA,EAAa,YAAY,CAAC,kDAC1E,EACA,KAAK,OAAS,GACd,MACF,CACF,CAEA,GAAI,KAAK,QAAU,KAAK,OAAO,SAAS,EAAG,CACzC,IAAMA,EAAe,KAAK,OAExBA,EAAa,KAAK,IAAM,OACxB,KAAK,OAAO,KAAK,IAAM,QAGvBA,EAAa,WAAW,KAAK,OAAQ,EAAI,EACzC,KAAK,+BAA+BA,CAAY,EAEpD,CAEA,GAAI,KAAK,OAAO,SAAS,GAErB,KAAK,GAAG,OAAO,EAAE,mBAAmB,EAClC,KAAK,GAAG,OAAO,EAAE,sBAAsB,EACzC,KAAK,GAAG,MAAM,EACd,CACA,QAAQ,KAAK,4CAA4C,EACzD,KAAK,OAAS,GACd,MACF,CAGF,KAAK,cAAL,KAAK,YAAgB,KAAK,GACvB,OAAO,EACP,aAAa,KAAK,OAAQ,KAAK,MAAM,GACpC,KAAK,eACP,KAAK,YAAc,KAAK,IAAI,KAAK,OAAO,OAAO,EAAG,KAAK,WAAW,EAClE,KAAK,OAAO,aAAa,KAAK,WAAW,GAE3C,KAAK,OAAS,KAAK,OAAO,aACxB,KAAK,OACL,KAAK,YACL,KAAK,WACL,IAAI,GACN,EAEI,KAAK,aAAe,KACtB,KAAK,aAAa,KAAK,UAAU,EAEjC,KAAK,iBAAiB,EAIxB,KAAK,GAAG,MAAM,EAAE,OAAO,KAAK,OAAQ,KAAK,OAAQ,KAAK,WAAW,EAEjE,QAAWC,KAAY,KAAK,OAAO,gBAAgB,EACjD,GAAIA,EAAS,SAAS,IAAM,KAAK,OAE/B,GAAIA,EAAS,OAAO,EAAI,KAAK,OAAO,OAAO,EAAG,CAC5CA,EAAS,UAAUA,EAAS,OAAO,EAAI,KAAK,OAAO,OAAO,CAAC,EAC3D,KAAK,OAAO,OAAO,EACnB,KAAK,OAAS,GACd,MACF,MACE,KAAK,OAAO,UAAU,KAAK,OAAO,OAAO,EAAIA,EAAS,OAAO,CAAC,EAC9DA,EAAS,OAAO,EAItB,QAAWC,KAAY,KAAK,OAAO,gBAAgB,EAE/CA,IAAa,KAAK,QAClBA,EAAS,OAAO,IAAM,KAAK,OAAO,OAAO,GAEzC,KAAK,OAAO,WAAW,IAAM,OAE7B,KAAK,OAAO,UAAU,KAAK,OAAO,OAAO,EAAIA,EAAS,OAAO,CAAC,EAC9DA,EAAS,OAAO,GAIhB,KAAK,OAAO,SAAS,GACvB,KAAK,OAAO,eAAe,KAAK,OAAQ,GAAG,EAE/C,CAEQ,kBAAmB,CACzB,GAAI,KAAK,SAAW,KAClB,MAAM,IAAI,MAAM,wBAAwB,EAG1C,KAAK,UAAU,MAAM,EACrB,KAAK,OAAO,YAAY,EACxB,QAAWC,KAAQ,KAAK,OAAO,YAAY,EACzC,KAAK,aAAaA,CAAI,CAE1B,CAEQ,QAAQC,EAAe,EAAG,CAChC,GAAI,KAAK,SAAW,KAClB,MAAM,IAAI,MAAM,wBAAwB,EAG1C,IAAMC,EAAS,KAAK,OAAO,OAAO,GAAKD,EAAe,KAClDC,GACF,KAAK,GAAG,eACN,qBAAqBC,GAAaD,CAAM,CAAC,qCAEzC,KAAK,OAAO,GAAG,CACjB,EAEE,KAAK,eAAiB,IAAS,KAAK,aAAe,MAIrD,KAAK,OAAO,UAAU,KAAK,OAAO,OAAO,GAAK,KAAK,aAAe,EAAE,EAGtE,IAAME,EAAY,KAAK,OAAO,OAAO,EAAIF,EACzC,KAAK,OAAO,UAAUE,CAAS,EAC/B,KAAK,OAAO,OAAO,EACnB,KAAK,OAAS,GAGV,KAAK,OAAO,UAAU,GAExB,KAAK,GAAG,MAAM,EAAE,aAAa,KAAK,OAAQ,KAAK,OAAQA,CAAS,CAEpE,CAEA,KAAKR,EAAe,CAClB,GAAI,KAAK,SAAW,KAClB,MAAM,IAAI,MAAM,wBAAwB,EAE1C,IAAIS,EAAa,KAAK,OAAO,OAAO,EAC9BC,EAAiB,KAAK,OAAO,SAAS,EACtCT,EAAeS,EAAkB,KAAK,OAAoB,KAEhE,GAAI,KAAK,OAAO,UAAU,EAAG,CACvBA,EACF,KAAK,QAAQpB,EAAe,EAE5B,KAAK,QAAQ,EAEf,KAAK,OAAS,GACd,MACF,CAEA,GAAI,KAAK,OAAO,WAAW,EACzB,OAGF,GAAI,CAAC,KAAK,OAAO,SAAS,EAAG,CAC3B,KAAK,OAAS,GACd,MACF,CAEA,GAAIW,GAAgB,KAAK,OAAO,WAAWA,CAAY,EAAG,CAExD,KAAK,QAAQ,EACb,MACF,CAEA,IAAIU,EAAkB,KAAK,GACxB,OAAO,EACP,mBACCF,EACA,KAAK,OACL,KAAK,OACL,KAAK,OAAO,WAAW,EAAI,KAAK,OAAO,QAAQ,EAAG,CAAC,CACrD,EAEF,KAAOE,EAAkB,GAAG,CAC1B,GAAIF,EAAa,EAAG,CAClB,KAAK,OAAO,OAAO,EACnB,KAAK,OAAS,GACd,MACF,CAEA,GAAI,KAAK,UAAU,KAAK,IAAM,EAAG,CAC/B,KAAK,iBAAiB,EACtB,KAAK,QAAQ,EACb,MACF,CAEA,GAAM,CAACG,CAAa,EAAI,KAAK,UAAU,QAAQ,EAC/C,KAAK,OAAO,iBAAiBA,CAAa,EAE1C,IAAIC,EAAW,GACf,QAAWC,KAAK,KAAK,GAAG,UAAUF,CAAa,EAC7C,GAAI,KAAK,GAAG,MAAME,CAAC,IAAM,KAAK,OAAQ,CACpCD,EAAW,GACX,KACF,CAEF,GAAI,KAAK,GAAG,MAAMD,CAAa,IAAM,KAAK,QAAU,CAACC,EACnD,SAEF,KAAK,aAAaD,CAAa,EAC/B,GAAM,CAAE,kBAAAG,EAAmB,kBAAAC,EAAmB,iBAAAC,CAAiB,EAAI,KAAK,GACrE,OAAO,EACP,YACC,KAAK,GACLR,EACA,KAAK,OACL,KAAK,OACLG,CACF,EACFD,GAAmBM,EACnBR,GAAcM,EACd,KAAK,OAAO,UAAUN,CAAU,EAC5BR,GACFA,EAAa,aAAae,CAAiB,EAE7C,KAAK,OAAO,QAAQJ,CAAa,EACjC,KAAK,mBAAmB,CAC1B,CACF,CAEQ,+BAA+BM,EAAgB,CACrD,IAAMC,EAAU,KAAK,OAClB,yBAAyB,EACzB,KAAMC,GAAOA,EAAG,UAAU,IAAMF,CAAM,EACrCC,IAAY,QACdA,EAAQ,OAAO,CAEnB,CAEQ,aAAaf,EAAe,CAClC,GAAI,KAAK,SAAW,KAClB,MAAM,IAAI,MAAM,wBAAwB,EAG1C,IAAMiB,EAAU,KAAK,GAAG,MAAM,EAE9B,QAAWC,KAAY,KAAK,GAAG,UAAUlB,CAAI,EAAG,CAC9C,GACE,KAAK,GAAG,QAAQkB,CAAQ,GACxB,KAAK,GAAG,MAAMA,CAAQ,IAAM,KAAK,OAEjC,SAEF,KAAK,OAAO,cAAcA,CAAQ,EAClC,IAAIC,EAAe,EACnB,QAAWT,KAAK,KAAK,GAAG,UAAUQ,CAAQ,EACpC,KAAK,GAAG,MAAMR,CAAC,IAAM,KAAK,QAC5BS,IAIJ,IAAIC,EAAM,EACV,OAAQ,KAAK,GAAG,YAAYF,CAAQ,EAAG,CACrC,OACEE,EAAM,EACN,MACF,OACEA,EAAM,IACN,MACF,OACEA,EAAM,EACN,KACJ,CAEA,IAAMC,GACH,KAAK,OAAO,QAAQ,EAAG,CAAC,EAAI,KAAO,EAAIF,EAAe,GAAMC,EAAM,GACnEH,EAEF,KAAK,UAAU,QAAQC,EAAUG,CAAQ,CAC3C,CACF,CAEQ,oBAAqB,CAC3B,GAAM,KAAK,OAAO,SAAS,GAAK,KAAK,OAAO,cAAc,EAAI,IAE9D,MAAK,GAAG,cAAc,KAAK,OAAQ,KAAK,MAAM,EAE9C,QAASC,EAAI,EAAGA,EAAI,GAAIA,IACtB,QAAWtB,KAAQ,KAAK,OAAO,MAAM,EAInC,GAHgB,KAAK,GAClB,UAAUA,CAAI,EACd,KAAMuB,GAAM,KAAK,GAAG,MAAMA,CAAC,IAAM,KAAK,MAAM,EAE7C,KAAK,OAAO,QAAQvB,CAAI,MAExB,SAAWkB,KAAY,KAAK,GAAG,UAAUlB,CAAI,EAAG,CAC9C,IAAMwB,EAAK,KAAK,GAAG,MAAMN,CAAQ,EACjC,GAAIM,EAAG,SAAS,GAAKA,IAAO,KAAK,OAAQ,CACvC,KAAK,GAAG,OAAOA,EAAG,GAAG,CAAC,EAAE,QAAQxB,CAAI,EACpC,KACF,CACF,EAIR,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CACF,ECrXO,IAAMyB,GAAN,KAAgD,CAErD,YACUC,EACAC,EACR,CAFQ,YAAAD,EACA,YAAAC,EAHV,KAAQ,OAAS,EAId,CAEH,KAAKC,EAAUC,EAAqB,CAAC,CAErC,KAAKA,EAAqB,CACxB,IAAMC,EAAO,KAAK,OACf,MAAM,EACN,KACEA,GACCA,EAAK,GAAG,IAAM,KAAK,QAAUA,EAAK,KAAK,IAAM,WACjD,EAEF,GAAI,CAACA,EAAM,CACT,QAAQ,KAAK,qCAAqC,KAAK,MAAM,EAAE,EAC/D,KAAK,OAAS,GACd,MACF,CAEAA,EAAK,iBAAiB,EACtB,KAAK,OAAS,EAChB,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EC9BO,IAAMC,GAAN,KAA0C,CAK/C,YACUC,EACAC,EACAC,EACR,CAHQ,eAAAF,EACA,iBAAAC,EACA,WAAAC,EALV,KAAQ,OAAS,EAMd,CAEH,KAAKC,EAAUC,EAAqB,CAClC,GAAI,KAAK,cAAgBC,IAAc,CAACF,EAAG,UAAU,KAAK,WAAW,EAAG,CACtE,QAAQ,KAAK,6BAA6B,KAAK,WAAW,YAAY,EACtE,KAAK,OAAS,GACd,MACF,CAEA,KAAK,UACH,KAAK,cAAgBE,GACjBA,GACAF,EAAG,OAAO,KAAK,WAAW,CAClC,CAEA,KAAKC,EAAqB,CACxB,IAAME,EAAcC,GAAoB,KAAK,KAAK,EAC9CD,IAAgB,OAClB,QAAQ,KACN,qBAAqB,KAAK,KAAK,SAAS,KAAK,SAAS,OAAO,KAAK,SAAS,EAC7E,EACS,KAAK,UAAU,aAAa,KAAK,SAAS,GACnD,KAAK,UAAU,UAAU,KAAK,UAAWA,CAAW,EAElDA,IAAgB,aAChB,KAAK,YAAcD,IACnB,KAAK,UAAU,KAAK,IAAM,aAE1B,KAAK,UAAU,eAAe,KAAK,UAAW,IAAI,GAGpD,QAAQ,KACN,0BAA0B,KAAK,SAAS,OAAO,KAAK,SAAS,EAC/D,EAEF,KAAK,OAAS,EAChB,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EChEA,IAAAG,GAA8B,WAavB,IAAMC,GAAN,KAAuD,CAoB5D,YACEC,EACQC,EACAC,EACAC,EACAC,EACAC,EAAiC,EACzC,CALQ,SAAAJ,EACA,gBAAAC,EACA,cAAAC,EACA,WAAAC,EACA,4BAAAC,EAhBV,KAAQ,YAAc,IAAI,IAC1B,KAAQ,YAAc,IAAI,IAC1B,KAAQ,UAAY,IAAI,IACxB,KAAQ,UAAY,IAAI,IAExB,KAAQ,aAAgC,KACxC,KAAO,UAAY,GAYjB,KAAK,WAAa,IAAI,GAAAC,QAAkB,CAACC,EAAGC,IAAMD,EAAE,OAASC,EAAE,MAAM,EACrE,KAAK,WAAa,IAAI,GAAAF,QAAkB,CAACC,EAAGC,IAAMD,EAAE,OAASC,EAAE,MAAM,EACrE,KAAK,QAAU,MAAM,QAAQR,CAAG,EAAIA,EAAM,CAACA,CAAG,EAC9C,KAAK,cAAgB,KAAK,kBAAkBC,CAAG,EAG/C,KAAK,QAAQ,QAASQ,GAAe,CACnC,KAAK,UAAU,IAAIA,EAAY,CAAC,EAChC,KAAK,WAAW,IAAI,CAClB,KAAMA,EACN,OAAQ,KAAK,UAAUA,EAAYR,CAAG,CACxC,CAAC,CACH,CAAC,EAGD,KAAK,UAAU,IAAIA,EAAK,CAAC,EACzB,KAAK,WAAW,IAAI,CAClB,KAAMA,EACN,OAAQ,KAAK,UAAUA,EAAK,KAAK,kBAAkBA,CAAG,CAAC,CACzD,CAAC,CACH,CAEQ,kBAAkBS,EAA0B,CAClD,OAAO,KAAK,QAAQ,OAAO,CAACC,EAASC,IACnC,KAAK,UAAUF,EAAME,CAAM,EAAI,KAAK,UAAUF,EAAMC,CAAO,EACvDC,EACAD,CACN,CACF,CAEA,SAA8B,CAC5B,GAAI,KAAK,UAAW,SAEpB,KAAK,UAAY,EACjB,IAAIT,EAAa,KAAK,WAEtB,KAAO,CAAC,KAAK,WAAW,QAAQ,GAAK,CAAC,KAAK,WAAW,QAAQ,GAAG,CAE/D,GADAA,IACIA,GAAc,EAChB,OAAI,KAAK,UAAY,MAOvB,IAAMW,EAAa,KAAK,WAAW,KAAK,EAAG,KAG3C,GAAI,KAAK,UAAU,IAAIA,CAAU,EAC/B,YAAK,aAAeA,EACpB,KAAK,UAAY,GACV,EAET,KAAK,WAAWA,EAAY,EAAI,EAGhC,IAAMC,EAAa,KAAK,WAAW,KAAK,EAAG,KAG3C,GAAI,KAAK,UAAU,IAAIA,CAAU,EAC/B,YAAK,aAAeA,EACpB,KAAK,UAAY,GACV,EAET,KAAK,WAAWA,EAAY,EAAK,CACnC,CAEA,OAAO,KAAK,aAGd,CAEQ,WAAWC,EAAmBC,EAAoB,CACxD,QAAWC,KAAY,KAAK,MAAM,UAAUF,CAAO,EAAG,CACpD,GACEE,KAAcD,EAAY,KAAK,IAAM,KAAK,gBAC1C,CAAC,KAAK,MAAM,cAAcD,EAASE,CAAQ,EAE3C,SAEF,IAAMC,EAASF,EAAY,KAAK,UAAY,KAAK,UAC3CG,EAAUH,EAAY,KAAK,WAAa,KAAK,WAC7CI,EAAWJ,EAAY,KAAK,YAAc,KAAK,YAE/CK,EAAkBH,EAAO,IAAIH,CAAO,EAAK,KAAK,MAAM,KAAKE,CAAQ,EACnEK,EAAU,EAEd,GAAI,KAAK,uBAAyB,EAAG,CACnC,IAAMC,EAAOH,EAAS,IAAIL,CAAO,EACjC,GAAIQ,EAAM,CACR,IAAMC,EAAU,KAAK,aAAaD,EAAMR,CAAO,EACzCU,EAAS,KAAK,aAAaV,EAASE,CAAQ,EAC9CO,IAAYC,IACdH,EAAU,KAAK,uBAEnB,CACF,CAEA,IAAMI,EAASL,EAAkBC,EACjC,GAAI,CAACJ,EAAO,IAAID,CAAQ,GAAKS,EAASR,EAAO,IAAID,CAAQ,EAAI,CAC3DG,EAAS,IAAIH,EAAUF,CAAO,EAC9BG,EAAO,IAAID,EAAUS,CAAM,EAC3B,IAAMC,EACJD,EACA,KAAK,UAAUT,EAAUD,EAAY,KAAK,IAAM,KAAK,aAAa,EACpEG,EAAQ,IAAI,CAAE,KAAMF,EAAU,OAAQU,CAAO,CAAC,CAChD,CACF,CACF,CAEQ,UAAUpB,EAAaC,EAAqB,CAClD,IAAMoB,EAAO,KAAK,MAAM,SAASrB,CAAC,EAC5BsB,EAAO,KAAK,MAAM,SAASrB,CAAC,EAClC,MAAO,IAAK,KAAK,IAAIoB,EAAK,EAAIC,EAAK,CAAC,EAAI,KAAK,IAAID,EAAK,EAAIC,EAAK,CAAC,EAClE,CAEQ,aAAaC,EAAgBC,EAAsB,CACzD,IAAMC,EAAU,KAAK,MAAM,SAASF,CAAI,EAClCG,EAAQ,KAAK,MAAM,SAASF,CAAE,EAC9BG,EAAKD,EAAM,EAAID,EAAQ,EACvBG,EAAKF,EAAM,EAAID,EAAQ,EAC7B,MAAO,GAAG,KAAK,KAAKE,CAAE,CAAC,IAAI,KAAK,KAAKC,CAAE,CAAC,EAC1C,CAEO,iBAA8B,CACnC,GAAI,CAAC,KAAK,aAAc,MAAO,CAAC,EAGhC,IAAMC,EAAsB,CAAC,KAAK,YAAY,EAC1CrB,EAAU,KAAK,aAEnB,KAAO,KAAK,YAAY,IAAIA,CAAO,GACjCA,EAAU,KAAK,YAAY,IAAIA,CAAO,EACtCqB,EAAQ,QAAQrB,CAAO,EAMzB,IAFAA,EAAU,KAAK,aAER,KAAK,YAAY,IAAIA,CAAO,GACjCA,EAAU,KAAK,YAAY,IAAIA,CAAO,EACtCqB,EAAQ,KAAKrB,CAAO,EAGtB,OAAOqB,CACT,CACF,ECvLO,IAAMC,GAAN,KAAsD,CAE3D,YACUC,EACAC,EACR,CAFQ,aAAAD,EACA,eAAAC,EAHV,KAAiB,aAAe,CAI7B,CAEH,UAAUC,EAA0B,CAClC,OAAO,KAAK,QAAQ,UAAUA,CAAI,CACpC,CAEA,KAAKA,EAAuB,CAC1B,IAAIC,EAAO,KAAK,QAAQ,KAAKD,CAAI,EAEjC,MAAI,CAAC,KAAK,WAAa,KAAK,QAAQ,QAAQA,CAAI,IAC9CC,GAAQ,KAAK,cAERA,CACT,CAEA,SAASD,EAAyC,CAChD,MAAO,CAAE,EAAG,KAAK,QAAQ,EAAEA,CAAI,EAAG,EAAG,KAAK,QAAQ,EAAEA,CAAI,CAAE,CAC5D,CAEA,cAAcE,EAAeC,EAAsB,CACjD,IAAMC,EAAU,KAAK,QAAQ,QAAQD,CAAE,EACvC,GAAI,KAAK,UACP,OAAOC,EAGT,IAAMC,EAAY,KAAK,QAAQ,YAAYH,CAAI,EACzCI,EAAU,KAAK,QAAQ,YAAYH,CAAE,EAC3C,MAAO,CAACC,GAAWC,GAAaC,CAClC,CACF,EACaC,GAAN,KAA0C,CAG/C,YACUT,EACAU,EACAC,EACAC,EACRC,EACAC,EACAb,EAAqB,GACrBc,EAAiC,EACjC,CARQ,aAAAf,EACA,aAAAU,EACA,SAAAC,EACA,SAAAC,EAOR,IAAMI,GADsB,MAAM,QAAQL,CAAG,EAAIA,EAAM,CAACA,CAAG,GAClC,IAAKM,GAC5B,KAAK,QAAQ,IACX,KAAK,MAAMjB,EAAQ,EAAEiB,CAAQ,EAAI,CAAC,EAClC,KAAK,MAAMjB,EAAQ,EAAEiB,CAAQ,EAAI,CAAC,CACpC,CACF,EAEMC,EAAU,KAAK,QAAQ,IAC3B,KAAK,MAAMlB,EAAQ,EAAEY,CAAG,EAAI,CAAC,EAC7B,KAAK,MAAMZ,EAAQ,EAAEY,CAAG,EAAI,CAAC,CAC/B,EAEA,KAAK,MAAQ,IAAIO,GACfH,EACAE,EACAL,EACAC,EACA,IAAIf,GAAeW,EAAST,CAAS,EACrCc,CACF,CACF,CAEA,SAA8B,CAC5B,OAAO,KAAK,MAAM,QAAQ,CAC5B,CAEA,iBAA6B,CAC3B,IAAIK,EACC,MAAM,QAAQ,KAAK,GAAG,IACzBA,EAAU,IAAIC,GAAK,KAAK,QAAQ,EAAE,KAAK,GAAG,EAAG,KAAK,QAAQ,EAAE,KAAK,GAAG,CAAC,GAEvE,IAAMC,EAAU,IAAID,GAClB,KAAK,QAAQ,EAAE,KAAK,GAAG,EACvB,KAAK,QAAQ,EAAE,KAAK,GAAG,CACzB,EAUA,OATiBE,GACfC,GACE,KAAK,MACF,gBAAgB,EAChB,IAAKC,GAAO,IAAIJ,GAAK,KAAK,QAAQ,EAAEI,CAAE,EAAG,KAAK,QAAQ,EAAEA,CAAE,CAAC,CAAC,CACjE,EACAH,EACAF,CACF,EACgB,IAAKM,GAAM,KAAK,QAAQ,IAAIA,EAAE,EAAGA,EAAE,CAAC,CAAC,CACvD,CACF,EAEA,SAASH,GAAYI,EAAkBL,EAAeF,EAAwB,CAC5E,GAAIA,IAAY,OAAW,CACzB,IAAMQ,EAAWC,GAASF,EAAUP,CAAO,EACvCQ,IAAa,GAEfD,EAAS,QAAQP,CAAO,EACfQ,IAAa,IAGtBD,EAAWA,EAAS,MAAMC,CAAQ,EAEtC,CAEA,IAAME,EAAWD,GAASF,EAAUL,CAAO,EAC3C,OAAIQ,IAAa,GAEfH,EAAS,KAAKL,CAAO,EACZQ,IAAaH,EAAS,OAAS,IAGxCA,EAAWA,EAAS,MAAM,EAAGG,EAAW,CAAC,GAEpCH,CACT,CAEA,SAASH,GAAYO,EAAcC,EAAsB,EAAW,CAElE,IAAMC,EAAaF,EAAK,IACrBG,GAAU,IAAIb,GAAKa,EAAM,EAAIF,EAAaE,EAAM,EAAIF,CAAW,CAClE,EAEMG,EAAqB,CAAC,EAE5B,QAASC,EAAI,EAAGA,EAAIH,EAAW,OAAS,EAAGG,IAAK,CAC9C,IAAMC,EAAUJ,EAAWG,CAAC,EACtBE,EAAOL,EAAWG,EAAI,CAAC,EAG7BD,EAAW,KAAKE,CAAO,EAGvB,IAAME,EAAKD,EAAK,EAAID,EAAQ,EACtBG,EAAKF,EAAK,EAAID,EAAQ,EAItBI,EADW,KAAK,IAAI,KAAK,IAAIF,CAAE,EAAG,KAAK,IAAIC,CAAE,CAAC,EAIpD,QAASE,EAAO,EAAGA,EAAOD,EAAOC,IAC/BP,EAAW,KACT,IAAId,GACF,KAAK,MAAMgB,EAAQ,EAAKE,EAAKG,EAAQD,CAAK,EAC1C,KAAK,MAAMJ,EAAQ,EAAKG,EAAKE,EAAQD,CAAK,CAC5C,CACF,CAEJ,CAGA,OAAIR,EAAW,OAAS,GACtBE,EAAW,KAAKF,EAAWA,EAAW,OAAS,CAAC,CAAC,EAG5CE,CACT,CAEA,SAASN,GAASF,EAAkBL,EAAuB,CACzD,QAASc,EAAI,EAAGA,EAAIT,EAAS,OAAQS,IACnC,GAAIT,EAASS,CAAC,EAAE,IAAMd,EAAQ,GAAKK,EAASS,CAAC,EAAE,IAAMd,EAAQ,EAC3D,OAAOc,EAGX,MAAO,EACT,CC5HO,IAAMO,GAAN,MAAMA,EAA+B,CAyB1C,YACEC,EACAC,EACAC,EACQC,EACR,CADQ,mBAAAA,EA5BV,KAAQ,qBAAuB,EA8B7B,GAAID,EAAY,SAAWF,EAAQC,EACjC,MAAM,IAAI,MACR,uBAAuBC,EAAY,MAAM,6BAA6BF,CAAK,IAAIC,CAAM,EACvF,EAEF,KAAK,OAASD,EACd,KAAK,QAAUC,EACf,KAAK,QAAUC,EACf,KAAK,MAAQ,IAAI,YAAYF,EAAQC,CAAM,EAE3C,IAAIG,EAAM,EACV,KAAK,OAAS,IAAI,MAAMJ,EAAQC,CAAM,EACtC,KAAK,OAAS,IAAI,MAAMD,EAAQC,CAAM,EACtC,KAAK,OAAS,IAAI,MAAMA,CAAM,EAC9B,QAASI,EAAI,EAAGA,EAAIJ,EAAQI,IAAK,CAC/B,KAAK,OAAOA,CAAC,EAAID,EACjB,QAASE,EAAI,EAAGA,EAAIN,EAAOM,IACzB,KAAK,OAAOF,CAAG,EAAIE,EACnB,KAAK,OAAOF,CAAG,EAAIC,EACnBD,GAEJ,CACF,CACA,qBAA8B,CAC5B,OAAO,KAAK,oBACd,CAEA,IAAIE,EAAWD,EAAoB,CACjC,GAAI,CAAC,KAAK,aAAaC,EAAGD,CAAC,EACzB,MAAM,IAAI,MAAM,wBAAwBC,CAAC,IAAID,CAAC,EAAE,EAElD,OAAO,KAAK,OAAOA,CAAC,EAAIC,CAC1B,CAEA,WAAWF,EAAuB,CAChC,OAAOA,GAAO,GAAKA,EAAM,KAAK,OAAO,MACvC,CAEA,EAAEA,EAAsB,CACtB,OAAO,KAAK,OAAOA,CAAG,CACxB,CAEA,EAAEA,EAAsB,CACtB,OAAO,KAAK,OAAOA,CAAG,CACxB,CAEA,KAAKA,EAAoB,CACvB,OAAO,IAAIG,GAAK,KAAK,EAAEH,CAAG,EAAG,KAAK,EAAEA,CAAG,CAAC,CAC1C,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CACA,QAAiB,CACf,OAAO,KAAK,OACd,CACA,cAAuB,CACrB,OAAO,KAAK,aACd,CAEA,aAAaE,EAAWD,EAAoB,CAC1C,OAAOC,GAAK,GAAKA,EAAI,KAAK,QAAUD,GAAK,GAAKA,EAAI,KAAK,OACzD,CAGA,OAAOD,EAAuB,CAC5B,MAAO,GAAQ,KAAK,QAAQA,CAAG,EAAK,GAAKL,GAAY,YACvD,CAEA,aAAaK,EAAuB,CAClC,OACE,KAAK,OAAOA,CAAG,GAAK,KAAK,UAAUA,CAAG,EAAE,KAAMI,GAAO,KAAK,QAAQA,CAAE,CAAC,CAEzE,CAEA,QAAQJ,EAAuB,CAC7B,MAAO,GAAQ,KAAK,QAAQA,CAAG,EAAK,GAAKL,GAAY,UACvD,CAEA,YAAYK,EAAuB,CACjC,MAAO,GAAQ,KAAK,QAAQA,CAAG,EAAK,GAAKL,GAAY,cACvD,CAEA,UAAUK,EAAsB,CAC9B,OAAO,KAAK,QAAQA,CAAG,EAAIL,GAAY,cACzC,CAGA,QAAQK,EAAsB,CAC5B,OAAO,KAAK,MAAMA,CAAG,EAAIL,GAAY,cACvC,CAEA,SAASK,EAAuB,CAC9B,OAAO,KAAK,QAAQA,CAAG,IAAM,CAC/B,CAEA,WAAWA,EAAcK,EAAwB,CAC/C,GAAIA,EAAWV,GAAY,eACzB,MAAM,IAAI,MACR,aAAaU,CAAQ,0BAA0BV,GAAY,cAAc,EAC3E,EAEF,KAAK,MAAMK,CAAG,EACX,KAAK,MAAMA,CAAG,EAAI,CAACL,GAAY,eAAkBU,CACtD,CAEA,WAAWL,EAAuB,CAChC,MAAO,GAAQ,KAAK,MAAMA,CAAG,EAAK,GAAKL,GAAY,YACrD,CAEA,WAAWK,EAAcM,EAAsB,CAC7C,IAAMC,EAAkB,KAAK,WAAWP,CAAG,EACvCM,EACGC,IACH,KAAK,uBACL,KAAK,MAAMP,CAAG,GAAK,GAAKL,GAAY,aAGlCY,IACF,KAAK,uBACL,KAAK,MAAMP,CAAG,GAAK,EAAE,GAAKL,GAAY,aAG5C,CAEA,cAAcK,EAAuB,CACnC,IAAME,EAAI,KAAK,EAAEF,CAAG,EACdC,EAAI,KAAK,EAAED,CAAG,EACpB,OACEE,IAAM,GAAKA,IAAM,KAAK,MAAM,EAAI,GAAKD,IAAM,GAAKA,IAAM,KAAK,OAAO,EAAI,CAE1E,CAEA,SAASD,EAAuB,CAC9B,OAAO,KAAK,UAAUA,CAAG,EAAE,KACxBI,GAAO,KAAK,QAAQA,CAAE,IAAM,KAAK,QAAQJ,CAAG,CAC/C,CACF,CAEA,gBAAgBA,EAAuB,CACrC,MAAO,GAAQ,KAAK,MAAMA,CAAG,EAAK,GAAKL,GAAY,kBACrD,CAEA,gBAAgBK,EAAcM,EAAsB,CAC9CA,EACF,KAAK,MAAMN,CAAG,GAAK,GAAKL,GAAY,kBAEpC,KAAK,MAAMK,CAAG,GAAK,EAAE,GAAKL,GAAY,kBAE1C,CAGA,QAAQK,EAAuB,CAC7B,MAAO,CAAC,KAAK,OAAOA,CAAG,CACzB,CAEA,OAAOA,EAAuB,CAC5B,MAAO,CAAC,KAAK,OAAOA,CAAG,GAAK,CAAC,KAAK,QAAQA,CAAG,CAC/C,CAEA,QAAQA,EAAuB,CAC7B,OAAO,KAAK,OAAOA,CAAG,GAAK,KAAK,YAAYA,CAAG,CACjD,CAEA,KAAKA,EAAsB,CACzB,OAAO,KAAK,UAAUA,CAAG,EAAI,GAAK,EAAI,CACxC,CAEA,YAAYA,EAA2B,CACrC,GAAI,KAAK,OAAOA,CAAG,EAAG,CACpB,IAAMQ,EAAY,KAAK,UAAUR,CAAG,EACpC,OAAIQ,EAAY,KACZA,EAAY,MAElB,CACA,OAAO,KAAK,QAAQR,CAAG,KACzB,CAEA,UAAUA,EAAyB,CACjC,IAAMS,EAAuB,CAAC,EACxBC,EAAI,KAAK,OACTR,EAAI,KAAK,OAAOF,CAAG,EAEzB,OAAIA,GAAOU,GAAGD,EAAU,KAAKT,EAAMU,CAAC,EAChCV,GAAO,KAAK,QAAU,GAAKU,GAAGD,EAAU,KAAKT,EAAMU,CAAC,EACpDR,IAAM,GAAGO,EAAU,KAAKT,EAAM,CAAC,EAC/BE,IAAMQ,EAAI,GAAGD,EAAU,KAAKT,EAAM,CAAC,EAEhCS,CACT,CAEA,YAAYE,EAAmC,CAC7C,QAASX,EAAe,EAAGA,EAAM,KAAK,OAAS,KAAK,QAASA,IAC3DW,EAAGX,CAAG,CAEV,CAEA,cAAcY,EAAaC,EAAqB,CAC9C,OACE,KAAK,IAAI,KAAK,EAAED,CAAE,EAAI,KAAK,EAAEC,CAAE,CAAC,EAAI,KAAK,IAAI,KAAK,EAAED,CAAE,EAAI,KAAK,EAAEC,CAAE,CAAC,CAExE,CACA,qBAAqBD,EAAaC,EAAqB,CACrD,IAAMX,EAAI,KAAK,EAAEU,CAAE,EAAI,KAAK,EAAEC,CAAE,EAC1BZ,EAAI,KAAK,EAAEW,CAAE,EAAI,KAAK,EAAEC,CAAE,EAChC,OAAOX,EAAIA,EAAID,EAAIA,CACrB,CACA,IACEa,EACAC,EACc,CACd,IAAMC,EAAO,IAAI,IACXC,EAAe,CAAC,EAMtB,IALIF,EAAO,KAAMD,CAAI,IACnBE,EAAK,IAAIF,CAAI,EACbG,EAAE,KAAKH,CAAI,GAGNG,EAAE,OAAS,GAAG,CACnB,IAAMC,EAAOD,EAAE,IAAI,EACnB,GAAIC,IAAS,OACb,QAAWC,KAAK,KAAK,UAAUD,CAAI,EAC7B,CAACF,EAAK,IAAIG,CAAC,GAAKJ,EAAO,KAAMI,CAAC,IAChCH,EAAK,IAAIG,CAAC,EACVF,EAAE,KAAKE,CAAC,EAGd,CACA,OAAOH,CACT,CAEA,aAAaF,EAAuB,CAGlC,OAAQ,OAAOA,CAAI,GAAK,IAAO,OAAO,KAAK,MAAMA,CAAI,CAAC,CACxD,CAEA,WAAWM,EAAyB,CAGlC,IAAMC,EAAU,OAAOD,GAAM,GAAG,EAC1BE,EAAQ,OAAOF,EAAK,OAAO,EAE3Bb,EAAkB,KAAK,WAAWc,CAAO,EAC/C,KAAK,MAAMA,CAAO,EAAIC,EACtB,IAAMC,EAAa,KAAK,WAAWF,CAAO,EAC1C,OAAId,GAAmB,CAACgB,GACtB,KAAK,uBAEH,CAAChB,GAAmBgB,GACtB,KAAK,uBAGAF,CACT,CACF,EA9Ra1B,GAca,YAAc,EAd3BA,GAea,cAAgB,EAf7BA,GAgBa,UAAY,EAhBzBA,GAiBa,eAAiB,GAjB9BA,GAoBa,eAAiB,KApB9BA,GAqBa,YAAc,GArB3BA,GAsBa,kBAAoB,GAtBvC,IAAM6B,GAAN7B,GAgSA,SAAS8B,GACdC,EACAC,EACAC,EAAkB,GACuB,CACzC,IAAMC,EAAQF,EAAOA,EACrB,OAAKC,EAII,CAACE,EAAaX,IAAe,CAIlC,IAAMY,EAAQD,EAAG,EAAEJ,CAAI,EAAI,GACrBM,EAAQF,EAAG,EAAEJ,CAAI,EAAI,GACrBO,EAAKH,EAAG,EAAEX,CAAC,EAAIY,EACfG,EAAKJ,EAAG,EAAEX,CAAC,EAAIa,EACrB,OAAOC,EAAKA,EAAKC,EAAKA,GAAML,CAC9B,EAZO,CAACC,EAAaX,IACnBW,EAAG,qBAAqBJ,EAAMP,CAAC,GAAKU,CAa1C,CAEO,SAASM,GACdT,EACAC,EACAC,EAAkB,GACuB,CACzC,OAAKA,EAGI,CAACE,EAAa,IAAe,CAClC,IAAMC,EAAQD,EAAG,EAAEJ,CAAI,EAAI,GACrBM,EAAQF,EAAG,EAAEJ,CAAI,EAAI,GACrBO,EAAK,KAAK,IAAIH,EAAG,EAAE,CAAC,EAAIC,CAAK,EAC7BG,EAAK,KAAK,IAAIJ,EAAG,EAAE,CAAC,EAAIE,CAAK,EACnC,OAAOC,EAAKC,GAAMP,CACpB,EARO,CAACG,EAAa,IAAeA,EAAG,cAAcJ,EAAM,CAAC,GAAKC,CAUrE,CA+EO,SAASS,GACdC,EACAC,EACyC,CACzC,MAAO,CAACC,EAAaC,IAAkBH,EAAEE,EAAIC,CAAI,GAAKF,EAAEC,EAAIC,CAAI,CAClE,CC1cO,SAASC,GACdC,EACAC,EACAC,EACiB,CACjB,GACED,EAAO,qBAAgC,GAAKD,EAAK,OAAO,EAAE,cAAc,EAExE,MAAO,GAGT,IAAMG,EAAMC,GAAoBJ,EAAME,CAAI,EAC1C,GAAIC,IAAQ,KACV,MAAO,GAGT,IAAME,EAAQL,EAAK,MAAME,CAAI,EAI7B,GAHIG,IAAUJ,GAGVI,EAAM,SAAS,GAAKJ,EAAO,WAAWI,CAAK,EAC7C,MAAO,GAGT,GAAIL,EAAK,aAAaG,CAAG,EAAG,CAC1B,IAAIG,EAAuB,GAC3B,QAAWC,KAAMN,EAAO,YAAY,EAClC,GAAID,EAAK,aAAaO,CAAE,EAAG,CACzBD,EAAuB,GACvB,KACF,CAGF,IAAIE,EAA0B,GAC9B,GAAI,CAACR,EAAK,SAASE,CAAI,EACrBM,EAA0B,OAE1B,SAAWD,KAAOF,EAAiB,YAAY,EAC7C,GAAIL,EAAK,aAAaO,CAAE,EAAG,CACzBC,EAA0B,GAC1B,KACF,CAIJ,OAAIF,GAAwBE,EACnBC,GAAmBT,EAAMC,EAAQE,CAAG,EAEpC,EAEX,CAKA,IAAMO,EAAQV,EAAK,IACjBG,EACAQ,GACEC,GAAgBT,EAAK,GAAG,EACxB,CAACU,EAAGC,IAAed,EAAK,OAAOc,CAAC,GAAKd,EAAK,QAAQc,CAAC,CACrD,CACF,EAEMC,EAAS,MAAM,KAAKL,CAAK,EAAE,KAC/B,CAACM,EAAGC,IAAMjB,EAAK,cAAcG,EAAKa,CAAC,EAAIhB,EAAK,cAAcG,EAAKc,CAAC,CAClE,EAEA,QAAWH,KAAKC,EACd,GAAIf,EAAK,MAAMc,CAAC,IAAMb,EACpB,OAAOQ,GAAmBT,EAAMC,EAAQa,CAAC,EAG7C,MAAO,EACT,CAEA,SAASL,GACPT,EACAC,EACAiB,EACiB,CACjB,GAAI,CAAClB,EAAK,QAAQkB,CAAU,EAC1B,MAAO,GAET,IAAMC,EAAQC,GAAuBpB,EAAMC,EAAQiB,CAAU,EAC7D,OAAIC,IAAU,KACL,GAEFA,CACT,CAkBO,SAASE,GAAoBC,EAAUC,EAA+B,CAC3E,IAAMC,EAAMF,EAAG,gBAAgBA,EAAG,QAAQC,CAAI,CAAC,EAC3CE,EAA0B,KAC9B,OAAID,EAAI,SAAS,EACfC,EAAUC,GAAuBJ,EAAIE,EAAeD,CAAI,EAExDE,EAAUE,GAAeL,EAAIC,EAAM,EAAE,EAEhCE,CACT,CAEO,SAASC,GACdJ,EACAM,EACAC,EACgB,CAChB,IAAMC,EAAa,MAAM,KAAKF,EAAO,YAAY,CAAC,EAAE,OAAQG,GAC1DT,EAAG,QAAQS,CAAC,CACd,EACA,OAAID,EAAW,SAAW,EACjB,KAGFA,EAAW,OAAO,CAACE,EAASC,IAAY,CAC7C,IAAMC,EAAkBZ,EAAG,cAAcO,EAAQG,CAAO,EAExD,OADwBV,EAAG,cAAcO,EAAQI,CAAO,EAC/BC,EAAkBD,EAAUD,CACvD,CAAC,CACH,CAEO,SAASG,GACdb,EACAM,EACAC,EACiB,CACjB,IAAME,EAAIV,GAAoBC,EAAIO,CAAM,EACxC,GAAIE,IAAM,KAAM,MAAO,GAEvB,IAAMK,EAAaC,GAAoBf,EAAIM,EAAQG,CAAC,EACpD,GAAIK,EAAW,SAAW,EAAG,MAAO,GAEpC,IAAME,EAAQ,IAAIC,GAAUjB,EAAIA,EAAG,QAAQ,EAAGc,EAAYL,EAAG,IAAW,CAAC,EACnES,EAASF,EAAM,QAAQ,EAC7B,GAAIE,IAAW,EACb,eAAQ,KAAK,8CAA8CA,CAAM,EAAE,EAC5D,GAET,IAAMC,EAAOH,EAAM,gBAAgB,EACnC,GAAIG,EAAK,SAAW,EAClB,MAAO,GAET,IAAMC,EAAYD,EAAK,CAAC,EAGlBE,EAAYrB,EACf,UAAUoB,CAAS,EACnB,OAAQE,GAAMtB,EAAG,QAAQsB,CAAC,GAAKtB,EAAG,MAAMsB,CAAC,IAAMhB,CAAM,EACxD,OAAIe,EAAU,SAAW,EAChB,GAEFA,EAAU,CAAC,CACpB,CAEO,SAASN,GACdf,EACAM,EACAC,EACW,CACX,IAAIgB,EAA2B,IAC3BC,EAAO,IACTC,EAAO,IACPC,EAAO,KACPC,EAAO,KAELC,EAAkC,KAChCC,EAAgD,CACpD,KAAM,KACN,KAAM,KACN,KAAM,KACN,KAAM,IACR,EAEMC,EAAmB,MAAM,KAAKxB,EAAO,YAAY,CAAC,EAAE,OAAQG,GAChET,EAAG,QAAQS,CAAC,CACd,EAEA,QAAWR,KAAQ6B,EAAkB,CACnC,IAAMC,EAAW/B,EAAG,cAAcC,EAAMM,CAAM,EACxCyB,EAAOhC,EAAG,KAAKC,CAAI,EAGrB8B,EAAWR,IACbA,EAA2BQ,EAC3BH,EAAkB3B,GAIhB+B,EAAK,EAAIR,GACXA,EAAOQ,EAAK,EACZH,EAAc,KAAO5B,GACZ+B,EAAK,EAAIP,GAClBA,EAAOO,EAAK,EACZH,EAAc,KAAO5B,GACZ+B,EAAK,EAAIN,GAClBA,EAAOM,EAAK,EACZH,EAAc,KAAO5B,GACZ+B,EAAK,EAAIL,IAClBA,EAAOK,EAAK,EACZH,EAAc,KAAO5B,EAEzB,CAGA,IAAMgC,EAAmB,KAAK,IAC5B,GACA,KAAK,KAAKH,EAAiB,OAAS,EAAE,CACxC,EACMI,EAAeJ,EAAiB,OACpC,CAACK,EAAGC,IAAUA,EAAQH,IAAqB,CAC7C,EAWA,MATmB,CACjBL,EACAC,EAAc,KACdA,EAAc,KACdA,EAAc,KACdA,EAAc,KACd,GAAGK,CACL,EAAE,OAAO,OAAO,CAGlB,CAEA,SAAS7B,GACPL,EACAC,EACAoC,EACgB,CAChB,IAAMC,EAAK,MAAM,KACftC,EAAG,IACDC,EACAsC,GAAM,CAACJ,EAAG1B,IAAM,CAACT,EAAG,SAASS,CAAC,EAAG+B,GAAgBvC,EAAMoC,CAAU,CAAC,CACpE,CACF,EACG,OAAQ5B,GAAMT,EAAG,QAAQS,CAAC,CAAC,EAC3B,KAAK,CAACgC,EAAGC,IAAM1C,EAAG,cAAcC,EAAMwC,CAAC,EAAIzC,EAAG,cAAcC,EAAMyC,CAAC,CAAC,EACvE,OAAIJ,EAAG,SAAW,EACT,KAEFA,EAAG,CAAC,CACb,CCxNO,IAAMK,GAAN,KAAuB,CAC5B,YACUC,EACAC,EACAC,EACAC,EACR,CAJQ,QAAAH,EACA,QAAAC,EACA,QAAAC,EACA,QAAAC,CACP,CACH,WAAWC,EAAkB,CAC3B,IAAMC,EAAI,EAAID,EACRE,EAAKD,EAAIA,EACTE,EAAMD,EAAKD,EACXG,EAAKJ,EAAIA,EACTK,EAAMD,EAAKJ,EAEXM,EACJH,EAAM,KAAK,GAAG,EACd,EAAID,EAAKF,EAAI,KAAK,GAAG,EACrB,EAAIC,EAAIG,EAAK,KAAK,GAAG,EACrBC,EAAM,KAAK,GAAG,EAEVE,EACJJ,EAAM,KAAK,GAAG,EACd,EAAID,EAAKF,EAAI,KAAK,GAAG,EACrB,EAAIC,EAAIG,EAAK,KAAK,GAAG,EACrBC,EAAM,KAAK,GAAG,EAChB,MAAO,CAAE,EAAAC,EAAG,EAAAC,CAAE,CAChB,CACF,EAMaC,GAAN,cAAuCb,EAAiB,CAK7D,YACEC,EACAC,EACAC,EACAC,EACAU,EACA,CACA,MAAMb,EAAIC,EAAIC,EAAIC,CAAE,EAXtB,KAAQ,cAAwB,EAChC,KAAQ,aAAwB,CAAC,EACjC,KAAQ,aAAuB,EAU7B,KAAK,iBAAiBU,EAAmB,IAAK,CAChD,CAEA,cAAwB,CACtB,OAAO,KAAK,YACd,CAKA,UAAUC,EAAgC,CAIxC,IAHA,KAAK,eAAiBA,EAIpB,KAAK,aAAe,KAAK,aAAa,OAAS,GAC/C,KAAK,qBAAqB,KAAK,aAAe,CAAC,EAAI,KAAK,eAExD,KAAK,eAGP,OAAI,KAAK,cAAgB,KAAK,aAAa,OAAS,EAC3C,KAGF,KAAK,aAAa,KAAK,YAAY,CAC5C,CAEA,iBAA0B,CACxB,OAAO,KAAK,YACd,CAKA,iBAAiBC,EAAsBC,EAAyB,CAC9D,KAAK,aAAe,CAAC,EACrB,KAAK,cAAgB,EACrB,KAAK,aAAe,EAEpB,IAAIZ,EAAI,EACJa,EAAY,KAAK,WAAWb,CAAC,EACjC,KAAK,aAAa,KAAKa,CAAS,EAEhC,IAAIC,EAAqB,EAEzB,KAAOd,EAAI,GAAG,CACZA,EAAI,KAAK,IAAIA,EAAIY,EAAW,CAAC,EAC7B,IAAMG,EAAe,KAAK,WAAWf,CAAC,EAEhCgB,EAAKD,EAAa,EAAIF,EAAU,EAChCI,EAAKF,EAAa,EAAIF,EAAU,EAChCK,EAAgB,KAAK,KAAKF,EAAKA,EAAKC,EAAKA,CAAE,EACjDH,GAAsBI,EAElBJ,GAAsBH,IACxB,KAAK,aAAa,KAAKI,CAAY,EACnCD,EAAqB,GAGvBD,EAAYE,CACd,CAGA,IAAMI,EAAa,KAAK,WAAW,CAAC,GAElC,KAAK,aAAa,SAAW,GAC7BA,EAAW,IAAM,KAAK,aAAa,KAAK,aAAa,OAAS,CAAC,EAAE,GACjEA,EAAW,IAAM,KAAK,aAAa,KAAK,aAAa,OAAS,CAAC,EAAE,IAEjE,KAAK,aAAa,KAAKA,CAAU,CAErC,CAKQ,qBAAqBC,EAAuB,CAClD,IAAIC,EAAO,EACX,QAASC,EAAI,EAAGA,GAAKF,EAAOE,IAAK,CAC/B,IAAMzB,EAAK,KAAK,aAAayB,EAAI,CAAC,EAC5BxB,EAAK,KAAK,aAAawB,CAAC,EACxBN,EAAKlB,EAAG,EAAID,EAAG,EACfoB,EAAKnB,EAAG,EAAID,EAAG,EACrBwB,GAAQ,KAAK,KAAKL,EAAKA,EAAKC,EAAKA,CAAE,CACrC,CACA,OAAOI,CACT,CACF,EC5KA,IAAME,GAAoB,GAEbC,GAAN,KAAyB,CAC9B,YAAoBC,EAAa,CAAb,QAAAA,CAAc,CAGlC,qBACEC,EACAC,EACAC,EAAoB,EACpBC,EAAsB,GACtB,CACA,IAAMC,EAAK,CAAE,EAAG,KAAK,GAAG,EAAEJ,CAAI,EAAG,EAAG,KAAK,GAAG,EAAEA,CAAI,CAAE,EAC9CK,EAAK,CAAE,EAAG,KAAK,GAAG,EAAEJ,CAAG,EAAG,EAAG,KAAK,GAAG,EAAEA,CAAG,CAAE,EAC5CK,EAAKD,EAAG,EAAID,EAAG,EACfG,EAAKF,EAAG,EAAID,EAAG,EACfI,EAAW,KAAK,KAAKF,EAAKA,EAAKC,EAAKA,CAAE,EACtCE,EAAYN,EACd,KAAK,IAAIK,EAAW,EAAGX,EAAiB,EACxC,EAEEa,EAAK,CACT,EAAGN,EAAG,GAAKC,EAAG,EAAID,EAAG,GAAK,EAC1B,EAAG,KAAK,IAAIA,EAAG,GAAKC,EAAG,EAAID,EAAG,GAAK,EAAIK,EAAW,CAAC,CACrD,EACME,EAAK,CACT,EAAGP,EAAG,GAAMC,EAAG,EAAID,EAAG,GAAK,EAAK,EAChC,EAAG,KAAK,IAAIA,EAAG,GAAMC,EAAG,EAAID,EAAG,GAAK,EAAK,EAAIK,EAAW,CAAC,CAC3D,EAEA,KAAK,MAAQ,IAAIG,GAAyBR,EAAIM,EAAIC,EAAIN,EAAIH,CAAS,CACrE,CAEA,SAASW,EAA+B,CACtC,GAAI,CAAC,KAAK,MACR,MAAM,IAAI,MAAM,oCAAoC,EAEtD,IAAMC,EAAY,KAAK,MAAM,UAAUD,CAAK,EAC5C,OAAKC,EAGE,KAAK,GAAG,IAAI,KAAK,MAAMA,EAAU,CAAC,EAAG,KAAK,MAAMA,EAAU,CAAC,CAAC,EAF1D,EAGX,CAEA,cAAuB,CACrB,OAAK,KAAK,MAGH,KAAK,MAAM,gBAAgB,EAFzB,CAGX,CAEA,UAAsB,CACpB,OAAK,KAAK,MAGH,KAAK,MACT,aAAa,EACb,IAAKC,GAAU,KAAK,GAAG,IAAI,KAAK,MAAMA,EAAM,CAAC,EAAG,KAAK,MAAMA,EAAM,CAAC,CAAC,CAAC,EAJ9D,CAAC,CAKZ,CACF,EAEaC,GAAN,KAAoB,CACzB,YACUjB,EACAkB,EACR,CAFQ,QAAAlB,EACA,YAAAkB,CACP,CAEH,SAASC,EAAejB,EAA8B,CACpD,IAAMkB,EAAI,KAAK,GAAG,EAAED,CAAI,EAClBE,EAAI,KAAK,GAAG,EAAEF,CAAI,EAClBG,EAAO,KAAK,GAAG,EAAEpB,CAAG,EACpBqB,EAAO,KAAK,GAAG,EAAErB,CAAG,EAE1B,GAAIkB,IAAME,GAAQD,IAAME,EACtB,MAAO,GAIT,IAAIC,EAAQJ,EACRK,EAAQJ,EAENK,EAAQ,KAAK,MAAM,EAAI,KAAK,IAAIH,EAAOF,CAAC,GAAK,KAAK,IAAIC,EAAOF,CAAC,EAAI,EAAE,EAS1E,OAPI,KAAK,OAAO,OAAOM,CAAK,GAAKN,IAAME,EACjCF,EAAIE,EAAME,IACLJ,EAAIE,GAAME,IAEfH,EAAIE,EAAME,IACLJ,EAAIE,GAAME,IAEjBD,IAAUJ,GAAKK,IAAUJ,EACpB,GAEF,KAAK,GAAG,IAAIG,EAAOC,CAAK,CACjC,CACF,EAEaE,GAAN,MAAMC,CAAW,CAQd,YACEC,EACAC,EACR,CAFQ,UAAAD,EACA,cAAAC,EATV,KAAQ,KAAuB,KAC/B,KAAQ,IAAsB,KAC9B,KAAQ,KAAyB,KACjC,KAAQ,SAAmB,EAE3B,KAAQ,gBAAkB,EAKvB,CAEH,OAAc,KACZD,EACAE,EACAC,EAAqB,GACrBC,EAAmB,GACnB,CACA,OAAO,IAAIL,EAAWC,EAAM,CAACK,EAAehC,IACnC,IAAIiC,GACTN,EAAK,IAAI,EACTA,EAAK,QAAQ,EACbK,EACAhC,EACA6B,EACAE,EACAD,CACF,CACD,CACH,CAEA,SACEE,EACAhC,EACAkC,EAAe,EACO,CACtB,GAAIF,IAAS,KACX,eAAQ,MAAM,cAAc,EACrB,CAAE,MAAsC,EAEjD,GAAIhC,IAAQ,KACV,eAAQ,MAAM,aAAa,EACpB,CAAE,MAAsC,EAGjD,GAAI,KAAK,KAAK,cAAcgC,EAAMhC,CAAG,EAAIkC,EACvC,YAAK,KAAO,KACL,CAAE,OAAoC,KAAMF,CAAK,EAG1D,GAAI,KAAK,gBAAiB,CACxB,GAAI,KAAK,gBAAgBA,EAAMhC,CAAG,EAChC,YAAK,KAAOgC,EACZ,KAAK,IAAMhC,EACX,KAAK,KAAO,KACZ,KAAK,SAAW,EAChB,KAAK,MAAQ,KAAK,SAASgC,EAAMhC,CAAG,EACpC,KAAK,gBAAkB,GAChB,KAAK,SAASgC,EAAMhC,CAAG,EACzB,CACL,IAAMiB,EAAO,KAAK,OAAO,KAAK,UAAU,EACxC,GAAIA,IAAS,OACX,MAAM,IAAI,MAAM,cAAc,EAEhC,MAAO,CAAE,OAAmC,KAAMA,CAAK,CACzD,CACF,CAEA,OAAQ,KAAK,MAAM,QAAQ,EAAG,CAC5B,OACE,YAAK,gBAAkB,GACvB,KAAK,KAAO,KAAK,MAAM,gBAAgB,EAGvC,KAAK,SAAW,EAET,KAAK,SAASe,EAAMhC,CAAG,EAChC,OACE,MAAO,CAAE,MAAiC,EAC5C,OACE,MAAO,CAAE,MAAsC,EACjD,QACE,MAAM,IAAI,MAAM,2BAA2B,CAC/C,CACF,CAEQ,gBAAgBgC,EAAehC,EAAc,CACnD,GAAI,KAAK,OAAS,MAAQ,KAAK,OAAS,MAAQ,KAAK,MAAQ,KAC3D,MAAO,GAET,IAAMkC,EAAO,KAAK,KAAK,cAAcF,EAAMhC,CAAG,EAC1CmC,EAAY,GAQhB,OAPID,EAAO,GACTC,EAAY,GACHD,EAAO,GAChBC,EAAY,EAEZA,EAAY,EAEV,KAAK,KAAK,cAAc,KAAK,IAAKnC,CAAG,EAAImC,CAI/C,CACF,EChMA,IAAMC,GAAkB,GACXC,GAAN,KAAkD,CAqBvD,YACUC,EACAC,EACAC,EACAC,EACAC,EACR,CALQ,cAAAJ,EACA,cAAAC,EACA,SAAAC,EACA,iBAAAC,EACA,SAAAC,EAtBV,KAAQ,aAAe,EAEvB,KAAQ,OAAS,GAsBf,KAAK,cAAgB,KAAK,QAC5B,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEA,KAAKC,EAAUC,EAAe,CAC5B,GAAI,KAAK,WAAa,MAAQ,CAACD,EAAG,UAAU,KAAK,QAAQ,EAAG,CAC1D,QAAQ,KAAK,kCAAkC,KAAK,QAAQ,YAAY,EACxE,KAAK,OAAS,GACd,MACF,CACA,GAAI,CAACA,EAAG,WAAW,KAAK,GAAG,EAAG,CAC5B,QAAQ,KAAK,+BAA+B,KAAK,GAAG,YAAY,EAChE,KAAK,OAAS,GACd,MACF,CACA,GAAI,KAAK,MAAQ,MAAQ,CAACA,EAAG,WAAW,KAAK,GAAG,EAAG,CACjD,QAAQ,KAAK,+BAA+B,KAAK,GAAG,YAAY,EAChE,KAAK,OAAS,GACd,MACF,CAMA,GAJA,KAAK,SAAWC,EAChB,KAAK,GAAKD,EACV,KAAK,WAAaE,GAAW,KAAKF,EAAI,IAAQ,GAAM,GAAG,EAGrD,KAAK,SAAS,qBAAgC,GAC9CA,EAAG,OAAO,EAAE,cAAc,EAC1B,CACAA,EAAG,eACD,2BAA2BA,EAAG,OAAO,EAAE,cAAc,CAAC,KAEtD,KAAK,SAAS,GAAG,CACnB,EACA,KAAK,OAAS,GACd,MACF,CAkBA,GAfE,KAAK,WAAa,MAClB,KAAK,WAAa,KAAK,GAAG,aAAa,EAAE,GAAG,EAE5C,KAAK,OAASA,EAAG,aAAa,EAE9B,KAAK,OAASA,EAAG,OAAO,KAAK,QAAQ,EAGvC,KAAK,cAAL,KAAK,YAAgB,KAAK,GACvB,OAAO,EACP,iBAAiB,KAAK,SAAU,KAAK,MAAM,GAE9C,KAAK,YAAc,KAAK,IAAI,KAAK,YAAa,KAAK,SAAS,OAAO,CAAC,EAEpE,KAAK,IAAMG,GAAoB,KAAK,GAAI,KAAK,GAAG,EAC5C,KAAK,MAAQ,KAAM,CACrB,QAAQ,KACN,GAAG,KAAK,QAAQ,wBAAwB,KAAK,MAAM,2BACrD,EACA,KAAK,OAAS,GACd,MACF,CAEA,IAAMC,EAAiB,KAAK,SAAS,qBAEnC,KAAK,GACP,EACA,GAAIA,IAAmB,GAAO,CAC5B,QAAQ,KAAK,4BAA4B,EACzC,KAAK,OAAS,GACd,MACF,CAEI,KAAK,MAAQ,KAGf,KAAK,IAAMA,GAGT,KAAK,GAAG,MAAM,KAAK,GAAG,IAAM,KAAK,UACjC,CAAC,KAAK,GAAG,QAAQ,KAAK,GAAG,KAEzB,QAAQ,KACN,4CAA4C,KAAK,SAAS,KAAK,CAAC,EAClE,EACA,KAAK,IAAMA,GAIf,KAAK,KAAO,KAAK,SAAS,sBAAkC,KAAK,IAAK,CACpE,OAAQ,KAAK,WACf,CAAC,EAEG,KAAK,MAAQ,KACf,KAAK,KAAK,cAAc,KAAK,GAAG,EAEhC,KAAK,KAAK,cAAc,MAAS,EAI/B,KAAK,UAAY,KAAK,WAAaJ,EAAG,aAAa,EAAE,GAAG,GAC1DA,EAAG,oBACD,KAAK,KAAK,GAAG,EAEb,gCAAgC,KAAK,SAAS,YAAY,CAAC,KAE3D,KAAK,QACP,EAIF,KAAK,GACF,MAAM,EACN,eAAe,KAAK,SAAU,KAAK,OAAQ,KAAK,KAAK,OAAO,CAAC,CAClE,CAEA,KAAKC,EAAe,CAClB,GAAI,KAAK,MAAQ,KAAM,CACrB,KAAK,OAAS,GACd,MACF,CACA,GAAI,CAAC,KAAK,OACR,OAEF,GAAI,CAAC,KAAK,KAAK,SAAS,EAAG,CACzB,KAAK,OAAS,GACd,MACF,CACA,GAAIA,EAAQ,KAAK,SAAW,KAAK,aAC/B,OAEF,KAAK,SAAWA,EAIhB,IAAMI,EAAY,KAAK,KAAK,MAAM,EAUlC,GARE,KAAK,cAAc,eAAe,GAClCA,IAAc,KAAK,eACnBA,EAAU,aAAa,KAAK,aAAa,IAEzC,KAAK,SAAWA,EAChB,KAAK,cAAgBA,GAGnB,KAAK,KAAK,WAAW,EAAG,CAE1B,GAAI,KAAK,GAAG,MAAM,KAAK,GAAI,IAAM,KAAK,SAAU,CAE9C,IAAMC,EAAS,KAAK,SAAS,uBAAuB,KAAK,GAAG,EACxDA,IAAW,GACb,KAAK,IAAM,KAEX,KAAK,IAAMA,CAEf,CAEA,GAAI,KAAK,MAAQ,KAAM,CACrB,QAAQ,KACN,sEACF,EACA,KAAK,SAAS,UAAU,KAAK,KAAK,OAAO,CAAC,EAC1C,KAAK,KAAK,OAAO,EAAK,EACtB,KAAK,OAAS,GACd,MACF,MACE,KAAK,IAAM,KAAK,IAEZ,KAAK,KAAK,WAAW,IAAM,KAAK,KAClC,KAAK,KAAK,cAAc,KAAK,GAAG,CAGtC,CAEA,IAAMC,EAAS,KAAK,WAAW,SAAS,KAAK,KAAK,KAAK,EAAG,KAAK,GAAG,EAClE,OAAQA,EAAO,KAAM,CACnB,OACE,GAAI,KAAK,GAAG,MAAM,KAAK,GAAG,IAAM,KAAK,SAAU,CAC7C,IAAMC,EAAS,KAAK,KAAK,OAAO,GAAKf,GAAkB,KACjDgB,EAAY,KAAK,KAAK,OAAO,EAAID,EACvC,KAAK,SAAS,UAAUC,CAAS,EACjC,KAAK,KAAK,OAAO,EAAK,EACtB,KAAK,OAAS,GAGd,KAAK,GACF,MAAM,EACN,iBAAiB,KAAK,SAAU,KAAK,OAAQA,CAAS,EACrDD,GACF,KAAK,GAAG,eACN,qBAAqBE,GAAaF,CAAM,CAAC,qCAEzC,KAAK,SAAS,GAAG,CACnB,EAEF,MACF,CACA,KAAK,SAAS,QAAQ,KAAK,GAAG,EAC1B,KAAK,OAAO,SAAS,GAAK,KAAK,SAAS,WAAW,KAAK,MAAM,EAChE,KAAK,SAAS,UAAU,KAAK,KAAK,OAAO,CAAC,EAE1C,KAAK,GAAG,aACN,IAAIG,GACF,KAAK,KAAK,OAAO,EACjB,KAAK,SACL,KAAK,SACL,KAAK,IACL,EACF,CACF,EAEF,KAAK,KAAK,OAAO,EAAK,EACtB,KAAK,OAAS,GAGd,KAAK,GACF,MAAM,EACN,iBAAiB,KAAK,SAAU,KAAK,OAAQ,KAAK,KAAK,OAAO,CAAC,EAClE,OACF,OACE,KAAK,KAAK,KAAKJ,EAAO,IAAI,EAC1B,MACF,OACE,MACF,OAEE,QAAQ,KAAK,uBAAuB,EACpC,KAAK,SAAS,UAAU,KAAK,KAAK,OAAO,CAAC,EAC1C,KAAK,KAAK,OAAO,EAAK,EACtB,KAAK,OAAS,GACd,MACJ,CACF,CAEA,OAAgB,CACd,OAAO,KAAK,QACd,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CACF,EC9RO,SAASK,GAAcC,EAAaC,EAA0B,CACnE,OAAO,MAAM,KAAKD,EAAG,IAAIC,EAAMC,GAAWD,EAAM,EAAG,EAAI,CAAC,CAAC,EAAE,OACxDE,GAAM,CAACH,EAAG,SAASG,CAAC,GAAKH,EAAG,OAAOG,CAAC,CACvC,CACF,CAEO,SAASC,GACdJ,EACAK,EACAJ,EAC0B,CAC1B,IAAIK,EAAc,IACdC,EAAyB,KAC7B,QAAWC,KAAOH,EAAM,CACtB,IAAMI,EAAWT,EAAG,cAAcQ,EAAKP,CAAI,EACvCQ,EAAWH,IACbA,EAAcG,EACdF,EAASC,EAEb,CACA,MAAO,CAACD,EAAQD,CAAW,CAC7B,CAEO,SAASI,GACdV,EACAW,EACAC,EACmC,CACnC,IAAMC,EAAU,MAAM,KAAKF,CAAC,EAAE,KAAK,CAACG,EAAGC,IAAMf,EAAG,EAAEc,CAAC,EAAId,EAAG,EAAEe,CAAC,CAAC,EACxDC,EAAU,MAAM,KAAKJ,CAAC,EAAE,KAAK,CAACE,EAAGC,IAAMf,EAAG,EAAEc,CAAC,EAAId,EAAG,EAAEe,CAAC,CAAC,EAE9D,GAAIF,EAAQ,SAAW,GAAKG,EAAQ,SAAW,EAC7C,OAAO,KAGT,IAAIC,EAAI,EACJC,EAAI,EACJZ,EAAc,IACda,EAAS,CAAE,EAAGN,EAAQ,CAAC,EAAG,EAAGG,EAAQ,CAAC,CAAE,EAE5C,KAAOC,EAAIJ,EAAQ,QAAUK,EAAIF,EAAQ,QAAQ,CAC/C,IAAMI,EAAWP,EAAQI,CAAC,EACpBI,EAAWL,EAAQE,CAAC,EAEpBT,EACJ,KAAK,IAAIT,EAAG,EAAEoB,CAAQ,EAAIpB,EAAG,EAAEqB,CAAQ,CAAC,EACxC,KAAK,IAAIrB,EAAG,EAAEoB,CAAQ,EAAIpB,EAAG,EAAEqB,CAAQ,CAAC,EAEtCZ,EAAWH,IACbA,EAAcG,EACdU,EAAS,CAAE,EAAGC,EAAU,EAAGC,CAAS,GAIlCJ,IAAMJ,EAAQ,OAAS,EACzBK,IAGOA,IAAMF,EAAQ,OAAS,GAIvBhB,EAAG,EAAEoB,CAAQ,EAAIpB,EAAG,EAAEqB,CAAQ,EAHrCJ,IAMAC,GAEJ,CAEA,OAAOC,CACT,CAUO,SAASG,GACdC,EACAC,EACgB,CAChB,IAAMC,EAAcD,EAAO,YAAY,EACvC,GAAIC,EAAY,OAAS,EAAG,OAAO,KAGnC,IAAIC,EAAO,IACTC,EAAO,KACLC,EAAO,IACTC,EAAO,KAET,QAAW5B,KAAQwB,EAAa,CAC9B,IAAMd,EAAIY,EAAK,EAAEtB,CAAI,EACfW,EAAIW,EAAK,EAAEtB,CAAI,EACjBU,EAAIe,IAAMA,EAAOf,GACjBA,EAAIgB,IAAMA,EAAOhB,GACjBC,EAAIgB,IAAMA,EAAOhB,GACjBA,EAAIiB,IAAMA,EAAOjB,EACvB,CAEA,IAAMkB,EAAU,KAAK,OAAOJ,EAAOC,GAAQ,CAAC,EACtCI,EAAU,KAAK,OAAOH,EAAOC,GAAQ,CAAC,EAEtCG,EAAaT,EAAK,IAAIO,EAASC,CAAO,EAG5C,GAAIR,EAAK,MAAMS,CAAU,IAAMR,EAC7B,OAAOQ,EAIT,IAAI5B,EAA8B,KAC9B6B,EAAyB,IAE7B,QAAWhC,KAAQwB,EAAa,CAC9B,IAAMS,EAAKX,EAAK,EAAEtB,CAAI,EAAI6B,EACpBK,EAAKZ,EAAK,EAAEtB,CAAI,EAAI8B,EACpBK,EAAcF,EAAKA,EAAKC,EAAKA,EAE/BC,EAAcH,IAChBA,EAAyBG,EACzBhC,EAAcH,EAElB,CAEA,OAAOG,CACT,CC/GA,IAAMiC,GAAWC,GACfC,GAAoB,QAAQD,CAAC,EACzBE,GAAuB,CAAC,YAAM,SAAK,YAAM,WAAI,EAAY,IAAIH,EAAO,EACpEI,GAA0B,CAAC,YAAM,6BAAO,EAAY,IAAIJ,EAAO,EAC/DK,GAAmB,CAAC,YAAM,WAAI,EAAY,IAAIL,EAAO,EACrDM,GAAqB,CAAC,kBAAO,WAAI,EAAY,IAAIN,EAAO,EACxDO,GAAgB,CAAC,YAAM,WAAI,EAAY,IAAIP,EAAO,EAE3CQ,GAAN,KAAkB,CAIvB,YACUC,EACAC,EACAC,EACAC,EACAC,EACAC,EACR,CANQ,YAAAL,EACA,UAAAC,EACA,YAAAC,EACA,kBAAAC,EACA,kBAAAC,EACA,iBAAAC,EATV,KAAQ,oBAA8B,EACtC,KAAiB,cAAgB,IAAI,GASlC,CAEK,MAAMH,EAAgBI,EAAe,CACvCJ,EAAO,KAAK,IAAM,SACtB,KAAK,KAAK,aAAa,IAAIK,GAAe,KAAK,OAAQL,EAAO,GAAG,EAAGI,CAAK,CAAC,CAC5E,CAGQ,aAAaE,EAAuC,CAE1D,GACEA,EAAM,SAAS,IAAM,IACrBA,EAAM,KAAK,IAAM,SACjBA,EAAM,UAAU,EAEhB,MAAO,GAGT,GAAM,CAAE,WAAAC,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EAIrD,MAHI,EAAAA,IAAe,QAAmB,KAAK,OAAO,OAAO,CAAC,GAGtDA,IAAe,UAAqB,KAAK,OAAO,OAAO,CAAC,EAI9D,CAEQ,OAAOC,EAAsB,CACnC,IAAMC,EAAW,KAAK,OAAO,aAAaD,CAAM,EAC3CC,GACL,KAAK,OAAO,cAAcA,CAAQ,CACpC,CAEQ,uBAAiC,CACvC,IAAMC,EAAY,KAAK,KAAK,OAAO,EAAE,UAAU,KAAK,MAAM,EAE1D,OADc,KAAK,OAAO,OAAO,EAAIA,GACrB,KAAK,YACvB,CAEQ,uBAAiC,CACvC,IAAMA,EAAY,KAAK,KAAK,OAAO,EAAE,UAAU,KAAK,MAAM,EAE1D,OADc,KAAK,OAAO,OAAO,EAAIA,GACrB,KAAK,YACvB,CAEQ,0BAA0C,CAEhD,IAAIC,EAAkB,KAAK,OAAO,gBAAgB,EAC9C,KAAK,OAAO,KAAK,IAAM,QACzBA,EAAkBA,EAAgB,OAC/BC,GAAWA,EAAO,SAAS,EAAE,KAAK,IAAM,KAC3C,GAEF,IAAIC,EAAgB,EAChBC,EACJ,QAAWF,KAAUD,EACfC,EAAO,OAAO,GAAKC,IACvBA,EAAgBD,EAAO,OAAO,EAC9BE,EAAkBF,EAAO,SAAS,GAEpC,OAAIE,IAAoB,OACfA,EAEF,IACT,CAEA,4BAA4C,CAC1C,IAAMC,EAAW,KAAK,OACnB,UAAU,EACV,OACEC,GACCA,EAAE,SAAS,GAAK,KAAK,OAAO,WAAWA,CAAC,IAAM,IAASA,EAAE,UAAU,CACvE,EACF,OAAOD,EAAS,OAAS,EAAI,KAAK,OAAO,YAAYA,CAAQ,EAAI,IACnE,CAEA,cAAe,CACb,QAAWE,KAAQ,KAAK,OAAO,OAAO,EACpC,GAAIA,EAAK,QAAQ,EAAE,SAAW,EAC9B,IAAI,KAAK,OAAO,SAASA,CAAI,EAAI,EAAmB,CAClD,KAAK,MAAMA,EAAM,KAAK,OAAO,YAAYxB,EAAsB,CAAC,EAChE,QACF,CACA,QAAWe,KAAUS,EAAK,QAAQ,EAAG,CACnC,GAAIT,IAAW,KAAK,OAAQ,CAC1B,KAAK,MAAMS,EAAM,KAAK,OAAO,YAAYvB,EAAe,CAAC,EACzD,QACF,CACA,GAAI,KAAK,OAAO,WAAWc,CAAM,EAAG,CAClC,KAAK,MAAMS,EAAM,KAAK,OAAO,YAAYtB,EAAiB,CAAC,EAC3D,QACF,CAEA,KAAK,OAAO,eAAesB,EAAM,GAAG,EACpC,KAAK,WAAWT,CAAM,EACtB,KAAK,MAAMS,EAAM,KAAK,OAAO,YAAYzB,EAAmB,CAAC,EAC7D,MACF,EAEJ,CAEA,iBAAiB0B,EAA4BC,EAA4B,CAKvE,GAHI,CAAC,KAAK,sBAAsB,GAG5B,CAAC,KAAK,sBAAsB,GAAK,CAAC,KAAK,OAAO,OAAO,EAAE,EAAG,OAG9D,IAAMC,EAAuB,KAAK,yBAAyB,EAC3D,GAAIA,EAAsB,CACxB,KAAK,WAAWA,EAAsB,EAAI,EAC1C,MACF,CAMA,GAHI,KAAK,WAAW,GAGhB,KAAK,qBAAqBF,CAAgB,EAAG,OAGjD,GAAI,KAAK,0BAA0B,EAAG,CACpC,KAAK,WAAW,KAAK,KAAK,aAAa,CAAC,EACxC,MACF,CAGA,IAAMG,EAAY,KAAK,OAAO,mBAAmB,EAAE,CAAC,EACpD,GACEA,IAAc,QACdA,EAAU,WAAa,GACvB,KAAK,OAAO,WAAWA,EAAU,MAAM,IAAM,GAC7C,CACA,KAAK,WAAWA,EAAU,MAAM,EAChC,MACF,CAGA,GAAIF,EAAiB,OAAS,EAAG,CAC/B,KAAK,WAAWA,EAAiB,CAAC,CAAC,EACnC,MACF,CAGA,GAAIA,EAAiB,SAAW,EAAG,CACjC,IAAMG,EAAqB,KAAK,uBAAuB,EACvD,GAAIA,EAAoB,CACtB,KAAK,WAAWA,CAAkB,EAClC,MACF,CACF,CACF,CAIA,YAAsB,CACpB,IAAMC,EAAO,KAAK,OACf,UAAU,EACV,OACEP,GACCA,EAAE,SAAS,GACX,KAAK,OAAO,WAAWA,CAAC,IAAM,IAC9BA,EAAE,KAAK,IAAM,KACjB,EAEF,GAAIO,EAAK,SAAW,EAClB,MAAO,GAGT,KAAK,oBAAsB,EAE3B,IAAMC,EAAWC,GAAcA,EAAE,OAAO,EAAIA,EAAE,cAAc,EAEtDC,EADaH,EAAK,MAAM,EAAE,KAAK,CAAC,EAAGI,IAAMH,EAAQ,CAAC,EAAIA,EAAQG,CAAC,CAAC,EACvC,MAAM,EAAG,KAAK,2BAA2B,CAAC,EAEzE,QAAWC,KAAOF,EAChB,KAAK,WAAWE,CAAG,EAKrB,OAAO,KAAK,oBAAsB,CACpC,CAEA,4BAAqC,CACnC,GAAM,CAAE,WAAArB,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EACrD,OAAQA,EAAY,CAClB,WACE,MAAO,GACT,aACE,MAAO,GACT,WACE,MAAO,GAET,QACE,MAAO,IACX,CACF,CAQA,qBAAqBW,EAAqC,CACxD,GAAIA,EAAiB,OAAS,GAC5B,QAAWW,KAAUX,EACnB,GACE,KAAK,OAAO,aAAaW,CAAM,GAC/B,KAAK,OAAO,OAAO,GAAKA,EAAO,OAAO,EAAI,GAE1C,YAAK,OAAOA,CAAM,EAClB,KAAK,WAAWA,EAAQ,EAAI,EACrB,GAIb,MAAO,EACT,CAGA,mBAAmBV,EAA2C,CAE5D,IAAMC,EAAuB,KAAK,yBAAyB,EAC3D,GAAIA,EACF,OAAOA,EAIT,IAAMC,EAAY,KAAK,OAAO,mBAAmB,EAAE,CAAC,EACpD,GACEA,IAAc,QACdA,EAAU,WAAa,GACvB,KAAK,OAAO,WAAWA,EAAU,MAAM,IAAM,GAE7C,OAAOA,EAAU,OAInB,GAAIF,EAAiB,OAAS,EAC5B,OAAOA,EAAiB,CAAC,EAI3B,GAAIA,EAAiB,SAAW,EAAG,CACjC,IAAMG,EAAqB,KAAK,uBAAuB,EACvD,GAAIA,EACF,OAAOA,CAEX,CAEA,OAAO,IACT,CAEA,gBAAgBtB,EAAgB,CAC9B,OAAIA,EAAO,0BACF8B,GAAkB9B,EAAO,yBAAyB,EAEpD+B,GAA2B,KAAK,KAAM/B,EAAO,YAAY,CAAC,CACnE,CAEA,wBAAwC,CAEtC,GADiB,KAAK,OAAO,YAAY,EAC5B,OAAS,EAAG,OAAO,KAEhC,IAAMgC,EAAkB,KAAK,KAAK,QAAQ,EAAE,OAAQP,GAC9CA,IAAM,KAAK,QACX,CAACA,EAAE,QAAQ,GACXA,EAAE,YAAY,EAAE,OAAS,GACzB,KAAK,OAAO,WAAWA,CAAC,EAAU,GAE/BA,EAAE,OAAO,GAAK,KAAK,OAAO,OAAO,EAAI,CAC7C,EAED,GAAIO,EAAgB,OAAS,EAAG,CAC9B,IAAMC,EAAe,KAAK,gBAAgB,KAAK,MAAM,EAE/CC,EAAgBF,EACnB,IAAKG,GAAmB,CACvB,IAAMC,EAAuB,KAAK,gBAAgBD,CAAc,EAE1DE,EAAmB,KAAK,KAAK,IACjCJ,EAAa,EACbA,EAAa,CACf,EACMK,EAA2B,KAAK,KAAK,IACzCF,EAAqB,EACrBA,EAAqB,CACvB,EAEMG,EAAW,KAAK,KAAK,cACzBF,EACAC,CACF,EACA,MAAO,CAAE,OAAQH,EAAgB,SAAAI,CAAS,CAC5C,CAAC,EACA,KAAK,CAACC,EAAGb,IAAMa,EAAE,SAAWb,EAAE,QAAQ,EAGrCc,EAOJ,GANIP,EAAc,OAAS,GAAK,KAAK,OAAO,OAAO,CAAC,EAClDO,EAAgBP,EAAc,CAAC,EAAE,OAEjCO,EAAgBP,EAAc,CAAC,EAAE,OAG/BO,IAAkB,KACpB,OAAOA,CAEX,CACA,OAAO,IACT,CAEA,oBAAqB,CAEnB,GAAI,CAAC,KAAK,sBAAsB,EAAG,OAGnC,IAAMrB,EAAuB,KAAK,yBAAyB,EAC3D,GAAIA,EAAsB,CACxB,KAAK,WAAWA,EAAsB,EAAI,EAC1C,MACF,CAGA,IAAMsB,EAAW,KAAK,2BAA2B,EACjD,GAAIA,IAAa,MACX,KAAK,OAAO,OAAO,CAAC,EAAG,CACzB,KAAK,WAAWA,CAAQ,EACxB,MACF,CAIF,GAAM,CAAE,WAAAnC,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EAC/CoC,EAAY,KAAK,OAAO,UAAU,EACxC,QAAWC,KAAY,KAAK,OAAO,aAAaD,CAAS,EACvD,GAAKC,EAAS,SAAS,GACnB,MAAK,OAAO,WAAWA,CAAQ,GAEjC,GAAAA,EAAS,KAAK,IAAM,aACpBA,EAAS,KAAK,IAAM,WAEhB,KAAK,OAAO,OAAO,CAAC,GAAKrC,IAAe,SAI9C,MAAK,WAAWqC,CAAQ,EACxB,OAEJ,CAEA,2BAAqC,CACnC,QAAWC,KAAQ,KAAK,OAAO,YAAY,EACzC,QAAWD,KAAY,KAAK,KAAK,UAAUC,CAAI,EAC7C,GACE,KAAK,KAAK,OAAOD,CAAQ,GACzB,CAAC,KAAK,KAAK,SAASA,CAAQ,GAC5B,KAAK,KAAK,WAAWA,CAAQ,EAE7B,MAAO,GAIb,MAAO,EACT,CAEA,gBAAgBpC,EAA+B,CAC7C,KAAK,KAAK,aACR,IAAIsC,GACF,KAAK,OAAO,OAAO,EAAI,EACvB,KAAK,OACLtC,EAAO,SAAS,EAAIA,EAAO,GAAG,EAAI,KAAK,KAAK,aAAa,EAAE,GAAG,CAChE,CACF,CACF,CAEA,WAAWA,EAA+BuC,EAAQ,GAAO,CACnD,CAACA,GAAS,CAAC,KAAK,aAAavC,CAAM,IAEnC,KAAK,OAAO,iBAAiBA,CAAM,EACrC,KAAK,eAAeA,CAAM,EACjBA,EAAO,SAAS,GACzB,KAAK,eAAeA,CAAM,EAE9B,CAEA,eAAeA,EAA+B,CAC5C,IAAME,EAAY,KAAK,KAAK,OAAO,EAAE,UAAU,KAAK,MAAM,EACpDR,EAAeM,EAAO,SAAS,EACjC,KAAK,aACL,KAAK,YACHwC,EAAetC,EAAYR,EAE7B+C,EAEFzC,EAAO,SAAS,GAChBA,EAAO,KAAK,IAAM,OAClB,KAAK,OAAO,KAAK,IAAM,MAEvByC,EAAS,KAAK,yBACZzC,EACA,KAAK,OAAO,OAAO,EAAIwC,EAAe,KAAK,mBAC7C,EAEAC,EAAS,KAAK,OAAO,OAAO,EAAID,EAG9B,EAAAC,EAAS,KAIb,KAAK,KAAK,aACR,IAAIH,GACFG,EACA,KAAK,OACLzC,EAAO,SAAS,EAAIA,EAAO,GAAG,EAAI,KAAK,KAAK,aAAa,EAAE,GAAG,CAChE,CACF,EAEIA,EAAO,SAAS,GAClB,KAAK,eAAeA,CAAM,EAE9B,CAEA,eAAeF,EAAe,CAC5B,IAAM4C,EAAUC,GACd,KAAK,KACL,MAAM,KAAK,KAAK,OAAO,YAAY,CAAC,EAAE,OAAQC,GAC5C,KAAK,KAAK,aAAaA,CAAC,CAC1B,EACA,MAAM,KAAK9C,EAAM,YAAY,CAAC,EAAE,OAAQ8C,GAAM,KAAK,KAAK,aAAaA,CAAC,CAAC,CACzE,EACA,GAAIF,IAAY,KACd,OAGF,IAAID,EACA3C,EAAM,KAAK,IAAM,MACnB2C,EAAS,KAAK,yBAAyB3C,EAAO,KAAK,OAAO,OAAO,EAAI,CAAC,EAEtE2C,EAAS,KAAK,OAAO,OAAO,EAAI,EAG9B,EAAAA,EAAS,KAIb,KAAK,KAAK,aACR,IAAII,GACF,KAAK,OACL/C,EAAM,GAAG,EACT4C,EAAQ,EACRD,EACA,IACF,CACF,EAEA,KAAK,eAAe3C,CAAK,EAC3B,CAEA,yBAAyBE,EAAgBE,EAA2B,CAClE,GAAM,CAAE,WAAAH,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EACrD,GAAIA,IAAe,OACjB,YAAK,qBAAuBG,EACrBA,EAET,IAAIuC,EAASzC,EAAO,OAAO,EAAI,EAG/B,OAAIyC,EAASvC,IAEPA,EAAYF,EAAO,OAAO,EAAI,EAChCyC,EAAS,EAETA,EAASvC,GAGb,KAAK,qBAAuBuC,EACrBA,CACT,CAEA,eAAeK,EAAe,CAE5B,GADI,KAAK,OAAO,KAAK,IAAM,OACvBA,EAAM,KAAK,IAAM,QAAkB,OACvC,IAAMC,EAAW,KAAK,cAAc,IAAID,CAAK,GAAK,KAC9C,KAAK,KAAK,MAAM,EAAIC,GAAY,MACpC,KAAK,cAAc,IAAID,EAAO,KAAK,KAAK,MAAM,CAAC,EAC/C,KAAK,KAAK,aACR,IAAIjD,GACF,KAAK,OACLiD,EAAM,GAAG,EACT,KAAK,OAAO,YAAY1D,EAAY,CACtC,CACF,EACF,CACF,ECphBO,IAAM4D,GAAN,KAAwC,CAa7C,YAAoBC,EAAa,CAAb,SAAAA,EAZpB,KAAQ,OAAS,GAGjB,KAAQ,sBAAwB,GAEhC,KAAQ,SAA+B,KAQrC,KAAK,OAAS,IAAIC,EAAaC,EAAWF,EAAI,GAAG,CAAC,CAAC,EACnD,KAAK,WAAa,KAAK,OAAO,QAAQ,GAAI,EAAE,EAC5C,KAAK,WAAa,KAAK,OAAO,QAAQ,EAAG,KAAK,UAAU,EACxD,KAAK,aAAe,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,IAClD,KAAK,aAAe,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,IAClD,KAAK,YAAc,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,GACnD,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEA,KAAKG,EAAU,CACb,KAAK,GAAKA,CACZ,CAEA,KAAKC,EAAe,CAClB,GAAIA,EAAQ,KAAK,aAAe,KAAK,WAErC,IAAI,CAAC,KAAK,IAAI,QAAQ,EAAG,CACvB,KAAK,OAAS,GACd,MACF,CAEA,GAAI,KAAK,WAAa,KAAM,CAC1B,KAAK,SAAW,IAAIC,GAClB,KAAK,OACL,KAAK,GACL,KAAK,IACL,KAAK,aACL,KAAK,aACL,KAAK,WACP,EAGA,KAAK,SAAS,WAAW,KAAK,GAAG,aAAa,CAAC,EAC/C,MACF,CAEA,KAAK,0BAA0B,EAC/B,KAAK,YAAY,EACnB,CAEQ,2BAA4B,CAElC,QAAWC,KAAO,KAAK,IAAI,yBAAyB,EAClDA,EAAI,OAAO,EAIb,QAAWC,KAAY,KAAK,IAAI,UAAU,EAAG,CAG3C,GAAI,CAACA,EAAS,sBAAsB,EAAG,SAEvC,IAAMC,EAAQD,EAAS,MAAM,KAAK,GAAG,EACrC,KAAK,GAAG,aACN,IAAIE,GAA2B,KAAK,IAAKD,EAAM,GAAG,CAAC,CACrD,CACF,CACF,CAEQ,aAAc,CACpB,GAAI,KAAK,WAAa,KACpB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,IAAME,EAAW,KAAK,SAAS,2BAA2B,EAC1D,GAAIA,IAAa,KAAM,CACrB,IAAMC,EAAO,KAAK,IAAI,WAAWD,CAAQ,EAAI,EAAI,EACjD,GAAI,KAAK,OAAO,OAAOC,CAAI,EAAG,CAE5B,IAAMJ,EAAW,KAAK,IAAI,aAAaG,CAAQ,EAE3CH,IAAa,MACf,KAAK,IAAI,cAAcA,CAAQ,EAGjC,KAAK,SAAS,WAAWG,CAAQ,EACjC,MACF,CACF,CAEA,GAAI,KAAK,sBAAuB,CAC9B,GAAI,KAAK,IAAI,iBAAiB,KAAK,GAAG,aAAa,CAAC,EAAG,CACrD,KAAK,SAAS,WAAW,KAAK,GAAG,aAAa,CAAC,EAC/C,MACF,CACA,KAAK,sBAAwB,EAC/B,CAEA,KAAK,SAAS,mBAAmB,CACnC,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CACF,ECzGA,IAAME,GAAkB,IAAI,QAEfC,GAAN,KAA2C,CAQhD,YAAoBC,EAAgB,CAAhB,YAAAA,EAPpB,KAAiB,oBAAsB,GAGvC,KAAQ,SAAW,EAEnB,KAAQ,OAAS,EAEoB,CAErC,wBAAkC,CAChC,MAAO,EACT,CAEA,KAAKC,EAAUC,EAAe,CAC5B,KAAK,GAAKD,EACV,KAAK,OAASA,EAAG,OAAO,EACxB,KAAK,SACHC,EAASC,EAAW,KAAK,OAAO,KAAK,CAAC,EAAI,KAAK,mBACnD,CAEA,KAAKD,EAAe,CAClB,KAAK,OAAO,eAAe,EAC3B,QAAWE,KAAK,KAAK,OAAO,MAAM,EAAG,CACnC,GAAI,CAACA,EAAE,KAAK,EAAE,eACZ,SAGF,IAAMC,EAAQ,KAAK,GAAI,MAAMD,EAAE,KAAK,CAAC,EACrC,GAAI,CAACC,GAAO,SAAS,EAAG,CACtBD,EAAE,OAAO,EACT,QACF,CACA,GAAIC,IAAU,KAAK,OACjB,SAGF,IAAMC,EAAS,KAAK,GAAI,OAAOD,EAAM,GAAG,CAAC,EACrCD,EAAE,KAAK,IAAM,gBACfA,EAAE,cAAcE,CAAM,EAClBF,EAAE,SAAS,GACbE,EAAO,YAAYF,CAAC,GAGtBE,EAAO,YAAYF,CAAC,CAExB,CAEA,GAAI,CAAC,KAAK,OAAO,QAAQ,EAAG,CAE1B,IAAMG,EAAO,KAAK,OAAO,KAAK,EAC9B,KAAK,OAAO,WAAWA,CAAI,EAC3B,KAAK,OAAO,MAAM,EAAE,QAASH,GAAM,CAE/BA,EAAE,KAAK,IAAM,aACbA,EAAE,KAAK,IAAM,iBACbA,EAAE,KAAK,IAAM,gBACbA,EAAE,KAAK,IAAM,QAEbA,EAAE,OAAO,CAEb,CAAC,EACD,KAAK,OAAS,GACd,KAAK,GAAG,MAAM,EAAE,aAAa,KAAK,OAAQF,CAAK,EAC/C,MACF,CAEA,IAAMM,EAAW,KAAK,OAAO,kBAAkB,KAAK,MAAM,EAC1D,KAAK,OAAO,UAAUA,CAAQ,EAC9B,IAAMC,EAAkB,KAAK,OAAO,iBAAiB,KAAK,MAAM,EAChE,KAAK,OAAO,QAAQA,CAAe,EAGnC,KAAK,GAAG,MAAM,EAAE,SAAS,KAAK,OAAQA,CAAe,EAErD,IAAMC,EAAY,MAAM,KAAK,KAAK,OAAO,UAAU,CAAC,EACpD,QAAWC,KAAYD,EACjBC,EAAS,UAAU,GAAK,KAAK,GAAG,MAAM,GACxCA,EAAS,OAAO,EAIpB,IAAMC,EAAY,KAAK,OAAO,aAAa,EAC3C,QAAWC,KAAWD,EAElBC,EAAQ,aACR,KAAK,GAAG,MAAM,EAAIA,EAAQ,UACxB,KAAK,GAAG,OAAO,EAAE,yBAAyB,GAE5C,KAAK,OAAO,YAAYA,EAAQ,MAAM,EAI1C,GAAIX,EAAQ,KAAK,SAAW,KAAK,qBAC3B,KAAK,OAAO,eAAe,EAAI,KAAK,SAAU,CAChD,KAAK,SAAWA,EAChB,IAAMY,EAAQ,YAAY,IAAI,EAC9B,KAAK,eAAe,EACpB,IAAMC,EAAM,YAAY,IAAI,EACxBA,EAAMD,EAAQ,KAChB,QAAQ,IAAI,UAAU,KAAK,OAAO,KAAK,CAAC,UAAUC,EAAMD,CAAK,IAAI,CAErE,CAEJ,CAEQ,gBAAiB,CACvB,IAAME,EAAW,KAAK,kBAAkB,EAExC,GAAIA,EAAS,SAAW,EAAG,CACzB,KAAK,OAAO,0BAA4B,KACxC,MACF,CAGA,IAAIC,EAAe,EACfC,EAAcF,EAAS,CAAC,EAAE,KAC9B,QAASG,EAAI,EAAGA,EAAIH,EAAS,OAAQG,IAAK,CACxC,IAAMC,EAAOJ,EAASG,CAAC,EAAE,KACrBC,EAAOF,IACTA,EAAcE,EACdH,EAAeE,EAEnB,CAEA,IAAME,EAAiBL,EAASC,CAAY,EAC5C,GAAII,IAAmB,OAAW,MAAM,IAAI,MAAM,aAAa,EAE/D,KAAK,OAAO,0BAA4BC,GACtC,KAAK,GACLD,CACF,EACA,IAAME,EAAe,KAAK,uBAAuBF,CAAc,EAC3DE,GAAgB,CAACA,EAAa,WAAW,KAAK,MAAM,GACtD,KAAK,cAAcF,CAAc,EAInC,QAASF,EAAI,EAAGA,EAAIH,EAAS,OAAQG,IAAK,CACxC,GAAIA,IAAMF,EAAc,SACxB,IAAMO,EAAUR,EAASG,CAAC,EACtB,KAAK,aAAaK,CAAO,GAC3B,KAAK,cAAcA,CAAO,CAE9B,CACF,CAEQ,uBAAuBA,EAAuC,CACpE,IAAMC,EAAU,IAAI,IACpB,QAAWC,KAAQF,EAAS,CAC1B,IAAIG,EAAqB,GAiBzB,GAhBI,KAAK,GAAG,aAAaD,CAAI,GAAK,KAAK,GAAG,cAAcA,CAAI,IAG5D,KAAK,GAAG,gBAAgBA,EAAOE,GAAM,CACnC,GAAI,CAAC,KAAK,GAAG,SAASA,CAAC,EAAG,CACxBD,EAAqB,GACrB,MACF,CACA,IAAME,EAAU,KAAK,GAAG,QAAQD,CAAC,EAC7BC,IAAY,KAAK,OAAO,QAAQ,GAClCJ,EAAQ,IAAII,CAAO,CAEvB,CAAC,EACGF,IAGAF,EAAQ,OAAS,EACnB,MAAO,EAEX,CACA,GAAIA,EAAQ,OAAS,EACnB,MAAO,GAET,IAAMK,EAAQ,KAAK,GAAG,gBAAgB,MAAM,KAAKL,CAAO,EAAE,CAAC,CAAC,EACtDM,EAAWT,GAAqB,KAAK,GAAIQ,EAAM,YAAY,CAAC,EAC5DE,EAAaV,GAAqB,KAAK,GAAIE,CAAO,EACxD,OAAIS,GAAUF,EAAUC,CAAU,EACzBF,EAEF,EACT,CAEQ,aAAaN,EAAgC,CACnD,IAAMU,EAAa,IAAI,IACvB,QAAWC,KAAMX,EAAS,CACxB,GAAI,KAAK,GAAG,QAAQW,CAAE,GAAK,KAAK,GAAG,cAAcA,CAAE,EACjD,MAAO,GAET,KAAK,GAAG,gBAAgBA,EAAKP,GAAM,CACnB,KAAK,GAAG,MAAMA,CAAC,EACnB,SAAS,GAAK,KAAK,GAAG,QAAQA,CAAC,IAAM,KAAK,OAAO,QAAQ,GACjEM,EAAW,IAAIN,CAAC,CAEpB,CAAC,CACH,CACA,GAAIM,EAAW,OAAS,EACtB,MAAO,GAET,IAAMH,EAAWT,GAAqB,KAAK,GAAIY,CAAU,EACnDF,EAAaV,GAAqB,KAAK,GAAIE,CAAO,EACxD,OAAOS,GAAUF,EAAUC,CAAU,CACvC,CAEQ,cAAcR,EAAuB,CAC3C,GACE,MAAM,KAAKA,CAAO,EAAE,KACjBY,GAAM,KAAK,IAAI,QAAQA,CAAC,IAAM,KAAK,QAAQ,QAAQ,CACtD,EAIA,OAGF,IAAMC,EAAY,KAAK,mBAAmBb,CAAO,EACjD,GAAIa,IAAc,KAChB,OAGF,IAAMC,EAAYd,EAAQ,OAAO,EAAE,KAAK,EAAE,MAC1C,GAAI,CAACc,EACH,OAGF,IAAMC,EAAQ,KAAK,iBACjB,KAAK,eAAe,EACpB,KAAK,eAAe,EAAE,QACtB,CAACD,CAAS,EACV,CAACZ,EAAMc,IAAO,KAAK,GAAG,gBAAgBd,EAAMc,CAAE,EAC7Cd,GAAS,KAAK,GAAG,QAAQA,CAAI,IAAM,KAAK,OAAO,QAAQ,CAC1D,EAEI,KAAK,OAAO,cAAc,IAAMa,EAAM,MACxC,KAAK,GAAG,cAAcF,EAAW,KAAK,MAAM,EAG9C,QAAWX,KAAQa,EACjBF,EAAU,QAAQX,CAAI,CAE1B,CAEQ,mBAAmBF,EAAsC,CAC/D,IAAMiB,EAAY,IAAI,IACtB,QAAWL,KAAKZ,EACd,KAAK,GAAG,gBAAgBY,EAAIM,GAAa,CACvC,IAAMrC,EAAQ,KAAK,GAAG,MAAMqC,CAAQ,EAElCrC,EAAM,SAAS,GACfA,IAAU,KAAK,QACf,CAACA,EAAM,WAAW,KAAK,MAAM,GAE7BoC,EAAU,IAAIpC,GAAQoC,EAAU,IAAIpC,CAAK,GAAK,GAAK,CAAC,CAExD,CAAC,EAIH,GAAIoC,EAAU,OAAS,EACrB,OAAO,KAIT,IAAIE,EAAuC,KACvCC,EAAoB,EACxB,OAAW,CAACF,CAAQ,IAAKD,EACvB,QAAWI,KAAUH,EAAS,gBAAgB,EACxCG,EAAO,OAAO,IAAM,KAAK,QACvBA,EAAO,OAAO,EAAID,IACpBA,EAAoBC,EAAO,OAAO,EAClCF,EAAwBD,GAMhC,OAAIC,IAA0B,KACrBA,EAIFG,GAAQL,CAAS,CAC1B,CAEQ,mBAAoC,CAC1C,IAAMM,EAAc,KAAK,OAAO,YAAY,EAC5C,GAAIA,EAAY,OAAS,EAAG,MAAO,CAAC,EAEpC,IAAMC,EAAQ,KAAK,eAAe,EAC5BC,EAAa,KAAK,eAAe,EACjCC,EAAUF,EAAM,QAEhBhC,EAA2B,CAAC,EAElC,QAAWmC,KAAaJ,EAAa,CACnC,GAAIG,EAAQC,CAAS,IAAMF,EAAY,SAEvC,IAAMzB,EAAU,KAAK,iBACnByB,EACAC,EACA,CAACC,CAAS,EACV,CAACzB,EAAMc,IAAO,KAAK,GAAG,wBAAwBd,EAAMc,CAAE,EACrDd,GAASqB,EAAY,IAAIrB,CAAI,CAChC,EACAV,EAAS,KAAKQ,CAAO,CACvB,CACA,OAAOR,CACT,CAEA,OAAgB,CACd,GAAI,KAAK,SAAW,KAClB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,OAAO,KAAK,MACd,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEQ,gBAAwC,CAC9C,IAAMoC,EAAa,KAAK,GAAG,MAAM,EAAI,KAAK,GAAG,OAAO,EAChDJ,EAAQlD,GAAgB,IAAI,KAAK,EAAE,EACvC,OAAI,CAACkD,GAASA,EAAM,QAAQ,OAASI,KACnCJ,EAAQ,CACN,QAAS,IAAI,YAAYI,CAAU,EACnC,IAAK,CACP,EACAtD,GAAgB,IAAI,KAAK,GAAIkD,CAAK,GAE7BA,CACT,CAEQ,gBAAyB,CAC/B,IAAMA,EAAQ,KAAK,eAAe,EAClC,OAAAA,EAAM,MACFA,EAAM,MAAQ,aAChBA,EAAM,QAAQ,KAAK,CAAC,EACpBA,EAAM,IAAM,GAEPA,EAAM,GACf,CAEQ,iBACNC,EACAC,EACAG,EACAC,EACAC,EACc,CACd,IAAMC,EAAS,IAAI,IACbC,EAAmB,CAAC,EAE1B,QAAW3C,KAASuC,EACdH,EAAQpC,CAAK,IAAMmC,GAClBM,EAAUzC,CAAK,IACpBoC,EAAQpC,CAAK,EAAImC,EACjBO,EAAO,IAAI1C,CAAK,EAChB2C,EAAM,KAAK3C,CAAK,GAGlB,KAAO2C,EAAM,OAAS,GAAG,CACvB,IAAM/B,EAAO+B,EAAM,IAAI,EACvBH,EAAW5B,EAAOgB,GAAa,CACzBQ,EAAQR,CAAQ,IAAMO,GAGrBM,EAAUb,CAAQ,IAGvBQ,EAAQR,CAAQ,EAAIO,EACpBO,EAAO,IAAId,CAAQ,EACnBe,EAAM,KAAKf,CAAQ,EACrB,CAAC,CACH,CAEA,OAAOc,CACT,CACF,ECjYO,IAAME,GAAN,KAA0C,CAI/C,YACUC,EACQC,EAChB,CAFQ,gBAAAD,EACQ,UAAAC,EALlB,YAAkB,EAMf,CAEH,KAAKC,EAAUC,EAAe,CAC5B,KAAK,GAAKD,CACZ,CAEA,KAAKC,EAAe,CAGlB,GAFA,KAAK,OAAS,GAEV,CAAC,KAAK,GAAG,WAAW,KAAK,IAAI,EAAG,CAClC,QAAQ,KAAK,wBAAwB,KAAK,IAAI,YAAY,EAC1D,MACF,CAEA,GAAI,CAAC,KAAK,GAAG,aAAa,EAAG,CAC3B,KAAK,OAAS,GACd,MACF,CAEA,IAAIC,EAAwB,KACxB,KAAK,GAAG,UAAU,KAAK,WAAW,EAAE,EACtCA,EAAS,KAAK,GAAG,OAAO,KAAK,WAAW,EAAE,EAE1CA,EAAS,KAAK,GAAG,UAAU,KAAK,UAAU,EAG5CA,EAAO,MAAM,EAAE,QAASC,GAAMD,EAAO,WAAWC,CAAC,CAAC,EAClDC,GAAc,KAAK,GAAI,KAAK,IAAI,EAAE,QAASD,GAAM,CAC/CD,EAAO,QAAQC,CAAC,CAClB,CAAC,EAEID,EAAO,WAAW,IACrB,KAAK,GAAG,aAAa,IAAIG,GAAgBH,CAAM,CAAC,EAC5CA,EAAO,KAAK,IAAM,OACpB,KAAK,GAAG,aAAa,IAAII,GAAaJ,CAAM,CAAC,GAGjDA,EAAO,cAAc,EAAI,CAC3B,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EChDO,IAAMK,GAAN,KAAiB,CAKtB,YACUC,EACRC,EACA,CAFQ,QAAAD,EAJV,KAAQ,KAAyB,CAAC,EAClC,KAAQ,UAAY,EAMlB,KAAK,OAAS,IAAIE,EAAaC,EAAWF,CAAM,CAAC,CACnD,CAEA,UAAUG,EAAmC,CAC3C,IAAIC,EAAQ,EACZ,KAAO,KAAK,KAAK,OAASD,GAAS,CACjC,GAAIC,EAAQ,IACV,eAAQ,IAAI,iDAAiD,EACtD,KAAK,KAEd,IAAMC,EAAY,KAAK,kBAAkB,EACnCC,EAAQ,KAAK,SAASD,EAAU,IAAI,EACtCC,IAAU,MAERD,EAAU,SAAW,QACvB,KAAK,YAEP,KAAK,KAAK,KAAKC,CAAK,GAEpBF,GAEJ,CACA,OAAO,KAAK,IACd,CAEA,SAASG,EAAwC,CAC/C,IAAMC,EAAO,KAAK,SAAS,EAC3B,GAAI,CAAC,KAAK,GAAG,OAAOA,CAAI,EACtB,OAAO,KAET,QAAWF,KAAS,KAAK,KACvB,GAAI,KAAK,GAAG,cAAcA,EAAM,KAAME,CAAI,EAAI,GAC5C,OAAO,KAGX,OAAO,IAAIC,GACT,IAAIC,GAAWH,QAAyB,KAAM,KAAK,OAAO,OAAO,CAAC,EAClEC,CACF,CACF,CAEQ,mBAGN,CACA,GAAI,KAAK,KAAK,OAAS,GAErB,MAAO,CAAE,KAAM,KAAK,aAAa,EAAG,OAAQ,QAAS,EAGvD,GAAI,KAAK,UAAYG,GAAyB,OAC5C,MAAO,CACL,KAAMA,GAAyB,KAAK,SAAS,EAC7C,OAAQ,MACV,EAEF,IAAMC,EAAgBD,GAAyB,OAC/C,GAAI,KAAK,UAAYC,EAAgBC,GAAuB,OAC1D,MAAO,CACL,KAAMA,GAAuB,KAAK,UAAYD,CAAa,EAC3D,OAAQ,MACV,EAEF,IAAME,EAAeF,EAAgBC,GAAuB,OAC5D,OAAI,KAAK,UAAYC,EAAeC,GAAmB,OAC9C,CACL,KAAM,GAAGA,GAAmB,KAAK,UAAYD,CAAY,CAAC,WAC1D,OAAQ,MACV,EAGK,CAAE,KAAM,KAAK,aAAa,EAAG,OAAQ,QAAS,CACvD,CAEQ,cAAuB,CAE7B,MAAO,OADc,KAAK,OAAO,QAAQ,EAAG,KAAK,CACvB,EAC5B,CAEQ,UAAoB,CAC1B,OAAO,KAAK,GAAG,IACb,KAAK,OAAO,QAAQ,EAAG,KAAK,GAAG,MAAM,CAAC,EACtC,KAAK,OAAO,QAAQ,EAAG,KAAK,GAAG,OAAO,CAAC,CACzC,CACF,CACF,EC7EO,IAAKE,QACVA,IAAA,eACAA,IAAA,eACAA,IAAA,mBACAA,IAAA,+BACAA,IAAA,uCACAA,IAAA,qCACAA,IAAA,+CACAA,IAAA,iCACAA,IAAA,qCACAA,IAAA,yCACAA,IAAA,gCACAA,IAAA,kBACAA,IAAA,cACAA,IAAA,gBACAA,IAAA,gCACAA,IAAA,4BACAA,IAAA,kCACAA,IAAA,kCACAA,IAAA,gCAnBUA,QAAA,ICVZ,IAAMC,GAAN,KAAkD,CAChD,OACEC,EACAC,EACAC,EACM,CACN,IAAMC,EAAeF,EAAQ,KAAK,MAAM,EAClCG,EAAaF,EAAe,MAAM,EAClCG,EAAYL,EAAG,OAAO,EAAE,UAAUM,GAAIF,EAAYD,CAAY,CAAC,EAEjEC,IAAeD,GACjBA,EAAa,QAAQE,EAAWJ,EAAQ,KAAK,CAAC,EAEhDG,EAAW,QAAQC,EAAWJ,EAAQ,KAAK,CAAC,CAC9C,CACF,EAEMM,GAAN,KAAkD,CAChD,YAAoBC,EAAsB,CAAtB,YAAAA,CAAuB,CAC3C,OACER,EACAC,EACAC,EACM,CACN,IAAMC,EAAeF,EAAQ,KAAK,MAAM,EAClCG,EAAaF,EAAe,MAAM,EAClCG,EAAYL,EAAG,OAAO,EAAE,UAAUM,GAAIF,EAAYD,CAAY,CAAC,EAErEC,EAAW,QAAQC,EAAWJ,EAAQ,KAAK,CAAC,EAExCG,IAAeD,GACjBA,EAAa,QAAQE,EAAWJ,EAAQ,KAAK,CAAC,CAElD,CACF,EAEMQ,GAAN,KAAqD,CACnD,OACET,EACAC,EACAC,EACM,CAAC,CACX,EAEO,SAASQ,GACdF,EAC6C,CAC7C,MAAO,CACJ,KAAgB,IAAIT,GACpB,KAAgB,IAAIQ,GAAgBC,CAAM,EAC1C,QAAmB,IAAIC,EAC1B,CACF,CAEO,IAAME,GAAN,KAAmB,CAQxB,YACUX,EACDY,EACP,CAFQ,QAAAZ,EACD,UAAAY,EATT,KAAiB,aACf,CAAC,EAEH,KAAQ,UAA2B,IAAI,IAEvC,KAAQ,mBAAkD,IAAI,IAM5D,KAAK,aAAeF,GAAwB,IAAIG,EAAab,EAAG,MAAM,CAAC,CAAC,CAC1E,CAEA,eAAec,EAA8B,CAC3C,IAAMC,EAAS,KAAK,KAAK,MAAM,EAC/B,OAAOD,IAAgBC,GAAUA,EAAO,SAASD,CAAW,CAC9D,CAEA,gBAAiB,CACf,KAAK,UAAU,MAAM,EACrB,KAAK,mBAAmB,MAAM,CAChC,CAEA,YAAYE,EAAoB,CAC9B,KAAK,UAAU,IAAIA,CAAQ,EAC3B,IAAMC,EAAWD,EAAS,OAAS,KAAOA,EAAS,GAAKA,EAAS,KACjE,KAAK,mBAAmB,IAAIC,EAAUD,CAAQ,CAChD,CAEA,eAAeA,EAAoB,CACjC,KAAK,UAAU,OAAOA,CAAQ,EAC9B,IAAMC,EAAWD,EAAS,OAAS,KAAOA,EAAS,GAAKA,EAAS,KACjE,KAAK,mBAAmB,OAAOC,CAAQ,CACzC,CAEA,uBAAuBhB,EAAuB,CAC5C,IAAMiB,EAAW,CAAC,GAAG,KAAK,SAAS,EAAE,KAClCC,GAAMA,EAAE,OAASlB,GAAWkB,EAAE,KAAOlB,CACxC,EACA,GAAIiB,EAAU,CACZ,IAAME,EAAwBF,EAAS,MAAM,IAAKG,IAAU,CAC1D,KAAAA,EACA,UACF,EAAE,EACF,KAAK,GAAG,UAAU,CAChB,QACA,SAAU,GACV,UAAAD,CACF,CAAC,EACD,KAAK,eAAeF,CAAQ,CAC9B,CACF,CAEA,WAA4B,CAC1B,IAAMI,EAA4B,CAAC,EACnC,QAAW,KAAK,KAAK,UACf,EAAE,OAAS,KACbA,EAAU,KAAK,EAAE,IAAI,EAErBA,EAAU,KAAK,EAAE,EAAE,EAGvB,OAAOA,CACT,CAEA,MAAgB,CACd,OAAO,KAAK,KAAK,KAAK,CACxB,CAEA,UAAoB,CAClB,OAAO,KAAK,KAAK,SAAS,CAC5B,CAEA,cAA8B,CAC5B,OAAO,KAAK,SACd,CAEA,cAAcrB,EAAwC,CACpD,OAAO,KAAK,mBAAmB,IAAIA,CAAO,GAAK,IACjD,CAEA,WAAWsB,EAAyB,CAClC,KAAK,QAAUA,CACjB,CAEA,YAA6B,CAC3B,OAAO,KAAK,OACd,CAEA,YAAYrB,EAAgC,CAC1C,IAAMsB,EAAO,KAAK,KAAK,KAAK,EACtBC,EAAU,KAAK,aAAaD,CAAI,EAClCC,GACFA,EAAQ,OAAO,KAAK,GAAI,KAAMvB,CAAc,CAEhD,CACF,EAKawB,GAAN,KAAmE,CACxE,YAAoBC,EAAY,CAAZ,UAAAA,CAAa,CAEjC,UAAUC,EAAoC,CAC5C,OAAOA,EAAK,UAAU,CACxB,CAEA,KAAKA,EAA4B,CAC/B,MAAO,EACT,CAEA,SAASA,EAA8C,CACrD,MAAO,CAAE,EAAG,KAAK,KAAK,EAAEA,EAAK,KAAK,CAAC,EAAG,EAAG,KAAK,KAAK,EAAEA,EAAK,KAAK,CAAC,CAAE,CACpE,CAEA,cAAcC,EAAoBC,EAA2B,CAC3D,MAAO,EACT,CACF,EAKaC,GAAN,KAAc,CAAd,cACL,KAAO,SAA8B,IAAI,IAEzC,IAAI9B,EAAuB,CACzB,OAAO,KAAK,SAAS,IAAIA,CAAO,CAClC,CAEA,WAAWA,EAAuB,CAChC,KAAK,SAAS,IAAIA,CAAO,EACzBA,EAAQ,WAAW,IAAI,CACzB,CAEA,cAAcA,EAAuB,CACnC,KAAK,SAAS,OAAOA,CAAO,CAC9B,CAEA,YAAY+B,EAA6B,CACvC,QAAW/B,KAAW+B,EACpB,KAAK,WAAW/B,CAAO,CAE3B,CAEA,MAAMgC,EAAgB,CACpB,QAAWC,KAAKD,EAAM,SACpB,KAAK,WAAWC,CAAC,CAErB,CAEA,kBAAkBnB,EAAmC,CACnD,IAAMoB,EAAkB,IAAI,IAC5B,QAAWlC,KAAW,KAAK,UAEtBA,EAAQ,KAAK,KAAK,IAAM,QACvBA,EAAQ,KAAK,KAAK,IAAM,SAC1BA,EAAQ,eAAec,CAAM,GAE7BoB,EAAgB,IAAIlC,CAAO,EAG/B,OAAOkC,CACT,CAEA,MAAO,CACL,OAAO,KAAK,SAAS,IACvB,CAEA,OAAQ,CACN,KAAK,SAAS,MAAM,CACtB,CACF,EAEA,SAAS7B,GACPS,EACAkB,EACoC,CACpC,OAAIlB,IAAWkB,EACN,OAELlB,EAAO,aAAakB,CAAK,EACpB,OAELlB,EAAO,aAAakB,CAAK,EACpB,OAEF,OACT,CCnQO,IAAMG,GAAN,KAAe,CACpB,YACSC,EACAC,EACAC,EACP,CAHO,UAAAF,EACA,QAAAC,EACA,WAAAC,CACN,CAEH,OAAOC,EAAY,CACjB,IAAMC,EAAwB,KAAK,MAAM,IAAKC,IAAU,CACtD,KAAAA,EACA,UACF,EAAE,EACFF,EAAK,UAAU,CACb,QACA,SAAU,GACV,UAAAC,CACF,CAAC,EACD,KAAK,KAAK,eAAe,IAAI,EAC7B,KAAK,GAAG,eAAe,IAAI,CAC7B,CACF,EAEO,SAASE,GACdN,EACAC,EACyB,CACzB,IAAMM,EAAWP,EAAK,cAAcC,CAAE,EACtC,GAAI,CAACM,EAAU,OAAO,KAEtB,IAAMC,EAAUD,EAAS,KAAON,EAChC,OAAO,IAAIQ,GAAiBF,EAAUC,CAAO,CAC/C,CAKO,IAAMC,GAAN,KAAuB,CAE5B,YACUF,EACAC,EACR,CAFQ,cAAAD,EACA,aAAAC,EAHV,KAAQ,MAAmB,CAAC,EAK1B,KAAK,MAAQ,KAAK,QACd,KAAK,SAAS,MACd,CAAC,GAAG,KAAK,SAAS,KAAK,EAAE,QAAQ,CACvC,CAEA,UAAsB,CACpB,OAAO,KAAK,KACd,CAEA,UAAyB,CACvB,OAAO,KAAK,QAAU,KAAK,SAAS,KAAO,KAAK,SAAS,EAC3D,CAEA,QAAuB,CACrB,OAAO,KAAK,QAAU,KAAK,SAAS,GAAK,KAAK,SAAS,IACzD,CACF,EClDO,IAAME,GAAN,KAA0C,CAa/C,YACUC,EACAC,EACAC,EACAC,EACAC,EACR,CALQ,iBAAAJ,EACA,YAAAC,EACA,YAAAC,EACA,iBAAAC,EACA,aAAAC,EAjBV,KAAQ,OAAS,GACjB,KAAQ,GAAkB,KAC1B,KAAQ,MAAqB,KAC7B,KAAQ,KAAe,CAAC,EACxB,KAAQ,SAAoB,GAC5B,KAAQ,YAAsB,EAC9B,KAAQ,QAAU,EAClB,KAAQ,UAAuB,CAAC,EAChC,KAAQ,SAA2B,CAAC,EACpC,KAAQ,gBAA2C,KACnD,KAAQ,MAAgB,CAQrB,CAEI,OAAgB,CACrB,OAAO,KAAK,MACd,CAEA,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,EACV,IAAME,EAAW,KAAK,YAAY,iBAChC,KAAK,OACL,KAAK,WACP,EACA,GAAI,CAACA,GAAYA,EAAS,QAAU,EAAG,CACrC,KAAK,OAAS,GACd,MACF,CAEA,KAAK,SAAWA,EAChB,IAAMC,EAAWC,GAAoB,KAAK,SAAS,CAAC,EAAG,KAAK,SAAS,CAAC,CAAC,EACvE,GAAID,EACF,KAAK,gBAAkBA,MAClB,CACL,KAAK,OAAS,GACd,MACF,CAEA,IAAME,EAAQ,KAAK,OAAO,iBAAyB,KAAK,SAAS,CAAC,EAAE,KAAK,CAAC,EAC1E,GAAIA,IAAU,GAAO,CACnB,QAAQ,KAAK,oBAAoB,EACjC,KAAK,OAAS,GACd,MACF,CACA,KAAK,MAAQ,KAAK,iBAAiBA,CAAK,CAC1C,CAEA,KAAKJ,EAAqB,CACxB,GAAI,KAAK,QAAU,KACjB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,GAAI,CAAC,KAAK,MAAM,SAAS,GAAK,CAAC,KAAK,0BAA0B,EAAG,CAC/D,KAAK,YAAY,EACjB,MACF,CAEA,IAAMK,EAAO,KAAK,YAAY,EAC1BA,EACF,KAAK,oBAAoBA,CAAI,GAE7B,KAAK,cAAc,EACnB,KAAK,YAAY,EAErB,CAEA,WAAY,CACV,GAAI,OAAK,UAAY,KAAK,QAAU,MAGpC,MAAK,SAAW,GAEhB,QAASC,EAAI,EAAGA,EAAI,KAAK,KAAK,OAAQA,IACpC,KAAK,KAAKA,CAAC,EAAE,UAAU,EAAI,EAE/B,CAEQ,eAAgB,CAClB,KAAK,QAAU,OAGnB,KAAK,MAAM,iBAAiB,EAC5B,KAAK,KAAK,QAASC,GAAc,CAC/BA,EAAI,iBAAiB,CACvB,CAAC,EACH,CAEQ,iBAAiBF,EAAqB,CAC5C,IAAMG,EAAQ,KAAK,OAAO,kBAA0BH,EAAM,CACxD,WAAY,KAAK,YAAY,KAC7B,kBACF,CAAC,EAED,KAAK,KAAK,KACR,KAAK,OAAO,kBAA0BA,EAAM,CAC1C,WAAY,KAAK,YAAY,KAC7B,kBACF,CAAC,CACH,EACA,QAAS,EAAI,EAAG,EAAI,KAAK,QAAS,IAChC,KAAK,KAAK,KACR,KAAK,OAAO,kBAA0BA,EAAM,CAC1C,qBACA,OAAQ,KAAK,QACf,CAAC,CACH,EAEF,OAAOG,CACT,CAEQ,aAAc,CACpB,KAAK,OAAS,GACV,KAAK,OAAO,SAAS,GACvB,KAAK,MAAM,OAAO,EAAK,EAEzB,QAAWD,KAAO,KAAK,KACjBA,EAAI,SAAS,GACfA,EAAI,OAAO,EAAK,CAGtB,CAEQ,2BAAqC,CAC3C,OACE,KAAK,SAAS,OAAS,GACvB,KAAK,SAAS,CAAC,EAAE,SAAS,GAC1B,KAAK,SAAS,CAAC,EAAE,SAAS,CAE9B,CAMQ,mBAAmBE,EAAcC,EAAe,CACtD,GAAI,CAAC,KAAK,gBACR,OAEF,IAAIC,EAAqBF,EACzB,QACMH,EAAI,EACRA,EAAII,GAASC,EAAa,KAAK,gBAAgB,SAAS,EAAE,OAC1DL,IAEA,KAAK,SAAS,KAAK,gBAAgB,SAAS,EAAEK,CAAU,CAAC,EACzDA,EAAaA,EAAa,CAE9B,CAEQ,SAASN,EAAe,CAC9B,KAAK,UAAU,KAAKA,CAAI,EACpB,KAAK,UAAU,OAAS,KAAK,KAAK,OAAS,KAAK,QAAU,GAC5D,KAAK,UAAU,MAAM,CAEzB,CAEQ,oBAAoBO,EAAkB,CAC5C,GAAI,KAAK,KAAK,OAAS,EACrB,QAASN,EAAI,KAAK,KAAK,OAAS,EAAGA,GAAK,EAAG,EAAEA,EAAG,CAC9C,IAAMO,GAAgBP,EAAI,GAAK,KAAK,QAAU,EAC1C,KAAK,UAAU,OAASO,GAC1B,KAAK,KAAKP,CAAC,EAAE,KAAK,KAAK,UAAUO,CAAY,CAAC,CAElD,CAEE,KAAK,QAAU,MACjB,KAAK,MAAM,KAAKD,CAAO,CAE3B,CAEQ,aAAc,CACpB,GAAI,KAAK,SAAS,OAAS,EAAG,CAC5B,KAAK,SAAS,MAAM,EACpB,IAAME,EAAWX,GAAoB,KAAK,SAAS,CAAC,EAAG,KAAK,SAAS,CAAC,CAAC,EACvE,GAAIW,EACF,YAAK,gBAAkBA,EAChB,EAEX,CACA,MAAO,EACT,CAEQ,yBAA0B,CAChC,OACE,KAAK,SAAS,OAAS,GAAK,KAAK,SAAS,CAAC,EAAE,eAAe,KAAK,MAAM,CAE3E,CAEQ,aAA8B,CACpC,GAAI,KAAK,kBAAoB,MAAQ,CAAC,KAAK,wBAAwB,EACjE,OAAO,KAET,KAAK,mBAAmB,KAAK,YAAa,KAAK,KAAK,EACpD,KAAK,YAAc,KAAK,YAAc,KAAK,MAC3C,IAAMC,EAAW,KAAK,YAAc,KAAK,gBAAgB,SAAS,EAAE,OACpE,GAAIA,GAAY,EAAG,CAGjB,GADA,KAAK,eAAe,EAChB,CAAC,KAAK,YAAY,EACpB,OAAO,KAET,KAAK,YAAcA,EACnB,KAAK,mBAAmB,EAAGA,CAAQ,CACrC,CACA,OAAO,KAAK,gBAAgB,SAAS,EAAE,KAAK,WAAW,CACzD,CAEQ,gBAAiB,CACvB,GAAI,KAAK,KAAO,MAAQ,KAAK,SAAW,KACtC,MAAM,IAAI,MAAM,iBAAiB,EAEnC,KAAK,SAAS,CAAC,EAAE,YAAY,IAAI,CAEnC,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EC5OO,IAAMC,GAAN,KAAiD,CAQtD,YACUC,EACAC,EACR,CAFQ,UAAAD,EACA,iBAAAC,EARV,KAAQ,OAAkB,GAE1B,KAAQ,QAA+B,KACvC,KAAQ,QAAkB,EAC1B,KAAQ,cAAwB,EAChC,KAAQ,cAAwB,GAK9B,KAAK,KAAK,gBAAgB,EAAI,CAChC,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,EACN,KAAK,cACP,KAAK,OAAS,IAAIE,EAAaF,EAAG,MAAM,CAAC,EAE7C,CAEA,KAAKC,EAAqB,CACxB,GAAI,KAAK,KAAO,OACd,MAAM,IAAI,MAAM,iBAAiB,EAEnC,GAAI,GAAC,KAAK,SAAS,GAAK,KAAK,OAAS,QAQtC,IALI,KAAK,UAAY,OAEnB,KAAK,QAAU,IAAIE,GAAa,KAAK,GAAI,KAAK,IAAI,EAClD,KAAK,GAAG,YAAY,EAAE,eAAe,KAAK,OAAO,GAE/C,CAAC,KAAK,QAAQ,SAAS,EAAG,CAC5B,KAAK,OAAS,GACd,MACF,CACA,KAAK,WAAW,KAAK,QAASF,CAAK,EACrC,CAEQ,kBAA4B,CAClC,IAAMG,EAAY,KAAK,GACpB,OAAO,EACP,eAAe,KAAK,KAAK,MAAM,EAAE,mBAA0B,CAAC,EAC/D,QAASC,EAAI,EAAGA,EAAI,KAAK,KAAM,MAAM,EAAGA,IACtC,GAAI,KAAK,OAAO,OAAOD,CAAS,EAC9B,MAAO,GAGX,MAAO,EACT,CAEQ,WAAWE,EAAuBC,EAAqB,CAC7D,GAAI,KAAK,KAAO,OAAW,MAAM,IAAI,MAAM,iBAAiB,EAC5D,GAAI,CAAC,KAAK,YAAa,OACvB,GAAI,KAAK,SAAW,OAAW,MAAM,IAAI,MAAM,iBAAiB,EAChE,GAAIA,EAAc,KAAK,cAAgB,KAAK,cAAe,OAC3D,IAAMC,EAAUF,EAAQ,WAAW,EACnC,GAAIE,IAAY,KACd,OAEF,IAAMC,EAAoBD,EAAQ,kBAAkB,KAAK,KAAK,MAAM,CAAC,EAIrE,GAHIC,EAAkB,OAAS,GAG3B,CAAC,KAAK,iBAAiB,EACzB,OAKF,IAAMC,EACJ,KAAK,OAAO,YAAYD,CAAiB,EACvCC,IAAgBJ,IAClB,KAAK,GAAG,aACN,IAAIK,GACF,KAAK,GAAG,YAAY,EACpB,KAAK,KAAK,MAAM,EAChBL,EACAI,EACA,KAAK,OACP,CACF,EACA,KAAK,cAAgBH,EAEzB,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECjGO,IAAMK,GAAN,KAAyC,CAK9C,YAAoBC,EAAY,CAAZ,UAAAA,EAHpB,KAAQ,OAAkB,GAC1B,KAAQ,eAAiB,EAEQ,CAEjC,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,CACZ,CAEA,KAAKC,EAAqB,CAKxB,GAJK,KAAK,iBACR,KAAK,cAAc,EACnB,KAAK,eAAiB,IAEpB,CAAC,KAAK,KAAK,SAAS,EAAG,CACzB,KAAK,OAAS,GACd,MACF,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEQ,eAAsB,CACN,KAAK,GAAG,cAC5B,KAAK,KAAK,KAAK,EACf,KAAK,GAAG,OAAO,EAAE,qBAAqB,WAExC,GAEE,KAAK,GAAG,aAAa,IAAIC,GAAsB,KAAK,IAAI,CAAC,CAE7D,CACF,ECtCO,IAAMC,GAAN,KAA0C,CAQ/C,YACUC,EACAC,EACAC,EACAC,EACR,CAJQ,WAAAH,EACA,YAAAC,EACA,eAAAC,EACA,YAAAC,EAXV,KAAQ,OAAS,GAIjB,KAAQ,cAAwB,EAQ7B,CAEH,KAAKC,EAAUC,EAAqB,CAClC,KAAK,WAAa,IAAIC,GAAcF,EAAI,IAAIG,EAAaH,EAAG,MAAM,CAAC,CAAC,EACpE,KAAK,GAAKA,EACV,KAAK,OAAS,IAAIG,EAAaH,EAAG,MAAM,CAAC,CAC3C,CAEA,KAAKC,EAAqB,CAExB,GADA,KAAK,QAAL,KAAK,MAAU,KAAK,OAAO,kBAA0B,KAAK,MAAO,CAAC,CAAC,GAC/D,CAAC,KAAK,MAAM,SAAS,EAAG,CAC1B,KAAK,OAAS,GACd,MACF,CACA,GACE,CAAC,KAAK,OAAO,SAAS,GACtB,KAAK,OAAO,MAAM,IAAM,KAAK,MAAM,MAAM,GACxC,KAAK,gBAAkB,IAAM,KAAK,GAAG,MAAM,GAAK,KAAK,cACtD,CACA,KAAK,MAAM,OAAO,EAAK,EACvB,KAAK,OAAS,GACd,MACF,CAEI,KAAK,gBAAkB,IAAM,CAAC,KAAK,UAAU,SAAS,IACxD,KAAK,cAAgB,KAAK,GAAG,MAAM,EAAI,KAAK,GAAG,OAAO,EAAE,cAAc,GAGxE,QAASG,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMC,EAAS,KAAK,WAAW,SAC7B,KAAK,MAAM,KAAK,EAChB,KAAK,OAAO,KAAK,CACnB,EACA,GAAIA,IAAW,GAAM,CACnB,KAAK,OAAS,GACd,KAAK,OAAO,aAAa,CAAC,KAAK,eAAe,EAAG,KAAK,MAAM,EAC5D,KAAK,MAAM,iBAAiB,EAC5B,KAAK,MAAM,OAAO,EAAK,EACvB,MACF,MACE,KAAK,MAAM,KAAKA,CAAM,CAE1B,CACF,CAEQ,gBAAyB,CAC/B,GAAM,CAAE,OAAAC,CAAO,EAAI,KAAK,GAAG,OAAO,EAAE,gBAAuB,EACrDC,EAAaD,GAAU,IAGvBE,GADO,KAAK,OAAO,QAAQ,EAAG,CAAC,EACJ,GAAK,GAAK,IAE3C,OAAO,KAAK,MAAOD,EAAa,IAAOC,CAAgB,CACzD,CAEO,6BAAsC,CAC3C,OAAO,KAAK,eAAe,CAC7B,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CACA,wBAAkC,CAChC,MAAO,EACT,CACF,EChFO,IAAMC,GAAN,KAAgD,CASrD,YAAoBC,EAAY,CAAZ,UAAAA,EAPpB,KAAQ,OAAkB,GAE1B,KAAQ,OAAsB,KAC9B,KAAQ,gBAAkB,EAE1B,KAAQ,iBAAmB,IAAI,GAEE,CAEjC,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,CACZ,CAEQ,OAAQ,CACd,GAAI,KAAK,SAAW,KAAM,OAC1B,IAAME,EAAkB,KAAK,GAAG,OAAO,EAAE,2BAA2B,EACpE,GAAI,KAAK,GAAG,MAAM,EAAI,KAAK,gBAAkBA,IAC3C,KAAK,gBAAkB,KAAK,GAAG,MAAM,EACrC,KAAK,GAAG,aACN,IAAIC,GACF,KAAK,KAAK,KAAK,EACf,KAAK,KAAK,MAAM,EAChB,KAAK,KACL,KAAK,MACP,CACF,EACI,CAAC,KAAK,OAAO,UAAU,GAAG,CAE5B,KAAK,iBAAiB,IAAI,KAAK,MAAM,EACrC,KAAK,OAAS,KACd,MACF,CAEJ,CAEA,KAAKF,EAAqB,CACxB,GAAI,CAAC,KAAK,KAAK,SAAS,EAAG,CACzB,KAAK,OAAS,GACd,MACF,CAGI,KAAK,KAAK,oBAAoB,GAI9B,KAAK,SAAW,MAAQ,CAAC,KAAK,OAAO,SAAS,IAChD,KAAK,OAAS,KA8ClB,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECxGO,IAAMG,GAAN,KAA4C,CAKjD,YAAoBC,EAAe,CAAf,aAAAA,EAJpB,KAAQ,OAAkB,GAE1B,KAAQ,eAAiB,EAEW,CAEpC,KAAKC,EAAUC,EAAqB,CAClC,KAAK,KAAOD,CACd,CAEA,KAAKC,EAAqB,CAKxB,GAJK,KAAK,iBACR,KAAK,cAAc,EACnB,KAAK,eAAiB,IAEpB,CAAC,KAAK,QAAQ,SAAS,EAAG,CAC5B,KAAK,OAAS,GACd,MACF,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEQ,eAAsB,CAC5B,IAAMC,EAAa,KAAK,KAAK,YAC3B,KAAK,QAAQ,KAAK,EAClB,KAAK,KAAK,OAAO,EAAE,qBAAqB,EACxC,wBAA+C,CACjD,EAEA,KAAK,KAAK,aAAa,IAAIC,GAAsB,KAAK,QAAS,EAAI,CAAC,EACpE,OAAW,CAAE,KAAAC,CAAK,IAAKF,EAChBE,EAAK,gBAAgB,GACxB,KAAK,KAAK,aAAa,IAAID,GAAsBC,CAAI,CAAC,CAG5D,CACF,EC/BA,IAAMC,GAAgB,GAETC,GAAN,KAAyC,CAO9C,YACUC,EACAC,EACAC,EACAC,EACAC,EAAgB,GAChBC,EAAY,EACpB,CANQ,cAAAL,EACA,YAAAC,EACA,SAAAC,EACA,SAAAC,EACA,WAAAC,EACA,eAAAC,EAZV,KAAQ,OAAS,GAEjB,KAAQ,KAAoB,IAWzB,CAEH,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,EACN,KAAK,QAAU,KACjB,KAAK,MAAQ,KAAK,GAAG,OAAO,EAAE,iBAAiB,GAEjD,KAAK,WAAa,IAAIE,GAAmBF,CAAE,CAC7C,CAEO,QAAgC,CACrC,OAAO,KAAK,GAAG,MAAM,KAAK,GAAG,CAC/B,CAEQ,gBAA+B,CACrC,GAAI,KAAK,sBAAwB,OAC/B,OAAO,KAAK,oBAEd,GAAI,KAAK,OAAS,KAChB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,IAAMG,EAAY,KAAK,GAAG,OAAO,EAAE,eAAe,KAAK,KAAK,KAAK,CAAC,EAC5DC,EAAO,IAAIC,EAAa,KAAK,GAAG,MAAM,CAAC,EACvCC,EAASH,EAAU,MAAQA,EAAU,MACrCI,EAASJ,EAAU,MAAQA,EAAU,MAC3C,YAAK,oBAAsB,KAAK,GAAG,IAAI,KAAK,IAAK,CAACK,EAAGC,IAAe,CAClE,IAAMC,EAAK,KAAK,IAAI,qBAAqB,KAAK,IAAKD,CAAC,GAAK,EACzD,OAAOC,GAAMH,IAAWG,GAAMJ,GAAUF,EAAK,OAAO,CAAC,EACvD,CAAC,EACM,KAAK,mBACd,CAEQ,oBAAoBO,EAAyB,CACnD,GAAI,KAAK,OAAS,KAChB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,IAAMC,EAAW,IAAI,IACrB,QAAWC,KAAQF,EAAW,CAC5B,IAAMG,EAAQ,KAAK,GAAG,MAAMD,CAAI,EAChC,GAAIC,EAAM,SAAS,EAAG,CACpB,IAAMC,EAAOH,EAAS,IAAIE,CAAK,GAAK,EACpCF,EAAS,IAAIE,EAAOC,EAAO,CAAC,CAC9B,CACF,CAEA,IAAMC,EAAY,KAAK,GAAG,OAAO,EAAE,2BAA2B,EAC9D,OAAW,CAACC,EAAgBC,CAAc,IAAKN,EAC7C,GACEM,EAAiBF,GACjB,KAAK,KAAK,KAAK,IAAM,eACrB,CAGA,IAAMG,EAAkBF,EACrB,yBAAyB,EACzB,KAAMG,GAAOA,EAAG,UAAU,IAAM,KAAK,MAAM,EAC1CD,GACFA,GAAiB,OAAO,EAG1B,IAAME,EAAW,KAAK,OAAO,aAAaJ,CAAc,EACpDI,IAAa,MACf,KAAK,OAAO,cAAcA,CAAQ,EAEhCJ,IAAmB,KAAK,QAC1BA,EAAe,eAAe,KAAK,OAAQ,IAAI,CAEnD,CAEJ,CAEA,KAAKhB,EAAqB,CACxB,GAAI,KAAK,OAAS,KAAM,CACtB,IAAMqB,EAAQ,KAAK,OAAO,SAAS,KAAK,SAAU,KAAK,GAAG,EAC1D,GAAIA,IAAU,GAAO,CACnB,QAAQ,KAAK,mBAAmB,EAChC,KAAK,OAAS,GACd,MACF,CAaA,GAZA,KAAK,IAAMA,EACX,KAAK,WAAW,qBACdA,EACA,KAAK,IACL,KAAK,MACL,KAAK,WAAa,cACpB,EACA,KAAK,KAAO,KAAK,OAAO,UAAU,KAAK,SAAUA,EAAO,CACtD,WAAY,KAAK,IACjB,WAAY,KAAK,cAAc,KAAK,GAAG,CACzC,CAAC,EACD,KAAK,oBAAoB,KAAK,eAAe,CAAC,EAC1C,KAAK,GAAG,SAAS,KAAK,GAAG,EAAG,CAC9B,IAAMC,EAAS,KAAK,GAAG,MAAM,KAAK,GAAG,EAChCA,EAAO,SAAS,IAEV,KAAK,WAAa,YAC3B,KAAK,GAAG,oBACN,KAAK,KAAK,GAAG,EAEb,GAAG,KAAK,OAAO,KAAK,CAAC,yBAErBA,EAAO,GAAG,CACZ,EACS,KAAK,WAAa,iBAC3B,KAAK,GAAG,oBACN,KAAK,KAAK,GAAG,EAEb,GAAG,KAAK,OAAO,KAAK,CAAC,6BAErBA,EAAO,GAAG,CACZ,GAIF,KAAK,GAAG,MAAM,EAAE,WAAW,KAAK,OAAQA,EAAQ,KAAK,QAAQ,CAC/D,CAGA,IAAMC,EAAO,KAAK,OACf,oBAA0B,EAC1B,KAAMA,GAASA,EAAK,KAAK,IAAMF,CAAK,EACnCE,GACFA,EAAK,OAAO,EAEd,MACF,CAGA,GAAI,CAAC,KAAK,KAAK,SAAS,EAAG,CACzB,QAAQ,IAAI,uCAAuC,EACnD,KAAK,OAAS,GACd,MACF,CAEA,GAAI,KAAK,UAAY,EAAG,CACtB,KAAK,YACL,MACF,CAGA,IAAMC,EAAW,KAAK,WAAW,SAAS,KAAK,KAAK,EACpD,GAAIA,IAAa,GAAM,CACrB,KAAK,SAAS,EACd,MACF,MACE,KAAK,qBAAqB,EAC1B,KAAK,KAAK,KAAKA,CAAQ,EAEvB,KAAK,KAAK,mBAAmB,KAAK,WAAW,aAAa,CAAC,CAE/D,CAEO,SAAuB,CAC5B,OAAO,KAAK,IACd,CAEQ,cAAcF,EAAmC,CACvD,IAAMG,EAAoC,CAAC,EACrCC,EACJ,KAAK,GAAG,OAAO,EAAE,2BAA2B,GAAK,EAC7CC,EAAsB,KAAK,WAAW,SAAS,EACrD,QAAWf,KAAQe,EACjBF,EAAgB,KAAK,CACnB,KAAAb,EACA,WAAY,KAAK,aAAaU,EAAQV,EAAMc,CAAkB,CAChE,CAAC,EAGH,OAAOD,CACT,CAEQ,aACNG,EACAC,EACAH,EACS,CACT,OACE,KAAK,GAAG,qBAAqBG,EAAUD,CAAU,EAAIF,GACpD,KAAK,MAAQ,QACZ,KAAK,MAAQ,MACb,KAAK,GAAG,qBAAqB,KAAK,IAAKG,CAAQ,EAAIH,CAEzD,CAEQ,sBAAuB,CAC7B,GAAI,KAAK,OAAS,MAAQ,KAAK,KAAK,WAAW,IAAM,OACnD,OAEF,IAAMA,EACJ,KAAK,GAAG,OAAO,EAAE,2BAA2B,GAAK,EAC7CE,EAAa,KAAK,KAAK,WAAW,EACxC,KAAK,KAAK,cACR,KAAK,aAAaA,EAAa,KAAK,KAAK,KAAK,EAAGF,CAAkB,CACrE,CACF,CAEQ,UAAW,CACjB,GAAI,KAAK,OAAS,KAChB,MAAM,IAAI,MAAM,iBAAiB,EAGnC,IAAMxB,EAAY,KAAK,GAAG,OAAO,EAAE,eAAe,KAAK,KAAK,KAAK,CAAC,EAC5DQ,EAAY,KAAK,eAAe,EACtC,KAAK,oBAAoBA,CAAS,EAElC,IAAMoB,EAAY,KAAK,OAAO,EAAE,SAAS,EACrC,KAAK,GAAG,OAAO,EAAE,UAAU,KAAK,OAAO,CAAW,EAClD,EAEJ,QAAWlB,KAAQF,EAAW,CAC5B,IAAMG,EAAQ,KAAK,GAAG,MAAMD,CAAI,EAC5BC,EAAM,SAAS,IACjBA,EAAM,WAAWD,CAAI,EACrBC,EAAM,aACJ,KAAK,GACF,OAAO,EACP,gBACC,KAAK,SACLA,EAAM,OAAO,EACbA,EAAM,cAAc,EACpBiB,CACF,CACJ,EACAjB,EAAM,gBAAgB,EAAE,QAASkB,GAAW,CAC1C,IAAMC,EACJ,KAAK,IACD,OAAO,EACR,gBACC,KAAK,SACLD,EAAO,OAAO,EACdlB,EAAM,cAAc,EACpBiB,CACF,GAAK,EACTC,EAAO,UAAUA,EAAO,OAAO,EAAIC,CAAM,CAC3C,CAAC,EACDnB,EAAM,iBAA4B,EAAE,QAASkB,GAAW,CACtD,IAAMC,EACJ,KAAK,IACD,OAAO,EACR,gBACC,KAAK,SACLD,EAAO,OAAO,EACdlB,EAAM,cAAc,EACpBiB,CACF,GAAK,EACTC,EAAO,UAAUA,EAAO,OAAO,EAAIC,CAAM,CAC3C,CAAC,GAGC,KAAK,GAAG,OAAOpB,CAAI,GACrB,KAAK,GAAG,WAAWA,EAAM,EAAI,CAEjC,CAEA,IAAMN,EAASJ,EAAU,MAAQA,EAAU,MAC3C,QAAW+B,KAAQ,KAAK,GAAG,MAAM,EAE7BA,EAAK,KAAK,IAAM,aAChBA,EAAK,KAAK,IAAM,iBAChBA,EAAK,KAAK,IAAM,gBAChBA,EAAK,KAAK,IAAM,QAEZ,KAAK,GAAG,qBAAqB,KAAK,IAAKA,EAAK,KAAK,CAAC,EAAI3B,GACxD2B,EAAK,OAAO,GAAM,KAAK,MAAM,EAKnC,KAAK,gBAAgB/B,EAAU,MAAQX,EAAa,EACpD,KAAK,OAAS,GACd,KAAK,KAAK,iBAAiB,EAC3B,KAAK,KAAK,OAAO,EAAK,EAGtB,KAAK,GACF,MAAM,EACN,SAAS,KAAK,OAAQ,KAAK,OAAO,EAAG,KAAK,KAAK,KAAK,CAAa,CACtE,CAEQ,gBAAgB2C,EAAe,CACrC,IAAMC,EAAeD,EAAQA,EAC7B,QAAWD,KAAQ,KAAK,GAAG,MAAM,EAC3BG,GAAgBH,EAAK,KAAK,CAAC,GAE3B,KAAK,GAAG,qBAAqB,KAAK,IAAKA,EAAK,KAAK,CAAC,EAAIE,GAEtDF,EAAK,MAAM,CAInB,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EChUO,IAAMI,GAAN,KAAyC,CAoB9C,YACUC,EACAC,EACR,CAFQ,YAAAD,EACA,SAAAC,EArBV,KAAQ,OAAS,GAIjB,KAAQ,KAAoB,KAE5B,KAAQ,UAAY,KACpB,KAAQ,aAAe,IAUvB,KAAQ,MAAgB,EAKrB,CAEH,KAAKC,EAAUC,EAAqB,CAQlC,GAPA,KAAK,OAAS,IAAIC,EAAaF,EAAG,MAAM,EAAIG,EAAW,KAAK,OAAO,GAAG,CAAC,CAAC,EACxE,KAAK,GAAKH,EACV,KAAK,WAAa,IAAII,GAAmBJ,CAAE,EAC3C,KAAK,aAAe,KAAK,GAAG,MAAM,KAAK,GAAG,EAC1C,KAAK,MAAQ,KAAK,GAAG,OAAO,EAAE,iBAAiB,EAG3C,KAAK,aAAa,SAAS,EAAG,CAChC,IAAMK,EAAW,KAAK,OAAO,aAAa,KAAK,YAAY,EACvDA,IAAa,MACf,KAAK,OAAO,cAAcA,CAAQ,EAEhC,KAAK,eAAiB,KAAK,QAC7B,KAAK,aAAa,eAAe,KAAK,OAAQ,IAAI,CAEtD,CACF,CAEA,KAAKJ,EAAqB,CACxB,GAAI,KAAK,OAAS,KAAM,CACtB,IAAMK,EAAQ,KAAK,OAAO,gBAAwB,KAAK,GAAG,EAC1D,GAAIA,IAAU,GAAO,CACnB,QAAQ,KAAK,mBAAmB,EAChC,KAAK,OAAS,GACd,MACF,CACA,KAAK,KAAO,KAAK,OAAO,iBAAyBA,EAAO,CACtD,WAAY,KAAK,GACnB,CAAC,EACD,KAAK,GAAG,MAAM,EAAE,WAAW,KAAK,OAAQ,KAAK,mBAA2B,EACxE,IAAMC,EAAI,KAAK,OACZ,KAAK,GAAG,EAAE,KAAK,GAAG,EAAI,KAAK,GAAG,EAAE,KAAK,GAAG,EAAE,KAAK,KAAK,KAAK,CAAC,CAAC,GAAK,CACnE,EACMC,EAAI,KAAK,IAAI,EAAG,KAAK,GAAG,EAAE,KAAK,GAAG,EAAI,GAAG,EAAI,GACnD,KAAK,YAAc,KAAK,GAAG,IAAID,EAAGC,CAAC,EACnC,KAAK,WAAW,qBAAqBF,EAAO,KAAK,WAAW,EAE5D,KAAK,GAAG,oBACN,KAAK,KAAK,GAAG,EAEb,wCAAU,KAAK,OAAO,KAAK,CAAC,yDAE5B,KAAK,aAAa,GAAG,CACvB,CACF,CAEA,IAAMG,EAAS,KAAK,WAAW,SAAS,KAAK,KAAK,EAClD,GAAIA,IAAW,GAAM,CACnB,KAAK,SAAS,EACd,KAAK,OAAS,GAEd,KAAK,GAAG,MAAM,EAAE,SAAS,KAAK,OAAQ,KAAK,mBAA2B,EACtE,MACF,MACE,KAAK,KAAK,KAAKA,CAAM,CAEzB,CAEQ,UAAW,CACjB,GAAI,KAAK,OAAS,KAAM,MAAM,IAAI,MAAM,eAAe,EACvD,IAAMC,EAAkB,CAAC,KAAK,GAAG,EAC7BC,EAAW,IACf,KAAOA,EAAW,GAAKD,EAAK,OAAS,KAAK,cAAc,CACtDC,IACA,IAAMC,EAAY,KAAK,WAAW,KAAK,IAAKF,CAAI,EAC5CE,IAAc,MAGlBF,EAAK,KAAKE,CAAS,CACrB,CACA,QAAQ,IAAI,SAASF,EAAK,MAAM,EAAE,EAClCA,EAAK,KACH,CAACG,EAAGC,IACF,KAAK,GAAG,cAAcA,EAAG,KAAK,GAAG,EAAI,KAAK,GAAG,cAAcD,EAAG,KAAK,GAAG,CAC1E,EACA,QAAQ,IAAI,OAAOH,EAAK,MAAM,SAAS,EAEvC,OAAW,CAAC,EAAGX,CAAG,IAAKW,EAAK,QAAQ,EAClC,KAAK,GAAG,aACN,IAAIK,kBAEF,KAAK,OACLhB,EACA,KAAK,KAAK,KAAK,EACf,GAAK,KAAK,MAAO,EAAI,KAAK,aAAgB,CAAC,EAE3C,KAAK,OAAO,QAAQ,EAAG,EAAE,CAC3B,CACF,EAEF,KAAK,KAAK,OAAO,EAAK,CACxB,CAEA,WAAWiB,EAAcC,EAAkC,CACzD,IAAIC,EAAQ,EACNC,EAAa,KAAK,UAAY,KAAK,UACzC,KAAOD,EAAQ,KAAK,CAClBA,IACA,IAAMX,EAAI,KAAK,OAAO,QACpB,KAAK,GAAG,EAAES,CAAG,EAAI,KAAK,UACtB,KAAK,GAAG,EAAEA,CAAG,EAAI,KAAK,SACxB,EACMR,EAAI,KAAK,OAAO,QACpB,KAAK,GAAG,EAAEQ,CAAG,EAAI,KAAK,UACtB,KAAK,GAAG,EAAEA,CAAG,EAAI,KAAK,SACxB,EACA,GAAI,CAAC,KAAK,GAAG,aAAaT,EAAGC,CAAC,EAC5B,SAEF,IAAMY,EAAO,KAAK,GAAG,IAAIb,EAAGC,CAAC,EAC7B,GAAK,KAAK,GAAG,OAAOY,CAAI,GAGpB,OAAK,GAAG,qBAAqBA,EAAMJ,CAAG,EAAIG,IAG1C,KAAK,GAAG,MAAMC,CAAI,IAAM,KAAK,cAG7B,MAAK,eAAeA,EAAMH,CAAK,EAGnC,OAAOG,CACT,CACA,eAAQ,IAAI,gCAAgC,EACrC,IACT,CAEQ,eAAeA,EAAeH,EAA2B,CAC/D,QAAWI,KAAKJ,EACd,GAAI,KAAK,GAAG,cAAcG,EAAMC,CAAC,EAAI,GACnC,MAAO,GAGX,MAAO,EACT,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EC3LO,IAAMC,GAAN,KAAgD,CAKrD,YAAYC,EAAY,CAJxB,KAAQ,OAAS,GAKf,KAAK,KAAOA,CACd,CAEA,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,CACZ,CAEA,KAAKC,EAAqB,CACxB,GAAI,KAAK,KAAK,oBAAoB,EAChC,OAIF,IAAMC,EAAY,KAAK,KAAK,kBAAkB,EAAE,CAAC,EACjD,GAAIA,IAAc,OAChB,OAIA,KAAK,GAAG,OAAO,EAAE,aAAa,GAAK,KAAK,GAAG,MAAM,EAAIA,IAEvC,GACd,KAAK,KAAK,cAAc,CAE5B,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EC3BO,IAAMC,GAAN,KAA8C,CAQnD,YACUC,EACAC,EACAC,EACR,CAHQ,eAAAF,EACA,aAAAC,EACA,cAAAC,EAVV,KAAQ,OAAS,GAGjB,KAAQ,YAAc,GAEtB,KAAQ,cAAgB,CAMrB,CAEH,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,EACV,KAAK,WAAaE,GAAW,KAAKF,EAAI,IAAI,CAC5C,CAEA,KAAKC,EAAqB,CACxB,GAAI,KAAK,YAAc,OAAW,CAChC,IAAME,EAAQ,KAAK,UAAU,sBAE3B,KAAK,QAAQ,KAAK,CACpB,EACA,GAAIA,IAAU,GAAO,CACnB,QAAQ,KAAK,yBAAyB,EACtC,KAAK,OAAS,GACd,MACF,CACA,KAAK,UAAY,KAAK,UAAU,uBAA8BA,EAAO,CACnE,WAAY,KAAK,SACjB,uBAAwBF,CAC1B,CAAC,EACD,KAAK,GAAG,MAAM,EAAE,cAAc,KAAK,UAAW,KAAK,SAAS,MAAM,CAAC,CACrE,CAEA,GAAI,CAAC,KAAK,UAAU,SAAS,EAAG,CAC9B,KAAK,OAAS,GACd,MACF,CAEA,IAAMG,EAAiB,KAAK,UAAU,MAAM,EACtCC,EAAe,KAAK,SAAS,MAAM,EAQzC,GAPI,KAAK,cAAgB,IAAQ,KAAK,YAAcD,IAElD,KAAK,YAAc,IAKjBC,EAAa,GAAG,IAAM,KAAK,QAAQ,MAAM,EAAE,GAAG,EAAG,CACnD,KAAK,UAAU,OAAO,EAAK,EAC3B,KAAK,OAAS,GACd,MACF,CAEA,GACE,CAAC,KAAK,cACL,CAAC,KAAK,SAAS,SAAS,GAAK,CAACD,EAAe,SAASC,CAAY,GACnE,CACA,KAAK,UAAU,OAAO,EAAK,EAC3B,KAAK,OAAS,GACd,MACF,CAEA,GACE,KAAK,cACJD,IAAmBC,GAAgB,CAAC,KAAK,SAAS,SAAS,GAC5D,CACA,IAAMC,EAAQ,KAAK,UAChB,MAAM,EACN,YAAmB,EACnB,KAAKC,GAAa,KAAK,GAAI,KAAK,SAAS,CAAC,EAC7C,GAAID,EAAM,SAAW,EAAG,CACtB,KAAK,UAAU,OAAO,EAAK,EAC3B,KAAK,OAAS,GACd,MACF,MACE,KAAK,SAAWA,EAAM,CAAC,EACvB,KAAK,UAAU,cAAc,KAAK,QAAQ,CAE9C,CAEA,IAAME,EAAU,KAAK,UAAU,KAAK,EACpC,GAAIA,IAAY,KAAK,QAAQ,EAAG,CAC9B,KAAK,SAAS,EACd,MACF,CAEA,IAAMC,EAAS,KAAK,WAAW,SAASD,EAAS,KAAK,SAAS,KAAK,CAAC,EAErE,OAAQC,EAAO,KAAM,CACnB,OAEE,KAAK,UAAU,KAAKD,CAAO,EAC3B,MACF,OAEM,KAAK,GAAG,QAAQC,EAAO,IAAI,GAAK,KAAK,GAAG,YAAYA,EAAO,IAAI,GACjE,KAAK,UAAU,mBAAmB,EAEpC,KAAK,UAAU,KAAKA,EAAO,IAAI,EAC/B,KAAK,gBACL,MACF,OACE,KAAK,SAAS,EACd,MACF,OACE,QAAQ,KAAK,uCAAuC,EAChD,KAAK,UAAU,SAAS,GAC1B,KAAK,UAAU,OAAO,EAAK,EAE7B,KAAK,OAAS,GACd,KACJ,CACF,CAEQ,UAAW,CACjB,KAAK,OAAS,GACd,KAAK,UAAW,OAAO,EAAK,EAC5B,IAAMC,EAAO,KAAK,GACf,OAAO,EACP,cACC,KAAK,cACL,KAAK,UAAW,MAAM,EAAE,gBAAuB,CACjD,EAEE,KAAK,aACP,KAAK,UAAW,MAAM,EAAE,QAAQA,EAAM,KAAK,SAAS,KAAK,CAAC,EAC1D,KAAK,GAAG,eACN,YAAYC,GAAaD,CAAI,CAAC,iCAAiC,KAAK,UAAU,YAAY,CAAC,MAE3F,KAAK,UAAW,MAAM,EAAE,GAAG,EAC3BA,CACF,EAEA,KAAK,GACF,MAAM,EACN,kBAAkB,KAAK,UAAW,MAAM,EAAG,KAAK,UAAWA,CAAI,IAElE,KAAK,QAAQ,MAAM,EAAE,QAAQA,CAAI,EACjC,KAAK,SAAS,MAAM,EAAE,QAAQA,EAAM,KAAK,SAAS,KAAK,CAAC,EACxD,KAAK,GAAG,eACN,YAAYC,GAAaD,CAAI,CAAC,yBAAyB,KAAK,QAAQ,MAAM,EAAE,YAAY,CAAC,MAEzF,KAAK,SAAS,MAAM,EAAE,GAAG,EACzBA,CACF,EACA,KAAK,GAAG,eACN,YAAYC,GAAaD,CAAI,CAAC,yBAAyB,KAAK,SAAS,MAAM,EAAE,YAAY,CAAC,MAE1F,KAAK,QAAQ,MAAM,EAAE,GAAG,EACxBA,CACF,EAEA,KAAK,GACF,MAAM,EACN,gBAAgB,KAAK,QAAQ,MAAM,EAAG,KAAK,SAAS,MAAM,EAAGA,CAAI,EAGxE,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEA,SAAmB,CACjB,OAAO,KAAK,SAAS,KAAK,CAC5B,CACF,ECvLO,IAAME,GAAN,KAAyC,CAO9C,YAAYC,EAAY,CANxB,KAAQ,OAAS,GAOf,KAAK,KAAOA,CACd,CAEA,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,EACV,KAAK,OAAS,IAAIE,EAAaF,EAAG,MAAM,CAAC,EACzC,KAAK,YAAcA,EAAG,MAAM,EAAI,EAClC,CAEA,KAAKC,EAAqB,CACxB,GAAI,KAAK,KAAO,MAAQ,KAAK,SAAW,MAAQ,KAAK,cAAgB,KACnE,MAAM,IAAI,MAAM,iBAAiB,EAGnC,GAAI,CAAC,KAAK,KAAK,SAAS,EAAG,CACzB,KAAK,OAAS,GACd,MACF,CAeA,GAbI,KAAK,KAAK,oBAAoB,IAI7B,KAAK,KAAK,gBAAgB,GAC7B,KAAK,cAAc,GAIhB,KAAK,GAAG,MAAM,EAAI,KAAK,aAAe,KAAO,IAI9C,CAAC,KAAK,qBAAqB,EAC7B,OAGF,IAAME,EAAQ,KAAK,aAAa,EAEhC,GAAIA,EAAM,SAAW,EACnB,OAGF,IAAMJ,EAAO,KAAK,OAAO,YAAYI,CAAK,EAC1C,KAAK,GAAG,aACN,IAAIC,GAAmB,KAAK,KAAK,MAAM,EAAG,KAAK,KAAML,CAAI,CAC3D,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEA,sBAAgC,CAC9B,IAAMM,EAAgB,KAAK,GAAG,sBAA4B,EACpDC,EAAiB,KAAK,KAAM,MAAM,EAAE,gBAAuB,EAC3DC,EAAsB,KAAK,KAAM,MAAM,EAAE,sBAE/C,EACMC,EAAY,KAAK,GACpB,OAAO,EACP,mBAAmBH,EAAeC,EAAgBC,CAAmB,EACxE,QAASE,EAAI,EAAGA,EAAI,KAAK,KAAM,MAAM,EAAGA,IACtC,GAAI,KAAK,OAAO,OAAOD,CAAS,EAC9B,MAAO,GAGX,MAAO,EACT,CAEA,eAAsB,CACE,KAAK,GAAG,cAC5B,KAAK,KAAK,KAAK,EACf,KAAK,GAAG,OAAO,EAAE,qBAAqB,WAExC,GAEE,KAAK,GAAG,aAAa,IAAIE,GAAsB,KAAK,IAAI,CAAC,CAE7D,CAIA,cAAuB,CACrB,IAAMP,EAAQ,KAAK,GAChB,QAAQ,EACR,OAAQQ,GAAMA,IAAM,KAAK,KAAM,MAAM,GAAKA,EAAE,SAAS,KAAK,KAAM,MAAM,CAAC,CAAC,EACxE,QAASA,GAAMA,EAAE,YAAmB,CAAC,EACrC,KAAK,CAACC,EAAIC,IAEP,KAAK,GAAG,cAAc,KAAK,KAAM,KAAK,EAAGD,EAAG,KAAK,CAAC,EAClD,KAAK,GAAG,cAAc,KAAK,KAAM,KAAK,EAAGC,EAAG,KAAK,CAAC,CAErD,EAEGC,EAAwB,CAAC,EAE/B,OAAW,CAAC,EAAGC,CAAS,IAAKZ,EAAM,QAAQ,EAAG,CAC5C,IAAMa,EAAW,IAAI,MAAMD,EAAU,MAAM,CAAC,EAAE,KAAKA,CAAS,EAC5DD,EAAc,KAAK,GAAGE,CAAQ,EAC9B,IAAMC,EACJ,KAAK,GAAG,cAAc,KAAK,KAAM,KAAK,EAAGF,EAAU,KAAK,CAAC,EACzD,KAAK,GAAG,OAAO,EAAE,0BAA0B,EACvCG,EACJ,EAAI,KAAK,GAAG,OAAO,EAAE,sBAAsBf,EAAM,MAAM,EACrD,CAACc,GAAYC,GAGfJ,EAAc,KAAK,GAAGE,CAAQ,EAE5B,CAACC,GAAY,KAAK,KAAM,MAAM,EAAE,WAAWF,EAAU,MAAM,CAAC,GAC9DD,EAAc,KAAK,GAAGE,CAAQ,CAElC,CACA,OAAOF,CACT,CACF,ECvHO,IAAMK,GAAN,KAA+C,CAOpD,YACUC,EACAC,EACAC,EACAC,EACAC,EACR,CALQ,WAAAJ,EACA,YAAAC,EACA,eAAAC,EACA,YAAAC,EACA,gBAAAC,EAXV,KAAQ,OAAS,GAIjB,KAAQ,MAAgB,CAQrB,CAEH,KAAKC,EAAUC,EAAqB,CAClC,KAAK,WAAa,IAAIC,GAAcF,EAAI,IAAIG,EAAaH,EAAG,MAAM,CAAC,CAAC,EACpE,KAAK,GAAKA,EACV,KAAK,MAAQ,KAAK,GAAG,OAAO,EAAE,uBAAuB,CACvD,CAEA,KAAKC,EAAqB,CAMxB,GALA,KAAK,aAAL,KAAK,WAAe,KAAK,OAAO,uBAE9B,KAAK,MACL,CAAC,CACH,GACI,CAAC,KAAK,WAAW,SAAS,EAAG,CAC/B,KAAK,OAAS,GACd,MACF,CAEA,IAAMG,EAAiB,4BAAyC,EAChE,GACE,CAAC,KAAK,OAAO,SAAS,GACtB,CAAC,KAAK,UAAU,SAAS,GACzB,KAAK,OAAO,MAAM,IAAM,KAAK,WAAW,MAAM,GAC9C,CAACA,EAAe,SAAS,KAAK,OAAO,KAAK,CAAC,EAC3C,CACA,KAAK,WAAW,OAAO,EAAK,EAC5B,KAAK,OAAS,GACd,MACF,CACA,QAAS,EAAI,EAAG,EAAI,KAAK,MAAO,IAAK,CACnC,IAAMC,EAAS,KAAK,WAAW,SAC7B,KAAK,WAAW,KAAK,EACrB,KAAK,UACP,EACA,GAAIA,IAAW,GAAM,CACnB,KAAK,GAAG,eACN,uBAAuB,KAAK,OAAO,KAAK,CAAC,KAEzC,KAAK,OAAO,GAAG,CACjB,EACA,KAAK,OAAS,GACd,KAAK,OAAO,OAAO,GAAM,KAAK,MAAM,EACpC,KAAK,WAAW,OAAO,EAAK,EAG5B,KAAK,GACF,MAAM,EACN,cAAc,KAAK,OAAQ,KAAK,OAAO,KAAK,EAAe,CAAC,EAC/D,MACF,MACE,KAAK,WAAW,KAAKA,CAAM,CAE/B,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CACA,wBAAkC,CAChC,MAAO,EACT,CACF,EC9DA,IAAMC,GAAN,KAAyB,CAQvB,YACmBC,EACAC,EACjB,CAFiB,QAAAD,EACA,SAAAC,EANnB,KAAiB,iBACf,IAAI,IAOJ,KAAK,aAAe,KAAK,GAAG,OAAO,EAAE,uBAAuB,CAC9D,CAEA,uBAAuBC,EAAoD,CACzE,IAAMC,EAAgB,IAAI,IAAID,EAAY,IAAKE,GAAMA,EAAE,KAAK,GAAG,CAAC,CAAC,EACjE,QAAWC,KAAU,KAAK,iBAAiB,KAAK,EACzCF,EAAc,IAAIE,CAAM,GAC3B,KAAK,iBAAiB,OAAOA,CAAM,CAGzC,CAEQ,UAAUC,EAAe,CAC/B,IAAMC,EAAU,KAAK,IAAI,KAAK,EACxBC,EAAQ,KAAK,GAAG,OAAO,EAAE,SAAS,KAAK,IAAI,MAAM,CAAC,EAClDC,EAAeD,EAAQA,EAC7B,OAAO,KAAK,GAAG,qBAAqBD,EAASD,CAAI,GAAKG,CACxD,CAEQ,YAAYC,EAAsBJ,EAAuB,CAC/D,OAAO,KAAK,KACV,KAAK,GAAG,cAAcI,EAAaJ,CAAI,EAAI,KAAK,YAClD,CACF,CAEQ,wBAAwBK,EAA0C,CACxE,IAAMC,EAAaD,EAAK,WAAW,EAC7BJ,EAAU,KAAK,IAAI,KAAK,EACxBM,EAAeF,EAAK,gBAAgB,EACpCG,EAAwBF,EAAW,OAASC,EAClD,QAASE,EAAIF,EAAcE,EAAIH,EAAW,OAAQG,IAAK,CACrD,IAAMC,EAAiBJ,EAAWG,CAAC,EACnC,GAAIC,EAAe,YAAc,KAAK,UAAUA,EAAe,IAAI,EAAG,CACpE,IAAMC,EAAkBF,EAAIF,EACtBK,EAAiB,KAAK,YAAYX,EAASS,EAAe,IAAI,EAC9DG,EAAqBF,EAAkBC,EAC7C,GAAIA,EAAiBJ,GAAiBK,GAAsB,EAC1D,MAAO,CAAE,KAAMA,EAAoB,KAAMH,EAAe,IAAK,CAEjE,CACF,CAEF,CAEO,gBAAgBI,EAA8B,CAEnD,IAAMC,EAAiB,KAAK,GAAG,OAAO,EAAE,YAAY,EAAI,EAClDC,EAAQ,KAAK,GAAG,YACpB,KAAK,IAAI,KAAK,EACdD,EACA,4BAAyC,EACzC,CAAC,CAAE,KAAAV,CAAK,IAEJY,GAAOZ,CAAI,GACXA,EAAK,MAAM,IAAM,KAAK,IAAI,MAAM,GAChC,CAAC,KAAK,IAAI,MAAM,EAAE,WAAWA,EAAK,MAAM,CAAC,CAG/C,EAGA,KAAK,uBAAuBW,CAAK,EAEjC,IAAME,EAAyB,CAAC,EAChC,QAAWC,KAAQH,EAAO,CACxB,IAAMjB,EAASoB,EAAK,KAAK,GAAG,EACtBC,EAAS,KAAK,iBAAiB,IAAIrB,CAAM,EAC/C,GAAIqB,IAAW,OAAW,CACxB,GAAIA,IAAW,KAEb,SAEF,GAAIA,EAAO,OAASN,EAAO,CAEzBI,EAAQ,KAAK,CAAE,KAAME,EAAO,KAAM,KAAMD,EAAK,IAAK,CAAC,EACnD,KAAK,iBAAiB,OAAOpB,CAAM,EACnC,QACF,CACA,GAAIqB,EAAO,KAAON,EAEhB,SAGF,KAAK,iBAAiB,OAAOf,CAAM,CACrC,CACA,IAAMsB,EAAmB,KAAK,wBAAwBF,EAAK,IAAI,EAC3DE,IAAqB,OACnBA,EAAiB,MAAQ,EAG3BH,EAAQ,KAAK,CAAE,KAAMC,EAAK,KAAM,KAAME,EAAiB,IAAK,CAAC,EAG7D,KAAK,iBAAiB,IAAItB,EAAQ,CAChC,KAAMsB,EAAiB,KAAOP,EAC9B,KAAMO,EAAiB,IACzB,CAAC,EAIH,KAAK,iBAAiB,IAAItB,EAAQ,IAAI,CAE1C,CAEA,OACEmB,EAAQ,KAAK,CAAC,EAAWI,IAGrB,EAAE,KAAK,KAAK,IAAM,iBAClBA,EAAE,KAAK,KAAK,IAAM,gBAEX,GAEP,EAAE,KAAK,KAAK,IAAM,iBAClBA,EAAE,KAAK,KAAK,IAAM,gBAEX,EAEF,CACR,EAAE,CAAC,GAAK,IAEb,CACF,EAEaC,GAAN,KAAgD,CAYrD,YACUC,EACAxB,EACAL,EAAmB,KAC3B,CAHQ,YAAA6B,EACA,UAAAxB,EACA,SAAAL,EAbV,KAAQ,OAAkB,GAI1B,KAAQ,wBAA0B,IAClC,KAAQ,4BAA8B,GAUhCA,IAAQ,OACV,KAAK,KAAOA,EAAI,KAAK,EAEzB,CAEA,KAAKD,EAAUoB,EAAqB,CAClC,KAAK,GAAKpB,CACZ,CAEQ,MAAM+B,EAAgBC,EAAyB,CACrD,OAAID,IAAS,YACJ,GAGLA,IAAS,eACJC,EAAS,KAAK,GAAG,OAAO,EAAE,wBAAwB,EAGpDA,EAAS,KAAK,GAAG,OAAO,EAAE,iBAAiB,CACpD,CAEA,KAAKZ,EAAqB,CACxB,GAAI,KAAK,KAAO,MAAQ,KAAK,SAAW,KACtC,MAAM,IAAI,MAAM,iBAAiB,EAEnC,GAAI,KAAK,MAAQ,KAAM,CACrB,GAAI,KAAK,OAAS,KAChB,MAAM,IAAI,MAAM,cAAc,EAEhC,IAAMa,EAAY,KAAK,OAAO,wBAA+B,KAAK,IAAI,EACtE,GAAIA,IAAc,GAAO,CACvB,QAAQ,KAAK,2BAA2B,EACxC,KAAK,OAAS,GACd,MACF,CACA,KAAK,IAAM,KAAK,OAAO,yBAAgCA,EAAW,CAAC,CAAC,CACtE,CAGA,GAFA,KAAK,kBAAL,KAAK,gBAAoB,IAAIlC,GAAmB,KAAK,GAAI,KAAK,GAAG,GAE7D,KAAK,IAAI,oBAAoB,EAC/B,OAGF,GAAI,KAAK,IAAI,aAAa,EAAG,CAC3B,IAAMmC,EAAY,KAAK,IAAI,kBAAkB,EAAE,CAAC,EAChD,GAAIA,IAAc,OAChB,OAGA,KAAK,GAAG,OAAO,EAAE,YAAY,GAAK,KAAK,GAAG,MAAM,EAAIA,IAEtC,GACd,KAAK,IAAI,cAAc,EAEzB,MACF,CAEA,GAAI,CAAC,KAAK,IAAI,SAAS,EAAG,CACxB,KAAK,OAAS,GACd,MACF,CAEI,KAAK,SAAW,KAAK,IAAI,MAAM,IACjC,KAAK,OAAS,KAAK,IAAI,MAAM,GAG/B,KAAK,eAAL,KAAK,aAAiB,IAAIC,EAAa,KAAK,IAAI,GAAG,CAAC,GAEpD,IAAMC,EAAqB,KAAK,GAAG,YACjC,KAAK,IAAI,KAAK,EACd,KAAK,uCAEL,CAAC,CAAE,KAAAzB,CAAK,IAAM,CAGZ,GAFI,CAACY,GAAOZ,CAAI,GACZA,EAAK,MAAM,IAAM,KAAK,QACtB,KAAK,OAAO,WAAWA,EAAK,MAAM,CAAC,EAAG,MAAO,GACjD,IAAM0B,EAAM1B,EAAK,WAAW,EAC5B,OACE,KAAK,MAAQ,MACb0B,IAAQ,QACR,KAAK,GAAG,cAAcA,EAAK,KAAK,IAAI,KAAK,CAAC,EACxC,KAAK,2BAEX,CACF,EAEIC,EAAwB,KAS5B,GARIF,EAAmB,SAAW,IAChCE,EAAS,KAAK,gBAAgB,gBAAgBlB,CAAK,EAC/CkB,IAAW,MACb,QAAQ,IAAI,iBAAiB,GAIVA,GAAU,CAACA,EAAO,KAAK,cAAc,GACtCF,EAAmB,OAAS,EAAG,CACnD,KAAK,IAAI,OAAO,EAChB,IAAML,EACJK,EAAmB,OAAS,iBAExBE,GAAQ,KAAK,KAAK,EACxB,GAAIP,IAAS,OAAW,MAAM,IAAI,MAAM,mBAAmB,EAC3D,IAAMC,EAAS,KAAK,aAAa,KAAK,EAEtC,GAAI,CADQ,KAAK,MAAMD,EAAMC,CAAM,EAEjC,KAAK,GAAG,eACN,+BAA+BD,CAAI,KAEnC,KAAK,IAAI,MAAM,EAAE,GAAG,CACtB,UACSK,EAAmB,OAAS,EAAG,CACxC,IAAMG,EAAW,KAAK,IAAI,MAAM,EAGhC,KAAK,GAAG,eACN,GAAGH,EAAmB,MAAM,+BAE5BG,EAAS,GAAG,CACd,EAEAH,EAAmB,QAAQ,CAAC,CAAE,KAAMhC,CAAE,IAAM,CAE1CA,EAAE,OAAO,CACX,CAAC,EAGD,KAAK,GACF,MAAM,EACN,cACCmC,iBAEAH,EAAmB,MACrB,CACJ,SAAWE,IAAW,KACpBA,EAAO,KAAK,iBAAiB,EAAI,EACjC,KAAK,GAAG,aACN,IAAIE,GACF,KAAK,IAAI,KAAK,EACd,KAAK,IAAI,MAAM,EACf,KAAK,IACLF,EAAO,KACPA,EAAO,IACT,CACF,MAEA,OAAM,IAAI,MAAM,gBAAgB,CAEpC,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECjUO,IAAMG,GAAN,KAA4C,CAQjD,YACUC,EACR,CADQ,WAAAA,EAJV,KAAQ,gBAAkB,EAC1B,KAAQ,iBAAmB,IAAI,GAI5B,CAEH,KAAKC,EAAUC,EAAqB,CAIlC,GAHA,KAAK,GAAKD,EACV,KAAK,WAAaE,GAAW,KAAKF,EAAI,IAAQ,GAAM,GAAG,EACvD,KAAK,OAAS,IAAIG,EAAaH,EAAG,MAAM,CAAC,EACrCI,GAAO,KAAK,KAAK,EACnB,KAAK,QAAU,KAAK,UACf,CACL,IAAMC,EAAQ,KAAK,MAAM,MAAM,mBAE7B,KAAK,MAAM,UACb,EACA,GAAIA,IAAU,GAAO,CACnB,QAAQ,KACN,+BAA+B,KAAK,MAAM,MAAM,KAAK,CAAC,OAAO,KAAK,MAAM,UAAU,EACpF,EACA,MACF,CACA,KAAK,QAAU,KAAK,MAAM,MAAM,oBAE9BA,EACA,KAAK,KACP,CACF,CACF,CAEA,KAAKJ,EAAqB,CACxB,GAAI,KAAK,QAAQ,OAAO,GAAK,EAAG,CAC9B,KAAK,QAAQ,OAAO,EACpB,MACF,CAQA,GANgB,KAAK,QAAQ,MAAM,EAAE,gBAAuB,EAAI,GAE9D,KAAK,QAAQ,aAAa,CAAC,EAG7B,KAAK,QAAQ,cAAc,KAAK,eAAe,CAAC,EAC5C,KAAK,QAAQ,WAAW,GAAG,KAAK,IAAM,aAAoB,CAC5D,KAAK,kBAAkB,EACvB,MACF,CAIA,GAFA,KAAK,OAAO,EAER,KAAK,QAAQ,WAAW,IAAM,OAAW,CAC3C,KAAK,YAAY,EACjB,MACF,CACF,CAEQ,gBAAmC,CACzC,IAAMK,EAAU,KAAK,QAAQ,MAAM,EAAE,gBAAuB,EAAI,EAC1DC,EAAqB,KAAK,GAAG,OAAO,EAAE,mBAAmB,GAAK,EAE9DC,EAAQ,KAAK,GAAG,YACpB,KAAK,QAAQ,KAAK,EAClB,KAAK,GAAG,OAAO,EAAE,uBAAuB,EACxC,mCAA6D,CAC/D,EACMC,EAA0D,CAAC,EACjE,OAAW,CAAE,KAAAC,EAAM,YAAAC,CAAY,IAAKH,EAEhCE,EAAK,MAAM,IAAM,KAAK,QAAQ,MAAM,GACpCA,IAAS,KAAK,SACdA,EAAK,MAAM,EAAE,WAAW,KAAK,QAAQ,MAAM,EAAG,EAAI,GAClD,KAAK,iBAAiB,IAAIA,CAAI,GAI5BA,EAAK,KAAK,IAAM,eAEhB,CAACJ,GACDI,EAAK,kBAAkB,GACvBA,EAAK,WAAW,GAAG,MAAM,IAAM,KAAK,QAAQ,MAAM,GAClDA,EAAK,WAAW,GAAG,MAAM,EAAE,WAAW,KAAK,QAAQ,MAAM,CAAC,GAK1D,KAAK,GAAG,qBACN,KAAK,QAAQ,WAAW,EACxBA,EAAK,KAAK,CACZ,EAAIH,IAORE,EAAiB,KAAK,CAAE,KAAMC,EAAM,YAAAC,CAAY,CAAC,EAGnD,OAAOF,EAAiB,KAAK,CAAC,EAAGG,IAAM,CACrC,GAAM,CAAE,KAAMC,EAAO,YAAaC,CAAM,EAAI,EACtC,CAAE,KAAMC,EAAO,YAAaC,CAAM,EAAIJ,EAG5C,OACEC,EAAM,KAAK,IAAM,aACjBE,EAAM,KAAK,IAAM,YAEV,GAEPF,EAAM,KAAK,IAAM,aACjBE,EAAM,KAAK,IAAM,YAEV,EAIPF,EAAM,KAAK,IAAM,WACjBE,EAAM,KAAK,IAAM,UAEV,GAEPF,EAAM,KAAK,IAAM,WACjBE,EAAM,KAAK,IAAM,UAEV,EAGFD,EAAQE,CACjB,CAAC,EAAE,CAAC,GAAG,IACT,CAEQ,aAAc,CACpB,IAAMC,EAAkB,KAAK,GAAG,OAAO,EAAE,uBAAuB,EAChE,GAAI,KAAK,GAAG,MAAM,EAAI,KAAK,gBAAkBA,IACvC,KAAK,QAAQ,WAAW,GAAG,KAAK,IAAM,cAExC,KAAK,gBAAkB,KAAK,GAAG,MAAM,GAEvC,KAAK,GAAG,aACN,IAAIC,GACF,KAAK,QAAQ,KAAK,EAClB,KAAK,QAAQ,MAAM,EACnB,KAAK,QACL,KAAK,QAAQ,WAAW,CAC1B,CACF,EACI,CAAC,KAAK,QAAQ,WAAW,EAAG,UAAU,GAAG,CAE3C,KAAK,iBAAiB,IAAI,KAAK,QAAQ,WAAW,CAAE,EACpD,KAAK,QAAQ,cAAc,MAAS,EACpC,MACF,CAEJ,CAEQ,mBAAoB,CAC1B,QAASC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAE1B,IAAMC,EAAS,KAAK,WAAW,SAC7B,KAAK,QAAQ,KAAK,EAClB,KAAK,QAAQ,WAAW,EAAG,KAAK,EAChC,CACF,EACA,OAAQA,EAAO,KAAM,CACnB,OACE,KAAK,QAAQ,MAAM,EAAE,YAAY,KAAK,QAAQ,WAAW,CAAE,EAC3D,KAAK,QAAQ,cAAc,MAAS,EACpC,KAAK,QAAQ,KAAK,KAAK,QAAQ,KAAK,CAAC,EACrC,OACF,OACE,KAAK,QAAQ,KAAKA,EAAO,IAAI,EAC7B,MACF,OACE,KAAK,QAAQ,MAAM,EACnB,MACF,OACE,QAAQ,IAAI,0BAA0B,EACtC,KACJ,CACF,CACF,CAEQ,QAAS,CACf,GAAI,KAAK,QAAQ,WAAW,IAAM,SAChC,KAAK,QAAQ,cAAc,KAAK,WAAW,CAAC,EACxC,KAAK,QAAQ,WAAW,IAAM,QAChC,OAIJ,IAAMA,EAAS,KAAK,WAAW,SAC7B,KAAK,QAAQ,KAAK,EAClB,KAAK,QAAQ,WAAW,CAC1B,EACA,OAAQA,EAAO,KAAM,CACnB,OACE,KAAK,QAAQ,cAAc,MAAS,EACpC,KAAK,QAAQ,KAAKA,EAAO,IAAI,EAC7B,MACF,OACE,KAAK,QAAQ,KAAKA,EAAO,IAAI,EAC7B,MACF,OACE,KAAK,QAAQ,MAAM,EACnB,OACF,OACE,QAAQ,KAAK,+BAA+B,EAC5C,KAAK,QAAQ,cAAc,MAAS,EACpC,KACJ,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,SAAS,SAAS,CAChC,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEA,WAAWC,EAA0B,GAA4B,CAC/D,IAAIC,EAAqB,KAAK,GAAG,OAAO,EAAE,mBAAmB,EACvDC,EAAiC,IACnCC,EAAmB,EACnBC,EAAsB,EAC1B,KAAOA,EAAc,GAAG,CACtB,IAAMC,EACJ,KAAK,GAAG,EAAE,KAAK,QAAQ,WAAW,CAAE,EACpC,KAAK,OAAO,QAAQ,CAACJ,EAAqB,EAAGA,EAAqB,CAAC,EAC/DK,EACJ,KAAK,GAAG,EAAE,KAAK,QAAQ,WAAW,CAAE,EACpC,KAAK,OAAO,QAAQ,CAACL,EAAqB,EAAGA,EAAqB,CAAC,EACrE,GAAI,CAAC,KAAK,GAAG,aAAaI,EAAGC,CAAC,EAC5B,SAEF,IAAMC,EAAO,KAAK,GAAG,IAAIF,EAAGC,CAAC,EAC7B,GACE,CAAC,KAAK,GAAG,QAAQC,CAAI,GACpB,CAACP,GAAkB,KAAK,GAAG,YAAYO,CAAI,EAC5C,CACAJ,IACIA,IAAaD,IACfE,IACAD,EAAW,EACXF,EACEA,EAAqB,KAAK,MAAMA,EAAqB,CAAC,GAE1D,QACF,CACA,OAAOM,CACT,CAIA,GAHA,QAAQ,KACN,8CAA8C,KAAK,QAAQ,MAAM,EAAE,KAAK,CAAC,EAC3E,EACI,CAACP,EAEH,OAAO,KAAK,WAAW,EAAI,CAG/B,CACF,EC7QO,IAAMQ,GAAN,KAAiD,CAOtD,YACUC,EACAC,EACAC,EACR,CAHQ,YAAAF,EACA,sBAAAC,EACA,UAAAC,EATV,KAAQ,UAAyB,KACjC,KAAQ,OAAkB,EASvB,CAEH,KAAKC,EAAUC,EAAqB,CAGlC,GAFA,KAAK,GAAKD,EAEN,KAAK,GAAG,OAAO,EAAE,eAAe,KAAK,gBAAgB,EAAG,CAC1D,QAAQ,KACN,6BAA6B,KAAK,gBAAgB,yBACpD,EACA,KAAK,OAAS,GACd,MACF,CAEA,GAAI,CAAC,KAAK,GAAG,WAAW,KAAK,IAAI,EAAG,CAClC,QAAQ,KAAK,0CAA0C,KAAK,IAAI,EAAE,EAClE,KAAK,OAAS,GACd,MACF,CACF,CAEA,KAAKC,EAAqB,CACxB,GAAI,KAAK,YAAc,KAAM,CAC3B,IAAMC,EAAO,KAAK,GAAG,SAAS,KAAK,gBAAgB,EAGnD,GAAI,CADgB,KAAK,YAAY,KAAK,gBAAgB,EACxC,CAEhB,KAAK,qBAAqB,EAC1B,KAAK,OAAS,GACd,MACF,CAGA,IAAMC,EAAY,KAAK,OAAO,SAAS,KAAK,iBAAkB,KAAK,IAAI,EACvE,GAAIA,IAAc,GAAO,CACvB,QAAQ,KAAK,gBAAgB,KAAK,gBAAgB,EAAE,EACpD,KAAK,OAAS,GACd,MACF,CACA,KAAK,UAAY,KAAK,OAAO,UAC3B,KAAK,iBACLA,EACA,CAAC,CACH,EACA,IAAMC,EAAWF,EAAK,sBAAwB,EAC9C,GAAIE,EAAW,EAAG,CAChB,KAAK,UAAU,qBAAqB,EAAI,EACxC,KAAK,mBAAqBA,EAC1B,MACF,CAEA,KAAK,qBAAqB,EAC1B,KAAK,OAAS,GACd,MACF,CAEA,GAAI,CAAC,KAAK,UAAU,SAAS,EAAG,CAC9B,KAAK,OAAS,GACd,MACF,CAMA,GAJI,KAAK,SAAW,KAAK,UAAU,MAAM,IACvC,KAAK,OAAS,KAAK,UAAU,MAAM,GAGjC,KAAK,qBAAuB,EAAG,CACjC,KAAK,OAAS,KAAK,UAAU,MAAM,EACnC,KAAK,qBAAqB,EAC1B,KAAK,OAAS,GACd,MACF,CACA,KAAK,oBACP,CAEQ,sBAAuB,CACzB,KAAK,WACP,KAAK,UAAU,qBAAqB,EAAK,EAE3C,IAAMP,EAAS,KAAK,OACpB,OAAQ,KAAK,iBAAkB,CAC7B,gBACA,oBACE,KAAK,GAAG,aACN,IAAIQ,GAAc,KAAK,iBAAkBR,EAAQ,KAAK,IAAI,CAC5D,EACA,MACF,WACE,KAAK,GAAG,aAAa,IAAIS,GAAcT,EAAQ,KAAK,IAAI,CAAC,EACzD,MACF,cACE,KAAK,GAAG,aACN,IAAIU,GAAiB,CAAE,MAAOV,EAAQ,WAAY,KAAK,IAAK,CAAC,CAC/D,EACA,MACF,WACE,KAAK,GAAG,aAAa,IAAIW,GAAc,KAAK,SAAU,CAAC,EACvD,MACF,mBACE,KAAK,GAAG,aAAa,IAAIC,GAAqB,KAAK,SAAU,CAAC,EAC9D,MACF,mBACE,KAAK,GAAG,aAAa,IAAIC,GAAqB,KAAK,SAAU,CAAC,EAC9D,MACF,mBACE,KAAK,GAAG,aACN,IAAIC,GAAqBd,EAAQ,KAAM,KAAK,SAAU,CACxD,EACA,MACF,WACE,KAAK,GAAG,aAAa,IAAIe,GAAc,KAAK,SAAU,CAAC,EACvD,MACF,cACE,KAAK,GAAG,aAAa,IAAIC,GAAiB,KAAK,SAAU,CAAC,EAC1D,MACF,QACE,QAAQ,KACN,aAAa,KAAK,gBAAgB,wBACpC,EACA,KACJ,CACF,CAEQ,YAAYC,EAAyB,CAC3C,OAAQA,EAAM,CACZ,WACA,mBACA,mBACA,mBACA,WACA,cACE,MAAO,GACT,QACE,MAAO,EACX,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECpKO,IAAMC,GAAN,KAA+C,CAKpD,YACUC,EACAC,EACR,CAFQ,YAAAD,EACA,YAAAC,EANV,KAAQ,OAAkB,GAE1B,KAAQ,KAAoB,IAKzB,CAEH,wBAAkC,CAChC,MAAO,EACT,CAEA,KAAKC,EAAUC,EAAe,CAC5B,GAAI,CAAC,KAAK,OACR,OAEF,KAAK,GAAKD,EAEV,IAAME,EAAO,KAAK,OAAO,MAAM,EAAE,KAAMC,GAAMA,EAAE,GAAG,IAAM,KAAK,MAAM,EACnE,GAAI,CAACD,EAAM,CACT,QAAQ,KACN,kBAAkB,KAAK,MAAM,qCAAqC,KAAK,OAAO,YAAY,CAAC,EAC7F,EACA,KAAK,OAAS,GACd,MACF,CAEA,GAAI,CAACA,EAAK,SAAS,EAAG,CACpB,QAAQ,KAAK,kBAAkB,KAAK,MAAM,gBAAgB,EAC1D,KAAK,OAAS,GACd,MACF,CACA,KAAK,KAAOA,EAEZ,IAAME,EAAYJ,EAAG,MAAME,EAAK,KAAK,CAAC,EACtC,GAAI,CAACE,EAAU,SAAS,GAAKA,EAAU,GAAG,IAAM,KAAK,OAAO,GAAG,EAAG,CAChE,QAAQ,KACN,kBAAkB,KAAK,MAAM,+BAC/B,EACA,KAAK,OAAS,GACd,MACF,CAEA,GAAI,CAACJ,EAAG,OAAOE,EAAK,KAAK,CAAC,EAAG,CAC3B,QAAQ,KAAK,kBAAkB,KAAK,MAAM,iBAAiB,EAC3D,KAAK,OAAS,GACd,MACF,CAEA,GAAIF,EAAG,aAAa,EAAG,CACrB,QAAQ,KAAK,kDAAkD,EAC/D,KAAK,OAAS,GACd,MACF,CAEA,GAAI,CAAC,KAAK,OAAO,cAAc,EAAG,CAChC,QAAQ,KAAK,4CAA4C,EACzD,KAAK,OAAS,GACd,MACF,CAEA,KAAK,OAAO,iBAAiB,EAC7BE,EAAK,gBAAgB,CACvB,CAEA,KAAKD,EAAe,CAClB,GAAI,GAAC,KAAK,QAAU,CAAC,KAAK,MAG1B,IAAI,CAAC,KAAK,KAAK,SAAS,EAAG,CACzB,KAAK,OAAS,GACd,MACF,CACI,KAAK,KAAK,kBAAkB,IAC9B,KAAK,KAAK,OAAO,EAAK,EAEtB,KAAK,GAAG,eACN,6CAEA,KAAK,OAAO,GAAG,CACjB,EACA,KAAK,OAAS,IAElB,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CACF,EClFO,IAAMI,GAAN,KAA+C,CAOpD,YACUC,EACAC,EACRC,EACA,CAHQ,YAAAF,EACA,iBAAAC,EALV,KAAQ,OAAS,GAQf,KAAK,KAAOE,GAAMD,GAAW,CAAC,CAChC,CAEA,KAAKE,EAAUC,EAAqB,CAGlC,GAFA,KAAK,GAAKD,EAEN,CAACA,EAAG,UAAU,KAAK,WAAW,EAAG,CACnC,QAAQ,KACN,iCAAiC,KAAK,WAAW,YACnD,EACA,KAAK,OAAS,GACd,MACF,CAEA,KAAK,UAAYA,EAAG,OAAO,KAAK,WAAW,EAC3C,KAAK,OAAL,KAAK,KAAS,KAAK,OAAO,KAAK,EAAI,GACrC,CAEA,KAAKC,EAAqB,CACxB,GAAI,KAAK,OAAS,KAAM,MAAM,IAAI,MAAM,iBAAiB,EACzD,GACE,KAAK,OAAO,cAAc,KAAK,SAAS,GACxC,KAAK,OAAO,WAAW,KAAK,UAAW,KAAK,IAAI,EAChD,CAEA,IAAMC,EAAiB,KAAK,wBAAwB,KAAK,KAAMD,CAAK,EAChEC,EAAiB,GACnB,KAAK,UAAU,eAAe,KAAK,OAAQA,CAAc,CAE7D,MACE,QAAQ,KACN,yBAAyB,KAAK,OAAO,KAAK,CAAC,OAAO,KAAK,UAAU,KAAK,CAAC,EACzE,EAEF,KAAK,OAAS,EAChB,CAEQ,kBAA2B,CACjC,GAAM,CAAE,WAAAC,CAAW,EAAI,KAAK,GAAG,OAAO,EAAE,WAAW,EACnD,OAAQA,EAAY,CAClB,WACE,MAAO,MACT,aACE,MAAO,KACT,WACE,MAAO,OACT,iBACE,MAAO,MACT,QACEC,GAAYD,CAAU,CAC1B,CACF,CAEQ,wBAAwBE,EAAgBJ,EAAuB,CACrE,IAAMK,EAAY,KAAK,iBAAiB,EAElCC,EACJN,GAAS,IAAO,KAAK,GAAG,OAAO,EAAE,mBAAmB,GAChDO,EAAoB,OACxB,KAAK,MAAMF,EAAYA,EAAYC,CAAmB,CACxD,EAIML,EAFS,OAAOG,EAAWG,CAAiB,EAElB,EAEhC,OAAIN,EAAiB,IAAY,IAC1BA,CACT,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EC/FO,IAAMO,GAAN,KAAiD,CAOtD,YACUC,EACAC,EACAC,EACR,CAHQ,YAAAF,EACA,iBAAAC,EACA,YAAAC,EALV,KAAQ,OAAS,EAMd,CAEH,KAAKC,EAAUC,EAAqB,CAIlC,GAHA,KAAK,GAAKD,EACV,KAAK,OAAS,IAAIE,EAAaF,EAAG,MAAM,CAAC,EAErC,CAACA,EAAG,UAAU,KAAK,WAAW,EAAG,CACnC,QAAQ,KACN,kCAAkC,KAAK,WAAW,YACpD,EACA,KAAK,OAAS,GACd,MACF,CAEA,KAAK,UAAYA,EAAG,OAAO,KAAK,WAAW,EAC3C,KAAK,SAAL,KAAK,OAAWA,EAAG,OAAO,EAAE,sBAAsB,KAAK,MAAM,GAC7D,IAAMG,EACJH,EAAG,OAAO,EAAE,UAAU,KAAK,SAAS,EAAI,KAAK,UAAU,OAAO,EAChE,KAAK,OAAS,KAAK,IAAI,KAAK,OAAQG,CAAW,CACjD,CAEA,KAAKF,EAAqB,CACxB,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAE3D,IAAMG,EAAY,KAAK,8BAA8B,EAGnD,KAAK,OAAO,gBAAgB,KAAK,SAAS,GAC1C,KAAK,OAAO,aAAa,KAAK,UAAW,KAAK,MAAM,EAGhD,KAAK,QAAUA,GACjB,KAAK,UAAU,eAAe,KAAK,OAAQ,EAAE,EAG/C,QAAQ,KACN,2BAA2B,KAAK,MAAM,OAAO,KAAK,SAAS,EAC7D,EAEF,KAAK,OAAS,EAChB,CAEQ,+BAAwC,CAC9C,GAAM,CAAE,WAAAC,CAAW,EAAI,KAAK,GAAG,OAAO,EAAE,WAAW,EAC7CC,EAAqB,KAAK,GAAG,OAAO,EAAE,UAAU,KAAK,SAAS,EAEpE,OAAQD,EAAY,CAElB,WACE,OAAO,KAAK,OAAO,QACjBC,EAAqB,GACrBA,EAAqB,EACvB,EAEF,aACE,OAAO,KAAK,OAAO,QACjBA,EAAqB,GACrBA,EAAqB,CACvB,EAEF,WACE,OAAO,KAAK,OAAO,QACjBA,EAAqB,EACrBA,EAAqB,CACvB,EAEF,iBACE,OAAO,KAAK,OAAO,QACjBA,EAAqB,EACrBA,EAAqB,CACvB,EACF,QACEC,GAAYF,CAAU,CAC1B,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EChGO,IAAMG,GAAN,KAA+C,CACpD,YACmBC,EACAC,EACjB,CAFiB,YAAAD,EACA,YAAAC,CAChB,CAEH,KAAKC,EAAUC,EAAiB,CAC9B,GAAI,CAAC,KAAK,OAAO,cAAc,EAC7B,OAEF,IAAMC,EAAK,KAAK,OAChB,QAAWC,KAAKH,EAAG,QAAQ,EACrBG,EAAE,GAAG,IAAMD,EAAG,GAAG,GACjBC,EAAE,KAAK,IAAM,QACbD,EAAG,aAAaC,CAAC,IAEjB,KAAK,SAAW,QACbD,EAAG,kBAAkBC,CAAC,GAAGD,EAAG,WAAWC,EAAG,EAAK,EAEhDD,EAAG,kBAAkBC,CAAC,GAAGD,EAAG,YAAYC,CAAC,IAIjD,KAAK,OAAO,iBAAiB,CAC/B,CAEA,KAAKF,EAAiB,CAAC,CAEvB,UAAoB,CAClB,MAAO,EACT,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECnCO,IAAMG,GAAN,KAA4C,CAKjD,YACUC,EACAC,EACSC,EACjB,CAHQ,YAAAF,EACA,cAAAC,EACS,YAAAC,EAPnB,KAAQ,OAAS,EAQd,CAEH,KAAKC,EAAUC,EAAiB,CAC9B,GAAI,CAACD,EAAG,UAAU,KAAK,QAAQ,EAAG,CAChC,QAAQ,KAAK,8BAA8B,KAAK,QAAQ,YAAY,EACpE,KAAK,OAAS,GACd,MACF,CACA,KAAK,OAASA,EAAG,OAAO,KAAK,QAAQ,CACvC,CAEA,KAAKC,EAAiB,CAChB,KAAK,SAAW,QAAS,KAAK,OAAO,WAAW,KAAK,OAAQ,EAAK,EACjE,KAAK,OAAO,YAAY,KAAK,MAAM,EAExC,KAAK,OAAS,EAChB,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EChCO,SAASC,GACdC,EACAC,EACAC,EAC2B,CAC3B,IAAMC,EAAcF,EAAO,YAAY,EACjCG,EAAaH,EAAO,MAAMC,CAAI,EAE9BG,EAAgBL,EAAG,OAAO,EAAE,0BAAgC,EAAE,MAC9DM,EAAmBD,EAAgB,EACzC,OAAQH,EAAM,CACZ,WACA,cACA,mBACE,OAAQK,GAAS,CACf,IAAIC,EAAI,EAGRA,GAAKR,EAAG,UAAUO,CAAI,EAGtB,GAAM,CAAC,CAAEE,CAAiB,EAAIC,GAAYV,EAAIG,EAAaI,CAAI,EAC/DC,GAAK,KAAK,IAAIC,EAAmBJ,CAAa,EAG9C,IAAMM,EAA2B,IAAI,IACnCP,EAAW,IAAKQ,GAAMA,EAAE,KAAK,CAAC,CAChC,EACAD,EAAW,OAAOJ,CAAI,EACtB,IAAMM,EAAeC,GAAgBd,EAAIW,EAAY,CAACJ,CAAI,CAAC,EAC3D,GAAIM,IAAiB,KAAM,CACzB,IAAME,EAAIf,EAAG,cAAca,EAAa,EAAGN,CAAI,EAC/CC,GAAK,KAAK,IAAIO,EAAGT,CAAgB,CACnC,CAGA,OAAOE,CACT,EAEF,WACE,OAAQD,GAAS,CACf,IAAIC,EAAI,EAGFG,EAA2B,IAAI,IACnCP,EAAW,IAAKQ,GAAMA,EAAE,KAAK,CAAC,CAChC,EACAD,EAAW,OAAOJ,CAAI,EACtB,GAAM,CAAC,CAAES,CAAgB,EAAIN,GAAYV,EAAIW,EAAYJ,CAAI,EAC7D,OAAAC,GAAK,KAAK,IAAIQ,EAAkBV,CAAgB,EAEzCE,CACT,EAEF,mBACE,OAAQD,GAAS,CACf,IAAIC,EAAI,EAGRA,GAAKR,EAAG,UAAUO,CAAI,EAEtB,GAAM,CAACU,EAASR,CAAiB,EAAIC,GAAYV,EAAIG,EAAaI,CAAI,EACtE,GAAIU,IAAY,KAAM,CAEpBT,GAAK,KAAK,IACR,EACAH,EAAgB,KAAK,IAAIA,EAAgBI,CAAiB,CAC5D,EAGA,IAAMS,EAAyB,IAAI,IACnC,QAAWX,KAAQP,EAAG,UAAUiB,CAAO,EAAG,CACxC,GAAI,CAACjB,EAAG,OAAOO,CAAI,EAAG,SACtB,IAAMY,EAAKnB,EAAG,QAAQO,CAAI,EAC1B,GAAIY,IAAOlB,EAAO,QAAQ,EAAG,SAC7B,IAAMmB,EAAWpB,EAAG,gBAAgBmB,CAAE,EACjCC,EAAS,SAAS,GACvBF,EAAU,IAAIE,CAAQ,CACxB,CACA,QAAWA,KAAYF,EACrBV,GACEH,GAAiB,EAAoBJ,EAAO,SAASmB,CAAQ,EAEnE,CAGA,IAAMT,EAA2B,IAAI,IACnCP,EAAW,IAAKQ,GAAMA,EAAE,KAAK,CAAC,CAChC,EACAD,EAAW,OAAOJ,CAAI,EACtB,IAAMM,EAAeC,GAAgBd,EAAIW,EAAY,CAACJ,CAAI,CAAC,EAC3D,GAAIM,IAAiB,KAAM,CACzB,IAAME,EAAIf,EAAG,cAAca,EAAa,EAAGN,CAAI,EAC/CC,GAAK,KAAK,IAAIO,EAAGT,CAAgB,CACnC,CAEA,OAAOE,CACT,EAEF,mBAA2B,CACzB,IAAMa,EAA6B,IAAI,IACvC,QAAWC,KAAQrB,EAAO,MAAM,EAC9B,OAAQqB,EAAK,KAAK,EAAG,CACnB,WACA,cACA,mBACA,WACED,EAAa,IAAIC,EAAK,KAAK,CAAC,CAChC,CAEF,IAAMC,EAAQvB,EAAG,OAAO,EAAE,gBAAgB,EACpCwB,EAAeD,EAAQA,EAC7B,OAAQhB,GAAS,CACf,IAAIC,EAAI,EAGRA,GAAKR,EAAG,UAAUO,CAAI,EAGtB,IAAMkB,EAAgBX,GAAgBd,EAAIG,EAAa,CAACI,CAAI,CAAC,EAC7D,GAAIkB,IAAkB,KAAM,CAC1B,IAAMV,EAAIf,EAAG,cAAcyB,EAAc,EAAGlB,CAAI,EAChDC,GAAK,KAAK,IAAIO,EAAGV,CAAa,CAChC,CAGA,IAAMM,EAA2B,IAAI,IACnCP,EAAW,IAAKQ,GAAMA,EAAE,KAAK,CAAC,CAChC,EACAD,EAAW,OAAOJ,CAAI,EACtB,IAAMM,EAAeC,GAAgBd,EAAIW,EAAY,CAACJ,CAAI,CAAC,EAC3D,GAAIM,IAAiB,KAAM,CACzB,IAAME,EAAIf,EAAG,cAAca,EAAa,EAAGN,CAAI,EAC/CC,GAAK,KAAK,IAAIO,EAAGT,CAAgB,CACnC,CAGA,QAAWoB,KAAkBL,EACHrB,EAAG,qBAAqBO,EAAMmB,CAAc,EAC9CF,IACtBhB,GAAKF,GAGP,OAAOE,CACT,CACF,CACA,QACE,MAAM,IAAI,MAAM,sCAAsCN,CAAI,EAAE,CAChE,CACF,CC9IO,IAAMyB,GAAN,KAAuB,CAC5B,YACUC,EACAC,EACAC,EACR,CAHQ,YAAAF,EACA,UAAAC,EACA,YAAAC,CACP,CAEH,wBAAyB,CACvB,QAAWC,KAAO,KAAK,OAAO,yBAAyB,EACjD,KAAK,2BAA2BA,EAAI,UAAU,CAAC,EACjDA,EAAI,OAAO,EAEXA,EAAI,OAAO,CAGjB,CAEA,iCAAkC,CAChC,QAAWC,KAAY,KAAK,OAAO,UAAU,EAAG,CAG9C,GAAI,CAACA,EAAS,sBAAsB,EAAG,SAEvC,IAAMC,EAAQD,EAAS,MAAM,KAAK,MAAM,EACnC,KAAK,2BAA2BC,CAAK,GAE1C,KAAK,KAAK,aACR,IAAIC,GAA2B,KAAK,OAAQD,EAAM,GAAG,CAAC,CACxD,CACF,CACF,CAEA,0BAA0BE,EAA4B,CAEpD,GAAM,CAAE,WAAAC,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EAC/CC,EAA4B,IAAM,CACtC,OAAQD,EAAY,CAClB,WACE,OAAO,KAAK,OAAO,OAAO,EAAE,EAC9B,aACE,OAAO,KAAK,OAAO,OAAO,EAAE,EAC9B,WACE,OAAO,KAAK,OAAO,OAAO,EAAE,EAC9B,QACE,OAAO,KAAK,OAAO,OAAO,EAAE,CAChC,CACF,EAGME,EAA0BC,GAC7BA,EAAE,KAAK,IAAM,OAAkBH,IAAe,QAC/CG,EAAE,KAAK,IAAM,MAEf,QAAWC,KAASL,EAEhBE,EAA0B,GAC1BC,EAAuBE,CAAK,GAC5B,KAAK,OAAO,uBAAuBA,CAAK,GACxC,KAAK,2BAA2BA,CAAK,GAErC,KAAK,KAAK,aACR,IAAIC,GAAyB,KAAK,OAAQD,EAAM,GAAG,CAAC,CACtD,CAGN,CAEQ,2BAA2BE,EAA8B,CAE/D,OAAI,KAAK,WAAW,EACX,KAAK,OAAO,OAAO,CAAC,EAGzBA,EAAY,UAAU,GAAK,KAAK,OAAO,QAAQ,EAAG,GAAG,GAAK,GACrD,GAKL,KAAK,wBAAwBA,CAAW,EACnC,GAGL,KAAK,OAAO,SAASA,CAAW,EAAI,EAC/B,GAGL,KAAK,0BAA0BA,CAAW,EACrC,GAGL,KAAK,4BAA4BA,CAAW,EACvC,GAGF,KAAK,iCAAiCA,CAAW,CAC1D,CAEQ,YAAsB,CAC5B,GAAM,CAAE,WAAAN,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EACrD,OAAQA,EAAY,CAClB,WACE,OAAO,KAAK,OAAO,OAAO,EAAE,EAC9B,aACE,OAAO,KAAK,OAAO,OAAO,EAAE,EAC9B,WACE,OAAO,KAAK,OAAO,OAAO,EAAE,EAC9B,QACE,MAAO,EACX,CACF,CAEQ,wBAAwBM,EAA8B,CAC5D,GAAM,CAAE,WAAAN,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EACrD,OAAQA,EAAY,CAClB,WAEE,MAAO,GACT,aAEE,OAAOM,EAAY,OAAO,EAAI,KAAK,OAAO,OAAO,EAAI,IACvD,WAEE,OACEA,EAAY,OAAO,EAAI,KAAK,OAAO,OAAO,GAC1C,KAAK,KAAK,OAAO,EAAE,UAAUA,CAAW,EACtC,KAAK,KAAK,OAAO,EAAE,UAAU,KAAK,MAAM,EAAI,EAElD,QAAS,CAEP,IAAMC,EACJD,EAAY,OAAO,EAAI,KAAK,OAAO,OAAO,EAAI,IAC1CE,EACJF,EAAY,OAAO,EAAI,KAAK,OAAO,OAAO,GAC1C,KAAK,KAAK,OAAO,EAAE,UAAUA,CAAW,EACtC,KAAK,KAAK,OAAO,EAAE,UAAU,KAAK,MAAM,EAAI,IAC1CG,EACJH,EAAY,OAAO,EAAI,KAAK,OAAO,OAAO,GAC1CA,EAAY,cAAc,EAAI,KAAK,OAAO,cAAc,EAAI,IAC9D,OAAOC,GAAsBC,GAAyBC,CACxD,CACF,CACF,CAEQ,4BAA4BH,EAA8B,CAChE,GAAM,CAAE,WAAAN,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EACrD,OAAQA,EAAY,CAClB,WACE,MAAO,GACT,aACE,OAAO,KAAK,OAAO,UAAU,EAAE,QAAU,KAAK,OAAO,QAAQ,EAAG,CAAC,EACnE,QAAS,CAEP,IAAMU,EAAmB,KAAK,OAC3B,UAAU,EACV,OACEC,GAAmBA,EAAE,SAAS,GAAKA,EAAE,KAAK,IAAM,KACnD,EACIC,EAAmBF,EAAiB,OACvCG,GAAM,KAAK,QAAQ,WAAWA,CAAC,IAAM,EACxC,EACA,OACEH,EAAiB,QAAU,GAC3BA,EAAiB,SAASJ,CAAW,EAE9BI,EAAiB,QAAUE,EAAiB,OAAS,EAE1DZ,IAAe,OACV,KAAK,OAAO,UAAU,EAAE,QAAU,KAAK,OAAO,QAAQ,EAAG,CAAC,EAE5D,KAAK,OAAO,UAAU,EAAE,QAAU,KAAK,OAAO,QAAQ,EAAG,CAAC,CACnE,CACF,CACF,CAEQ,0BAA0BM,EAA8B,CAC9D,GAAM,CAAE,WAAAN,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EACrD,OAAQA,EAAY,CAClB,WACA,aACE,OAAO,KAAK,OAAO,SAASM,CAAW,IAAM,EAC/C,WACE,OACE,KAAK,OAAO,SAASA,CAAW,IAAM,GACtC,KAAK,OAAO,QAAQ,EAAG,GAAG,GAAK,GAEnC,QACE,OACE,KAAK,OAAO,SAASA,CAAW,IAAM,GACtC,KAAK,OAAO,QAAQ,EAAG,GAAG,GAAK,EAErC,CACF,CAGQ,iCAAiCA,EAA8B,CACrE,GAAM,CAAE,WAAAN,CAAW,EAAI,KAAK,KAAK,OAAO,EAAE,WAAW,EACrD,OAAQA,EAAY,CAClB,WACE,OACEM,EAAY,OAAO,EACnB,KAAK,OAAO,OAAO,GAAK,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,KAE1D,aACE,OACEA,EAAY,OAAO,EACnB,KAAK,OAAO,OAAO,GAAK,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,KAE1D,WACE,OACEA,EAAY,OAAO,EACnB,KAAK,OAAO,OAAO,GAAK,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,KAE1D,QACE,OACEA,EAAY,OAAO,EACnB,KAAK,OAAO,OAAO,GAAK,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,IAE5D,CACF,CACF,ECzMO,IAAMQ,GAAN,MAAMA,EAAwC,CA2CnD,YACEC,EACQC,EACR,CADQ,YAAAA,EA5CV,KAAQ,OAAS,GAEjB,KAAQ,SAA+B,KACvC,KAAQ,iBAA4C,KAEpD,KAAQ,OAAwB,KAQhC,KAAiB,aAAkC,CAAC,EACpD,KAAiB,aAAkC,CAAC,EACpD,KAAiB,oBAAsB,IAAI,IAG3C,KAAQ,sBAAmC,IAAI,IAE/C,KAAQ,kBAA+B,IAAI,IA2uB3C,KAAQ,iBAGG,KAptBT,KAAK,OAAS,IAAIC,EAChBC,EAAWF,EAAO,WAAW,EAAE,EAAIE,EAAWH,CAAM,CACtD,EACA,KAAK,WAAa,KAAK,OAAO,QAAQ,GAAI,EAAE,EAC5C,KAAK,WAAa,KAAK,OAAO,QAAQ,EAAG,KAAK,UAAU,EACxD,KAAK,aAAe,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,IAClD,KAAK,aAAe,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,IAClD,KAAK,YAAc,KAAK,OAAO,QAAQ,GAAI,EAAE,EAAI,GACnD,CAEA,KAAKI,EAAU,CACb,KAAK,GAAKA,EACN,KAAK,OAAO,OAAO,EAAE,CAG3B,CAEQ,6BAA8B,CACpC,IAAMC,EAAS,KAAK,OACpB,GAAIA,IAAW,KAAM,OACN,KAAK,GAAG,QAAQ,EAAE,OAAQC,GAAMA,EAAE,GAAG,IAAMD,EAAO,GAAG,CAAC,EAE9D,QAASE,GAAkB,CAG9BA,EAAM,kBAAkBF,CAAM,GAC9B,CAAC,KAAK,oBAAoB,IAAIE,EAAM,GAAG,CAAC,GAExCF,EAAO,eAAeE,EAAO,GAAY,EACzC,KAAK,oBAAoB,IAAIA,EAAM,GAAG,CAAC,GAEvC,CAACA,EAAM,kBAAkBF,CAAM,GAC/B,KAAK,oBAAoB,IAAIE,EAAM,GAAG,CAAC,IAEvCF,EAAO,eAAeE,EAAO,EAAa,EAC1C,KAAK,oBAAoB,OAAOA,EAAM,GAAG,CAAC,EAE9C,CAAC,CACH,CAEQ,iCAAkC,CACxC,IAAMF,EAAS,KAAK,OACpB,GAAIA,IAAW,KAAM,OACN,KAAK,GAAG,QAAQ,EAAE,OAAQC,GAAMA,EAAE,GAAG,IAAMD,EAAO,GAAG,CAAC,EAE9D,QAASE,GAAkB,CAG9BF,EAAO,SAASE,CAAK,GAAK,GAC1B,CAACF,EAAO,kBAAkBE,CAAK,GAC/B,CAACF,EAAO,aAAaE,CAAK,EAE1BF,EAAO,WAAWE,EAAO,EAAK,EAE9BF,EAAO,SAASE,CAAK,GAAK,GAC1BF,EAAO,kBAAkBE,CAAK,GAE9BF,EAAO,YAAYE,CAAK,CAE5B,CAAC,CACH,CAEA,KAAKC,EAAe,CAWlB,GARE,KAAK,SAAW,MAChB,KAAK,OAAO,QAAQ,GACpB,KAAK,GAAG,OAAO,EAAE,WAAW,EAAE,aAAe,SAE7C,KAAK,gCAAgC,EACrC,KAAK,4BAA4B,GAG/BA,EAAQ,KAAK,aAAe,KAAK,WAIrC,IAAI,KAAK,GAAG,aAAa,EAAG,CAC1B,IAAMC,EAAK,KAAK,gBAAgB,EAChC,GAAIA,IAAO,KAAM,CACf,QAAQ,KAAK,gBAAgB,KAAK,OAAO,WAAW,IAAI,EAAE,EAC1D,MACF,CACA,KAAK,GAAG,aAAa,IAAIC,GAAe,KAAK,OAAO,WAAYD,CAAE,CAAC,EACnE,MACF,CAEA,GAAI,OAAK,SAAW,OAClB,KAAK,OACH,KAAK,GAAG,QAAQ,EAAE,KAAMH,GAAMA,EAAE,GAAG,IAAM,KAAK,OAAO,WAAW,EAAE,GAClE,KACE,KAAK,SAAW,OAKtB,IAAI,CAAC,KAAK,OAAO,QAAQ,EAAG,CAC1B,KAAK,OAAS,GACd,MACF,CAEA,GAAI,KAAK,WAAa,MAAQ,KAAK,mBAAqB,KAAM,CAE5D,KAAK,SAAW,IAAIK,GAClB,KAAK,OACL,KAAK,GACL,KAAK,OACL,KAAK,aACL,KAAK,aACL,KAAK,WACP,EACA,KAAK,iBAAmB,IAAIC,GAC1B,KAAK,OACL,KAAK,GACL,KAAK,MACP,EAGA,KAAK,SAAS,gBAAgB,KAAK,GAAG,aAAa,CAAC,EACpD,MACF,CAEA,KAAK,4BAA4B,EACjC,KAAK,iBAAiB,uBAAuB,EAC7C,KAAK,iBAAiB,gCAAgC,EACtD,KAAK,YAAY,EACjB,KAAK,gCAAgC,EACrC,KAAK,aAAa,EAClB,KAAK,YAAY,GACnB,CAEQ,aAAc,CACpB,GACE,KAAK,SAAW,MAChB,KAAK,WAAa,MAClB,KAAK,mBAAqB,KAE1B,MAAM,IAAI,MAAM,iBAAiB,EAGnC,IAAMC,EAAS,MAAM,KAAK,KAAK,OAAO,YAAY,CAAC,EAChD,QAASC,GAAM,KAAK,GAAG,UAAUA,CAAC,CAAC,EACnC,OACEA,GACC,KAAK,GAAG,OAAOA,CAAC,GAAK,KAAK,GAAG,QAAQA,CAAC,IAAM,KAAK,QAAQ,QAAQ,CACrE,EACIC,EAAmB,CACvB,GAAG,IAAI,IACLF,EACG,IAAKC,GAAM,KAAK,GAAG,gBAAgB,KAAK,GAAG,QAAQA,CAAC,CAAC,CAAC,EACtD,OAAQ,GAAmB,EAAE,SAAS,CAAC,CAC5C,CACF,EAAE,KAAK,CAACE,EAAGC,IAAMD,EAAE,OAAO,EAAIC,EAAE,OAAO,CAAC,EAClCC,EAAmBH,EAAiB,OACvC,GAAM,KAAK,QAAQ,WAAW,CAAC,IAAM,EACxC,EACMI,EAAmBJ,EAAiB,OACvC,GAAM,KAAK,QAAQ,WAAW,CAAC,IAAM,EACxC,EAMA,GAHgCF,EAAO,KACpCC,GAAM,CAAC,KAAK,GAAG,SAASA,CAAC,GAAK,CAAC,KAAK,GAAG,WAAWA,CAAC,CACtD,EAC6B,CAC3B,KAAK,SAAS,WAAW,KAAK,GAAG,aAAa,CAAC,EAC/C,MACF,CAEA,GAAIK,EAAiB,SAAW,EAC1B,KAAK,OAAO,OAAO,CAAC,GACtB,KAAK,iBAAiB,MAEnB,CACL,GAAI,KAAK,OAAO,OAAO,EAAE,EAAG,CAC1B,KAAK,iBAAiBA,CAAgB,EACtC,MACF,CAEA,KAAK,iBAAiB,0BAA0BA,CAAgB,CAClE,CAEA,KAAK,SAAS,aAAa,EAE3B,KAAK,SAAS,iBAAiBD,EAAkBC,CAAgB,EAEjE,KAAK,cAAc,KAAK,SAAS,mBAAmBA,CAAgB,CAAC,CACvE,CAEQ,cAAcZ,EAAsB,CAC1C,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMa,EAAQ,KAAK,OAAO,oBAA0B,EACpD,GACEA,EAAM,SAAW,GACjB,KAAK,OAAO,KAAK,EAAI,KAAK,gBAAsB,GAChDb,IAAU,MACVA,EAAM,KAAK,IAAM,OACjB,KAAK,OAAO,aAAaA,CAAK,EAE9B,OAGF,IAAMc,EACJ,KAAK,OAAO,KAAK,EAAI,KAAK,oBAA0B,8BAGhDC,EAAQD,IAAa,gBAAwB,GAAK,GAElDE,EAAahB,EAAM,gEAMzB,EACMiB,EAAiBD,EAAW,IAAKE,GAAMA,EAAE,KAAK,CAAC,EAE/CC,EADc,KAAK,uBAAuB,EAAE,EACrB,OAAOF,CAAc,EAE9CG,EAA2B,KAC3BC,EAAY,EAChB,KAAK,oBAAoB,EACzBC,EAAO,QAAWC,KAAQ,IAAI,IAAIJ,CAAQ,EAAG,CAC3C,GAAII,IAAS,KAAM,SACnB,IAAMC,EAAcC,GAAiB,KAAK,GAAIF,EAAMR,CAAK,EAEtD,OAAOU,GAAiB,KAAK,GAAIF,EAAM,KAAK,MAAMR,EAAQ,CAAC,CAAC,CAAC,EAChE,QAAWR,KAAKiB,EAEd,GAAI,KAAK,GAAG,MAAMjB,CAAC,IAAMP,EACvB,SAASsB,EAGb,GAAI,CAAC,KAAK,OAAO,SAASR,EAAUS,CAAI,EAAG,SAC3C,IAAMG,EAAQ,KAAK,cAAcH,EAAMV,EAAOG,CAAU,EACpDU,EAAQL,IACVD,EAAWG,EACXF,EAAYK,EAEhB,CACIN,IAAa,MACf,KAAK,SAASA,EAAUN,EAAUd,CAAK,CAE3C,CAEQ,qBAAsB,CAE5B,IAAM2B,EAAO,KAAK,GAAG,MAAM,EAC3B,KACE,KAAK,aAAa,OAAS,GAC3B,KAAK,aAAa,CAAC,EAAE,CAAC,EAAI,IAASA,GAEnC,KAAK,aAAa,MAAM,CAE5B,CAEQ,SACNJ,EACAT,EACAc,EACA,CACA,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMD,EAAO,KAAK,GAAG,MAAM,EAC3B,KAAK,aAAa,KAAK,CAACA,EAAMJ,CAAI,CAAC,EACnC,KAAK,GAAG,aAAa,IAAIM,GAAcf,EAAU,KAAK,OAAQS,CAAI,CAAC,EACnE,KAAK,UAAU,eAAeK,CAAY,CAC5C,CAEQ,cAAcL,EAAeV,EAAeiB,EAAyB,CAE3E,IAAMC,EAAOC,GAAWT,EAAM,GAAI,EAAK,EACnCU,EAAYH,EACb,OAAQI,GAASH,EAAK,KAAK,GAAIG,EAAK,KAAK,CAAC,CAAC,EAC3C,IAAKA,GAAiB,CACrB,OAAQA,EAAK,KAAK,EAAG,CACnB,WACE,MAAO,MACT,mBACE,MAAO,KACT,mBACE,MAAO,KACT,WACE,MAAO,KACT,QACE,MAAO,EACX,CACF,CAAC,EACA,OAAO,CAACC,EAAMC,IAAQD,EAAOC,EAAK,CAAC,EAGhCC,EAASL,GAAWT,EAAM,GAAI,EAAK,EACzCU,GACE,IACAH,EAAQ,OACLI,GACCA,EAAK,KAAK,IAAM,gBAAwBG,EAAO,KAAK,GAAIH,EAAK,KAAK,CAAC,CACvE,EAAE,OAGJ,IAAMI,EAAYzB,EAAM,IAAKK,GAAMA,EAAE,KAAK,CAAC,EACrCqB,EAASC,GAAgB,KAAK,GAAIF,EAAW,CAACf,CAAI,CAAC,EACzD,GAAIgB,IAAW,KAAM,MAAM,IAAI,MAAM,gBAAgB,EACrD,GAAM,CAAE,EAAGE,CAAY,EAAIF,EACrBG,EAAkB,KAAK,GAAG,qBAAqBnB,EAAMkB,CAAW,EAChEE,EAAwB,KAAK,KAAKD,CAAe,EACvD,OAAAT,GAAaU,EAAwB,GAGrCV,GAAa,KAAK,aACf,OAAO,CAAC,CAACW,EAAOrB,CAAI,IAAMQ,EAAK,KAAK,GAAIR,CAAI,CAAC,EAC7C,IAAKsB,GAAM,GAAS,EACpB,OAAO,CAACV,EAAMC,IAAQD,EAAOC,EAAK,CAAC,EAE/BH,CACT,CAEQ,aAAc,CACpB,OACE,KAAK,2BAAoCa,GAAQA,CAAG,GACpD,KAAK,2BAAoCA,GAAQA,CAAG,GACpD,KAAK,kBAAkB,GACvB,KAAK,8BAAuCA,GAAQA,CAAG,GACvD,KAAK,mCAA2CA,IAASA,EAAM,IAAM,CAAC,GACtE,KAAK,mCAA2CA,GAAQA,GAAO,CAAC,GAChE,KAAK,mCAA2CA,GAAQA,GAAO,CAAC,CAEpE,CAEQ,oBACNC,EACAC,EACA,CACA,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMC,EAAQ,KAAK,OAAO,WAAWF,CAAI,EACnCG,EAA0BF,EAAWC,EAAQ,CAAC,EAE9CE,EADW,KAAK,KAAKJ,CAAI,EACE,OAAOG,CAAuB,EAC/D,GAAI,KAAK,OAAO,KAAK,EAAIC,EACvB,MAAO,GAET,IAAM5B,EAAO,KAAK,mBAAmBwB,CAAI,EAKzC,OAJIxB,IAAS,MAGI,KAAK,OAAO,SAASwB,EAAMxB,CAAI,IAC/B,GACR,IAET,KAAK,GAAG,aAAa,IAAI6B,GAAsB,KAAK,OAAQL,EAAMxB,CAAI,CAAC,EAChE,GACT,CAEQ,mBAAmBwB,EAAgC,CACzD,GAAI,KAAK,KAAO,OAAW,MAAM,IAAI,MAAM,iBAAiB,EAC5D,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMM,EACJN,IAAS,OACL,KAAK,qBAAqB,EAAE,EAC5B,KAAK,uBAAuB,EAAE,EACpC,GAAIM,EAAM,SAAW,EAAG,OAAO,KAC/B,IAAMC,EAAgBC,GAAwB,KAAK,GAAI,KAAK,OAAQR,CAAI,EACpE3B,EAA2B,KAC3BC,EAAY,EAChB,QAAWd,KAAK8C,EAAO,CACrB,IAAMG,EAAIF,EAAc/C,CAAC,EACrBiD,GAAKnC,GAAaD,IAAa,MAC9B,KAAK,OAAO,SAAS2B,EAAMxC,CAAC,IAEjCa,EAAWb,EACXc,EAAYmC,EACd,CACA,OAAOpC,CACT,CAEQ,qBAAqBqC,EAA6B,CACxD,IAAMJ,EAAQ,MAAM,KAAK,KAAK,OAAQ,YAAY,CAAC,EAAE,OAAQ9C,GAC3D,KAAK,GAAG,aAAaA,CAAC,CACxB,EACA,OAAO,MAAM,KAAK,KAAK,aAAa8C,EAAOI,CAAQ,CAAC,CACtD,CAEA,CAAS,aAAgBhD,EAAQiD,EAAkC,CACjE,GAAIjD,EAAE,QAAUiD,EAEd,MAAOjD,MACF,CAEL,IAAMkD,EAAY,IAAI,IAAOlD,CAAC,EAC9B,KAAOiD,KAAc,CACnB,IAAMnD,EAAI,KAAK,OAAO,YAAYoD,CAAS,EAC3CA,EAAU,OAAOpD,CAAC,EAClB,MAAMA,CACR,CACF,CACF,CAEQ,mBAA6B,CACnC,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,GAAI,CAAC,KAAK,OAAO,OAAO,EAAE,EACxB,MAAO,GAET,IAAMqD,EAAQ,KAAK,OAAO,YAAmB,EACvCC,EAAQ,KAAK,OAAO,eAAsB,EAChD,GACED,EAAM,OAAS,GACfC,EAAM,SAAW,GACjB,KAAK,OAAO,KAAK,EAAI,KAAK,cAAqB,EAC/C,CACA,IAAMC,EAAO,KAAK,OAAO,YAAYF,CAAK,EACpCG,EAAa,KAAK,iBAAiBD,EAAK,KAAK,CAAC,EACpD,OAAIC,IAAe,KACV,GAEQ,KAAK,OAAO,mBAA2BA,CAAU,IACjD,IACf,QAAQ,KAAK,wBAAwB,EAC9B,KAET,KAAK,GAAG,aACN,IAAIX,GAAsB,KAAK,iBAA0BW,CAAU,CACrE,EACO,GACT,CACA,MAAO,EACT,CAEQ,uBAAuBN,EAA6B,CAC1D,IAAMjC,EAAcwC,GAClB,KAAK,GACL,KAAK,OAAQ,YAAY,CAC3B,EACMX,EAAmB,CAAC,EAC1B,QAASY,EAAI,EAAGA,EAAIR,EAAUQ,IAAK,CACjC,IAAM1C,EAAO,KAAK,kBAAkB,KAAK,OAASC,CAAW,EACzDD,IAAS,MACX8B,EAAM,KAAK9B,CAAI,CAEnB,CACA,OAAO8B,CACT,CAEQ,kBACNtD,EACAyB,EAA+C,KAC/B,CAChBA,MAAgBwC,GAAqB,KAAK,GAAIjE,EAAE,YAAY,CAAC,GAC7D,QAAS,EAAI,EAAG,EAAI,IAAK,IAAK,CAC5B,IAAMmE,EAAQ,KAAK,OAAO,QAAQ1C,EAAY,IAAI,EAAGA,EAAY,IAAI,CAAC,EAChE2C,EAAQ,KAAK,OAAO,QAAQ3C,EAAY,IAAI,EAAGA,EAAY,IAAI,CAAC,EACtE,GAAI,CAAC,KAAK,GAAG,QAAQ,IAAI4C,GAAKF,EAAOC,CAAK,CAAC,EAEzC,SAEF,IAAME,EAAW,KAAK,GAAG,IAAIH,EAAOC,CAAK,EACzC,GAAI,KAAK,GAAG,MAAME,CAAQ,IAAMtE,EAC9B,OAAOsE,CAEX,CACA,OAAO,IACT,CAEQ,iBAAiBC,EAAmC,CAE1D,QAASC,EAAW,EAAGA,EAAW,GAAIA,IAAY,CAChD,IAAML,EAAQ,KAAK,OAAO,QACxB,KAAK,GAAG,EAAEI,CAAQ,EAAI,IACtB,KAAK,GAAG,EAAEA,CAAQ,EAAI,GACxB,EACMH,EAAQ,KAAK,OAAO,QACxB,KAAK,GAAG,EAAEG,CAAQ,EAAI,IACtB,KAAK,GAAG,EAAEA,CAAQ,EAAI,GACxB,EACA,GAAI,CAAC,KAAK,GAAG,aAAaJ,EAAOC,CAAK,EACpC,SAEF,IAAM5C,EAAO,KAAK,GAAG,IAAI2C,EAAOC,CAAK,EAErC,GAAK,KAAK,GAAG,QAAQ5C,CAAI,EAGzB,OAAOA,CACT,CACA,OAAO,IACT,CAEQ,KAAKwB,EAAsB,CACjC,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,OAAO,KAAK,GAAG,SAASA,CAAI,EAAE,KAAK,KAAK,GAAI,KAAK,MAAM,CACzD,CAEA,iBAAiBnC,EAA6B,CAAC,EAAG,CAChD,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAM4D,EAAa,MAAM,KAAK,KAAK,OAAO,YAAY,CAAC,EAAE,OAAQjE,GAC/D,KAAK,GAAG,aAAaA,CAAC,CACxB,EACA,GAAIiE,EAAW,SAAW,EACxB,OAGF,IAAMC,EAAM,KAAK,OAAO,YAAYD,CAAU,EAG1CE,EAAM,KAAK,iBAAiBD,EAAK7D,EAAkB,EAAI,EACvD8D,IAAQ,OAEVA,EAAM,KAAK,iBAAiBD,EAAK7D,EAAkB,EAAK,EACpD8D,IAAQ,OAKd,KAAK,GAAG,aACN,IAAIC,GACF,KAAK,OACL,KAAK,GAAG,MAAMD,CAAG,EAAE,GAAG,EACtBA,EACA,KAAK,OAAO,OAAO,EAAI,EACvB,IACF,CACF,CAEF,CAEA,iBAAkC,CAEhC,IAAIE,EAAQ,EACZ,KAAOA,EAAQ,IAAI,CACjBA,IACA,IAAMC,EAAO,KAAK,OAAO,UACnBC,EAAI,KAAK,OAAO,QAAQD,EAAK,EAAI,GAAOA,EAAK,EAAI,EAAK,EACtDE,EAAI,KAAK,OAAO,QAAQF,EAAK,EAAI,GAAOA,EAAK,EAAI,EAAK,EAC5D,GAAI,CAAC,KAAK,GAAG,aAAaC,EAAGC,CAAC,EAC5B,SAEF,IAAMxD,EAAO,KAAK,GAAG,IAAIuD,EAAGC,CAAC,EAC7B,GAAI,KAAK,GAAG,OAAOxD,CAAI,GAAK,CAAC,KAAK,GAAG,SAASA,CAAI,EAAG,CACnD,GACE,KAAK,GAAG,YAAYA,CAAI,IAAM,GAC9B,KAAK,OAAO,OAAO,CAAC,EAEpB,SAEF,OAAOA,CACT,CACF,CACA,OAAO,IACT,CAEQ,iBACNA,EACAX,EACAoE,EAA4B,GACZ,CAChB,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMF,EAAI,KAAK,GAAG,EAAEvD,CAAI,EAClBwD,EAAI,KAAK,GAAG,EAAExD,CAAI,EACxB,QAAS0C,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC5B,IAAMC,EAAQ,KAAK,OAAO,QAAQY,EAAI,IAAKA,EAAI,GAAG,EAC5CX,EAAQ,KAAK,OAAO,QAAQY,EAAI,IAAKA,EAAI,GAAG,EAClD,GAAI,CAAC,KAAK,GAAG,aAAab,EAAOC,CAAK,EACpC,SAEF,IAAME,EAAW,KAAK,GAAG,IAAIH,EAAOC,CAAK,EACzC,GAAI,CAAC,KAAK,GAAG,OAAOE,CAAQ,EAC1B,SAEF,IAAMY,EAAQ,KAAK,GAAG,MAAMZ,CAAQ,EACpC,GAAIY,IAAU,KAAK,QAIf,EAAAA,EAAM,SAAS,GAAKrE,EAAiB,SAASqE,CAAK,IAInD,EAAAA,EAAM,SAAS,GAAKA,EAAM,OAAO,EAAI,KAAK,OAAO,OAAO,EAAI,IAIhE,GAAID,GACF,GAAI,CAACC,EAAM,SAAS,GAAKA,EAAM,KAAK,IAAM,MACxC,OAAOZ,UAIL,CAACY,EAAM,SAAS,GAAK,CAACA,EAAM,WAAW,KAAK,MAAM,EACpD,OAAOZ,EAGb,CACA,OAAO,IACT,CAGQ,cAAwB,CAC9B,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAS3D,GARI,KAAK,OAAO,oBAA0B,EAAE,SAAW,GAGnD,KAAK,OAAO,KAAK,EAAI,KAAK,WAAkB,IAIhD,KAAK,oBAAoB,EACrB,KAAK,aAAa,OAAS,GAC7B,MAAO,GAGT,GAAI,KAAK,OAAO,OAAO7E,GAAmB,oBAAoB,EAC5D,YAAK,oBAAoB,EAClB,GAGT,IAAM0F,EAAoB,KAAK,wBAAwB,EACvD,GAAIA,EACF,YAAK,cAAcA,CAAiB,EAC7B,GAGT,IAAMC,EAAsB,KAAK,0BAA0B,EAC3D,GAAIA,EACF,YAAK,cAAcA,CAAmB,EAC/B,GAGT,IAAMC,EAAsB,KAAK,0BAA0B,EAC3D,OAAIA,GACF,KAAK,cAAcA,CAAmB,EAC/B,IAGF,EACT,CAEQ,yBAAyC,CAC/C,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMC,EAAY,KAAK,0BAA0B,EAAE,OAAQtF,GACzD,KAAK,kBAAkBA,CAAC,CAC1B,EACA,OAAIsF,EAAU,SAAW,EAAU,MACnCA,EAAU,KAAK,CAAC5E,EAAGC,IAAMA,EAAE,cAAc,EAAID,EAAE,cAAc,CAAC,EACvD4E,EAAU,CAAC,EACpB,CAEQ,2BAA2C,CACjD,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMC,EAAY,KAAK,GAAG,aAAa,EACvC,GAAIA,IAAc,EAAG,OAAO,KAC5B,IAAIC,EAA+C,KACnD,QAAWxF,KAAK,KAAK,0BAA0B,EAAG,CAChD,IAAIyF,EAAW,EACTC,EAAO1F,EAAE,KAAK,EACpB,GAAI0F,IAAS,KAAM,CACjB,IAAMC,EAAc,KAAK,GACtB,QAAQ,EACR,OAAQZ,GAAMA,EAAE,KAAK,IAAMW,GAAQX,EAAE,SAAS,CAAC,EAI5Ca,EAHgBD,EACnB,IAAKZ,GAAMA,EAAE,cAAc,CAAC,EAC5B,OAAO,CAACrE,EAAGC,IAAMD,EAAIC,EAAG,CAAC,EACM4E,EAClC,GAAIK,GAAanG,GAAmB,8BAA+B,CAEjE,IAAIoG,EAA+B,KAC/BC,EAAe,GACnB,QAAWC,KAAUJ,EAAa,CAChC,IAAMrC,EAAQyC,EAAO,cAAc,EAC/BzC,EAAQwC,IACVA,EAAexC,EACfuC,EAAgBE,EAEpB,CACIF,IAAkB7F,EACpByF,EAAWG,EAEXH,EAAW,CAEf,CACF,KAAO,CACL,IAAMO,EAAQhG,EAAE,cAAc,EAAIuF,EAC9BS,GAASvG,GAAmB,sCAC9BgG,EAAWO,EACf,CACIP,EAAW,IACTD,IAAS,MAAQC,EAAWD,EAAK,YAAUA,EAAO,CAAE,EAAAxF,EAAG,SAAAyF,CAAS,EAExE,CACA,OAAOD,EAAOA,EAAK,EAAI,IACzB,CAEQ,2BAA2C,CACjD,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMS,EAAe,KAAK,0BAA0B,EAEpD,GAAIA,EAAa,SAAW,EAAG,OAAO,KAEtC,IAAMC,EAAa,KAAK,GACrB,QAAQ,EACR,OAAQlG,GAAMA,EAAE,SAAS,CAAC,EAC1B,IAAKA,IAAO,CAAE,EAAAA,EAAG,UAAW,KAAK,YAAYA,CAAC,CAAE,EAAE,EAClD,KAAK,CAACU,EAAGC,IAAMA,EAAE,UAAYD,EAAE,SAAS,EAE3C,GAAIwF,EAAW,OAAS,EAAG,OAAO,KAElC,IAAMC,EAAYD,EAAW,CAAC,EAE9B,GAAIC,EAAU,WAAa1G,GAAmB,4BAC5C,OAAO,KAIT,IAAM2G,EAFgBF,EAAW,CAAC,EAAE,UAGlBzG,GAAmB,8BAErC,OAAI0G,EAAU,WAAaC,GAClBH,EAAa,KAAMjG,GAAMA,IAAMmG,EAAU,CAAC,EAAIA,EAAU,EAG1D,IACT,CAQQ,2BAAsC,CAE5C,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAE3D,GACE,KAAK,kBACL,KAAK,GAAG,MAAM,EAAI,KAAK,iBAAiB,KAAO,GAE/C,OAAO,KAAK,iBAAiB,QAG/B,IAAME,EAAU,KAAK,GAAG,QAAQ,EAAE,OAAQrG,GAEtCA,IAAM,KAAK,QACXA,EAAE,SAAS,GACXA,EAAE,KAAK,IAAM,OACb,CAAC,KAAK,OAAQ,aAAaA,CAAC,CAE/B,EAED,YAAK,iBAAmB,CAAE,KAAM,KAAK,GAAG,MAAM,EAAG,QAAAqG,CAAQ,EAClDA,CACT,CAEQ,kBAAkBC,EAA2B,CACnD,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,IAAMC,EAAaD,EAAS,YAAmB,EAC/C,QAAWE,KAAQD,EAAY,CAC7B,IAAM5B,EAAM6B,EAAK,WAAW,EAE5B,GADI,CAAC7B,GACD,CAAC,KAAK,GAAG,SAASA,CAAG,EAAG,SAE5B,GADc,KAAK,GAAG,MAAMA,CAAG,IACjB,KAAK,OACjB,MAAO,EAEX,CACA,MAAO,EACT,CAEQ,YAAY3E,EAAmB,CACrC,OAAOA,EAAE,gBAAuB,CAClC,CAEQ,yBAAyByG,EAAgC,CAC/D,OAAOC,GAAyB,KAAK,GAAID,CAAM,CACjD,CAGQ,cAAcE,EAAqB,CACzC,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAE3D,KAAK,UAAU,eAAeA,CAAK,EAEnC,IAAMC,EAAa,KAAK,yBAAyBD,CAAK,EACtD,GAAIC,GAAc,KAAK,OAAO,gBAAwBA,CAAU,EAAG,CACjE,KAAK,SAASA,CAAU,EACxB,MACF,CACF,CAEQ,SAASpF,EAAqB,CACpC,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,KAAK,oBAAoBA,CAAI,EAC7B,KAAK,GAAG,aAAa,IAAIqF,GAAc,KAAK,OAAQrF,CAAI,CAAC,CAC3D,CAEQ,oBAAoBA,EAAsB,CAChD,GAAI,KAAK,SAAW,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAC3D,KAAK,oBAAoB,EACzB,IAAMI,EAAO,KAAK,GAAG,MAAM,EAErBkF,EACJtF,GAAQ,MAAM,KAAK,KAAK,OAAO,MAAM,CAAC,EAAE,CAAC,GAAK,KAAK,GAAG,IAAI,EAAG,CAAC,EAChE,KAAK,aAAa,KAAK,CAACI,EAAMkF,CAAY,CAAC,CAC7C,CAEQ,qBAAsB,CAC5B,IAAMC,EAAStH,GAAmB,oBAC5BmC,EAAO,KAAK,GAAG,MAAM,EAC3B,KACE,KAAK,aAAa,OAAS,GAC3B,KAAK,aAAa,CAAC,EAAE,CAAC,EAAImF,GAAUnF,GAEpC,KAAK,aAAa,MAAM,CAE5B,CAGQ,iCAAwC,CAC9C,GAAI,KAAK,SAAW,KAGpB,MAAK,OACF,iBAA4B,EAC5B,QAAST,GAAM,KAAK,sBAAsB,IAAIA,CAAC,CAAC,EAGnD,QAAW6F,KAAQ,MAAM,KAAK,KAAK,qBAAqB,EACjDA,EAAK,SAAS,IAEbA,EAAK,oBAAoB,GAC3B,KAAK,0BAA0BA,EAAK,KAAK,CAAC,EAE5C,KAAK,sBAAsB,OAAOA,CAAI,GAG5C,CAGQ,6BAAoC,CAC1C,GAAI,KAAK,SAAW,KAGpB,MAAK,OACF,kBAAwB,EACxB,QAAS7F,GAAM,KAAK,kBAAkB,IAAIA,CAAC,CAAC,EAG/C,QAAW6F,KAAQ,MAAM,KAAK,KAAK,iBAAiB,EAAG,CACrD,GAAI,CAACA,EAAK,SAAS,EAAG,CACpB,KAAK,kBAAkB,OAAOA,CAAI,EAClC,QACF,CACIA,EAAK,MAAM,EAAE,GAAG,IAAM,KAAK,OAAO,GAAG,IAEvC,KAAK,0BAA0BA,EAAK,KAAK,CAAC,EAC1C,KAAK,kBAAkB,OAAOA,CAAI,EAEtC,EACF,CAEQ,0BAA0BxF,EAAqB,CACrD,GAAI,KAAK,SAAW,KAAM,OAE1B,GAAM,CAAE,WAAAyF,CAAW,EAAI,KAAK,GAAG,OAAO,EAAE,WAAW,EAEnD,GACGA,IAAe,UAAqB,KAAK,OAAO,QAAQ,EAAG,GAAG,EAAI,IAClEA,IAAe,QAAmB,KAAK,OAAO,QAAQ,EAAG,GAAG,EAAI,IAChEA,IAAe,cAAyB,KAAK,OAAO,QAAQ,EAAG,GAAG,EAAI,GACvE,CAEA,GADiB,KAAK,OAAO,mBAA2BzF,CAAI,IAC3C,GACf,OAEF,KAAK,GAAG,aACN,IAAI6B,GAAsB,KAAK,iBAA0B7B,CAAI,CAC/D,CACF,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,EAn6Ba/B,GA0Ba,oBAAsB,GA1BnCA,GA6Ba,qBAAuB,EA7BpCA,GAgCa,8BAAgC,GAhC7CA,GAmCa,oCAAsC,IAnCnDA,GAsCa,8BAAgC,IAtC7CA,GAyCa,4BAA8B,GAzCjD,IAAMyH,GAANzH,GC5BA,IAAM0H,GAAN,KAAqD,CAC1D,YACUC,EACAC,EACR,CAFQ,YAAAD,EACA,oBAAAC,CACP,CAEH,KAAKC,EAAUC,EAAqB,CAClC,KAAK,OAAO,iBAAiB,KAAK,cAAc,CAClD,CAEA,KAAKA,EAAqB,CAE1B,CAEA,UAAoB,CAClB,MAAO,EACT,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECpBO,IAAMC,GAAN,KAAgD,CACrD,YACmBC,EACAC,EACAC,EACjB,CAHiB,WAAAF,EACA,YAAAC,EACA,cAAAC,CAChB,CAEH,KAAKC,EAAUC,EAAqB,CAClC,GAAI,CAACD,EAAG,WAAW,KAAK,QAAQ,EAAG,CACjC,QAAQ,KAAK,kCAAkC,KAAK,QAAQ,YAAY,EACxE,MACF,CACA,IAAME,EAAU,KAAK,MAClB,eAAsB,EACtB,KAAMC,GAAMA,EAAE,GAAG,IAAM,KAAK,MAAM,EACrC,GAAI,CAACD,EAAS,CACZ,QAAQ,KAAK,yCAAyC,EACtD,MACF,CACA,GAAI,CAACA,EAAQ,SAAS,EAAG,CACvB,QAAQ,KAAK,6CAA6C,EAC1D,MACF,CACAA,EAAQ,cAAc,KAAK,QAAQ,EACnCA,EAAQ,cAAc,MAAS,CACjC,CAEA,KAAKD,EAAqB,CAAC,CAE3B,UAAoB,CAClB,MAAO,EACT,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECrCO,IAAMG,GAAN,KAAyC,CAC9C,UAAoB,CAClB,MAAO,EACT,CACA,wBAAkC,CAChC,MAAO,EACT,CACA,KAAKC,EAAUC,EAAqB,CAAC,CACrC,KAAKA,EAAqB,CAAC,CAC7B,ECTO,IAAMC,GAAN,KAA8C,CAMnD,YACUC,EACAC,EACAC,EACAC,EACR,CAJQ,YAAAH,EACA,iBAAAC,EACA,kBAAAC,EACA,YAAAC,EANV,KAAQ,OAAS,EAOd,CAEH,KAAKC,EAAUC,EAAqB,CAElC,GADA,KAAK,GAAKD,EACN,CAACA,EAAG,UAAU,KAAK,WAAW,EAAG,CACnC,QAAQ,KACN,iCAAiC,KAAK,WAAW,YACnD,EACA,KAAK,OAAS,GACd,MACF,CAEA,KAAK,UAAYA,EAAG,OAAO,KAAK,WAAW,CAC7C,CAEA,KAAKC,EAAqB,CACxB,IAAMC,EAAU,KAAK,kBAAkB,KAAK,YAAY,EAExD,KAAK,GAAG,YACNA,EAAQ,CAAC,EACTA,EAAQ,CAAC,EACT,KAAK,OACL,KAAK,UAAU,GAAG,EAClB,GACA,KAAK,OAAO,GAAG,CACjB,EAEA,KAAK,GAAG,YACNA,EAAQ,CAAC,EACTA,EAAQ,CAAC,EACT,KAAK,OACL,KAAK,OAAO,GAAG,EACf,GACA,KAAK,UAAU,GAAG,CACpB,EAEA,QAAQ,IACN,eAAe,KAAK,OAAO,IAAI,WAAM,KAAK,UAAU,WAAW,KAAKA,CAAO,EAC7E,EAEA,KAAK,OAAS,EAChB,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEQ,kBAAkBC,EAA2B,CAEnD,OADmBA,EAAQ,MAAM,GAAG,CAEtC,CACF,ECtEA,IAAMC,GAAc,GAEPC,GAAN,KAA4C,CAKjD,YACUC,EACAC,EACR,CAFQ,YAAAD,EACA,cAAAC,EANV,KAAQ,OAAS,GACjB,KAAQ,eAAiB,EAMtB,CAEH,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,EACV,KAAK,UAAYA,EAAG,MAAM,CAC5B,CAEA,KAAKC,EAAqB,CACnB,KAAK,iBACR,KAAK,OAAO,aAAa,KAAK,QAAQ,EACtC,KAAK,eAAiB,IAGpB,KAAK,GAAG,MAAM,GAAK,KAAK,UAAYL,KACtC,KAAK,OAAO,eAAe,KAAK,QAAQ,EACxC,KAAK,OAAS,GAElB,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECxCO,IAAMM,GAAN,KAAiD,CAKtD,YACUC,EACAC,EACR,CAFQ,eAAAD,EACA,cAAAC,EAJV,KAAQ,OAAS,EAKd,CAEH,KAAKC,EAAUC,EAAqB,CAClC,GAAI,CAACD,EAAG,UAAU,KAAK,QAAQ,EAAG,CAChC,QAAQ,KAAK,iCAAiC,KAAK,QAAQ,YAAY,EACvE,KAAK,OAAS,GACd,MACF,CAEA,KAAK,OAASA,EAAG,OAAO,KAAK,QAAQ,CACvC,CAEA,KAAKC,EAAqB,CACpB,KAAK,UAAU,UAAU,KAAK,MAAM,IACtC,KAAK,UAAU,OAAO,KAAK,MAAM,EACjC,KAAK,OAAO,eAAe,KAAK,UAAW,GAAG,GAEhD,KAAK,OAAS,EAChB,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECnCO,IAAMC,GAAN,KAAqD,CAI1D,YACUC,EACAC,EACR,CAFQ,YAAAD,EACA,YAAAC,CACP,CAEH,KAAKC,EAAUC,EAAqB,CAKlC,GAJA,KAAK,UAAY,KAAK,OACnB,MAAM,EACN,KAAMC,GAASA,EAAK,GAAG,IAAM,KAAK,MAAM,EAEvC,KAAK,YAAc,OAAW,CAChC,QAAQ,KAAK,wBAAwB,EACrC,MACF,CAEA,GAAI,CAAC,KAAK,OAAO,eAAe,KAAK,SAAS,EAAG,CAC/C,QAAQ,KACN,yCAAyC,KAAK,UAAU,KAAK,CAAC,qBAChE,EACA,MACF,CACA,KAAK,OAAO,YAAY,KAAK,SAAS,CAExC,CAEA,KAAKD,EAAqB,CAE1B,CAEA,UAAoB,CAClB,MAAO,EACT,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECnCO,IAAME,GAAN,MAAMA,EAAc,CAMzB,YACUC,EACRC,EACA,CAFQ,QAAAD,EALV,KAAQ,QAA4B,CAAC,EAQnC,KAAK,OAAS,IAAIE,EAAaC,EAAWF,CAAM,CAAC,CACnD,CAEQ,UAAoB,CAC1B,IAAMG,EAAI,KAAK,OAAO,QAAQ,EAAG,KAAK,GAAG,MAAM,CAAC,EAC1CC,EAAI,KAAK,OAAO,QAAQ,EAAG,KAAK,GAAG,OAAO,CAAC,EAEjD,OAAO,KAAK,GAAG,IAAID,EAAGC,CAAC,CACzB,CAEQ,iBAAkC,CACxC,IAAIC,EAAQ,EAEZ,KAAOA,EAAQP,GAAc,iBAAiB,CAC5CO,IAEA,IAAMC,EAAO,KAAK,SAAS,EAE3B,GACE,CAAC,KAAK,GAAG,OAAOA,CAAI,GACpB,KAAK,GAAG,SAASA,CAAI,GACrB,KAAK,GAAG,SAASA,CAAI,EAErB,SAGF,IAAIC,EAAwB,GAC5B,QAAWC,KAAS,KAAK,QACvB,GACE,KAAK,GAAG,cAAcA,EAAM,KAAMF,CAAI,EACtCR,GAAc,mBACd,CACAS,EAAwB,GACxB,KACF,CAGF,GAAI,CAAAA,EAIJ,OAAOD,CACT,CAEA,OAAO,IACT,CAEA,cAAiC,CAC/B,QAAWG,KAAU,KAAK,GAAG,WAAW,EAAG,CACzC,GAAIA,EAAO,KAAK,IAAM,QACpB,SAGF,IAAMC,EAAY,KAAK,gBAAgB,EAEnCA,IAAc,MAKlB,KAAK,QAAQ,KAAK,IAAIC,GAAeF,EAAO,KAAK,EAAGC,CAAS,CAAC,CAChE,CAEA,OAAO,KAAK,OACd,CACF,EA3EaZ,GAGa,gBAAkB,IAH/BA,GAIa,mBAAqB,GAJxC,IAAMc,GAANd,GCuBA,IAAMe,GAAN,KAAe,CAIpB,YACUC,EACAC,EACAC,EACR,CAHQ,QAAAF,EACA,YAAAC,EACA,cAAAC,EAGR,KAAK,OAAS,IAAIC,EAAaC,EAAWH,CAAM,EAAI,CAAC,CACvD,CAEA,YAAYI,EAAyB,CACnC,OAAOA,EAAK,QAAQ,IAAKC,GAAM,KAAK,WAAWA,CAAC,CAAC,CACnD,CAEA,WAAWC,EAA2B,CACpC,IAAMC,EAAS,KAAK,GAAG,iBAAiBD,EAAO,QAAQ,EACvD,GAAI,CAACC,EACH,eAAQ,KAAK,wBAAwBD,EAAO,QAAQ,YAAY,EACzD,IAAIE,GAIb,OAAQF,EAAO,KAAM,CACnB,IAAK,SACH,OAAO,IAAIG,GACTH,EAAO,OACPC,EACAD,EAAO,SACP,IACF,EAEF,IAAK,gBACH,OAAO,IAAII,GAAiBH,EAAQD,EAAO,QAAQ,EACrD,IAAK,cACH,OAAO,IAAIK,GAAqBJ,EAAQD,EAAO,MAAM,EACvD,IAAK,eACH,OAAO,IAAIM,GAAqBL,EAAQD,EAAO,OAAQA,EAAO,IAAI,EACpE,IAAK,QACH,OAAO,IAAIO,GAAeN,EAAO,KAAK,EAAGD,EAAO,IAAI,EACtD,IAAK,OACH,OAAO,IAAIQ,GACTP,EACAD,EAAO,SACPA,EAAO,IACPA,EAAO,OACPA,EAAO,GACT,EACF,IAAK,kBACH,OAAO,IAAIS,GAAyBR,EAAQD,EAAO,SAAS,EAC9D,IAAK,uBACH,OAAO,IAAIU,GACTV,EAAO,UACPC,EACAD,EAAO,MACT,EACF,IAAK,gBACH,OAAO,IAAIW,GAAuBV,EAAQD,EAAO,SAAS,EAC5D,IAAK,eACH,OAAO,IAAIY,GAAsBX,EAAQD,EAAO,MAAM,EACxD,IAAK,QACH,OAAO,IAAIa,GAAeZ,EAAQD,EAAO,UAAWA,EAAO,KAAK,EAClE,IAAK,gBACH,OAAO,IAAIc,GACTb,EACAD,EAAO,UACPA,EAAO,MACT,EACF,IAAK,cACH,OAAO,IAAIe,GAAoBd,EAAQD,EAAO,UAAWA,EAAO,IAAI,EACtE,IAAK,UACH,OAAO,IAAIgB,GAAiBf,EAAQD,EAAO,SAAUA,EAAO,MAAM,EACpE,IAAK,cACH,OAAO,IAAIiB,GAAoBhB,EAAQD,EAAO,MAAM,EACtD,IAAK,aACH,OAAO,IAAIkB,GAAsBjB,EAAQD,EAAO,KAAMA,EAAO,IAAI,EACnE,IAAK,oBACH,OAAO,IAAImB,GAA2BlB,EAAQD,EAAO,SAAS,EAGhE,IAAK,oBACH,OAAO,IAAIoB,GAA0BnB,EAAQD,EAAO,MAAM,EAC5D,IAAK,cACH,OAAO,IAAIqB,GAAoBpB,EAAQD,EAAO,MAAM,EACtD,IAAK,aACH,OAAO,IAAIsB,GACTrB,EACAD,EAAO,UACPA,EAAO,aACPA,EAAO,MACT,EACF,IAAK,oBACH,OAAO,IAAIuB,GAA0BtB,EAAQD,EAAO,cAAc,EACpE,QACE,MAAM,IAAI,MAAM,eAAeA,CAAM,YAAY,CACrD,CACF,CAEA,UAAUwB,EAA8B,CACtC,OAAO,IAAIC,GAAW,KAAK,GAAI,KAAK,MAAM,EAAE,UAAUD,CAAO,CAC/D,CAEA,cAA4B,CAC1B,OAAO,IAAIE,GAAc,KAAK,GAAI,KAAK,MAAM,EAAE,aAAa,CAC9D,CAEA,qBAAmC,CACjC,IAAMC,EAAqB,CAAC,EAC5B,QAAWC,KAAU,KAAK,GAAG,QAAQ,EACnCD,EAAM,KAAK,IAAIE,GAAmB,KAAK,OAAQD,CAAM,CAAC,EAExD,OAAOD,CACT,CACF,ECnIO,IAAMG,GAAN,KAA6C,CAKlD,aAAc,CAJd,KAAQ,OAAS,GAEjB,KAAQ,GAAkB,IAEX,CAEf,KAAKC,EAAUC,EAAe,CAC5B,KAAK,GAAKD,CACZ,CAEA,KAAKC,EAAe,CAClB,GAAIA,EAAQ,KAAO,EAGnB,IAAI,KAAK,KAAO,KAAM,MAAM,IAAI,MAAM,iBAAiB,EAEnD,KAAK,GAAG,OAAO,EAAE,WAAW,EAAE,WAAa,eAC7C,KAAK,eAAe,EAEpB,KAAK,gBAAgB,EAEzB,CAEA,gBAAuB,CACrB,GAAI,KAAK,KAAO,KAAM,MAAM,IAAI,MAAM,iBAAiB,EACvD,IAAMC,EAAS,KAAK,GACjB,QAAQ,EACR,KAAK,CAAC,EAAGC,IAAMA,EAAE,cAAc,EAAI,EAAE,cAAc,CAAC,EACvD,GAAID,EAAO,SAAW,EACpB,OAEF,IAAME,EAAMF,EAAO,CAAC,EACdG,GACH,KAAK,GAAG,MAAM,EAAI,KAAK,GAAG,OAAO,EAAE,mBAAmB,GAAK,GACxDC,EACJ,KAAK,GAAG,aAAa,EAAI,KAAK,GAAG,oBAAoB,GAEpDF,EAAI,cAAc,EAAIE,EAA0B,IAC/C,KAAK,GAAG,OAAO,EAAE,0BAA0B,GAC5C,KAAK,GAAG,OAAO,EAAE,WAAW,EAAE,gBAAkB,QAC/CD,EAAc,KAAK,GAAG,OAAO,EAAE,WAAW,EAAE,cAAiB,IAAM,KAErE,KAAK,GAAG,UAAUD,EAAK,KAAK,GAAG,MAAM,EAAE,MAAM,CAAC,EAC9C,QAAQ,IAAI,GAAGA,EAAI,KAAK,CAAC,mBAAmB,EAC5C,KAAK,OAAS,GAElB,CAEA,iBAAwB,CACtB,GAAI,KAAK,KAAO,KAAM,MAAM,IAAI,MAAM,iBAAiB,EACvD,IAAMG,EAAc,IAAI,IACxB,QAAWC,KAAU,KAAK,GAAG,QAAQ,EAAG,CACtC,IAAMC,EAAOD,EAAO,KAAK,EAErBC,IAAS,MACbF,EAAY,IACVE,GACCF,EAAY,IAAIE,CAAI,GAAK,GAAKD,EAAO,cAAc,CACtD,CACF,CACA,IAAMN,EAAS,MAAM,KAAKK,EAAY,QAAQ,CAAC,EAAE,KAC/C,CAACG,EAAGP,IAAMA,EAAE,CAAC,EAAIO,EAAE,CAAC,CACtB,EACA,GAAIR,EAAO,SAAW,EACpB,OAEF,IAAME,EAAMF,EAAO,CAAC,EACdG,GACH,KAAK,GAAG,MAAM,EAAI,KAAK,GAAG,OAAO,EAAE,mBAAmB,GAAK,GACxDC,EACJ,KAAK,GAAG,aAAa,EAAI,KAAK,GAAG,oBAAoB,EAEvD,GADoBF,EAAI,CAAC,EAAIE,EAA0B,IAExC,KAAK,GAAG,OAAO,EAAE,0BAA0B,GACvD,KAAK,GAAG,OAAO,EAAE,WAAW,EAAE,gBAAkB,QAC/CD,EAAc,KAAK,GAAG,OAAO,EAAE,WAAW,EAAE,cAAiB,IAAM,EACrE,CACA,GAAID,EAAI,CAAC,IAAMO,EAAa,IAAK,OACjC,KAAK,GAAG,UAAUP,EAAI,CAAC,EAAG,KAAK,GAAG,MAAM,EAAE,MAAM,CAAC,EACjD,QAAQ,IAAI,GAAGA,EAAI,CAAC,CAAC,mBAAmB,EACxC,KAAK,OAAS,EAChB,CACF,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,wBAAkC,CAChC,MAAO,EACT,CACF,ECxGO,IAAMQ,GAAN,KAA8C,CAMnD,YACmBC,EACRC,EACAC,EACQC,EACAC,EACjB,CALiB,QAAAJ,EACR,gBAAAC,EACA,gBAAAC,EACQ,gBAAAC,EACA,SAAAC,EAVnB,KAAQ,6BAAwC,GAChD,KAAQ,6BAAwC,GAW9C,KAAK,WAAaD,EAAaH,EAAG,OAAO,EAAE,iBAAiB,CAC9D,CAEA,MAAMK,EAAwB,CAC5B,OAAI,KAAK,aAAeA,EACf,KAAK,WAEP,KAAK,UACd,CAEA,WAAoB,CAClB,OAAO,KAAK,UACd,CAEA,WAAoB,CAClB,OAAO,KAAK,UACd,CAEA,WAAkB,CAChB,OAAO,KAAK,UACd,CAEA,QAAe,CACb,KAAK,GAAG,eAAe,IAAI,CAC7B,CAEA,oBAAoBA,EAAsB,CACpC,KAAK,aAAeA,EACtB,KAAK,6BAA+B,GAC3B,KAAK,aAAeA,IAC7B,KAAK,6BAA+B,GAExC,CAEA,oBAA8B,CAC5B,OACE,KAAK,8BAAgC,KAAK,4BAE9C,CAEA,uBAAiC,CAI/B,OACE,KAAK,+BAAiC,KAAK,4BAE/C,CAEO,IAAa,CAClB,OAAO,KAAK,GACd,CAEA,QAAe,CACb,KAAK,6BAA+B,GACpC,KAAK,6BAA+B,GACpC,KAAK,WAAa,KAAK,GAAG,MAAM,EAAI,KAAK,GAAG,OAAO,EAAE,iBAAiB,CACxE,CAEA,WAAkB,CAChB,OAAO,KAAK,UACd,CACF,ECzEO,IAAMC,GAAN,KAAqD,CAG1D,YACUC,EACAC,EACAC,EACAC,EACR,CAJQ,gBAAAH,EACA,gBAAAC,EACA,iBAAAC,EACA,UAAAC,EANV,KAAQ,QAA+C,SAOpD,CAEH,QAA8C,CAC5C,OAAO,KAAK,OACd,CAEA,WAAoB,CAClB,OAAO,KAAK,UACd,CAEA,WAAoB,CAClB,OAAO,KAAK,UACd,CAEA,WAAkB,CAChB,OAAO,KAAK,WACd,CAEA,QAAe,CACb,KAAK,QAAU,WACf,KAAK,KAAK,sBAAsB,IAAI,CACtC,CACA,QAAe,CACb,KAAK,QAAU,WACf,KAAK,KAAK,sBAAsB,IAAI,CACtC,CAEA,UAAkC,CAChC,MAAO,CACL,OACA,YAAa,KAAK,WAAW,QAAQ,EACrC,YAAa,KAAK,WAAW,QAAQ,EACrC,UAAW,KAAK,WAClB,CACF,CACF,EC1CO,IAAMC,GAAN,KAAmC,CAMxC,YACUC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACR,CAPQ,SAAAN,EACA,aAAAC,EACA,eAAAC,EACA,aAAAC,EACA,iBAAAC,EACA,aAAAC,EACA,SAAAC,EAZV,KAAQ,UAAY,GACpB,KAAQ,YAAc,EACtB,KAAO,YAAc,GACrB,KAAO,WAAa,EAUjB,CAEH,YAA6B,CAC3B,OAAO,KAAK,WACd,CAEA,QAAgC,CAC9B,OAAO,KAAK,OACd,CACA,UAAmB,CACjB,OAAO,KAAK,SACd,CACA,QAAiB,CACf,OAAO,KAAK,OACd,CACA,UAAUC,EAAgB,CACxB,KAAK,QAAUA,CACjB,CAEA,UAAW,CACT,OAAO,KAAK,SACd,CAEA,IAAK,CACH,OAAO,KAAK,GACd,CAEA,QAAS,CACH,KAAK,QAAQ,SAAS,IACvB,KAAK,QAAuB,iBAC3B,KAAK,QACL,iBAAiB,OAAQC,GAAMA,IAAM,IAAI,GAG5C,KAAK,UAAyB,iBAC7B,KAAK,UACL,iBAAiB,OAAQA,GAAMA,IAAM,IAAI,EAE3C,KAAK,UAAY,EACnB,CAEA,cAAe,CACb,KAAK,YAAc,EACrB,CAEA,gBAAiB,CACf,KAAK,WAAa,EACpB,CAEA,YAAsB,CACpB,OAAO,KAAK,WACd,CAEA,WAAqB,CACnB,OAAO,KAAK,UACd,CAEA,YAAqB,CACnB,OAAO,KAAK,WACd,CAEA,aAAoB,CAClB,KAAK,YAAc,EACnB,KAAK,QAAQ,MAAM,CACrB,CAEA,cAAcC,EAAqB,CAC5B,KAAK,QAAQ,IAAIA,CAAI,IACxB,KAAK,aAAe,EACpB,KAAK,QAAQ,IAAIA,CAAI,EAEzB,CAEA,iBAAiBA,EAAqB,CAChC,KAAK,QAAQ,IAAIA,CAAI,IACvB,KAAK,aAAe,EACpB,KAAK,QAAQ,OAAOA,CAAI,EAE5B,CAEA,iBAA+B,CAC7B,GAAI,KAAK,cAAgB,EAAG,CAC1B,GAAI,KAAK,WAAW,IAAM,KAExB,OAAO,KAGT,IAAMA,EAAe,KAAK,WAAW,EACrC,OAAO,IAAIC,GAAK,KAAK,IAAI,IAAI,EAAE,EAAED,CAAI,EAAG,KAAK,IAAI,IAAI,EAAE,EAAEA,CAAI,CAAC,CAChE,CAEA,IAAIE,EAAW,EACXC,EAAW,EAEf,QAAWC,KAAK,KAAK,QACnBF,GAAY,KAAK,IAAI,IAAI,EAAE,EAAEE,CAAC,EAC9BD,GAAY,KAAK,IAAI,IAAI,EAAE,EAAEC,CAAC,EAGhC,OAAAF,EAAWA,EAAW,KAAK,YAC3BC,EAAWA,EAAW,KAAK,YAEpB,IAAIF,GAAKC,EAAUC,CAAQ,CACpC,CACF,EC1GO,IAAME,GAAN,KAA+B,CA2BpC,YACUC,EACAC,EACAC,EACAC,EACDC,EACPC,EAAwB,CAAC,EACzB,CANQ,WAAAL,EACA,QAAAC,EACA,WAAAC,EACA,SAAAC,EACD,YAAAC,EA/BT,KAAQ,QAAU,GAKlB,KAAQ,YAAuB,GAC/B,KAAQ,eAAiB,GACzB,KAAQ,eAAiB,GACzB,KAAQ,qBAAgC,GAExC,KAAQ,mBAA8B,GACtC,KAAQ,WAAgC,KAGxC,KAAQ,mBAA+B,CAAC,EACxC,KAAQ,iBAA4B,GAEpC,KAAQ,OAAiB,EACzB,KAAQ,YAAuB,GAI/B,KAAQ,iBAA2B,EAEnC,KAAQ,YAA6B,KA4BnC,OAlBA,KAAK,UAAYF,EACjB,KAAK,QAAUI,GAAM,KAAK,GAAG,SAASN,CAAK,EAAE,WAAa,CAAC,EAC3D,KAAK,YACH,eAAgBK,EAAUA,EAAO,YAAc,OAAa,OAC9D,KAAK,YAAc,eAAgBA,EAAUA,EAAO,YAAc,CAAC,EAAK,CAAC,EACzE,KAAK,QAAU,WAAYA,EAAUA,EAAO,QAAU,EAAK,EAC3D,KAAK,wBACH,2BAA4BA,EACvBA,EAAO,wBAA0B,EAClC,EACN,KAAK,YACH,eAAgBA,EAAUA,EAAO,YAAc,OAAa,OAC9D,KAAK,YACH,eAAgBA,EAAUA,EAAO,YAAc,OAAa,OAC9D,KAAK,QACH,WAAYA,EAAUA,EAAO,QAAU,OAAa,OACtD,KAAK,WAAa,cAAeA,EAASA,EAAO,UAAY,OAErD,KAAK,MAAO,CAClB,cACA,WACA,mBACA,mBACA,mBACA,WACA,cACE,KAAK,GAAG,MAAM,EAAE,UAAUD,EAAQ,KAAK,KAAK,CAChD,CACF,CAEA,cAAcG,EAA2B,CACnC,KAAK,cAAgBA,IACvB,KAAK,YAAcA,EACnB,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,EAErC,CAEA,cAAwB,CACtB,OAAO,KAAK,WACd,CAEA,cAAcC,EAAqB,CACjC,KAAK,YAAcA,CACrB,CAEA,YAAkC,CAChC,OAAO,KAAK,WACd,CAEA,QAAuB,CACrB,MAAO,EACT,CAEA,OAAc,CACZ,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,CACnC,CACA,cAAcA,EAAiC,CAC7C,KAAK,YAAcA,CACrB,CACA,YAAkC,CAChC,OAAO,KAAK,WACd,CAEA,IAAK,CACH,OAAO,KAAK,GACd,CAEA,UAAuB,CACrB,MAAO,CACL,OACA,SAAU,KAAK,MACf,GAAI,KAAK,IACT,OAAQ,KAAK,QACb,QAAS,KAAK,OAAO,QAAQ,EAC7B,YAAa,KAAK,YAAY,QAAQ,EACtC,SAAU,KAAK,QACf,cAAe,KAAK,eACpB,WAAY,KAAK,YACjB,IAAK,KAAK,MACV,kBAAmB,KAAK,aAAe,GACvC,WAAY,KAAK,YACjB,QAAS,KAAK,UACd,OAAQ,KAAK,UAAU,EAAI,OAAO,KAAK,OAAO,EAAI,OAClD,kBAAmB,KAAK,mBACxB,aAAc,KAAK,aAAa,GAAG,GAAK,OACxC,WAAY,KAAK,WAAW,GAAK,OACjC,kBAAmB,KAAK,mBACxB,MAAO,KAAK,MAAM,EAClB,gBAAiB,KAAK,iBACtB,UAAW,KAAK,WAChB,OAAQ,KAAK,OACf,CACF,CAEA,MAAiB,CACf,OAAO,KAAK,KACd,CAEA,UAAoB,CAClB,OAAO,KAAK,SACd,CAEA,KAAKA,EAAqB,CACxB,GAAIA,IAAS,KACX,MAAM,IAAI,MAAM,qBAAqB,EAEvC,KAAK,UAAY,KAAK,MACtB,KAAK,MAAQA,EACb,KAAK,GAAG,eAAe,IAAI,EAC3B,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,CACnC,CAEA,UAAUC,EAAsB,CAC9B,KAAK,QAAUA,CACjB,CACA,QAAiB,CACf,OAAO,KAAK,OACd,CACA,QAAiB,CACf,OAAO,OAAO,KAAK,OAAO,CAC5B,CACA,WAAqB,CACnB,OAAO,KAAK,KAAK,EAAE,YAAc,MACnC,CACA,MAAgB,CACd,OAAO,KAAK,KACd,CACA,OAAoB,CAClB,OAAO,KAAK,MACd,CAEA,MAAiB,CACf,OAAO,KAAK,GAAG,SAAS,KAAK,KAAK,CACpC,CAEA,SAASC,EAA4B,CAEnC,OADA,KAAK,qBAAqB,EAClB,KAAK,MAAO,CAClB,cACA,WACA,mBACA,mBACA,mBACA,WACA,cACE,KAAK,GAAG,MAAM,EAAE,YAAYA,EAAU,KAAK,KAAK,EAChD,KAAK,GAAG,MAAM,EAAE,SAAS,KAAK,OAAQ,KAAK,KAAK,EAChD,KACJ,CACA,KAAK,WAAa,KAAK,OACvB,KAAK,WAAW,OAAS,KAAK,WAAW,OAAO,OAAQC,GAAMA,IAAM,IAAI,EACxE,KAAK,OAASD,EACd,KAAK,OAAO,OAAO,KAAK,IAAI,EAC5B,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,EACjC,KAAK,GAAG,eACN,QAAQ,KAAK,KAAK,CAAC,oBAAoBA,EAAS,YAAY,CAAC,MAE7D,KAAK,WAAW,GAAG,CACrB,EACA,KAAK,GAAG,eACN,YAAY,KAAK,KAAK,CAAC,SAAS,KAAK,WAAW,YAAY,CAAC,MAE7DA,EAAS,GAAG,CACd,CACF,CAEA,aAAaE,EAAeC,EAAyB,CACnD,KAAK,QAAUC,GACb,KAAK,QAAUR,GAAMM,CAAK,EAC1B,GACAN,GAAM,KAAK,KAAK,EAAE,WAAa,CAAC,CAClC,EACI,KAAK,UAAY,IACnB,KAAK,OAAO,GAAMO,CAAQ,CAE9B,CAEA,sBAA6B,CAC3B,KAAK,YAAc,IACrB,CAEA,qBAA+B,CAC7B,OAAO,KAAK,cAAgB,IAC9B,CAEA,iBAAwB,CACjB,KAAK,SAAS,IAGnB,KAAK,YACH,KAAK,GAAG,MAAM,EAAI,KAAK,GAAG,OAAO,EAAE,qBAAqB,EAC1D,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,EACnC,CAEA,mBAA6B,CAC3B,OAAK,KAAK,SAAS,EAGZ,KAAK,cAAgB,MAAQ,KAAK,GAAG,MAAM,EAAI,KAAK,YAAc,EAFhE,EAGX,CAEA,OAAOE,EAA0BC,EAA0B,CACzD,GAAI,CAAC,KAAK,SAAS,EACjB,MAAM,IAAI,MAAM,iBAAiB,IAAI,aAAa,EAiBpD,GAbA,KAAK,qBAAuBA,IAAc,OAE1C,KAAK,OAAO,OAAS,KAAK,OAAO,OAAO,OAAQC,GAAMA,IAAM,IAAI,EAChE,KAAK,QAAU,GACf,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,EACjC,KAAK,GAAG,WAAW,IAAI,EACnBF,IAAmB,IAAS,KAAK,QAAU,gBAC7C,KAAK,GAAG,eACN,QAAQ,KAAK,KAAK,oBAElB,KAAK,MAAM,EAAE,GAAG,CAClB,EAEEC,IAAc,OAChB,OAAQ,KAAK,MAAO,CAClB,gBACE,KAAK,GACF,MAAM,EACN,kBAAkBA,EAAW,KAAK,OAAQ,KAAK,OAAO,EACzD,MACF,iBACE,KAAK,GAAG,MAAM,EAAE,iBAAiBA,EAAW,KAAK,MAAM,EACvD,MACF,WACA,mBACA,mBACA,WACA,mBACA,cACA,cACE,KAAK,GAAG,MAAM,EAAE,YAAYA,EAAW,KAAK,KAAK,EACjD,KAAK,GAAG,MAAM,EAAE,SAAS,KAAK,MAAM,EAAG,KAAK,KAAK,EACjD,KACJ,CAEJ,CAEA,UAAoB,CAClB,OAAO,KAAK,OACd,CAEA,qBAA+B,CAC7B,OAAO,KAAK,oBACd,CAEA,YAAsB,CACpB,OAAO,KAAK,WACd,CAEA,kBAAmB,CACjB,GAAI,KAAK,KAAK,IAAM,YAClB,MAAM,IAAI,MAAM,kBAAkB,KAAK,KAAK,CAAC,EAAE,EAEjD,KAAK,YAAc,EACrB,CAEA,qBAA+B,CAC7B,OAAO,KAAK,kBACd,CAEA,qBAAqBE,EAAkC,CACjD,KAAK,qBAAuBA,IAC9B,KAAK,mBAAqBA,EAC1B,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,EAErC,CAEA,MAAe,CACb,OAAO,KAAK,KAAK,EAAIC,EAAW,KAAK,KAAK,CAAC,EAAI,KAAK,GACtD,CAEA,UAAmB,CACjB,MAAO,QAAQ,KAAK,KAAK,UAAU,KAAK,MAAM,EAAE,KAAK,CAAC,EACxD,CAEA,QAAe,CACb,KAAK,mBAAmB,KAAK,KAAK,GAAG,MAAM,CAAC,EAC5C,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,CACnC,CAEA,qBAAwC,CACtC,OAAO,KAAK,mBAAmB,CAAC,CAClC,CAEA,cAAwB,CACtB,OAAO,KAAK,mBAAmB,SAAW,KAAK,MACjD,CAEA,mBAA8B,CAC5B,OAAO,KAAK,kBACd,CAEA,eAAsB,CACpB,KAAK,mBAAmB,MAAM,EAC9B,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,CACnC,CAEA,cAAcC,EAAiC,CAC7C,KAAK,YAAcA,CACrB,CAEA,YAAkC,CAChC,OAAO,KAAK,WACd,CAEA,mBAAmBC,EAAiB,CAClC,IAAMC,EAAM,KAAK,YAAY,OAAS,EACtC,KAAK,iBAAmBD,EAAI,EAAI,EAAIA,EAAIC,EAAMA,EAAMD,CACtD,CAEA,iBAA0B,CACxB,OAAO,KAAK,gBACd,CAEA,YAA+B,CAC7B,OAAO,KAAK,WACd,CAEA,cAAcE,EAAgC,CAC5C,KAAK,YAAcA,CACrB,CAEA,YAA+B,CAC7B,OAAO,KAAK,WACd,CAEA,iBAAiBC,EAAyB,CACxC,KAAK,eAAiBA,CACxB,CAEA,eAAyB,CACvB,OAAO,KAAK,cACd,CAEA,kBAAyB,CACvB,KAAK,eAAiB,EACxB,CAEA,eAAyB,CACvB,OAAO,KAAK,cACd,CAEA,oBAA2B,CACzB,KAAK,wBAA0B,KAAK,GAAG,MAAM,CAC/C,CAEA,mBAA6B,CAC3B,OACE,KAAK,GAAG,MAAM,EAAI,KAAK,wBACvB,KAAK,GAAG,OAAO,EAAE,2BAA2B,CAEhD,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CAEA,gBAAgBC,EAA6B,CAC3C,KAAK,iBAAmBA,EACxB,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,CACnC,CAEA,iBAA2B,CACzB,OAAO,KAAK,gBACd,CAEA,eAAsB,CACpB,KAAK,SACD,8BAA2C,EAAE,SAAS,KAAK,KAAK,CAAC,GACnE,KAAK,mBAAmB,KAAK,KAAK,GAAG,MAAM,CAAC,EAE9C,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,CACnC,CAEA,cAAcT,EAA0B,CAKtC,GAJA,KAAK,SACD,8BAA2C,EAAE,SAAS,KAAK,KAAK,CAAC,GACnE,KAAK,mBAAmB,IAAI,EAE1B,KAAK,QAAU,EAAG,CACpB,KAAK,OAAO,GAAMA,CAAS,EAC3B,MACF,CACA,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,CACnC,CAEA,WAAmC,CACjC,OAAO,KAAK,UACd,CAEA,UAAgC,CAC9B,OAAO,KAAK,OACd,CAEA,UAAUU,EAAuB,CAC3B,KAAK,UAAYA,IACnB,KAAK,QAAUA,EACf,KAAK,GAAG,UAAU,KAAK,SAAS,CAAC,EAErC,CACF,EClZA,IAAMC,GAAN,KAAe,CACb,YACkBC,EACAC,EAChB,CAFgB,eAAAD,EACA,UAAAC,CACf,CACL,EAEaC,GAAN,KAAmC,CAyCxC,YACUC,EACAC,EACSC,EACjBC,EACiBC,EACjB,CALQ,QAAAJ,EACA,cAAAC,EACS,gBAAAC,EAEA,WAAAE,EA7CnB,KAAO,gBAA0B,EAMjC,uBAAoB,GACpB,KAAQ,eAAyB,EAEjC,KAAQ,UAAY,IAAI,IAExB,KAAO,aAA6B,IAAI,IAExC,KAAO,OAAiB,CAAC,EACzB,KAAO,OAAuB,IAAI,IAKlC,KAAO,6BAAkD,CAAC,EAC1D,KAAQ,kBAAgC,CAAC,EAEzC,KAAQ,SAAqB,CAAC,EAE9B,KAAQ,gBAAkC,CAAC,EAE3C,KAAQ,cAA4B,CAAC,EAErC,KAAQ,UAAY,IAAI,IAExB,KAAQ,mBAA2B,GACnC,KAAQ,mBAA2B,GAEnC,KAAO,iBAA6B,CAAC,EACrC,KAAO,iBAA6B,CAAC,EACrC,KAAO,qBAAiC,CAAC,EAEzC,KAAQ,YAAc,GACtB,KAAQ,gBAAkB,GAoH1B,KAAQ,oBAAyD,CAAC,EA3GhE,KAAK,MAAQF,EAAW,KACxB,KAAK,QAAUG,GAAMF,CAAW,EAChC,KAAK,MAAQ,GACb,KAAK,aAAe,KAAK,MACzB,KAAK,eAAiB,IAAIG,EAAaC,EAAW,KAAK,WAAW,EAAE,CAAC,CACvE,CAIA,UAAyB,CACvB,IAAMC,EAA2B,KAAK,yBAAyB,EAAE,IAAKC,GACpEA,EAAG,UAAU,EAAE,GAAG,CACpB,EAEA,MAAO,CACL,OACA,SAAU,KAAK,SAAS,EACxB,KAAM,KAAK,KAAK,EAChB,YAAa,KAAK,YAAY,EAC9B,GAAI,KAAK,GAAG,EACZ,KAAM,KAAK,KAAK,GAAK,OACrB,QAAS,KAAK,QAAQ,EACtB,WAAY,KAAK,KAAK,EACtB,QAAS,KAAK,QAAQ,EACtB,eAAgB,KAAK,eAAe,EACpC,WAAY,KAAK,cAAc,EAC/B,KAAM,KAAK,MACX,OAAQ,KAAK,OAAO,EACpB,OAAQ,KAAK,UAAU,EAAE,IAAKC,GAAMA,EAAE,MAAM,IAAI,EAAE,QAAQ,CAAC,EAC3D,UAAW,IAAI,IAAI,CAAC,GAAG,KAAK,UAAU,KAAK,CAAC,EAAE,IAAKC,GAAMA,EAAE,SAAS,CAAC,CAAC,EACtE,UAAW,KAAK,UAAU,EAC1B,sBAAuB,KAAK,yBAAyB,EACrD,QAAS,KAAK,QAAQ,EAAE,IAAKA,GAAMA,EAAE,QAAQ,CAAC,EAC9C,eAAgB,KAAK,eAAe,EACpC,gBAAiB,KAAK,iBAAiB,IAAKD,IACnC,CACL,WAAYA,EAAE,SAAS,EAAE,QAAQ,EACjC,SAAUA,EAAE,OAAO,EAAE,QAAQ,EAC7B,OAAQA,EAAE,OAAO,EACjB,GAAIA,EAAE,GAAG,EACT,WAAYA,EAAE,WAAW,CAC3B,EACD,EACD,gBAAiB,KAAK,iBAAiB,IAAKA,IACnC,CACL,WAAYA,EAAE,SAAS,EAAE,QAAQ,EACjC,SAAUA,EAAE,OAAO,EAAE,QAAQ,EAC7B,OAAQA,EAAE,OAAO,EACjB,GAAIA,EAAE,GAAG,EACT,WAAYA,EAAE,WAAW,CAC3B,EACD,EACD,yBAA0BF,EAC1B,UAAW,KAAK,UAAU,EAAE,IACzBE,IACE,CACC,GAAIA,EAAE,GAAG,EACT,MAAOA,EAAE,MAAM,IAAI,EAAE,GAAG,EACxB,UAAWA,EAAE,UAAU,EACvB,UAAWA,EAAE,UAAU,EACvB,oBACEA,EAAE,UAAU,GACZ,KAAK,GAAG,MAAM,EACZ,KAAK,GAAG,OAAO,EAAE,8BAA8B,CACrD,EACJ,EACA,WAAY,KAAK,WAAW,EAC5B,UAAW,KAAK,eAChB,mBAAoB,KAAK,kBAC3B,CACF,CAEA,SAAkB,CAChB,OAAO,KAAK,QACd,CAEA,MAAe,CACb,OAAO,KAAK,KACd,CACA,aAAsB,CACpB,OAAO,KAAK,YACd,CAEA,UAA4B,CAC1B,OAAO,KAAK,WAAW,QACzB,CAEA,IAAe,CACb,OAAO,KAAK,WAAW,EACzB,CAEA,MAAmB,CACjB,OAAO,KAAK,WAAW,UACzB,CAEA,MAAsB,CACpB,OAAO,KAAK,WAAW,IACzB,CAEA,SAASE,EAA2B,CAClC,GAAIA,EAAM,SAAW,EACnB,OAAO,KAAK,OAEd,IAAMC,EAAK,IAAI,IAAID,CAAK,EACxB,OAAO,KAAK,OAAO,OAAQE,GAAMD,EAAG,IAAIC,EAAE,KAAK,CAAC,CAAC,CACnD,CAGQ,sBAAsBC,EAAsB,CAC9C,KAAK,oBAAoBA,CAAI,IAAM,OACrC,KAAK,oBAAoBA,CAAI,IAE7B,KAAK,oBAAoBA,CAAI,EAAI,CAErC,CAGA,iBAAiBA,EAAwB,CACvC,IAAMC,EAAQ,KAAK,oBAAoBD,CAAI,GAAK,EAC5CE,EAAe,EACnB,QAAWC,KAAQ,KAAK,OAClBA,EAAK,KAAK,IAAMH,GACfG,EAAK,oBAAoB,GAC9BD,IAGF,OADcA,EAAeD,CAE/B,CAGA,UAAUD,EAAwB,CAChC,IAAII,EAAQ,EACZ,QAAWD,KAAQ,KAAK,OAClBA,EAAK,KAAK,IAAMH,IAClBI,GAASD,EAAK,MAAM,GAGxB,OAAOC,CACT,CAGA,WAAWJ,EAAwB,CACjC,IAAII,EAAQ,EACZ,QAAWD,KAAQ,KAAK,OAClBA,EAAK,KAAK,IAAMH,IACdG,EAAK,oBAAoB,EAC3BC,IAEAA,GAASD,EAAK,MAAM,GAI1B,OAAOC,CACT,CAEA,iBAAiBC,EAAuC,CACtD,QAAWC,KAAU,KAAK,aACxB,QAAWC,KAAY,KAAK,GAAG,IAAI,EAAE,UAAUD,CAAM,EACnD,GAAI,KAAK,GAAG,IAAI,EAAE,QAAQC,CAAQ,IAAMF,EAAM,QAAQ,EACpD,MAAO,GAIb,MAAO,EACT,CACA,eAAwB,CACtB,OAAO,KAAK,OAAO,IACrB,CAEA,OAA8B,CAC5B,OAAO,IAAI,IAAI,KAAK,OAAO,OAAO,CAAC,CACrC,CAEA,aAAoC,CAClC,OAAO,KAAK,YACd,CAEA,WAAuC,CACrC,IAAMG,EAAiC,IAAI,IAC3C,QAAWF,KAAU,KAAK,YAAY,EACpC,QAAWC,KAAY,KAAK,GAAG,IAAI,EAAE,UAAUD,CAAM,EACnD,GAAI,KAAK,GAAG,IAAI,EAAE,OAAOC,CAAQ,EAAG,CAClC,IAAME,EAAQ,KAAK,GAAG,IAAI,EAAE,QAAQF,CAAQ,EACxCE,IAAU,KAAK,QAAQ,GACzBD,EAAG,IACD,KAAK,GAAG,gBAAgBC,CAAK,CAC/B,CAEJ,CAGJ,OAAO,MAAM,KAAKD,CAAE,CACtB,CAEA,UAA2B,CACzB,MAAO,EACT,CACA,UAAUE,EAAgB,CACxB,KAAK,QAAUpB,GAAMoB,CAAM,CAC7B,CACA,QAAQC,EAAe,CACrB,KAAK,GAAG,QAAQ,KAAMA,CAAI,CAC5B,CACA,aAAaC,EAAY,CACvB,IAAMC,EAAS,KAAK,iBAAiB,OAAQA,GAAWA,EAAO,GAAG,IAAMD,CAAE,EAC1E,GAAI,CAACC,GAAU,CAACA,EAAO,CAAC,EAAG,CACzB,QAAQ,KAAK,uCAAuCD,CAAE,EAAE,EACxD,MACF,CACAC,EAAO,CAAC,EAAE,aAAa,CACzB,CACA,eAAeD,EAAkB,CAC/B,IAAMC,EAAS,KAAK,iBAAiB,OAAQA,GAAWA,EAAO,GAAG,IAAMD,CAAE,EAEtE,CAACC,GAAU,CAACA,EAAO,CAAC,GAGxBA,EAAO,CAAC,EAAE,eAAe,CAC3B,CACA,WAAWF,EAAe,CACxB,GAAI,KAAK,GAAG,MAAMA,CAAI,IAAM,KAC1B,MAAM,IAAI,MAAM,iDAAiD,EAEnE,KAAK,GAAG,WAAWA,CAAI,CACzB,CACA,MAAmB,CACjB,OAAO,KAAK,UACd,CACA,SAAmB,CACjB,OAAO,KAAK,OAAO,KAAO,CAC5B,CAEA,YAAsB,CACpB,OAAO,KAAK,WACd,CAEA,cAAcG,EAA2B,CACvC,KAAK,YAAcA,CACrB,CAEA,0BAA8C,CAC5C,OAAO,KAAK,GAAG,iBAAiB,OAAQpB,GAAOA,EAAG,UAAU,IAAM,IAAI,CACxE,CAEA,0BAA8C,CAC5C,OAAO,KAAK,GAAG,iBAAiB,OAAQA,GAAOA,EAAG,UAAU,IAAM,IAAI,CACxE,CAEA,WAA+B,CAC7B,OAAO,KAAK,GAAG,WAAW,OACvBC,GAAMA,EAAE,UAAU,IAAM,MAAQA,EAAE,UAAU,IAAM,IACrD,CACF,CAEA,kBAA+B,CAC7B,MAAO,CAAC,GAAG,KAAK,iBAAiB,CACnC,CAEA,QAAmB,CACjB,OAAO,KAAK,UAAU,EAAE,IAAKA,GAAMA,EAAE,MAAM,IAAI,CAAC,CAClD,CAEA,aAAaU,EAAwB,CACnC,OAAIA,IAAU,KACL,GAEF,KAAK,aAAaA,CAAK,IAAM,IACtC,CAEA,aAAaA,EAAuC,CAClD,OAAIA,IAAU,KACL,KAGP,KAAK,UAAU,EAAE,KACdV,GAAMA,EAAE,UAAU,IAAMU,GAASV,EAAE,UAAU,IAAMU,CACtD,GAAK,IAET,CAEA,uBAAuBA,EAAwB,CAmB7C,GAlBIA,IAAU,MAGV,KAAK,eAAe,GAAKA,EAAM,eAAe,GAO9C,KAAK,WAAWA,CAAK,GAAK,CAAC,KAAK,QAAQ,GAIzB,KAAK,yBAAyB,EAAE,KAChDX,GAAOA,EAAG,UAAU,IAAMW,CAC7B,EAGE,MAAO,GAGT,IAAMU,EAAS,KAAK,6BACjB,OAAQrB,GAAOA,EAAG,UAAU,IAAMW,CAAK,EACvC,KAAK,CAAC,EAAGW,IAAMA,EAAE,UAAU,EAAI,EAAE,UAAU,CAAC,EAE/C,OAAID,EAAO,SAAW,EACb,GAGK,KAAK,GAAG,MAAM,EAAIA,EAAO,CAAC,EAAE,UAAU,GAEpC,KAAK,GAAG,OAAO,EAAE,wBAAwB,CAC3D,CAEA,cAAcE,EAA0B,CACtC,KAAK,GAAG,cAAc,KAAMA,CAAQ,CACtC,CAEA,WAAqB,CACnB,OAAO,KAAK,yBAAyB,EAAI,CAC3C,CAEA,0BAAmC,CACjC,GAAI,KAAK,kBAAoB,EAAG,MAAO,GACvC,IAAMC,EAAU,KAAK,GAAG,MAAM,EAAI,KAAK,kBAEjCC,EADW,KAAK,GAAG,OAAO,EAAE,gBAAgB,EACrBD,EAC7B,OAAOC,EAAY,EAAIA,EAAY,CACrC,CAEA,aAAoB,CAClB,KAAK,kBAAoB,KAAK,GAAG,MAAM,EACvC,KAAK,iBAGL,KAAK,GAAG,MAAM,EAAE,OAAO,IAAI,CAC7B,CAEA,WAAoB,CAClB,OAAO,KAAK,cACd,CAEA,sBAAsBrC,EAA2C,CAC/D,GAAI,KAAK,aAAaA,CAAS,EAC7B,MAAM,IAAI,MAAM,gDAAgD,EAElE,OAAO,KAAK,GAAG,sBAAsB,KAAMA,CAA0B,CACvE,CAEA,SAASuB,EAAyB,CAChC,GAAIA,IAAU,KACZ,MAAM,IAAI,MAAM,kCAAkC,IAAI,EAAE,EAE1D,IAAMe,EAAW,KAAK,UAAU,IAAIf,CAAK,GAAK,EAC9C,OAAO,KAAK,kBAAkBe,CAAQ,CACxC,CAEQ,kBAAkBC,EAAiC,CACzD,OAAIA,EAAgB,MAGhBA,EAAgB,IAGhBA,EAAgB,MAItB,CAEA,oBAA+D,CAC7D,OAAO,MAAM,KAAK,KAAK,UAAW,CAAC,CAACC,EAAGC,CAAC,KAAO,CAAE,OAAQD,EAAG,SAAUC,CAAE,EAAE,EACvE,KAAK,CAAC5B,EAAGqB,IAAMrB,EAAE,SAAWqB,EAAE,QAAQ,EACtC,IAAKQ,IAAO,CACX,OAAQA,EAAE,OACV,SAAU,KAAK,kBAAkBA,EAAE,QAAQ,CAC7C,EAAE,CACN,CAEA,eAAenB,EAAeoB,EAAqB,CACjD,GAAIpB,IAAU,KACZ,MAAM,IAAI,MAAM,qCAAqC,IAAI,EAAE,EAE7D,IAAMe,EAAW,KAAK,UAAU,IAAIf,CAAK,GAAK,EACxCqB,EAAcC,GAAOP,EAAWK,EAAO,KAAM,GAAG,EACtD,KAAK,UAAU,IAAIpB,EAAOqB,CAAW,CACvC,CAEA,gBAAiB,CACf,KAAK,UAAU,QAAQ,CAACF,EAAW5B,IAAc,CAC/C,IAAMgC,EAAO,GAAK,KAAK,KAAKJ,CAAC,EACvBC,EAAQ,IACdD,GAAKI,EAAOH,EACR,KAAK,IAAID,CAAC,EAAIC,EAAQ,IACxBD,EAAI,GAEN,KAAK,UAAU,IAAI5B,EAAG4B,CAAC,CACzB,CAAC,CACH,CAEA,UAAUnB,EAAwB,CAIhC,GAHI,OAASA,GAGT,KAAK,WAAWA,CAAK,EACvB,MAAO,GAET,QAAWwB,KAAK,KAAK,SACnB,GAAI,KAAK,GAAG,MAAM,EAAIA,EAAE,KAAO,KAAK,GAAG,OAAO,EAAE,eAAe,EAC7D,MAAO,GAGX,MAAO,EACT,CAEA,OAAOxB,EAAqB,CAC1B,KAAK,SAAS,KAAK,CAAE,KAAM,KAAK,GAAG,MAAM,EAAG,OAAQA,CAAM,CAAC,EAC3D,KAAK,GAAG,OAAO,KAAMA,CAAK,CAC5B,CAEA,SAAoB,CAClB,OAAO,KAAK,SACT,OACEwB,GAAM,KAAK,GAAG,MAAM,EAAIA,EAAE,KAAO,KAAK,GAAG,OAAO,EAAE,eAAe,CACpE,EACC,IAAKA,GAAMA,EAAE,MAAM,CACxB,CAEA,mBAA8B,CAC5B,IAAM/B,EAAK,KAAK,UAAU,EACvB,IAAKH,GAAMA,EAAE,MAAM,IAAI,CAAC,EACxB,QAASmC,GAASA,EAAK,QAAQ,CAAC,EACnC,OAAAhC,EAAG,KAAK,GAAG,KAAK,QAAQ,CAAC,EAClB,CAAC,GAAG,IAAI,IAAIA,CAAE,CAAC,CACxB,CAEA,UAAUhB,EAAuCiD,EAAqB,CACpE,GAAIjD,IAAc,KAChB,MAAM,MAAM,iCAAiC,IAAI,EAAE,EAErD,IAAMkD,EAAoB,CACxB,QAASD,EACT,SAAU,KAAK,QAAQ,EACvB,YAAajD,IAAcmD,GAAanD,EAAYA,EAAU,QAAQ,EACtE,UAAW,KAAK,GAAG,MAAM,CAC3B,EACA,KAAK,gBAAgB,KAAKkD,CAAG,EAC7B,KAAK,GAAG,gBAAgBA,CAAG,CAC7B,CAEA,gBAAiC,CAC/B,OAAO,KAAK,gBACT,OACE,GACC,KAAK,GAAG,MAAM,EAAI,EAAE,UACpB,KAAK,GAAG,OAAO,EAAE,qBAAqB,CAC1C,EACC,KAAK,CAACrC,EAAGqB,IAAMA,EAAE,UAAYrB,EAAE,SAAS,CAC7C,CAEA,aAAab,EAAgD,CAC3D,GAAIA,IAAc,KAChB,MAAO,GAET,IAAMoD,EACJpD,IAAcmD,GAAaA,GAAanD,EAAU,QAAQ,EACtDqD,EAAW,KAAK,gBAAgB,OACnCH,GAAQA,EAAI,cAAgBE,CAC/B,EACA,QAAWF,KAAOG,EAChB,GACE,KAAK,GAAG,MAAM,EAAIH,EAAI,UACtB,KAAK,GAAG,OAAO,EAAE,qBAAqB,EAEtC,MAAO,GAGX,MAAO,EACT,CAEA,cAAclD,EAA4B,CAQxC,GANE,CAAC,KAAK,QAAQ,GACd,CAACA,EAAU,QAAQ,GACnB,CAAC,KAAK,WAAWA,CAAS,GAK1BA,EAAU,KAAK,IAAM,SACrB,KAAK,GAAG,OAAO,EAAE,WAAW,IAAM,GAElC,MAAO,GAET,QAAWsD,KAAY,KAAK,cAC1B,GAAIA,EAAS,YAActD,GAEvB,KAAK,GAAG,MAAM,EAAIsD,EAAS,KAC3B,KAAK,GAAG,OAAO,EAAE,eAAe,EAEhC,MAAO,GAIb,MAAO,EACT,CAEA,gBAAgBtD,EAA4B,CAQ1C,GANE,CAAC,KAAK,QAAQ,GACd,CAACA,EAAU,QAAQ,GACnB,CAAC,KAAK,WAAWA,CAAS,GAK1BA,EAAU,KAAK,IAAM,SACrB,KAAK,GAAG,OAAO,EAAE,aAAa,IAAM,GAEpC,MAAO,GAET,QAAWsD,KAAY,KAAK,cAC1B,GAAIA,EAAS,YAActD,GAEvB,KAAK,GAAG,MAAM,EAAIsD,EAAS,KAC3B,KAAK,GAAG,OAAO,EAAE,eAAe,EAEhC,MAAO,GAIb,MAAO,EACT,CAEA,aAAatD,EAAmB4B,EAAyB,CACvD,GAAIA,GAAU,EAAG,MAAO,GACxB,IAAM2B,EAAU,KAAK,aAAa3B,CAAM,EACxC,OAAI2B,IAAY,EAAU,IAC1BvD,EAAU,UAAUuD,CAAO,EAE3B,KAAK,cAAc,KAAK,IAAIxD,GAASC,EAAW,KAAK,GAAG,MAAM,CAAC,CAAC,EAChE,KAAK,GAAG,eACN,QAAQwD,GAAa5B,CAAM,CAAC,cAAc5B,EAAU,KAAK,CAAC,MAE1D,KAAK,GAAG,CACV,EACA,KAAK,GAAG,eACN,YAAYwD,GAAa5B,CAAM,CAAC,gBAAgB,KAAK,KAAK,CAAC,MAE3D5B,EAAU,GAAG,CACf,EACO,GACT,CAEA,WAAWA,EAAmByD,EAAqB,CACjD,GAAIA,GAAQ,GAAI,MAAO,GACvB,IAAMF,EAAU,KAAK,WAAWE,CAAI,EACpC,OAAIF,IAAY,GAAW,IAC3BvD,EAAU,QAAQuD,CAAO,EAEzB,KAAK,cAAc,KAAK,IAAIxD,GAASC,EAAW,KAAK,GAAG,MAAM,CAAC,CAAC,EAChE,KAAK,GAAG,eACN,QAAQ0D,GAAaD,CAAI,CAAC,YAAYzD,EAAU,KAAK,CAAC,MAEtD,KAAK,GAAG,CACV,EACA,KAAK,GAAG,eACN,YAAY0D,GAAaD,CAAI,CAAC,cAAc,KAAK,KAAK,CAAC,MAEvDzD,EAAU,GAAG,EACbyD,CACF,EACO,GACT,CAEA,eAAyB,CACvB,OACE,KAAK,GAAG,MAAM,EAAI,KAAK,oBACvB,KAAK,GAAG,OAAO,EAAE,mBAAmB,CAExC,CAEA,kBAAyB,CACvB,KAAK,mBAAqB,KAAK,GAAG,MAAM,CAC1C,CAEA,eAAyB,CAEvB,GACE,KAAK,GAAG,MAAM,EAAI,KAAK,mBACvB,KAAK,GAAG,OAAO,EAAE,mBAAmB,EAEpC,MAAO,GAGT,QAAW3C,KAAK,KAAK,GAAG,QAAQ,EAC9B,GAAIA,EAAE,GAAG,IAAM,KAAK,GAAG,GACnBA,EAAE,KAAK,IAAM,OACb,MAAK,aAAaA,CAAC,EACvB,MAAO,GAET,MAAO,EACT,CAEA,kBAAyB,CACvB,KAAK,mBAAqB,KAAK,GAAG,MAAM,CAC1C,CAEA,kBAAkBS,EAAwB,CACxC,OAAO,KAAK,UAAU,IAAIA,EAAM,GAAG,CAAC,CACtC,CAEA,SAASA,EAAwB,CAG/B,MAAO,EADLA,EAAM,kBAAkB,IAAI,GAAK,KAAK,kBAAkBA,CAAK,IAC5CA,EAAM,GAAG,IAAM,KAAK,GAAG,CAC5C,CAEA,cAA0B,CACxB,MAAO,CAAC,GAAG,KAAK,UAAU,OAAO,CAAC,CACpC,CAEA,WAAWA,EAAeoC,EAA4B,CACpD,IAAMC,EAAU,KAAK,UAAU,IAAIrC,EAAM,GAAG,CAAC,EACzCqC,IAAY,QAAa,CAACA,EAAQ,cAEtC,KAAK,GAAG,UAAU,CAChB,QACA,MAAO,QACP,SAAU,KAAK,QAAQ,EACvB,YAAarC,EAAM,QAAQ,CAC7B,CAAC,EAED,KAAK,UAAU,IAAIA,EAAM,GAAG,EAAG,CAC7B,UAAW,KAAK,GAAG,MAAM,EACzB,YAAaoC,EACb,OAAQpC,CACV,CAAC,EACH,CAEA,YAAYA,EAAqB,CAC/B,KAAK,UAAU,OAAOA,EAAM,GAAG,CAAC,EAChC,KAAK,GAAG,UAAU,CAChB,QACA,MAAO,OACP,SAAU,KAAK,QAAQ,EACvB,YAAaA,EAAM,QAAQ,CAC7B,CAAC,CACH,CAEA,oBAAoBA,EAAqB,CACvC,IAAMqC,EAAU,KAAK,UAAU,IAAIrC,EAAM,GAAG,CAAC,EACzCqC,IAAY,QAAa,CAACA,EAAQ,aAEtC,KAAK,YAAYrC,CAAK,CACxB,CAEA,iBAA4B,CAC1B,OAAO,KAAK,GACT,QAAQ,EACR,OAAQA,GAAUA,IAAU,MAAQ,KAAK,SAASA,CAAK,CAAC,CAC7D,CAEA,MAAoB,CAClB,OAAO,KAAK,KACd,CAEA,aAAaA,EAAwB,CAOnC,OANIA,IAAU,MAGV,KAAK,KAAK,IAAM,MAAQA,EAAM,KAAK,IAAM,MAGzC,KAAK,KAAK,IAAMsC,EAAa,KAAOtC,EAAM,KAAK,IAAMsC,EAAa,IAC7D,GAEF,KAAK,QAAUtC,EAAM,KAAK,CACnC,CAEA,WAAWA,EAAeuC,EAA4B,GAAgB,CACpE,OAAIvC,EAAM,eAAe,GAAK,CAACuC,EACtB,GAEF,KAAK,aAAavC,CAAK,GAAK,KAAK,aAAaA,CAAK,CAC5D,CAEA,MAAa,CACX,OAAO,KAAK,KACd,CAEA,QAAQwC,EAAalC,EAAsB,CACzC,KAAK,OAASkC,EACVlC,GACF,KAAK,GAAG,UAAU,CAChB,QACA,OAAQ,KAAK,GAAG,EAChB,KAAAA,EACA,KAAM,OAAOkC,CAAK,EAClB,OAAQ,CACV,CAAC,CAEL,CAEA,WAAWC,EAAsB,CAC/B,GAAIA,GAAY,GACd,OAAO,GAET,IAAMC,EAAgBC,GAAO,KAAK,MAAOF,CAAQ,EACjD,YAAK,OAASC,EACPA,CACT,CAEA,QAAiB,CACf,OAAO,OAAO,KAAK,OAAO,CAC5B,CAEA,UAAUrC,EAAsB,CAC9B,GAAIA,EAAS,EAAG,CACd,KAAK,aAAa,GAAKA,CAAM,EAC7B,MACF,CACA,KAAK,SAAWpB,GAAMoB,CAAM,CAC9B,CACA,aAAaA,EAAwB,CACnC,GAAIA,GAAU,EACZ,MAAO,GAET,IAAMoC,EAAWE,GAAO,KAAK,QAAS1D,GAAMoB,CAAM,CAAC,EACnD,YAAK,SAAWoC,EACT,OAAOA,CAAQ,CACxB,CAEA,YAAY3C,EAAkB,CAC5B,GAAIA,EAAK,MAAM,IAAM,KACnB,MAAM,IAAI,MAAM,wBAAwB,IAAI,iBAAiBA,CAAI,EAAE,EAErEA,EAAK,SAAS,IAAI,CACpB,CAEA,UACEH,EACAiD,EACAC,EACM,CACN,GAAI,KAAK,GAAG,OAAO,EAAE,eAAelD,CAAI,EACtC,MAAM,IAAI,MACR,oCAAoCA,CAAI,YAAYiD,CAAS,cAAc,KAAK,KAAK,CAAC,EACxF,EAGF,IAAME,EAAO,KAAK,GAAG,SAASnD,CAAI,EAAE,KAAK,KAAK,GAAI,IAAI,EAChDgB,EAAI,IAAIoC,GACZpD,EACA,KAAK,GACLiD,EACA,KAAK,GAAG,WAAW,EACnB,KACAC,CACF,EACA,YAAK,OAAO,KAAKlC,CAAC,EAClB,KAAK,sBAAsBhB,CAAI,EAC/B,KAAK,WAAWmD,CAAI,EACpB,KAAK,aAAa,WAAYD,EAAUA,EAAO,QAAU,EAAK,CAAC,EAC/D,KAAK,GAAG,UAAUlC,EAAE,SAAS,CAAC,EAC9B,KAAK,GAAG,QAAQA,CAAC,EAEVA,CACT,CAEO,kBAAkBhB,EAAgBqD,EAAmC,CAC1E,IAAMC,EAAQ,KAAK,GAAG,OAAO,EAAE,iBAAiB,EAC1CC,EAAW,KAAK,GACnB,YAAYF,EAAYC,EAAOtD,EAAM,OAAW,EAAI,EACpD,KAAK,CAACL,EAAGqB,IAAMrB,EAAE,YAAcqB,EAAE,WAAW,EAC/C,GAAIuC,EAAS,SAAW,EACtB,MAAO,GAET,IAAMpD,EAAOoD,EAAS,CAAC,EAAE,KACzB,OAAK,KAAK,eAAepD,CAAI,EAGtBA,EAFE,EAGX,CAEO,eAAeA,EAAqB,CAkBzC,MAjBI,EAAAA,EAAK,oBAAoB,GAGzBA,EAAK,oBAAoB,GAGzB,CAAC,KAAK,GAAG,OAAO,EAAE,SAASA,EAAK,KAAK,CAAC,EAAE,YAGxC,KAAK,GAAG,OAAO,EAAE,eAAeA,EAAK,KAAK,CAAC,GAI7C,KAAK,MAAQ,KAAK,GAAG,OAAO,EAAE,SAASA,EAAK,KAAK,CAAC,EAAE,KAAK,KAAK,GAAI,IAAI,GAIpEA,EAAK,MAAM,IAAM,KAIvB,CAEA,YAAYA,EAAY,CACtB,IAAMgD,EAAO,KAAK,GAAG,SAAShD,EAAK,KAAK,CAAC,EAAE,KAAK,KAAK,GAAI,IAAI,EAC7D,KAAK,WAAWgD,CAAI,EACpBhD,EAAK,cAAc,EACnB,KAAK,sBAAsBA,EAAK,KAAK,CAAC,CACxC,CAEO,eAAeQ,EAAuC,CAC3D,IAAM6C,EAAa7C,IAAS,KAAO,KAAK,yBAAyBA,CAAI,EAAI,CAAC,EAC1E,OAAO,OAAO,OAAO8C,CAAQ,EAAE,IAAK1D,GAAM,CACxC,IAAI2D,EAA6B,GACjC,GAAI,CAAC,KAAK,GAAG,aAAa,EAAG,CAC3B,IAAMC,EAAehD,IAAS,MAAQ,KAAK,kBAAkBZ,EAAGY,CAAI,EAChEgD,IAAiB,KACnBD,EAAaC,EAAa,GAAG,EAEjC,CACA,MAAO,CACL,KAAM5D,EACN,SACE,KAAK,GAAG,aAAa,GAAKY,IAAS,KAC/B,GACA,KAAK,SAASZ,EAAGY,EAAM6C,CAAU,EACvC,WAAYE,EACZ,KAAM,KAAK,GAAG,OAAO,EAAE,SAAS3D,CAAC,EAAE,KAAK,KAAK,GAAI,IAAI,CACvD,CACF,CAAC,CACH,CAEA,SACE6D,EACAP,EACAG,EAA+B,KACd,CACjB,GAAI,KAAK,GAAG,OAAO,EAAE,eAAeI,CAAQ,EAC1C,MAAO,GAGT,IAAMT,EAAO,KAAK,GAAG,SAASS,CAAQ,EAAE,KAAK,KAAK,GAAI,IAAI,EAC1D,GAAI,CAAC,KAAK,QAAQ,GAAK,KAAK,KAAK,EAAIT,EACnC,MAAO,GAET,OAAQS,EAAU,CAChB,WACE,OAAK,KAAK,GAAG,SAASP,CAAU,EAGzB,KAAK,UAAUA,CAAU,EAFvB,GAGX,gBACA,oBACE,OAAO,KAAK,UAAUA,CAAU,EAClC,mBACE,OAAOA,EACT,WACE,OAAO,KAAK,UAAUA,EAAYG,CAAU,EAC9C,cACE,OAAO,KAAK,aAAaH,CAAU,EACrC,YACA,iBACE,OAAOA,EACT,gBACE,OAAOQ,GAAsB,KAAK,GAAI,KAAMR,CAAU,EACxD,iBACE,OAAO,KAAK,eAAeA,CAAU,EACvC,YACE,OAAO,KAAK,mBAAmBA,CAAU,EAC3C,mBACA,mBACA,mBACA,WACA,cACE,OAAO,KAAK,wBAAwBA,EAAYG,CAAU,EAC5D,QACEM,GAAYF,CAAQ,CACxB,CACF,CAEA,UAAUjD,EAAgC,CACxC,IAAMF,EAAQ,KAAK,GAAG,MAAME,CAAI,EAChC,GAAIF,EAAM,SAAS,GACb,KAAK,aAAaA,CAAK,EACzB,MAAO,GAIX,IAAMsD,EAAS,KAAK,oBAA0B,EAC3C,OAAQC,GACA,CAACA,EAAK,aAAa,GAAK,CAACA,EAAK,oBAAoB,CAC1D,EACA,KAAKC,GAAa,KAAK,GAAItD,CAAI,CAAC,EACnC,OAAIoD,EAAO,SAAW,EACb,GAEFA,EAAO,CAAC,EAAE,KAAK,CACxB,CAEA,UAAUpD,EAAe6C,EAA+C,CACtE,IAAMO,EAAS,MAAM,KACnB,KAAK,GAAG,IACNpD,EACAuD,GAAgBvD,EAAM,KAAK,GAAG,OAAO,EAAE,gBAAgB,CAAC,CAC1D,CACF,EACG,OAAQkB,GAAM,KAAK,GAAG,MAAMA,CAAC,IAAM,MAAQ,KAAK,GAAG,aAAaA,CAAC,CAAC,EAClE,KACC,CAAC,EAAGb,IACF,KAAK,GAAG,cAAc,EAAGL,CAAI,EAAI,KAAK,GAAG,cAAcK,EAAGL,CAAI,CAClE,EACIwD,EAAe,IAAI,IACvBX,GAAc,KAAK,yBAAyB7C,CAAI,CAClD,EACA,QAAWkB,KAAKkC,EACd,GAAII,EAAa,IAAItC,CAAC,EACpB,OAAOA,EAGX,MAAO,EACT,CAEA,aAAalB,EAAgC,CAC3C,GAAI,CAAC,KAAK,GAAG,QAAQA,CAAI,EACvB,MAAO,GAET,IAAMoD,EAAS,KAAK,YAAmB,EAAE,KACvC,CAACpE,EAAGqB,IACF,KAAK,GAAG,cAAcrB,EAAE,KAAK,EAAGgB,CAAI,EACpC,KAAK,GAAG,cAAcK,EAAE,KAAK,EAAGL,CAAI,CACxC,EACA,OAAIoD,EAAO,SAAW,EACb,GAEFA,EAAO,CAAC,EAAE,KAAK,CACxB,CAEA,mBAAmBpD,EAAgC,CACjD,OAAO,KAAK,GAAG,OAAOA,CAAI,EAAIA,EAAO,EACvC,CAEA,wBACEA,EACA6C,EAA+B,KACd,CACjB,IAAMY,EAAQZ,GAAc,KAAK,yBAAyB7C,CAAI,EAC9D,OAAIyD,EAAM,SAAW,EACZ,GAEFA,EAAM,CAAC,CAChB,CAEQ,yBAAyBzD,EAA0B,CACzD,GAAI,KAAK,GAAG,MAAMA,CAAI,IAAM,KAC1B,MAAO,CAAC,EAEV,IAAM0D,EAAe,GACfC,EAAsBD,GAAgB,EACtCxE,EAAQ,OAAO,OAAO4D,CAAQ,EAAE,OAAQc,GACrC,KAAK,GAAG,OAAO,EAAE,SAASA,CAAa,EAAE,cACjD,EAEKC,EAAc,KAAK,GAAG,YAC1B7D,EACA0D,EAAe,EACfxE,EACA,OACA,EACF,EACM4E,EAAc,KAAK,GAAG,IAAI9D,EAAM,CAAC+D,EAAI7C,IAEvC,KAAK,GAAG,qBAAqBlB,EAAMkB,CAAC,EAAIyC,GACxCI,EAAG,QAAQ7C,CAAC,IAAM,KAAK,QAAQ,CAElC,EACK8C,EAAyB,IAAI,IAAIF,CAAW,EAE5CG,EAAiB,KAAK,GAAG,OAAO,EAAE,iBAAiB,GAAK,EAC9D,QAAW/C,KAAK4C,EACd,OAAW,CAAE,KAAAtE,CAAK,IAAKqE,EACrB,GAAI,KAAK,GAAG,qBAAqBrE,EAAK,KAAK,EAAG0B,CAAC,EAAI+C,EAAgB,CACjED,EAAS,OAAO9C,CAAC,EACjB,KACF,CAGJ,IAAMgD,EAAQ,MAAM,KAAKF,CAAQ,EACjC,OAAAE,EAAM,KACJ,CAAClF,EAAGqB,IACF,KAAK,GAAG,qBAAqBrB,EAAGgB,CAAI,EACpC,KAAK,GAAG,qBAAqBK,EAAGL,CAAI,CACxC,EACOkE,CACT,CAEA,eAAexB,EAAsC,CACnD,IAAMU,EAAS,KAAK,YAAmB,EAAE,OACtChE,GAAMA,EAAE,KAAK,IAAMsD,CACtB,EACA,OAAIU,EAAO,SAAW,EACb,GAEFA,EAAO,CAAC,EAAE,KAAK,CACxB,CACA,gBAAuB,CACrB,OAAO,KAAK,eACd,CAEA,gBAA0B,CACxB,OAAO,KAAK,eACd,CAEA,iBAAiBe,EAA+B,CAC9C,KAAK,gBAAkBA,CACzB,CAEA,MAAe,CACb,OACEtF,EAAW,KAAK,GAAG,CAAC,GAAK,KAAK,OAAO,EAAI,KAAK,cAAc,GAC5D,KAAK,OAAO,OAAO,CAACuF,EAAK5E,IAAS4E,EAAM5E,EAAK,KAAK,EAAG,CAAC,CAE1D,CACA,UAAmB,CACjB,MAAO,gBAAgB,KAAK,KAAK,EAAE,IAAI,aACrC,KAAK,KAAK,EAAE,QACd,YAAY,KAAK,QAAQ,CAAC,WACxB,KAAK,OACP,iBAAiB,KAAK,cAAc,CAAC,IACvC,CAEO,eAA+B,CAUpC,MATY,CACV,UAAW,OAAO,YAChB,KAAK,mBAAmB,EAAE,IAAI,CAAC,CAAE,OAAA6E,EAAQ,SAAA5D,CAAS,IAAM,CACtD4D,EAAO,QAAQ,EACf5D,CACF,CAAC,CACH,EACA,UAAW,KAAK,UAAU,EAAE,IAAKzB,GAAMA,EAAE,MAAM,IAAI,EAAE,QAAQ,CAAC,CAChE,CAEF,CAEA,aACEsF,EACAvE,EACAwE,EACA5E,EACQ,CACR,IAAMO,EAAS,IAAIsE,GACjB,KAAK,eAAe,OAAO,EAC3BF,EACA,KACAvE,EACAwE,EACA5E,EACA,KAAK,EACP,EACA,YAAK,iBAAiB,KAAKO,CAAM,EAC7BoE,EAAO,SAAS,GACjBA,EAAsB,iBAAiB,KAAKpE,CAAM,EAE9CA,CACT,CACA,iBAA4B,CAC1B,OAAO,KAAK,gBACd,CACA,iBAA4B,CAC1B,OAAO,KAAK,gBACd,CAEO,UAAUF,EAAwB,CAUvC,GARE,KAAK,GAAG,SAASA,CAAI,GACrB,KAAK,GAAG,OAAO,EAAE,mBAAmB,EAClC,KAAK,GAAG,OAAO,EAAE,sBAAsB,EACvC,KAAK,GAAG,MAAM,GAKd,KAAK,GAAG,MAAMA,CAAI,IAAM,KAC1B,MAAO,GAET,IAAMN,EAAQ,KAAK,GAAG,MAAMM,CAAI,EAOhC,GANIN,EAAM,SAAS,GACb,KAAK,WAAWA,CAAK,GAKvB,CAAC,KAAK,GAAG,OAAOM,CAAI,EACtB,MAAO,GAET,GAAI,KAAK,GAAG,SAASA,CAAI,EACvB,OAAO,KAAK,iBAAiBN,CAAK,EAElC,QAAWwB,KAAK,KAAK,GAAG,IACtBlB,EACAyE,GACE,CAACV,EAAI7C,IAAM,CAAC6C,EAAG,SAAS7C,CAAC,GAAK6C,EAAG,OAAO7C,CAAC,EACzCqC,GAAgBvD,EAAM,GAAG,CAC3B,CACF,EACE,QAAW,KAAK,KAAK,GAAG,UAAUkB,CAAC,EACjC,GAAI,KAAK,GAAG,MAAM,CAAC,IAAM,KACvB,MAAO,GAIb,MAAO,EAEX,CAEA,uBAAuBwB,EAAsC,CAC3D,OAAOgC,GAA0B,KAAK,GAAI,KAAMhC,CAAU,CAC5D,CACF,EChtCO,IAAMiC,GAAN,KAA6C,CAOlD,YAAoBC,EAAoB,CAApB,cAAAA,EALpB,KAAQ,OAAkB,GAC1B,KAAQ,UAAoB,EAC5B,KAAQ,UAAoB,EAC5B,KAAQ,UAAoB,EAC5B,KAAQ,UAAwB,CAAC,EAE/B,KAAK,UAAYA,EAAS,MAAM,MAClC,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEA,KAAKC,EAAUC,EAAqB,CAClC,KAAK,GAAKD,EACV,IAAME,EAAQ,KAAK,SAAS,MAE5B,KAAK,UAAU,KAAK,CAClB,KAAMA,EAAM,CAAC,EACb,SACEA,EAAM,OAAS,EACX,KAAK,0BAA0BA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAEzD,CAAC,EACD,QAASC,EAAI,EAAGA,EAAID,EAAM,OAAS,EAAGC,IAAK,CACzC,IAAMC,EAAY,KAAK,iBACrBF,EAAMC,EAAI,CAAC,EACXD,EAAMC,CAAC,EACPD,EAAMC,EAAI,CAAC,CACb,EACA,KAAK,UAAU,KAAK,CAAE,KAAMD,EAAMC,CAAC,EAAG,SAAUC,CAAU,CAAC,CAC7D,CACA,KAAK,UAAU,KAAK,CAClB,KAAMF,EAAMA,EAAM,OAAS,CAAC,EAC5B,SACEA,EAAM,OAAS,EACX,KAAK,0BACHA,EAAMA,EAAM,OAAS,CAAC,EACtBA,EAAMA,EAAM,OAAS,CAAC,CACxB,GAER,CAAC,CACH,CAEQ,0BAA0BG,EAAeC,EAAyB,CACxE,IAAMC,EAAI,KAAK,GAAG,EAAEF,CAAI,EAClBG,EAAI,KAAK,GAAG,EAAEH,CAAI,EAClBI,EAAQ,KAAK,GAAG,EAAEH,CAAI,EACtBI,EAAQ,KAAK,GAAG,EAAEJ,CAAI,EAEtBK,EAAKF,EAAQF,EACbK,EAAKF,EAAQF,EAEnB,OAAIG,IAAO,GAAKC,IAAO,IAEnBD,IAAO,IAEAC,IAAO,KAIpB,CAEQ,iBACNC,EACAC,EACAR,EACU,CACV,GAAI,KAAK,KAAO,KACd,MAAM,IAAI,MAAM,iBAAiB,EAEnC,IAAMS,EAAK,KAAK,GAAG,EAAEF,CAAI,EACnBG,EAAK,KAAK,GAAG,EAAEH,CAAI,EACnBI,EAAK,KAAK,GAAG,EAAEH,CAAO,EACtBI,EAAK,KAAK,GAAG,EAAEJ,CAAO,EACtBK,EAAK,KAAK,GAAG,EAAEb,CAAI,EACnBc,EAAK,KAAK,GAAG,EAAEd,CAAI,EAEnBe,EAAMJ,EAAKF,EACXO,EAAMJ,EAAKF,EACXO,EAAMJ,EAAKF,EACXO,EAAMJ,EAAKF,EAGjB,GAAIG,IAAQE,GAAOD,IAAQE,EAAK,CAC9B,GAAIH,IAAQ,EAAG,SACf,GAAIC,IAAQ,EAAG,QACjB,CAGA,GAAKD,IAAQ,GAAKE,IAAQ,GAAOF,IAAQ,GAAKE,IAAQ,EAAI,CAExD,GAAIF,IAAQ,GAAKE,IAAQ,GAAKD,IAAQ,GAAI,SAC1C,GAAID,IAAQ,GAAKE,IAAQ,IAAMD,IAAQ,GAAI,SAC3C,GAAID,IAAQ,GAAKE,IAAQ,GAAKD,IAAQ,EAAG,SACzC,GAAID,IAAQ,GAAKE,IAAQ,IAAMD,IAAQ,EAAG,SAE1C,GAAID,IAAQ,GAAKE,IAAQ,GAAKC,IAAQ,GAAI,SAC1C,GAAIH,IAAQ,IAAME,IAAQ,GAAKC,IAAQ,GAAI,SAC3C,GAAIH,IAAQ,GAAKE,IAAQ,GAAKC,IAAQ,EAAG,SACzC,GAAIH,IAAQ,IAAME,IAAQ,GAAKC,IAAQ,EAAG,QAC5C,CACA,eAAQ,KAAK,yBAAyBH,CAAG,IAAIC,CAAG,KAAKC,CAAG,IAAIC,CAAG,EAAE,EAC1D,CACT,CAEA,KAAKvB,EAAqB,CACxB,GAAI,KAAK,KAAO,KACd,MAAM,IAAI,MAAM,iBAAiB,EAEnC,GAAI,CAAC,KAAK,0BAA0B,EAAG,CACrC,KAAK,OAAS,GACd,MACF,CACA,GAAI,KAAK,UAAY,KAAK,UAAW,CAEnC,KAAK,qBAAqB,EAC1B,MACF,CAEA,IAAIwB,EAEA,KAAK,UAAY,KAAK,WAAa,EAAI,KAAK,WAC9CA,EAAmB,KAAK,UAAU,MAAM,KAAK,UAAW,KAAK,SAAS,EACtE,KAAK,qBAAqB,IAE1BA,EAAmB,KAAK,UAAU,MAChC,KAAK,UACL,KAAK,UAAY,KAAK,SACxB,EACAA,EAAmBA,EAAiB,OAClC,KAAK,UAAU,MAAM,KAAK,UAAY,KAAK,UAAW,KAAK,SAAS,CACtE,EACA,KAAK,WAAa,KAAK,UACvB,KAAK,WAAa,KAAK,WAErBA,GACF,KAAK,GAAG,UAAU,CAChB,QACA,SAAU,GACV,UAAWA,CACb,CAAC,CAEL,CAEA,wBAAkC,CAChC,MAAO,EACT,CAEQ,2BAAqC,CAC3C,OAAO,KAAK,SAAS,KAAK,SAAS,GAAK,KAAK,SAAS,GAAG,SAAS,CACpE,CAEQ,sBAAuB,CAC7B,KAAK,gBAAgB,EACrB,KAAK,OAAS,EAChB,CAEQ,iBAAkB,CACpB,KAAK,SAAS,KAAK,KAAK,SAAS,GAAG,KAAK,SAAS,KAAK,KAAK,MAAM,EAClE,KAAK,SAAS,GAAG,KAAK,SAAS,GAAG,KAAK,SAAS,GAAG,KAAK,MAAM,CACpE,CACF,ECnJO,IAAMC,GAAN,KAAmD,CAAnD,cACL,KAAQ,SAA8B,IAAI,IAE1C,WAAWC,EAAuB,CAChC,KAAK,SAAS,IAAIA,CAAO,CAC3B,CAEA,cAAcA,EAAuB,CACnC,KAAK,SAAS,OAAOA,CAAO,CAC9B,CAEA,YAAYC,EAAiC,CAC3C,QAAWD,KAAW,KAAK,SACzB,GAAIA,EAAQ,OAASC,EAAM,OAAOD,EAEpC,OAAO,IACT,CAEA,QAA4B,CAC1B,OAAO,KAAK,QACd,CACF,EAOME,GAAN,KAAiE,CAC/D,YAAoBC,EAAY,CAAZ,UAAAA,CAAa,CAEjC,aAAaC,EAAeC,EAAwB,CAClD,IAAMC,EAAQ,IAAIC,GAChB,KAAK,KAAK,IAAI,EACd,KAAK,KAAK,QAAQ,EAClBH,EACAC,EACA,IACA,GACA,GACA,CACF,EACA,OAAOC,EAAM,QAAQ,IAAM,EACvBA,EAAM,gBAAgB,EACtB,CAAC,CACP,CAEA,iBAAiBF,EAAoBC,EAAkC,CACrE,IAAMG,EAAe,IAAIC,GACvBL,EACAC,EACA,IACA,GACA,IAAIK,GAAuB,KAAK,IAAI,CACtC,EACA,OAAOF,EAAa,QAAQ,IAAM,EAC9BA,EAAa,gBAAgB,EAC7B,CAAC,CACP,CACF,EAEO,SAASG,GAAkBR,EAAyB,CACzD,IAAMS,EAAiB,IAAIb,GACrBc,EAAc,IAAIX,GAA0BC,CAAI,EACtD,OAAO,IAAIW,GAAgBX,EAAMS,EAAgBC,CAAW,CAC9D,CAEO,IAAMC,GAAN,KAA6C,CAGlD,YACUX,EACAS,EACAC,EACR,CAHQ,UAAAV,EACA,oBAAAS,EACA,iBAAAC,EALV,KAAQ,sBAAgC,CAMrC,CAEH,eAAeb,EAAuB,CACpC,KAAK,eAAe,WAAWA,CAAO,EACtC,KAAK,wBAAwBA,CAAO,CACtC,CAEA,cAAcC,EAAkB,CAC9B,IAAMD,EAAU,KAAK,eAAe,YAAYC,CAAI,EACpD,GAAI,CAACD,EAAS,OAEd,IAAMe,EAAYf,EAAQ,UAAU,EACpC,KAAK,sBAAsBA,CAAO,EAClC,KAAK,eAAe,cAAcA,CAAO,EAEzC,IAAMgB,EAAUhB,EAAQ,WAAW,EACnC,GAAKgB,EACL,IAAID,EAAU,SAAW,EACvBC,EAAQ,cAAchB,CAAO,UACpBe,EAAU,OAAS,EAC5B,QAAWE,KAAYF,EAAW,CAChC,IAAMG,EAAW,KAAK,eAAeD,CAAQ,EAC1B,IAAIE,GAAQ,EACpB,YAAYD,CAAQ,CACjC,CAEFlB,EAAQ,KAAK,gBAAgB,EAAK,EACpC,CAKA,iBAAiBI,EAAoBC,EAAkC,CACrE,OAAO,KAAK,YAAY,iBAAiBD,EAAMC,CAAE,CACnD,CAEQ,wBAAwBL,EAAuB,CACrD,IAAMe,EAAY,KAAK,KAAK,YAC1Bf,EAAQ,KAAK,EACb,KAAK,KAAK,OAAO,EAAE,qBAAqB,EACxC,wBAA+C,CACjD,EAEMoB,EAAiB,IAAI,IAC3BL,EAAU,KAAK,CAACM,EAAGC,IAAMD,EAAE,YAAcC,EAAE,WAAW,EAEtD,QAAWL,KAAYF,EAAW,CAChC,GAAIE,EAAS,OAASjB,EAAQ,KAAM,SACpC,IAAMuB,EAAkB,KAAK,eAAe,YAAYN,EAAS,IAAI,EACrE,GAAI,CAACM,EAAiB,SAEtB,IAAMC,EAAoB,KAAK,aAC7BD,EACAvB,EACA,KAAK,qBACP,EAEMyB,EAAkBF,EAAgB,WAAW,EACnD,GAAIE,IAAoB,KAAM,UAE5BD,EAAoB,KAAK,uBACzBA,IAAsB,KAGtBP,EAAS,YAAc,KAAK,KAAK,OAAO,EAAE,qBAAqB,GAAK,GAEhE,KAAK,QAAQjB,EAASuB,CAAe,IACvCE,EAAgB,WAAWzB,CAAO,EAClCoB,EAAe,IAAIK,CAAe,EAGxC,CAGIL,EAAe,KAAO,EACxB,KAAK,cAAcA,CAAc,EACxBA,EAAe,OAAS,GAEd,IAAID,GAAQ,EACpB,WAAWnB,CAAO,CAEjC,CAEQ,sBAAsBA,EAAuB,CACnD,QAAW0B,KAAQ1B,EAAQ,aAAa,EACtC0B,EAAK,OAAO,KAAK,IAAI,EAEvB1B,EAAQ,eAAe,EACvB,IAAMgB,EAAUhB,EAAQ,WAAW,EAC/BgB,IAAY,MAAQA,EAAQ,KAAK,IAAM,GACzC,KAAK,cAAcA,CAAO,CAE9B,CAEQ,cAAcA,EAAkB,CACtC,QAAWhB,KAAWgB,EAAQ,SAC5BhB,EAAQ,WAAW,IAAI,EAEzBgB,EAAQ,MAAM,CAChB,CAEQ,QAAQZ,EAAoBC,EAAkB,CACpD,IAAMsB,EAAO,KAAK,YAAY,aAAavB,EAAK,KAAK,EAAGC,EAAG,KAAK,CAAC,EACjE,GAAIsB,EAAK,OAAS,GAAKA,EAAK,OAAS,KAAK,KAAK,OAAO,EAAE,gBAAgB,EAAG,CACzE,IAAMC,EAAW,IAAIC,GAASzB,EAAMC,EAAIsB,CAAI,EAC5C,YAAK,KAAK,aAAa,IAAIG,GAAkBF,CAAQ,CAAC,EACtDxB,EAAK,YAAYwB,CAAQ,EACzBvB,EAAG,YAAYuB,CAAQ,EAChB,EACT,CACA,MAAO,EACT,CAEQ,aACNG,EACAC,EACAC,EACQ,CACR,GAAIF,IAAUC,EAAM,MAAO,GAE3B,IAAME,EAAU,IAAI,IACdC,EAA4D,CAChE,CAAE,QAASJ,EAAO,SAAU,CAAE,CAChC,EAEA,KAAOI,EAAM,OAAS,GAAG,CACvB,GAAM,CAAE,QAAAnC,EAAS,SAAAoC,CAAS,EAAID,EAAM,MAAM,EAC1C,GAAI,CAAAD,EAAQ,IAAIlC,CAAO,IACvBkC,EAAQ,IAAIlC,CAAO,EAEf,EAAAoC,GAAYH,IAEhB,QAAWhB,KAAYjB,EAAQ,UAAU,EAAG,CAC1C,GAAIiB,IAAae,EAAM,OAAOI,EAAW,EACpCF,EAAQ,IAAIjB,CAAQ,GACvBkB,EAAM,KAAK,CAAE,QAASlB,EAAU,SAAUmB,EAAW,CAAE,CAAC,CAE5D,CACF,CAGA,MAAO,EACT,CAEQ,eAAeL,EAAwC,CAC7D,IAAMG,EAAU,IAAI,IACdC,EAAQ,CAACJ,CAAK,EAEpB,KAAOI,EAAM,OAAS,GAAG,CACvB,IAAME,EAAUF,EAAM,MAAM,EAC5B,GAAI,CAAAD,EAAQ,IAAIG,CAAO,EACvB,CAAAH,EAAQ,IAAIG,CAAO,EAEnB,QAAWpB,KAAYoB,EAAQ,UAAU,EAClCH,EAAQ,IAAIjB,CAAQ,GAAGkB,EAAM,KAAKlB,CAAQ,EAEnD,CAEA,OAAOiB,CACT,CAEQ,cAAcI,EAA+B,CACnD,IAAMC,EAAS,IAAIpB,GACnB,QAAWH,KAAWsB,EACpBC,EAAO,MAAMvB,CAAO,CAExB,CACF,ECpQO,IAAMwB,GAAY,CAAC,QAAS,QAAS,OAAQ,OAAO,EAC9CC,GAAiBC,EAAE,KAAKF,EAAS,EAQjCG,GAAqB,CAC/B,YAAoB,QACpB,gBAAwB,QACxB,KAAgB,OAChB,eAAuB,OAC1B,EAEaC,GAAY,CAAC,QAAS,OAAO,EAC7BC,GAAiBH,EAAE,KAAKE,EAAS,EASjCE,GAAa,CACxB,OACA,OACA,OACA,OACA,OACA,OACA,MACF,EACaC,GAAkBL,EAAE,KAAKI,EAAU,EAWnCE,GAAsB,CAChC,KAAgB,OAChB,eAAuB,OACvB,eAAuB,OACvB,KAAgB,OAChB,eAAuB,OACvB,QAAmB,OACnB,QAAmB,MACtB,EAGaC,GAAoB,EACpBC,GAAoB,EACpBC,GAAsB,EAGtBC,GAAkB,EAClBC,GAAoB,EACpBC,GAAqB,EACrBC,GAAqB,EAGrBC,GAAoB,EACpBC,GAAkB,EAClBC,GAAuB,EAGvBC,GAAkB,EAClBC,GAAiB,EACjBC,GAAmB,EACnBC,GAAmB,EAGnBC,GAAoB,EACpBC,GAAsB,EACtBC,GAAsB,EACtBC,GAAmB,EACnBC,GAAsB,EAEtBC,GAAqB1B,EAAE,WAAY2B,GAC1C,OAAOA,GAAQ,UAAY,UAAU,KAAKA,CAAG,EAAU,OAAOA,CAAG,EACjCA,EAEnC3B,EAAE,OAAO,CAAC,EAEP4B,GAAyBF,GAAmB,MAAM,EAAE,IAAI,CAAC,EAGlDG,GAAoB7B,EAC9B,OAAO,CACN,QAAS4B,GAAuB,SAAS,EACzC,UAAWF,GAAmB,SAAS,EACvC,SAAUA,GAAmB,SAAS,EACtC,UAAWA,GAAmB,SAAS,EACvC,MAAO1B,EAAE,cAAcG,GAAgByB,EAAsB,EAAE,SAAS,EACxE,MAAO5B,EAAE,cAAcD,GAAgB6B,EAAsB,EAAE,SAAS,EACxE,KAAMA,GAAuB,SAAS,EACtC,MAAO5B,EAAE,cAAcK,GAAiBuB,EAAsB,EAAE,SAAS,CAC3E,CAAC,EACA,SAAS,EC5EZ,SAASE,GAAQC,EAA2B,CAC1C,OAAQ,OAAOA,EAAO,CACpB,IAAK,SACH,OAAOA,EACT,IAAK,SACH,OAAO,OAAO,KAAK,MAAMA,CAAK,CAAC,CACnC,CACF,CAEO,IAAMC,GAAN,KAAiC,CAAjC,cACL,KAAiB,KAAwB,CAAC,EAE1C,KAAQ,iBAA2B,GAEnC,kBAA2B,CACzB,OAAO,KAAK,gBACd,CAEA,eAAeC,EAA6B,CAC1C,IAAMC,EAAWD,EAAO,SAAS,EACjC,GAAIC,IAAa,KACjB,OAAO,KAAK,KAAKA,CAAQ,CAC3B,CAEA,OAAQ,CACN,OAAO,KAAK,IACd,CAEQ,iBAAiBD,EAA6B,CACpD,IAAMC,EAAWD,EAAO,SAAS,EACjC,GAAIC,IAAa,KAAM,OACvB,GAAIA,KAAY,KAAK,KACnB,OAAO,KAAK,KAAKA,CAAQ,EAE3B,IAAMC,EAAO,CAAC,EACd,YAAK,KAAKD,CAAQ,EAAIC,EACfA,CACT,CAEQ,WAAWF,EAAgBG,EAAeL,EAAmB,CACnE,IAAMM,EAAI,KAAK,iBAAiBJ,CAAM,EACtC,GAAII,IAAM,OAEV,KADAA,EAAE,UAAFA,EAAE,QAAY,CAAC,EAAE,GACVA,EAAE,QAAQ,QAAUD,GAAOC,EAAE,QAAQ,KAAK,EAAE,EACnDA,EAAE,QAAQD,CAAK,GAAKN,GAAQC,CAAK,EACnC,CAEQ,aAAaE,EAAgBF,EAAmB,CACtD,IAAMI,EAAO,KAAK,iBAAiBF,CAAM,EACrCE,IAAS,SACbA,EAAK,YAALA,EAAK,UAAc,IACnBA,EAAK,WAAaL,GAAQC,CAAK,EACjC,CAEQ,SACNE,EACAK,EACAF,EACAL,EACA,CA3FJ,IAAAQ,EA4FI,IAAMF,EAAI,KAAK,iBAAiBJ,CAAM,EACtC,GAAII,IAAM,OAGV,KAFAA,EAAE,QAAFA,EAAE,MAAU,CAAE,CAACC,CAAI,EAAG,CAAC,EAAE,CAAE,IAC3BC,EAAAF,EAAE,OAAFC,KAAAC,EAAAD,GAAkB,CAAC,EAAE,GACdD,EAAE,MAAMC,CAAI,EAAE,QAAUF,GAAOC,EAAE,MAAMC,CAAI,EAAE,KAAK,EAAE,EAC3DD,EAAE,MAAMC,CAAI,EAAEF,CAAK,GAAKN,GAAQC,CAAK,EACvC,CAEQ,SACNE,EACAO,EACAJ,EACAL,EACM,CAzGV,IAAAQ,EA0GI,IAAMD,EAAOG,GAAmBD,CAAQ,EAClCH,EAAI,KAAK,iBAAiBJ,CAAM,EACtC,GAAII,IAAM,OAGV,KAFAA,EAAE,QAAFA,EAAE,MAAU,CAAE,CAACC,CAAI,EAAG,CAAC,EAAE,CAAE,IAC3BC,EAAAF,EAAE,OAAFC,KAAAC,EAAAD,GAAkB,CAAC,EAAE,GACdD,EAAE,MAAMC,CAAI,EAAE,QAAUF,GAAOC,EAAE,MAAMC,CAAI,EAAE,KAAK,EAAE,EAC3DD,EAAE,MAAMC,CAAI,EAAEF,CAAK,GAAKN,GAAQC,CAAK,EACvC,CAEQ,SAASE,EAAgBG,EAAeL,EAAmB,CACjE,IAAMM,EAAI,KAAK,iBAAiBJ,CAAM,EACtC,GAAII,IAAM,OAEV,KADAA,EAAE,OAAFA,EAAE,KAAS,CAAC,EAAE,GACPA,EAAE,KAAK,QAAUD,GAAOC,EAAE,KAAK,KAAK,EAAE,EAC7CA,EAAE,KAAKD,CAAK,GAAKN,GAAQC,CAAK,EAChC,CAEQ,cACNE,EACAS,EACAN,EACAL,EACA,CAhIJ,IAAAQ,EAiII,IAAMD,EAAOK,GAAoBD,CAAa,EACxCL,EAAI,KAAK,iBAAiBJ,CAAM,EACtC,GAAII,IAAM,OAGV,KAFAA,EAAE,QAAFA,EAAE,MAAU,CAAE,CAACC,CAAI,EAAG,CAAC,EAAE,CAAE,IAC3BC,EAAAF,EAAE,OAAFC,KAAAC,EAAAD,GAAkB,CAAC,EAAE,GACdD,EAAE,MAAMC,CAAI,EAAE,QAAUF,GAAOC,EAAE,MAAMC,CAAI,EAAE,KAAK,EAAE,EAC3DD,EAAE,MAAMC,CAAI,EAAEF,CAAK,GAAKN,GAAQC,CAAK,EACvC,CAEQ,aAAaE,EAAgB,CACnC,IAAMI,EAAI,KAAK,iBAAiBJ,CAAM,EAClCI,IAAM,SACNA,EAAE,YAAc,OAClBA,EAAE,UAAYP,GAAQ,CAAC,EAEvBO,EAAE,WAAaP,GAAQ,CAAC,EAE5B,CAEQ,iBAAiBG,EAAgBW,EAAc,CACrD,IAAMP,EAAI,KAAK,iBAAiBJ,CAAM,EAClCI,IAAM,SACVA,EAAE,SAAWP,GAAQc,CAAI,EAC3B,CAEA,OACEX,EACAY,EACAC,EACM,CACN,KAAK,WAAWb,EAAQc,GAAmBD,CAAM,EAC7CD,EAAO,SAAS,GAClB,KAAK,WAAWA,EAAQG,GAAmBF,CAAM,CAErD,CAEA,aACEb,EACAY,EACAC,EACM,CACN,KAAK,WAAWb,EAAQgB,GAAqBH,CAAM,EACnD,KAAK,WAAWb,EAAQc,GAAmB,CAACD,CAAM,EAC9CD,EAAO,SAAS,GAClB,KAAK,WAAWA,EAAQG,GAAmB,CAACF,CAAM,CAEtD,CAEA,OAAOb,EAAsB,CAC3B,KAAK,aAAaA,EAAQ,CAAC,CAC7B,CAEA,cAAcA,EAAgBY,EAAsB,CAClD,KAAK,SAASZ,EAAQ,QAASiB,GAAiB,CAAC,CACnD,CAEA,gBAAgBjB,EAAgBY,EAAgBM,EAAwB,CACtE,KAAK,SAASlB,EAAQ,QAASmB,GAAmB,CAAC,EACnD,KAAK,SAASnB,EAAQoB,GAAkBF,CAAI,EAC5C,KAAK,SAASN,EAAQQ,GAAkBF,CAAI,CAC9C,CAEA,kBAAkBlB,EAAgBY,EAAgBM,EAAwB,CACxE,KAAK,SAASlB,EAAQ,QAASqB,GAAoB,CAAC,EACpD,KAAK,SAASrB,EAAQsB,GAAkBJ,CAAI,CAC9C,CAEA,iBAAiBlB,EAAgBY,EAAsB,CACrD,KAAK,SAASZ,EAAQ,QAASuB,GAAoB,CAAC,CACtD,CAEA,eACEvB,EACAY,EACAC,EACM,CACN,KAAK,SAASb,EAAQ,QAASiB,GAAiB,CAAC,CACnD,CAEA,iBACEjB,EACAY,EACAC,EACM,CACN,KAAK,SAASb,EAAQ,QAASmB,GAAmB,CAAC,CACrD,CAEA,kBAAkBnB,EAAgBY,EAAgBC,EAA0B,CAC1E,KAAK,SAASb,EAAQ,QAASuB,GAAoB,CAAC,CACtD,CAEA,WACEvB,EACAY,EACAP,EACM,CACFA,IAAS,QACX,KAAK,mBAEP,KAAK,SAASL,EAAQK,EAAMmB,GAAmB,CAAC,CAClD,CAEA,SACExB,EACAY,EACAP,EACM,CACN,KAAK,SAASL,EAAQK,EAAMoB,GAAiB,CAAC,CAChD,CAEA,cAAczB,EAAgBK,EAAgBqB,EAAyB,CACrE,KAAK,SAAS1B,EAAQK,EAAMsB,GAAsBD,CAAK,CACzD,CAEA,SAAS1B,EAAgBkB,EAAwB,CAC/C,KAAK,SAASlB,EAAQ4B,GAAiBV,CAAI,CAC7C,CAEA,QAAQlB,EAAgB6B,EAAkBX,EAAwB,CAChE,KAAK,SAASlB,EAAQ8B,GAAgBZ,CAAI,EAC1C,KAAK,aAAalB,CAAM,CAC1B,CAEA,UAAUA,EAAgBK,EAA2B,CACnD,KAAK,cAAcL,EAAQK,EAAM0B,GAAmB,CAAC,CACvD,CAEA,YAAY/B,EAAgBK,EAA2B,CACrD,KAAK,cAAcL,EAAQK,EAAM2B,GAAqB,CAAC,CACzD,CAEA,YAAYhC,EAAgBK,EAA2B,CACrD,KAAK,cAAcL,EAAQK,EAAM4B,GAAqB,CAAC,CACzD,CAEA,YAAYjC,EAAgBK,EAA2B,CACrD,KAAK,cAAcL,EAAQK,EAAM6B,GAAqB,CAAC,CACzD,CAEA,SAASlC,EAAgBK,EAA2B,CAClD,KAAK,cAAcL,EAAQK,EAAM8B,GAAkB,CAAC,CACtD,CAEA,aAAanC,EAAgBW,EAAoB,CAC/C,KAAK,iBAAiBX,EAAQW,CAAI,CACpC,CAEA,cAAcyB,EAA0B,CAAC,CAC3C,ECjRO,SAASC,GACdC,EACAC,EACAC,EAAsBC,GAAeH,EAAQ,OAAQC,EAAM,MAAM,EAC/B,CAClC,IAAMG,EAAS,IAAI,IACbC,EAAkB,IAAI,IAGtBC,EAAa,IAAI,IACjBC,EAA8B,CAAC,EAGrC,QAAWC,KAAUR,EACfQ,EAAO,MACJF,EAAW,IAAIE,EAAO,IAAI,GAC7BF,EAAW,IAAIE,EAAO,KAAM,CAAC,CAAC,EAEhCF,EAAW,IAAIE,EAAO,IAAI,EAAG,KAAKA,CAAM,GAExCD,EAAc,KAAKC,CAAM,EAK7B,IAAMC,EAAc,MAAM,KAAKH,EAAW,QAAQ,CAAC,EAAE,KACnD,CAACI,EAAGC,IAAMA,EAAE,CAAC,EAAE,OAASD,EAAE,CAAC,EAAE,MAC/B,EAIA,OAAW,CAACE,EAAGC,CAAW,IAAKJ,EAAa,CAE1C,IAAIK,EAAoB,KACpBC,EAAW,EACf,QAAWC,KAAKf,EAAO,CACrB,IAAMgB,EAAIZ,EAAgB,IAAIW,CAAC,GAAK,EAChCF,IAAS,MAAQC,GAAYE,IACjCF,EAAWE,EACXH,EAAOE,EACT,CAEA,GAAIF,IAAS,KAEb,SAAWN,KAAUK,EACfE,EAAWb,GACba,IACAX,EAAO,IAAII,EAAQM,CAAI,GAEvBV,EAAO,IAAII,EAAQ,QAAQ,EAG/BH,EAAgB,IAAIS,EAAMC,CAAQ,EACpC,CAGA,IAAIG,EAAgBX,EAAc,OAC/BC,GAAWA,EAAO,aAAe,WACpC,EACIU,EAAc,OAAS,IAGzBA,EADe,IAAIC,EAAaC,EAAWF,EAAc,CAAC,EAAE,EAAE,CAAC,EACxC,aAAaA,CAAa,GAEnD,IAAMG,EAAed,EAAc,OAChCC,GAAWA,EAAO,aAAe,WACpC,EAEA,QAAWA,KAAUa,EAAa,OAAOH,CAAa,EAAG,CACvD,IAAIJ,EAAoB,KACpBC,EAAW,EACf,QAAWC,KAAKf,EAAO,CACrB,IAAM,EAAII,EAAgB,IAAIW,CAAC,GAAK,EAChCF,IAAS,MAAQC,GAAY,IACjCA,EAAW,EACXD,EAAOE,EACT,CACIF,IAAS,OACbT,EAAgB,IAAIS,EAAMC,EAAW,CAAC,EACtCX,EAAO,IAAII,EAAQM,CAAI,EACzB,CAEA,OAAOV,CACT,CAcO,SAASkB,GAAeC,EAAoBC,EAA0B,CAC3E,OAAO,KAAK,KAAKD,EAAaC,CAAQ,CACxC,CCpGO,IAAMC,GAAN,KAA+C,CACpD,aAAc,CAAC,CACf,SAAkB,CAChB,MAAO,EACT,CACA,UAAqB,CACnB,MAAO,yBACT,CAEA,IAAK,CACH,OAAO,IACT,CAEA,UAAkB,CAChB,MAAO,EACT,CACF,ECVO,IAAMC,GAAN,KAAe,CAIpB,YAAoBC,EAAa,CAAb,QAAAA,EAFpB,KAAiB,SAAW,IAG1B,KAAK,KAAO,MAAM,KAAK,KAAKA,EAAG,OAAO,EAAI,KAAK,QAAQ,CAAC,EACrD,KAAK,IAAI,EACT,IAAI,IACH,MAAM,KAAK,KAAKA,EAAG,MAAM,EAAI,KAAK,QAAQ,CAAC,EACxC,KAAK,IAAI,EACT,IAAI,IAAM,IAAI,GAAqC,CACxD,CACJ,CAGQ,cAAcC,EAAWC,EAA6B,CAC5D,MAAO,CAAC,KAAK,MAAMD,EAAI,KAAK,QAAQ,EAAG,KAAK,MAAMC,EAAI,KAAK,QAAQ,CAAC,CACtE,CAGA,QAAQC,EAAuB,CAC7B,IAAMC,EAAOD,EAAK,KAAK,EACjB,CAACE,EAAOC,CAAK,EAAI,KAAK,cAAc,KAAK,GAAG,EAAEF,CAAI,EAAG,KAAK,GAAG,EAAEA,CAAI,CAAC,EAE1E,GAAI,KAAK,YAAYC,EAAOC,CAAK,EAAG,CAClC,IAAMC,EAAU,KAAK,KAAKD,CAAK,EAAED,CAAK,EAAE,IAAIF,EAAK,KAAK,CAAC,EACnDI,IAAY,OACdA,EAAQ,IAAIJ,CAAI,EAEhB,KAAK,KAAKG,CAAK,EAAED,CAAK,EAAE,IACtBF,EAAK,KAAK,EACV,IAAI,IAAqB,CAACA,CAAI,CAAC,CACjC,CAEJ,CACF,CAGA,WAAWA,EAAuB,CAChC,IAAMC,EAAOD,EAAK,KAAK,EACvB,KAAK,iBAAiBA,EAAMC,CAAI,CAClC,CAEA,iBAAiBD,EAAuBC,EAAe,CACrD,GAAM,CAACC,EAAOC,CAAK,EAAI,KAAK,cAAc,KAAK,GAAG,EAAEF,CAAI,EAAG,KAAK,GAAG,EAAEA,CAAI,CAAC,EAE1E,GAAI,KAAK,YAAYC,EAAOC,CAAK,EAAG,CAClC,IAAMC,EAAU,KAAK,KAAKD,CAAK,EAAED,CAAK,EAAE,IAAIF,EAAK,KAAK,CAAC,EACnDI,IAAY,QACdA,EAAQ,OAAOJ,CAAI,CAEvB,CACF,CAKA,eAAeA,EAAuB,CACpC,IAAMK,EAAUL,EAAK,KAAK,EACpBM,EAAUN,EAAK,SAAS,EACxB,CAACE,EAAOC,CAAK,EAAI,KAAK,cAC1B,KAAK,GAAG,EAAEG,CAAO,EACjB,KAAK,GAAG,EAAEA,CAAO,CACnB,EACM,CAACC,EAAUC,CAAQ,EAAI,KAAK,cAChC,KAAK,GAAG,EAAEH,CAAO,EACjB,KAAK,GAAG,EAAEA,CAAO,CACnB,GACIH,IAAUK,GAAYJ,IAAUK,KAClC,KAAK,iBAAiBR,EAAMM,CAAO,EACnC,KAAK,QAAQN,CAAI,EAErB,CAEQ,YAAYE,EAAeC,EAAwB,CACzD,OACED,GAAS,GACTA,EAAQ,KAAK,KAAK,CAAC,EAAE,QACrBC,GAAS,GACTA,EAAQ,KAAK,KAAK,MAEtB,CAGQ,gBAAgBF,EAAeQ,EAAe,CACpD,IAAMX,EAAI,KAAK,GAAG,EAAEG,CAAI,EAClBF,EAAI,KAAK,GAAG,EAAEE,CAAI,EAClBS,EAAW,KAAK,SAChB,CAACR,EAAOC,CAAK,EAAI,KAAK,cAAcL,EAAGC,CAAC,EACxCY,EAAa,KAAK,IACtB,EACAT,EAAQ,KAAK,MAAMO,EAASX,EAAIY,GAAaA,CAAQ,CACvD,EACME,EAAW,KAAK,IACpB,KAAK,KAAK,CAAC,EAAE,OAAS,EACtBV,EAAQ,KAAK,MAAMO,GAASC,EAAYZ,EAAIY,IAAcA,CAAQ,CACpE,EACMG,EAAa,KAAK,IACtB,EACAV,EAAQ,KAAK,MAAMM,EAASV,EAAIW,GAAaA,CAAQ,CACvD,EACMI,EAAW,KAAK,IACpB,KAAK,KAAK,OAAS,EACnBX,EAAQ,KAAK,MAAMM,GAASC,EAAYX,EAAIW,IAAcA,CAAQ,CACpE,EAEA,MAAO,CAAE,WAAAC,EAAY,SAAAC,EAAU,WAAAC,EAAY,SAAAC,CAAS,CACtD,CAEQ,wBACNd,EACAC,EACQ,CACR,IAAMH,EAAI,KAAK,GAAG,EAAEG,CAAI,EAClBF,EAAI,KAAK,GAAG,EAAEE,CAAI,EAClBc,EAAQ,KAAK,GAAG,EAAEf,EAAK,KAAK,CAAC,EAC7BgB,EAAQ,KAAK,GAAG,EAAEhB,EAAK,KAAK,CAAC,EAC7BiB,EAAKF,EAAQjB,EACboB,EAAKF,EAAQjB,EAEnB,OADoBkB,EAAKA,EAAKC,EAAKA,CAErC,CAIA,YACEjB,EACAkB,EACAC,EACAC,EACAC,EAAoC,GACmB,CACvD,IAAMC,EAAgE,CAAC,EACjE,CAAE,WAAAZ,EAAY,SAAAC,EAAU,WAAAC,EAAY,SAAAC,CAAS,EAAI,KAAK,gBAC1Db,EACAkB,CACF,EACMK,EAAeL,EAAcA,EAC7BM,EAAU,MAAM,QAAQL,CAAK,EAAI,IAAI,IAAIA,CAAK,EAAI,IAAI,IAAI,CAACA,CAAK,CAAC,EACvE,QAASM,EAAKb,EAAYa,GAAMZ,EAAUY,IACxC,QAASC,EAAKhB,EAAYgB,GAAMf,EAAUe,IACxC,QAAWC,KAAQH,EAAS,CAC1B,IAAMrB,EAAU,KAAK,KAAKsB,CAAE,EAAEC,CAAE,EAAE,IAAIC,CAAI,EAC1C,GAAIxB,IAAY,OAChB,QAAWJ,KAAQI,EAAS,CAI1B,GAHI,CAACJ,EAAK,SAAS,GAGf,CAACsB,GAA4BtB,EAAK,oBAAoB,EACxD,SACF,IAAM6B,EAAc,KAAK,wBAAwB7B,EAAMC,CAAI,EAC3D,GAAI4B,EAAcL,EAAc,SAChC,IAAMM,EAAQ,CAAE,KAAA9B,EAAM,YAAA6B,CAAY,EAC9BR,IAAc,QAAa,CAACA,EAAUS,CAAK,GAC/CP,EAAO,KAAKO,CAAK,CACnB,CACF,CAGJ,OAAOP,CACT,CAEQ,cACNvB,EACAC,EACAuB,EACAO,EACAT,EAAoC,GAC3B,CAST,MARI,CAACtB,EAAK,SAAS,GAKf,CAACsB,GAA4BtB,EAAK,oBAAoB,GAGtD+B,IAAa,QAAa/B,EAAK,MAAM,EAAE,GAAG,IAAM+B,EAC3C,GAEW,KAAK,wBAAwB/B,EAAMC,CAAI,GACrCuB,CACxB,CAGA,cACEvB,EACAkB,EACAS,EACAG,EACAT,EAAoC,GAC3B,CACT,GAAM,CAAE,WAAAX,EAAY,SAAAC,EAAU,WAAAC,EAAY,SAAAC,CAAS,EAAI,KAAK,gBAC1Db,EACAkB,CACF,EACMK,EAAeL,EAAcA,EACnC,QAASO,EAAKb,EAAYa,GAAMZ,EAAUY,IACxC,QAASC,EAAKhB,EAAYgB,GAAMf,EAAUe,IAAM,CAC9C,IAAMvB,EAAU,KAAK,KAAKsB,CAAE,EAAEC,CAAE,EAAE,IAAIC,CAAI,EAC1C,GAAIxB,IAAY,QAChB,QAAWJ,KAAQI,EACjB,GACE,KAAK,cACHJ,EACAC,EACAuB,EACAO,EACAT,CACF,EAEA,MAAO,GAGb,CAEF,MAAO,EACT,CACF,ECtLO,SAASU,GACdC,EACAC,EACAC,EACAC,EACAC,EACM,CACN,IAAMC,EAAQ,IAAIC,GAClB,OAAO,IAAIC,GAASP,EAAQC,EAASC,EAASC,EAAaC,EAAQC,CAAK,CAC1E,CAIO,IAAME,GAAN,KAA+B,CA6BpC,YACUC,EACAC,EACAC,EACAP,EACAQ,EACAC,EACR,CANQ,aAAAJ,EACA,cAAAC,EACA,UAAAC,EACA,iBAAAP,EACA,aAAAQ,EACA,YAAAC,EAlCV,KAAQ,OAAS,EAEjB,KAAQ,YAA2B,CAAC,EAEpC,cAAsC,IAAI,IAC1C,uBAA8B,CAAC,EAE/B,KAAQ,MAAqB,CAAC,EAK9B,sBAA0C,CAAC,EAC3C,gBAA6B,CAAC,EAE9B,KAAQ,aAAe,EACvB,KAAQ,YAAc,EAEtB,KAAQ,QAAuBC,GAAqB,EAIpD,KAAQ,QAAgBC,EAAa,IACrC,KAAQ,aAA4BC,GAAkB,IAAI,EAG1D,KAAQ,eAAyB,EAU/B,KAAK,cAAgB,IAAIC,GACzB,KAAK,OAASN,EAAK,MAAM,EACzB,KAAK,QAAUA,EAAK,OAAO,EAC3B,KAAK,SAAW,IAAIO,GAAS,KAAK,IAAI,EAElCN,EAAQ,WAAW,EAAE,WAAa,QACpC,KAAK,cAAc,EAErB,KAAK,WAAW,CAClB,CAEQ,eAAgB,CACtB,IAAIO,EAAiB,KAAK,QAAQ,YAAY,EAG9C,GAAIA,IAAmBC,GAAiB,CACtC,KAAK,YAAc,CAACL,EAAa,OAAQA,EAAa,OAAO,EAC7D,MACF,CAEA,GAAI,OAAOI,GAAmB,SAAU,CACtC,IAAME,EAAU,KAAK,QAAQ,OAAS,KAAK,SAAS,OACpD,OAAQF,EAAgB,CACtB,KAAKG,GACHH,EAAiB,KAAK,KAAKE,EAAU,CAAC,EACtC,MACF,KAAKE,GACHJ,EAAiB,KAAK,KAAKE,EAAU,CAAC,EACtC,MACF,KAAKG,GACHL,EAAiB,KAAK,KAAKE,EAAU,CAAC,EACtC,MACF,QACE,MAAM,IAAI,MAAM,2BAA2BF,CAAc,EAAE,CAC/D,CACF,CACA,GAAIA,EAAiB,EACnB,MAAM,IAAI,MAAM,kBAAkBA,CAAc,EAAE,EAC7C,GAAIA,EAAiB,EAC1B,KAAK,YAAc,CAACJ,EAAa,IAAKA,EAAa,IAAI,EACnDI,GAAkB,GAAG,KAAK,YAAY,KAAKJ,EAAa,MAAM,EAC9DI,GAAkB,GAAG,KAAK,YAAY,KAAKJ,EAAa,KAAK,EAC7DI,GAAkB,GAAG,KAAK,YAAY,KAAKJ,EAAa,MAAM,EAC9DI,GAAkB,GAAG,KAAK,YAAY,KAAKJ,EAAa,MAAM,EAC9DI,GAAkB,GAAG,KAAK,YAAY,KAAKJ,EAAa,IAAI,MAC3D,CACL,KAAK,YAAc,CAAC,EACpB,QAASU,EAAI,EAAGA,GAAKN,EAAgBM,IACnC,KAAK,YAAY,KAAK,QAAQA,CAAC,EAAE,CAErC,CACF,CAEQ,YAAa,CACnB,GAAI,KAAK,OAAO,EAAE,WAAW,EAAE,WAAa,eAAc,CACxD,KAAK,QAAQ,QAASC,GAAM,KAAK,UAAUA,CAAC,CAAC,EAC7C,KAAK,SAAS,QAASC,GAAM,KAAK,UAAUA,EAAE,UAAU,CAAC,EACzD,MACF,CAEA,GAAI,KAAK,QAAQ,YAAY,IAAMP,GAAiB,CAClD,KAAK,QAAQ,QAASM,GAAM,KAAK,UAAUA,EAAGX,EAAa,MAAM,CAAC,EAClE,KAAK,SAAS,QAASY,GACrB,KAAK,UAAUA,EAAE,WAAYZ,EAAa,OAAO,CACnD,EACA,MACF,CAGA,IAAMa,EAAa,CACjB,GAAG,KAAK,QACR,GAAG,KAAK,SAAS,IAAKD,GAAMA,EAAE,UAAU,CAC1C,EACME,EAAeC,GAAYF,EAAY,KAAK,WAAW,EAC7D,OAAW,CAACG,EAAYC,CAAI,IAAKH,EAAa,QAAQ,EAAG,CACvD,GAAIG,IAAS,SAAU,CACrB,QAAQ,KAAK,UAAUD,EAAW,IAAI,uBAAuB,EAC7D,QACF,CACA,KAAK,UAAUA,EAAYC,CAAI,CACjC,CACF,CAEA,cAAcC,EAAuB,CACnC,OAAO,KAAK,KAAK,cAAcA,CAAG,CACpC,CAEA,MAAMA,EAAqC,CACzC,OAAO,KAAK,gBAAgB,KAAK,QAAQA,CAAG,CAAC,CAC/C,CAEA,WAA+B,CAC7B,OAAO,KAAK,UACd,CAEA,gBAAgBC,EAAmC,CACjD,OAAIA,IAAO,EACF,KAAK,aAAa,EAEpB,KAAK,kBAAkBA,EAAK,CAAC,CACtC,CACA,KAAe,CACb,OAAO,KAAK,IACd,CACA,SAAmB,CACjB,OAAO,KAAK,WACd,CAEA,UAAUC,EAAoB,CAC3B,KAAK,QAAQA,EAAO,IAAI,EAAmB,KAAKA,CAAM,CACzD,CAEA,YAAqB,CACnB,IAAMC,EAAM,KAAK,YACjB,YAAK,cACEA,CACT,CAEA,WAAWC,EAAeC,EAAgB,CACxC,GAAIA,GAAS,KAAK,SAASD,CAAI,EAC7B,MAAM,MAAM,4BAA4BA,CAAI,YAAY,EAEtD,KAAK,KAAK,WAAWA,CAAI,IAG7B,KAAK,KAAK,WAAWA,EAAMC,CAAK,EAChC,KAAK,UAAU,CACb,OACA,OAAQ,KAAK,aAAaD,CAAI,CAChC,CAAC,EACH,CAEA,SAASE,EAA2B,CAClC,OAAO,MAAM,KAAK,KAAK,SAAS,OAAO,CAAC,EAAE,QAASb,GAAMA,EAAE,MAAM,GAAGa,CAAK,CAAC,CAC5E,CAEA,UAAUC,EAAwB,CAChC,IAAIC,EAAQ,EACZ,QAAWC,KAAU,KAAK,SAAS,OAAO,EACxCD,GAASC,EAAO,UAAUF,CAAI,EAEhC,OAAOC,CACT,CAEA,SAASD,EAA0B,CACjC,OAAO,KAAK,OAAO,EAAE,SAASA,CAAI,CACpC,CAEA,SAAoB,CAClB,OAAO,KAAK,QACd,CAEA,sBACEG,EACAC,EACwB,CACxB,GAAID,EAAU,aAAaC,CAAS,EAClC,eAAQ,IAAI,yCAAyC,EAC9C,KAET,GACEA,EACG,yBAAyB,EACzB,KAAMC,GAAOA,EAAG,UAAU,IAAMF,CAAS,IAAM,OAElD,eAAQ,IAAI,mCAAmCA,EAAU,KAAK,CAAC,EAAE,EAC1D,KAET,IAAMG,EAAmBH,EACtB,yBAAyB,EACzB,KAAME,GAAOA,EAAG,UAAU,IAAMD,CAAS,EAC5C,GAAIE,IAAqB,OACvB,eAAQ,IAAI,gDAAgD,EAC5DA,EAAiB,OAAO,EACjB,KAET,IAAMD,EAAK,IAAIE,GAAoBJ,EAAWC,EAAW,KAAK,OAAQ,IAAI,EAC1E,YAAK,iBAAiB,KAAKC,CAAE,EAC7B,KAAK,UAAUA,EAAG,SAAS,CAAC,EACrBA,CACT,CAEA,sBAAsBG,EAA8B,CAClD,KAAK,iBAAmB,KAAK,iBAAiB,OAC3CH,GAAOA,IAAOG,CACjB,EAEA,IAAML,EAAYK,EAAQ,UAAU,EAC9BJ,EAAYI,EAAQ,UAAU,EAGpC,GADiBL,EAAU,aAAaC,CAAS,EAE/C,MAAM,IAAI,MACR,uDAAuDA,EAAU,KAAK,CAAC,EACzE,EAIF,IAAMK,EAAW,IAAIC,GACnB,KACAP,EACAC,EACA,KAAK,OACL,KAAK,gBACP,EACA,KAAK,WAAW,KAAKK,CAAQ,EAC5BD,EAAQ,UAAU,EAAiB,6BAA6B,KAC/DA,CACF,EAGIL,EAAU,kBAAkBC,CAAS,GACvCD,EAAU,oBAAoBC,CAAS,EACrCA,EAAU,kBAAkBD,CAAS,GACvCC,EAAU,oBAAoBD,CAAS,EAEzC,KAAK,UAAU,CACb,OACA,QAASK,EAAQ,SAAS,EAC1B,SAAU,EACZ,CAAC,CACH,CAEA,sBAAsBA,EAA8B,CAClD,KAAK,iBAAmB,KAAK,iBAAiB,OAC3CH,GAAOA,IAAOG,CACjB,EACCA,EAAQ,UAAU,EAAiB,6BAA6B,KAC/DA,CACF,EACA,KAAK,UAAU,CACb,OACA,QAASA,EAAQ,SAAS,EAC1B,SAAU,EACZ,CAAC,CACH,CAEA,UAAUd,EAAuB,CAC/B,OAAO,KAAK,SAAS,IAAIA,CAAE,CAC7B,CACA,QAAiB,CACf,OAAO,KAAK,OACd,CAEA,cAAwB,CACtB,OAAO,KAAK,QAAU,KAAK,OAAO,EAAE,mBAAmB,CACzD,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CAEA,iBAA+B,CAC7B,KAAK,QAAUpB,GAAqB,EACpC,KAAK,MAAM,QAASqC,GAAM,EAErB,CAAC,KAAK,aAAa,GAAKA,EAAE,uBAAuB,IAClDA,EAAE,SAAS,GAEXA,EAAE,KAAK,KAAK,MAAM,CAEtB,CAAC,EACD,IAAMC,EAAsB,CAAC,EACvBC,EAAwB,CAAC,EAC/B,KAAK,YAAY,QAASF,GAAM,CAC1B,CAAC,KAAK,aAAa,GAAKA,EAAE,uBAAuB,GACnDA,EAAE,KAAK,KAAM,KAAK,MAAM,EACxBC,EAAO,KAAKD,CAAC,GAEbE,EAAS,KAAKF,CAAC,CAEnB,CAAC,EAED,KAAK,yBAAyB,EAE9B,KAAK,MAAM,KAAK,GAAGC,CAAM,EACzB,KAAK,YAAcC,EACnB,QAAWX,KAAU,KAAK,SAAS,OAAO,EAExC,KAAK,UAAUA,EAAO,SAAS,CAAC,EAElC,OAAI,KAAK,MAAM,EAAI,KAAO,GACxB,KAAK,UAAU,CACb,QACA,KAAM,KAAK,MAAM,EACjB,KAAM,KAAK,KAAK,CAClB,CAAC,EAEH,KAAK,SACE,KAAK,OACd,CAEQ,MAAe,CACrB,IAAIY,EAAO,EACX,YAAK,SAAS,QAAS5B,GAAM,CAC3B4B,GAAQ5B,EAAE,KAAK,CACjB,CAAC,EACM4B,CACT,CAEA,cAA6B,CAC3B,OAAO,KAAK,aACd,CAEA,0BAAiC,CAC/B,IAAMC,EAA2B,CAAC,EAClC,QAAWC,KAAQ,KAAK,MAClB,KAAK,aAAa,EAChBA,EAAK,uBAAuB,EAC1BA,EAAK,SAAS,GAChBD,EAAY,KAAKC,CAAI,EAGvBD,EAAY,KAAKC,CAAI,EAGnBA,EAAK,SAAS,GAChBD,EAAY,KAAKC,CAAI,EAI3B,KAAK,MAAQD,CACf,CAEA,SAAoB,CAClB,OAAO,MAAM,KAAK,KAAK,SAAS,OAAO,CAAC,EAAE,OAAQ7B,GAAMA,EAAE,QAAQ,CAAC,CACrE,CAEA,YAAuB,CACrB,OAAO,MAAM,KAAK,KAAK,SAAS,OAAO,CAAC,CAC1C,CAEA,YAA0B,CACxB,MAAO,CAAC,GAAG,KAAK,MAAO,GAAG,KAAK,WAAW,CAC5C,CAEA,gBAAgB8B,EAAmB,CACjC,KAAK,YAAY,KAAK,GAAGA,CAAI,CAC/B,CAEA,gBAAgBA,EAAiB,CAC/B,KAAK,MAAQ,KAAK,MAAM,OAAQC,GAAcA,IAAcD,CAAI,EAChE,KAAK,YAAc,KAAK,YAAY,OACjCC,GAAcA,IAAcD,CAC/B,CACF,CAEA,WAAWtB,EAAsB,CAC/B,OAAO,KAAK,OAAOA,CAAE,CACvB,CAEA,UAAUH,EAAwBC,EAAoB,KAAc,CAClE,IAAMU,EAAS,IAAIgB,GACjB,KACA,KAAK,aACL3B,EACA,KAAK,OAAO,EAAE,cAAcA,CAAU,EACtCC,GAAQ,KAAK,gBAAgBD,CAAU,CACzC,EACA,YAAK,kBAAkB,KAAKW,CAAM,EAClC,KAAK,eACL,KAAK,SAAS,IAAIX,EAAW,GAAIW,CAAM,EAChCA,CACT,CAEQ,gBAAgBA,EAAiC,CACvD,GAAI,KAAK,QAAQ,WAAW,EAAE,WAAa,OACzC,OAAO,KAET,GAAIA,EAAO,aAAe,MACxB,OAAO,KAAK,QAEd,IAAMiB,EAAOC,EAAWlB,EAAO,EAAE,EACjC,OAAO,KAAK,YAAYiB,EAAO,KAAK,YAAY,MAAM,CACxD,CAEA,OAAOzB,EAAsB,CAC3B,IAAMQ,EAAS,KAAK,SAAS,IAAIR,CAAE,EACnC,GAAIQ,IAAW,OACb,MAAM,IAAI,MAAM,kBAAkBR,CAAE,YAAY,EAElD,OAAOQ,CACT,CAEA,iBAAiBR,EAA6B,CAC5C,OAAW,CAAC,CAAEQ,CAAM,IAAK,KAAK,SAC5B,GAAIA,EAAO,SAAS,IAAMR,EACxB,OAAOQ,EAGX,OAAO,IACT,CAEA,QAAQmB,EAAqB,CAC3B,OACEA,EAAK,GAAK,GACVA,EAAK,EAAI,KAAK,QACdA,EAAK,GAAK,GACVA,EAAK,EAAI,KAAK,OAElB,CAEA,kBAAkBxB,EAA0B,CAC1C,IAAMyB,EAAI,KAAK,EAAEzB,CAAI,EACf0B,EAAI,KAAK,EAAE1B,CAAI,EACf2B,EAAgB,CAAC,EACvB,QAASC,EAAK,GAAIA,GAAM,EAAGA,IACzB,QAASC,EAAK,GAAIA,GAAM,EAAGA,IAAM,CAC/B,GAAID,IAAO,GAAKC,IAAO,EAAG,SAC1B,IAAMC,EAAOL,EAAIG,EACXG,EAAOL,EAAIG,EAEfC,GAAQ,GACRA,EAAO,KAAK,QACZC,GAAQ,GACRA,EAAO,KAAK,SAEZJ,EAAG,KAAK,KAAK,KAAK,IAAIG,EAAMC,CAAI,CAAC,CAErC,CAEF,OAAOJ,CACT,CAGA,wBACE3B,EACAgC,EACM,CACN,IAAMP,EAAI,KAAK,EAAEzB,CAAI,EACf0B,EAAI,KAAK,EAAE1B,CAAI,EACrB,QAAS4B,EAAK,GAAIA,GAAM,EAAGA,IACzB,QAASC,EAAK,GAAIA,GAAM,EAAGA,IAAM,CAC/B,GAAID,IAAO,GAAKC,IAAO,EAAG,SAC1B,IAAMC,EAAOL,EAAIG,EACXG,EAAOL,EAAIG,EAEfC,GAAQ,GACRA,EAAO,KAAK,QACZC,GAAQ,GACRA,EAAO,KAAK,SAEZC,EAAS,KAAK,KAAK,IAAIF,EAAMC,CAAI,CAAC,CAEtC,CAEJ,CAEA,QAAQE,EAAmBjC,EAAqB,CAC9C,GAAI,CAAC,KAAK,OAAOA,CAAI,EACnB,MAAM,MAAM,sBAAsB,EAEpC,IAAMkC,EAAgB,KAAK,MAAMlC,CAAI,EACjCkC,EAAc,SAAS,IACzBA,EAAc,gBAAkB,KAAK,OACrCA,EAAc,OAAO,OAAOlC,CAAI,EAChCkC,EAAc,aAAa,OAAOlC,CAAI,GAExC,KAAK,KAAK,WAAWA,EAAMiC,EAAM,QAAQ,CAAC,EAC1CA,EAAM,OAAO,IAAIjC,CAAI,EACrBiC,EAAM,gBAAkB,KAAK,OAC7B,KAAK,cAAcjC,CAAI,EACvB,KAAK,KAAK,WAAWA,EAAM,EAAK,EAChC,KAAK,UAAU,CACb,OACA,OAAQ,KAAK,aAAaA,CAAI,CAChC,CAAC,CACH,CAEA,WAAWA,EAAe,CACxB,GAAI,CAAC,KAAK,SAASA,CAAI,EACrB,MAAM,IAAI,MAAM,8CAA8C,EAEhE,GAAI,KAAK,QAAQA,CAAI,EACnB,MAAM,IAAI,MAAM,yBAAyB,EAG3C,IAAMkC,EAAgB,KAAK,MAAMlC,CAAI,EACrCkC,EAAc,gBAAkB,KAAK,OACrCA,EAAc,OAAO,OAAOlC,CAAI,EAChCkC,EAAc,aAAa,OAAOlC,CAAI,EAEtC,KAAK,KAAK,WAAWA,EAAM,CAAC,EAC5B,KAAK,cAAcA,CAAI,EACvB,KAAK,UAAU,CACb,OACA,OAAQ,KAAK,aAAaA,CAAI,CAChC,CAAC,CACH,CAEQ,cAAcA,EAAe,CACnC,IAAMmC,EAAmB,CAAC,EAC1BA,EAAM,KAAKnC,CAAI,EACf,KAAK,UAAUA,CAAI,EAAE,QAASoC,GAAMD,EAAM,KAAKC,CAAC,CAAC,EAEjD,QAAWA,KAAKD,EACT,KAAK,SAASC,CAAC,IAGhB,KAAK,aAAaA,CAAC,EACpB,KAAK,MAAMA,CAAC,EAAiB,aAAa,IAAIA,CAAC,EAE/C,KAAK,MAAMA,CAAC,EAAiB,aAAa,OAAOA,CAAC,EAGzD,CAEQ,aAAapC,EAAwB,CAC3C,GAAI,CAAC,KAAK,SAASA,CAAI,EACrB,MAAO,GAET,QAAWqC,KAAY,KAAK,UAAUrC,CAAI,EAExC,GADqB,KAAK,MAAMA,CAAI,IAAM,KAAK,MAAMqC,CAAQ,EAE3D,MAAO,GAGX,MAAO,EACT,CAEA,OAAOC,EAAkBC,EAAgB,CACvC,KAAK,UAAU,CACb,QACA,SAAUD,EAAS,QAAQ,EAC3B,SAAUC,EAAO,QAAQ,CAC3B,CAAC,CACH,CAEO,cAAcC,EAAiB5B,EAAoB,CACxD,IAAI6B,EAMJ,GALI7B,EAAS,UAAU,IAAM4B,EAC3BC,EAAQ7B,EAAS,UAAU,EAE3B6B,EAAQ7B,EAAS,UAAU,EAEzB,CAAC4B,EAAQ,aAAaC,CAAK,EAC7B,MAAM,IAAI,MACR,GAAGD,CAAO,oBAAoBC,CAAK,yBACrC,EAEE,CAACA,EAAM,UAAU,GAAK,CAACA,EAAM,eAAe,GAC9CD,EAAQ,YAAY,EAGtB,IAAME,EAAa,IAAI,IAAIF,EAAQ,UAAU,CAAC,EACxCG,EAAYF,EAAM,UAAU,EAAE,OAAQG,GAAMF,EAAW,IAAIE,CAAC,CAAC,EACnE,GAAID,EAAU,SAAW,EACvB,MAAM,IAAI,MACR,wCAAwCA,EAAU,MAAM,EAC1D,EAEF,KAAK,WAAa,KAAK,WAAW,OAAQC,GAAMA,IAAMD,EAAU,CAAC,CAAC,EAClE,KAAK,UAAU,CACb,OACA,UAAWH,EAAQ,QAAQ,EAC3B,WAAYC,EAAM,QAAQ,CAC5B,CAAC,CACH,CAEO,eAAe7B,EAAoB,CACxC,IAAMiC,EAAQ,IAAI,IAAIjC,EAAS,UAAU,EAAE,UAAU,CAAC,EAChD+B,EAAY/B,EACf,UAAU,EACV,UAAU,EACV,OAAQgC,GAAMC,EAAM,IAAID,CAAC,CAAC,EAC7B,GAAID,EAAU,SAAW,EACvB,MAAM,IAAI,MACR,gEAAgEA,EAAU,MAAM,EAClF,EAEF,KAAK,WAAa,KAAK,WAAW,OAAQC,GAAMA,IAAMD,EAAU,CAAC,CAAC,EAClE,KAAK,UAAU,CACb,OACA,UAAW/B,EAAS,UAAU,EAAE,QAAQ,EACxC,UAAWA,EAAS,UAAU,EAAE,QAAQ,CAC1C,CAAC,CACH,CAEA,gBAAgBkC,EAAyB,CACvC,KAAK,UAAU,CACb,QACA,MAAOA,CACT,CAAC,CACH,CAEA,UAAUC,EAAuBC,EAAwC,CACvE,KAAK,UAAU,CACb,QACA,OAAQ,KAAK,WAAWD,CAAM,EAC9B,gBAAAC,CACF,CAAC,CACH,CAEQ,WAAWD,EAA6C,CAC9D,GAAI,OAAOA,GAAW,SACpB,MAAO,CACL,OACAA,EACA,GAAG,KAAK,QAAQ,EACb,OAAQ1D,GAAMA,EAAE,KAAK,IAAM0D,GAAU1D,EAAE,SAAS,IAAM,IAAI,EAC1D,IAAKA,GAAMA,EAAE,SAAS,CAAE,CAC7B,EACK,CACL,IAAM4D,EAAWF,EAAO,SAAS,EACjC,OAAIE,IAAa,KAAM,OAChB,CACL,SACAA,CAEF,CACF,CACF,CAEA,OAAgB,CACd,OAAI,KAAK,QAAQ,WAAW,EAAE,WAAa,OAClC,CAAC,EAEH,CAAC,KAAK,QAAS,GAAG,KAAK,WAAW,CAC3C,CAEA,eACEC,EACA/C,EACAgD,EACAC,EACAC,EACM,CACN,IAAIxD,EAAoB,KACpBsD,IAAa,OACftD,EAAK,KAAK,OAAOsD,CAAQ,EAAE,QAAQ,GAErC,KAAK,UAAU,CACb,OACA,YAAahD,EACb,QAAS+C,EACT,SAAUrD,EACV,WAAYuD,EACZ,OAAQC,CACV,CAAC,CACH,CAEA,YACEH,EACAI,EACAf,EACAY,EACAI,EACAhD,EACM,CACN,IAAIV,EAAoB,KACpBsD,IAAa,OACftD,EAAK,KAAK,OAAOsD,CAAQ,EAAE,QAAQ,GAErC,KAAK,UAAU,CACb,OACA,IAAKD,EACL,SAAUI,EACV,OAAQf,EACR,SAAU1C,EACV,OAAA0D,EACA,UAAWhD,CACb,CAAC,CACH,CAEA,oBACEiD,EACAN,EACA/C,EACAgD,EACM,CACN,IAAMtD,EAAK,KAAK,OAAOsD,CAAQ,EAAE,QAAQ,EAEzC,KAAK,UAAU,CACb,QACA,OAAQK,EACR,QAASN,EACT,YAAa/C,EACb,SAAUN,CACZ,CAAC,CACH,CAEA,QAAQ4D,EAAS,CACf,KAAK,SAAS,QAAQA,CAAC,CACzB,CACA,WAAWA,EAAS,CAClB,KAAK,SAAS,WAAWA,CAAC,EACtBA,EAAE,gBAAgB,GACpB,KAAK,aAAa,cAAcA,CAAC,CAErC,CACA,eAAeA,EAAS,CACtB,KAAK,SAAS,eAAeA,CAAC,CAChC,CAEA,cACEzD,EACA0D,EACAvD,EACAwD,EACAC,EACA,CACA,OAAO,KAAK,SAAS,cACnB5D,EACA0D,EACAvD,EACAwD,EACAC,CACF,CACF,CAEA,YACE5D,EACA0D,EACAxD,EACA2D,EACAD,EAC4C,CAC5C,OAAO,KAAK,SAAS,YACnB5D,EACA0D,EACAxD,EACA2D,EACAD,CACF,CAIF,CAEA,IAAInC,EAAWC,EAAoB,CACjC,OAAO,KAAK,KAAK,IAAID,EAAGC,CAAC,CAC3B,CACA,WAAW9B,EAAuB,CAChC,OAAO,KAAK,KAAK,WAAWA,CAAG,CACjC,CACA,EAAEA,EAAsB,CACtB,OAAO,KAAK,KAAK,EAAEA,CAAG,CACxB,CACA,EAAEA,EAAsB,CACtB,OAAO,KAAK,KAAK,EAAEA,CAAG,CACxB,CACA,KAAKA,EAAoB,CACvB,OAAO,KAAK,KAAK,KAAKA,CAAG,CAC3B,CACA,OAAgB,CACd,OAAO,KAAK,KAAK,MAAM,CACzB,CACA,QAAiB,CACf,OAAO,KAAK,KAAK,OAAO,CAC1B,CACA,cAAuB,CACrB,OAAO,KAAK,KAAK,aAAa,CAChC,CACA,aAAa6B,EAAWC,EAAoB,CAC1C,OAAO,KAAK,KAAK,aAAaD,EAAGC,CAAC,CACpC,CACA,OAAO9B,EAAuB,CAC5B,OAAO,KAAK,KAAK,OAAOA,CAAG,CAC7B,CACA,aAAaA,EAAuB,CAClC,OAAO,KAAK,KAAK,aAAaA,CAAG,CACnC,CACA,QAAQA,EAAuB,CAC7B,OAAO,KAAK,KAAK,QAAQA,CAAG,CAC9B,CACA,YAAYA,EAAuB,CACjC,OAAO,KAAK,KAAK,YAAYA,CAAG,CAClC,CACA,UAAUA,EAAsB,CAC9B,OAAO,KAAK,KAAK,UAAUA,CAAG,CAChC,CACA,QAAQA,EAAsB,CAC5B,OAAO,KAAK,KAAK,QAAQA,CAAG,CAC9B,CACA,SAASA,EAAuB,CAC9B,OAAO,KAAK,KAAK,SAASA,CAAG,CAC/B,CACA,WAAWA,EAAc+D,EAAwB,CAC/C,OAAO,KAAK,KAAK,WAAW/D,EAAK+D,CAAQ,CAC3C,CACA,WAAW/D,EAAuB,CAChC,OAAO,KAAK,KAAK,WAAWA,CAAG,CACjC,CACA,SAASA,EAAuB,CAC9B,OAAO,KAAK,KAAK,SAASA,CAAG,CAC/B,CACA,UAAUA,EAAyB,CACjC,OAAO,KAAK,KAAK,UAAUA,CAAG,CAChC,CAEA,gBAAgBI,EAAegC,EAA6C,CAC1E,IAAMP,EAAI,KAAK,EAAEzB,CAAI,EACf0B,EAAI,KAAK,EAAE1B,CAAI,EACjByB,EAAI,GAAGO,EAAS,KAAK,KAAK,IAAIP,EAAI,EAAGC,CAAC,CAAC,EACvCD,EAAI,EAAI,KAAK,QAAQO,EAAS,KAAK,KAAK,IAAIP,EAAI,EAAGC,CAAC,CAAC,EACrDA,EAAI,GAAGM,EAAS,KAAK,KAAK,IAAIP,EAAGC,EAAI,CAAC,CAAC,EACvCA,EAAI,EAAI,KAAK,SAASM,EAAS,KAAK,KAAK,IAAIP,EAAGC,EAAI,CAAC,CAAC,CAC5D,CACA,QAAQ9B,EAAuB,CAC7B,OAAO,KAAK,KAAK,QAAQA,CAAG,CAC9B,CACA,OAAOA,EAAuB,CAC5B,OAAO,KAAK,KAAK,OAAOA,CAAG,CAC7B,CACA,QAAQA,EAAuB,CAC7B,OAAO,KAAK,KAAK,QAAQA,CAAG,CAC9B,CACA,KAAKA,EAAsB,CACzB,OAAO,KAAK,KAAK,KAAKA,CAAG,CAC3B,CACA,YAAYA,EAA2B,CACrC,OAAO,KAAK,KAAK,YAAYA,CAAG,CAClC,CACA,YAAYkE,EAAmC,CAC7C,OAAO,KAAK,KAAK,YAAYA,CAAE,CACjC,CACA,cAAcC,EAAaC,EAAqB,CAC9C,OAAO,KAAK,KAAK,cAAcD,EAAIC,CAAE,CACvC,CACA,qBAAqBD,EAAaC,EAAqB,CACrD,OAAO,KAAK,KAAK,qBAAqBD,EAAIC,CAAE,CAC9C,CACA,IACEhE,EACAiE,EACc,CACd,OAAO,KAAK,KAAK,IAAIjE,EAAMiE,CAAM,CACnC,CACA,aAAajE,EAAuB,CAClC,OAAO,KAAK,KAAK,aAAaA,CAAI,CACpC,CACA,WAAWkE,EAAyB,CAClC,OAAO,KAAK,KAAK,WAAWA,CAAE,CAChC,CACA,qBAA8B,CAC5B,OAAO,KAAK,KAAK,oBAAoB,CACvC,CACA,OAAe,CACb,OAAO,KAAK,MACd,CACA,aAA2B,CACzB,OAAO,KAAK,YACd,CACA,cAAcC,EAAmBC,EAAmB,CAClD,GAAIA,EAAU,eAAe,GAAKD,EAAU,aAAaC,CAAS,EAAG,CACnE,IAAMC,EAAQD,EACX,MAAM,EACN,OACEX,GACCA,EAAE,KAAK,IAAM,WACbA,EAAE,KAAK,IAAM,WACjB,EAEF,QAAWa,KAAQD,EACjBF,EAAU,YAAYG,CAAI,CAE9B,CAEA,IAAMC,EAAOH,EAAU,KAAK,EAC5B,KAAK,eACH,aAAaA,EAAU,YAAY,CAAC,aAAaI,GAC/CD,CACF,CAAC,UAEDJ,EAAU,GAAG,EACbI,CACF,EACAJ,EAAU,QAAQI,CAAI,EACtBH,EAAU,WAAWG,CAAI,EACzB,KAAK,UAAU,CACb,QACA,YAAaJ,EAAU,GAAG,EAC1B,YAAaC,EAAU,GAAG,EAC1B,KAAAG,CACF,CAAC,EAGD,KAAK,MAAM,EAAE,QAAQJ,EAAWC,EAAWG,CAAI,CACjD,CACF,EAGM9F,GAAuB,IAAmB,CAC9C,IAAMgG,EAAM,CAAC,EACb,cAAO,OAAOC,EAAc,EACzB,OAAQC,GAAQ,CAAC,MAAM,OAAOA,CAAG,CAAC,CAAC,EACnC,QAASA,GAAQ,CAChBF,EAAIE,CAAqB,EAAI,CAAC,CAChC,CAAC,EACIF,CACT,EC/8BA,IAAMG,GAAa,IAAI,IAuBvB,eAAsBC,GACpBC,EACAC,EACAC,EACyB,CACzB,IAAMC,EAASL,GAAW,IAAIE,CAAG,EACjC,GAAIG,IAAW,OAAW,OAAOA,EACjC,IAAMC,EAAWF,EAAqB,WAAWF,CAAG,EAC9CK,EAAW,MAAMD,EAAS,SAAS,EAEnCE,EACJL,IAAY,SACR,MAAMM,GAAkBF,EAAS,IAAK,MAAMD,EAAS,OAAO,CAAC,EAC7D,MAAMG,GAAkBF,EAAS,MAAO,MAAMD,EAAS,SAAS,CAAC,EAEjEI,EACJP,IAAY,SACR,MAAMM,GACJN,IAAY,SAAqBI,EAAS,MAAQA,EAAS,OAC3D,MAAMD,EAAS,SAAS,CAC1B,EACA,MAAMG,GAAkBF,EAAS,OAAQ,MAAMD,EAAS,UAAU,CAAC,EAErEH,IAAY,WACdI,EAAS,QAAQ,QAASI,GAAW,CACnCA,EAAO,YAAc,CACnB,KAAK,MAAMA,EAAO,YAAY,CAAC,EAAI,CAAC,EACpC,KAAK,MAAMA,EAAO,YAAY,CAAC,EAAI,CAAC,CACtC,CACF,CAAC,EAGH,IAAMC,EAAS,CACb,QAASL,EAAS,QAClB,QAASC,EACT,YAAaE,CACf,EACA,OAAAV,GAAW,IAAIE,EAAKU,CAAM,EACnBA,CACT,CAEA,eAAsBH,GACpBI,EACAC,EACkB,CAClB,GAAIA,EAAK,SAAWD,EAAQ,MAAQA,EAAQ,OAC1C,MAAM,IAAI,MACR,6BAA6BC,EAAK,MAAM,kBAAkBD,EAAQ,KAAK,IAAIA,EAAQ,MAAM,uCAC3F,EAGF,OAAO,IAAIE,GACTF,EAAQ,MACRA,EAAQ,OACRC,EACAD,EAAQ,cACV,CACF,CC1FA,IAAAG,EAAgB,WAGT,IAAMC,GAAU,EAAAC,QAAI,QACdC,GAAc,EAAAD,QAAI,YAClBE,GAAgB,EAAAF,QAAI,cACpBG,GAAgB,EAAAH,QAAI,cACpBI,GAAa,EAAAJ,QAAI,WACjBK,GAAa,EAAAL,QAAI,WACjBM,GAAwB,EAAAN,QAAI,sBAC5BO,GAAyB,EAAAP,QAAI,uBAC7BQ,GAAgC,EAAAR,QAAI,8BACpCS,GAA8B,EAAAT,QAAI,4BAClCU,GAAiB,EAAAV,QAAI,eACrBW,GAAiD,EAAAX,QAAI,+CACrDY,GAAiC,EAAAZ,QAAI,+BACrCa,GAAiD,EAAAb,QAAI,+CACrDc,GAA0B,EAAAd,QAAI,wBAC9Be,GAA4B,EAAAf,QAAI,0BAChCgB,GAAwB,EAAAhB,QAAI,sBAC5BiB,GAAwB,EAAAjB,QAAI,sBAC5BkB,GAA0B,EAAAlB,QAAI,wBAC9BmB,GAAkB,EAAAnB,QAAI,gBACtBoB,GAAU,EAAApB,QAAI,QACdqB,GAAkC,EAAArB,QAAI,gCACtCsB,GAA6B,EAAAtB,QAAI,2BACjCuB,GAAgC,EAAAvB,QAAI,8BACpCwB,GAA8B,EAAAxB,QAAI,4BAClCyB,GAA+B,EAAAzB,QAAI,6BACnC0B,GAA8B,EAAA1B,QAAI,4BC7B/C,IAAA2B,GAAA,CACE,KAAQ,CACN,CACE,IAAO,SACP,eAAkB,EACpB,EACA,CACE,IAAO,oBACP,eAAkB,EACpB,EACA,CACE,IAAO,OACP,eAAkB,EACpB,EACA,CACE,IAAO,YACP,eAAkB,EACpB,EACA,CACE,IAAO,eACP,eAAkB,EACpB,EACA,CACE,IAAO,WACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,EACA,CACE,IAAO,iBACP,eAAkB,EACpB,CACF,EACA,OAAU,CACR,CACE,IAAO,SACP,eAAkB,EACpB,EACA,CACE,IAAO,OACP,eAAkB,EACpB,EACA,CACE,IAAO,QACP,eAAkB,EACpB,EACA,CACE,IAAO,SACP,eAAkB,EACpB,EACA,CACE,IAAO,iBACP,eAAkB,EACpB,CACF,EACA,OAAU,CACR,CACE,IAAO,SACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,EACA,CACE,IAAO,OACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,CACF,EACA,MAAS,CACP,CACE,IAAO,QACP,eAAkB,EACpB,EACA,CACE,IAAO,WACP,eAAkB,EACpB,EACA,CACE,IAAO,YACP,eAAkB,EACpB,EACA,CACE,IAAO,WACP,eAAkB,EACpB,EACA,CACE,IAAO,KACP,eAAkB,EACpB,EACA,CACE,IAAO,eACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,EACA,CACE,IAAO,WACP,eAAkB,EACpB,EACA,CACE,IAAO,MACP,eAAkB,EACpB,EACA,CACE,IAAO,SACP,eAAkB,EACpB,EACA,CACE,IAAO,OACP,eAAkB,EACpB,EACA,CACE,IAAO,WACP,eAAkB,EACpB,EACA,CACE,IAAO,eACP,eAAkB,EACpB,EACA,CACE,IAAO,gBACP,eAAkB,EACpB,EACA,CACE,IAAO,eACP,eAAkB,EACpB,EACA,CACE,IAAO,YACP,eAAkB,EACpB,CACF,EACA,KAAQ,CACN,CACE,IAAO,KACP,eAAkB,EACpB,EACA,CACE,IAAO,WACP,eAAkB,EACpB,EACA,CACE,IAAO,MACP,eAAkB,EACpB,EACA,CACE,IAAO,UACP,eAAkB,EACpB,EACA,CACE,IAAO,KACP,eAAkB,EACpB,EACA,CACE,IAAO,eACP,eAAkB,EACpB,EACA,CACE,IAAO,YACP,eAAkB,EACpB,CACF,EACA,SAAY,CACV,CACE,IAAO,SACP,eAAkB,EACpB,EACA,CACE,IAAO,OACP,eAAkB,EACpB,EACA,CACE,IAAO,YACP,eAAkB,EACpB,EACA,CACE,IAAO,kBACP,eAAkB,EACpB,EACA,CACE,IAAO,YACP,eAAkB,EACpB,EACA,CACE,IAAO,aACP,eAAkB,EACpB,EACA,CACE,IAAO,YACP,eAAkB,EACpB,EACA,CACE,IAAO,WACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,EACA,CACE,IAAO,kBACP,eAAkB,EACpB,EACA,CACE,IAAO,aACP,eAAkB,EACpB,EACA,CACE,IAAO,cACP,eAAkB,EACpB,EACA,CACE,IAAO,WACP,eAAkB,EACpB,EACA,CACE,IAAO,eACP,eAAkB,EACpB,CACF,CACF,ECjPA,IAAAC,GAAA,CACE,CACE,KAAQ,KACR,KAAQ,MACV,EACA,CACE,KAAQ,oBACR,UAAa,OACb,KAAQ,mBACV,EACA,CACE,KAAQ,oBACR,UAAa,OACb,KAAQ,mBACV,EACA,CACE,KAAQ,KACR,UAAa,OACb,KAAQ,sBACV,EACA,CACE,KAAQ,KACR,UAAa,OACb,KAAQ,aACV,EACA,CACE,KAAQ,gBACR,UAAa,SACb,KAAQ,eACV,EACA,CACE,KAAQ,KACR,UAAa,gBACb,KAAQ,qBACV,EACA,CACE,KAAQ,KACR,UAAa,gBACb,KAAQ,UACV,EACA,CACE,KAAQ,cACR,UAAa,SACb,KAAQ,WACV,EACA,CACE,KAAQ,KACR,UAAa,SACb,KAAQ,SACV,EACA,CACE,KAAQ,UACR,UAAa,gBACb,KAAQ,SACV,EACA,CACE,KAAQ,KACR,UAAa,SACb,KAAQ,eACV,EACA,CACE,KAAQ,SACR,UAAa,gBACb,KAAQ,QACV,EACA,CACE,KAAQ,KACR,UAAa,SACb,KAAQ,SACV,EACA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",
  "names": ["require_alea", "__commonJSMin", "exports", "module", "global", "define", "Alea", "seed", "me", "mash", "Mash", "t", "copy", "f", "impl", "opts", "xg", "state", "prng", "n", "data", "i", "h", "require_xor128", "__commonJSMin", "exports", "module", "global", "define", "XorGen", "seed", "me", "strseed", "t", "k", "copy", "f", "impl", "opts", "xg", "state", "prng", "top", "bot", "result", "require_xorwow", "__commonJSMin", "exports", "module", "global", "define", "XorGen", "seed", "me", "strseed", "t", "k", "copy", "f", "impl", "opts", "xg", "state", "prng", "top", "bot", "result", "require_xorshift7", "__commonJSMin", "exports", "module", "global", "define", "XorGen", "seed", "me", "X", "i", "t", "v", "w", "init", "j", "copy", "f", "impl", "opts", "xg", "state", "prng", "top", "bot", "result", "require_xor4096", "__commonJSMin", "exports", "module", "global", "define", "XorGen", "seed", "me", "w", "X", "i", "t", "v", "init", "j", "limit", "copy", "f", "impl", "opts", "xg", "state", "prng", "top", "bot", "result", "require_tychei", "__commonJSMin", "exports", "module", "global", "define", "XorGen", "seed", "me", "strseed", "b", "c", "d", "a", "k", "copy", "f", "t", "impl", "opts", "xg", "state", "prng", "top", "bot", "result", "require_seedrandom", "__commonJSMin", "exports", "module", "global", "pool", "math", "width", "chunks", "digits", "rngname", "startdenom", "significance", "overflow", "mask", "nodecrypto", "seedrandom", "seed", "options", "callback", "key", "shortseed", "mixkey", "flatten", "tostring", "autoseed", "arc4", "ARC4", "prng", "n", "d", "x", "is_math_call", "state", "copy", "t", "keylen", "me", "i", "j", "s", "count", "r", "f", "obj", "depth", "result", "typ", "prop", "stringseed", "smear", "out", "browser", "plugins", "a", "require_seedrandom", "__commonJSMin", "exports", "module", "alea", "xor128", "xorwow", "xorshift7", "xor4096", "tychei", "sr", "require_FastPriorityQueue", "__commonJSMin", "exports", "module", "defaultcomparator", "a", "b", "FastPriorityQueue", "comparator", "fpq", "myval", "i", "p", "ap", "arr", "force", "size", "hsize", "ai", "l", "r", "bestc", "index", "callback", "limit", "resultSize", "result", "tmpSize", "tmp", "item", "ans", "k", "newSize", "smallest", "require_Char", "__commonJSMin", "exports", "isHighSurrogate", "char", "isLowSurrogate", "convertSurrogatePairToCodePoint", "highSurrogate", "lowSurrogate", "isWordChar", "isDigit", "isAlphabetic", "isLowerCase", "isUpperCase", "invertCaseOfAlphabeticChar", "getAndAssertSingleCodePoint", "str", "require_BuiltinStrategies", "__commonJSMin", "exports", "Char_1", "keepStartCensorStrategy", "baseStrategy", "ctx", "keepEndCensorStrategy", "lastChar", "asteriskCensorStrategy", "fixedCharCensorStrategy", "grawlixCensorStrategy", "randomCharFromSetCensorStrategy", "fixedPhraseCensorStrategy", "phrase", "char", "charset", "chars", "lastIdx", "censored", "i", "idx", "require_Interval", "__commonJSMin", "exports", "compareIntervals", "lowerBound0", "upperBound0", "lowerBound1", "upperBound1", "require_MatchPayload", "__commonJSMin", "exports", "Interval_1", "compareMatchByPositionAndId", "a", "b", "result", "require_TextCensor", "__commonJSMin", "exports", "MatchPayload_1", "BuiltinStrategies_1", "TextCensor", "strategy", "input", "matches", "sorted", "censored", "lastIndex", "i", "match", "overlapsAtStart", "actualStartIndex", "overlapsAtEnd", "require_BlacklistedTerm", "__commonJSMin", "exports", "assignIncrementingIds", "patterns", "currentId", "pattern", "require_DataSet", "__commonJSMin", "exports", "BlacklistedTerm_1", "DataSet", "other", "container", "predicate", "containers", "fn", "PhraseBuilder", "payload", "offset", "p", "phraseId", "pattern", "term", "metadata", "require_Nodes", "__commonJSMin", "exports", "SyntaxKind", "require_Util", "__commonJSMin", "exports", "Nodes_1", "potentiallyMatchesEmptyString", "pattern", "node", "compilePatternToRegExp", "regExpStr", "getRegExpStringForNode", "regExpSpecialChars", "str", "char", "require_TransformerSet", "__commonJSMin", "exports", "TransformerSet", "transformers", "i", "transformer", "char", "transformed", "require_CharacterIterator", "__commonJSMin", "exports", "Char_1", "CharacterIterator", "input", "char", "next", "require_IntervalCollection", "__commonJSMin", "exports", "IntervalCollection", "lowerBound", "upperBound", "a", "b", "interval", "require_RegExpMatcher", "__commonJSMin", "exports", "Char_1", "Util_1", "TransformerSet_1", "CharacterIterator_1", "IntervalCollection_1", "MatchPayload_1", "RegExpMatcher", "blacklistedTerms", "whitelistedTerms", "blacklistMatcherTransformers", "whitelistMatcherTransformers", "input", "sorted", "whitelistedIntervals", "transformedToOrigIndex", "transformed", "matches", "blacklistedTerm", "match", "origStartIndex", "origEndIndex", "whitelistedTerm", "lastEnd", "startIndex", "transformers", "iter", "char", "transformedChar", "terms", "compiled", "seenIds", "term", "whitelist", "require_Matcher", "__commonJSMin", "exports", "require_ParserError", "__commonJSMin", "exports", "ParserError", "message", "line", "column", "require_Parser", "__commonJSMin", "exports", "Char_1", "CharacterIterator_1", "Nodes_1", "ParserError_1", "supportsEscaping", "supportsEscapingList", "char", "eof", "Parser", "input", "nodes", "firstNode", "requireWordBoundaryAtStart", "requireWordBoundaryAtEnd", "pos", "node", "preOpenBracketPos", "postOpenBracketPos", "childNode", "chars", "next", "escaped", "repr", "message", "line", "column", "charset", "iter", "require_Pattern", "__commonJSMin", "exports", "Parser_1", "parser", "pattern", "strings", "expressions", "result", "expression", "parseRawPattern", "require_Transformers", "__commonJSMin", "exports", "createSimpleTransformer", "transformer", "createStatefulTransformer", "factory", "require_transformer", "__commonJSMin", "exports", "CollapseDuplicatesTransformer", "defaultThreshold", "customThresholds", "char", "threshold", "require_collapse_duplicates", "__commonJSMin", "exports", "Char_1", "Transformers_1", "transformer_1", "collapseDuplicatesTransformer", "defaultThreshold", "customThresholds", "map", "createCharacterToThresholdMap", "str", "threshold", "char", "require_remap_characters", "__commonJSMin", "exports", "Char_1", "CharacterIterator_1", "Transformers_1", "remapCharactersTransformer", "mapping", "map", "createOneToOneMap", "c", "iterable", "original", "equivalents", "originalChar", "iter", "equivalent", "require_confusables", "__commonJSMin", "exports", "require_resolve_confusables", "__commonJSMin", "exports", "remap_characters_1", "confusables_1", "resolveConfusablesTransformer", "require_dictionary", "__commonJSMin", "exports", "require_resolve_leetspeak", "__commonJSMin", "exports", "remap_characters_1", "dictionary_1", "resolveLeetSpeakTransformer", "require_to_ascii_lowercase", "__commonJSMin", "exports", "Char_1", "Transformers_1", "toAsciiLowerCaseTransformer", "c", "require_english", "__commonJSMin", "exports", "DataSet_1", "Pattern_1", "collapse_duplicates_1", "resolve_confusables_1", "resolve_leetspeak_1", "to_ascii_lowercase_1", "phrase", "require_skip_non_alphabetic", "__commonJSMin", "exports", "Char_1", "Transformers_1", "skipNonAlphabeticTransformer", "c", "require_dist", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "entries", "setPrototypeOf", "isFrozen", "getPrototypeOf", "getOwnPropertyDescriptor", "Object", "freeze", "seal", "create", "apply", "construct", "Reflect", "x", "fun", "thisValue", "args", "Func", "arrayForEach", "unapply", "Array", "prototype", "forEach", "arrayLastIndexOf", "lastIndexOf", "arrayPop", "pop", "arrayPush", "push", "arraySplice", "splice", "stringToLowerCase", "String", "toLowerCase", "stringToString", "toString", "stringMatch", "match", "stringReplace", "replace", "stringIndexOf", "indexOf", "stringTrim", "trim", "objectHasOwnProperty", "hasOwnProperty", "regExpTest", "RegExp", "test", "typeErrorCreate", "unconstruct", "TypeError", "func", "thisArg", "lastIndex", "_len", "arguments", "length", "_key", "_len2", "_key2", "addToSet", "set", "array", "transformCaseFunc", "l", "element", "lcElement", "cleanArray", "index", "clone", "object", "newObject", "property", "value", "isArray", "constructor", "lookupGetter", "prop", "desc", "get", "fallbackValue", "html", "svg", "svgFilters", "svgDisallowed", "mathMl", "mathMlDisallowed", "text", "xml", "MUSTACHE_EXPR", "ERB_EXPR", "TMPLIT_EXPR", "DATA_ATTR", "ARIA_ATTR", "IS_ALLOWED_URI", "IS_SCRIPT_OR_DATA", "ATTR_WHITESPACE", "DOCTYPE_NAME", "CUSTOM_ELEMENT", "NODE_TYPE", "attribute", "cdataSection", "entityReference", "entityNode", "progressingInstruction", "comment", "document", "documentType", "documentFragment", "notation", "getGlobal", "window", "_createTrustedTypesPolicy", "trustedTypes", "purifyHostElement", "createPolicy", "suffix", "ATTR_NAME", "hasAttribute", "getAttribute", "policyName", "createHTML", "createScriptURL", "scriptUrl", "console", "warn", "_createHooksMap", "afterSanitizeAttributes", "afterSanitizeElements", "afterSanitizeShadowDOM", "beforeSanitizeAttributes", "beforeSanitizeElements", "beforeSanitizeShadowDOM", "uponSanitizeAttribute", "uponSanitizeElement", "uponSanitizeShadowNode", "createDOMPurify", "undefined", "DOMPurify", "root", "version", "VERSION", "removed", "nodeType", "Element", "isSupported", "originalDocument", "currentScript", "DocumentFragment", "HTMLTemplateElement", "Node", "NodeFilter", "NamedNodeMap", "MozNamedAttrMap", "HTMLFormElement", "DOMParser", "ElementPrototype", "cloneNode", "remove", "getNextSibling", "getChildNodes", "getParentNode", "template", "createElement", "content", "ownerDocument", "trustedTypesPolicy", "emptyHTML", "implementation", "createNodeIterator", "createDocumentFragment", "getElementsByTagName", "importNode", "hooks", "createHTMLDocument", "EXPRESSIONS", "ALLOWED_TAGS", "DEFAULT_ALLOWED_TAGS", "TAGS", "ALLOWED_ATTR", "DEFAULT_ALLOWED_ATTR", "ATTRS", "CUSTOM_ELEMENT_HANDLING", "tagNameCheck", "writable", "configurable", "enumerable", "attributeNameCheck", "allowCustomizedBuiltInElements", "FORBID_TAGS", "FORBID_ATTR", "ALLOW_ARIA_ATTR", "ALLOW_DATA_ATTR", "ALLOW_UNKNOWN_PROTOCOLS", "ALLOW_SELF_CLOSE_IN_ATTR", "SAFE_FOR_TEMPLATES", "SAFE_FOR_XML", "WHOLE_DOCUMENT", "SET_CONFIG", "FORCE_BODY", "RETURN_DOM", "RETURN_DOM_FRAGMENT", "RETURN_TRUSTED_TYPE", "SANITIZE_DOM", "SANITIZE_NAMED_PROPS", "SANITIZE_NAMED_PROPS_PREFIX", "KEEP_CONTENT", "IN_PLACE", "USE_PROFILES", "FORBID_CONTENTS", "DEFAULT_FORBID_CONTENTS", "DATA_URI_TAGS", "DEFAULT_DATA_URI_TAGS", "URI_SAFE_ATTRIBUTES", "DEFAULT_URI_SAFE_ATTRIBUTES", "MATHML_NAMESPACE", "SVG_NAMESPACE", "HTML_NAMESPACE", "NAMESPACE", "IS_EMPTY_INPUT", "ALLOWED_NAMESPACES", "DEFAULT_ALLOWED_NAMESPACES", "MATHML_TEXT_INTEGRATION_POINTS", "HTML_INTEGRATION_POINTS", "COMMON_SVG_AND_HTML_ELEMENTS", "PARSER_MEDIA_TYPE", "SUPPORTED_PARSER_MEDIA_TYPES", "DEFAULT_PARSER_MEDIA_TYPE", "CONFIG", "formElement", "isRegexOrFunction", "testValue", "Function", "_parseConfig", "cfg", "ADD_URI_SAFE_ATTR", "ADD_DATA_URI_TAGS", "ALLOWED_URI_REGEXP", "ADD_TAGS", "ADD_ATTR", "table", "tbody", "TRUSTED_TYPES_POLICY", "ALL_SVG_TAGS", "ALL_MATHML_TAGS", "_checkValidNamespace", "parent", "tagName", "namespaceURI", "parentTagName", "Boolean", "_forceRemove", "node", "removeChild", "_removeAttribute", "name", "getAttributeNode", "from", "removeAttribute", "setAttribute", "_initDocument", "dirty", "doc", "leadingWhitespace", "matches", "dirtyPayload", "parseFromString", "documentElement", "createDocument", "innerHTML", "body", "insertBefore", "createTextNode", "childNodes", "call", "_createNodeIterator", "SHOW_ELEMENT", "SHOW_COMMENT", "SHOW_TEXT", "SHOW_PROCESSING_INSTRUCTION", "SHOW_CDATA_SECTION", "_isClobbered", "nodeName", "textContent", "attributes", "hasChildNodes", "_isNode", "_executeHooks", "currentNode", "data", "hook", "_sanitizeElements", "allowedTags", "firstElementChild", "_isBasicCustomElement", "parentNode", "childCount", "i", "childClone", "__removalCount", "expr", "_isValidAttribute", "lcTag", "lcName", "_sanitizeAttributes", "hookEvent", "attrName", "attrValue", "keepAttr", "allowedAttributes", "forceKeepAttr", "attr", "initValue", "getAttributeType", "setAttributeNS", "_sanitizeShadowDOM", "fragment", "shadowNode", "shadowIterator", "nextNode", "sanitize", "importedNode", "returnNode", "appendChild", "firstChild", "nodeIterator", "shadowroot", "shadowrootmode", "serializedHTML", "outerHTML", "doctype", "setConfig", "clearConfig", "isValidAttribute", "tag", "addHook", "entryPoint", "hookFunction", "removeHook", "removeHooks", "removeAllHooks", "purify", "COMMUNITY_FULL_ELF_NAMES", "SPECIAL_FULL_ELF_NAMES", "COMMUNITY_PREFIXES", "within", "value", "min", "max", "distSortUnit", "gm", "target", "targetRef", "a", "b", "simpleHash", "str", "hash", "i", "char", "calculateBoundingBox", "borderTiles", "minX", "minY", "maxX", "maxY", "tile", "cell", "Cell", "boundingBoxTiles", "center", "radius", "tiles", "centerX", "centerY", "x", "y", "getMode", "counts", "mode", "maxCount", "item", "count", "calculateBoundingBoxCenter", "min", "max", "boundingBoxCenter", "box", "inscribed", "outer", "inner", "assertNever", "x", "toInt", "num", "maxInt", "a", "b", "minInt", "withinInt", "min", "max", "atLeastMin", "emojiTable", "flattenedEmojiTable", "sigmoid", "value", "decayRate", "midpoint", "getClanTag", "name", "clanTag", "clanMatch", "getClanTagOriginalCase", "AllPlayers", "Difficulty", "Duos", "Trios", "Quads", "HumansVsNations", "ColoredTeams", "GameMapType", "GameType", "GameMode", "GameMapSize", "UnitType", "_structureTypes", "isStructureType", "type", "Nation", "spawnCell", "playerInfo", "Cell", "x", "y", "PlayerInfo", "name", "playerType", "clientID", "id", "nationStrength", "getClanTag", "isUnit", "unit", "placeName", "game", "player", "boundingBox", "calculateBoundingBox", "scalingFactor", "width", "height", "size", "grid", "createGrid", "largestRectangle", "findLargestInscribedRectangle", "center", "Cell", "fontSize", "calculateFontSize", "scaledBoundingBox", "x", "y", "cell", "tile", "rows", "cols", "heights", "largestRect", "row", "col", "rectForRow", "largestRectangleInHistogram", "widths", "stack", "maxArea", "i", "h", "rectangle", "name", "widthConstrained", "heightConstrained", "external_exports", "__export", "$brand", "$input", "$output", "NEVER", "TimePrecision", "ZodAny", "ZodArray", "ZodBase64", "ZodBase64URL", "ZodBigInt", "ZodBigIntFormat", "ZodBoolean", "ZodCIDRv4", "ZodCIDRv6", "ZodCUID", "ZodCUID2", "ZodCatch", "ZodCustom", "ZodCustomStringFormat", "ZodDate", "ZodDefault", "ZodDiscriminatedUnion", "ZodE164", "ZodEmail", "ZodEmoji", "ZodEnum", "ZodError", "ZodFile", "ZodFirstPartyTypeKind", "ZodGUID", "ZodIPv4", "ZodIPv6", "ZodISODate", "ZodISODateTime", "ZodISODuration", "ZodISOTime", "ZodIntersection", "ZodIssueCode", "ZodJWT", "ZodKSUID", "ZodLazy", "ZodLiteral", "ZodMap", "ZodNaN", "ZodNanoID", "ZodNever", "ZodNonOptional", "ZodNull", "ZodNullable", "ZodNumber", "ZodNumberFormat", "ZodObject", "ZodOptional", "ZodPipe", "ZodPrefault", "ZodPromise", "ZodReadonly", "ZodRealError", "ZodRecord", "ZodSet", "ZodString", "ZodStringFormat", "ZodSuccess", "ZodSymbol", "ZodTemplateLiteral", "ZodTransform", "ZodTuple", "ZodType", "ZodULID", "ZodURL", "ZodUUID", "ZodUndefined", "ZodUnion", "ZodUnknown", "ZodVoid", "ZodXID", "_ZodString", "_default", "any", "array", "base64", "base64url", "bigint", "boolean", "_catch", "check", "cidrv4", "cidrv6", "clone", "coerce_exports", "config", "core_exports", "cuid", "cuid2", "custom", "date", "discriminatedUnion", "e164", "email", "emoji", "_endsWith", "_enum", "file", "flattenError", "float32", "float64", "formatError", "_function", "getErrorMap", "globalRegistry", "_gt", "_gte", "guid", "_includes", "_instanceof", "int", "int32", "int64", "intersection", "ipv4", "ipv6", "iso_exports", "json", "jwt", "keyof", "ksuid", "lazy", "_length", "literal", "locales_exports", "looseObject", "_lowercase", "_lt", "_lte", "map", "_maxLength", "_maxSize", "_mime", "_minLength", "_minSize", "_multipleOf", "nan", "nanoid", "nativeEnum", "_negative", "never", "_nonnegative", "nonoptional", "_nonpositive", "_normalize", "_null", "nullable", "nullish", "number", "object", "optional", "_overwrite", "parse", "parseAsync", "partialRecord", "pipe", "_positive", "prefault", "preprocess", "prettifyError", "promise", "_property", "readonly", "record", "refine", "_regex", "regexes_exports", "registry", "safeParse", "safeParseAsync", "set", "setErrorMap", "_size", "_startsWith", "strictObject", "string", "stringFormat", "stringbool", "success", "superRefine", "symbol", "templateLiteral", "toJSONSchema", "_toLowerCase", "_toUpperCase", "transform", "treeifyError", "_trim", "tuple", "uint32", "uint64", "ulid", "_undefined", "union", "unknown", "_uppercase", "url", "uuid", "uuidv4", "uuidv6", "uuidv7", "_void", "xid", "core_exports", "__export", "$ZodAny", "$ZodArray", "$ZodAsyncError", "$ZodBase64", "$ZodBase64URL", "$ZodBigInt", "$ZodBigIntFormat", "$ZodBoolean", "$ZodCIDRv4", "$ZodCIDRv6", "$ZodCUID", "$ZodCUID2", "$ZodCatch", "$ZodCheck", "$ZodCheckBigIntFormat", "$ZodCheckEndsWith", "$ZodCheckGreaterThan", "$ZodCheckIncludes", "$ZodCheckLengthEquals", "$ZodCheckLessThan", "$ZodCheckLowerCase", "$ZodCheckMaxLength", "$ZodCheckMaxSize", "$ZodCheckMimeType", "$ZodCheckMinLength", "$ZodCheckMinSize", "$ZodCheckMultipleOf", "$ZodCheckNumberFormat", "$ZodCheckOverwrite", "$ZodCheckProperty", "$ZodCheckRegex", "$ZodCheckSizeEquals", "$ZodCheckStartsWith", "$ZodCheckStringFormat", "$ZodCheckUpperCase", "$ZodCustom", "$ZodCustomStringFormat", "$ZodDate", "$ZodDefault", "$ZodDiscriminatedUnion", "$ZodE164", "$ZodEmail", "$ZodEmoji", "$ZodEnum", "$ZodError", "$ZodFile", "$ZodFunction", "$ZodGUID", "$ZodIPv4", "$ZodIPv6", "$ZodISODate", "$ZodISODateTime", "$ZodISODuration", "$ZodISOTime", "$ZodIntersection", "$ZodJWT", "$ZodKSUID", "$ZodLazy", "$ZodLiteral", "$ZodMap", "$ZodNaN", "$ZodNanoID", "$ZodNever", "$ZodNonOptional", "$ZodNull", "$ZodNullable", "$ZodNumber", "$ZodNumberFormat", "$ZodObject", "$ZodOptional", "$ZodPipe", "$ZodPrefault", "$ZodPromise", "$ZodReadonly", "$ZodRealError", "$ZodRecord", "$ZodRegistry", "$ZodSet", "$ZodString", "$ZodStringFormat", "$ZodSuccess", "$ZodSymbol", "$ZodTemplateLiteral", "$ZodTransform", "$ZodTuple", "$ZodType", "$ZodULID", "$ZodURL", "$ZodUUID", "$ZodUndefined", "$ZodUnion", "$ZodUnknown", "$ZodVoid", "$ZodXID", "$brand", "$constructor", "$input", "$output", "Doc", "json_schema_exports", "JSONSchemaGenerator", "NEVER", "TimePrecision", "_any", "_array", "_base64", "_base64url", "_bigint", "_boolean", "_catch", "_cidrv4", "_cidrv6", "_coercedBigint", "_coercedBoolean", "_coercedDate", "_coercedNumber", "_coercedString", "_cuid", "_cuid2", "_custom", "_date", "_default", "_discriminatedUnion", "_e164", "_email", "_emoji", "_endsWith", "_enum", "_file", "_float32", "_float64", "_gt", "_gte", "_guid", "_includes", "_int", "_int32", "_int64", "_intersection", "_ipv4", "_ipv6", "_isoDate", "_isoDateTime", "_isoDuration", "_isoTime", "_jwt", "_ksuid", "_lazy", "_length", "_literal", "_lowercase", "_lt", "_lte", "_map", "_maxLength", "_maxSize", "_mime", "_minLength", "_minSize", "_multipleOf", "_nan", "_nanoid", "_nativeEnum", "_negative", "_never", "_nonnegative", "_nonoptional", "_nonpositive", "_normalize", "_null", "_nullable", "_number", "_optional", "_overwrite", "_parse", "_parseAsync", "_pipe", "_positive", "_promise", "_property", "_readonly", "_record", "_refine", "_regex", "_safeParse", "_safeParseAsync", "_set", "_size", "_startsWith", "_string", "_stringFormat", "_stringbool", "_success", "_symbol", "_templateLiteral", "_toLowerCase", "_toUpperCase", "_transform", "_trim", "_tuple", "_uint32", "_uint64", "_ulid", "_undefined", "_union", "_unknown", "_uppercase", "_url", "_uuid", "_uuidv4", "_uuidv6", "_uuidv7", "_void", "_xid", "clone", "config", "flattenError", "formatError", "_function", "globalConfig", "globalRegistry", "isValidBase64", "isValidBase64URL", "isValidJWT", "locales_exports", "parse", "parseAsync", "prettifyError", "regexes_exports", "registry", "safeParse", "safeParseAsync", "toDotPath", "toJSONSchema", "treeifyError", "util_exports", "version", "NEVER", "$constructor", "name", "initializer", "params", "init", "inst", "def", "_a", "k", "_", "Parent", "Definition", "fn", "$brand", "$ZodAsyncError", "globalConfig", "config", "newConfig", "util_exports", "__export", "BIGINT_FORMAT_RANGES", "Class", "NUMBER_FORMAT_RANGES", "aborted", "allowsEval", "assert", "assertEqual", "assertIs", "assertNever", "assertNotEqual", "assignProp", "cached", "captureStackTrace", "cleanEnum", "cleanRegex", "clone", "createTransparentProxy", "defineLazy", "esc", "escapeRegex", "extend", "finalizeIssue", "floatSafeRemainder", "getElementAtPath", "getEnumValues", "getLengthableOrigin", "getParsedType", "getSizableOrigin", "isObject", "isPlainObject", "issue", "joinValues", "jsonStringifyReplacer", "merge", "normalizeParams", "nullish", "numKeys", "omit", "optionalKeys", "partial", "pick", "prefixIssues", "primitiveTypes", "promiseAllObject", "propertyKeyTypes", "randomString", "required", "stringifyPrimitive", "unwrapMessage", "val", "_arg", "_x", "_", "entries", "numericValues", "v", "k", "array", "separator", "value", "getter", "input", "source", "start", "end", "step", "valDecCount", "stepDecCount", "decCount", "valInt", "stepInt", "object", "key", "target", "prop", "obj", "path", "acc", "promisesObj", "keys", "promises", "results", "resolvedObj", "i", "length", "chars", "str", "_args", "data", "F", "o", "ctor", "prot", "keyCount", "t", "inst", "def", "params", "cl", "_params", "receiver", "descriptor", "shape", "schema", "mask", "newShape", "currDef", "_shape", "a", "b", "oldShape", "x", "startIndex", "issues", "iss", "_a", "message", "ctx", "config", "full", "args", "el", "initializer", "inst", "def", "jsonStringifyReplacer", "$ZodError", "$constructor", "$ZodRealError", "flattenError", "error", "mapper", "issue", "fieldErrors", "formErrors", "sub", "formatError", "_mapper", "processError", "issues", "curr", "i", "el", "treeifyError", "result", "path", "_a", "_b", "fullpath", "terminal", "toDotPath", "segs", "seg", "prettifyError", "lines", "a", "b", "_parse", "_Err", "schema", "value", "_ctx", "_params", "ctx", "result", "$ZodAsyncError", "e", "iss", "finalizeIssue", "config", "captureStackTrace", "parse", "$ZodRealError", "_parseAsync", "params", "parseAsync", "_safeParse", "$ZodError", "safeParse", "_safeParseAsync", "safeParseAsync", "regexes_exports", "__export", "base64", "base64url", "bigint", "boolean", "browserEmail", "cidrv4", "cidrv6", "cuid", "cuid2", "date", "datetime", "domain", "duration", "e164", "email", "emoji", "extendedDuration", "guid", "hostname", "html5Email", "integer", "ipv4", "ipv6", "ksuid", "lowercase", "nanoid", "_null", "number", "rfc5322Email", "string", "time", "ulid", "_undefined", "unicodeEmail", "uppercase", "uuid", "uuid4", "uuid6", "uuid7", "xid", "version", "_emoji", "dateSource", "timeSource", "args", "hhmm", "opts", "timeRegex", "params", "regex", "_undefined", "lowercase", "uppercase", "$ZodCheck", "$constructor", "inst", "def", "_a", "numericOriginMap", "$ZodCheckLessThan", "origin", "bag", "curr", "payload", "$ZodCheckGreaterThan", "$ZodCheckMultipleOf", "floatSafeRemainder", "$ZodCheckNumberFormat", "isInt", "minimum", "maximum", "NUMBER_FORMAT_RANGES", "integer", "input", "$ZodCheckBigIntFormat", "BIGINT_FORMAT_RANGES", "$ZodCheckMaxSize", "val", "nullish", "getSizableOrigin", "$ZodCheckMinSize", "$ZodCheckSizeEquals", "size", "tooBig", "$ZodCheckMaxLength", "getLengthableOrigin", "$ZodCheckMinLength", "$ZodCheckLengthEquals", "length", "$ZodCheckStringFormat", "_b", "$ZodCheckRegex", "$ZodCheckLowerCase", "lowercase", "$ZodCheckUpperCase", "uppercase", "$ZodCheckIncludes", "escapedRegex", "escapeRegex", "pattern", "$ZodCheckStartsWith", "$ZodCheckEndsWith", "handleCheckPropertyResult", "result", "property", "prefixIssues", "$ZodCheckProperty", "$ZodCheckMimeType", "mimeSet", "$ZodCheckOverwrite", "Doc", "args", "fn", "arg", "lines", "x", "minIndent", "dedented", "line", "F", "version", "$ZodType", "$constructor", "inst", "def", "_a", "version", "checks", "ch", "fn", "runChecks", "payload", "ctx", "isAborted", "aborted", "asyncResult", "currLen", "_", "$ZodAsyncError", "result", "value", "r", "safeParse", "safeParseAsync", "$ZodString", "string", "$ZodStringFormat", "$ZodCheckStringFormat", "$ZodGUID", "guid", "$ZodUUID", "v", "uuid", "$ZodEmail", "email", "$ZodURL", "orig", "url", "href", "hostname", "$ZodEmoji", "emoji", "$ZodNanoID", "nanoid", "$ZodCUID", "cuid", "$ZodCUID2", "cuid2", "$ZodULID", "ulid", "$ZodXID", "xid", "$ZodKSUID", "ksuid", "$ZodISODateTime", "datetime", "$ZodISODate", "date", "$ZodISOTime", "time", "$ZodISODuration", "duration", "$ZodIPv4", "ipv4", "bag", "$ZodIPv6", "ipv6", "$ZodCIDRv4", "cidrv4", "$ZodCIDRv6", "cidrv6", "address", "prefix", "prefixNum", "isValidBase64", "data", "$ZodBase64", "base64", "isValidBase64URL", "base64url", "c", "padded", "$ZodBase64URL", "$ZodE164", "e164", "isValidJWT", "token", "algorithm", "tokensParts", "header", "parsedHeader", "$ZodJWT", "$ZodCustomStringFormat", "$ZodNumber", "number", "_ctx", "input", "received", "$ZodNumberFormat", "$ZodCheckNumberFormat", "$ZodBoolean", "boolean", "$ZodBigInt", "bigint", "$ZodBigIntFormat", "$ZodCheckBigIntFormat", "$ZodSymbol", "$ZodUndefined", "_undefined", "$ZodNull", "_null", "$ZodAny", "$ZodUnknown", "$ZodNever", "$ZodVoid", "$ZodDate", "isDate", "handleArrayResult", "final", "index", "prefixIssues", "$ZodArray", "proms", "i", "item", "handleObjectResult", "key", "handleOptionalObjectResult", "$ZodObject", "_normalized", "cached", "keys", "k", "okeys", "optionalKeys", "defineLazy", "shape", "propValues", "field", "generateFastpass", "doc", "Doc", "normalized", "parseStr", "esc", "ids", "counter", "id", "fastpass", "isObject", "jit", "globalConfig", "fastEnabled", "allowsEval", "catchall", "el", "isOptional", "unrecognized", "keySet", "_catchall", "t", "handleUnionResults", "results", "iss", "finalizeIssue", "config", "$ZodUnion", "o", "option", "patterns", "p", "cleanRegex", "async", "$ZodDiscriminatedUnion", "_super", "pv", "val", "disc", "opts", "map", "values", "opt", "$ZodIntersection", "left", "right", "handleIntersectionResults", "mergeValues", "a", "b", "isPlainObject", "bKeys", "sharedKeys", "newObj", "sharedValue", "newArray", "itemA", "itemB", "merged", "$ZodTuple", "items", "optStart", "tooBig", "tooSmall", "handleTupleResult", "rest", "$ZodRecord", "keyResult", "$ZodMap", "valueResult", "handleMapResult", "propertyKeyTypes", "$ZodSet", "handleSetResult", "$ZodEnum", "getEnumValues", "escapeRegex", "$ZodLiteral", "$ZodFile", "$ZodTransform", "_out", "output", "$ZodOptional", "pattern", "$ZodNullable", "$ZodDefault", "handleDefaultResult", "$ZodPrefault", "$ZodNonOptional", "x", "handleNonOptionalResult", "$ZodSuccess", "$ZodCatch", "$ZodNaN", "$ZodPipe", "handlePipeResult", "$ZodReadonly", "handleReadonlyResult", "$ZodTemplateLiteral", "regexParts", "part", "source", "start", "end", "primitiveTypes", "$ZodPromise", "inner", "$ZodLazy", "$ZodCustom", "$ZodCheck", "handleRefineResult", "_iss", "issue", "locales_exports", "__export", "ar_default", "az_default", "be_default", "ca_default", "cs_default", "de_default", "en_default", "eo_default", "es_default", "fa_default", "fi_default", "fr_default", "fr_CA_default", "he_default", "hu_default", "id_default", "it_default", "ja_default", "kh_default", "ko_default", "mk_default", "ms_default", "nl_default", "no_default", "ota_default", "pl_default", "ps_default", "pt_default", "ru_default", "sl_default", "sv_default", "ta_default", "th_default", "tr_default", "ua_default", "ur_default", "vi_default", "zh_CN_default", "zh_TW_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ar_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "az_default", "getBelarusianPlural", "count", "one", "few", "many", "absCount", "lastDigit", "lastTwoDigits", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "maxValue", "unit", "minValue", "_issue", "be_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ca_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "cs_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "de_default", "parsedType", "data", "t", "error", "Sizable", "getSizing", "origin", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "en_default", "parsedType", "data", "t", "error", "Sizable", "getSizing", "origin", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "eo_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "es_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "fa_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "fi_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "fr_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "fr_CA_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "he_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "hu_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "id_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "it_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ja_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "kh_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "suffix", "sizing", "unit", "_issue", "ko_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "mk_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ms_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "nl_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "no_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ota_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ps_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "pl_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "pt_default", "getRussianPlural", "count", "one", "few", "many", "absCount", "lastDigit", "lastTwoDigits", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "maxValue", "unit", "minValue", "_issue", "ru_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "sl_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "sv_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ta_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "th_default", "parsedType", "data", "t", "error", "Sizable", "getSizing", "origin", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "tr_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ua_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "ur_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "vi_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "zh_CN_default", "error", "Sizable", "getSizing", "origin", "parsedType", "data", "t", "Nouns", "issue", "stringifyPrimitive", "joinValues", "adj", "sizing", "_issue", "zh_TW_default", "$output", "$input", "$ZodRegistry", "schema", "_meta", "meta", "p", "pm", "registry", "globalRegistry", "_string", "Class", "params", "normalizeParams", "_coercedString", "_email", "_guid", "_uuid", "_uuidv4", "_uuidv6", "_uuidv7", "_url", "_emoji", "_nanoid", "_cuid", "_cuid2", "_ulid", "_xid", "_ksuid", "_ipv4", "_ipv6", "_cidrv4", "_cidrv6", "_base64", "_base64url", "_e164", "_jwt", "TimePrecision", "_isoDateTime", "_isoDate", "_isoTime", "_isoDuration", "_number", "_coercedNumber", "_int", "_float32", "_float64", "_int32", "_uint32", "_boolean", "_coercedBoolean", "_bigint", "_coercedBigint", "_int64", "_uint64", "_symbol", "_undefined", "_null", "_any", "_unknown", "_never", "_void", "_date", "_coercedDate", "_nan", "_lt", "value", "$ZodCheckLessThan", "_lte", "_gt", "value", "params", "$ZodCheckGreaterThan", "normalizeParams", "_gte", "_positive", "params", "_gt", "_negative", "_lt", "_nonpositive", "_lte", "_nonnegative", "_gte", "_multipleOf", "value", "$ZodCheckMultipleOf", "normalizeParams", "_maxSize", "maximum", "$ZodCheckMaxSize", "_minSize", "minimum", "$ZodCheckMinSize", "_size", "size", "$ZodCheckSizeEquals", "_maxLength", "$ZodCheckMaxLength", "_minLength", "$ZodCheckMinLength", "_length", "length", "$ZodCheckLengthEquals", "_regex", "pattern", "$ZodCheckRegex", "_lowercase", "$ZodCheckLowerCase", "_uppercase", "$ZodCheckUpperCase", "_includes", "includes", "$ZodCheckIncludes", "_startsWith", "prefix", "$ZodCheckStartsWith", "_endsWith", "suffix", "$ZodCheckEndsWith", "_property", "property", "schema", "$ZodCheckProperty", "_mime", "types", "$ZodCheckMimeType", "_overwrite", "tx", "$ZodCheckOverwrite", "_normalize", "form", "input", "_trim", "_toLowerCase", "_toUpperCase", "_array", "Class", "element", "_union", "options", "_discriminatedUnion", "discriminator", "_intersection", "left", "right", "_tuple", "items", "_paramsOrRest", "_params", "hasRest", "$ZodType", "rest", "_record", "keyType", "valueType", "_map", "_set", "_enum", "values", "entries", "v", "_nativeEnum", "_literal", "_file", "_transform", "fn", "_optional", "innerType", "_nullable", "_default", "defaultValue", "_nonoptional", "_success", "_catch", "catchValue", "_pipe", "in_", "out", "_readonly", "_templateLiteral", "parts", "_lazy", "getter", "_promise", "_custom", "norm", "_refine", "_stringbool", "Classes", "truthyArray", "falsyArray", "truthySet", "falsySet", "_Pipe", "$ZodPipe", "_Boolean", "$ZodBoolean", "_String", "$ZodString", "_Transform", "$ZodTransform", "payload", "data", "innerPipe", "_stringFormat", "format", "fnOrRegex", "def", "val", "$ZodFunction", "def", "func", "impl", "args", "parsedArgs", "parse", "output", "parseAsync", "F", "$ZodTuple", "_function", "params", "_tuple", "_array", "$ZodArray", "_unknown", "$ZodUnknown", "JSONSchemaGenerator", "params", "globalRegistry", "schema", "_params", "_a", "def", "formatMap", "seen", "result", "overrideSchema", "parent", "_json", "json", "minimum", "maximum", "format", "patterns", "contentEncoding", "regexes", "regex", "multipleOf", "exclusiveMaximum", "exclusiveMinimum", "shape", "key", "allKeys", "requiredKeys", "x", "i", "a", "b", "isSimpleIntersection", "val", "allOf", "prefixItems", "rest", "values", "getEnumValues", "v", "vals", "file", "mime", "m", "inner", "catchValue", "pattern", "innerType", "meta", "isTransforming", "root", "makeURI", "entry", "defsSegment", "externalId", "uriGenerator", "id", "defUriPrefix", "defId", "extractToDef", "ref", "ext", "flattenRef", "zodSchema", "_cached", "refSchema", "defs", "toJSONSchema", "input", "$ZodRegistry", "gen", "_", "schemas", "external", "_schema", "_ctx", "ctx", "option", "item", "json_schema_exports", "iso_exports", "__export", "ZodISODate", "ZodISODateTime", "ZodISODuration", "ZodISOTime", "date", "datetime", "duration", "time", "ZodISODateTime", "$constructor", "inst", "def", "$ZodISODateTime", "ZodStringFormat", "datetime", "params", "_isoDateTime", "ZodISODate", "$ZodISODate", "date", "_isoDate", "ZodISOTime", "$ZodISOTime", "time", "_isoTime", "ZodISODuration", "$ZodISODuration", "duration", "_isoDuration", "initializer", "inst", "issues", "$ZodError", "mapper", "formatError", "flattenError", "issue", "ZodError", "$constructor", "ZodRealError", "parse", "_parse", "ZodRealError", "parseAsync", "_parseAsync", "safeParse", "_safeParse", "safeParseAsync", "_safeParseAsync", "ZodType", "$constructor", "inst", "def", "$ZodType", "checks", "ch", "params", "clone", "reg", "meta", "data", "parse", "safeParse", "parseAsync", "safeParseAsync", "check", "refine", "refinement", "superRefine", "fn", "_overwrite", "optional", "nullable", "nonoptional", "array", "arg", "union", "intersection", "tx", "pipe", "transform", "_default", "prefault", "_catch", "target", "readonly", "description", "cl", "globalRegistry", "args", "_ZodString", "$ZodString", "bag", "_regex", "_includes", "_startsWith", "_endsWith", "_minLength", "_maxLength", "_length", "_lowercase", "_uppercase", "_trim", "_normalize", "_toLowerCase", "_toUpperCase", "ZodString", "_email", "ZodEmail", "_url", "ZodURL", "_jwt", "ZodJWT", "_emoji", "ZodEmoji", "_guid", "ZodGUID", "_uuid", "ZodUUID", "_uuidv4", "_uuidv6", "_uuidv7", "_nanoid", "ZodNanoID", "_cuid", "ZodCUID", "_cuid2", "ZodCUID2", "_ulid", "ZodULID", "_base64", "ZodBase64", "_base64url", "ZodBase64URL", "_xid", "ZodXID", "_ksuid", "ZodKSUID", "_ipv4", "ZodIPv4", "_ipv6", "ZodIPv6", "_cidrv4", "ZodCIDRv4", "_cidrv6", "ZodCIDRv6", "_e164", "ZodE164", "datetime", "date", "time", "duration", "string", "_string", "ZodStringFormat", "$ZodStringFormat", "$ZodEmail", "email", "$ZodGUID", "guid", "$ZodUUID", "uuid", "uuidv4", "uuidv6", "uuidv7", "$ZodURL", "url", "$ZodEmoji", "emoji", "$ZodNanoID", "nanoid", "$ZodCUID", "cuid", "$ZodCUID2", "cuid2", "$ZodULID", "ulid", "$ZodXID", "xid", "$ZodKSUID", "ksuid", "$ZodIPv4", "ipv4", "$ZodIPv6", "ipv6", "$ZodCIDRv4", "cidrv4", "$ZodCIDRv6", "cidrv6", "$ZodBase64", "base64", "$ZodBase64URL", "base64url", "$ZodE164", "e164", "$ZodJWT", "jwt", "ZodCustomStringFormat", "$ZodCustomStringFormat", "stringFormat", "format", "fnOrRegex", "_params", "_stringFormat", "ZodNumber", "$ZodNumber", "value", "_gt", "_gte", "_lt", "_lte", "int", "_multipleOf", "number", "_number", "ZodNumberFormat", "$ZodNumberFormat", "_int", "float32", "_float32", "float64", "_float64", "int32", "_int32", "uint32", "_uint32", "ZodBoolean", "$ZodBoolean", "boolean", "_boolean", "ZodBigInt", "$ZodBigInt", "bigint", "_bigint", "ZodBigIntFormat", "$ZodBigIntFormat", "int64", "_int64", "uint64", "_uint64", "ZodSymbol", "$ZodSymbol", "symbol", "_symbol", "ZodUndefined", "$ZodUndefined", "_undefined", "ZodNull", "$constructor", "inst", "def", "$ZodNull", "ZodType", "_null", "params", "ZodAny", "$constructor", "inst", "def", "$ZodAny", "ZodType", "any", "_any", "ZodUnknown", "$ZodUnknown", "unknown", "_unknown", "ZodNever", "$ZodNever", "never", "params", "_never", "ZodVoid", "$ZodVoid", "_void", "ZodDate", "$constructor", "inst", "def", "$ZodDate", "ZodType", "value", "params", "_gte", "_lte", "c", "date", "_date", "ZodArray", "$ZodArray", "minLength", "_minLength", "maxLength", "_maxLength", "len", "_length", "array", "element", "_array", "keyof", "schema", "shape", "literal", "ZodObject", "$ZodObject", "util_exports", "_enum", "catchall", "unknown", "never", "incoming", "other", "mask", "args", "ZodOptional", "ZodNonOptional", "object", "strictObject", "looseObject", "ZodUnion", "$ZodUnion", "union", "options", "ZodDiscriminatedUnion", "$ZodDiscriminatedUnion", "discriminatedUnion", "discriminator", "ZodIntersection", "$ZodIntersection", "intersection", "left", "right", "ZodTuple", "$ZodTuple", "rest", "tuple", "items", "_paramsOrRest", "_params", "hasRest", "$ZodType", "ZodRecord", "$ZodRecord", "record", "keyType", "valueType", "partialRecord", "ZodMap", "$ZodMap", "map", "ZodSet", "$ZodSet", "_minSize", "_maxSize", "_size", "set", "ZodEnum", "$ZodEnum", "keys", "values", "newEntries", "entries", "v", "nativeEnum", "entries", "params", "ZodEnum", "util_exports", "ZodLiteral", "$constructor", "inst", "def", "$ZodLiteral", "ZodType", "literal", "value", "ZodFile", "$ZodFile", "size", "_minSize", "_maxSize", "types", "_mime", "file", "_file", "ZodTransform", "$ZodTransform", "payload", "_ctx", "issue", "_issue", "output", "transform", "fn", "ZodOptional", "$ZodOptional", "optional", "innerType", "ZodNullable", "$ZodNullable", "nullable", "nullish", "ZodDefault", "$ZodDefault", "_default", "defaultValue", "ZodPrefault", "$ZodPrefault", "prefault", "ZodNonOptional", "$ZodNonOptional", "nonoptional", "ZodSuccess", "$ZodSuccess", "success", "ZodCatch", "$ZodCatch", "_catch", "catchValue", "ZodNaN", "$constructor", "inst", "def", "$ZodNaN", "ZodType", "nan", "params", "_nan", "ZodPipe", "$ZodPipe", "pipe", "in_", "out", "ZodReadonly", "$ZodReadonly", "readonly", "innerType", "ZodTemplateLiteral", "$ZodTemplateLiteral", "templateLiteral", "parts", "util_exports", "ZodLazy", "$ZodLazy", "lazy", "getter", "ZodPromise", "$ZodPromise", "promise", "ZodCustom", "$ZodCustom", "check", "fn", "ch", "$ZodCheck", "custom", "_params", "_custom", "refine", "_refine", "superRefine", "payload", "issue", "_issue", "_instanceof", "cls", "data", "stringbool", "args", "_stringbool", "ZodPipe", "ZodBoolean", "ZodString", "ZodTransform", "json", "params", "jsonSchema", "lazy", "union", "string", "number", "boolean", "_null", "array", "record", "preprocess", "fn", "schema", "pipe", "transform", "ZodIssueCode", "setErrorMap", "map", "config", "getErrorMap", "ZodFirstPartyTypeKind", "coerce_exports", "__export", "bigint", "boolean", "date", "number", "string", "string", "params", "_coercedString", "ZodString", "number", "_coercedNumber", "ZodNumber", "boolean", "_coercedBoolean", "ZodBoolean", "bigint", "_coercedBigint", "ZodBigInt", "date", "_coercedDate", "ZodDate", "config", "en_default", "r", "t", "n", "e", "u", "a", "o", "i", "s", "h", "b", "g", "d", "f", "c", "l", "p", "v", "m", "y", "N", "x", "M", "r", "t", "n", "c", "e", "H", "$", "j", "x", "o", "u", "i", "s", "d", "h", "w", "S", "k", "y", "import_seedrandom", "_PseudoRandom", "seed", "seedrandom", "min", "max", "arr", "set", "size", "index", "i", "item", "odds", "array", "result", "j", "PseudoRandom", "a", "t", "o", "r", "h", "n", "p", "M", "u", "e", "w", "b", "i", "l", "lab_default", "c", "f", "y", "v", "x", "z", "s", "d", "g", "m", "N", "F", "L", "I", "P", "j", "k", "q", "A", "B", "r", "t", "a", "n", "u", "h", "o", "e", "c", "i", "l", "f", "b", "d", "p", "v", "M", "y", "x", "s", "lch_default", "multiplyMatrices", "A", "B", "m", "x", "p", "B_cols", "_", "i", "product", "row", "col", "ret", "c", "isString", "str", "type", "o", "serializeNumber", "n", "precision", "unit", "isNone", "toPrecision", "skipNone", "integer", "digits", "multiplier", "angleFactor", "parseFunction", "isFunctionRegex", "isNumberRegex", "unitValueRegex", "singleArgument", "parts", "args", "$0", "rawArg", "match", "arg", "unitlessArg", "last", "arr", "interpolate", "start", "end", "interpolateInv", "value", "mapRange", "from", "to", "parseCoordGrammar", "coordGrammars", "coordGrammar", "range", "clamp", "min", "val", "max", "copySign", "spow", "base", "exp", "zdiv", "d", "bisectLeft", "lo", "hi", "mid", "Hooks", "name", "callback", "first", "env", "hooks", "defaults", "msg", "WHITES", "getWhite", "adapt", "W1", "W2", "XYZ", "options", "noneTypes", "coerceCoords", "space", "format", "coords", "id", "coordMeta", "providedType", "coordName", "fromRange", "toRange", "util.mapRange", "parse", "meta", "util.parseFunction", "alternateId", "ids", "alpha", "ColorSpace", "colorSpec", "specId", "types", "didYouMean", "registryId", "cssId", "util.last", "formatId", "color", "getColor", "\u03B5", "_ColorSpace", "white", "getPath", "epsilon", "coord", "processFormat", "myPath", "otherPath", "connectionSpace", "connectionSpaceIndex", "alias", "alternatives", "ref", "workingSpace", "coordType", "normalizedCoord", "__publicField", "s", "coordFormats", "outputType", "suffix", "xyz_d65", "RGBColorSpace", "XYZ_D65", "rgb", "xyz", "getAll", "get", "prop", "index", "setAll", "set", "object", "XYZ_D50", "\u03B53", "\u03BA", "lab", "xyz_d50", "f", "Lab", "constrain", "angle", "adjust", "arc", "angles", "a1", "a2", "angleDiff", "lch", "L", "a", "b", "hue", "constrainAngle", "LCH", "Lightness", "Chroma", "Hue", "Gfactor", "\u03C0", "r2d", "d2r", "pow7", "x2", "deltaE2000", "sample", "kL", "kC", "kH", "L1", "b1", "C1", "L2", "b2", "C2", "Cbar", "C7", "G", "adash1", "adash2", "Cdash1", "Cdash2", "h1", "h2", "\u0394L", "\u0394C", "hdiff", "hsum", "habs", "\u0394h", "\u0394H", "Ldash", "Cdash", "Cdash7", "hdash", "lsq", "SL", "SC", "T", "SH", "\u0394\u03B8", "RC", "RT", "dE", "XYZtoLMS_M", "LMStoXYZ_M", "LMStoLab_M", "LabtoLMS_M", "OKLab", "LMSg", "LMS", "deltaEOK", "oklab", "\u0394a", "\u0394b", "inGamut", "clone", "distance", "color1", "color2", "coords1", "coords2", "acc", "c1", "c2", "deltaE76", "deltaECMC", "l", "H1", "H2", "C4", "F", "Yw", "XYZ_Abs_D65", "v", "AbsXYZ", "g", "ninv", "c3", "pinv", "d0", "XYZtoCone_M", "ConetoXYZ_M", "ConetoIab_M", "IabtoCone_M", "Jzazbz", "Xa", "Ya", "Za", "Xm", "Ym", "PQLMS", "num", "denom", "Iz", "az", "bz", "Jz", "jzczhz", "jzazbz", "deltaEJz", "Jz1", "Cz1", "Hz1", "Jz2", "Cz2", "Hz2", "\u0394J", "m1", "m2", "im1", "im2", "LMStoIPT_M", "IPTtoLMS_M", "ictcp", "LMStoICtCp", "ICtCp", "ICtCptoLMS", "deltaEITP", "I1", "T1", "P1", "I2", "T2", "P2", "adaptedCoef", "adaptedCoefInv", "tau", "cat16", "cat16Inv", "surroundMap", "hueQuadMap", "rad2deg", "deg2rad", "fl", "unadapt", "adapted", "constant", "cabs", "hueQuadrature", "h", "hp", "hii", "ei", "eii", "Hi", "t", "invHueQuadrature", "H", "Hp", "environment", "refWhite", "adaptingLuminance", "backgroundLuminance", "surround", "discounting", "xyzW", "yw", "rgbW", "k4", "rgbCW", "rgbAW", "viewingConditions", "fromCam16", "cam16", "hRad", "cosh", "sinh", "Jroot", "et", "p1", "p2", "r", "rgb_c", "toCam16", "xyzd65", "xyz100", "rgbA", "J", "Q", "C", "M", "toLstar", "y", "fromLstar", "lstar", "fromHct", "j", "threshold", "max_attempts", "attempt", "delta", "toHct", "hct", "ucsCoeff", "convertUcsAb", "hrad", "deltaEHCT", "t1", "t2", "deltaEMethods", "calcEpsilon", "jnd", "order", "GMAPPRESET", "toGamut", "method", "deltaEMethod", "blackWhiteClamp", "util.isString", "spaceColor", "toGamutCSS", "de", "clipped", "channelMeta", "channel", "util.isNone", "mapSpace", "coordId", "mappedColor", "low", "high", "bounds", "COLORS", "origin", "oklchSpace", "origin_OKLCH", "black", "clip", "_color", "destColor", "spaceCoords", "util.clamp", "min_inGamut", "current", "E", "chroma", "serialize", "customOptions", "checkInGamut", "util.serializeNumber", "strAlpha", "toXYZ_M", "fromXYZ_M", "REC2020Linear", "\u03B1", "\u03B2", "REC2020", "RGB", "P3Linear", "sRGBLinear", "KEYWORDS", "coordGrammarNumber", "sRGB", "sign", "abs", "rgba", "component", "collapse", "collapsible", "P3", "supportsNone", "display", "fallbackColor", "equals", "getLuminance", "setLuminance", "register", "Color", "contrastWCAG21", "Y1", "Y2", "normBG", "normTXT", "revTXT", "revBG", "blkThrs", "blkClmp", "loClip", "deltaYmin", "scaleBoW", "loBoWoffset", "scaleWoB", "fclamp", "Y", "linearize", "contrastAPCA", "background", "foreground", "S", "Sapc", "R", "lumTxt", "lumBg", "Ytxt", "Ybg", "BoW", "contrastMichelson", "contrastWeber", "contrastLstar", "lab_d65", "phi", "contrastDeltaPhi", "Lstr1", "Lstr2", "deltaPhiStar", "contrast", "algorithm", "rest", "algorithms", "contrastAlgorithms", "uv", "X", "Z", "xy", "sum", "deltaE", "lighten", "amount", "lightness", "darken", "mix", "steps", "colorRange", "isRange", "maxDeltaE", "maxSteps", "rangeOptions", "totalDelta", "actualSteps", "step", "maxDelta", "cur", "\u0394\u0395", "prev", "outputSpace", "progression", "premultiplied", "rangeArgs", "\u03B81", "\u03B82", "angles.adjust", "HSL", "hsl", "k", "HSV", "hsv", "hwb", "w", "gray", "A98Linear", "a98rgb", "ProPhotoLinear", "Et", "Et2", "prophoto", "oklch", "U_PRIME_WHITE", "V_PRIME_WHITE", "Luv", "up", "vp", "u", "LCHuv", "m_r0", "m_r1", "m_r2", "m_g0", "m_g1", "m_g2", "m_b0", "m_b1", "m_b2", "distanceFromOriginAngle", "slope", "intercept", "calculateBoundingLines", "sub1", "sub2", "s1r", "s2r", "s3r", "s1g", "s2g", "s3g", "s1b", "s2b", "s3b", "calcMaxChromaHsluv", "lines", "hueRad", "r0", "r1", "g0", "g1", "b0", "hsluv", "distanceFromOrigin", "calcMaxChromaHpluv", "hpluv", "minv", "rec2100Pq", "scale", "rec2100Hlg", "CATs", "defineCAT", "toCone_M", "fromCone_M", "\u03C1s", "\u03B3s", "\u03B2s", "\u03C1d", "\u03B3d", "\u03B2d", "scaled_cone_M", "ACEScg", "ACES_min_nonzero", "ACES_cc_max", "acescc", "_Color", "code", "instance", "returns", "func", "exports", "util", "key", "spaces", "addSpaceAccessors", "propId", "obj", "property", "receiver", "variations", "chromaticity", "luminance", "interpolation", "contrastMethods", "k", "lch_default", "lab_default", "red", "w", "blue", "teal", "purple", "yellow", "orange", "green", "botColor", "redTeamColors", "generateTeamColors", "blueTeamColors", "tealTeamColors", "purpleTeamColors", "yellowTeamColors", "orangeTeamColors", "greenTeamColors", "botTeamColors", "baseColor", "hsl", "colorCount", "_", "index", "progression", "saturation", "lightness", "nationColors", "humanColors", "botColors", "fallbackColors", "k", "lch_default", "lab_default", "ColorAllocator", "colors", "fallback", "team", "ColoredTeams", "blueTeamColors", "redTeamColors", "tealTeamColors", "purpleTeamColors", "yellowTeamColors", "orangeTeamColors", "greenTeamColors", "botTeamColors", "id", "selectedIndex", "PseudoRandom", "simpleHash", "assignedColors", "selectDistinctColorIndex", "color", "rgb", "w", "playerId", "teamColors", "colorIndex", "availableColors", "assignedLabColors", "toColor", "maxDeltaE", "maxIndex", "i", "deltaE", "minDeltaE", "lab1", "min", "assigned", "deltaE2000", "c1", "c2", "colord", "lab", "Color", "PastelTheme", "PseudoRandom", "ColorAllocator", "humanColors", "fallbackColors", "botColors", "nationColors", "w", "team", "player", "territoryColor", "lightLAB", "darkLAB", "contrast", "loopLimit", "maxIterations", "contrastTarget", "loopCount", "luminanceChange", "first", "second", "num", "low", "high", "gm", "tile", "mag", "PastelThemeDark", "PastelTheme", "w", "gm", "tile", "mag", "DEFENSE_DEBUFF_MIDPOINT", "DEFENSE_DEBUFF_DECAY_RATE", "JwksSchema", "external_exports", "numPlayersConfig", "DefaultServerConfig", "audience", "jwksUrl", "response", "result", "error", "map", "mode", "numPlayerTeams", "l", "m", "s", "r", "base", "p", "Duos", "Trios", "Quads", "HumansVsNations", "gameID", "simpleHash", "index", "DefaultConfig", "_serverConfig", "_gameConfig", "_userSettings", "_isReplay", "PastelTheme", "PastelThemeDark", "difficulty", "falloutRatio", "unitType", "numPlayerFactories", "rel", "dist", "numPorts", "debuff", "baseGold", "numPortBonus", "bonus", "numTradeShips", "numPlayerPorts", "numPlayerTradeShips", "combined", "decayRate", "sigmoid", "type", "numUnits", "game", "player", "assertNever", "costFn", "types", "acc", "sender", "gm", "attackTroops", "attacker", "defender", "tileToConquer", "mag", "speed", "dp", "defenseSig", "largeDefenderSpeedDebuff", "largeDefenderAttackDebuff", "largeAttackBonus", "largeAttackerSpeedBonus", "within", "numAdjacentTilesWithEnemy", "totalPorts", "playerInfo", "strength", "maxTroops", "city", "a", "b", "max", "toAdd", "ratio", "level", "nukeType", "humans", "tilesOwned", "targetTroops", "excessTroops", "scalingFactor", "steepness", "normalizedExcess", "DevServerConfig", "DefaultServerConfig", "DevConfig", "DefaultConfig", "sc", "gc", "us", "isReplay", "preprodConfig", "DefaultServerConfig", "prodConfig", "DefaultServerConfig", "cachedSC", "getConfig", "gameConfig", "userSettings", "isReplay", "sc", "getServerConfigFromClient", "DevConfig", "DefaultConfig", "response", "config", "getServerConfig", "getServerConfig", "gameEnv", "DevServerConfig", "preprodConfig", "prodConfig", "AllianceExtensionExecution", "from", "toID", "mg", "ticks", "to", "alliance", "wasOnlyOneAgreed", "AllianceRequestExecution", "requestor", "recipientID", "mg", "ticks", "recipient", "incoming", "r", "AllianceRequestReplyExecution", "requestorID", "recipient", "accept", "mg", "ticks", "request", "ar", "BreakAllianceExecution", "requestor", "recipientID", "mg", "ticks", "alliance", "player", "renderTroops", "troops", "renderNumber", "num", "fixedPoints", "FlatBinaryHeap", "capacity", "tile", "priority", "parent", "topTile", "topPri", "lastPri", "lastTile", "i", "left", "right", "child", "newCap", "newPri", "malusForRetreat", "AttackExecution", "startTroops", "_owner", "_targetID", "sourceTile", "removeTroops", "FlatBinaryHeap", "PseudoRandom", "mg", "ticks", "targetPlayer", "incoming", "outgoing", "tile", "malusPercent", "deaths", "renderTroops", "survivors", "troopCount", "targetIsPlayer", "numTilesPerTick", "tileToConquer", "onBorder", "n", "attackerTroopLoss", "defenderTroopLoss", "tilesPerTickUsed", "target", "request", "ar", "tickNow", "neighbor", "numOwnedByMe", "mag", "priority", "i", "t", "no", "BoatRetreatExecution", "player", "unitID", "mg", "ticks", "unit", "EmojiExecution", "requestor", "recipientID", "emoji", "mg", "ticks", "AllPlayers", "emojiString", "flattenedEmojiTable", "import_fastpriorityqueue", "SerialAStar", "src", "dst", "iterations", "maxTries", "graph", "directionChangePenalty", "FastPriorityQueue", "a", "b", "startPoint", "tile", "closest", "source", "fwdCurrent", "bwdCurrent", "current", "isForward", "neighbor", "gScore", "openSet", "cameFrom", "tentativeGScore", "penalty", "prev", "prevDir", "newDir", "totalG", "fScore", "posA", "posB", "from", "to", "fromPos", "toPos", "dx", "dy", "fwdPath", "GameMapAdapter", "gameMap", "waterPath", "node", "base", "from", "to", "toWater", "fromShore", "toShore", "MiniAStar", "miniMap", "src", "dst", "iterations", "maxTries", "directionChangePenalty", "miniSrc", "srcPoint", "miniDst", "SerialAStar", "cellSrc", "Cell", "cellDst", "fixExtremes", "upscalePath", "tr", "c", "upscaled", "srcIndex", "findCell", "dstIndex", "path", "scaleFactor", "scaledPath", "point", "smoothPath", "i", "current", "next", "dx", "dy", "steps", "step", "_GameMapImpl", "width", "height", "terrainData", "numLandTiles_", "ref", "y", "x", "Cell", "tr", "playerId", "value", "existingFallout", "magnitude", "neighbors", "w", "fn", "c1", "c2", "tile", "filter", "seen", "q", "curr", "n", "tu", "tileRef", "state", "newFallout", "GameMapImpl", "euclDistFN", "root", "dist", "center", "dist2", "gm", "rootX", "rootY", "dx", "dy", "manhattanDistFN", "andFN", "x", "y", "gm", "tile", "canBuildTransportShip", "game", "player", "tile", "dst", "targetTransportTile", "other", "myPlayerBordersOcean", "bt", "otherPlayerBordersOcean", "transportShipSpawn", "tiles", "andFN", "manhattanDistFN", "_", "t", "sorted", "a", "b", "targetTile", "spawn", "closestShoreFromPlayer", "targetTransportTile", "gm", "tile", "dst", "dstTile", "closestShoreFromPlayer", "closestShoreTN", "player", "target", "shoreTiles", "t", "closest", "current", "closestDistance", "bestShoreDeploymentSource", "candidates", "candidateShoreTiles", "aStar", "MiniAStar", "result", "path", "potential", "neighbors", "n", "closestManhattanDistance", "minX", "minY", "maxX", "maxY", "bestByManhattan", "extremumTiles", "borderShoreTiles", "distance", "cell", "samplingInterval", "sampledTiles", "_", "index", "searchDist", "tn", "andFN", "manhattanDistFN", "a", "b", "CubicBezierCurve", "p0", "p1", "p2", "p3", "t", "T", "TT", "TTT", "tt", "ttt", "x", "y", "DistanceBasedBezierCurve", "distanceIncrement", "distance", "pixelSpacing", "precision", "prevPoint", "cumulativeDistance", "currentPoint", "dx", "dy", "segmentLength", "finalPoint", "index", "dist", "i", "parabolaMinHeight", "ParabolaPathFinder", "mg", "orig", "dst", "increment", "distanceBasedHeight", "p0", "p3", "dx", "dy", "distance", "maxHeight", "p1", "p2", "DistanceBasedBezierCurve", "speed", "nextPoint", "point", "AirPathFinder", "random", "tile", "x", "y", "dstX", "dstY", "nextX", "nextY", "ratio", "PathFinder", "_PathFinder", "game", "newAStar", "iterations", "waterPath", "maxTries", "curr", "MiniAStar", "dist", "tolerance", "malusForRetreat", "TransportShipExecution", "attacker", "targetID", "ref", "startTroops", "src", "mg", "ticks", "PathFinder", "targetTransportTile", "closestTileSrc", "boatOwner", "newSrc", "result", "deaths", "survivors", "renderTroops", "AttackExecution", "getSpawnTiles", "gm", "tile", "euclDistFN", "t", "closestTile", "refs", "minDistance", "minRef", "ref", "distance", "closestTwoTiles", "x", "y", "xSorted", "a", "b", "ySorted", "i", "j", "result", "currentX", "currentY", "calculateTerritoryCenter", "game", "target", "borderTiles", "minX", "maxX", "minY", "maxY", "centerX", "centerY", "centerTile", "closestDistanceSquared", "dx", "dy", "distSquared", "emojiId", "e", "flattenedEmojiTable", "EMOJI_ASSIST_ACCEPT", "EMOJI_RELATION_TOO_LOW", "EMOJI_TARGET_ME", "EMOJI_TARGET_ALLY", "EMOJI_HECKLE", "BotBehavior", "random", "game", "player", "triggerRatio", "reserveRatio", "expandRatio", "emoji", "EmojiExecution", "other", "difficulty", "target", "alliance", "maxTroops", "incomingAttacks", "attack", "largestAttack", "largestAttacker", "traitors", "n", "ally", "borderingFriends", "borderingEnemies", "incomingAttackPlayer", "mostHated", "nearestIslandEnemy", "bots", "density", "p", "reducedBots", "b", "bot", "friend", "boundingBoxCenter", "calculateBoundingBoxCenter", "filteredPlayers", "playerCenter", "sortedPlayers", "filteredPlayer", "filteredPlayerCenter", "playerCenterTile", "filteredPlayerCenterTile", "distance", "a", "selectedEnemy", "toAttack", "neighbors", "neighbor", "tile", "AttackExecution", "force", "targetTroops", "troops", "closest", "closestTwoTiles", "t", "TransportShipExecution", "enemy", "lastSent", "BotExecution", "bot", "PseudoRandom", "simpleHash", "mg", "ticks", "BotBehavior", "req", "alliance", "human", "AllianceExtensionExecution", "toAttack", "odds", "traversalStates", "PlayerExecution", "player", "mg", "ticks", "simpleHash", "u", "owner", "captor", "gold", "troopInc", "goldFromWorkers", "alliances", "alliance", "embargoes", "embargo", "start", "end", "clusters", "largestIndex", "largestSize", "i", "size", "largestCluster", "calculateBoundingBox", "surroundedBy", "cluster", "enemies", "tile", "hasUnownedNeighbor", "n", "ownerId", "enemy", "enemyBox", "clusterBox", "inscribed", "enemyTiles", "tr", "t", "capturing", "firstTile", "tiles", "cb", "neighbors", "neighbor", "largestNeighborAttack", "largestTroopCount", "attack", "getMode", "borderTiles", "state", "currentGen", "visited", "startTile", "totalTiles", "startTiles", "neighborFn", "includeFn", "result", "stack", "SpawnExecution", "playerInfo", "tile", "mg", "ticks", "player", "t", "getSpawnTiles", "PlayerExecution", "BotExecution", "BotSpawner", "gs", "gameID", "PseudoRandom", "simpleHash", "numBots", "tries", "candidate", "spawn", "botName", "tile", "SpawnExecution", "PlayerInfo", "COMMUNITY_FULL_ELF_NAMES", "specialOffset", "SPECIAL_FULL_ELF_NAMES", "prefixOffset", "COMMUNITY_PREFIXES", "GameUpdateType", "CityStopHandler", "mg", "station", "trainExecution", "stationOwner", "trainOwner", "goldBonus", "rel", "PortStopHandler", "random", "FactoryStopHandler", "createTrainStopHandlers", "TrainStation", "unit", "PseudoRandom", "otherPlayer", "player", "railRoad", "neighbor", "toRemove", "r", "railTiles", "tile", "neighbors", "cluster", "type", "handler", "TrainStationMapAdapter", "game", "node", "from", "to", "Cluster", "stations", "other", "s", "tradingStations", "Railroad", "from", "to", "tiles", "game", "railTiles", "tile", "getOrientedRailroad", "railroad", "forward", "OrientedRailroad", "TrainExecution", "railNetwork", "player", "source", "destination", "numCars", "mg", "ticks", "stations", "railroad", "getOrientedRailroad", "spawn", "tile", "i", "car", "train", "from", "speed", "tileToSave", "newTile", "carTileIndex", "railRoad", "leftOver", "TrainStationExecution", "unit", "spawnTrains", "mg", "ticks", "PseudoRandom", "TrainStation", "spawnRate", "i", "station", "currentTick", "cluster", "availableForTrade", "destination", "TrainExecution", "CityExecution", "city", "mg", "ticks", "TrainStationExecution", "ShellExecution", "spawn", "_owner", "ownerUnit", "target", "mg", "ticks", "AirPathFinder", "PseudoRandom", "i", "result", "damage", "baseDamage", "damageMultiplier", "DefensePostExecution", "post", "mg", "ticks", "shellAttackRate", "ShellExecution", "FactoryExecution", "factory", "mg", "ticks", "structures", "TrainStationExecution", "unit", "SPRITE_RADIUS", "NukeExecution", "nukeType", "player", "dst", "src", "speed", "waitTicks", "mg", "ticks", "ParabolaPathFinder", "magnitude", "rand", "PseudoRandom", "inner2", "outer2", "_", "n", "d2", "toDestroy", "attacked", "tile", "owner", "prev", "threshold", "attackedPlayer", "tilesDestroyed", "allianceRequest", "ar", "alliance", "spawn", "target", "silo", "nextTile", "trajectoryTiles", "targetRangeSquared", "allTiles", "targetTile", "nukeTile", "maxTroops", "attack", "deaths", "unit", "range", "rangeSquared", "isStructureType", "MirvExecution", "player", "dst", "mg", "ticks", "PseudoRandom", "simpleHash", "ParabolaPathFinder", "alliance", "spawn", "x", "y", "result", "dsts", "attempts", "potential", "a", "b", "NukeExecution", "ref", "taken", "tries", "mirvRange2", "tile", "t", "MissileSiloExecution", "silo", "mg", "ticks", "frontTime", "TradeShipExecution", "origOwner", "srcPort", "_dstPort", "mg", "ticks", "PathFinder", "spawn", "tradeShipOwner", "dstPortOwner", "ports", "distSortUnit", "curTile", "result", "gold", "renderNumber", "PortExecution", "port", "mg", "ticks", "PseudoRandom", "ports", "TradeShipExecution", "numTradeShips", "numPlayerPorts", "numPlayerTradeShips", "spawnRate", "i", "TrainStationExecution", "p", "p1", "p2", "weightedPorts", "otherPort", "expanded", "tooClose", "closeBonus", "SAMMissileExecution", "spawn", "_owner", "ownerUnit", "target", "targetTile", "mg", "ticks", "AirPathFinder", "PseudoRandom", "nukesWhitelist", "result", "SAMTargetingSystem", "mg", "sam", "nearbyUnits", "nearbyUnitSet", "u", "nukeId", "tile", "samTile", "range", "rangeSquared", "currentTile", "unit", "trajectory", "currentIndex", "explosionTick", "i", "trajectoryTile", "nukeTickToReach", "samTickToReach", "tickBeforeShooting", "ticks", "detectionRange", "nukes", "isUnit", "targets", "nuke", "cached", "interceptionTile", "b", "SAMLauncherExecution", "player", "type", "random", "spawnTile", "frontTime", "PseudoRandom", "mirvWarheadTargets", "dst", "target", "samOwner", "SAMMissileExecution", "WarshipExecution", "input", "mg", "ticks", "PathFinder", "PseudoRandom", "isUnit", "spawn", "hasPort", "patrolRangeSquared", "ships", "potentialTargets", "unit", "distSquared", "b", "unitA", "distA", "unitB", "distB", "shellAttackRate", "ShellExecution", "i", "result", "allowShoreline", "warshipPatrolRange", "maxAttemptBeforeExpand", "attempts", "expandCount", "x", "y", "tile", "ConstructionExecution", "player", "constructionType", "tile", "mg", "ticks", "info", "spawnTile", "duration", "NukeExecution", "MirvExecution", "WarshipExecution", "PortExecution", "MissileSiloExecution", "DefensePostExecution", "SAMLauncherExecution", "CityExecution", "FactoryExecution", "type", "DeleteUnitExecution", "player", "unitId", "mg", "ticks", "unit", "u", "tileOwner", "DonateGoldExecution", "sender", "recipientID", "goldNum", "toInt", "mg", "ticks", "relationUpdate", "difficulty", "assertNever", "goldSent", "chunkSize", "chunkSizeMultiplier", "adjustedChunkSize", "DonateTroopsExecution", "sender", "recipientID", "troops", "mg", "ticks", "PseudoRandom", "maxDonation", "minTroops", "difficulty", "recipientMaxTroops", "assertNever", "EmbargoAllExecution", "player", "action", "mg", "_", "me", "p", "EmbargoExecution", "player", "targetID", "action", "mg", "_", "structureSpawnTileValue", "mg", "player", "type", "borderTiles", "otherUnits", "borderSpacing", "structureSpacing", "tile", "w", "closestBorderDist", "closestTile", "otherTiles", "u", "closestOther", "closestTwoTiles", "d", "closestOtherDist", "closest", "neighbors", "id", "neighbor", "protectTiles", "unit", "range", "rangeSquared", "closestBorder", "maybeProtected", "AllianceBehavior", "random", "game", "player", "req", "alliance", "human", "AllianceExtensionExecution", "borderingEnemies", "difficulty", "shouldSendAllianceRequest", "isAcceptablePlayerType", "p", "enemy", "AllianceRequestExecution", "otherPlayer", "otherHasMoreTroops", "otherHasMoreMaxTroops", "otherHasMoreTiles", "borderingPlayers", "n", "borderingFriends", "o", "_FakeHumanExecution", "gameID", "nation", "PseudoRandom", "simpleHash", "mg", "player", "p", "other", "ticks", "rl", "SpawnExecution", "BotBehavior", "AllianceBehavior", "border", "t", "borderingPlayers", "a", "b", "borderingFriends", "borderingEnemies", "silos", "nukeType", "range", "structures", "structureTiles", "u", "allTiles", "bestTile", "bestValue", "outer", "tile", "boundingBox", "boundingBoxTiles", "value", "tick", "targetPlayer", "NukeExecution", "targets", "dist", "euclDistFN", "tileValue", "unit", "prev", "cur", "dist50", "siloTiles", "result", "closestTwoTiles", "closestSilo", "distanceSquared", "distanceToClosestSilo", "_tick", "_", "num", "type", "multiplier", "owned", "perceivedCostMultiplier", "perceivedCost", "ConstructionExecution", "tiles", "valueFunction", "structureSpawnTileValue", "v", "numTiles", "sampleSize", "remaining", "ports", "ships", "port", "targetTile", "calculateBoundingBox", "i", "randX", "randY", "Cell", "randTile", "portTile", "attempts", "oceanShore", "src", "dst", "TransportShipExecution", "tries", "cell", "x", "y", "highInterestOnly", "owner", "inboundMIRVSender", "victoryDenialTarget", "steamrollStopTarget", "attackers", "totalLand", "best", "severity", "team", "teamMembers", "teamShare", "largestMember", "largestTiles", "member", "share", "validTargets", "allPlayers", "topPlayer", "threshold", "players", "attacker", "enemyMirvs", "mirv", "target", "calculateTerritoryCenter", "enemy", "centerTile", "MirvExecution", "cooldownTile", "maxAge", "ship", "difficulty", "FakeHumanExecution", "MarkDisconnectedExecution", "player", "isDisconnected", "mg", "ticks", "MoveWarshipExecution", "owner", "unitId", "position", "mg", "ticks", "warship", "u", "NoOpExecution", "mg", "ticks", "QuickChatExecution", "sender", "recipientID", "quickChatKey", "target", "mg", "ticks", "message", "fullKey", "cancelDelay", "RetreatExecution", "player", "attackID", "mg", "ticks", "TargetPlayerExecution", "requestor", "targetID", "mg", "ticks", "UpgradeStructureExecution", "player", "unitId", "mg", "ticks", "unit", "_PlayerSpawner", "gm", "gameID", "PseudoRandom", "simpleHash", "x", "y", "tries", "tile", "tooCloseToOtherPlayer", "spawn", "player", "spawnLand", "SpawnExecution", "PlayerSpawner", "Executor", "mg", "gameID", "clientID", "PseudoRandom", "simpleHash", "turn", "i", "intent", "player", "NoOpExecution", "AttackExecution", "RetreatExecution", "BoatRetreatExecution", "MoveWarshipExecution", "SpawnExecution", "TransportShipExecution", "AllianceRequestExecution", "AllianceRequestReplyExecution", "BreakAllianceExecution", "TargetPlayerExecution", "EmojiExecution", "DonateTroopsExecution", "DonateGoldExecution", "EmbargoExecution", "EmbargoAllExecution", "ConstructionExecution", "AllianceExtensionExecution", "UpgradeStructureExecution", "DeleteUnitExecution", "QuickChatExecution", "MarkDisconnectedExecution", "numBots", "BotSpawner", "PlayerSpawner", "execs", "nation", "FakeHumanExecution", "WinCheckExecution", "mg", "ticks", "sorted", "b", "max", "timeElapsed", "numTilesWithoutFallout", "teamToTiles", "player", "team", "a", "ColoredTeams", "AllianceImpl", "mg", "requestor_", "recipient_", "createdAt_", "id_", "player", "AllianceRequestImpl", "requestor_", "recipient_", "tickCreated", "game", "AttackImpl", "_id", "_target", "_attacker", "_troops", "_sourceTile", "_border", "_mg", "troops", "a", "tile", "Cell", "averageX", "averageY", "t", "UnitImpl", "_type", "mg", "_tile", "_id", "_owner", "params", "toInt", "targetable", "tile", "troops", "newOwner", "u", "delta", "attacker", "withinInt", "displayMessage", "destroyer", "b", "underConstruction", "simpleHash", "targetTile", "i", "max", "target", "targeted", "trainStation", "loaded", "Donation", "recipient", "tick", "PlayerImpl", "mg", "_smallID", "playerInfo", "startTroops", "_team", "toInt", "PseudoRandom", "simpleHash", "outgoingAllianceRequests", "ar", "a", "p", "types", "ts", "u", "type", "built", "constructing", "unit", "total", "other", "border", "neighbor", "ns", "owner", "troops", "tile", "id", "attack", "hasSpawned", "recent", "b", "alliance", "elapsed", "remaining", "relation", "relationValue", "k", "v", "r", "delta", "newRelation", "within", "sign", "t", "ally", "emoji", "msg", "AllPlayers", "recipientID", "prevMsgs", "donation", "removed", "renderTroops", "gold", "renderNumber", "isTemporary", "embargo", "ColoredTeams", "treatAFKFriendly", "toAdd", "toRemove", "actualRemoved", "minInt", "spawnTile", "params", "cost", "UnitImpl", "targetTile", "range", "existing", "validTiles", "UnitType", "canUpgrade", "existingUnit", "unitType", "canBuildTransportShip", "assertNever", "spawns", "silo", "distSortUnit", "manhattanDistFN", "validTileSet", "tiles", "searchRadius", "searchRadiusSquared", "unitTypeValue", "nearbyUnits", "nearbyTiles", "gm", "validSet", "minDistSquared", "valid", "isDisconnected", "acc", "player", "target", "sourceTile", "AttackImpl", "andFN", "bestShoreDeploymentSource", "RailroadExecution", "railRoad", "mg", "ticks", "tiles", "i", "direction", "tile", "next", "x", "y", "nextX", "nextY", "dx", "dy", "prev", "current", "x1", "y1", "x2", "y2", "x3", "y3", "dx1", "dy1", "dx2", "dy2", "updatedRailTiles", "StationManagerImpl", "station", "unit", "RailPathFinderServiceImpl", "game", "from", "to", "astar", "MiniAStar", "stationAStar", "SerialAStar", "TrainStationMapAdapter", "createRailNetwork", "stationManager", "pathService", "RailNetworkImpl", "neighbors", "cluster", "neighbor", "stations", "Cluster", "editedClusters", "a", "b", "neighborStation", "distanceToStation", "neighborCluster", "rail", "path", "railRoad", "Railroad", "RailroadExecution", "start", "dest", "maxDistance", "visited", "queue", "distance", "current", "clustersToMerge", "merged", "bombUnits", "BombUnitSchema", "external_exports", "unitTypeToBombUnit", "boatUnits", "BoatUnitSchema", "otherUnits", "OtherUnitSchema", "unitTypeToOtherUnit", "ATTACK_INDEX_SENT", "ATTACK_INDEX_RECV", "ATTACK_INDEX_CANCEL", "BOAT_INDEX_SENT", "BOAT_INDEX_ARRIVE", "BOAT_INDEX_CAPTURE", "BOAT_INDEX_DESTROY", "BOMB_INDEX_LAUNCH", "BOMB_INDEX_LAND", "BOMB_INDEX_INTERCEPT", "GOLD_INDEX_WORK", "GOLD_INDEX_WAR", "GOLD_INDEX_TRADE", "GOLD_INDEX_STEAL", "OTHER_INDEX_BUILT", "OTHER_INDEX_DESTROY", "OTHER_INDEX_CAPTURE", "OTHER_INDEX_LOST", "OTHER_INDEX_UPGRADE", "BigIntStringSchema", "val", "AtLeastOneNumberSchema", "PlayerStatsSchema", "_bigint", "value", "StatsImpl", "player", "clientID", "data", "index", "p", "type", "_a", "nukeType", "unitTypeToBombUnit", "otherUnitType", "unitTypeToOtherUnit", "tick", "target", "troops", "ATTACK_INDEX_SENT", "ATTACK_INDEX_RECV", "ATTACK_INDEX_CANCEL", "BOAT_INDEX_SENT", "gold", "BOAT_INDEX_ARRIVE", "GOLD_INDEX_TRADE", "BOAT_INDEX_CAPTURE", "GOLD_INDEX_STEAL", "BOAT_INDEX_DESTROY", "BOMB_INDEX_LAUNCH", "BOMB_INDEX_LAND", "count", "BOMB_INDEX_INTERCEPT", "GOLD_INDEX_WORK", "captured", "GOLD_INDEX_WAR", "OTHER_INDEX_BUILT", "OTHER_INDEX_CAPTURE", "OTHER_INDEX_UPGRADE", "OTHER_INDEX_DESTROY", "OTHER_INDEX_LOST", "fillTimeMs", "assignTeams", "players", "teams", "maxTeamSize", "getMaxTeamSize", "result", "teamPlayerCount", "clanGroups", "noClanPlayers", "player", "sortedClans", "a", "b", "_", "clanPlayers", "team", "teamSize", "t", "p", "nationPlayers", "PseudoRandom", "simpleHash", "otherPlayers", "getMaxTeamSize", "numPlayers", "numTeams", "TerraNulliusImpl", "UnitGrid", "gm", "x", "y", "unit", "tile", "gridX", "gridY", "unitSet", "newTile", "oldTile", "newGridX", "newGridY", "range", "cellSize", "startGridX", "endGridX", "startGridY", "endGridY", "tileX", "tileY", "dx", "dy", "searchRange", "types", "predicate", "includeUnderConstruction", "nearby", "rangeSquared", "typeSet", "cy", "cx", "type", "distSquared", "value", "playerId", "createGame", "humans", "nations", "gameMap", "miniGameMap", "config", "stats", "StatsImpl", "GameImpl", "_humans", "_nations", "_map", "_config", "_stats", "createGameUpdatesMap", "ColoredTeams", "createRailNetwork", "TerraNulliusImpl", "UnitGrid", "numPlayerTeams", "HumansVsNations", "players", "Duos", "Trios", "Quads", "i", "p", "n", "allPlayers", "playerToTeam", "assignTeams", "playerInfo", "team", "ref", "id", "update", "old", "tile", "value", "types", "type", "total", "player", "requestor", "recipient", "ar", "correspondingReq", "AllianceRequestImpl", "request", "alliance", "AllianceImpl", "e", "inited", "unInited", "hash", "activeExecs", "exec", "execution", "PlayerImpl", "rand", "simpleHash", "cell", "x", "y", "ns", "dx", "dy", "newX", "newY", "callback", "owner", "previousOwner", "tiles", "t", "neighbor", "targeter", "target", "breaker", "other", "breakerSet", "alliances", "a", "p1Set", "msg", "winner", "allPlayersStats", "clientId", "message", "playerID", "goldAmount", "params", "category", "isFrom", "unitID", "u", "searchRange", "playerId", "includeUnderConstruction", "predicate", "fn", "c1", "c2", "filter", "tu", "conqueror", "conquered", "ships", "ship", "gold", "renderNumber", "map", "GameUpdateType", "key", "loadedMaps", "loadTerrainMap", "map", "mapSize", "terrainMapFileLoader", "cached", "mapFiles", "manifest", "gameMap", "genTerrainFromBin", "miniMap", "nation", "result", "mapData", "data", "GameMapImpl", "import_index", "DataSet", "mod", "ParserError", "PhraseBuilder", "RegExpMatcher", "SyntaxKind", "TextCensor", "assignIncrementingIds", "asteriskCensorStrategy", "collapseDuplicatesTransformer", "compareMatchByPositionAndId", "englishDataset", "englishRecommendedBlacklistMatcherTransformers", "englishRecommendedTransformers", "englishRecommendedWhitelistMatcherTransformers", "fixedCharCensorStrategy", "fixedPhraseCensorStrategy", "grawlixCensorStrategy", "keepEndCensorStrategy", "keepStartCensorStrategy", "parseRawPattern", "pattern", "randomCharFromSetCensorStrategy", "remapCharactersTransformer", "resolveConfusablesTransformer", "resolveLeetSpeakTransformer", "skipNonAlphabeticTransformer", "toAsciiLowerCaseTransformer", "QuickChat_default", "countries_default", "base64url_exports", "__export", "decode", "encode", "encoder", "decoder", "MAX_INT32", "encodeBase64", "input", "CHUNK_SIZE", "arr", "decodeBase64", "encoded", "binary", "bytes", "decode", "input", "decoder", "encoded", "decodeBase64", "encode", "unencoded", "encoder", "encodeBase64", "decodePatternData", "b64", "base64urlDecode", "bytes", "version", "byte1", "byte2", "scale", "width", "height", "expectedBytes", "ProductSchema", "external_exports", "PatternNameSchema", "PatternDataSchema", "val", "decodePatternData", "base64url_exports", "ColorPaletteSchema", "PatternSchema", "CosmeticsSchema", "LogSeverity", "TeamCountConfigSchema", "external_exports", "Duos", "Trios", "Quads", "HumansVsNations", "GameConfigSchema", "GameMapType", "Difficulty", "GameType", "GameMode", "GameMapSize", "UnitType", "TeamSchema", "SafeString", "PersistentIdSchema", "JwtTokenSchema", "TokenSchema", "v", "EmojiSchema", "flattenedEmojiTable", "ID", "AllPlayersStatsSchema", "PlayerStatsSchema", "UsernameSchema", "countryCodes", "countries_default", "c", "QuickChatKeySchema", "QuickChat_default", "category", "entries", "entry", "BaseIntentSchema", "AllianceExtensionIntentSchema", "AttackIntentSchema", "SpawnIntentSchema", "BoatAttackIntentSchema", "AllianceRequestIntentSchema", "AllianceRequestReplyIntentSchema", "BreakAllianceIntentSchema", "TargetPlayerIntentSchema", "EmojiIntentSchema", "AllPlayers", "EmbargoIntentSchema", "EmbargoAllIntentSchema", "DonateGoldIntentSchema", "DonateTroopIntentSchema", "BuildUnitIntentSchema", "UpgradeStructureIntentSchema", "CancelAttackIntentSchema", "CancelBoatIntentSchema", "MoveWarshipIntentSchema", "DeleteUnitIntentSchema", "QuickChatIntentSchema", "MarkDisconnectedIntentSchema", "KickPlayerIntentSchema", "IntentSchema", "TurnSchema", "FlagSchema", "val", "PlayerCosmeticRefsSchema", "PatternNameSchema", "PlayerPatternSchema", "PatternDataSchema", "ColorPaletteSchema", "PlayerColorSchema", "PlayerCosmeticsSchema", "PlayerSchema", "GameStartInfoSchema", "WinnerSchema", "ServerTurnMessageSchema", "ServerPingMessageSchema", "ServerPrestartMessageSchema", "ServerStartGameMessageSchema", "ServerDesyncSchema", "ServerErrorSchema", "ServerMessageSchema", "ClientSendWinnerSchema", "ClientHashSchema", "ClientLogMessageSchema", "ClientPingMessageSchema", "ClientIntentMessageSchema", "ClientJoinMessageSchema", "ClientRejoinMessageSchema", "ClientMessageSchema", "PlayerRecordSchema", "GameEndInfoSchema", "GitCommitSchema", "PartialAnalyticsRecordSchema", "AnalyticsRecordSchema", "GameRecordSchema", "PartialGameRecordSchema", "matcher", "RegExpMatcher", "englishDataset", "englishRecommendedTransformers", "resolveConfusablesTransformer", "skipNonAlphabeticTransformer", "collapseDuplicatesTransformer", "resolveLeetSpeakTransformer", "shadowNames", "fixProfaneUsername", "username", "isProfaneUsername", "simpleHash", "matcher", "censorNameWithClanTag", "clanTag", "getClanTagOriginalCase", "nameWithoutClan", "clanTagIsProfane", "usernameIsProfane", "censoredNameWithoutClan", "createGameRunner", "gameStart", "clientID", "mapLoader", "callBack", "config", "getConfig", "gameMap", "loadTerrainMap", "random", "PseudoRandom", "simpleHash", "humans", "p", "PlayerInfo", "censorNameWithClanTag", "nations", "n", "Nation", "Cell", "game", "createGame", "gr", "GameRunner", "Executor", "execManager", "WinCheckExecution", "turn", "updates", "tickExecutionDuration", "startTime", "error", "placeName", "packedTileUpdates", "u", "playerID", "x", "y", "player", "tile", "actions", "AllPlayers", "other", "alliance", "attackID", "condition", "a", "attack", "targetTile"]
}
